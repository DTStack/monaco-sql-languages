var xve=Object.defineProperty;var Dve=(i,e,t)=>e in i?xve(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var hv=(i,e,t)=>(Dve(i,typeof e!="symbol"?e+"":e,t),t);function Vre(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Ive(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var Hre={exports:{}},D5={},$re={exports:{}},ji={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO=Symbol.for("react.element"),Tve=Symbol.for("react.portal"),kve=Symbol.for("react.fragment"),Nve=Symbol.for("react.strict_mode"),Ave=Symbol.for("react.profiler"),Ove=Symbol.for("react.provider"),Mve=Symbol.for("react.context"),Rve=Symbol.for("react.forward_ref"),Pve=Symbol.for("react.suspense"),Fve=Symbol.for("react.memo"),Bve=Symbol.for("react.lazy"),DZ=Symbol.iterator;function Wve(i){return i===null||typeof i!="object"?null:(i=DZ&&i[DZ]||i["@@iterator"],typeof i=="function"?i:null)}var zre={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ure=Object.assign,jre={};function DS(i,e,t){this.props=i,this.context=e,this.refs=jre,this.updater=t||zre}DS.prototype.isReactComponent={};DS.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};DS.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Kre(){}Kre.prototype=DS.prototype;function xj(i,e,t){this.props=i,this.context=e,this.refs=jre,this.updater=t||zre}var Dj=xj.prototype=new Kre;Dj.constructor=xj;Ure(Dj,DS.prototype);Dj.isPureReactComponent=!0;var IZ=Array.isArray,qre=Object.prototype.hasOwnProperty,Ij={current:null},Gre={key:!0,ref:!0,__self:!0,__source:!0};function Yre(i,e,t){var n,r={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)qre.call(e,n)&&!Gre.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];r.children=u}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:jO,type:i,key:s,ref:o,props:r,_owner:Ij.current}}function Vve(i,e){return{$$typeof:jO,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function Tj(i){return typeof i=="object"&&i!==null&&i.$$typeof===jO}function Hve(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var TZ=/\/+/g;function x7(i,e){return typeof i=="object"&&i!==null&&i.key!=null?Hve(""+i.key):e.toString(36)}function IP(i,e,t,n,r){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case jO:case Tve:o=!0}}if(o)return o=i,r=r(o),i=n===""?"."+x7(o,0):n,IZ(r)?(t="",i!=null&&(t=i.replace(TZ,"$&/")+"/"),IP(r,e,t,"",function(d){return d})):r!=null&&(Tj(r)&&(r=Vve(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(TZ,"$&/")+"/")+i)),e.push(r)),1;if(o=0,n=n===""?".":n+":",IZ(i))for(var a=0;a<i.length;a++){s=i[a];var u=n+x7(s,a);o+=IP(s,e,t,u,r)}else if(u=Wve(i),typeof u=="function")for(i=u.call(i),a=0;!(s=i.next()).done;)s=s.value,u=n+x7(s,a++),o+=IP(s,e,t,u,r);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function GM(i,e,t){if(i==null)return i;var n=[],r=0;return IP(i,n,"","",function(s){return e.call(t,s,r++)}),n}function $ve(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var Tl={current:null},TP={transition:null},zve={ReactCurrentDispatcher:Tl,ReactCurrentBatchConfig:TP,ReactCurrentOwner:Ij};function Zre(){throw Error("act(...) is not supported in production builds of React.")}ji.Children={map:GM,forEach:function(i,e,t){GM(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return GM(i,function(){e++}),e},toArray:function(i){return GM(i,function(e){return e})||[]},only:function(i){if(!Tj(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};ji.Component=DS;ji.Fragment=kve;ji.Profiler=Ave;ji.PureComponent=xj;ji.StrictMode=Nve;ji.Suspense=Pve;ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zve;ji.act=Zre;ji.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=Ure({},i.props),r=i.key,s=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ij.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(u in e)qre.call(e,u)&&!Gre.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];n.children=a}return{$$typeof:jO,type:i.type,key:r,ref:s,props:n,_owner:o}};ji.createContext=function(i){return i={$$typeof:Mve,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:Ove,_context:i},i.Consumer=i};ji.createElement=Yre;ji.createFactory=function(i){var e=Yre.bind(null,i);return e.type=i,e};ji.createRef=function(){return{current:null}};ji.forwardRef=function(i){return{$$typeof:Rve,render:i}};ji.isValidElement=Tj;ji.lazy=function(i){return{$$typeof:Bve,_payload:{_status:-1,_result:i},_init:$ve}};ji.memo=function(i,e){return{$$typeof:Fve,type:i,compare:e===void 0?null:e}};ji.startTransition=function(i){var e=TP.transition;TP.transition={};try{i()}finally{TP.transition=e}};ji.unstable_act=Zre;ji.useCallback=function(i,e){return Tl.current.useCallback(i,e)};ji.useContext=function(i){return Tl.current.useContext(i)};ji.useDebugValue=function(){};ji.useDeferredValue=function(i){return Tl.current.useDeferredValue(i)};ji.useEffect=function(i,e){return Tl.current.useEffect(i,e)};ji.useId=function(){return Tl.current.useId()};ji.useImperativeHandle=function(i,e,t){return Tl.current.useImperativeHandle(i,e,t)};ji.useInsertionEffect=function(i,e){return Tl.current.useInsertionEffect(i,e)};ji.useLayoutEffect=function(i,e){return Tl.current.useLayoutEffect(i,e)};ji.useMemo=function(i,e){return Tl.current.useMemo(i,e)};ji.useReducer=function(i,e,t){return Tl.current.useReducer(i,e,t)};ji.useRef=function(i){return Tl.current.useRef(i)};ji.useState=function(i){return Tl.current.useState(i)};ji.useSyncExternalStore=function(i,e,t){return Tl.current.useSyncExternalStore(i,e,t)};ji.useTransition=function(){return Tl.current.useTransition()};ji.version="18.3.1";$re.exports=ji;var he=$re.exports;const re=Wp(he),Uve=Vre({__proto__:null,default:re},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jve=he,Kve=Symbol.for("react.element"),qve=Symbol.for("react.fragment"),Gve=Object.prototype.hasOwnProperty,Yve=jve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zve={key:!0,ref:!0,__self:!0,__source:!0};function Xre(i,e,t){var n,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Gve.call(e,n)&&!Zve.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Kve,type:i,key:s,ref:o,props:r,_owner:Yve.current}}D5.Fragment=qve;D5.jsx=Xre;D5.jsxs=Xre;Hre.exports=D5;var Rc=Hre.exports,HW={},Qre={exports:{}},mc={},Jre={exports:{}},ese={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(q,z){var k=q.length;q.push(z);e:for(;0<k;){var K=k-1>>>1,fe=q[K];if(0<r(fe,z))q[K]=z,q[k]=fe,k=K;else break e}}function t(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var z=q[0],k=q.pop();if(k!==z){q[0]=k;e:for(var K=0,fe=q.length,ne=fe>>>1;K<ne;){var be=2*(K+1)-1,De=q[be],Ve=be+1,rt=q[Ve];if(0>r(De,k))Ve<fe&&0>r(rt,De)?(q[K]=rt,q[Ve]=k,K=Ve):(q[K]=De,q[be]=k,K=be);else if(Ve<fe&&0>r(rt,k))q[K]=rt,q[Ve]=k,K=Ve;else break e}}return z}function r(q,z){var k=q.sortIndex-z.sortIndex;return k!==0?k:q.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var u=[],d=[],h=1,f=null,p=3,m=!1,v=!1,b=!1,L=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var z=t(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=q)n(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(d)}}function A(q){if(b=!1,E(q),!v)if(t(u)!==null)v=!0,j(N);else{var z=t(d);z!==null&&U(A,z.startTime-q)}}function N(q,z){v=!1,b&&(b=!1,S(R),R=-1),m=!0;var k=p;try{for(E(z),f=t(u);f!==null&&(!(f.expirationTime>z)||q&&!$());){var K=f.callback;if(typeof K=="function"){f.callback=null,p=f.priorityLevel;var fe=K(f.expirationTime<=z);z=i.unstable_now(),typeof fe=="function"?f.callback=fe:f===t(u)&&n(u),E(z)}else n(u);f=t(u)}if(f!==null)var ne=!0;else{var be=t(d);be!==null&&U(A,be.startTime-z),ne=!1}return ne}finally{f=null,p=k,m=!1}}var V=!1,M=null,R=-1,Y=5,X=-1;function $(){return!(i.unstable_now()-X<Y)}function T(){if(M!==null){var q=i.unstable_now();X=q;var z=!0;try{z=M(!0,q)}finally{z?O():(V=!1,M=null)}}else V=!1}var O;if(typeof y=="function")O=function(){y(T)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=T,O=function(){W.postMessage(null)}}else O=function(){L(T,0)};function j(q){M=q,V||(V=!0,O())}function U(q,z){R=L(function(){q(i.unstable_now())},z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_continueExecution=function(){v||m||(v=!0,j(N))},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(q){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var k=p;p=z;try{return q()}finally{p=k}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(q,z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var k=p;p=q;try{return z()}finally{p=k}},i.unstable_scheduleCallback=function(q,z,k){var K=i.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?K+k:K):k=K,q){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=k+fe,q={id:h++,callback:z,priorityLevel:q,startTime:k,expirationTime:fe,sortIndex:-1},k>K?(q.sortIndex=k,e(d,q),t(u)===null&&q===t(d)&&(b?(S(R),R=-1):b=!0,U(A,k-K))):(q.sortIndex=fe,e(u,q),v||m||(v=!0,j(N))),q},i.unstable_shouldYield=$,i.unstable_wrapCallback=function(q){var z=p;return function(){var k=p;p=z;try{return q.apply(this,arguments)}finally{p=k}}}})(ese);Jre.exports=ese;var Xve=Jre.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qve=he,lc=Xve;function Lt(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tse=new Set,Q2={};function dC(i,e){ky(i,e),ky(i+"Capture",e)}function ky(i,e){for(Q2[i]=e,i=0;i<e.length;i++)tse.add(e[i])}var Ep=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$W=Object.prototype.hasOwnProperty,Jve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kZ={},NZ={};function e0e(i){return $W.call(NZ,i)?!0:$W.call(kZ,i)?!1:Jve.test(i)?NZ[i]=!0:(kZ[i]=!0,!1)}function t0e(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function n0e(i,e,t,n){if(e===null||typeof e>"u"||t0e(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kl(i,e,t,n,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Na={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Na[i]=new kl(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Na[e]=new kl(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Na[i]=new kl(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Na[i]=new kl(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Na[i]=new kl(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Na[i]=new kl(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Na[i]=new kl(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Na[i]=new kl(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Na[i]=new kl(i,5,!1,i.toLowerCase(),null,!1,!1)});var kj=/[\-:]([a-z])/g;function Nj(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(kj,Nj);Na[e]=new kl(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(kj,Nj);Na[e]=new kl(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(kj,Nj);Na[e]=new kl(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Na[i]=new kl(i,1,!1,i.toLowerCase(),null,!1,!1)});Na.xlinkHref=new kl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Na[i]=new kl(i,1,!1,i.toLowerCase(),null,!0,!0)});function Aj(i,e,t,n){var r=Na.hasOwnProperty(e)?Na[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n0e(e,t,r,n)&&(t=null),n||r===null?e0e(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Vp=Qve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,YM=Symbol.for("react.element"),bw=Symbol.for("react.portal"),Cw=Symbol.for("react.fragment"),Oj=Symbol.for("react.strict_mode"),zW=Symbol.for("react.profiler"),nse=Symbol.for("react.provider"),ise=Symbol.for("react.context"),Mj=Symbol.for("react.forward_ref"),UW=Symbol.for("react.suspense"),jW=Symbol.for("react.suspense_list"),Rj=Symbol.for("react.memo"),xv=Symbol.for("react.lazy"),rse=Symbol.for("react.offscreen"),AZ=Symbol.iterator;function fN(i){return i===null||typeof i!="object"?null:(i=AZ&&i[AZ]||i["@@iterator"],typeof i=="function"?i:null)}var $s=Object.assign,D7;function $N(i){if(D7===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D7=e&&e[1]||""}return`
`+D7+i}var I7=!1;function T7(i,e){if(!i||I7)return"";I7=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(i,[],e)}else{try{e.call()}catch(d){n=d}i.call(e.prototype)}else{try{throw Error()}catch(d){n=d}i()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),s=n.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var u=`
`+r[o].replace(" at new "," at ");return i.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",i.displayName)),u}while(1<=o&&0<=a);break}}}finally{I7=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?$N(i):""}function i0e(i){switch(i.tag){case 5:return $N(i.type);case 16:return $N("Lazy");case 13:return $N("Suspense");case 19:return $N("SuspenseList");case 0:case 2:case 15:return i=T7(i.type,!1),i;case 11:return i=T7(i.type.render,!1),i;case 1:return i=T7(i.type,!0),i;default:return""}}function KW(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Cw:return"Fragment";case bw:return"Portal";case zW:return"Profiler";case Oj:return"StrictMode";case UW:return"Suspense";case jW:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ise:return(i.displayName||"Context")+".Consumer";case nse:return(i._context.displayName||"Context")+".Provider";case Mj:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Rj:return e=i.displayName||null,e!==null?e:KW(i.type)||"Memo";case xv:e=i._payload,i=i._init;try{return KW(i(e))}catch{}}return null}function r0e(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KW(e);case 8:return e===Oj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function f0(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function sse(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s0e(i){var e=sse(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function ZM(i){i._valueTracker||(i._valueTracker=s0e(i))}function ose(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=sse(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function R4(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function qW(i,e){var t=e.checked;return $s({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function OZ(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=f0(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ase(i,e){e=e.checked,e!=null&&Aj(i,"checked",e,!1)}function GW(i,e){ase(i,e);var t=f0(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?YW(i,e.type,t):e.hasOwnProperty("defaultValue")&&YW(i,e.type,f0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function MZ(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function YW(i,e,t){(e!=="number"||R4(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var zN=Array.isArray;function Gw(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+f0(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function ZW(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Lt(91));return $s({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function RZ(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Lt(92));if(zN(t)){if(1<t.length)throw Error(Lt(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:f0(t)}}function lse(i,e){var t=f0(e.value),n=f0(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function PZ(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function use(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XW(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?use(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var XM,cse=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(XM=XM||document.createElement("div"),XM.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=XM.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function J2(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var f2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o0e=["Webkit","ms","Moz","O"];Object.keys(f2).forEach(function(i){o0e.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),f2[e]=f2[i]})});function dse(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||f2.hasOwnProperty(i)&&f2[i]?(""+e).trim():e+"px"}function hse(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=dse(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var a0e=$s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QW(i,e){if(e){if(a0e[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Lt(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Lt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Lt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Lt(62))}}function JW(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eV=null;function Pj(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var tV=null,Yw=null,Zw=null;function FZ(i){if(i=GO(i)){if(typeof tV!="function")throw Error(Lt(280));var e=i.stateNode;e&&(e=A5(e),tV(i.stateNode,i.type,e))}}function fse(i){Yw?Zw?Zw.push(i):Zw=[i]:Yw=i}function gse(){if(Yw){var i=Yw,e=Zw;if(Zw=Yw=null,FZ(i),e)for(i=0;i<e.length;i++)FZ(e[i])}}function pse(i,e){return i(e)}function mse(){}var k7=!1;function _se(i,e,t){if(k7)return i(e,t);k7=!0;try{return pse(i,e,t)}finally{k7=!1,(Yw!==null||Zw!==null)&&(mse(),gse())}}function eA(i,e){var t=i.stateNode;if(t===null)return null;var n=A5(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Lt(231,e,typeof t));return t}var nV=!1;if(Ep)try{var gN={};Object.defineProperty(gN,"passive",{get:function(){nV=!0}}),window.addEventListener("test",gN,gN),window.removeEventListener("test",gN,gN)}catch{nV=!1}function l0e(i,e,t,n,r,s,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var g2=!1,P4=null,F4=!1,iV=null,u0e={onError:function(i){g2=!0,P4=i}};function c0e(i,e,t,n,r,s,o,a,u){g2=!1,P4=null,l0e.apply(u0e,arguments)}function d0e(i,e,t,n,r,s,o,a,u){if(c0e.apply(this,arguments),g2){if(g2){var d=P4;g2=!1,P4=null}else throw Error(Lt(198));F4||(F4=!0,iV=d)}}function hC(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function vse(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function BZ(i){if(hC(i)!==i)throw Error(Lt(188))}function h0e(i){var e=i.alternate;if(!e){if(e=hC(i),e===null)throw Error(Lt(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return BZ(r),i;if(s===n)return BZ(r),e;s=s.sibling}throw Error(Lt(188))}if(t.return!==n.return)t=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,n=s;break}if(a===n){o=!0,n=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=r;break}if(a===n){o=!0,n=s,t=r;break}a=a.sibling}if(!o)throw Error(Lt(189))}}if(t.alternate!==n)throw Error(Lt(190))}if(t.tag!==3)throw Error(Lt(188));return t.stateNode.current===t?i:e}function bse(i){return i=h0e(i),i!==null?Cse(i):null}function Cse(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=Cse(i);if(e!==null)return e;i=i.sibling}return null}var wse=lc.unstable_scheduleCallback,WZ=lc.unstable_cancelCallback,f0e=lc.unstable_shouldYield,g0e=lc.unstable_requestPaint,oo=lc.unstable_now,p0e=lc.unstable_getCurrentPriorityLevel,Fj=lc.unstable_ImmediatePriority,yse=lc.unstable_UserBlockingPriority,B4=lc.unstable_NormalPriority,m0e=lc.unstable_LowPriority,Sse=lc.unstable_IdlePriority,I5=null,Zf=null;function _0e(i){if(Zf&&typeof Zf.onCommitFiberRoot=="function")try{Zf.onCommitFiberRoot(I5,i,void 0,(i.current.flags&128)===128)}catch{}}var $h=Math.clz32?Math.clz32:C0e,v0e=Math.log,b0e=Math.LN2;function C0e(i){return i>>>=0,i===0?32:31-(v0e(i)/b0e|0)|0}var QM=64,JM=4194304;function UN(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function W4(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,s=i.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?n=UN(a):(s&=o,s!==0&&(n=UN(s)))}else o=t&~r,o!==0?n=UN(o):s!==0&&(n=UN(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-$h(e),r=1<<t,n|=i[t],e&=~r;return n}function w0e(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y0e(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,s=i.pendingLanes;0<s;){var o=31-$h(s),a=1<<o,u=r[o];u===-1?(!(a&t)||a&n)&&(r[o]=w0e(a,e)):u<=e&&(i.expiredLanes|=a),s&=~a}}function rV(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Lse(){var i=QM;return QM<<=1,!(QM&4194240)&&(QM=64),i}function N7(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function KO(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-$h(e),i[e]=t}function S0e(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-$h(t),s=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~s}}function Bj(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-$h(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var Vr=0;function Ese(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var xse,Wj,Dse,Ise,Tse,sV=!1,eR=[],qv=null,Gv=null,Yv=null,tA=new Map,nA=new Map,Nv=[],L0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VZ(i,e){switch(i){case"focusin":case"focusout":qv=null;break;case"dragenter":case"dragleave":Gv=null;break;case"mouseover":case"mouseout":Yv=null;break;case"pointerover":case"pointerout":tA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nA.delete(e.pointerId)}}function pN(i,e,t,n,r,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=GO(e),e!==null&&Wj(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function E0e(i,e,t,n,r){switch(e){case"focusin":return qv=pN(qv,i,e,t,n,r),!0;case"dragenter":return Gv=pN(Gv,i,e,t,n,r),!0;case"mouseover":return Yv=pN(Yv,i,e,t,n,r),!0;case"pointerover":var s=r.pointerId;return tA.set(s,pN(tA.get(s)||null,i,e,t,n,r)),!0;case"gotpointercapture":return s=r.pointerId,nA.set(s,pN(nA.get(s)||null,i,e,t,n,r)),!0}return!1}function kse(i){var e=k1(i.target);if(e!==null){var t=hC(e);if(t!==null){if(e=t.tag,e===13){if(e=vse(t),e!==null){i.blockedOn=e,Tse(i.priority,function(){Dse(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kP(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=oV(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);eV=n,t.target.dispatchEvent(n),eV=null}else return e=GO(t),e!==null&&Wj(e),i.blockedOn=t,!1;e.shift()}return!0}function HZ(i,e,t){kP(i)&&t.delete(e)}function x0e(){sV=!1,qv!==null&&kP(qv)&&(qv=null),Gv!==null&&kP(Gv)&&(Gv=null),Yv!==null&&kP(Yv)&&(Yv=null),tA.forEach(HZ),nA.forEach(HZ)}function mN(i,e){i.blockedOn===e&&(i.blockedOn=null,sV||(sV=!0,lc.unstable_scheduleCallback(lc.unstable_NormalPriority,x0e)))}function iA(i){function e(r){return mN(r,i)}if(0<eR.length){mN(eR[0],i);for(var t=1;t<eR.length;t++){var n=eR[t];n.blockedOn===i&&(n.blockedOn=null)}}for(qv!==null&&mN(qv,i),Gv!==null&&mN(Gv,i),Yv!==null&&mN(Yv,i),tA.forEach(e),nA.forEach(e),t=0;t<Nv.length;t++)n=Nv[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Nv.length&&(t=Nv[0],t.blockedOn===null);)kse(t),t.blockedOn===null&&Nv.shift()}var Xw=Vp.ReactCurrentBatchConfig,V4=!0;function D0e(i,e,t,n){var r=Vr,s=Xw.transition;Xw.transition=null;try{Vr=1,Vj(i,e,t,n)}finally{Vr=r,Xw.transition=s}}function I0e(i,e,t,n){var r=Vr,s=Xw.transition;Xw.transition=null;try{Vr=4,Vj(i,e,t,n)}finally{Vr=r,Xw.transition=s}}function Vj(i,e,t,n){if(V4){var r=oV(i,e,t,n);if(r===null)H7(i,e,n,H4,t),VZ(i,n);else if(E0e(r,i,e,t,n))n.stopPropagation();else if(VZ(i,n),e&4&&-1<L0e.indexOf(i)){for(;r!==null;){var s=GO(r);if(s!==null&&xse(s),s=oV(i,e,t,n),s===null&&H7(i,e,n,H4,t),s===r)break;r=s}r!==null&&n.stopPropagation()}else H7(i,e,n,null,t)}}var H4=null;function oV(i,e,t,n){if(H4=null,i=Pj(n),i=k1(i),i!==null)if(e=hC(i),e===null)i=null;else if(t=e.tag,t===13){if(i=vse(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return H4=i,null}function Nse(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p0e()){case Fj:return 1;case yse:return 4;case B4:case m0e:return 16;case Sse:return 536870912;default:return 16}default:return 16}}var Pv=null,Hj=null,NP=null;function Ase(){if(NP)return NP;var i,e=Hj,t=e.length,n,r="value"in Pv?Pv.value:Pv.textContent,s=r.length;for(i=0;i<t&&e[i]===r[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===r[s-n];n++);return NP=r.slice(i,1<n?1-n:void 0)}function AP(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function tR(){return!0}function $Z(){return!1}function _c(i){function e(t,n,r,s,o){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tR:$Z,this.isPropagationStopped=$Z,this}return $s(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tR)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tR)},persist:function(){},isPersistent:tR}),e}var IS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$j=_c(IS),qO=$s({},IS,{view:0,detail:0}),T0e=_c(qO),A7,O7,_N,T5=$s({},qO,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zj,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_N&&(_N&&i.type==="mousemove"?(A7=i.screenX-_N.screenX,O7=i.screenY-_N.screenY):O7=A7=0,_N=i),A7)},movementY:function(i){return"movementY"in i?i.movementY:O7}}),zZ=_c(T5),k0e=$s({},T5,{dataTransfer:0}),N0e=_c(k0e),A0e=$s({},qO,{relatedTarget:0}),M7=_c(A0e),O0e=$s({},IS,{animationName:0,elapsedTime:0,pseudoElement:0}),M0e=_c(O0e),R0e=$s({},IS,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),P0e=_c(R0e),F0e=$s({},IS,{data:0}),UZ=_c(F0e),B0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H0e(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=V0e[i])?!!e[i]:!1}function zj(){return H0e}var $0e=$s({},qO,{key:function(i){if(i.key){var e=B0e[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=AP(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?W0e[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zj,charCode:function(i){return i.type==="keypress"?AP(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?AP(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),z0e=_c($0e),U0e=$s({},T5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jZ=_c(U0e),j0e=$s({},qO,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zj}),K0e=_c(j0e),q0e=$s({},IS,{propertyName:0,elapsedTime:0,pseudoElement:0}),G0e=_c(q0e),Y0e=$s({},T5,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Z0e=_c(Y0e),X0e=[9,13,27,32],Uj=Ep&&"CompositionEvent"in window,p2=null;Ep&&"documentMode"in document&&(p2=document.documentMode);var Q0e=Ep&&"TextEvent"in window&&!p2,Ose=Ep&&(!Uj||p2&&8<p2&&11>=p2),KZ=String.fromCharCode(32),qZ=!1;function Mse(i,e){switch(i){case"keyup":return X0e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rse(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ww=!1;function J0e(i,e){switch(i){case"compositionend":return Rse(e);case"keypress":return e.which!==32?null:(qZ=!0,KZ);case"textInput":return i=e.data,i===KZ&&qZ?null:i;default:return null}}function e1e(i,e){if(ww)return i==="compositionend"||!Uj&&Mse(i,e)?(i=Ase(),NP=Hj=Pv=null,ww=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ose&&e.locale!=="ko"?null:e.data;default:return null}}var t1e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GZ(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!t1e[i.type]:e==="textarea"}function Pse(i,e,t,n){fse(n),e=$4(e,"onChange"),0<e.length&&(t=new $j("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var m2=null,rA=null;function n1e(i){qse(i,0)}function k5(i){var e=Lw(i);if(ose(e))return i}function i1e(i,e){if(i==="change")return e}var Fse=!1;if(Ep){var R7;if(Ep){var P7="oninput"in document;if(!P7){var YZ=document.createElement("div");YZ.setAttribute("oninput","return;"),P7=typeof YZ.oninput=="function"}R7=P7}else R7=!1;Fse=R7&&(!document.documentMode||9<document.documentMode)}function ZZ(){m2&&(m2.detachEvent("onpropertychange",Bse),rA=m2=null)}function Bse(i){if(i.propertyName==="value"&&k5(rA)){var e=[];Pse(e,rA,i,Pj(i)),_se(n1e,e)}}function r1e(i,e,t){i==="focusin"?(ZZ(),m2=e,rA=t,m2.attachEvent("onpropertychange",Bse)):i==="focusout"&&ZZ()}function s1e(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return k5(rA)}function o1e(i,e){if(i==="click")return k5(e)}function a1e(i,e){if(i==="input"||i==="change")return k5(e)}function l1e(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Jh=typeof Object.is=="function"?Object.is:l1e;function sA(i,e){if(Jh(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!$W.call(e,r)||!Jh(i[r],e[r]))return!1}return!0}function XZ(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function QZ(i,e){var t=XZ(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=XZ(t)}}function Wse(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Wse(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Vse(){for(var i=window,e=R4();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=R4(i.document)}return e}function jj(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function u1e(i){var e=Vse(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Wse(t.ownerDocument.documentElement,t)){if(n!==null&&jj(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!i.extend&&s>n&&(r=n,n=s,s=r),r=QZ(t,s);var o=QZ(t,n);r&&o&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var c1e=Ep&&"documentMode"in document&&11>=document.documentMode,yw=null,aV=null,_2=null,lV=!1;function JZ(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lV||yw==null||yw!==R4(n)||(n=yw,"selectionStart"in n&&jj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_2&&sA(_2,n)||(_2=n,n=$4(aV,"onSelect"),0<n.length&&(e=new $j("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=yw)))}function nR(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Sw={animationend:nR("Animation","AnimationEnd"),animationiteration:nR("Animation","AnimationIteration"),animationstart:nR("Animation","AnimationStart"),transitionend:nR("Transition","TransitionEnd")},F7={},Hse={};Ep&&(Hse=document.createElement("div").style,"AnimationEvent"in window||(delete Sw.animationend.animation,delete Sw.animationiteration.animation,delete Sw.animationstart.animation),"TransitionEvent"in window||delete Sw.transitionend.transition);function N5(i){if(F7[i])return F7[i];if(!Sw[i])return i;var e=Sw[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in Hse)return F7[i]=e[t];return i}var $se=N5("animationend"),zse=N5("animationiteration"),Use=N5("animationstart"),jse=N5("transitionend"),Kse=new Map,eX="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function F0(i,e){Kse.set(i,e),dC(e,[i])}for(var B7=0;B7<eX.length;B7++){var W7=eX[B7],d1e=W7.toLowerCase(),h1e=W7[0].toUpperCase()+W7.slice(1);F0(d1e,"on"+h1e)}F0($se,"onAnimationEnd");F0(zse,"onAnimationIteration");F0(Use,"onAnimationStart");F0("dblclick","onDoubleClick");F0("focusin","onFocus");F0("focusout","onBlur");F0(jse,"onTransitionEnd");ky("onMouseEnter",["mouseout","mouseover"]);ky("onMouseLeave",["mouseout","mouseover"]);ky("onPointerEnter",["pointerout","pointerover"]);ky("onPointerLeave",["pointerout","pointerover"]);dC("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dC("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dC("onBeforeInput",["compositionend","keypress","textInput","paste"]);dC("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dC("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dC("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jN="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1e=new Set("cancel close invalid load scroll toggle".split(" ").concat(jN));function tX(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,d0e(n,e,void 0,i),i.currentTarget=null}function qse(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==s&&r.isPropagationStopped())break e;tX(r,a,d),s=u}else for(o=0;o<n.length;o++){if(a=n[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==s&&r.isPropagationStopped())break e;tX(r,a,d),s=u}}}if(F4)throw i=iV,F4=!1,iV=null,i}function ms(i,e){var t=e[fV];t===void 0&&(t=e[fV]=new Set);var n=i+"__bubble";t.has(n)||(Gse(e,i,2,!1),t.add(n))}function V7(i,e,t){var n=0;e&&(n|=4),Gse(t,i,n,e)}var iR="_reactListening"+Math.random().toString(36).slice(2);function oA(i){if(!i[iR]){i[iR]=!0,tse.forEach(function(t){t!=="selectionchange"&&(f1e.has(t)||V7(t,!1,i),V7(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[iR]||(e[iR]=!0,V7("selectionchange",!1,e))}}function Gse(i,e,t,n){switch(Nse(e)){case 1:var r=D0e;break;case 4:r=I0e;break;default:r=Vj}t=r.bind(null,e,t,i),r=void 0,!nV||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function H7(i,e,t,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;o=o.return}for(;a!==null;){if(o=k1(a),o===null)return;if(u=o.tag,u===5||u===6){n=s=o;continue e}a=a.parentNode}}n=n.return}_se(function(){var d=s,h=Pj(t),f=[];e:{var p=Kse.get(i);if(p!==void 0){var m=$j,v=i;switch(i){case"keypress":if(AP(t)===0)break e;case"keydown":case"keyup":m=z0e;break;case"focusin":v="focus",m=M7;break;case"focusout":v="blur",m=M7;break;case"beforeblur":case"afterblur":m=M7;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zZ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=N0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=K0e;break;case $se:case zse:case Use:m=M0e;break;case jse:m=G0e;break;case"scroll":m=T0e;break;case"wheel":m=Z0e;break;case"copy":case"cut":case"paste":m=P0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=jZ}var b=(e&4)!==0,L=!b&&i==="scroll",S=b?p!==null?p+"Capture":null:p;b=[];for(var y=d,E;y!==null;){E=y;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,S!==null&&(A=eA(y,S),A!=null&&b.push(aA(y,A,E)))),L)break;y=y.return}0<b.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=i==="mouseover"||i==="pointerover",m=i==="mouseout"||i==="pointerout",p&&t!==eV&&(v=t.relatedTarget||t.fromElement)&&(k1(v)||v[xp]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=d,v=v?k1(v):null,v!==null&&(L=hC(v),v!==L||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(b=zZ,A="onMouseLeave",S="onMouseEnter",y="mouse",(i==="pointerout"||i==="pointerover")&&(b=jZ,A="onPointerLeave",S="onPointerEnter",y="pointer"),L=m==null?p:Lw(m),E=v==null?p:Lw(v),p=new b(A,y+"leave",m,t,h),p.target=L,p.relatedTarget=E,A=null,k1(h)===d&&(b=new b(S,y+"enter",v,t,h),b.target=E,b.relatedTarget=L,A=b),L=A,m&&v)t:{for(b=m,S=v,y=0,E=b;E;E=HC(E))y++;for(E=0,A=S;A;A=HC(A))E++;for(;0<y-E;)b=HC(b),y--;for(;0<E-y;)S=HC(S),E--;for(;y--;){if(b===S||S!==null&&b===S.alternate)break t;b=HC(b),S=HC(S)}b=null}else b=null;m!==null&&nX(f,p,m,b,!1),v!==null&&L!==null&&nX(f,L,v,b,!0)}}e:{if(p=d?Lw(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=i1e;else if(GZ(p))if(Fse)N=a1e;else{N=s1e;var V=r1e}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=o1e);if(N&&(N=N(i,d))){Pse(f,N,t,h);break e}V&&V(i,p,d),i==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&YW(p,"number",p.value)}switch(V=d?Lw(d):window,i){case"focusin":(GZ(V)||V.contentEditable==="true")&&(yw=V,aV=d,_2=null);break;case"focusout":_2=aV=yw=null;break;case"mousedown":lV=!0;break;case"contextmenu":case"mouseup":case"dragend":lV=!1,JZ(f,t,h);break;case"selectionchange":if(c1e)break;case"keydown":case"keyup":JZ(f,t,h)}var M;if(Uj)e:{switch(i){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ww?Mse(i,t)&&(R="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(Ose&&t.locale!=="ko"&&(ww||R!=="onCompositionStart"?R==="onCompositionEnd"&&ww&&(M=Ase()):(Pv=h,Hj="value"in Pv?Pv.value:Pv.textContent,ww=!0)),V=$4(d,R),0<V.length&&(R=new UZ(R,i,null,t,h),f.push({event:R,listeners:V}),M?R.data=M:(M=Rse(t),M!==null&&(R.data=M)))),(M=Q0e?J0e(i,t):e1e(i,t))&&(d=$4(d,"onBeforeInput"),0<d.length&&(h=new UZ("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=M))}qse(f,e)})}function aA(i,e,t){return{instance:i,listener:e,currentTarget:t}}function $4(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=eA(i,t),s!=null&&n.unshift(aA(i,s,r)),s=eA(i,e),s!=null&&n.push(aA(i,s,r))),i=i.return}return n}function HC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function nX(i,e,t,n,r){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,u=a.alternate,d=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&d!==null&&(a=d,r?(u=eA(t,s),u!=null&&o.unshift(aA(t,u,a))):r||(u=eA(t,s),u!=null&&o.push(aA(t,u,a)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var g1e=/\r\n?/g,p1e=/\u0000|\uFFFD/g;function iX(i){return(typeof i=="string"?i:""+i).replace(g1e,`
`).replace(p1e,"")}function rR(i,e,t){if(e=iX(e),iX(i)!==e&&t)throw Error(Lt(425))}function z4(){}var uV=null,cV=null;function dV(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hV=typeof setTimeout=="function"?setTimeout:void 0,m1e=typeof clearTimeout=="function"?clearTimeout:void 0,rX=typeof Promise=="function"?Promise:void 0,_1e=typeof queueMicrotask=="function"?queueMicrotask:typeof rX<"u"?function(i){return rX.resolve(null).then(i).catch(v1e)}:hV;function v1e(i){setTimeout(function(){throw i})}function $7(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),iA(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);iA(e)}function Zv(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function sX(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var TS=Math.random().toString(36).slice(2),Of="__reactFiber$"+TS,lA="__reactProps$"+TS,xp="__reactContainer$"+TS,fV="__reactEvents$"+TS,b1e="__reactListeners$"+TS,C1e="__reactHandles$"+TS;function k1(i){var e=i[Of];if(e)return e;for(var t=i.parentNode;t;){if(e=t[xp]||t[Of]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=sX(i);i!==null;){if(t=i[Of])return t;i=sX(i)}return e}i=t,t=i.parentNode}return null}function GO(i){return i=i[Of]||i[xp],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Lw(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Lt(33))}function A5(i){return i[lA]||null}var gV=[],Ew=-1;function B0(i){return{current:i}}function ys(i){0>Ew||(i.current=gV[Ew],gV[Ew]=null,Ew--)}function ds(i,e){Ew++,gV[Ew]=i.current,i.current=e}var g0={},Ya=B0(g0),Au=B0(!1),db=g0;function Ny(i,e){var t=i.type.contextTypes;if(!t)return g0;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function Ou(i){return i=i.childContextTypes,i!=null}function U4(){ys(Au),ys(Ya)}function oX(i,e,t){if(Ya.current!==g0)throw Error(Lt(168));ds(Ya,e),ds(Au,t)}function Yse(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Lt(108,r0e(i)||"Unknown",r));return $s({},t,n)}function j4(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||g0,db=Ya.current,ds(Ya,i),ds(Au,Au.current),!0}function aX(i,e,t){var n=i.stateNode;if(!n)throw Error(Lt(169));t?(i=Yse(i,e,db),n.__reactInternalMemoizedMergedChildContext=i,ys(Au),ys(Ya),ds(Ya,i)):ys(Au),ds(Au,t)}var Zg=null,O5=!1,z7=!1;function Zse(i){Zg===null?Zg=[i]:Zg.push(i)}function w1e(i){O5=!0,Zse(i)}function W0(){if(!z7&&Zg!==null){z7=!0;var i=0,e=Vr;try{var t=Zg;for(Vr=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Zg=null,O5=!1}catch(r){throw Zg!==null&&(Zg=Zg.slice(i+1)),wse(Fj,W0),r}finally{Vr=e,z7=!1}}return null}var xw=[],Dw=0,K4=null,q4=0,Pc=[],Fc=0,hb=null,ap=1,lp="";function u1(i,e){xw[Dw++]=q4,xw[Dw++]=K4,K4=i,q4=e}function Xse(i,e,t){Pc[Fc++]=ap,Pc[Fc++]=lp,Pc[Fc++]=hb,hb=i;var n=ap;i=lp;var r=32-$h(n)-1;n&=~(1<<r),t+=1;var s=32-$h(e)+r;if(30<s){var o=r-r%5;s=(n&(1<<o)-1).toString(32),n>>=o,r-=o,ap=1<<32-$h(e)+r|t<<r|n,lp=s+i}else ap=1<<s|t<<r|n,lp=i}function Kj(i){i.return!==null&&(u1(i,1),Xse(i,1,0))}function qj(i){for(;i===K4;)K4=xw[--Dw],xw[Dw]=null,q4=xw[--Dw],xw[Dw]=null;for(;i===hb;)hb=Pc[--Fc],Pc[Fc]=null,lp=Pc[--Fc],Pc[Fc]=null,ap=Pc[--Fc],Pc[Fc]=null}var nc=null,Xu=null,Es=!1,Th=null;function Qse(i,e){var t=jc(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function lX(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,nc=i,Xu=Zv(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,nc=i,Xu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=hb!==null?{id:ap,overflow:lp}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=jc(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,nc=i,Xu=null,!0):!1;default:return!1}}function pV(i){return(i.mode&1)!==0&&(i.flags&128)===0}function mV(i){if(Es){var e=Xu;if(e){var t=e;if(!lX(i,e)){if(pV(i))throw Error(Lt(418));e=Zv(t.nextSibling);var n=nc;e&&lX(i,e)?Qse(n,t):(i.flags=i.flags&-4097|2,Es=!1,nc=i)}}else{if(pV(i))throw Error(Lt(418));i.flags=i.flags&-4097|2,Es=!1,nc=i}}}function uX(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;nc=i}function sR(i){if(i!==nc)return!1;if(!Es)return uX(i),Es=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!dV(i.type,i.memoizedProps)),e&&(e=Xu)){if(pV(i))throw Jse(),Error(Lt(418));for(;e;)Qse(i,e),e=Zv(e.nextSibling)}if(uX(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Lt(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Xu=Zv(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Xu=null}}else Xu=nc?Zv(i.stateNode.nextSibling):null;return!0}function Jse(){for(var i=Xu;i;)i=Zv(i.nextSibling)}function Ay(){Xu=nc=null,Es=!1}function Gj(i){Th===null?Th=[i]:Th.push(i)}var y1e=Vp.ReactCurrentBatchConfig;function vN(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Lt(309));var n=t.stateNode}if(!n)throw Error(Lt(147,i));var r=n,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof i!="string")throw Error(Lt(284));if(!t._owner)throw Error(Lt(290,i))}return i}function oR(i,e){throw i=Object.prototype.toString.call(e),Error(Lt(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function cX(i){var e=i._init;return e(i._payload)}function eoe(i){function e(S,y){if(i){var E=S.deletions;E===null?(S.deletions=[y],S.flags|=16):E.push(y)}}function t(S,y){if(!i)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function n(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function r(S,y){return S=e0(S,y),S.index=0,S.sibling=null,S}function s(S,y,E){return S.index=E,i?(E=S.alternate,E!==null?(E=E.index,E<y?(S.flags|=2,y):E):(S.flags|=2,y)):(S.flags|=1048576,y)}function o(S){return i&&S.alternate===null&&(S.flags|=2),S}function a(S,y,E,A){return y===null||y.tag!==6?(y=Z7(E,S.mode,A),y.return=S,y):(y=r(y,E),y.return=S,y)}function u(S,y,E,A){var N=E.type;return N===Cw?h(S,y,E.props.children,A,E.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xv&&cX(N)===y.type)?(A=r(y,E.props),A.ref=vN(S,y,E),A.return=S,A):(A=WP(E.type,E.key,E.props,null,S.mode,A),A.ref=vN(S,y,E),A.return=S,A)}function d(S,y,E,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=X7(E,S.mode,A),y.return=S,y):(y=r(y,E.children||[]),y.return=S,y)}function h(S,y,E,A,N){return y===null||y.tag!==7?(y=j1(E,S.mode,A,N),y.return=S,y):(y=r(y,E),y.return=S,y)}function f(S,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Z7(""+y,S.mode,E),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case YM:return E=WP(y.type,y.key,y.props,null,S.mode,E),E.ref=vN(S,null,y),E.return=S,E;case bw:return y=X7(y,S.mode,E),y.return=S,y;case xv:var A=y._init;return f(S,A(y._payload),E)}if(zN(y)||fN(y))return y=j1(y,S.mode,E,null),y.return=S,y;oR(S,y)}return null}function p(S,y,E,A){var N=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:a(S,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case YM:return E.key===N?u(S,y,E,A):null;case bw:return E.key===N?d(S,y,E,A):null;case xv:return N=E._init,p(S,y,N(E._payload),A)}if(zN(E)||fN(E))return N!==null?null:h(S,y,E,A,null);oR(S,E)}return null}function m(S,y,E,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(E)||null,a(y,S,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case YM:return S=S.get(A.key===null?E:A.key)||null,u(y,S,A,N);case bw:return S=S.get(A.key===null?E:A.key)||null,d(y,S,A,N);case xv:var V=A._init;return m(S,y,E,V(A._payload),N)}if(zN(A)||fN(A))return S=S.get(E)||null,h(y,S,A,N,null);oR(y,A)}return null}function v(S,y,E,A){for(var N=null,V=null,M=y,R=y=0,Y=null;M!==null&&R<E.length;R++){M.index>R?(Y=M,M=null):Y=M.sibling;var X=p(S,M,E[R],A);if(X===null){M===null&&(M=Y);break}i&&M&&X.alternate===null&&e(S,M),y=s(X,y,R),V===null?N=X:V.sibling=X,V=X,M=Y}if(R===E.length)return t(S,M),Es&&u1(S,R),N;if(M===null){for(;R<E.length;R++)M=f(S,E[R],A),M!==null&&(y=s(M,y,R),V===null?N=M:V.sibling=M,V=M);return Es&&u1(S,R),N}for(M=n(S,M);R<E.length;R++)Y=m(M,S,R,E[R],A),Y!==null&&(i&&Y.alternate!==null&&M.delete(Y.key===null?R:Y.key),y=s(Y,y,R),V===null?N=Y:V.sibling=Y,V=Y);return i&&M.forEach(function($){return e(S,$)}),Es&&u1(S,R),N}function b(S,y,E,A){var N=fN(E);if(typeof N!="function")throw Error(Lt(150));if(E=N.call(E),E==null)throw Error(Lt(151));for(var V=N=null,M=y,R=y=0,Y=null,X=E.next();M!==null&&!X.done;R++,X=E.next()){M.index>R?(Y=M,M=null):Y=M.sibling;var $=p(S,M,X.value,A);if($===null){M===null&&(M=Y);break}i&&M&&$.alternate===null&&e(S,M),y=s($,y,R),V===null?N=$:V.sibling=$,V=$,M=Y}if(X.done)return t(S,M),Es&&u1(S,R),N;if(M===null){for(;!X.done;R++,X=E.next())X=f(S,X.value,A),X!==null&&(y=s(X,y,R),V===null?N=X:V.sibling=X,V=X);return Es&&u1(S,R),N}for(M=n(S,M);!X.done;R++,X=E.next())X=m(M,S,R,X.value,A),X!==null&&(i&&X.alternate!==null&&M.delete(X.key===null?R:X.key),y=s(X,y,R),V===null?N=X:V.sibling=X,V=X);return i&&M.forEach(function(T){return e(S,T)}),Es&&u1(S,R),N}function L(S,y,E,A){if(typeof E=="object"&&E!==null&&E.type===Cw&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case YM:e:{for(var N=E.key,V=y;V!==null;){if(V.key===N){if(N=E.type,N===Cw){if(V.tag===7){t(S,V.sibling),y=r(V,E.props.children),y.return=S,S=y;break e}}else if(V.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xv&&cX(N)===V.type){t(S,V.sibling),y=r(V,E.props),y.ref=vN(S,V,E),y.return=S,S=y;break e}t(S,V);break}else e(S,V);V=V.sibling}E.type===Cw?(y=j1(E.props.children,S.mode,A,E.key),y.return=S,S=y):(A=WP(E.type,E.key,E.props,null,S.mode,A),A.ref=vN(S,y,E),A.return=S,S=A)}return o(S);case bw:e:{for(V=E.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){t(S,y.sibling),y=r(y,E.children||[]),y.return=S,S=y;break e}else{t(S,y);break}else e(S,y);y=y.sibling}y=X7(E,S.mode,A),y.return=S,S=y}return o(S);case xv:return V=E._init,L(S,y,V(E._payload),A)}if(zN(E))return v(S,y,E,A);if(fN(E))return b(S,y,E,A);oR(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(t(S,y.sibling),y=r(y,E),y.return=S,S=y):(t(S,y),y=Z7(E,S.mode,A),y.return=S,S=y),o(S)):t(S,y)}return L}var Oy=eoe(!0),toe=eoe(!1),G4=B0(null),Y4=null,Iw=null,Yj=null;function Zj(){Yj=Iw=Y4=null}function Xj(i){var e=G4.current;ys(G4),i._currentValue=e}function _V(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Qw(i,e){Y4=i,Yj=Iw=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Iu=!0),i.firstContext=null)}function ed(i){var e=i._currentValue;if(Yj!==i)if(i={context:i,memoizedValue:e,next:null},Iw===null){if(Y4===null)throw Error(Lt(308));Iw=i,Y4.dependencies={lanes:0,firstContext:i}}else Iw=Iw.next=i;return e}var N1=null;function Qj(i){N1===null?N1=[i]:N1.push(i)}function noe(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,Qj(e)):(t.next=r.next,r.next=t),e.interleaved=t,Dp(i,n)}function Dp(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Dv=!1;function Jj(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ioe(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function fp(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Xv(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,gr&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Dp(i,t)}return r=n.interleaved,r===null?(e.next=e,Qj(n)):(e.next=r.next,r.next=e),n.interleaved=e,Dp(i,t)}function OP(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Bj(i,t)}}function dX(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Z4(i,e,t,n){var r=i.updateQueue;Dv=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var h=i.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(s!==null){var f=r.baseState;o=0,h=d=u=null,a=s;do{var p=a.lane,m=a.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=i,b=a;switch(p=e,m=t,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=$s({},f,p);break e;case 2:Dv=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=m,u=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(u=f),r.baseState=u,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);gb|=o,i.lanes=o,i.memoizedState=f}}function hX(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(Lt(191,r));r.call(n)}}}var YO={},Xf=B0(YO),uA=B0(YO),cA=B0(YO);function A1(i){if(i===YO)throw Error(Lt(174));return i}function eK(i,e){switch(ds(cA,e),ds(uA,i),ds(Xf,YO),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:XW(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=XW(e,i)}ys(Xf),ds(Xf,e)}function My(){ys(Xf),ys(uA),ys(cA)}function roe(i){A1(cA.current);var e=A1(Xf.current),t=XW(e,i.type);e!==t&&(ds(uA,i),ds(Xf,t))}function tK(i){uA.current===i&&(ys(Xf),ys(uA))}var Bs=B0(0);function X4(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var U7=[];function nK(){for(var i=0;i<U7.length;i++)U7[i]._workInProgressVersionPrimary=null;U7.length=0}var MP=Vp.ReactCurrentDispatcher,j7=Vp.ReactCurrentBatchConfig,fb=0,Vs=null,$o=null,Qo=null,Q4=!1,v2=!1,dA=0,S1e=0;function Wa(){throw Error(Lt(321))}function iK(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Jh(i[t],e[t]))return!1;return!0}function rK(i,e,t,n,r,s){if(fb=s,Vs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,MP.current=i===null||i.memoizedState===null?D1e:I1e,i=t(n,r),v2){s=0;do{if(v2=!1,dA=0,25<=s)throw Error(Lt(301));s+=1,Qo=$o=null,e.updateQueue=null,MP.current=T1e,i=t(n,r)}while(v2)}if(MP.current=J4,e=$o!==null&&$o.next!==null,fb=0,Qo=$o=Vs=null,Q4=!1,e)throw Error(Lt(300));return i}function sK(){var i=dA!==0;return dA=0,i}function yf(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qo===null?Vs.memoizedState=Qo=i:Qo=Qo.next=i,Qo}function td(){if($o===null){var i=Vs.alternate;i=i!==null?i.memoizedState:null}else i=$o.next;var e=Qo===null?Vs.memoizedState:Qo.next;if(e!==null)Qo=e,$o=i;else{if(i===null)throw Error(Lt(310));$o=i,i={memoizedState:$o.memoizedState,baseState:$o.baseState,baseQueue:$o.baseQueue,queue:$o.queue,next:null},Qo===null?Vs.memoizedState=Qo=i:Qo=Qo.next=i}return Qo}function hA(i,e){return typeof e=="function"?e(i):e}function K7(i){var e=td(),t=e.queue;if(t===null)throw Error(Lt(311));t.lastRenderedReducer=i;var n=$o,r=n.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,n=n.baseState;var a=o=null,u=null,d=s;do{var h=d.lane;if((fb&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:i(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=f,o=n):u=u.next=f,Vs.lanes|=h,gb|=h}d=d.next}while(d!==null&&d!==s);u===null?o=n:u.next=a,Jh(n,e.memoizedState)||(Iu=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do s=r.lane,Vs.lanes|=s,gb|=s,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function q7(i){var e=td(),t=e.queue;if(t===null)throw Error(Lt(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=i(s,o.action),o=o.next;while(o!==r);Jh(s,e.memoizedState)||(Iu=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function soe(){}function ooe(i,e){var t=Vs,n=td(),r=e(),s=!Jh(n.memoizedState,r);if(s&&(n.memoizedState=r,Iu=!0),n=n.queue,oK(uoe.bind(null,t,n,i),[i]),n.getSnapshot!==e||s||Qo!==null&&Qo.memoizedState.tag&1){if(t.flags|=2048,fA(9,loe.bind(null,t,n,r,e),void 0,null),sa===null)throw Error(Lt(349));fb&30||aoe(t,e,r)}return r}function aoe(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Vs.updateQueue,e===null?(e={lastEffect:null,stores:null},Vs.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function loe(i,e,t,n){e.value=t,e.getSnapshot=n,coe(e)&&doe(i)}function uoe(i,e,t){return t(function(){coe(e)&&doe(i)})}function coe(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Jh(i,t)}catch{return!0}}function doe(i){var e=Dp(i,1);e!==null&&zh(e,i,1,-1)}function fX(i){var e=yf();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hA,lastRenderedState:i},e.queue=i,i=i.dispatch=x1e.bind(null,Vs,i),[e.memoizedState,i]}function fA(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Vs.updateQueue,e===null?(e={lastEffect:null,stores:null},Vs.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function hoe(){return td().memoizedState}function RP(i,e,t,n){var r=yf();Vs.flags|=i,r.memoizedState=fA(1|e,t,void 0,n===void 0?null:n)}function M5(i,e,t,n){var r=td();n=n===void 0?null:n;var s=void 0;if($o!==null){var o=$o.memoizedState;if(s=o.destroy,n!==null&&iK(n,o.deps)){r.memoizedState=fA(e,t,s,n);return}}Vs.flags|=i,r.memoizedState=fA(1|e,t,s,n)}function gX(i,e){return RP(8390656,8,i,e)}function oK(i,e){return M5(2048,8,i,e)}function foe(i,e){return M5(4,2,i,e)}function goe(i,e){return M5(4,4,i,e)}function poe(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function moe(i,e,t){return t=t!=null?t.concat([i]):null,M5(4,4,poe.bind(null,e,i),t)}function aK(){}function _oe(i,e){var t=td();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&iK(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function voe(i,e){var t=td();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&iK(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function boe(i,e,t){return fb&21?(Jh(t,e)||(t=Lse(),Vs.lanes|=t,gb|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Iu=!0),i.memoizedState=t)}function L1e(i,e){var t=Vr;Vr=t!==0&&4>t?t:4,i(!0);var n=j7.transition;j7.transition={};try{i(!1),e()}finally{Vr=t,j7.transition=n}}function Coe(){return td().memoizedState}function E1e(i,e,t){var n=Jv(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},woe(i))yoe(e,t);else if(t=noe(i,e,t,n),t!==null){var r=_l();zh(t,i,n,r),Soe(t,e,n)}}function x1e(i,e,t){var n=Jv(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(woe(i))yoe(e,r);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Jh(a,o)){var u=e.interleaved;u===null?(r.next=r,Qj(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}t=noe(i,e,r,n),t!==null&&(r=_l(),zh(t,i,n,r),Soe(t,e,n))}}function woe(i){var e=i.alternate;return i===Vs||e!==null&&e===Vs}function yoe(i,e){v2=Q4=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function Soe(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Bj(i,t)}}var J4={readContext:ed,useCallback:Wa,useContext:Wa,useEffect:Wa,useImperativeHandle:Wa,useInsertionEffect:Wa,useLayoutEffect:Wa,useMemo:Wa,useReducer:Wa,useRef:Wa,useState:Wa,useDebugValue:Wa,useDeferredValue:Wa,useTransition:Wa,useMutableSource:Wa,useSyncExternalStore:Wa,useId:Wa,unstable_isNewReconciler:!1},D1e={readContext:ed,useCallback:function(i,e){return yf().memoizedState=[i,e===void 0?null:e],i},useContext:ed,useEffect:gX,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,RP(4194308,4,poe.bind(null,e,i),t)},useLayoutEffect:function(i,e){return RP(4194308,4,i,e)},useInsertionEffect:function(i,e){return RP(4,2,i,e)},useMemo:function(i,e){var t=yf();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=yf();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=E1e.bind(null,Vs,i),[n.memoizedState,i]},useRef:function(i){var e=yf();return i={current:i},e.memoizedState=i},useState:fX,useDebugValue:aK,useDeferredValue:function(i){return yf().memoizedState=i},useTransition:function(){var i=fX(!1),e=i[0];return i=L1e.bind(null,i[1]),yf().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Vs,r=yf();if(Es){if(t===void 0)throw Error(Lt(407));t=t()}else{if(t=e(),sa===null)throw Error(Lt(349));fb&30||aoe(n,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,gX(uoe.bind(null,n,s,i),[i]),n.flags|=2048,fA(9,loe.bind(null,n,s,t,e),void 0,null),t},useId:function(){var i=yf(),e=sa.identifierPrefix;if(Es){var t=lp,n=ap;t=(n&~(1<<32-$h(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=dA++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=S1e++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},I1e={readContext:ed,useCallback:_oe,useContext:ed,useEffect:oK,useImperativeHandle:moe,useInsertionEffect:foe,useLayoutEffect:goe,useMemo:voe,useReducer:K7,useRef:hoe,useState:function(){return K7(hA)},useDebugValue:aK,useDeferredValue:function(i){var e=td();return boe(e,$o.memoizedState,i)},useTransition:function(){var i=K7(hA)[0],e=td().memoizedState;return[i,e]},useMutableSource:soe,useSyncExternalStore:ooe,useId:Coe,unstable_isNewReconciler:!1},T1e={readContext:ed,useCallback:_oe,useContext:ed,useEffect:oK,useImperativeHandle:moe,useInsertionEffect:foe,useLayoutEffect:goe,useMemo:voe,useReducer:q7,useRef:hoe,useState:function(){return q7(hA)},useDebugValue:aK,useDeferredValue:function(i){var e=td();return $o===null?e.memoizedState=i:boe(e,$o.memoizedState,i)},useTransition:function(){var i=q7(hA)[0],e=td().memoizedState;return[i,e]},useMutableSource:soe,useSyncExternalStore:ooe,useId:Coe,unstable_isNewReconciler:!1};function bh(i,e){if(i&&i.defaultProps){e=$s({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function vV(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:$s({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var R5={isMounted:function(i){return(i=i._reactInternals)?hC(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=_l(),r=Jv(i),s=fp(n,r);s.payload=e,t!=null&&(s.callback=t),e=Xv(i,s,r),e!==null&&(zh(e,i,r,n),OP(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=_l(),r=Jv(i),s=fp(n,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Xv(i,s,r),e!==null&&(zh(e,i,r,n),OP(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=_l(),n=Jv(i),r=fp(t,n);r.tag=2,e!=null&&(r.callback=e),e=Xv(i,r,n),e!==null&&(zh(e,i,n,t),OP(e,i,n))}};function pX(i,e,t,n,r,s,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!sA(t,n)||!sA(r,s):!0}function Loe(i,e,t){var n=!1,r=g0,s=e.contextType;return typeof s=="object"&&s!==null?s=ed(s):(r=Ou(e)?db:Ya.current,n=e.contextTypes,s=(n=n!=null)?Ny(i,r):g0),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=R5,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=s),e}function mX(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&R5.enqueueReplaceState(e,e.state,null)}function bV(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs={},Jj(i);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ed(s):(s=Ou(e)?db:Ya.current,r.context=Ny(i,s)),r.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vV(i,e,s,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&R5.enqueueReplaceState(r,r.state,null),Z4(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function Ry(i,e){try{var t="",n=e;do t+=i0e(n),n=n.return;while(n);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:e,stack:r,digest:null}}function G7(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function CV(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var k1e=typeof WeakMap=="function"?WeakMap:Map;function Eoe(i,e,t){t=fp(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){tF||(tF=!0,kV=n),CV(i,e)},t}function xoe(i,e,t){t=fp(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){CV(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){CV(i,e),typeof n!="function"&&(Qv===null?Qv=new Set([this]):Qv.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function _X(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new k1e;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=U1e.bind(null,i,e,t),e.then(i,i))}function vX(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function bX(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fp(-1,1),e.tag=2,Xv(t,e,1))),t.lanes|=1),i)}var N1e=Vp.ReactCurrentOwner,Iu=!1;function cl(i,e,t,n){e.child=i===null?toe(e,null,t,n):Oy(e,i.child,t,n)}function CX(i,e,t,n,r){t=t.render;var s=e.ref;return Qw(e,r),n=rK(i,e,t,n,s,r),t=sK(),i!==null&&!Iu?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Ip(i,e,r)):(Es&&t&&Kj(e),e.flags|=1,cl(i,e,n,r),e.child)}function wX(i,e,t,n,r){if(i===null){var s=t.type;return typeof s=="function"&&!pK(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Doe(i,e,s,n,r)):(i=WP(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,!(i.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:sA,t(o,n)&&i.ref===e.ref)return Ip(i,e,r)}return e.flags|=1,i=e0(s,n),i.ref=e.ref,i.return=e,e.child=i}function Doe(i,e,t,n,r){if(i!==null){var s=i.memoizedProps;if(sA(s,n)&&i.ref===e.ref)if(Iu=!1,e.pendingProps=n=s,(i.lanes&r)!==0)i.flags&131072&&(Iu=!0);else return e.lanes=i.lanes,Ip(i,e,r)}return wV(i,e,t,n,r)}function Ioe(i,e,t){var n=e.pendingProps,r=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ds(kw,ju),ju|=t;else{if(!(t&1073741824))return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,ds(kw,ju),ju|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,ds(kw,ju),ju|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,ds(kw,ju),ju|=n;return cl(i,e,r,t),e.child}function Toe(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function wV(i,e,t,n,r){var s=Ou(t)?db:Ya.current;return s=Ny(e,s),Qw(e,r),t=rK(i,e,t,n,s,r),n=sK(),i!==null&&!Iu?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Ip(i,e,r)):(Es&&n&&Kj(e),e.flags|=1,cl(i,e,t,r),e.child)}function yX(i,e,t,n,r){if(Ou(t)){var s=!0;j4(e)}else s=!1;if(Qw(e,r),e.stateNode===null)PP(i,e),Loe(e,t,n),bV(e,t,n,r),n=!0;else if(i===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=t.contextType;typeof d=="object"&&d!==null?d=ed(d):(d=Ou(t)?db:Ya.current,d=Ny(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||u!==d)&&mX(e,o,n,d),Dv=!1;var p=e.memoizedState;o.state=p,Z4(e,n,o,r),u=e.memoizedState,a!==n||p!==u||Au.current||Dv?(typeof h=="function"&&(vV(e,t,h,n),u=e.memoizedState),(a=Dv||pX(e,t,a,n,p,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,ioe(i,e),a=e.memoizedProps,d=e.type===e.elementType?a:bh(e.type,a),o.props=d,f=e.pendingProps,p=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=ed(u):(u=Ou(t)?db:Ya.current,u=Ny(e,u));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&mX(e,o,n,u),Dv=!1,p=e.memoizedState,o.state=p,Z4(e,n,o,r);var v=e.memoizedState;a!==f||p!==v||Au.current||Dv?(typeof m=="function"&&(vV(e,t,m,n),v=e.memoizedState),(d=Dv||pX(e,t,d,n,p,v,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),n=!1)}return yV(i,e,t,n,s,r)}function yV(i,e,t,n,r,s){Toe(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&aX(e,t,!1),Ip(i,e,s);n=e.stateNode,N1e.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=Oy(e,i.child,null,s),e.child=Oy(e,null,a,s)):cl(i,e,a,s),e.memoizedState=n.state,r&&aX(e,t,!0),e.child}function koe(i){var e=i.stateNode;e.pendingContext?oX(i,e.pendingContext,e.pendingContext!==e.context):e.context&&oX(i,e.context,!1),eK(i,e.containerInfo)}function SX(i,e,t,n,r){return Ay(),Gj(r),e.flags|=256,cl(i,e,t,n),e.child}var SV={dehydrated:null,treeContext:null,retryLane:0};function LV(i){return{baseLanes:i,cachePool:null,transitions:null}}function Noe(i,e,t){var n=e.pendingProps,r=Bs.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=i!==null&&i.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),ds(Bs,r&1),i===null)return mV(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,i=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=B5(o,n,0,null),i=j1(i,n,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=LV(t),e.memoizedState=SV,i):lK(e,o));if(r=i.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return A1e(i,e,o,n,a,r,t);if(s){s=n.fallback,o=e.mode,r=i.child,a=r.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=e0(r,u),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=e0(a,s):(s=j1(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=i.child.memoizedState,o=o===null?LV(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=i.childLanes&~t,e.memoizedState=SV,n}return s=i.child,i=s.sibling,n=e0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function lK(i,e){return e=B5({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function aR(i,e,t,n){return n!==null&&Gj(n),Oy(e,i.child,null,t),i=lK(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function A1e(i,e,t,n,r,s,o){if(t)return e.flags&256?(e.flags&=-257,n=G7(Error(Lt(422))),aR(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=B5({mode:"visible",children:n.children},r,0,null),s=j1(s,r,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Oy(e,i.child,null,o),e.child.memoizedState=LV(o),e.memoizedState=SV,s);if(!(e.mode&1))return aR(i,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Lt(419)),n=G7(s,n,void 0),aR(i,e,o,n)}if(a=(o&i.childLanes)!==0,Iu||a){if(n=sa,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Dp(i,r),zh(n,i,r,-1))}return gK(),n=G7(Error(Lt(421))),aR(i,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=j1e.bind(null,i),r._reactRetry=e,null):(i=s.treeContext,Xu=Zv(r.nextSibling),nc=e,Es=!0,Th=null,i!==null&&(Pc[Fc++]=ap,Pc[Fc++]=lp,Pc[Fc++]=hb,ap=i.id,lp=i.overflow,hb=e),e=lK(e,n.children),e.flags|=4096,e)}function LX(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),_V(i.return,e,t)}function Y7(i,e,t,n,r){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r)}function Aoe(i,e,t){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(cl(i,e,n.children,t),n=Bs.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&LX(i,t,e);else if(i.tag===19)LX(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(ds(Bs,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&X4(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Y7(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&X4(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}Y7(e,!0,t,null,s);break;case"together":Y7(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function PP(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Ip(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),gb|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Lt(153));if(e.child!==null){for(i=e.child,t=e0(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=e0(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function O1e(i,e,t){switch(e.tag){case 3:koe(e),Ay();break;case 5:roe(e);break;case 1:Ou(e.type)&&j4(e);break;case 4:eK(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ds(G4,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ds(Bs,Bs.current&1),e.flags|=128,null):t&e.child.childLanes?Noe(i,e,t):(ds(Bs,Bs.current&1),i=Ip(i,e,t),i!==null?i.sibling:null);ds(Bs,Bs.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return Aoe(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ds(Bs,Bs.current),n)break;return null;case 22:case 23:return e.lanes=0,Ioe(i,e,t)}return Ip(i,e,t)}var Ooe,EV,Moe,Roe;Ooe=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};EV=function(){};Moe=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,A1(Xf.current);var s=null;switch(t){case"input":r=qW(i,r),n=qW(i,n),s=[];break;case"select":r=$s({},r,{value:void 0}),n=$s({},n,{value:void 0}),s=[];break;case"textarea":r=ZW(i,r),n=ZW(i,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=z4)}QW(t,n);var o;t=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Q2.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var u=n[d];if(a=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(d,t)),t=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Q2.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ms("scroll",i),s||a===u||(s=[])):(s=s||[]).push(d,u))}t&&(s=s||[]).push("style",t);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Roe=function(i,e,t,n){t!==n&&(e.flags|=4)};function bN(i,e){if(!Es)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Va(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function M1e(i,e,t){var n=e.pendingProps;switch(qj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(e),null;case 1:return Ou(e.type)&&U4(),Va(e),null;case 3:return n=e.stateNode,My(),ys(Au),ys(Ya),nK(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(sR(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Th!==null&&(OV(Th),Th=null))),EV(i,e),Va(e),null;case 5:tK(e);var r=A1(cA.current);if(t=e.type,i!==null&&e.stateNode!=null)Moe(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Lt(166));return Va(e),null}if(i=A1(Xf.current),sR(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Of]=e,n[lA]=s,i=(e.mode&1)!==0,t){case"dialog":ms("cancel",n),ms("close",n);break;case"iframe":case"object":case"embed":ms("load",n);break;case"video":case"audio":for(r=0;r<jN.length;r++)ms(jN[r],n);break;case"source":ms("error",n);break;case"img":case"image":case"link":ms("error",n),ms("load",n);break;case"details":ms("toggle",n);break;case"input":OZ(n,s),ms("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ms("invalid",n);break;case"textarea":RZ(n,s),ms("invalid",n)}QW(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&rR(n.textContent,a,i),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&rR(n.textContent,a,i),r=["children",""+a]):Q2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ms("scroll",n)}switch(t){case"input":ZM(n),MZ(n,s,!0);break;case"textarea":ZM(n),PZ(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=z4)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=use(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[Of]=e,i[lA]=n,Ooe(i,e,!1,!1),e.stateNode=i;e:{switch(o=JW(t,n),t){case"dialog":ms("cancel",i),ms("close",i),r=n;break;case"iframe":case"object":case"embed":ms("load",i),r=n;break;case"video":case"audio":for(r=0;r<jN.length;r++)ms(jN[r],i);r=n;break;case"source":ms("error",i),r=n;break;case"img":case"image":case"link":ms("error",i),ms("load",i),r=n;break;case"details":ms("toggle",i),r=n;break;case"input":OZ(i,n),r=qW(i,n),ms("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=$s({},n,{value:void 0}),ms("invalid",i);break;case"textarea":RZ(i,n),r=ZW(i,n),ms("invalid",i);break;default:r=n}QW(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?hse(i,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cse(i,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&J2(i,u):typeof u=="number"&&J2(i,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Q2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ms("scroll",i):u!=null&&Aj(i,s,u,o))}switch(t){case"input":ZM(i),MZ(i,n,!1);break;case"textarea":ZM(i),PZ(i);break;case"option":n.value!=null&&i.setAttribute("value",""+f0(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?Gw(i,!!n.multiple,s,!1):n.defaultValue!=null&&Gw(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=z4)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Va(e),null;case 6:if(i&&e.stateNode!=null)Roe(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Lt(166));if(t=A1(cA.current),A1(Xf.current),sR(e)){if(n=e.stateNode,t=e.memoizedProps,n[Of]=e,(s=n.nodeValue!==t)&&(i=nc,i!==null))switch(i.tag){case 3:rR(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&rR(n.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Of]=e,e.stateNode=n}return Va(e),null;case 13:if(ys(Bs),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Es&&Xu!==null&&e.mode&1&&!(e.flags&128))Jse(),Ay(),e.flags|=98560,s=!1;else if(s=sR(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(Lt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Lt(317));s[Of]=e}else Ay(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Va(e),s=!1}else Th!==null&&(OV(Th),Th=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||Bs.current&1?zo===0&&(zo=3):gK())),e.updateQueue!==null&&(e.flags|=4),Va(e),null);case 4:return My(),EV(i,e),i===null&&oA(e.stateNode.containerInfo),Va(e),null;case 10:return Xj(e.type._context),Va(e),null;case 17:return Ou(e.type)&&U4(),Va(e),null;case 19:if(ys(Bs),s=e.memoizedState,s===null)return Va(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)bN(s,!1);else{if(zo!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=X4(i),o!==null){for(e.flags|=128,bN(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,i=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return ds(Bs,Bs.current&1|2),e.child}i=i.sibling}s.tail!==null&&oo()>Py&&(e.flags|=128,n=!0,bN(s,!1),e.lanes=4194304)}else{if(!n)if(i=X4(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bN(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Es)return Va(e),null}else 2*oo()-s.renderingStartTime>Py&&t!==1073741824&&(e.flags|=128,n=!0,bN(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=oo(),e.sibling=null,t=Bs.current,ds(Bs,n?t&1|2:t&1),e):(Va(e),null);case 22:case 23:return fK(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ju&1073741824&&(Va(e),e.subtreeFlags&6&&(e.flags|=8192)):Va(e),null;case 24:return null;case 25:return null}throw Error(Lt(156,e.tag))}function R1e(i,e){switch(qj(e),e.tag){case 1:return Ou(e.type)&&U4(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return My(),ys(Au),ys(Ya),nK(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return tK(e),null;case 13:if(ys(Bs),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Lt(340));Ay()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return ys(Bs),null;case 4:return My(),null;case 10:return Xj(e.type._context),null;case 22:case 23:return fK(),null;case 24:return null;default:return null}}var lR=!1,za=!1,P1e=typeof WeakSet=="function"?WeakSet:Set,un=null;function Tw(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Xs(i,e,n)}else t.current=null}function xV(i,e,t){try{t()}catch(n){Xs(i,e,n)}}var EX=!1;function F1e(i,e){if(uV=V4,i=Vse(),jj(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,d=0,h=0,f=i,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||n!==0&&f.nodeType!==3||(u=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===i)break t;if(p===t&&++d===r&&(a=o),p===s&&++h===n&&(u=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(cV={focusedElem:i,selectionRange:t},V4=!1,un=e;un!==null;)if(e=un,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,un=i;else for(;un!==null;){e=un;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,L=v.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?b:bh(e.type,b),L);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Lt(163))}}catch(A){Xs(e,e.return,A)}if(i=e.sibling,i!==null){i.return=e.return,un=i;break}un=e.return}return v=EX,EX=!1,v}function b2(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var s=r.destroy;r.destroy=void 0,s!==void 0&&xV(e,t,s)}r=r.next}while(r!==n)}}function P5(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function DV(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function Poe(i){var e=i.alternate;e!==null&&(i.alternate=null,Poe(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[lA],delete e[fV],delete e[b1e],delete e[C1e])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Foe(i){return i.tag===5||i.tag===3||i.tag===4}function xX(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Foe(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function IV(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=z4));else if(n!==4&&(i=i.child,i!==null))for(IV(i,e,t),i=i.sibling;i!==null;)IV(i,e,t),i=i.sibling}function TV(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(TV(i,e,t),i=i.sibling;i!==null;)TV(i,e,t),i=i.sibling}var Ea=null,Sh=!1;function fv(i,e,t){for(t=t.child;t!==null;)Boe(i,e,t),t=t.sibling}function Boe(i,e,t){if(Zf&&typeof Zf.onCommitFiberUnmount=="function")try{Zf.onCommitFiberUnmount(I5,t)}catch{}switch(t.tag){case 5:za||Tw(t,e);case 6:var n=Ea,r=Sh;Ea=null,fv(i,e,t),Ea=n,Sh=r,Ea!==null&&(Sh?(i=Ea,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):Ea.removeChild(t.stateNode));break;case 18:Ea!==null&&(Sh?(i=Ea,t=t.stateNode,i.nodeType===8?$7(i.parentNode,t):i.nodeType===1&&$7(i,t),iA(i)):$7(Ea,t.stateNode));break;case 4:n=Ea,r=Sh,Ea=t.stateNode.containerInfo,Sh=!0,fv(i,e,t),Ea=n,Sh=r;break;case 0:case 11:case 14:case 15:if(!za&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xV(t,e,o),r=r.next}while(r!==n)}fv(i,e,t);break;case 1:if(!za&&(Tw(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Xs(t,e,a)}fv(i,e,t);break;case 21:fv(i,e,t);break;case 22:t.mode&1?(za=(n=za)||t.memoizedState!==null,fv(i,e,t),za=n):fv(i,e,t);break;default:fv(i,e,t)}}function DX(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new P1e),e.forEach(function(n){var r=K1e.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function ph(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var s=i,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ea=a.stateNode,Sh=!1;break e;case 3:Ea=a.stateNode.containerInfo,Sh=!0;break e;case 4:Ea=a.stateNode.containerInfo,Sh=!0;break e}a=a.return}if(Ea===null)throw Error(Lt(160));Boe(s,o,r),Ea=null,Sh=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(d){Xs(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Woe(e,i),e=e.sibling}function Woe(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ph(e,i),hf(i),n&4){try{b2(3,i,i.return),P5(3,i)}catch(b){Xs(i,i.return,b)}try{b2(5,i,i.return)}catch(b){Xs(i,i.return,b)}}break;case 1:ph(e,i),hf(i),n&512&&t!==null&&Tw(t,t.return);break;case 5:if(ph(e,i),hf(i),n&512&&t!==null&&Tw(t,t.return),i.flags&32){var r=i.stateNode;try{J2(r,"")}catch(b){Xs(i,i.return,b)}}if(n&4&&(r=i.stateNode,r!=null)){var s=i.memoizedProps,o=t!==null?t.memoizedProps:s,a=i.type,u=i.updateQueue;if(i.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ase(r,s),JW(a,o);var d=JW(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?hse(r,f):h==="dangerouslySetInnerHTML"?cse(r,f):h==="children"?J2(r,f):Aj(r,h,f,d)}switch(a){case"input":GW(r,s);break;case"textarea":lse(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Gw(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Gw(r,!!s.multiple,s.defaultValue,!0):Gw(r,!!s.multiple,s.multiple?[]:"",!1))}r[lA]=s}catch(b){Xs(i,i.return,b)}}break;case 6:if(ph(e,i),hf(i),n&4){if(i.stateNode===null)throw Error(Lt(162));r=i.stateNode,s=i.memoizedProps;try{r.nodeValue=s}catch(b){Xs(i,i.return,b)}}break;case 3:if(ph(e,i),hf(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{iA(e.containerInfo)}catch(b){Xs(i,i.return,b)}break;case 4:ph(e,i),hf(i);break;case 13:ph(e,i),hf(i),r=i.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(dK=oo())),n&4&&DX(i);break;case 22:if(h=t!==null&&t.memoizedState!==null,i.mode&1?(za=(d=za)||h,ph(e,i),za=d):ph(e,i),hf(i),n&8192){if(d=i.memoizedState!==null,(i.stateNode.isHidden=d)&&!h&&i.mode&1)for(un=i,h=i.child;h!==null;){for(f=un=h;un!==null;){switch(p=un,m=p.child,p.tag){case 0:case 11:case 14:case 15:b2(4,p,p.return);break;case 1:Tw(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,t=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){Xs(n,t,b)}}break;case 5:Tw(p,p.return);break;case 22:if(p.memoizedState!==null){TX(f);continue}}m!==null?(m.return=p,un=m):TX(f)}h=h.sibling}e:for(h=null,f=i;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=dse("display",o))}catch(b){Xs(i,i.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Xs(i,i.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===i)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ph(e,i),hf(i),n&4&&DX(i);break;case 21:break;default:ph(e,i),hf(i)}}function hf(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(Foe(t)){var n=t;break e}t=t.return}throw Error(Lt(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(J2(r,""),n.flags&=-33);var s=xX(i);TV(i,s,r);break;case 3:case 4:var o=n.stateNode.containerInfo,a=xX(i);IV(i,a,o);break;default:throw Error(Lt(161))}}catch(u){Xs(i,i.return,u)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function B1e(i,e,t){un=i,Voe(i)}function Voe(i,e,t){for(var n=(i.mode&1)!==0;un!==null;){var r=un,s=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||lR;if(!o){var a=r.alternate,u=a!==null&&a.memoizedState!==null||za;a=lR;var d=za;if(lR=o,(za=u)&&!d)for(un=r;un!==null;)o=un,u=o.child,o.tag===22&&o.memoizedState!==null?kX(r):u!==null?(u.return=o,un=u):kX(r);for(;s!==null;)un=s,Voe(s),s=s.sibling;un=r,lR=a,za=d}IX(i)}else r.subtreeFlags&8772&&s!==null?(s.return=r,un=s):IX(i)}}function IX(i){for(;un!==null;){var e=un;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:za||P5(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!za)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:bh(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hX(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}hX(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&iA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Lt(163))}za||e.flags&512&&DV(e)}catch(p){Xs(e,e.return,p)}}if(e===i){un=null;break}if(t=e.sibling,t!==null){t.return=e.return,un=t;break}un=e.return}}function TX(i){for(;un!==null;){var e=un;if(e===i){un=null;break}var t=e.sibling;if(t!==null){t.return=e.return,un=t;break}un=e.return}}function kX(i){for(;un!==null;){var e=un;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{P5(4,e)}catch(u){Xs(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(u){Xs(e,r,u)}}var s=e.return;try{DV(e)}catch(u){Xs(e,s,u)}break;case 5:var o=e.return;try{DV(e)}catch(u){Xs(e,o,u)}}}catch(u){Xs(e,e.return,u)}if(e===i){un=null;break}var a=e.sibling;if(a!==null){a.return=e.return,un=a;break}un=e.return}}var W1e=Math.ceil,eF=Vp.ReactCurrentDispatcher,uK=Vp.ReactCurrentOwner,Yc=Vp.ReactCurrentBatchConfig,gr=0,sa=null,Io=null,Ia=0,ju=0,kw=B0(0),zo=0,gA=null,gb=0,F5=0,cK=0,C2=null,Su=null,dK=0,Py=1/0,zg=null,tF=!1,kV=null,Qv=null,uR=!1,Fv=null,nF=0,w2=0,NV=null,FP=-1,BP=0;function _l(){return gr&6?oo():FP!==-1?FP:FP=oo()}function Jv(i){return i.mode&1?gr&2&&Ia!==0?Ia&-Ia:y1e.transition!==null?(BP===0&&(BP=Lse()),BP):(i=Vr,i!==0||(i=window.event,i=i===void 0?16:Nse(i.type)),i):1}function zh(i,e,t,n){if(50<w2)throw w2=0,NV=null,Error(Lt(185));KO(i,t,n),(!(gr&2)||i!==sa)&&(i===sa&&(!(gr&2)&&(F5|=t),zo===4&&Av(i,Ia)),Mu(i,n),t===1&&gr===0&&!(e.mode&1)&&(Py=oo()+500,O5&&W0()))}function Mu(i,e){var t=i.callbackNode;y0e(i,e);var n=W4(i,i===sa?Ia:0);if(n===0)t!==null&&WZ(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&WZ(t),e===1)i.tag===0?w1e(NX.bind(null,i)):Zse(NX.bind(null,i)),_1e(function(){!(gr&6)&&W0()}),t=null;else{switch(Ese(n)){case 1:t=Fj;break;case 4:t=yse;break;case 16:t=B4;break;case 536870912:t=Sse;break;default:t=B4}t=Goe(t,Hoe.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function Hoe(i,e){if(FP=-1,BP=0,gr&6)throw Error(Lt(327));var t=i.callbackNode;if(Jw()&&i.callbackNode!==t)return null;var n=W4(i,i===sa?Ia:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=iF(i,n);else{e=n;var r=gr;gr|=2;var s=zoe();(sa!==i||Ia!==e)&&(zg=null,Py=oo()+500,U1(i,e));do try{$1e();break}catch(a){$oe(i,a)}while(1);Zj(),eF.current=s,gr=r,Io!==null?e=0:(sa=null,Ia=0,e=zo)}if(e!==0){if(e===2&&(r=rV(i),r!==0&&(n=r,e=AV(i,r))),e===1)throw t=gA,U1(i,0),Av(i,n),Mu(i,oo()),t;if(e===6)Av(i,n);else{if(r=i.current.alternate,!(n&30)&&!V1e(r)&&(e=iF(i,n),e===2&&(s=rV(i),s!==0&&(n=s,e=AV(i,s))),e===1))throw t=gA,U1(i,0),Av(i,n),Mu(i,oo()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(Lt(345));case 2:c1(i,Su,zg);break;case 3:if(Av(i,n),(n&130023424)===n&&(e=dK+500-oo(),10<e)){if(W4(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){_l(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=hV(c1.bind(null,i,Su,zg),e);break}c1(i,Su,zg);break;case 4:if(Av(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var o=31-$h(n);s=1<<o,o=e[o],o>r&&(r=o),n&=~s}if(n=r,n=oo()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*W1e(n/1960))-n,10<n){i.timeoutHandle=hV(c1.bind(null,i,Su,zg),n);break}c1(i,Su,zg);break;case 5:c1(i,Su,zg);break;default:throw Error(Lt(329))}}}return Mu(i,oo()),i.callbackNode===t?Hoe.bind(null,i):null}function AV(i,e){var t=C2;return i.current.memoizedState.isDehydrated&&(U1(i,e).flags|=256),i=iF(i,e),i!==2&&(e=Su,Su=t,e!==null&&OV(e)),i}function OV(i){Su===null?Su=i:Su.push.apply(Su,i)}function V1e(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],s=r.getSnapshot;r=r.value;try{if(!Jh(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Av(i,e){for(e&=~cK,e&=~F5,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-$h(e),n=1<<t;i[t]=-1,e&=~n}}function NX(i){if(gr&6)throw Error(Lt(327));Jw();var e=W4(i,0);if(!(e&1))return Mu(i,oo()),null;var t=iF(i,e);if(i.tag!==0&&t===2){var n=rV(i);n!==0&&(e=n,t=AV(i,n))}if(t===1)throw t=gA,U1(i,0),Av(i,e),Mu(i,oo()),t;if(t===6)throw Error(Lt(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,c1(i,Su,zg),Mu(i,oo()),null}function hK(i,e){var t=gr;gr|=1;try{return i(e)}finally{gr=t,gr===0&&(Py=oo()+500,O5&&W0())}}function pb(i){Fv!==null&&Fv.tag===0&&!(gr&6)&&Jw();var e=gr;gr|=1;var t=Yc.transition,n=Vr;try{if(Yc.transition=null,Vr=1,i)return i()}finally{Vr=n,Yc.transition=t,gr=e,!(gr&6)&&W0()}}function fK(){ju=kw.current,ys(kw)}function U1(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,m1e(t)),Io!==null)for(t=Io.return;t!==null;){var n=t;switch(qj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&U4();break;case 3:My(),ys(Au),ys(Ya),nK();break;case 5:tK(n);break;case 4:My();break;case 13:ys(Bs);break;case 19:ys(Bs);break;case 10:Xj(n.type._context);break;case 22:case 23:fK()}t=t.return}if(sa=i,Io=i=e0(i.current,null),Ia=ju=e,zo=0,gA=null,cK=F5=gb=0,Su=C2=null,N1!==null){for(e=0;e<N1.length;e++)if(t=N1[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,n.next=o}t.pending=n}N1=null}return i}function $oe(i,e){do{var t=Io;try{if(Zj(),MP.current=J4,Q4){for(var n=Vs.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Q4=!1}if(fb=0,Qo=$o=Vs=null,v2=!1,dA=0,uK.current=null,t===null||t.return===null){zo=1,gA=e,Io=null;break}e:{var s=i,o=t.return,a=t,u=e;if(e=Ia,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=vX(o);if(m!==null){m.flags&=-257,bX(m,o,a,s,e),m.mode&1&&_X(s,d,e),e=m,u=d;var v=e.updateQueue;if(v===null){var b=new Set;b.add(u),e.updateQueue=b}else v.add(u);break e}else{if(!(e&1)){_X(s,d,e),gK();break e}u=Error(Lt(426))}}else if(Es&&a.mode&1){var L=vX(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),bX(L,o,a,s,e),Gj(Ry(u,a));break e}}s=u=Ry(u,a),zo!==4&&(zo=2),C2===null?C2=[s]:C2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Eoe(s,u,e);dX(s,S);break e;case 1:a=u;var y=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Qv===null||!Qv.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=xoe(s,a,e);dX(s,A);break e}}s=s.return}while(s!==null)}joe(t)}catch(N){e=N,Io===t&&t!==null&&(Io=t=t.return);continue}break}while(1)}function zoe(){var i=eF.current;return eF.current=J4,i===null?J4:i}function gK(){(zo===0||zo===3||zo===2)&&(zo=4),sa===null||!(gb&268435455)&&!(F5&268435455)||Av(sa,Ia)}function iF(i,e){var t=gr;gr|=2;var n=zoe();(sa!==i||Ia!==e)&&(zg=null,U1(i,e));do try{H1e();break}catch(r){$oe(i,r)}while(1);if(Zj(),gr=t,eF.current=n,Io!==null)throw Error(Lt(261));return sa=null,Ia=0,zo}function H1e(){for(;Io!==null;)Uoe(Io)}function $1e(){for(;Io!==null&&!f0e();)Uoe(Io)}function Uoe(i){var e=qoe(i.alternate,i,ju);i.memoizedProps=i.pendingProps,e===null?joe(i):Io=e,uK.current=null}function joe(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=R1e(t,e),t!==null){t.flags&=32767,Io=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{zo=6,Io=null;return}}else if(t=M1e(t,e,ju),t!==null){Io=t;return}if(e=e.sibling,e!==null){Io=e;return}Io=e=i}while(e!==null);zo===0&&(zo=5)}function c1(i,e,t){var n=Vr,r=Yc.transition;try{Yc.transition=null,Vr=1,z1e(i,e,t,n)}finally{Yc.transition=r,Vr=n}return null}function z1e(i,e,t,n){do Jw();while(Fv!==null);if(gr&6)throw Error(Lt(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Lt(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if(S0e(i,s),i===sa&&(Io=sa=null,Ia=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uR||(uR=!0,Goe(B4,function(){return Jw(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Yc.transition,Yc.transition=null;var o=Vr;Vr=1;var a=gr;gr|=4,uK.current=null,F1e(i,t),Woe(t,i),u1e(cV),V4=!!uV,cV=uV=null,i.current=t,B1e(t),g0e(),gr=a,Vr=o,Yc.transition=s}else i.current=t;if(uR&&(uR=!1,Fv=i,nF=r),s=i.pendingLanes,s===0&&(Qv=null),_0e(t.stateNode),Mu(i,oo()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(tF)throw tF=!1,i=kV,kV=null,i;return nF&1&&i.tag!==0&&Jw(),s=i.pendingLanes,s&1?i===NV?w2++:(w2=0,NV=i):w2=0,W0(),null}function Jw(){if(Fv!==null){var i=Ese(nF),e=Yc.transition,t=Vr;try{if(Yc.transition=null,Vr=16>i?16:i,Fv===null)var n=!1;else{if(i=Fv,Fv=null,nF=0,gr&6)throw Error(Lt(331));var r=gr;for(gr|=4,un=i.current;un!==null;){var s=un,o=s.child;if(un.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(un=d;un!==null;){var h=un;switch(h.tag){case 0:case 11:case 15:b2(8,h,s)}var f=h.child;if(f!==null)f.return=h,un=f;else for(;un!==null;){h=un;var p=h.sibling,m=h.return;if(Poe(h),h===d){un=null;break}if(p!==null){p.return=m,un=p;break}un=m}}}var v=s.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var L=b.sibling;b.sibling=null,b=L}while(b!==null)}}un=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,un=o;else e:for(;un!==null;){if(s=un,s.flags&2048)switch(s.tag){case 0:case 11:case 15:b2(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,un=S;break e}un=s.return}}var y=i.current;for(un=y;un!==null;){o=un;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,un=E;else e:for(o=y;un!==null;){if(a=un,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:P5(9,a)}}catch(N){Xs(a,a.return,N)}if(a===o){un=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,un=A;break e}un=a.return}}if(gr=r,W0(),Zf&&typeof Zf.onPostCommitFiberRoot=="function")try{Zf.onPostCommitFiberRoot(I5,i)}catch{}n=!0}return n}finally{Vr=t,Yc.transition=e}}return!1}function AX(i,e,t){e=Ry(t,e),e=Eoe(i,e,1),i=Xv(i,e,1),e=_l(),i!==null&&(KO(i,1,e),Mu(i,e))}function Xs(i,e,t){if(i.tag===3)AX(i,i,t);else for(;e!==null;){if(e.tag===3){AX(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qv===null||!Qv.has(n))){i=Ry(t,i),i=xoe(e,i,1),e=Xv(e,i,1),i=_l(),e!==null&&(KO(e,1,i),Mu(e,i));break}}e=e.return}}function U1e(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=_l(),i.pingedLanes|=i.suspendedLanes&t,sa===i&&(Ia&t)===t&&(zo===4||zo===3&&(Ia&130023424)===Ia&&500>oo()-dK?U1(i,0):cK|=t),Mu(i,e)}function Koe(i,e){e===0&&(i.mode&1?(e=JM,JM<<=1,!(JM&130023424)&&(JM=4194304)):e=1);var t=_l();i=Dp(i,e),i!==null&&(KO(i,e,t),Mu(i,t))}function j1e(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),Koe(i,t)}function K1e(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Lt(314))}n!==null&&n.delete(e),Koe(i,t)}var qoe;qoe=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Au.current)Iu=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Iu=!1,O1e(i,e,t);Iu=!!(i.flags&131072)}else Iu=!1,Es&&e.flags&1048576&&Xse(e,q4,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;PP(i,e),i=e.pendingProps;var r=Ny(e,Ya.current);Qw(e,t),r=rK(null,e,n,i,r,t);var s=sK();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ou(n)?(s=!0,j4(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jj(e),r.updater=R5,e.stateNode=r,r._reactInternals=e,bV(e,n,i,t),e=yV(null,e,n,!0,s,t)):(e.tag=0,Es&&s&&Kj(e),cl(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(PP(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=G1e(n),i=bh(n,i),r){case 0:e=wV(null,e,n,i,t);break e;case 1:e=yX(null,e,n,i,t);break e;case 11:e=CX(null,e,n,i,t);break e;case 14:e=wX(null,e,n,bh(n.type,i),t);break e}throw Error(Lt(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),wV(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),yX(i,e,n,r,t);case 3:e:{if(koe(e),i===null)throw Error(Lt(387));n=e.pendingProps,s=e.memoizedState,r=s.element,ioe(i,e),Z4(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ry(Error(Lt(423)),e),e=SX(i,e,n,t,r);break e}else if(n!==r){r=Ry(Error(Lt(424)),e),e=SX(i,e,n,t,r);break e}else for(Xu=Zv(e.stateNode.containerInfo.firstChild),nc=e,Es=!0,Th=null,t=toe(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ay(),n===r){e=Ip(i,e,t);break e}cl(i,e,n,t)}e=e.child}return e;case 5:return roe(e),i===null&&mV(e),n=e.type,r=e.pendingProps,s=i!==null?i.memoizedProps:null,o=r.children,dV(n,r)?o=null:s!==null&&dV(n,s)&&(e.flags|=32),Toe(i,e),cl(i,e,o,t),e.child;case 6:return i===null&&mV(e),null;case 13:return Noe(i,e,t);case 4:return eK(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Oy(e,null,n,t):cl(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),CX(i,e,n,r,t);case 7:return cl(i,e,e.pendingProps,t),e.child;case 8:return cl(i,e,e.pendingProps.children,t),e.child;case 12:return cl(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ds(G4,n._currentValue),n._currentValue=o,s!==null)if(Jh(s.value,o)){if(s.children===r.children&&!Au.current){e=Ip(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=fp(-1,t&-t),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),_V(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Lt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),_V(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}cl(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Qw(e,t),r=ed(r),n=n(r),e.flags|=1,cl(i,e,n,t),e.child;case 14:return n=e.type,r=bh(n,e.pendingProps),r=bh(n.type,r),wX(i,e,n,r,t);case 15:return Doe(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),PP(i,e),e.tag=1,Ou(n)?(i=!0,j4(e)):i=!1,Qw(e,t),Loe(e,n,r),bV(e,n,r,t),yV(null,e,n,!0,i,t);case 19:return Aoe(i,e,t);case 22:return Ioe(i,e,t)}throw Error(Lt(156,e.tag))};function Goe(i,e){return wse(i,e)}function q1e(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(i,e,t,n){return new q1e(i,e,t,n)}function pK(i){return i=i.prototype,!(!i||!i.isReactComponent)}function G1e(i){if(typeof i=="function")return pK(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Mj)return 11;if(i===Rj)return 14}return 2}function e0(i,e){var t=i.alternate;return t===null?(t=jc(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function WP(i,e,t,n,r,s){var o=2;if(n=i,typeof i=="function")pK(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case Cw:return j1(t.children,r,s,e);case Oj:o=8,r|=8;break;case zW:return i=jc(12,t,e,r|2),i.elementType=zW,i.lanes=s,i;case UW:return i=jc(13,t,e,r),i.elementType=UW,i.lanes=s,i;case jW:return i=jc(19,t,e,r),i.elementType=jW,i.lanes=s,i;case rse:return B5(t,r,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case nse:o=10;break e;case ise:o=9;break e;case Mj:o=11;break e;case Rj:o=14;break e;case xv:o=16,n=null;break e}throw Error(Lt(130,i==null?i:typeof i,""))}return e=jc(o,t,e,r),e.elementType=i,e.type=n,e.lanes=s,e}function j1(i,e,t,n){return i=jc(7,i,n,e),i.lanes=t,i}function B5(i,e,t,n){return i=jc(22,i,n,e),i.elementType=rse,i.lanes=t,i.stateNode={isHidden:!1},i}function Z7(i,e,t){return i=jc(6,i,null,e),i.lanes=t,i}function X7(i,e,t){return e=jc(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function Y1e(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N7(0),this.expirationTimes=N7(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N7(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function mK(i,e,t,n,r,s,o,a,u){return i=new Y1e(i,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jc(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jj(s),i}function Z1e(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bw,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function Yoe(i){if(!i)return g0;i=i._reactInternals;e:{if(hC(i)!==i||i.tag!==1)throw Error(Lt(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ou(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Lt(171))}if(i.tag===1){var t=i.type;if(Ou(t))return Yse(i,t,e)}return e}function Zoe(i,e,t,n,r,s,o,a,u){return i=mK(t,n,!0,i,r,s,o,a,u),i.context=Yoe(null),t=i.current,n=_l(),r=Jv(t),s=fp(n,r),s.callback=e??null,Xv(t,s,r),i.current.lanes=r,KO(i,r,n),Mu(i,n),i}function W5(i,e,t,n){var r=e.current,s=_l(),o=Jv(r);return t=Yoe(t),e.context===null?e.context=t:e.pendingContext=t,e=fp(s,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Xv(r,e,o),i!==null&&(zh(i,r,o,s),OP(i,r,o)),o}function rF(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function OX(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function _K(i,e){OX(i,e),(i=i.alternate)&&OX(i,e)}function X1e(){return null}var Xoe=typeof reportError=="function"?reportError:function(i){console.error(i)};function vK(i){this._internalRoot=i}V5.prototype.render=vK.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Lt(409));W5(i,e,null,null)};V5.prototype.unmount=vK.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;pb(function(){W5(null,i,null,null)}),e[xp]=null}};function V5(i){this._internalRoot=i}V5.prototype.unstable_scheduleHydration=function(i){if(i){var e=Ise();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Nv.length&&e!==0&&e<Nv[t].priority;t++);Nv.splice(t,0,i),t===0&&kse(i)}};function bK(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function H5(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function MX(){}function Q1e(i,e,t,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var d=rF(o);s.call(d)}}var o=Zoe(e,n,i,0,null,!1,!1,"",MX);return i._reactRootContainer=o,i[xp]=o.current,oA(i.nodeType===8?i.parentNode:i),pb(),o}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var d=rF(u);a.call(d)}}var u=mK(i,0,!1,null,null,!1,!1,"",MX);return i._reactRootContainer=u,i[xp]=u.current,oA(i.nodeType===8?i.parentNode:i),pb(function(){W5(e,u,t,n)}),u}function $5(i,e,t,n,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var u=rF(o);a.call(u)}}W5(e,o,i,r)}else o=Q1e(t,e,i,r,n);return rF(o)}xse=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=UN(e.pendingLanes);t!==0&&(Bj(e,t|1),Mu(e,oo()),!(gr&6)&&(Py=oo()+500,W0()))}break;case 13:pb(function(){var n=Dp(i,1);if(n!==null){var r=_l();zh(n,i,1,r)}}),_K(i,1)}};Wj=function(i){if(i.tag===13){var e=Dp(i,134217728);if(e!==null){var t=_l();zh(e,i,134217728,t)}_K(i,134217728)}};Dse=function(i){if(i.tag===13){var e=Jv(i),t=Dp(i,e);if(t!==null){var n=_l();zh(t,i,e,n)}_K(i,e)}};Ise=function(){return Vr};Tse=function(i,e){var t=Vr;try{return Vr=i,e()}finally{Vr=t}};tV=function(i,e,t){switch(e){case"input":if(GW(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=A5(n);if(!r)throw Error(Lt(90));ose(n),GW(n,r)}}}break;case"textarea":lse(i,t);break;case"select":e=t.value,e!=null&&Gw(i,!!t.multiple,e,!1)}};pse=hK;mse=pb;var J1e={usingClientEntryPoint:!1,Events:[GO,Lw,A5,fse,gse,hK]},CN={findFiberByHostInstance:k1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ebe={bundleType:CN.bundleType,version:CN.version,rendererPackageName:CN.rendererPackageName,rendererConfig:CN.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vp.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=bse(i),i===null?null:i.stateNode},findFiberByHostInstance:CN.findFiberByHostInstance||X1e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cR.isDisabled&&cR.supportsFiber)try{I5=cR.inject(ebe),Zf=cR}catch{}}mc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J1e;mc.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bK(e))throw Error(Lt(200));return Z1e(i,e,null,t)};mc.createRoot=function(i,e){if(!bK(i))throw Error(Lt(299));var t=!1,n="",r=Xoe;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=mK(i,1,!1,null,null,t,!1,n,r),i[xp]=e.current,oA(i.nodeType===8?i.parentNode:i),new vK(e)};mc.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Lt(188)):(i=Object.keys(i).join(","),Error(Lt(268,i)));return i=bse(e),i=i===null?null:i.stateNode,i};mc.flushSync=function(i){return pb(i)};mc.hydrate=function(i,e,t){if(!H5(e))throw Error(Lt(200));return $5(null,i,e,!0,t)};mc.hydrateRoot=function(i,e,t){if(!bK(i))throw Error(Lt(405));var n=t!=null&&t.hydratedSources||null,r=!1,s="",o=Xoe;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Zoe(e,null,i,1,t??null,r,!1,s,o),i[xp]=e.current,oA(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new V5(e)};mc.render=function(i,e,t){if(!H5(e))throw Error(Lt(200));return $5(null,i,e,!1,t)};mc.unmountComponentAtNode=function(i){if(!H5(i))throw Error(Lt(40));return i._reactRootContainer?(pb(function(){$5(null,null,i,!1,function(){i._reactRootContainer=null,i[xp]=null})}),!0):!1};mc.unstable_batchedUpdates=hK;mc.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!H5(t))throw Error(Lt(200));if(i==null||i._reactInternals===void 0)throw Error(Lt(38));return $5(i,e,t,!1,n)};mc.version="18.3.1-next-f1338f8080-20240426";function Qoe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qoe)}catch(i){console.error(i)}}Qoe(),Qre.exports=mc;var z5=Qre.exports;const mb=Wp(z5),tbe=Vre({__proto__:null,default:mb},[z5]);var RX=z5;HW.createRoot=RX.createRoot,HW.hydrateRoot=RX.hydrateRoot;/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var PX;(function(i){(function(e){var t=typeof ta=="object"?ta:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=r(i);typeof t.Reflect>"u"?t.Reflect=i:n=r(t.Reflect,n),e(n);function r(s,o){return function(a,u){typeof s[a]!="function"&&Object.defineProperty(s,a,{configurable:!0,writable:!0,value:u}),o&&o(a,u)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",r=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!o&&!a,d={create:o?function(){return Ci(Object.create(null))}:a?function(){return Ci({__proto__:null})}:function(){return Ci({})},has:u?function(Te,Fe){return t.call(Te,Fe)}:function(Te,Fe){return Fe in Te},get:u?function(Te,Fe){return t.call(Te,Fe)?Te[Fe]:void 0}:function(Te,Fe){return Te[Fe]}},h=Object.getPrototypeOf(Function),f=typeof process=="object"&&process["env"]&&process["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",p=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:jn(),m=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Pt(),v=!f&&typeof WeakMap=="function"?WeakMap:pn(),b=new v;function L(Te,Fe,pt,at){if(K(pt)){if(!ut(Te))throw new TypeError;if(!Xe(Fe))throw new TypeError;return X(Te,Fe)}else{if(!ut(Te))throw new TypeError;if(!be(Fe))throw new TypeError;if(!be(at)&&!K(at)&&!fe(at))throw new TypeError;return fe(at)&&(at=void 0),pt=Me(pt),$(Te,Fe,pt,at)}}e("decorate",L);function S(Te,Fe){function pt(at,bt){if(!be(at))throw new TypeError;if(!K(bt)&&!sn(bt))throw new TypeError;U(Te,Fe,at,bt)}return pt}e("metadata",S);function y(Te,Fe,pt,at){if(!be(pt))throw new TypeError;return K(at)||(at=Me(at)),U(Te,Fe,pt,at)}e("defineMetadata",y);function E(Te,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Me(pt)),O(Te,Fe,pt)}e("hasMetadata",E);function A(Te,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Me(pt)),B(Te,Fe,pt)}e("hasOwnMetadata",A);function N(Te,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Me(pt)),W(Te,Fe,pt)}e("getMetadata",N);function V(Te,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Me(pt)),j(Te,Fe,pt)}e("getOwnMetadata",V);function M(Te,Fe){if(!be(Te))throw new TypeError;return K(Fe)||(Fe=Me(Fe)),q(Te,Fe)}e("getMetadataKeys",M);function R(Te,Fe){if(!be(Te))throw new TypeError;return K(Fe)||(Fe=Me(Fe)),z(Te,Fe)}e("getOwnMetadataKeys",R);function Y(Te,Fe,pt){if(!be(Fe))throw new TypeError;K(pt)||(pt=Me(pt));var at=T(Fe,pt,!1);if(K(at)||!at.delete(Te))return!1;if(at.size>0)return!0;var bt=b.get(Fe);return bt.delete(pt),bt.size>0||b.delete(Fe),!0}e("deleteMetadata",Y);function X(Te,Fe){for(var pt=Te.length-1;pt>=0;--pt){var at=Te[pt],bt=at(Fe);if(!K(bt)&&!fe(bt)){if(!Xe(bt))throw new TypeError;Fe=bt}}return Fe}function $(Te,Fe,pt,at){for(var bt=Te.length-1;bt>=0;--bt){var wi=Te[bt],Vt=wi(Fe,pt,at);if(!K(Vt)&&!fe(Vt)){if(!be(Vt))throw new TypeError;at=Vt}}return at}function T(Te,Fe,pt){var at=b.get(Te);if(K(at)){if(!pt)return;at=new p,b.set(Te,at)}var bt=at.get(Fe);if(K(bt)){if(!pt)return;bt=new p,at.set(Fe,bt)}return bt}function O(Te,Fe,pt){var at=B(Te,Fe,pt);if(at)return!0;var bt=si(Fe);return fe(bt)?!1:O(Te,bt,pt)}function B(Te,Fe,pt){var at=T(Fe,pt,!1);return K(at)?!1:rt(at.has(Te))}function W(Te,Fe,pt){var at=B(Te,Fe,pt);if(at)return j(Te,Fe,pt);var bt=si(Fe);if(!fe(bt))return W(Te,bt,pt)}function j(Te,Fe,pt){var at=T(Fe,pt,!1);if(!K(at))return at.get(Te)}function U(Te,Fe,pt,at){var bt=T(pt,at,!0);bt.set(Te,Fe)}function q(Te,Fe){var pt=z(Te,Fe),at=si(Te);if(at===null)return pt;var bt=q(at,Fe);if(bt.length<=0)return pt;if(pt.length<=0)return bt;for(var wi=new m,Vt=[],Tt=0,qt=pt;Tt<qt.length;Tt++){var Gt=qt[Tt],Bt=wi.has(Gt);Bt||(wi.add(Gt),Vt.push(Gt))}for(var fr=0,ei=bt;fr<ei.length;fr++){var Gt=ei[fr],Bt=wi.has(Gt);Bt||(wi.add(Gt),Vt.push(Gt))}return Vt}function z(Te,Fe){var pt=[],at=T(Te,Fe,!1);if(K(at))return pt;for(var bt=at.keys(),wi=dn(bt),Vt=0;;){var Tt=Wn(wi);if(!Tt)return pt.length=Vt,pt;var qt=Sn(Tt);try{pt[Vt]=qt}catch(Gt){try{Jn(wi)}finally{throw Gt}}Vt++}}function k(Te){if(Te===null)return 1;switch(typeof Te){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Te===null?1:6;default:return 6}}function K(Te){return Te===void 0}function fe(Te){return Te===null}function ne(Te){return typeof Te=="symbol"}function be(Te){return typeof Te=="object"?Te!==null:typeof Te=="function"}function De(Te,Fe){switch(k(Te)){case 0:return Te;case 1:return Te;case 2:return Te;case 3:return Te;case 4:return Te;case 5:return Te}var pt=Fe===3?"string":Fe===5?"number":"default",at=Kt(Te,r);if(at!==void 0){var bt=at.call(Te,pt);if(be(bt))throw new TypeError;return bt}return Ve(Te,pt==="default"?"number":pt)}function Ve(Te,Fe){if(Fe==="string"){var pt=Te.toString;if(Ct(pt)){var at=pt.call(Te);if(!be(at))return at}var bt=Te.valueOf;if(Ct(bt)){var at=bt.call(Te);if(!be(at))return at}}else{var bt=Te.valueOf;if(Ct(bt)){var at=bt.call(Te);if(!be(at))return at}var wi=Te.toString;if(Ct(wi)){var at=wi.call(Te);if(!be(at))return at}}throw new TypeError}function rt(Te){return!!Te}function At(Te){return""+Te}function Me(Te){var Fe=De(Te,3);return ne(Fe)?Fe:At(Fe)}function ut(Te){return Array.isArray?Array.isArray(Te):Te instanceof Object?Te instanceof Array:Object.prototype.toString.call(Te)==="[object Array]"}function Ct(Te){return typeof Te=="function"}function Xe(Te){return typeof Te=="function"}function sn(Te){switch(k(Te)){case 3:return!0;case 4:return!0;default:return!1}}function Kt(Te,Fe){var pt=Te[Fe];if(pt!=null){if(!Ct(pt))throw new TypeError;return pt}}function dn(Te){var Fe=Kt(Te,s);if(!Ct(Fe))throw new TypeError;var pt=Fe.call(Te);if(!be(pt))throw new TypeError;return pt}function Sn(Te){return Te.value}function Wn(Te){var Fe=Te.next();return Fe.done?!1:Fe}function Jn(Te){var Fe=Te.return;Fe&&Fe.call(Te)}function si(Te){var Fe=Object.getPrototypeOf(Te);if(typeof Te!="function"||Te===h||Fe!==h)return Fe;var pt=Te.prototype,at=pt&&Object.getPrototypeOf(pt);if(at==null||at===Object.prototype)return Fe;var bt=at.constructor;return typeof bt!="function"||bt===Te?Fe:bt}function jn(){var Te={},Fe=[],pt=function(){function Vt(Tt,qt,Gt){this._index=0,this._keys=Tt,this._values=qt,this._selector=Gt}return Vt.prototype["@@iterator"]=function(){return this},Vt.prototype[s]=function(){return this},Vt.prototype.next=function(){var Tt=this._index;if(Tt>=0&&Tt<this._keys.length){var qt=this._selector(this._keys[Tt],this._values[Tt]);return Tt+1>=this._keys.length?(this._index=-1,this._keys=Fe,this._values=Fe):this._index++,{value:qt,done:!1}}return{value:void 0,done:!0}},Vt.prototype.throw=function(Tt){throw this._index>=0&&(this._index=-1,this._keys=Fe,this._values=Fe),Tt},Vt.prototype.return=function(Tt){return this._index>=0&&(this._index=-1,this._keys=Fe,this._values=Fe),{value:Tt,done:!0}},Vt}();return function(){function Vt(){this._keys=[],this._values=[],this._cacheKey=Te,this._cacheIndex=-2}return Object.defineProperty(Vt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Vt.prototype.has=function(Tt){return this._find(Tt,!1)>=0},Vt.prototype.get=function(Tt){var qt=this._find(Tt,!1);return qt>=0?this._values[qt]:void 0},Vt.prototype.set=function(Tt,qt){var Gt=this._find(Tt,!0);return this._values[Gt]=qt,this},Vt.prototype.delete=function(Tt){var qt=this._find(Tt,!1);if(qt>=0){for(var Gt=this._keys.length,Bt=qt+1;Bt<Gt;Bt++)this._keys[Bt-1]=this._keys[Bt],this._values[Bt-1]=this._values[Bt];return this._keys.length--,this._values.length--,Tt===this._cacheKey&&(this._cacheKey=Te,this._cacheIndex=-2),!0}return!1},Vt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Te,this._cacheIndex=-2},Vt.prototype.keys=function(){return new pt(this._keys,this._values,at)},Vt.prototype.values=function(){return new pt(this._keys,this._values,bt)},Vt.prototype.entries=function(){return new pt(this._keys,this._values,wi)},Vt.prototype["@@iterator"]=function(){return this.entries()},Vt.prototype[s]=function(){return this.entries()},Vt.prototype._find=function(Tt,qt){return this._cacheKey!==Tt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Tt)),this._cacheIndex<0&&qt&&(this._cacheIndex=this._keys.length,this._keys.push(Tt),this._values.push(void 0)),this._cacheIndex},Vt}();function at(Vt,Tt){return Vt}function bt(Vt,Tt){return Tt}function wi(Vt,Tt){return[Vt,Tt]}}function Pt(){return function(){function Te(){this._map=new p}return Object.defineProperty(Te.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Te.prototype.has=function(Fe){return this._map.has(Fe)},Te.prototype.add=function(Fe){return this._map.set(Fe,Fe),this},Te.prototype.delete=function(Fe){return this._map.delete(Fe)},Te.prototype.clear=function(){this._map.clear()},Te.prototype.keys=function(){return this._map.keys()},Te.prototype.values=function(){return this._map.values()},Te.prototype.entries=function(){return this._map.entries()},Te.prototype["@@iterator"]=function(){return this.keys()},Te.prototype[s]=function(){return this.keys()},Te}()}function pn(){var Te=16,Fe=d.create(),pt=at();return function(){function qt(){this._key=at()}return qt.prototype.has=function(Gt){var Bt=bt(Gt,!1);return Bt!==void 0?d.has(Bt,this._key):!1},qt.prototype.get=function(Gt){var Bt=bt(Gt,!1);return Bt!==void 0?d.get(Bt,this._key):void 0},qt.prototype.set=function(Gt,Bt){var fr=bt(Gt,!0);return fr[this._key]=Bt,this},qt.prototype.delete=function(Gt){var Bt=bt(Gt,!1);return Bt!==void 0?delete Bt[this._key]:!1},qt.prototype.clear=function(){this._key=at()},qt}();function at(){var qt;do qt="@@WeakMap@@"+Tt();while(d.has(Fe,qt));return Fe[qt]=!0,qt}function bt(qt,Gt){if(!t.call(qt,pt)){if(!Gt)return;Object.defineProperty(qt,pt,{value:d.create()})}return qt[pt]}function wi(qt,Gt){for(var Bt=0;Bt<Gt;++Bt)qt[Bt]=Math.random()*255|0;return qt}function Vt(qt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(qt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(qt)):wi(new Uint8Array(qt),qt):wi(new Array(qt),qt)}function Tt(){var qt=Vt(Te);qt[6]=qt[6]&79|64,qt[8]=qt[8]&191|128;for(var Gt="",Bt=0;Bt<Te;++Bt){var fr=qt[Bt];(Bt===4||Bt===6||Bt===8)&&(Gt+="-"),fr<16&&(Gt+="0"),Gt+=fr.toString(16).toLowerCase()}return Gt}}function Ci(Te){return Te.__=void 0,delete Te.__,Te}})})(PX||(PX={}));var MV;(function(i){i[i.Transient=0]="Transient",i[i.Singleton=1]="Singleton",i[i.ResolutionScoped=2]="ResolutionScoped",i[i.ContainerScoped=3]="ContainerScoped"})(MV||(MV={}));const vu=MV;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var RV=function(i,e){return RV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])},RV(i,e)};function CK(i,e){RV(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function dR(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sF(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function m1(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(sF(arguments[e]));return i}var nbe="injectionTokens";function ibe(i){var e=Reflect.getMetadata("design:paramtypes",i)||[],t=Reflect.getOwnMetadata(nbe,i)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function Joe(i){return!!i.useClass}function PV(i){return!!i.useFactory}var eae=function(){function i(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return i.prototype.createProxy=function(e){var t=this,n={},r=!1,s,o=function(){return r||(s=e(t.wrap()),r=!0),s};return new Proxy(n,this.createHandler(o))},i.prototype.createHandler=function(e){var t={},n=function(r){t[r]=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];s[0]=e();var a=Reflect[r];return a.apply(void 0,m1(s))}};return this.reflectMethods.forEach(n),t},i}();function $C(i){return typeof i=="string"||typeof i=="symbol"}function rbe(i){return typeof i=="object"&&"token"in i&&"multiple"in i}function FX(i){return typeof i=="object"&&"token"in i&&"transform"in i}function sbe(i){return typeof i=="function"||i instanceof eae}function VP(i){return!!i.useToken}function HP(i){return i.useValue!=null}function obe(i){return Joe(i)||HP(i)||VP(i)||PV(i)}var wK=function(){function i(){this._registryMap=new Map}return i.prototype.entries=function(){return this._registryMap.entries()},i.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},i.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},i.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},i.prototype.setAll=function(e,t){this._registryMap.set(e,t)},i.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},i.prototype.clear=function(){this._registryMap.clear()},i.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},i}(),abe=function(i){CK(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(wK),BX=function(){function i(){this.scopedResolutions=new Map}return i}();function lbe(i,e){if(i===null)return"at position #"+e;var t=i.split(",")[e].trim();return'"'+t+'" at position #'+e}function ube(i,e,t){return t===void 0&&(t="    "),m1([i],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function cbe(i,e,t){var n=sF(i.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=n[1],s=r===void 0?null:r,o=lbe(s,e);return ube("Cannot inject the dependency "+o+' of "'+i.name+'" constructor. Reason:',t)}var dbe=function(i){CK(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(wK),hbe=function(i){CK(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(wK),fbe=function(){function i(){this.preResolution=new dbe,this.postResolution=new hbe}return i}(),tae=new Map,gbe=function(){function i(e){this.parent=e,this._registry=new abe,this.interceptors=new fbe}return i.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:vu.Transient});var r;if(obe(t)?r=t:r={useClass:t},VP(r))for(var s=[e],o=r;o!=null;){var a=o.useToken;if(s.includes(a))throw new Error("Token registration cycle detected! "+m1(s,[a]).join(" -> "));s.push(a);var u=this._registry.get(a);u&&VP(u.provider)?o=u.provider:o=null}if((n.lifecycle===vu.Singleton||n.lifecycle==vu.ContainerScoped||n.lifecycle==vu.ResolutionScoped)&&(HP(r)||PV(r)))throw new Error('Cannot use lifecycle "'+vu[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:n}),this},i.prototype.registerType=function(e,t){return $C(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},i.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},i.prototype.registerSingleton=function(e,t){if($C(e)){if($C(t))return this.register(e,{useToken:t},{lifecycle:vu.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:vu.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!$C(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:vu.Singleton})},i.prototype.resolve=function(e,t){t===void 0&&(t=new BX);var n=this.getRegistration(e);if(!n&&$C(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(sbe(e)){var r=this.construct(e,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},i.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var s=[];try{for(var o=dR(this.interceptors.preResolution.getAll(e)),a=o.next();!a.done;a=o.next()){var u=a.value;u.options.frequency!="Once"&&s.push(u),u.callback(e,t)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,s)}},i.prototype.executePostResolutionInterceptor=function(e,t,n){var r,s;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var a=dR(this.interceptors.postResolution.getAll(e)),u=a.next();!u.done;u=a.next()){var d=u.value;d.options.frequency!="Once"&&o.push(d),d.callback(e,t,n)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},i.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===vu.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===vu.Singleton,r=e.options.lifecycle===vu.ContainerScoped,s=n||r,o;return HP(e.provider)?o=e.provider.useValue:VP(e.provider)?o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Joe(e.provider)?o=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):PV(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===vu.ResolutionScoped&&t.scopedResolutions.set(e,o),o},i.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new BX);var r=this.getAllRegistrations(e);if(!r&&$C(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var s=r.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,s,"All"),s}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},i.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},i.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},i.prototype.clearInstances=function(){var e,t;try{for(var n=dR(this._registry.entries()),r=n.next();!r.done;r=n.next()){var s=sF(r.value,2),o=s[0],a=s[1];this._registry.setAll(o,a.filter(function(u){return!HP(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},i.prototype.createChildContainer=function(){var e,t,n=new i(this);try{for(var r=dR(this._registry.entries()),s=r.next();!s.done;s=r.next()){var o=sF(s.value,2),a=o[0],u=o[1];u.some(function(d){var h=d.options;return h.lifecycle===vu.ContainerScoped})&&n._registry.setAll(a,u.map(function(d){return d.options.lifecycle===vu.ContainerScoped?{provider:d.provider,options:d.options}:d}))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},i.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},i.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},i.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},i.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},i.prototype.construct=function(e,t){var n=this;if(e instanceof eae)return e.createProxy(function(o){return n.resolve(o,t)});var r=tae.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var s=r.map(this.resolveParams(t,e));return new(e.bind.apply(e,m1([void 0],s)))},i.prototype.resolveParams=function(e,t){var n=this;return function(r,s){var o,a,u;try{return rbe(r)?FX(r)?r.multiple?(o=n.resolve(r.transform)).transform.apply(o,m1([n.resolveAll(r.token)],r.transformArgs)):(a=n.resolve(r.transform)).transform.apply(a,m1([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):FX(r)?(u=n.resolve(r.transform,e)).transform.apply(u,m1([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(d){throw new Error(cbe(t,s,d))}}},i}(),je=new gbe;function pbe(){return function(i){tae.set(i,ibe(i))}}function Ki(){return function(i){pbe()(i),je.registerSingleton(i)}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);class U5{constructor(){this._events=new Map}count(e){return(this._events.get(e)||[]).length}emit(e,...t){const n=this._events.get(e);if(n&&n.length>0){let r=!0;for(let s=n.length-1;s>=0;s--)r&&n[s].call({stopDelivery:()=>r=!1},...t)}}subscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.assignEvent(n,t)}):this.assignEvent(e,t)}unsubscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.deleteEvent(n,t)}):this.deleteEvent(e,t)}deleteEvent(e,t){if(t){const n=this._events.get(e);n&&n.splice(n.indexOf(t),1)}else this._events.delete(e)}assignEvent(e,t){const n=this._events.get(e);n?n.push(t):this._events.set(e,[t])}}const O1=new U5;class kS{subscribe(e,t){O1.subscribe(e,t)}emit(e,...t){O1.emit(e,...t)}count(e){return O1.count(e)}unsubscribe(e,t){O1.unsubscribe(e,t)}}function mbe(i){return function(e,t,n){const r=n.value;return typeof r=="function"&&(n.value=function(...s){try{const o=r.apply(this,s);return O1.emit(i,s),o}catch(o){throw o}}),n}}function _be(i){return function(e,t,n){const r=n.value;return typeof r=="function"&&O1.subscribe(i,r),n}}const vbe=Object.freeze(Object.defineProperty({__proto__:null,EventBus:O1,EventEmitter:U5,GlobalEvent:kS,emit:mbe,subscribe:_be},Symbol.toStringTag,{value:"Module"}));var oF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */oF.exports;(function(i,e){(function(){var t,n="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,L=1,S=2,y=4,E=8,A=16,N=32,V=64,M=128,R=256,Y=512,X=30,$="...",T=800,O=16,B=1,W=2,j=3,U=1/0,q=9007199254740991,z=17976931348623157e292,k=0/0,K=4294967295,fe=K-1,ne=K>>>1,be=[["ary",M],["bind",L],["bindKey",S],["curry",E],["curryRight",A],["flip",Y],["partial",N],["partialRight",V],["rearg",R]],De="[object Arguments]",Ve="[object Array]",rt="[object AsyncFunction]",At="[object Boolean]",Me="[object Date]",ut="[object DOMException]",Ct="[object Error]",Xe="[object Function]",sn="[object GeneratorFunction]",Kt="[object Map]",dn="[object Number]",Sn="[object Null]",Wn="[object Object]",Jn="[object Promise]",si="[object Proxy]",jn="[object RegExp]",Pt="[object Set]",pn="[object String]",Ci="[object Symbol]",Te="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",bt="[object DataView]",wi="[object Float32Array]",Vt="[object Float64Array]",Tt="[object Int8Array]",qt="[object Int16Array]",Gt="[object Int32Array]",Bt="[object Uint8Array]",fr="[object Uint8ClampedArray]",ei="[object Uint16Array]",He="[object Uint32Array]",Fa=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Go=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,ir=RegExp(Go.source),sl=RegExp(vn.source),qi=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,no=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,I=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,Ie=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",oi="\\u20d0-\\u20ff",Hn=Ot+wt+oi,rr="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Ba="\\xac\\xb1\\xd7\\xf7",ol="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ag="\\u2000-\\u206f",hL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Up="A-Z\\xc0-\\xd6\\xd8-\\xde",jp="\\ufe0e\\ufe0f",Kp=Ba+ol+Ag+hL,sd="[']",fL="["+Ft+"]",qp="["+Kp+"]",Al="["+Hn+"]",Gp="\\d+",gL="["+rr+"]",Yp="["+$i+"]",Zp="[^"+Ft+Kp+Gp+rr+$i+Up+"]",od="\\ud83c[\\udffb-\\udfff]",pL="(?:"+Al+"|"+od+")",Xp="[^"+Ft+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",ld="[\\ud800-\\udbff][\\udc00-\\udfff]",ho="["+Up+"]",Qp="\\u200d",Jp="(?:"+Yp+"|"+Zp+")",mL="(?:"+ho+"|"+Zp+")",em="(?:"+sd+"(?:d|ll|m|re|s|t|ve))?",tm="(?:"+sd+"(?:D|LL|M|RE|S|T|VE))?",nm=pL+"?",im="["+jp+"]?",_L="(?:"+Qp+"(?:"+[Xp,ad,ld].join("|")+")"+im+nm+")*",vL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rm=im+nm+_L,CL="(?:"+[gL,ad,ld].join("|")+")"+rm,wL="(?:"+[Xp+Al+"?",Al,ad,ld,fL].join("|")+")",yL=RegExp(sd,"g"),SL=RegExp(Al,"g"),ud=RegExp(od+"(?="+od+")|"+wL+rm,"g"),LL=RegExp([ho+"?"+Yp+"+"+em+"(?="+[qp,ho,"$"].join("|")+")",mL+"+"+tm+"(?="+[qp,ho+Jp,"$"].join("|")+")",ho+"?"+Jp+"+"+em,ho+"+"+tm,bL,vL,Gp,CL].join("|"),"g"),EL=RegExp("["+Qp+Ft+Hn+jp+"]"),xL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,DL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],IL=-1,jt={};jt[wi]=jt[Vt]=jt[Tt]=jt[qt]=jt[Gt]=jt[Bt]=jt[fr]=jt[ei]=jt[He]=!0,jt[De]=jt[Ve]=jt[at]=jt[At]=jt[bt]=jt[Me]=jt[Ct]=jt[Xe]=jt[Kt]=jt[dn]=jt[Wn]=jt[jn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[De]=$t[Ve]=$t[at]=$t[bt]=$t[At]=$t[Me]=$t[wi]=$t[Vt]=$t[Tt]=$t[qt]=$t[Gt]=$t[Kt]=$t[dn]=$t[Wn]=$t[jn]=$t[Pt]=$t[pn]=$t[Ci]=$t[Bt]=$t[fr]=$t[ei]=$t[He]=!0,$t[Ct]=$t[Xe]=$t[Fe]=!1;var TL={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},kL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},NL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},AL={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},OL=parseFloat,ML=parseInt,sm=typeof ta=="object"&&ta&&ta.Object===Object&&ta,RL=typeof self=="object"&&self&&self.Object===Object&&self,xn=sm||RL||Function("return this")(),cd=e&&!e.nodeType&&e,Ts=cd&&!0&&i&&!i.nodeType&&i,om=Ts&&Ts.exports===cd,dd=om&&sm.process,Ai=function(){try{var G=Ts&&Ts.require&&Ts.require("util").types;return G||dd&&dd.binding&&dd.binding("util")}catch{}}(),am=Ai&&Ai.isArrayBuffer,lm=Ai&&Ai.isDate,um=Ai&&Ai.isMap,cm=Ai&&Ai.isRegExp,dm=Ai&&Ai.isSet,hm=Ai&&Ai.isTypedArray;function yi(G,se,ee){switch(ee.length){case 0:return G.call(se);case 1:return G.call(se,ee[0]);case 2:return G.call(se,ee[0],ee[1]);case 3:return G.call(se,ee[0],ee[1],ee[2])}return G.apply(se,ee)}function PL(G,se,ee,xe){for(var Qe=-1,St=G==null?0:G.length;++Qe<St;){var bn=G[Qe];se(xe,bn,ee(bn),G)}return xe}function Oi(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe&&se(G[ee],ee,G)!==!1;);return G}function FL(G,se){for(var ee=G==null?0:G.length;ee--&&se(G[ee],ee,G)!==!1;);return G}function fm(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe;)if(!se(G[ee],ee,G))return!1;return!0}function Jr(G,se){for(var ee=-1,xe=G==null?0:G.length,Qe=0,St=[];++ee<xe;){var bn=G[ee];se(bn,ee,G)&&(St[Qe++]=bn)}return St}function Ol(G,se){var ee=G==null?0:G.length;return!!ee&&fo(G,se,0)>-1}function hd(G,se,ee){for(var xe=-1,Qe=G==null?0:G.length;++xe<Qe;)if(ee(se,G[xe]))return!0;return!1}function Jt(G,se){for(var ee=-1,xe=G==null?0:G.length,Qe=Array(xe);++ee<xe;)Qe[ee]=se(G[ee],ee,G);return Qe}function es(G,se){for(var ee=-1,xe=se.length,Qe=G.length;++ee<xe;)G[Qe+ee]=se[ee];return G}function fd(G,se,ee,xe){var Qe=-1,St=G==null?0:G.length;for(xe&&St&&(ee=G[++Qe]);++Qe<St;)ee=se(ee,G[Qe],Qe,G);return ee}function BL(G,se,ee,xe){var Qe=G==null?0:G.length;for(xe&&Qe&&(ee=G[--Qe]);Qe--;)ee=se(ee,G[Qe],Qe,G);return ee}function gd(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe;)if(se(G[ee],ee,G))return!0;return!1}var WL=pd("length");function VL(G){return G.split("")}function HL(G){return G.match(dt)||[]}function gm(G,se,ee){var xe;return ee(G,function(Qe,St,bn){if(se(Qe,St,bn))return xe=St,!1}),xe}function Ml(G,se,ee,xe){for(var Qe=G.length,St=ee+(xe?1:-1);xe?St--:++St<Qe;)if(se(G[St],St,G))return St;return-1}function fo(G,se,ee){return se===se?JL(G,se,ee):Ml(G,pm,ee)}function $L(G,se,ee,xe){for(var Qe=ee-1,St=G.length;++Qe<St;)if(xe(G[Qe],se))return Qe;return-1}function pm(G){return G!==G}function mm(G,se){var ee=G==null?0:G.length;return ee?_d(G,se)/ee:k}function pd(G){return function(se){return se==null?t:se[G]}}function md(G){return function(se){return G==null?t:G[se]}}function _m(G,se,ee,xe,Qe){return Qe(G,function(St,bn,Wt){ee=xe?(xe=!1,St):se(ee,St,bn,Wt)}),ee}function zL(G,se){var ee=G.length;for(G.sort(se);ee--;)G[ee]=G[ee].value;return G}function _d(G,se){for(var ee,xe=-1,Qe=G.length;++xe<Qe;){var St=se(G[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function vd(G,se){for(var ee=-1,xe=Array(G);++ee<G;)xe[ee]=se(ee);return xe}function UL(G,se){return Jt(se,function(ee){return[ee,G[ee]]})}function vm(G){return G&&G.slice(0,ym(G)+1).replace(pe,"")}function Si(G){return function(se){return G(se)}}function bd(G,se){return Jt(se,function(ee){return G[ee]})}function ua(G,se){return G.has(se)}function bm(G,se){for(var ee=-1,xe=G.length;++ee<xe&&fo(se,G[ee],0)>-1;);return ee}function Cm(G,se){for(var ee=G.length;ee--&&fo(se,G[ee],0)>-1;);return ee}function jL(G,se){for(var ee=G.length,xe=0;ee--;)G[ee]===se&&++xe;return xe}var KL=md(TL),qL=md(kL);function GL(G){return"\\"+AL[G]}function YL(G,se){return G==null?t:G[se]}function go(G){return EL.test(G)}function ZL(G){return xL.test(G)}function XL(G){for(var se,ee=[];!(se=G.next()).done;)ee.push(se.value);return ee}function Cd(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe,Qe){ee[++se]=[Qe,xe]}),ee}function wm(G,se){return function(ee){return G(se(ee))}}function ts(G,se){for(var ee=-1,xe=G.length,Qe=0,St=[];++ee<xe;){var bn=G[ee];(bn===se||bn===h)&&(G[ee]=h,St[Qe++]=ee)}return St}function Rl(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe){ee[++se]=xe}),ee}function QL(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe){ee[++se]=[xe,xe]}),ee}function JL(G,se,ee){for(var xe=ee-1,Qe=G.length;++xe<Qe;)if(G[xe]===se)return xe;return-1}function eE(G,se,ee){for(var xe=ee+1;xe--;)if(G[xe]===se)return xe;return xe}function po(G){return go(G)?nE(G):WL(G)}function Yi(G){return go(G)?iE(G):VL(G)}function ym(G){for(var se=G.length;se--&&J.test(G.charAt(se)););return se}var tE=md(NL);function nE(G){for(var se=ud.lastIndex=0;ud.test(G);)++se;return se}function iE(G){return G.match(ud)||[]}function rE(G){return G.match(LL)||[]}var sE=function G(se){se=se==null?xn:mo.defaults(xn.Object(),se,mo.pick(xn,DL));var ee=se.Array,xe=se.Date,Qe=se.Error,St=se.Function,bn=se.Math,Wt=se.Object,wd=se.RegExp,oE=se.String,Mi=se.TypeError,Pl=ee.prototype,aE=St.prototype,_o=Wt.prototype,Fl=se["__core-js_shared__"],Bl=aE.toString,Nt=_o.hasOwnProperty,lE=0,Sm=function(){var l=/[^.]+$/.exec(Fl&&Fl.keys&&Fl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Wl=_o.toString,uE=Bl.call(Wt),cE=xn._,dE=wd("^"+Bl.call(Nt).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=om?se.Buffer:t,ns=se.Symbol,Hl=se.Uint8Array,Lm=Vl?Vl.allocUnsafe:t,$l=wm(Wt.getPrototypeOf,Wt),Em=Wt.create,xm=_o.propertyIsEnumerable,zl=Pl.splice,Dm=ns?ns.isConcatSpreadable:t,ca=ns?ns.iterator:t,ks=ns?ns.toStringTag:t,Ul=function(){try{var l=Rs(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),hE=se.clearTimeout!==xn.clearTimeout&&se.clearTimeout,fE=xe&&xe.now!==xn.Date.now&&xe.now,gE=se.setTimeout!==xn.setTimeout&&se.setTimeout,jl=bn.ceil,Kl=bn.floor,yd=Wt.getOwnPropertySymbols,pE=Vl?Vl.isBuffer:t,Im=se.isFinite,mE=Pl.join,_E=wm(Wt.keys,Wt),Cn=bn.max,An=bn.min,vE=xe.now,bE=se.parseInt,Tm=bn.random,CE=Pl.reverse,Sd=Rs(se,"DataView"),da=Rs(se,"Map"),Ld=Rs(se,"Promise"),vo=Rs(se,"Set"),ha=Rs(se,"WeakMap"),fa=Rs(Wt,"create"),ql=ha&&new ha,bo={},wE=Ps(Sd),yE=Ps(da),SE=Ps(Ld),LE=Ps(vo),EE=Ps(ha),Gl=ns?ns.prototype:t,ga=Gl?Gl.valueOf:t,km=Gl?Gl.toString:t;function x(l){if(on(l)&&!tt(l)&&!(l instanceof mt)){if(l instanceof Ri)return l;if(Nt.call(l,"__wrapped__"))return N_(l)}return new Ri(l)}var Co=function(){function l(){}return function(c){if(!tn(c))return{};if(Em)return Em(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Yl(){}function Ri(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qi,evaluate:Ye,interpolate:no,variable:"",imports:{_:x}},x.prototype=Yl.prototype,x.prototype.constructor=x,Ri.prototype=Co(Yl.prototype),Ri.prototype.constructor=Ri;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function xE(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function DE(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function IE(){var l=this.__wrapped__.value(),c=this.__dir__,g=tt(l),_=c<0,w=g?l.length:0,D=Vx(0,w,this.__views__),P=D.start,H=D.end,Z=H-P,ue=_?H:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=An(Z,this.__takeCount__);if(!g||!_&&w==Z&&Ne==Z)return e_(l,this.__actions__);var ze=[];e:for(;Z--&&Se<Ne;){ue+=c;for(var lt=-1,Ue=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Zn=vt(Ue);if(xi==W)Ue=Zn;else if(!Zn){if(xi==B)continue e;break e}}ze[Se++]=Ue}return ze}mt.prototype=Co(Yl.prototype),mt.prototype.constructor=mt;function Ns(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function TE(){this.__data__=fa?fa(null):{},this.size=0}function kE(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function NE(l){var c=this.__data__;if(fa){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function AE(l){var c=this.__data__;return fa?c[l]!==t:Nt.call(c,l)}function OE(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=fa&&c===t?u:c,this}Ns.prototype.clear=TE,Ns.prototype.delete=kE,Ns.prototype.get=NE,Ns.prototype.has=AE,Ns.prototype.set=OE;function kr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function ME(){this.__data__=[],this.size=0}function RE(l){var c=this.__data__,g=Zl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():zl.call(c,g,1),--this.size,!0}function PE(l){var c=this.__data__,g=Zl(c,l);return g<0?t:c[g][1]}function FE(l){return Zl(this.__data__,l)>-1}function BE(l,c){var g=this.__data__,_=Zl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}kr.prototype.clear=ME,kr.prototype.delete=RE,kr.prototype.get=PE,kr.prototype.has=FE,kr.prototype.set=BE;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function WE(){this.size=0,this.__data__={hash:new Ns,map:new(da||kr),string:new Ns}}function VE(l){var c=lu(this,l).delete(l);return this.size-=c?1:0,c}function HE(l){return lu(this,l).get(l)}function $E(l){return lu(this,l).has(l)}function zE(l,c){var g=lu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=WE,Nr.prototype.delete=VE,Nr.prototype.get=HE,Nr.prototype.has=$E,Nr.prototype.set=zE;function As(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function UE(l){return this.__data__.set(l,u),this}function jE(l){return this.__data__.has(l)}As.prototype.add=As.prototype.push=UE,As.prototype.has=jE;function Zi(l){var c=this.__data__=new kr(l);this.size=c.size}function KE(){this.__data__=new kr,this.size=0}function qE(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function GE(l){return this.__data__.get(l)}function YE(l){return this.__data__.has(l)}function ZE(l,c){var g=this.__data__;if(g instanceof kr){var _=g.__data__;if(!da||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Zi.prototype.clear=KE,Zi.prototype.delete=qE,Zi.prototype.get=GE,Zi.prototype.has=YE,Zi.prototype.set=ZE;function Nm(l,c){var g=tt(l),_=!g&&Fs(l),w=!g&&!_&&as(l),D=!g&&!_&&!w&&Lo(l),P=g||_||w||D,H=P?vd(l.length,oE):[],Z=H.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||w&&(ue=="offset"||ue=="parent")||D&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Rr(ue,Z)))&&H.push(ue);return H}function Am(l){var c=l.length;return c?l[Rd(0,c-1)]:t}function XE(l,c){return uu(ai(l),Os(c,0,l.length))}function QE(l){return uu(ai(l))}function Ed(l,c,g){(g!==t&&!Xi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function pa(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Xi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Zl(l,c){for(var g=l.length;g--;)if(Xi(l[g][0],c))return g;return-1}function JE(l,c,g,_){return is(l,function(w,D,P){c(_,w,g(w),P)}),_}function Om(l,c){return l&&_r(c,Ln(c),l)}function ex(l,c){return l&&_r(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&Ul?Ul(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function xd(l,c){for(var g=-1,_=c.length,w=ee(_),D=l==null;++g<_;)w[g]=D?t:oh(l,c[g]);return w}function Os(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,w,D){var P,H=c&f,Z=c&p,ue=c&m;if(g&&(P=w?g(l,_,w,D):g(l)),P!==t)return P;if(!tn(l))return l;var ce=tt(l);if(ce){if(P=$x(l),!H)return ai(l,P)}else{var ge=On(l),Se=ge==Xe||ge==sn;if(as(l))return i_(l,H);if(ge==Wn||ge==De||Se&&!w){if(P=Z||Se?{}:y_(l),!H)return Z?Nx(l,ex(P,l)):kx(l,Om(P,l))}else{if(!$t[ge])return w?l:{};P=zx(l,ge,H)}}D||(D=new Zi);var Ne=D.get(l);if(Ne)return Ne;D.set(l,P),X_(l)?l.forEach(function(Ue){P.add(Pi(Ue,c,g,Ue,l,D))}):Y_(l)&&l.forEach(function(Ue,ht){P.set(ht,Pi(Ue,c,g,ht,l,D))});var ze=ue?Z?Kd:jd:Z?ui:Ln,lt=ce?t:ze(l);return Oi(lt||l,function(Ue,ht){lt&&(ht=Ue,Ue=l[ht]),pa(P,ht,Pi(Ue,c,g,ht,l,D))}),P}function tx(l){var c=Ln(l);return function(g){return Mm(g,l,c)}}function Mm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var w=g[_],D=c[w],P=l[w];if(P===t&&!(w in l)||!D(P))return!1}return!0}function Rm(l,c,g){if(typeof l!="function")throw new Mi(o);return ya(function(){l.apply(t,g)},c)}function ma(l,c,g,_){var w=-1,D=Ol,P=!0,H=l.length,Z=[],ue=c.length;if(!H)return Z;g&&(c=Jt(c,Si(g))),_?(D=hd,P=!1):c.length>=r&&(D=ua,P=!1,c=new As(c));e:for(;++w<H;){var ce=l[w],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;Z.push(ce)}else D(c,ge,_)||Z.push(ce)}return Z}var is=l_(mr),Pm=l_(Id,!0);function nx(l,c){var g=!0;return is(l,function(_,w,D){return g=!!c(_,w,D),g}),g}function Xl(l,c,g){for(var _=-1,w=l.length;++_<w;){var D=l[_],P=c(D);if(P!=null&&(H===t?P===P&&!Ei(P):g(P,H)))var H=P,Z=D}return Z}function ix(l,c,g,_){var w=l.length;for(g=st(g),g<0&&(g=-g>w?0:w+g),_=_===t||_>w?w:st(_),_<0&&(_+=w),_=g>_?0:J_(_);g<_;)l[g++]=c;return l}function Fm(l,c){var g=[];return is(l,function(_,w,D){c(_,w,D)&&g.push(_)}),g}function Dn(l,c,g,_,w){var D=-1,P=l.length;for(g||(g=jx),w||(w=[]);++D<P;){var H=l[D];c>0&&g(H)?c>1?Dn(H,c-1,g,_,w):es(w,H):_||(w[w.length]=H)}return w}var Dd=u_(),Bm=u_(!0);function mr(l,c){return l&&Dd(l,c,Ln)}function Id(l,c){return l&&Bm(l,c,Ln)}function Ql(l,c){return Jr(c,function(g){return Pr(l[g])})}function Ms(l,c){c=ss(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[vr(c[g++])];return g&&g==_?l:t}function Wm(l,c,g){var _=c(l);return tt(l)?_:es(_,g(l))}function Gn(l){return l==null?l===t?Te:Sn:ks&&ks in Wt(l)?Wx(l):Qx(l)}function Td(l,c){return l>c}function rx(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ox(l,c,g){return l>=An(c,g)&&l<Cn(c,g)}function kd(l,c,g){for(var _=g?hd:Ol,w=l[0].length,D=l.length,P=D,H=ee(D),Z=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),Z=An(ce.length,Z),H[P]=!g&&(c||w>=120&&ce.length>=120)?new As(P&&ce):t}ce=l[0];var ge=-1,Se=H[0];e:for(;++ge<w&&ue.length<Z;){var Ne=ce[ge],ze=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ua(Se,ze):_(ue,ze,g))){for(P=D;--P;){var lt=H[P];if(!(lt?ua(lt,ze):_(l[P],ze,g)))continue e}Se&&Se.push(ze),ue.push(Ne)}}return ue}function ax(l,c,g,_){return mr(l,function(w,D,P){c(_,g(w),D,P)}),_}function _a(l,c,g){c=ss(c,l),l=x_(l,c);var _=l==null?l:l[vr(Bi(c))];return _==null?t:yi(_,l,g)}function Vm(l){return on(l)&&Gn(l)==De}function lx(l){return on(l)&&Gn(l)==at}function ux(l){return on(l)&&Gn(l)==Me}function va(l,c,g,_,w){return l===c?!0:l==null||c==null||!on(l)&&!on(c)?l!==l&&c!==c:cx(l,c,g,_,va,w)}function cx(l,c,g,_,w,D){var P=tt(l),H=tt(c),Z=P?Ve:On(l),ue=H?Ve:On(c);Z=Z==De?Wn:Z,ue=ue==De?Wn:ue;var ce=Z==Wn,ge=ue==Wn,Se=Z==ue;if(Se&&as(l)){if(!as(c))return!1;P=!0,ce=!1}if(Se&&!ce)return D||(D=new Zi),P||Lo(l)?b_(l,c,g,_,w,D):Fx(l,c,Z,g,_,w,D);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),ze=ge&&Nt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?l.value():l,Ue=ze?c.value():c;return D||(D=new Zi),w(lt,Ue,g,_,D)}}return Se?(D||(D=new Zi),Bx(l,c,g,_,w,D)):!1}function dx(l){return on(l)&&On(l)==Kt}function Nd(l,c,g,_){var w=g.length,D=w,P=!_;if(l==null)return!D;for(l=Wt(l);w--;){var H=g[w];if(P&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++w<D;){H=g[w];var Z=H[0],ue=l[Z],ce=H[1];if(P&&H[2]){if(ue===t&&!(Z in l))return!1}else{var ge=new Zi;if(_)var Se=_(ue,ce,Z,l,c,ge);if(!(Se===t?va(ce,ue,v|b,_,ge):Se))return!1}}return!0}function Hm(l){if(!tn(l)||qx(l))return!1;var c=Pr(l)?dE:le;return c.test(Ps(l))}function hx(l){return on(l)&&Gn(l)==jn}function fx(l){return on(l)&&On(l)==Pt}function gx(l){return on(l)&&pu(l.length)&&!!jt[Gn(l)]}function $m(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?tt(l)?jm(l[0],l[1]):Um(l):cv(l)}function Ad(l){if(!wa(l))return _E(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function px(l){if(!tn(l))return Xx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Od(l,c){return l<c}function zm(l,c){var g=-1,_=li(l)?ee(l.length):[];return is(l,function(w,D,P){_[++g]=c(w,D,P)}),_}function Um(l){var c=Gd(l);return c.length==1&&c[0][2]?L_(c[0][0],c[0][1]):function(g){return g===l||Nd(g,l,c)}}function jm(l,c){return Zd(l)&&S_(c)?L_(vr(l),c):function(g){var _=oh(g,l);return _===t&&_===c?ah(g,l):va(c,_,v|b)}}function Jl(l,c,g,_,w){l!==c&&Dd(c,function(D,P){if(w||(w=new Zi),tn(D))mx(l,c,P,g,Jl,_,w);else{var H=_?_(Qd(l,P),D,P+"",l,c,w):t;H===t&&(H=D),Ed(l,P,H)}},ui)}function mx(l,c,g,_,w,D,P){var H=Qd(l,g),Z=Qd(c,g),ue=P.get(Z);if(ue){Ed(l,g,ue);return}var ce=D?D(H,Z,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=tt(Z),Ne=!Se&&as(Z),ze=!Se&&!Ne&&Lo(Z);ce=Z,Se||Ne||ze?tt(H)?ce=H:hn(H)?ce=ai(H):Ne?(ge=!1,ce=i_(Z,!0)):ze?(ge=!1,ce=r_(Z,!0)):ce=[]:Sa(Z)||Fs(Z)?(ce=H,Fs(H)?ce=ev(H):(!tn(H)||Pr(H))&&(ce=y_(Z))):ge=!1}ge&&(P.set(Z,ce),w(ce,Z,_,D,P),P.delete(Z)),Ed(l,g,ce)}function Km(l,c){var g=l.length;if(g)return c+=c<0?g:0,Rr(c,g)?l[c]:t}function qm(l,c,g){c.length?c=Jt(c,function(D){return tt(D)?function(P){return Ms(P,D.length===1?D[0]:D)}:D}):c=[ci];var _=-1;c=Jt(c,Si(We()));var w=zm(l,function(D,P,H){var Z=Jt(c,function(ue){return ue(D)});return{criteria:Z,index:++_,value:D}});return zL(w,function(D,P){return Tx(D,P,g)})}function _x(l,c){return Gm(l,c,function(g,_){return ah(l,_)})}function Gm(l,c,g){for(var _=-1,w=c.length,D={};++_<w;){var P=c[_],H=Ms(l,P);g(H,P)&&ba(D,ss(P,l),H)}return D}function vx(l){return function(c){return Ms(c,l)}}function Md(l,c,g,_){var w=_?$L:fo,D=-1,P=c.length,H=l;for(l===c&&(c=ai(c)),g&&(H=Jt(l,Si(g)));++D<P;)for(var Z=0,ue=c[D],ce=g?g(ue):ue;(Z=w(H,ce,Z,_))>-1;)H!==l&&zl.call(H,Z,1),zl.call(l,Z,1);return l}function Ym(l,c){for(var g=l?c.length:0,_=g-1;g--;){var w=c[g];if(g==_||w!==D){var D=w;Rr(w)?zl.call(l,w,1):Bd(l,w)}}return l}function Rd(l,c){return l+Kl(Tm()*(c-l+1))}function bx(l,c,g,_){for(var w=-1,D=Cn(jl((c-l)/(g||1)),0),P=ee(D);D--;)P[_?D:++w]=l,l+=g;return P}function Pd(l,c){var g="";if(!l||c<1||c>q)return g;do c%2&&(g+=l),c=Kl(c/2),c&&(l+=l);while(c);return g}function ct(l,c){return Jd(E_(l,c,ci),l+"")}function Cx(l){return Am(Eo(l))}function wx(l,c){var g=Eo(l);return uu(g,Os(c,0,g.length))}function ba(l,c,g,_){if(!tn(l))return l;c=ss(c,l);for(var w=-1,D=c.length,P=D-1,H=l;H!=null&&++w<D;){var Z=vr(c[w]),ue=g;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return l;if(w!=P){var ce=H[Z];ue=_?_(ce,Z,H):t,ue===t&&(ue=tn(ce)?ce:Rr(c[w+1])?[]:{})}pa(H,Z,ue),H=H[Z]}return l}var Zm=ql?function(l,c){return ql.set(l,c),l}:ci,yx=Ul?function(l,c){return Ul(l,"toString",{configurable:!0,enumerable:!1,value:uh(c),writable:!0})}:ci;function Sx(l){return uu(Eo(l))}function Fi(l,c,g){var _=-1,w=l.length;c<0&&(c=-c>w?0:w+c),g=g>w?w:g,g<0&&(g+=w),w=c>g?0:g-c>>>0,c>>>=0;for(var D=ee(w);++_<w;)D[_]=l[_+c];return D}function Lx(l,c){var g;return is(l,function(_,w,D){return g=c(_,w,D),!g}),!!g}function eu(l,c,g){var _=0,w=l==null?_:l.length;if(typeof c=="number"&&c===c&&w<=ne){for(;_<w;){var D=_+w>>>1,P=l[D];P!==null&&!Ei(P)&&(g?P<=c:P<c)?_=D+1:w=D}return w}return Fd(l,c,ci,g)}function Fd(l,c,g,_){var w=0,D=l==null?0:l.length;if(D===0)return 0;c=g(c);for(var P=c!==c,H=c===null,Z=Ei(c),ue=c===t;w<D;){var ce=Kl((w+D)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,ze=ge===ge,lt=Ei(ge);if(P)var Ue=_||ze;else ue?Ue=ze&&(_||Se):H?Ue=ze&&Se&&(_||!Ne):Z?Ue=ze&&Se&&!Ne&&(_||!lt):Ne||lt?Ue=!1:Ue=_?ge<=c:ge<c;Ue?w=ce+1:D=ce}return An(D,fe)}function Xm(l,c){for(var g=-1,_=l.length,w=0,D=[];++g<_;){var P=l[g],H=c?c(P):P;if(!g||!Xi(H,Z)){var Z=H;D[w++]=P===0?0:P}}return D}function Qm(l){return typeof l=="number"?l:Ei(l)?k:+l}function Li(l){if(typeof l=="string")return l;if(tt(l))return Jt(l,Li)+"";if(Ei(l))return km?km.call(l):"";var c=l+"";return c=="0"&&1/l==-U?"-0":c}function rs(l,c,g){var _=-1,w=Ol,D=l.length,P=!0,H=[],Z=H;if(g)P=!1,w=hd;else if(D>=r){var ue=c?null:Rx(l);if(ue)return Rl(ue);P=!1,w=ua,Z=new As}else Z=c?[]:H;e:for(;++_<D;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=Z.length;Se--;)if(Z[Se]===ge)continue e;c&&Z.push(ge),H.push(ce)}else w(Z,ge,g)||(Z!==H&&Z.push(ge),H.push(ce))}return H}function Bd(l,c){return c=ss(c,l),l=x_(l,c),l==null||delete l[vr(Bi(c))]}function Jm(l,c,g,_){return ba(l,c,g(Ms(l,c)),_)}function tu(l,c,g,_){for(var w=l.length,D=_?w:-1;(_?D--:++D<w)&&c(l[D],D,l););return g?Fi(l,_?0:D,_?D+1:w):Fi(l,_?D+1:0,_?w:D)}function e_(l,c){var g=l;return g instanceof mt&&(g=g.value()),fd(c,function(_,w){return w.func.apply(w.thisArg,es([_],w.args))},g)}function Wd(l,c,g){var _=l.length;if(_<2)return _?rs(l[0]):[];for(var w=-1,D=ee(_);++w<_;)for(var P=l[w],H=-1;++H<_;)H!=w&&(D[w]=ma(D[w]||P,l[H],c,g));return rs(Dn(D,1),c,g)}function t_(l,c,g){for(var _=-1,w=l.length,D=c.length,P={};++_<w;){var H=_<D?c[_]:t;g(P,l[_],H)}return P}function Vd(l){return hn(l)?l:[]}function Hd(l){return typeof l=="function"?l:ci}function ss(l,c){return tt(l)?l:Zd(l,c)?[l]:k_(xt(l))}var Ex=ct;function os(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var n_=hE||function(l){return xn.clearTimeout(l)};function i_(l,c){if(c)return l.slice();var g=l.length,_=Lm?Lm(g):new l.constructor(g);return l.copy(_),_}function $d(l){var c=new l.constructor(l.byteLength);return new Hl(c).set(new Hl(l)),c}function xx(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Dx(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function Ix(l){return ga?Wt(ga.call(l)):{}}function r_(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function s_(l,c){if(l!==c){var g=l!==t,_=l===null,w=l===l,D=Ei(l),P=c!==t,H=c===null,Z=c===c,ue=Ei(c);if(!H&&!ue&&!D&&l>c||D&&P&&Z&&!H&&!ue||_&&P&&Z||!g&&Z||!w)return 1;if(!_&&!D&&!ue&&l<c||ue&&g&&w&&!_&&!D||H&&g&&w||!P&&w||!Z)return-1}return 0}function Tx(l,c,g){for(var _=-1,w=l.criteria,D=c.criteria,P=w.length,H=g.length;++_<P;){var Z=s_(w[_],D[_]);if(Z){if(_>=H)return Z;var ue=g[_];return Z*(ue=="desc"?-1:1)}}return l.index-c.index}function o_(l,c,g,_){for(var w=-1,D=l.length,P=g.length,H=-1,Z=c.length,ue=Cn(D-P,0),ce=ee(Z+ue),ge=!_;++H<Z;)ce[H]=c[H];for(;++w<P;)(ge||w<D)&&(ce[g[w]]=l[w]);for(;ue--;)ce[H++]=l[w++];return ce}function a_(l,c,g,_){for(var w=-1,D=l.length,P=-1,H=g.length,Z=-1,ue=c.length,ce=Cn(D-H,0),ge=ee(ce+ue),Se=!_;++w<ce;)ge[w]=l[w];for(var Ne=w;++Z<ue;)ge[Ne+Z]=c[Z];for(;++P<H;)(Se||w<D)&&(ge[Ne+g[P]]=l[w++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function _r(l,c,g,_){var w=!g;g||(g={});for(var D=-1,P=c.length;++D<P;){var H=c[D],Z=_?_(g[H],l[H],H,g,l):t;Z===t&&(Z=l[H]),w?Ar(g,H,Z):pa(g,H,Z)}return g}function kx(l,c){return _r(l,Yd(l),c)}function Nx(l,c){return _r(l,C_(l),c)}function nu(l,c){return function(g,_){var w=tt(g)?PL:JE,D=c?c():{};return w(g,l,We(_,2),D)}}function wo(l){return ct(function(c,g){var _=-1,w=g.length,D=w>1?g[w-1]:t,P=w>2?g[2]:t;for(D=l.length>3&&typeof D=="function"?(w--,D):t,P&&Yn(g[0],g[1],P)&&(D=w<3?t:D,w=1),c=Wt(c);++_<w;){var H=g[_];H&&l(c,H,_,D)}return c})}function l_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var w=g.length,D=c?w:-1,P=Wt(g);(c?D--:++D<w)&&_(P[D],D,P)!==!1;);return g}}function u_(l){return function(c,g,_){for(var w=-1,D=Wt(c),P=_(c),H=P.length;H--;){var Z=P[l?H:++w];if(g(D[Z],Z,D)===!1)break}return c}}function Ax(l,c,g){var _=c&L,w=Ca(l);function D(){var P=this&&this!==xn&&this instanceof D?w:l;return P.apply(_?g:this,arguments)}return D}function c_(l){return function(c){c=xt(c);var g=go(c)?Yi(c):t,_=g?g[0]:c.charAt(0),w=g?os(g,1).join(""):c.slice(1);return _[l]()+w}}function yo(l){return function(c){return fd(lv(av(c).replace(yL,"")),l,"")}}function Ca(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Co(l.prototype),_=l.apply(g,c);return tn(_)?_:g}}function Ox(l,c,g){var _=Ca(l);function w(){for(var D=arguments.length,P=ee(D),H=D,Z=So(w);H--;)P[H]=arguments[H];var ue=D<3&&P[0]!==Z&&P[D-1]!==Z?[]:ts(P,Z);if(D-=ue.length,D<g)return p_(l,c,iu,w.placeholder,t,P,ue,t,t,g-D);var ce=this&&this!==xn&&this instanceof w?_:l;return yi(ce,this,P)}return w}function d_(l){return function(c,g,_){var w=Wt(c);if(!li(c)){var D=We(g,3);c=Ln(c),g=function(H){return D(w[H],H,w)}}var P=l(c,g,_);return P>-1?w[D?c[P]:P]:t}}function h_(l){return Mr(function(c){var g=c.length,_=g,w=Ri.prototype.thru;for(l&&c.reverse();_--;){var D=c[_];if(typeof D!="function")throw new Mi(o);if(w&&!P&&au(D)=="wrapper")var P=new Ri([],!0)}for(_=P?_:g;++_<g;){D=c[_];var H=au(D),Z=H=="wrapper"?qd(D):t;Z&&Xd(Z[0])&&Z[1]==(M|E|N|R)&&!Z[4].length&&Z[9]==1?P=P[au(Z[0])].apply(P,Z[3]):P=D.length==1&&Xd(D)?P[H]():P.thru(D)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&tt(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function iu(l,c,g,_,w,D,P,H,Z,ue){var ce=c&M,ge=c&L,Se=c&S,Ne=c&(E|A),ze=c&Y,lt=Se?t:Ca(l);function Ue(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Zn=So(Ue),Di=jL(vt,Zn);if(_&&(vt=o_(vt,_,w,Ne)),D&&(vt=a_(vt,D,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=ts(vt,Zn);return p_(l,c,iu,Ue.placeholder,g,vt,fn,H,Z,ue-ht)}var Qi=ge?g:this,Br=Se?Qi[l]:l;return ht=vt.length,H?vt=Jx(vt,H):ze&&ht>1&&vt.reverse(),ce&&Z<ht&&(vt.length=Z),this&&this!==xn&&this instanceof Ue&&(Br=lt||Ca(Br)),Br.apply(Qi,vt)}return Ue}function f_(l,c){return function(g,_){return ax(g,l,c(_),{})}}function ru(l,c){return function(g,_){var w;if(g===t&&_===t)return c;if(g!==t&&(w=g),_!==t){if(w===t)return _;typeof g=="string"||typeof _=="string"?(g=Li(g),_=Li(_)):(g=Qm(g),_=Qm(_)),w=l(g,_)}return w}}function zd(l){return Mr(function(c){return c=Jt(c,Si(We())),ct(function(g){var _=this;return l(c,function(w){return yi(w,_,g)})})})}function su(l,c){c=c===t?" ":Li(c);var g=c.length;if(g<2)return g?Pd(c,l):c;var _=Pd(c,jl(l/po(c)));return go(c)?os(Yi(_),0,l).join(""):_.slice(0,l)}function Mx(l,c,g,_){var w=c&L,D=Ca(l);function P(){for(var H=-1,Z=arguments.length,ue=-1,ce=_.length,ge=ee(ce+Z),Se=this&&this!==xn&&this instanceof P?D:l;++ue<ce;)ge[ue]=_[ue];for(;Z--;)ge[ue++]=arguments[++H];return yi(Se,w?g:this,ge)}return P}function g_(l){return function(c,g,_){return _&&typeof _!="number"&&Yn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),bx(c,g,_,l)}}function ou(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function p_(l,c,g,_,w,D,P,H,Z,ue){var ce=c&E,ge=ce?P:t,Se=ce?t:P,Ne=ce?D:t,ze=ce?t:D;c|=ce?N:V,c&=~(ce?V:N),c&y||(c&=~(L|S));var lt=[l,c,w,Ne,ge,ze,Se,H,Z,ue],Ue=g.apply(t,lt);return Xd(l)&&D_(Ue,lt),Ue.placeholder=_,I_(Ue,l,c)}function Ud(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:An(st(_),292),_&&Im(g)){var w=(xt(g)+"e").split("e"),D=c(w[0]+"e"+(+w[1]+_));return w=(xt(D)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return c(g)}}var Rx=vo&&1/Rl(new vo([,-0]))[1]==U?function(l){return new vo(l)}:hh;function m_(l){return function(c){var g=On(c);return g==Kt?Cd(c):g==Pt?QL(c):UL(c,l(c))}}function Or(l,c,g,_,w,D,P,H){var Z=c&S;if(!Z&&typeof l!="function")throw new Mi(o);var ue=_?_.length:0;if(ue||(c&=~(N|V),_=w=t),P=P===t?P:Cn(st(P),0),H=H===t?H:st(H),ue-=w?w.length:0,c&V){var ce=_,ge=w;_=w=t}var Se=Z?t:qd(l),Ne=[l,c,g,_,w,ce,ge,D,P,H];if(Se&&Zx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],w=Ne[4],H=Ne[9]=Ne[9]===t?Z?0:l.length:Cn(Ne[9]-ue,0),!H&&c&(E|A)&&(c&=~(E|A)),!c||c==L)var ze=Ax(l,c,g);else c==E||c==A?ze=Ox(l,c,H):(c==N||c==(L|N))&&!w.length?ze=Mx(l,c,g,_):ze=iu.apply(t,Ne);var lt=Se?Zm:D_;return I_(lt(ze,Ne),l,c)}function __(l,c,g,_){return l===t||Xi(l,_o[g])&&!Nt.call(_,g)?c:l}function v_(l,c,g,_,w,D){return tn(l)&&tn(c)&&(D.set(c,l),Jl(l,c,t,v_,D),D.delete(c)),l}function Px(l){return Sa(l)?t:l}function b_(l,c,g,_,w,D){var P=g&v,H=l.length,Z=c.length;if(H!=Z&&!(P&&Z>H))return!1;var ue=D.get(l),ce=D.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new As:t;for(D.set(l,c),D.set(c,l);++ge<H;){var ze=l[ge],lt=c[ge];if(_)var Ue=P?_(lt,ze,ge,c,l,D):_(ze,lt,ge,l,c,D);if(Ue!==t){if(Ue)continue;Se=!1;break}if(Ne){if(!gd(c,function(ht,vt){if(!ua(Ne,vt)&&(ze===ht||w(ze,ht,g,_,D)))return Ne.push(vt)})){Se=!1;break}}else if(!(ze===lt||w(ze,lt,g,_,D))){Se=!1;break}}return D.delete(l),D.delete(c),Se}function Fx(l,c,g,_,w,D,P){switch(g){case bt:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!D(new Hl(l),new Hl(c)));case At:case Me:case dn:return Xi(+l,+c);case Ct:return l.name==c.name&&l.message==c.message;case jn:case pn:return l==c+"";case Kt:var H=Cd;case Pt:var Z=_&v;if(H||(H=Rl),l.size!=c.size&&!Z)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=b_(H(l),H(c),_,w,D,P);return P.delete(l),ce;case Ci:if(ga)return ga.call(l)==ga.call(c)}return!1}function Bx(l,c,g,_,w,D){var P=g&v,H=jd(l),Z=H.length,ue=jd(c),ce=ue.length;if(Z!=ce&&!P)return!1;for(var ge=Z;ge--;){var Se=H[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=D.get(l),ze=D.get(c);if(Ne&&ze)return Ne==c&&ze==l;var lt=!0;D.set(l,c),D.set(c,l);for(var Ue=P;++ge<Z;){Se=H[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,D):_(ht,vt,Se,l,c,D);if(!(xi===t?ht===vt||w(ht,vt,g,_,D):xi)){lt=!1;break}Ue||(Ue=Se=="constructor")}if(lt&&!Ue){var Zn=l.constructor,Di=c.constructor;Zn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return D.delete(l),D.delete(c),lt}function Mr(l){return Jd(E_(l,t,M_),l+"")}function jd(l){return Wm(l,Ln,Yd)}function Kd(l){return Wm(l,ui,C_)}var qd=ql?function(l){return ql.get(l)}:hh;function au(l){for(var c=l.name+"",g=bo[c],_=Nt.call(bo,c)?g.length:0;_--;){var w=g[_],D=w.func;if(D==null||D==l)return w.name}return c}function So(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||ch;return l=l===ch?$m:l,arguments.length?l(arguments[0],arguments[1]):l}function lu(l,c){var g=l.__data__;return Kx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function Gd(l){for(var c=Ln(l),g=c.length;g--;){var _=c[g],w=l[_];c[g]=[_,w,S_(w)]}return c}function Rs(l,c){var g=YL(l,c);return Hm(g)?g:t}function Wx(l){var c=Nt.call(l,ks),g=l[ks];try{l[ks]=t;var _=!0}catch{}var w=Wl.call(l);return _&&(c?l[ks]=g:delete l[ks]),w}var Yd=yd?function(l){return l==null?[]:(l=Wt(l),Jr(yd(l),function(c){return xm.call(l,c)}))}:fh,C_=yd?function(l){for(var c=[];l;)es(c,Yd(l)),l=$l(l);return c}:fh,On=Gn;(Sd&&On(new Sd(new ArrayBuffer(1)))!=bt||da&&On(new da)!=Kt||Ld&&On(Ld.resolve())!=Jn||vo&&On(new vo)!=Pt||ha&&On(new ha)!=Fe)&&(On=function(l){var c=Gn(l),g=c==Wn?l.constructor:t,_=g?Ps(g):"";if(_)switch(_){case wE:return bt;case yE:return Kt;case SE:return Jn;case LE:return Pt;case EE:return Fe}return c});function Vx(l,c,g){for(var _=-1,w=g.length;++_<w;){var D=g[_],P=D.size;switch(D.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=An(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function Hx(l){var c=l.match($e);return c?c[1].split(Re):[]}function w_(l,c,g){c=ss(c,l);for(var _=-1,w=c.length,D=!1;++_<w;){var P=vr(c[_]);if(!(D=l!=null&&g(l,P)))break;l=l[P]}return D||++_!=w?D:(w=l==null?0:l.length,!!w&&pu(w)&&Rr(P,w)&&(tt(l)||Fs(l)))}function $x(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function y_(l){return typeof l.constructor=="function"&&!wa(l)?Co($l(l)):{}}function zx(l,c,g){var _=l.constructor;switch(c){case at:return $d(l);case At:case Me:return new _(+l);case bt:return xx(l,g);case wi:case Vt:case Tt:case qt:case Gt:case Bt:case fr:case ei:case He:return r_(l,g);case Kt:return new _;case dn:case pn:return new _(l);case jn:return Dx(l);case Pt:return new _;case Ci:return Ix(l)}}function Ux(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function jx(l){return tt(l)||Fs(l)||!!(Dm&&l&&l[Dm])}function Rr(l,c){var g=typeof l;return c=c??q,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Yn(l,c,g){if(!tn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Rr(c,g.length):_=="string"&&c in g)?Xi(g[c],l):!1}function Zd(l,c){if(tt(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Ei(l)?!0:Ee.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Kx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Xd(l){var c=au(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=qd(g);return!!_&&l===_[0]}function qx(l){return!!Sm&&Sm in l}var Gx=Fl?Pr:gh;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_o;return l===g}function S_(l){return l===l&&!tn(l)}function L_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Yx(l){var c=fu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Zx(l,c){var g=l[1],_=c[1],w=g|_,D=w<(L|S|M),P=_==M&&g==E||_==M&&g==R&&l[7].length<=c[8]||_==(M|R)&&c[7].length<=c[8]&&g==E;if(!(D||P))return l;_&L&&(l[2]=c[2],w|=g&L?0:y);var H=c[3];if(H){var Z=l[3];l[3]=Z?o_(Z,H,c[4]):H,l[4]=Z?ts(l[3],h):c[4]}return H=c[5],H&&(Z=l[5],l[5]=Z?a_(Z,H,c[6]):H,l[6]=Z?ts(l[5],h):c[6]),H=c[7],H&&(l[7]=H),_&M&&(l[8]=l[8]==null?c[8]:An(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Xx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Qx(l){return Wl.call(l)}function E_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,w=-1,D=Cn(_.length-c,0),P=ee(D);++w<D;)P[w]=_[c+w];w=-1;for(var H=ee(c+1);++w<c;)H[w]=_[w];return H[c]=g(P),yi(l,this,H)}}function x_(l,c){return c.length<2?l:Ms(l,Fi(c,0,-1))}function Jx(l,c){for(var g=l.length,_=An(c.length,g),w=ai(l);_--;){var D=c[_];l[_]=Rr(D,g)?w[D]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var D_=T_(Zm),ya=gE||function(l,c){return xn.setTimeout(l,c)},Jd=T_(yx);function I_(l,c,g){var _=c+"";return Jd(l,Ux(_,eD(Hx(_),g)))}function T_(l){var c=0,g=0;return function(){var _=vE(),w=O-(_-g);if(g=_,w>0){if(++c>=T)return arguments[0]}else c=0;return l.apply(t,arguments)}}function uu(l,c){var g=-1,_=l.length,w=_-1;for(c=c===t?_:c;++g<c;){var D=Rd(g,w),P=l[D];l[D]=l[g],l[g]=P}return l.length=c,l}var k_=Yx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,w,D){c.push(w?D.replace(I,"$1"):_||g)}),c});function vr(l){if(typeof l=="string"||Ei(l))return l;var c=l+"";return c=="0"&&1/l==-U?"-0":c}function Ps(l){if(l!=null){try{return Bl.call(l)}catch{}try{return l+""}catch{}}return""}function eD(l,c){return Oi(be,function(g){var _="_."+g[0];c&g[1]&&!Ol(l,_)&&l.push(_)}),l.sort()}function N_(l){if(l instanceof mt)return l.clone();var c=new Ri(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function tD(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=Cn(st(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var w=0,D=0,P=ee(jl(_/c));w<_;)P[D++]=Fi(l,w,w+=c);return P}function nD(l){for(var c=-1,g=l==null?0:l.length,_=0,w=[];++c<g;){var D=l[c];D&&(w[_++]=D)}return w}function iD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return es(tt(g)?ai(g):[g],Dn(c,1))}var rD=ct(function(l,c){return hn(l)?ma(l,Dn(c,1,hn,!0)):[]}),sD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),We(g,2)):[]}),oD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),t,g):[]});function aD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),Fi(l,c<0?0:c,_)):[]}function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function uD(l,c){return l&&l.length?tu(l,We(c,3),!0,!0):[]}function cD(l,c){return l&&l.length?tu(l,We(c,3),!0):[]}function dD(l,c,g,_){var w=l==null?0:l.length;return w?(g&&typeof g!="number"&&Yn(l,c,g)&&(g=0,_=w),ix(l,c,g,_)):[]}function A_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:st(g);return w<0&&(w=Cn(_+w,0)),Ml(l,We(c,3),w)}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return g!==t&&(w=st(g),w=g<0?Cn(_+w,0):An(w,_-1)),Ml(l,We(c,3),w,!0)}function M_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function hD(l){var c=l==null?0:l.length;return c?Dn(l,U):[]}function fD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:st(c),Dn(l,c)):[]}function gD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var w=l[c];_[w[0]]=w[1]}return _}function R_(l){return l&&l.length?l[0]:t}function pD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:st(g);return w<0&&(w=Cn(_+w,0)),fo(l,c,w)}function mD(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var _D=ct(function(l){var c=Jt(l,Vd);return c.length&&c[0]===l[0]?kd(c):[]}),vD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?kd(g,We(c,2)):[]}),bD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?kd(g,t,c):[]});function CD(l,c){return l==null?"":mE.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function wD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_;return g!==t&&(w=st(g),w=w<0?Cn(_+w,0):An(w,_-1)),c===c?eE(l,c,w):Ml(l,pm,w,!0)}function yD(l,c){return l&&l.length?Km(l,st(c)):t}var SD=ct(P_);function P_(l,c){return l&&l.length&&c&&c.length?Md(l,c):l}function LD(l,c,g){return l&&l.length&&c&&c.length?Md(l,c,We(g,2)):l}function ED(l,c,g){return l&&l.length&&c&&c.length?Md(l,c,t,g):l}var xD=Mr(function(l,c){var g=l==null?0:l.length,_=xd(l,c);return Ym(l,Jt(c,function(w){return Rr(w,g)?+w:w}).sort(s_)),_});function DD(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,w=[],D=l.length;for(c=We(c,3);++_<D;){var P=l[_];c(P,_,l)&&(g.push(P),w.push(_))}return Ym(l,w),g}function eh(l){return l==null?l:CE.call(l)}function ID(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Yn(l,c,g)?(c=0,g=_):(c=c==null?0:st(c),g=g===t?_:st(g)),Fi(l,c,g)):[]}function TD(l,c){return eu(l,c)}function kD(l,c,g){return Fd(l,c,We(g,2))}function ND(l,c){var g=l==null?0:l.length;if(g){var _=eu(l,c);if(_<g&&Xi(l[_],c))return _}return-1}function AD(l,c){return eu(l,c,!0)}function OD(l,c,g){return Fd(l,c,We(g,2),!0)}function MD(l,c){var g=l==null?0:l.length;if(g){var _=eu(l,c,!0)-1;if(Xi(l[_],c))return _}return-1}function RD(l){return l&&l.length?Xm(l):[]}function PD(l,c){return l&&l.length?Xm(l,We(c,2)):[]}function FD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function BD(l,c,g){return l&&l.length?(c=g||c===t?1:st(c),Fi(l,0,c<0?0:c)):[]}function WD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function VD(l,c){return l&&l.length?tu(l,We(c,3),!1,!0):[]}function HD(l,c){return l&&l.length?tu(l,We(c,3)):[]}var $D=ct(function(l){return rs(Dn(l,1,hn,!0))}),zD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),rs(Dn(l,1,hn,!0),We(c,2))}),UD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,rs(Dn(l,1,hn,!0),t,c)});function jD(l){return l&&l.length?rs(l):[]}function KD(l,c){return l&&l.length?rs(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?rs(l,t,c):[]}function th(l){if(!(l&&l.length))return[];var c=0;return l=Jr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),vd(c,function(g){return Jt(l,pd(g))})}function F_(l,c){if(!(l&&l.length))return[];var g=th(l);return c==null?g:Jt(g,function(_){return yi(c,t,_)})}var GD=ct(function(l,c){return hn(l)?ma(l,c):[]}),YD=ct(function(l){return Wd(Jr(l,hn))}),ZD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),Wd(Jr(l,hn),We(c,2))}),XD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Wd(Jr(l,hn),t,c)}),QD=ct(th);function JD(l,c){return t_(l||[],c||[],pa)}function eI(l,c){return t_(l||[],c||[],ba)}var tI=ct(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,F_(l,g)});function B_(l){var c=x(l);return c.__chain__=!0,c}function nI(l,c){return c(l),l}function cu(l,c){return c(l)}var iI=Mr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,w=function(D){return xd(D,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Rr(g)?this.thru(w):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:cu,args:[w],thisArg:t}),new Ri(_,this.__chain__).thru(function(D){return c&&!D.length&&D.push(t),D}))});function rI(){return B_(this)}function sI(){return new Ri(this.value(),this.__chain__)}function oI(){this.__values__===t&&(this.__values__=Q_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function aI(){return this}function lI(l){for(var c,g=this;g instanceof Yl;){var _=N_(g);_.__index__=0,_.__values__=t,c?w.__wrapped__=_:c=_;var w=_;g=g.__wrapped__}return w.__wrapped__=l,c}function uI(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:cu,args:[eh],thisArg:t}),new Ri(c,this.__chain__)}return this.thru(eh)}function cI(){return e_(this.__wrapped__,this.__actions__)}var dI=nu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function hI(l,c,g){var _=tt(l)?fm:nx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}function fI(l,c){var g=tt(l)?Jr:Fm;return g(l,We(c,3))}var gI=d_(A_),pI=d_(O_);function mI(l,c){return Dn(du(l,c),1)}function _I(l,c){return Dn(du(l,c),U)}function vI(l,c,g){return g=g===t?1:st(g),Dn(du(l,c),g)}function W_(l,c){var g=tt(l)?Oi:is;return g(l,We(c,3))}function V_(l,c){var g=tt(l)?FL:Pm;return g(l,We(c,3))}var bI=nu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function CI(l,c,g,_){l=li(l)?l:Eo(l),g=g&&!_?st(g):0;var w=l.length;return g<0&&(g=Cn(w+g,0)),mu(l)?g<=w&&l.indexOf(c,g)>-1:!!w&&fo(l,c,g)>-1}var wI=ct(function(l,c,g){var _=-1,w=typeof c=="function",D=li(l)?ee(l.length):[];return is(l,function(P){D[++_]=w?yi(c,P,g):_a(P,c,g)}),D}),yI=nu(function(l,c,g){Ar(l,g,c)});function du(l,c){var g=tt(l)?Jt:zm;return g(l,We(c,3))}function SI(l,c,g,_){return l==null?[]:(tt(c)||(c=c==null?[]:[c]),g=_?t:g,tt(g)||(g=g==null?[]:[g]),qm(l,c,g))}var LI=nu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function EI(l,c,g){var _=tt(l)?fd:_m,w=arguments.length<3;return _(l,We(c,4),g,w,is)}function xI(l,c,g){var _=tt(l)?BL:_m,w=arguments.length<3;return _(l,We(c,4),g,w,Pm)}function DI(l,c){var g=tt(l)?Jr:Fm;return g(l,gu(We(c,3)))}function II(l){var c=tt(l)?Am:Cx;return c(l)}function TI(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=st(c);var _=tt(l)?XE:wx;return _(l,c)}function kI(l){var c=tt(l)?QE:Sx;return c(l)}function NI(l){if(l==null)return 0;if(li(l))return mu(l)?po(l):l.length;var c=On(l);return c==Kt||c==Pt?l.size:Ad(l).length}function AI(l,c,g){var _=tt(l)?gd:Lx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}var OI=ct(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Yn(l,c[0],c[1])?c=[]:g>2&&Yn(c[0],c[1],c[2])&&(c=[c[0]]),qm(l,Dn(c,1),[])}),hu=fE||function(){return xn.Date.now()};function MI(l,c){if(typeof c!="function")throw new Mi(o);return l=st(l),function(){if(--l<1)return c.apply(this,arguments)}}function H_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,M,t,t,t,t,c)}function $_(l,c){var g;if(typeof c!="function")throw new Mi(o);return l=st(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var nh=ct(function(l,c,g){var _=L;if(g.length){var w=ts(g,So(nh));_|=N}return Or(l,_,c,g,w)}),z_=ct(function(l,c,g){var _=L|S;if(g.length){var w=ts(g,So(z_));_|=N}return Or(c,_,l,g,w)});function U_(l,c,g){c=g?t:c;var _=Or(l,E,t,t,t,t,t,c);return _.placeholder=U_.placeholder,_}function j_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){var _,w,D,P,H,Z,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Mi(o);c=Wi(c)||0,tn(g)&&(ce=!!g.leading,ge="maxWait"in g,D=ge?Cn(Wi(g.maxWait)||0,c):D,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Qi=_,Br=w;return _=w=t,ue=fn,P=l.apply(Br,Qi),P}function ze(fn){return ue=fn,H=ya(ht,c),ce?Ne(fn):P}function lt(fn){var Qi=fn-Z,Br=fn-ue,dv=c-Qi;return ge?An(dv,D-Br):dv}function Ue(fn){var Qi=fn-Z,Br=fn-ue;return Z===t||Qi>=c||Qi<0||ge&&Br>=D}function ht(){var fn=hu();if(Ue(fn))return vt(fn);H=ya(ht,lt(fn))}function vt(fn){return H=t,Se&&_?Ne(fn):(_=w=t,P)}function xi(){H!==t&&n_(H),ue=0,_=Z=w=H=t}function Zn(){return H===t?P:vt(hu())}function Di(){var fn=hu(),Qi=Ue(fn);if(_=arguments,w=this,Z=fn,Qi){if(H===t)return ze(Z);if(ge)return n_(H),H=ya(ht,c),Ne(Z)}return H===t&&(H=ya(ht,c)),P}return Di.cancel=xi,Di.flush=Zn,Di}var RI=ct(function(l,c){return Rm(l,1,c)}),PI=ct(function(l,c,g){return Rm(l,Wi(c)||0,g)});function FI(l){return Or(l,Y)}function fu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Mi(o);var g=function(){var _=arguments,w=c?c.apply(this,_):_[0],D=g.cache;if(D.has(w))return D.get(w);var P=l.apply(this,_);return g.cache=D.set(w,P)||D,P};return g.cache=new(fu.Cache||Nr),g}fu.Cache=Nr;function gu(l){if(typeof l!="function")throw new Mi(o);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function BI(l){return $_(2,l)}var WI=Ex(function(l,c){c=c.length==1&&tt(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ct(function(_){for(var w=-1,D=An(_.length,g);++w<D;)_[w]=c[w].call(this,_[w]);return yi(l,this,_)})}),ih=ct(function(l,c){var g=ts(c,So(ih));return Or(l,N,t,c,g)}),q_=ct(function(l,c){var g=ts(c,So(q_));return Or(l,V,t,c,g)}),VI=Mr(function(l,c){return Or(l,R,t,t,t,c)});function HI(l,c){if(typeof l!="function")throw new Mi(o);return c=c===t?c:st(c),ct(l,c)}function $I(l,c){if(typeof l!="function")throw new Mi(o);return c=c==null?0:Cn(st(c),0),ct(function(g){var _=g[c],w=os(g,0,c);return _&&es(w,_),yi(l,this,w)})}function zI(l,c,g){var _=!0,w=!0;if(typeof l!="function")throw new Mi(o);return tn(g)&&(_="leading"in g?!!g.leading:_,w="trailing"in g?!!g.trailing:w),K_(l,c,{leading:_,maxWait:c,trailing:w})}function UI(l){return H_(l,1)}function jI(l,c){return ih(Hd(c),l)}function KI(){if(!arguments.length)return[];var l=arguments[0];return tt(l)?l:[l]}function qI(l){return Pi(l,m)}function GI(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function YI(l){return Pi(l,f|m)}function ZI(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function XI(l,c){return c==null||Mm(l,c,Ln(c))}function Xi(l,c){return l===c||l!==l&&c!==c}var QI=ou(Td),JI=ou(function(l,c){return l>=c}),Fs=Vm(function(){return arguments}())?Vm:function(l){return on(l)&&Nt.call(l,"callee")&&!xm.call(l,"callee")},tt=ee.isArray,eT=am?Si(am):lx;function li(l){return l!=null&&pu(l.length)&&!Pr(l)}function hn(l){return on(l)&&li(l)}function tT(l){return l===!0||l===!1||on(l)&&Gn(l)==At}var as=pE||gh,nT=lm?Si(lm):ux;function iT(l){return on(l)&&l.nodeType===1&&!Sa(l)}function rT(l){if(l==null)return!0;if(li(l)&&(tt(l)||typeof l=="string"||typeof l.splice=="function"||as(l)||Lo(l)||Fs(l)))return!l.length;var c=On(l);if(c==Kt||c==Pt)return!l.size;if(wa(l))return!Ad(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sT(l,c){return va(l,c)}function oT(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?va(l,c,t,g):!!_}function rh(l){if(!on(l))return!1;var c=Gn(l);return c==Ct||c==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Sa(l)}function aT(l){return typeof l=="number"&&Im(l)}function Pr(l){if(!tn(l))return!1;var c=Gn(l);return c==Xe||c==sn||c==rt||c==si}function G_(l){return typeof l=="number"&&l==st(l)}function pu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=q}function tn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function on(l){return l!=null&&typeof l=="object"}var Y_=um?Si(um):dx;function lT(l,c){return l===c||Nd(l,c,Gd(c))}function uT(l,c,g){return g=typeof g=="function"?g:t,Nd(l,c,Gd(c),g)}function cT(l){return Z_(l)&&l!=+l}function dT(l){if(Gx(l))throw new Qe(s);return Hm(l)}function hT(l){return l===null}function fT(l){return l==null}function Z_(l){return typeof l=="number"||on(l)&&Gn(l)==dn}function Sa(l){if(!on(l)||Gn(l)!=Wn)return!1;var c=$l(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Bl.call(g)==uE}var sh=cm?Si(cm):hx;function gT(l){return G_(l)&&l>=-q&&l<=q}var X_=dm?Si(dm):fx;function mu(l){return typeof l=="string"||!tt(l)&&on(l)&&Gn(l)==pn}function Ei(l){return typeof l=="symbol"||on(l)&&Gn(l)==Ci}var Lo=hm?Si(hm):gx;function pT(l){return l===t}function mT(l){return on(l)&&On(l)==Fe}function _T(l){return on(l)&&Gn(l)==pt}var vT=ou(Od),bT=ou(function(l,c){return l<=c});function Q_(l){if(!l)return[];if(li(l))return mu(l)?Yi(l):ai(l);if(ca&&l[ca])return XL(l[ca]());var c=On(l),g=c==Kt?Cd:c==Pt?Rl:Eo;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===U||l===-U){var c=l<0?-1:1;return c*z}return l===l?l:0}function st(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function J_(l){return l?Os(st(l),0,K):0}function Wi(l){if(typeof l=="number")return l;if(Ei(l))return k;if(tn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=tn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=vm(l);var g=me.test(l);return g||Ie.test(l)?ML(l.slice(2),g?2:8):ie.test(l)?k:+l}function ev(l){return _r(l,ui(l))}function CT(l){return l?Os(st(l),-q,q):l===0?l:0}function xt(l){return l==null?"":Li(l)}var wT=wo(function(l,c){if(wa(c)||li(c)){_r(c,Ln(c),l);return}for(var g in c)Nt.call(c,g)&&pa(l,g,c[g])}),tv=wo(function(l,c){_r(c,ui(c),l)}),_u=wo(function(l,c,g,_){_r(c,ui(c),l,_)}),yT=wo(function(l,c,g,_){_r(c,Ln(c),l,_)}),ST=Mr(xd);function LT(l,c){var g=Co(l);return c==null?g:Om(g,c)}var ET=ct(function(l,c){l=Wt(l);var g=-1,_=c.length,w=_>2?c[2]:t;for(w&&Yn(c[0],c[1],w)&&(_=1);++g<_;)for(var D=c[g],P=ui(D),H=-1,Z=P.length;++H<Z;){var ue=P[H],ce=l[ue];(ce===t||Xi(ce,_o[ue])&&!Nt.call(l,ue))&&(l[ue]=D[ue])}return l}),xT=ct(function(l){return l.push(t,v_),yi(nv,t,l)});function DT(l,c){return gm(l,We(c,3),mr)}function IT(l,c){return gm(l,We(c,3),Id)}function TT(l,c){return l==null?l:Dd(l,We(c,3),ui)}function kT(l,c){return l==null?l:Bm(l,We(c,3),ui)}function NT(l,c){return l&&mr(l,We(c,3))}function AT(l,c){return l&&Id(l,We(c,3))}function OT(l){return l==null?[]:Ql(l,Ln(l))}function MT(l){return l==null?[]:Ql(l,ui(l))}function oh(l,c,g){var _=l==null?t:Ms(l,c);return _===t?g:_}function RT(l,c){return l!=null&&w_(l,c,rx)}function ah(l,c){return l!=null&&w_(l,c,sx)}var PT=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Wl.call(c)),l[c]=g},uh(ci)),FT=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Wl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),BT=ct(_a);function Ln(l){return li(l)?Nm(l):Ad(l)}function ui(l){return li(l)?Nm(l,!0):px(l)}function WT(l,c){var g={};return c=We(c,3),mr(l,function(_,w,D){Ar(g,c(_,w,D),_)}),g}function VT(l,c){var g={};return c=We(c,3),mr(l,function(_,w,D){Ar(g,w,c(_,w,D))}),g}var HT=wo(function(l,c,g){Jl(l,c,g)}),nv=wo(function(l,c,g,_){Jl(l,c,g,_)}),$T=Mr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(D){return D=ss(D,l),_||(_=D.length>1),D}),_r(l,Kd(l),g),_&&(g=Pi(g,f|p|m,Px));for(var w=c.length;w--;)Bd(g,c[w]);return g});function zT(l,c){return iv(l,gu(We(c)))}var UT=Mr(function(l,c){return l==null?{}:_x(l,c)});function iv(l,c){if(l==null)return{};var g=Jt(Kd(l),function(_){return[_]});return c=We(c),Gm(l,g,function(_,w){return c(_,w[0])})}function jT(l,c,g){c=ss(c,l);var _=-1,w=c.length;for(w||(w=1,l=t);++_<w;){var D=l==null?t:l[vr(c[_])];D===t&&(_=w,D=g),l=Pr(D)?D.call(l):D}return l}function KT(l,c,g){return l==null?l:ba(l,c,g)}function qT(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:ba(l,c,g,_)}var rv=m_(Ln),sv=m_(ui);function GT(l,c,g){var _=tt(l),w=_||as(l)||Lo(l);if(c=We(c,4),g==null){var D=l&&l.constructor;w?g=_?new D:[]:tn(l)?g=Pr(D)?Co($l(l)):{}:g={}}return(w?Oi:mr)(l,function(P,H,Z){return c(g,P,H,Z)}),g}function YT(l,c){return l==null?!0:Bd(l,c)}function ZT(l,c,g){return l==null?l:Jm(l,c,Hd(g))}function XT(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Jm(l,c,Hd(g),_)}function Eo(l){return l==null?[]:bd(l,Ln(l))}function QT(l){return l==null?[]:bd(l,ui(l))}function JT(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Os(Wi(l),c,g)}function ek(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ox(l,c,g)}function tk(l,c,g){if(g&&typeof g!="boolean"&&Yn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var w=Tm();return An(l+w*(c-l+OL("1e-"+((w+"").length-1))),c)}return Rd(l,c)}var nk=yo(function(l,c,g){return c=c.toLowerCase(),l+(g?ov(c):c)});function ov(l){return lh(xt(l).toLowerCase())}function av(l){return l=xt(l),l&&l.replace(Ze,KL).replace(SL,"")}function ik(l,c,g){l=xt(l),c=Li(c);var _=l.length;g=g===t?_:Os(st(g),0,_);var w=g;return g-=c.length,g>=0&&l.slice(g,w)==c}function rk(l){return l=xt(l),l&&sl.test(l)?l.replace(vn,qL):l}function sk(l){return l=xt(l),l&&ae.test(l)?l.replace(oe,"\\$&"):l}var ok=yo(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),ak=yo(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),lk=c_("toLowerCase");function uk(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;if(!c||_>=c)return l;var w=(c-_)/2;return su(Kl(w),g)+l+su(jl(w),g)}function ck(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;return c&&_<c?l+su(c-_,g):l}function dk(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;return c&&_<c?su(c-_,g)+l:l}function hk(l,c,g){return g||c==null?c=0:c&&(c=+c),bE(xt(l).replace(pe,""),c||0)}function fk(l,c,g){return(g?Yn(l,c,g):c===t)?c=1:c=st(c),Pd(xt(l),c)}function gk(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var pk=yo(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function mk(l,c,g){return g&&typeof g!="number"&&Yn(l,c,g)&&(c=g=t),g=g===t?K:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!sh(c))&&(c=Li(c),!c&&go(l))?os(Yi(l),0,g):l.split(c,g)):[]}var _k=yo(function(l,c,g){return l+(g?" ":"")+lh(c)});function vk(l,c,g){return l=xt(l),g=g==null?0:Os(st(g),0,l.length),c=Li(c),l.slice(g,g+c.length)==c}function bk(l,c,g){var _=x.templateSettings;g&&Yn(l,c,g)&&(c=t),l=xt(l),c=_u({},c,_,__);var w=_u({},c.imports,_.imports,__),D=Ln(w),P=bd(w,D),H,Z,ue=0,ce=c.interpolate||ot,ge="__p += '",Se=wd((c.escape||ot).source+"|"+ce.source+"|"+(ce===no?F:ot).source+"|"+(c.evaluate||ot).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++IL+"]")+`
`;l.replace(Se,function(Ue,ht,vt,xi,Zn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(kt,GL),ht&&(H=!0,ge+=`' +
__e(`+ht+`) +
'`),Zn&&(Z=!0,ge+=`';
`+Zn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+Ue.length,Ue}),ge+=`';
`;var ze=Nt.call(c,"variable")&&c.variable;if(!ze)ge=`with (obj) {
`+ge+`
}
`;else if(Yt.test(ze))throw new Qe(a);ge=(Z?ge.replace(Fa,""):ge).replace(Vn,"$1").replace(ti,"$1;"),ge="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=uv(function(){return St(D,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,rh(lt))throw lt;return lt}function Ck(l){return xt(l).toLowerCase()}function wk(l){return xt(l).toUpperCase()}function yk(l,c,g){if(l=xt(l),l&&(g||c===t))return vm(l);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Yi(c),D=bm(_,w),P=Cm(_,w)+1;return os(_,D,P).join("")}function Sk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,ym(l)+1);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Cm(_,Yi(c))+1;return os(_,0,w).join("")}function Lk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Li(c)))return l;var _=Yi(l),w=bm(_,Yi(c));return os(_,w).join("")}function Ek(l,c){var g=X,_=$;if(tn(c)){var w="separator"in c?c.separator:w;g="length"in c?st(c.length):g,_="omission"in c?Li(c.omission):_}l=xt(l);var D=l.length;if(go(l)){var P=Yi(l);D=P.length}if(g>=D)return l;var H=g-po(_);if(H<1)return _;var Z=P?os(P,0,H).join(""):l.slice(0,H);if(w===t)return Z+_;if(P&&(H+=Z.length-H),sh(w)){if(l.slice(H).search(w)){var ue,ce=Z;for(w.global||(w=wd(w.source,xt(te.exec(w))+"g")),w.lastIndex=0;ue=w.exec(ce);)var ge=ue.index;Z=Z.slice(0,ge===t?H:ge)}}else if(l.indexOf(Li(w),H)!=H){var Se=Z.lastIndexOf(w);Se>-1&&(Z=Z.slice(0,Se))}return Z+_}function xk(l){return l=xt(l),l&&ir.test(l)?l.replace(Go,tE):l}var Dk=yo(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),lh=c_("toUpperCase");function lv(l,c,g){return l=xt(l),c=g?t:c,c===t?ZL(l)?rE(l):HL(l):l.match(c)||[]}var uv=ct(function(l,c){try{return yi(l,t,c)}catch(g){return rh(g)?g:new Qe(g)}}),Ik=Mr(function(l,c){return Oi(c,function(g){g=vr(g),Ar(l,g,nh(l[g],l))}),l});function Tk(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Mi(o);return[g(_[0]),_[1]]}):[],ct(function(_){for(var w=-1;++w<c;){var D=l[w];if(yi(D[0],this,_))return yi(D[1],this,_)}})}function kk(l){return tx(Pi(l,f))}function uh(l){return function(){return l}}function Nk(l,c){return l==null||l!==l?c:l}var Ak=h_(),Ok=h_(!0);function ci(l){return l}function ch(l){return $m(typeof l=="function"?l:Pi(l,f))}function Mk(l){return Um(Pi(l,f))}function Rk(l,c){return jm(l,Pi(c,f))}var Pk=ct(function(l,c){return function(g){return _a(g,l,c)}}),Fk=ct(function(l,c){return function(g){return _a(l,g,c)}});function dh(l,c,g){var _=Ln(c),w=Ql(c,_);g==null&&!(tn(c)&&(w.length||!_.length))&&(g=c,c=l,l=this,w=Ql(c,Ln(c)));var D=!(tn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(w,function(H){var Z=c[H];l[H]=Z,P&&(l.prototype[H]=function(){var ue=this.__chain__;if(D||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:Z,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Z.apply(l,es([this.value()],arguments))})}),l}function Bk(){return xn._===this&&(xn._=cE),this}function hh(){}function Wk(l){return l=st(l),ct(function(c){return Km(c,l)})}var Vk=zd(Jt),Hk=zd(fm),$k=zd(gd);function cv(l){return Zd(l)?pd(vr(l)):vx(l)}function zk(l){return function(c){return l==null?t:Ms(l,c)}}var Uk=g_(),jk=g_(!0);function fh(){return[]}function gh(){return!1}function Kk(){return{}}function qk(){return""}function Gk(){return!0}function Yk(l,c){if(l=st(l),l<1||l>q)return[];var g=K,_=An(l,K);c=We(c),l-=K;for(var w=vd(_,c);++g<l;)c(g);return w}function Zk(l){return tt(l)?Jt(l,vr):Ei(l)?[l]:ai(k_(xt(l)))}function Xk(l){var c=++lE;return xt(l)+c}var Qk=ru(function(l,c){return l+c},0),Jk=Ud("ceil"),eN=ru(function(l,c){return l/c},1),tN=Ud("floor");function nN(l){return l&&l.length?Xl(l,ci,Td):t}function iN(l,c){return l&&l.length?Xl(l,We(c,2),Td):t}function rN(l){return mm(l,ci)}function sN(l,c){return mm(l,We(c,2))}function oN(l){return l&&l.length?Xl(l,ci,Od):t}function aN(l,c){return l&&l.length?Xl(l,We(c,2),Od):t}var lN=ru(function(l,c){return l*c},1),uN=Ud("round"),cN=ru(function(l,c){return l-c},0);function dN(l){return l&&l.length?_d(l,ci):0}function hN(l,c){return l&&l.length?_d(l,We(c,2)):0}return x.after=MI,x.ary=H_,x.assign=wT,x.assignIn=tv,x.assignInWith=_u,x.assignWith=yT,x.at=ST,x.before=$_,x.bind=nh,x.bindAll=Ik,x.bindKey=z_,x.castArray=KI,x.chain=B_,x.chunk=tD,x.compact=nD,x.concat=iD,x.cond=Tk,x.conforms=kk,x.constant=uh,x.countBy=dI,x.create=LT,x.curry=U_,x.curryRight=j_,x.debounce=K_,x.defaults=ET,x.defaultsDeep=xT,x.defer=RI,x.delay=PI,x.difference=rD,x.differenceBy=sD,x.differenceWith=oD,x.drop=aD,x.dropRight=lD,x.dropRightWhile=uD,x.dropWhile=cD,x.fill=dD,x.filter=fI,x.flatMap=mI,x.flatMapDeep=_I,x.flatMapDepth=vI,x.flatten=M_,x.flattenDeep=hD,x.flattenDepth=fD,x.flip=FI,x.flow=Ak,x.flowRight=Ok,x.fromPairs=gD,x.functions=OT,x.functionsIn=MT,x.groupBy=bI,x.initial=mD,x.intersection=_D,x.intersectionBy=vD,x.intersectionWith=bD,x.invert=PT,x.invertBy=FT,x.invokeMap=wI,x.iteratee=ch,x.keyBy=yI,x.keys=Ln,x.keysIn=ui,x.map=du,x.mapKeys=WT,x.mapValues=VT,x.matches=Mk,x.matchesProperty=Rk,x.memoize=fu,x.merge=HT,x.mergeWith=nv,x.method=Pk,x.methodOf=Fk,x.mixin=dh,x.negate=gu,x.nthArg=Wk,x.omit=$T,x.omitBy=zT,x.once=BI,x.orderBy=SI,x.over=Vk,x.overArgs=WI,x.overEvery=Hk,x.overSome=$k,x.partial=ih,x.partialRight=q_,x.partition=LI,x.pick=UT,x.pickBy=iv,x.property=cv,x.propertyOf=zk,x.pull=SD,x.pullAll=P_,x.pullAllBy=LD,x.pullAllWith=ED,x.pullAt=xD,x.range=Uk,x.rangeRight=jk,x.rearg=VI,x.reject=DI,x.remove=DD,x.rest=HI,x.reverse=eh,x.sampleSize=TI,x.set=KT,x.setWith=qT,x.shuffle=kI,x.slice=ID,x.sortBy=OI,x.sortedUniq=RD,x.sortedUniqBy=PD,x.split=mk,x.spread=$I,x.tail=FD,x.take=BD,x.takeRight=WD,x.takeRightWhile=VD,x.takeWhile=HD,x.tap=nI,x.throttle=zI,x.thru=cu,x.toArray=Q_,x.toPairs=rv,x.toPairsIn=sv,x.toPath=Zk,x.toPlainObject=ev,x.transform=GT,x.unary=UI,x.union=$D,x.unionBy=zD,x.unionWith=UD,x.uniq=jD,x.uniqBy=KD,x.uniqWith=qD,x.unset=YT,x.unzip=th,x.unzipWith=F_,x.update=ZT,x.updateWith=XT,x.values=Eo,x.valuesIn=QT,x.without=GD,x.words=lv,x.wrap=jI,x.xor=YD,x.xorBy=ZD,x.xorWith=XD,x.zip=QD,x.zipObject=JD,x.zipObjectDeep=eI,x.zipWith=tI,x.entries=rv,x.entriesIn=sv,x.extend=tv,x.extendWith=_u,dh(x,x),x.add=Qk,x.attempt=uv,x.camelCase=nk,x.capitalize=ov,x.ceil=Jk,x.clamp=JT,x.clone=qI,x.cloneDeep=YI,x.cloneDeepWith=ZI,x.cloneWith=GI,x.conformsTo=XI,x.deburr=av,x.defaultTo=Nk,x.divide=eN,x.endsWith=ik,x.eq=Xi,x.escape=rk,x.escapeRegExp=sk,x.every=hI,x.find=gI,x.findIndex=A_,x.findKey=DT,x.findLast=pI,x.findLastIndex=O_,x.findLastKey=IT,x.floor=tN,x.forEach=W_,x.forEachRight=V_,x.forIn=TT,x.forInRight=kT,x.forOwn=NT,x.forOwnRight=AT,x.get=oh,x.gt=QI,x.gte=JI,x.has=RT,x.hasIn=ah,x.head=R_,x.identity=ci,x.includes=CI,x.indexOf=pD,x.inRange=ek,x.invoke=BT,x.isArguments=Fs,x.isArray=tt,x.isArrayBuffer=eT,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=tT,x.isBuffer=as,x.isDate=nT,x.isElement=iT,x.isEmpty=rT,x.isEqual=sT,x.isEqualWith=oT,x.isError=rh,x.isFinite=aT,x.isFunction=Pr,x.isInteger=G_,x.isLength=pu,x.isMap=Y_,x.isMatch=lT,x.isMatchWith=uT,x.isNaN=cT,x.isNative=dT,x.isNil=fT,x.isNull=hT,x.isNumber=Z_,x.isObject=tn,x.isObjectLike=on,x.isPlainObject=Sa,x.isRegExp=sh,x.isSafeInteger=gT,x.isSet=X_,x.isString=mu,x.isSymbol=Ei,x.isTypedArray=Lo,x.isUndefined=pT,x.isWeakMap=mT,x.isWeakSet=_T,x.join=CD,x.kebabCase=ok,x.last=Bi,x.lastIndexOf=wD,x.lowerCase=ak,x.lowerFirst=lk,x.lt=vT,x.lte=bT,x.max=nN,x.maxBy=iN,x.mean=rN,x.meanBy=sN,x.min=oN,x.minBy=aN,x.stubArray=fh,x.stubFalse=gh,x.stubObject=Kk,x.stubString=qk,x.stubTrue=Gk,x.multiply=lN,x.nth=yD,x.noConflict=Bk,x.noop=hh,x.now=hu,x.pad=uk,x.padEnd=ck,x.padStart=dk,x.parseInt=hk,x.random=tk,x.reduce=EI,x.reduceRight=xI,x.repeat=fk,x.replace=gk,x.result=jT,x.round=uN,x.runInContext=G,x.sample=II,x.size=NI,x.snakeCase=pk,x.some=AI,x.sortedIndex=TD,x.sortedIndexBy=kD,x.sortedIndexOf=ND,x.sortedLastIndex=AD,x.sortedLastIndexBy=OD,x.sortedLastIndexOf=MD,x.startCase=_k,x.startsWith=vk,x.subtract=cN,x.sum=dN,x.sumBy=hN,x.template=bk,x.times=Yk,x.toFinite=Fr,x.toInteger=st,x.toLength=J_,x.toLower=Ck,x.toNumber=Wi,x.toSafeInteger=CT,x.toString=xt,x.toUpper=wk,x.trim=yk,x.trimEnd=Sk,x.trimStart=Lk,x.truncate=Ek,x.unescape=xk,x.uniqueId=Xk,x.upperCase=Dk,x.upperFirst=lh,x.each=W_,x.eachRight=V_,x.first=R_,dh(x,function(){var l={};return mr(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(st(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=An(g,_.__takeCount__):_.__views__.push({size:An(g,K),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==B||g==j;mt.prototype[l]=function(w){var D=this.clone();return D.__iteratees__.push({iteratee:We(w,3),type:g}),D.__filtered__=D.__filtered__||_,D}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ct(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return _a(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(gu(We(l)))},mt.prototype.slice=function(l,c){l=st(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=st(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(K)},mr(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),w=x[_?"take"+(c=="last"?"Right":""):c],D=_||/^find/.test(c);w&&(x.prototype[c]=function(){var P=this.__wrapped__,H=_?[1]:arguments,Z=P instanceof mt,ue=H[0],ce=Z||tt(P),ge=function(ht){var vt=w.apply(x,es([ht],H));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(Z=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,ze=D&&!Se,lt=Z&&!Ne;if(!D&&ce){P=lt?P:new mt(this);var Ue=l.apply(P,H);return Ue.__actions__.push({func:cu,args:[ge],thisArg:t}),new Ri(Ue,Se)}return ze&&lt?l.apply(this,H):(Ue=this.thru(ge),ze?_?Ue.value()[0]:Ue.value():Ue)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Pl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var D=this.value();return c.apply(tt(D)?D:[],w)}return this[g](function(P){return c.apply(tt(P)?P:[],w)})}}),mr(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bo,_)||(bo[_]=[]),bo[_].push({name:c,func:g})}}),bo[iu(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=xE,mt.prototype.reverse=DE,mt.prototype.value=IE,x.prototype.at=iI,x.prototype.chain=rI,x.prototype.commit=sI,x.prototype.next=oI,x.prototype.plant=lI,x.prototype.reverse=uI,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=cI,x.prototype.first=x.prototype.head,ca&&(x.prototype[ca]=aI),x},mo=sE();Ts?((Ts.exports=mo)._=mo,cd._=mo):xn._=mo}).call(ta)})(oF,oF.exports);var wr=oF.exports,ey;(function(i){i.Update="Component.Update"})(ey||(ey={}));class tl extends kS{constructor(){super(),this._event=new U5}setState(e,t){const n=Object.assign(this.state,e);this.render(n),t==null||t(this.state,n)}render(e){this._event.emit(ey.Update,this.state,e)}onUpdateState(e){this._event.subscribe(ey.Update,e)}removeOnUpdateState(e){this._event.unsubscribe(ey.Update,e)}forceUpdate(){this.setState(wr.cloneDeep(this.state))}getState(){return this.state}}function ZO(i,e){return he.Children.map(i,t=>he.isValidElement(t)?he.cloneElement(t,e):t)}const Pn={info(...i){},error(...i){console.error(...i)},warn(...i){console.warn(...i)}};function nl(i,e,t){return class extends he.Component{constructor(r){super(r),this._isMounted=!1,this.update=()=>{this._isMounted&&this.setState({lastUpdated:Date.now()})},this.onChange=this.onChange.bind(this),this.state={lastUpdated:Date.now()}}componentDidMount(){this._isMounted=!0,this.handleService(r=>{r.onUpdateState(this.onChange)})}componentWillUnmount(){this._isMounted=!1,this.handleService(r=>{r.removeOnUpdateState(this.onChange)})}onChange(r,s){Pn.info(r,s,je._registry),this.update()}getServiceState(){const r={};return this.handleService((s,o)=>{o?Object.assign(r,{[o]:Object.assign({},s.getState())}):Object.assign(r,Object.assign({},s.getState()))}),r}handleService(r){if(this.isValidService(i))r(i);else for(const s in i)if(s){const o=i[s];this.isValidService(o)&&r(o,s)}}getControllerProperties(){const r={};return t&&this.handleController((s,o)=>{o?Object.assign(r,{[o]:this.getObjectPublicProperties(s)}):Object.assign(r,this.getObjectPublicProperties(s))}),r}handleController(r){if(this.isValidController(t))r(t);else for(const s in t)if(s){const o=t[s];this.isValidController(o)&&r(o,s)}}render(){return re.createElement(e,Object.assign({},this.state,this.props,this.getServiceState(),this.getControllerProperties()))}isValidService(r){return typeof r.onUpdateState=="function"}isValidController(r){return typeof r.initView=="function"}getObjectPublicProperties(r){const s=Object.keys(r),o={};return s.forEach(a=>{!a.endsWith("Service")&&!a.endsWith("Controller")&&!a.startsWith("_")&&(o[a]=r[a])}),o}}}class la extends kS{}const bbe=Object.freeze(Object.defineProperty({__proto__:null,Component:tl,get ComponentEvents(){return ey},Controller:la,cloneReactChildren:ZO,connect:nl},Symbol.toStringTag,{value:"Module"}));var V0={};Object.defineProperty(V0,"__esModule",{value:!0});function WX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Cbe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WX(Object(t),!0).forEach(function(n){wbe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):WX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function FV(i){"@babel/helpers - typeof";return FV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FV(i)}function nae(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function VX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function iae(i,e,t){return e&&VX(i.prototype,e),t&&VX(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function wbe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function HX(i,e){return ybe(i)||Sbe(i,e)||Lbe(i,e)||Ebe()}function ybe(i){if(Array.isArray(i))return i}function Sbe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,o,a;try{for(t=t.call(i);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(u){s=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function Lbe(i,e){if(i){if(typeof i=="string")return $X(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $X(i,e)}}function $X(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Ebe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ta<"u"?ta:typeof self<"u"?self:{};function rae(i,e){return e={exports:{}},i(e,e.exports),e.exports}var Q7=rae(function(i,e){(function(){var t,n="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,L=1,S=2,y=4,E=8,A=16,N=32,V=64,M=128,R=256,Y=512,X=30,$="...",T=800,O=16,B=1,W=2,j=3,U=1/0,q=9007199254740991,z=17976931348623157e292,k=0/0,K=4294967295,fe=K-1,ne=K>>>1,be=[["ary",M],["bind",L],["bindKey",S],["curry",E],["curryRight",A],["flip",Y],["partial",N],["partialRight",V],["rearg",R]],De="[object Arguments]",Ve="[object Array]",rt="[object AsyncFunction]",At="[object Boolean]",Me="[object Date]",ut="[object DOMException]",Ct="[object Error]",Xe="[object Function]",sn="[object GeneratorFunction]",Kt="[object Map]",dn="[object Number]",Sn="[object Null]",Wn="[object Object]",Jn="[object Promise]",si="[object Proxy]",jn="[object RegExp]",Pt="[object Set]",pn="[object String]",Ci="[object Symbol]",Te="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",bt="[object DataView]",wi="[object Float32Array]",Vt="[object Float64Array]",Tt="[object Int8Array]",qt="[object Int16Array]",Gt="[object Int32Array]",Bt="[object Uint8Array]",fr="[object Uint8ClampedArray]",ei="[object Uint16Array]",He="[object Uint32Array]",Fa=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Go=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,ir=RegExp(Go.source),sl=RegExp(vn.source),qi=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,no=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,I=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,Ie=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",oi="\\u20d0-\\u20ff",Hn=Ot+wt+oi,rr="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Ba="\\xac\\xb1\\xd7\\xf7",ol="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ag="\\u2000-\\u206f",hL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Up="A-Z\\xc0-\\xd6\\xd8-\\xde",jp="\\ufe0e\\ufe0f",Kp=Ba+ol+Ag+hL,sd="[']",fL="["+Ft+"]",qp="["+Kp+"]",Al="["+Hn+"]",Gp="\\d+",gL="["+rr+"]",Yp="["+$i+"]",Zp="[^"+Ft+Kp+Gp+rr+$i+Up+"]",od="\\ud83c[\\udffb-\\udfff]",pL="(?:"+Al+"|"+od+")",Xp="[^"+Ft+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",ld="[\\ud800-\\udbff][\\udc00-\\udfff]",ho="["+Up+"]",Qp="\\u200d",Jp="(?:"+Yp+"|"+Zp+")",mL="(?:"+ho+"|"+Zp+")",em="(?:"+sd+"(?:d|ll|m|re|s|t|ve))?",tm="(?:"+sd+"(?:D|LL|M|RE|S|T|VE))?",nm=pL+"?",im="["+jp+"]?",_L="(?:"+Qp+"(?:"+[Xp,ad,ld].join("|")+")"+im+nm+")*",vL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rm=im+nm+_L,CL="(?:"+[gL,ad,ld].join("|")+")"+rm,wL="(?:"+[Xp+Al+"?",Al,ad,ld,fL].join("|")+")",yL=RegExp(sd,"g"),SL=RegExp(Al,"g"),ud=RegExp(od+"(?="+od+")|"+wL+rm,"g"),LL=RegExp([ho+"?"+Yp+"+"+em+"(?="+[qp,ho,"$"].join("|")+")",mL+"+"+tm+"(?="+[qp,ho+Jp,"$"].join("|")+")",ho+"?"+Jp+"+"+em,ho+"+"+tm,bL,vL,Gp,CL].join("|"),"g"),EL=RegExp("["+Qp+Ft+Hn+jp+"]"),xL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,DL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],IL=-1,jt={};jt[wi]=jt[Vt]=jt[Tt]=jt[qt]=jt[Gt]=jt[Bt]=jt[fr]=jt[ei]=jt[He]=!0,jt[De]=jt[Ve]=jt[at]=jt[At]=jt[bt]=jt[Me]=jt[Ct]=jt[Xe]=jt[Kt]=jt[dn]=jt[Wn]=jt[jn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[De]=$t[Ve]=$t[at]=$t[bt]=$t[At]=$t[Me]=$t[wi]=$t[Vt]=$t[Tt]=$t[qt]=$t[Gt]=$t[Kt]=$t[dn]=$t[Wn]=$t[jn]=$t[Pt]=$t[pn]=$t[Ci]=$t[Bt]=$t[fr]=$t[ei]=$t[He]=!0,$t[Ct]=$t[Xe]=$t[Fe]=!1;var TL={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},kL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},NL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},AL={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},OL=parseFloat,ML=parseInt,sm=typeof hw=="object"&&hw&&hw.Object===Object&&hw,RL=typeof self=="object"&&self&&self.Object===Object&&self,xn=sm||RL||Function("return this")(),cd=e&&!e.nodeType&&e,Ts=cd&&!0&&i&&!i.nodeType&&i,om=Ts&&Ts.exports===cd,dd=om&&sm.process,Ai=function(){try{var G=Ts&&Ts.require&&Ts.require("util").types;return G||dd&&dd.binding&&dd.binding("util")}catch{}}(),am=Ai&&Ai.isArrayBuffer,lm=Ai&&Ai.isDate,um=Ai&&Ai.isMap,cm=Ai&&Ai.isRegExp,dm=Ai&&Ai.isSet,hm=Ai&&Ai.isTypedArray;function yi(G,se,ee){switch(ee.length){case 0:return G.call(se);case 1:return G.call(se,ee[0]);case 2:return G.call(se,ee[0],ee[1]);case 3:return G.call(se,ee[0],ee[1],ee[2])}return G.apply(se,ee)}function PL(G,se,ee,xe){for(var Qe=-1,St=G==null?0:G.length;++Qe<St;){var bn=G[Qe];se(xe,bn,ee(bn),G)}return xe}function Oi(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe&&se(G[ee],ee,G)!==!1;);return G}function FL(G,se){for(var ee=G==null?0:G.length;ee--&&se(G[ee],ee,G)!==!1;);return G}function fm(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe;)if(!se(G[ee],ee,G))return!1;return!0}function Jr(G,se){for(var ee=-1,xe=G==null?0:G.length,Qe=0,St=[];++ee<xe;){var bn=G[ee];se(bn,ee,G)&&(St[Qe++]=bn)}return St}function Ol(G,se){var ee=G==null?0:G.length;return!!ee&&fo(G,se,0)>-1}function hd(G,se,ee){for(var xe=-1,Qe=G==null?0:G.length;++xe<Qe;)if(ee(se,G[xe]))return!0;return!1}function Jt(G,se){for(var ee=-1,xe=G==null?0:G.length,Qe=Array(xe);++ee<xe;)Qe[ee]=se(G[ee],ee,G);return Qe}function es(G,se){for(var ee=-1,xe=se.length,Qe=G.length;++ee<xe;)G[Qe+ee]=se[ee];return G}function fd(G,se,ee,xe){var Qe=-1,St=G==null?0:G.length;for(xe&&St&&(ee=G[++Qe]);++Qe<St;)ee=se(ee,G[Qe],Qe,G);return ee}function BL(G,se,ee,xe){var Qe=G==null?0:G.length;for(xe&&Qe&&(ee=G[--Qe]);Qe--;)ee=se(ee,G[Qe],Qe,G);return ee}function gd(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe;)if(se(G[ee],ee,G))return!0;return!1}var WL=pd("length");function VL(G){return G.split("")}function HL(G){return G.match(dt)||[]}function gm(G,se,ee){var xe;return ee(G,function(Qe,St,bn){if(se(Qe,St,bn))return xe=St,!1}),xe}function Ml(G,se,ee,xe){for(var Qe=G.length,St=ee+(xe?1:-1);xe?St--:++St<Qe;)if(se(G[St],St,G))return St;return-1}function fo(G,se,ee){return se===se?JL(G,se,ee):Ml(G,pm,ee)}function $L(G,se,ee,xe){for(var Qe=ee-1,St=G.length;++Qe<St;)if(xe(G[Qe],se))return Qe;return-1}function pm(G){return G!==G}function mm(G,se){var ee=G==null?0:G.length;return ee?_d(G,se)/ee:k}function pd(G){return function(se){return se==null?t:se[G]}}function md(G){return function(se){return G==null?t:G[se]}}function _m(G,se,ee,xe,Qe){return Qe(G,function(St,bn,Wt){ee=xe?(xe=!1,St):se(ee,St,bn,Wt)}),ee}function zL(G,se){var ee=G.length;for(G.sort(se);ee--;)G[ee]=G[ee].value;return G}function _d(G,se){for(var ee,xe=-1,Qe=G.length;++xe<Qe;){var St=se(G[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function vd(G,se){for(var ee=-1,xe=Array(G);++ee<G;)xe[ee]=se(ee);return xe}function UL(G,se){return Jt(se,function(ee){return[ee,G[ee]]})}function vm(G){return G&&G.slice(0,ym(G)+1).replace(pe,"")}function Si(G){return function(se){return G(se)}}function bd(G,se){return Jt(se,function(ee){return G[ee]})}function ua(G,se){return G.has(se)}function bm(G,se){for(var ee=-1,xe=G.length;++ee<xe&&fo(se,G[ee],0)>-1;);return ee}function Cm(G,se){for(var ee=G.length;ee--&&fo(se,G[ee],0)>-1;);return ee}function jL(G,se){for(var ee=G.length,xe=0;ee--;)G[ee]===se&&++xe;return xe}var KL=md(TL),qL=md(kL);function GL(G){return"\\"+AL[G]}function YL(G,se){return G==null?t:G[se]}function go(G){return EL.test(G)}function ZL(G){return xL.test(G)}function XL(G){for(var se,ee=[];!(se=G.next()).done;)ee.push(se.value);return ee}function Cd(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe,Qe){ee[++se]=[Qe,xe]}),ee}function wm(G,se){return function(ee){return G(se(ee))}}function ts(G,se){for(var ee=-1,xe=G.length,Qe=0,St=[];++ee<xe;){var bn=G[ee];(bn===se||bn===h)&&(G[ee]=h,St[Qe++]=ee)}return St}function Rl(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe){ee[++se]=xe}),ee}function QL(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe){ee[++se]=[xe,xe]}),ee}function JL(G,se,ee){for(var xe=ee-1,Qe=G.length;++xe<Qe;)if(G[xe]===se)return xe;return-1}function eE(G,se,ee){for(var xe=ee+1;xe--;)if(G[xe]===se)return xe;return xe}function po(G){return go(G)?nE(G):WL(G)}function Yi(G){return go(G)?iE(G):VL(G)}function ym(G){for(var se=G.length;se--&&J.test(G.charAt(se)););return se}var tE=md(NL);function nE(G){for(var se=ud.lastIndex=0;ud.test(G);)++se;return se}function iE(G){return G.match(ud)||[]}function rE(G){return G.match(LL)||[]}var sE=function G(se){se=se==null?xn:mo.defaults(xn.Object(),se,mo.pick(xn,DL));var ee=se.Array,xe=se.Date,Qe=se.Error,St=se.Function,bn=se.Math,Wt=se.Object,wd=se.RegExp,oE=se.String,Mi=se.TypeError,Pl=ee.prototype,aE=St.prototype,_o=Wt.prototype,Fl=se["__core-js_shared__"],Bl=aE.toString,Nt=_o.hasOwnProperty,lE=0,Sm=function(){var l=/[^.]+$/.exec(Fl&&Fl.keys&&Fl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Wl=_o.toString,uE=Bl.call(Wt),cE=xn._,dE=wd("^"+Bl.call(Nt).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=om?se.Buffer:t,ns=se.Symbol,Hl=se.Uint8Array,Lm=Vl?Vl.allocUnsafe:t,$l=wm(Wt.getPrototypeOf,Wt),Em=Wt.create,xm=_o.propertyIsEnumerable,zl=Pl.splice,Dm=ns?ns.isConcatSpreadable:t,ca=ns?ns.iterator:t,ks=ns?ns.toStringTag:t,Ul=function(){try{var l=Rs(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),hE=se.clearTimeout!==xn.clearTimeout&&se.clearTimeout,fE=xe&&xe.now!==xn.Date.now&&xe.now,gE=se.setTimeout!==xn.setTimeout&&se.setTimeout,jl=bn.ceil,Kl=bn.floor,yd=Wt.getOwnPropertySymbols,pE=Vl?Vl.isBuffer:t,Im=se.isFinite,mE=Pl.join,_E=wm(Wt.keys,Wt),Cn=bn.max,An=bn.min,vE=xe.now,bE=se.parseInt,Tm=bn.random,CE=Pl.reverse,Sd=Rs(se,"DataView"),da=Rs(se,"Map"),Ld=Rs(se,"Promise"),vo=Rs(se,"Set"),ha=Rs(se,"WeakMap"),fa=Rs(Wt,"create"),ql=ha&&new ha,bo={},wE=Ps(Sd),yE=Ps(da),SE=Ps(Ld),LE=Ps(vo),EE=Ps(ha),Gl=ns?ns.prototype:t,ga=Gl?Gl.valueOf:t,km=Gl?Gl.toString:t;function x(l){if(on(l)&&!tt(l)&&!(l instanceof mt)){if(l instanceof Ri)return l;if(Nt.call(l,"__wrapped__"))return N_(l)}return new Ri(l)}var Co=function(){function l(){}return function(c){if(!tn(c))return{};if(Em)return Em(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Yl(){}function Ri(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qi,evaluate:Ye,interpolate:no,variable:"",imports:{_:x}},x.prototype=Yl.prototype,x.prototype.constructor=x,Ri.prototype=Co(Yl.prototype),Ri.prototype.constructor=Ri;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function xE(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function DE(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function IE(){var l=this.__wrapped__.value(),c=this.__dir__,g=tt(l),_=c<0,w=g?l.length:0,D=Vx(0,w,this.__views__),P=D.start,H=D.end,Z=H-P,ue=_?H:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=An(Z,this.__takeCount__);if(!g||!_&&w==Z&&Ne==Z)return e_(l,this.__actions__);var ze=[];e:for(;Z--&&Se<Ne;){ue+=c;for(var lt=-1,Ue=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Zn=vt(Ue);if(xi==W)Ue=Zn;else if(!Zn){if(xi==B)continue e;break e}}ze[Se++]=Ue}return ze}mt.prototype=Co(Yl.prototype),mt.prototype.constructor=mt;function Ns(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function TE(){this.__data__=fa?fa(null):{},this.size=0}function kE(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function NE(l){var c=this.__data__;if(fa){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function AE(l){var c=this.__data__;return fa?c[l]!==t:Nt.call(c,l)}function OE(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=fa&&c===t?u:c,this}Ns.prototype.clear=TE,Ns.prototype.delete=kE,Ns.prototype.get=NE,Ns.prototype.has=AE,Ns.prototype.set=OE;function kr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function ME(){this.__data__=[],this.size=0}function RE(l){var c=this.__data__,g=Zl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():zl.call(c,g,1),--this.size,!0}function PE(l){var c=this.__data__,g=Zl(c,l);return g<0?t:c[g][1]}function FE(l){return Zl(this.__data__,l)>-1}function BE(l,c){var g=this.__data__,_=Zl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}kr.prototype.clear=ME,kr.prototype.delete=RE,kr.prototype.get=PE,kr.prototype.has=FE,kr.prototype.set=BE;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function WE(){this.size=0,this.__data__={hash:new Ns,map:new(da||kr),string:new Ns}}function VE(l){var c=lu(this,l).delete(l);return this.size-=c?1:0,c}function HE(l){return lu(this,l).get(l)}function $E(l){return lu(this,l).has(l)}function zE(l,c){var g=lu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=WE,Nr.prototype.delete=VE,Nr.prototype.get=HE,Nr.prototype.has=$E,Nr.prototype.set=zE;function As(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function UE(l){return this.__data__.set(l,u),this}function jE(l){return this.__data__.has(l)}As.prototype.add=As.prototype.push=UE,As.prototype.has=jE;function Zi(l){var c=this.__data__=new kr(l);this.size=c.size}function KE(){this.__data__=new kr,this.size=0}function qE(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function GE(l){return this.__data__.get(l)}function YE(l){return this.__data__.has(l)}function ZE(l,c){var g=this.__data__;if(g instanceof kr){var _=g.__data__;if(!da||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Zi.prototype.clear=KE,Zi.prototype.delete=qE,Zi.prototype.get=GE,Zi.prototype.has=YE,Zi.prototype.set=ZE;function Nm(l,c){var g=tt(l),_=!g&&Fs(l),w=!g&&!_&&as(l),D=!g&&!_&&!w&&Lo(l),P=g||_||w||D,H=P?vd(l.length,oE):[],Z=H.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||w&&(ue=="offset"||ue=="parent")||D&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Rr(ue,Z)))&&H.push(ue);return H}function Am(l){var c=l.length;return c?l[Rd(0,c-1)]:t}function XE(l,c){return uu(ai(l),Os(c,0,l.length))}function QE(l){return uu(ai(l))}function Ed(l,c,g){(g!==t&&!Xi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function pa(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Xi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Zl(l,c){for(var g=l.length;g--;)if(Xi(l[g][0],c))return g;return-1}function JE(l,c,g,_){return is(l,function(w,D,P){c(_,w,g(w),P)}),_}function Om(l,c){return l&&_r(c,Ln(c),l)}function ex(l,c){return l&&_r(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&Ul?Ul(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function xd(l,c){for(var g=-1,_=c.length,w=ee(_),D=l==null;++g<_;)w[g]=D?t:oh(l,c[g]);return w}function Os(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,w,D){var P,H=c&f,Z=c&p,ue=c&m;if(g&&(P=w?g(l,_,w,D):g(l)),P!==t)return P;if(!tn(l))return l;var ce=tt(l);if(ce){if(P=$x(l),!H)return ai(l,P)}else{var ge=On(l),Se=ge==Xe||ge==sn;if(as(l))return i_(l,H);if(ge==Wn||ge==De||Se&&!w){if(P=Z||Se?{}:y_(l),!H)return Z?Nx(l,ex(P,l)):kx(l,Om(P,l))}else{if(!$t[ge])return w?l:{};P=zx(l,ge,H)}}D||(D=new Zi);var Ne=D.get(l);if(Ne)return Ne;D.set(l,P),X_(l)?l.forEach(function(Ue){P.add(Pi(Ue,c,g,Ue,l,D))}):Y_(l)&&l.forEach(function(Ue,ht){P.set(ht,Pi(Ue,c,g,ht,l,D))});var ze=ue?Z?Kd:jd:Z?ui:Ln,lt=ce?t:ze(l);return Oi(lt||l,function(Ue,ht){lt&&(ht=Ue,Ue=l[ht]),pa(P,ht,Pi(Ue,c,g,ht,l,D))}),P}function tx(l){var c=Ln(l);return function(g){return Mm(g,l,c)}}function Mm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var w=g[_],D=c[w],P=l[w];if(P===t&&!(w in l)||!D(P))return!1}return!0}function Rm(l,c,g){if(typeof l!="function")throw new Mi(o);return ya(function(){l.apply(t,g)},c)}function ma(l,c,g,_){var w=-1,D=Ol,P=!0,H=l.length,Z=[],ue=c.length;if(!H)return Z;g&&(c=Jt(c,Si(g))),_?(D=hd,P=!1):c.length>=r&&(D=ua,P=!1,c=new As(c));e:for(;++w<H;){var ce=l[w],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;Z.push(ce)}else D(c,ge,_)||Z.push(ce)}return Z}var is=l_(mr),Pm=l_(Id,!0);function nx(l,c){var g=!0;return is(l,function(_,w,D){return g=!!c(_,w,D),g}),g}function Xl(l,c,g){for(var _=-1,w=l.length;++_<w;){var D=l[_],P=c(D);if(P!=null&&(H===t?P===P&&!Ei(P):g(P,H)))var H=P,Z=D}return Z}function ix(l,c,g,_){var w=l.length;for(g=st(g),g<0&&(g=-g>w?0:w+g),_=_===t||_>w?w:st(_),_<0&&(_+=w),_=g>_?0:J_(_);g<_;)l[g++]=c;return l}function Fm(l,c){var g=[];return is(l,function(_,w,D){c(_,w,D)&&g.push(_)}),g}function Dn(l,c,g,_,w){var D=-1,P=l.length;for(g||(g=jx),w||(w=[]);++D<P;){var H=l[D];c>0&&g(H)?c>1?Dn(H,c-1,g,_,w):es(w,H):_||(w[w.length]=H)}return w}var Dd=u_(),Bm=u_(!0);function mr(l,c){return l&&Dd(l,c,Ln)}function Id(l,c){return l&&Bm(l,c,Ln)}function Ql(l,c){return Jr(c,function(g){return Pr(l[g])})}function Ms(l,c){c=ss(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[vr(c[g++])];return g&&g==_?l:t}function Wm(l,c,g){var _=c(l);return tt(l)?_:es(_,g(l))}function Gn(l){return l==null?l===t?Te:Sn:ks&&ks in Wt(l)?Wx(l):Qx(l)}function Td(l,c){return l>c}function rx(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ox(l,c,g){return l>=An(c,g)&&l<Cn(c,g)}function kd(l,c,g){for(var _=g?hd:Ol,w=l[0].length,D=l.length,P=D,H=ee(D),Z=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),Z=An(ce.length,Z),H[P]=!g&&(c||w>=120&&ce.length>=120)?new As(P&&ce):t}ce=l[0];var ge=-1,Se=H[0];e:for(;++ge<w&&ue.length<Z;){var Ne=ce[ge],ze=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ua(Se,ze):_(ue,ze,g))){for(P=D;--P;){var lt=H[P];if(!(lt?ua(lt,ze):_(l[P],ze,g)))continue e}Se&&Se.push(ze),ue.push(Ne)}}return ue}function ax(l,c,g,_){return mr(l,function(w,D,P){c(_,g(w),D,P)}),_}function _a(l,c,g){c=ss(c,l),l=x_(l,c);var _=l==null?l:l[vr(Bi(c))];return _==null?t:yi(_,l,g)}function Vm(l){return on(l)&&Gn(l)==De}function lx(l){return on(l)&&Gn(l)==at}function ux(l){return on(l)&&Gn(l)==Me}function va(l,c,g,_,w){return l===c?!0:l==null||c==null||!on(l)&&!on(c)?l!==l&&c!==c:cx(l,c,g,_,va,w)}function cx(l,c,g,_,w,D){var P=tt(l),H=tt(c),Z=P?Ve:On(l),ue=H?Ve:On(c);Z=Z==De?Wn:Z,ue=ue==De?Wn:ue;var ce=Z==Wn,ge=ue==Wn,Se=Z==ue;if(Se&&as(l)){if(!as(c))return!1;P=!0,ce=!1}if(Se&&!ce)return D||(D=new Zi),P||Lo(l)?b_(l,c,g,_,w,D):Fx(l,c,Z,g,_,w,D);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),ze=ge&&Nt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?l.value():l,Ue=ze?c.value():c;return D||(D=new Zi),w(lt,Ue,g,_,D)}}return Se?(D||(D=new Zi),Bx(l,c,g,_,w,D)):!1}function dx(l){return on(l)&&On(l)==Kt}function Nd(l,c,g,_){var w=g.length,D=w,P=!_;if(l==null)return!D;for(l=Wt(l);w--;){var H=g[w];if(P&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++w<D;){H=g[w];var Z=H[0],ue=l[Z],ce=H[1];if(P&&H[2]){if(ue===t&&!(Z in l))return!1}else{var ge=new Zi;if(_)var Se=_(ue,ce,Z,l,c,ge);if(!(Se===t?va(ce,ue,v|b,_,ge):Se))return!1}}return!0}function Hm(l){if(!tn(l)||qx(l))return!1;var c=Pr(l)?dE:le;return c.test(Ps(l))}function hx(l){return on(l)&&Gn(l)==jn}function fx(l){return on(l)&&On(l)==Pt}function gx(l){return on(l)&&pu(l.length)&&!!jt[Gn(l)]}function $m(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?tt(l)?jm(l[0],l[1]):Um(l):cv(l)}function Ad(l){if(!wa(l))return _E(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function px(l){if(!tn(l))return Xx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Od(l,c){return l<c}function zm(l,c){var g=-1,_=li(l)?ee(l.length):[];return is(l,function(w,D,P){_[++g]=c(w,D,P)}),_}function Um(l){var c=Gd(l);return c.length==1&&c[0][2]?L_(c[0][0],c[0][1]):function(g){return g===l||Nd(g,l,c)}}function jm(l,c){return Zd(l)&&S_(c)?L_(vr(l),c):function(g){var _=oh(g,l);return _===t&&_===c?ah(g,l):va(c,_,v|b)}}function Jl(l,c,g,_,w){l!==c&&Dd(c,function(D,P){if(w||(w=new Zi),tn(D))mx(l,c,P,g,Jl,_,w);else{var H=_?_(Qd(l,P),D,P+"",l,c,w):t;H===t&&(H=D),Ed(l,P,H)}},ui)}function mx(l,c,g,_,w,D,P){var H=Qd(l,g),Z=Qd(c,g),ue=P.get(Z);if(ue){Ed(l,g,ue);return}var ce=D?D(H,Z,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=tt(Z),Ne=!Se&&as(Z),ze=!Se&&!Ne&&Lo(Z);ce=Z,Se||Ne||ze?tt(H)?ce=H:hn(H)?ce=ai(H):Ne?(ge=!1,ce=i_(Z,!0)):ze?(ge=!1,ce=r_(Z,!0)):ce=[]:Sa(Z)||Fs(Z)?(ce=H,Fs(H)?ce=ev(H):(!tn(H)||Pr(H))&&(ce=y_(Z))):ge=!1}ge&&(P.set(Z,ce),w(ce,Z,_,D,P),P.delete(Z)),Ed(l,g,ce)}function Km(l,c){var g=l.length;if(g)return c+=c<0?g:0,Rr(c,g)?l[c]:t}function qm(l,c,g){c.length?c=Jt(c,function(D){return tt(D)?function(P){return Ms(P,D.length===1?D[0]:D)}:D}):c=[ci];var _=-1;c=Jt(c,Si(We()));var w=zm(l,function(D,P,H){var Z=Jt(c,function(ue){return ue(D)});return{criteria:Z,index:++_,value:D}});return zL(w,function(D,P){return Tx(D,P,g)})}function _x(l,c){return Gm(l,c,function(g,_){return ah(l,_)})}function Gm(l,c,g){for(var _=-1,w=c.length,D={};++_<w;){var P=c[_],H=Ms(l,P);g(H,P)&&ba(D,ss(P,l),H)}return D}function vx(l){return function(c){return Ms(c,l)}}function Md(l,c,g,_){var w=_?$L:fo,D=-1,P=c.length,H=l;for(l===c&&(c=ai(c)),g&&(H=Jt(l,Si(g)));++D<P;)for(var Z=0,ue=c[D],ce=g?g(ue):ue;(Z=w(H,ce,Z,_))>-1;)H!==l&&zl.call(H,Z,1),zl.call(l,Z,1);return l}function Ym(l,c){for(var g=l?c.length:0,_=g-1;g--;){var w=c[g];if(g==_||w!==D){var D=w;Rr(w)?zl.call(l,w,1):Bd(l,w)}}return l}function Rd(l,c){return l+Kl(Tm()*(c-l+1))}function bx(l,c,g,_){for(var w=-1,D=Cn(jl((c-l)/(g||1)),0),P=ee(D);D--;)P[_?D:++w]=l,l+=g;return P}function Pd(l,c){var g="";if(!l||c<1||c>q)return g;do c%2&&(g+=l),c=Kl(c/2),c&&(l+=l);while(c);return g}function ct(l,c){return Jd(E_(l,c,ci),l+"")}function Cx(l){return Am(Eo(l))}function wx(l,c){var g=Eo(l);return uu(g,Os(c,0,g.length))}function ba(l,c,g,_){if(!tn(l))return l;c=ss(c,l);for(var w=-1,D=c.length,P=D-1,H=l;H!=null&&++w<D;){var Z=vr(c[w]),ue=g;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return l;if(w!=P){var ce=H[Z];ue=_?_(ce,Z,H):t,ue===t&&(ue=tn(ce)?ce:Rr(c[w+1])?[]:{})}pa(H,Z,ue),H=H[Z]}return l}var Zm=ql?function(l,c){return ql.set(l,c),l}:ci,yx=Ul?function(l,c){return Ul(l,"toString",{configurable:!0,enumerable:!1,value:uh(c),writable:!0})}:ci;function Sx(l){return uu(Eo(l))}function Fi(l,c,g){var _=-1,w=l.length;c<0&&(c=-c>w?0:w+c),g=g>w?w:g,g<0&&(g+=w),w=c>g?0:g-c>>>0,c>>>=0;for(var D=ee(w);++_<w;)D[_]=l[_+c];return D}function Lx(l,c){var g;return is(l,function(_,w,D){return g=c(_,w,D),!g}),!!g}function eu(l,c,g){var _=0,w=l==null?_:l.length;if(typeof c=="number"&&c===c&&w<=ne){for(;_<w;){var D=_+w>>>1,P=l[D];P!==null&&!Ei(P)&&(g?P<=c:P<c)?_=D+1:w=D}return w}return Fd(l,c,ci,g)}function Fd(l,c,g,_){var w=0,D=l==null?0:l.length;if(D===0)return 0;c=g(c);for(var P=c!==c,H=c===null,Z=Ei(c),ue=c===t;w<D;){var ce=Kl((w+D)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,ze=ge===ge,lt=Ei(ge);if(P)var Ue=_||ze;else ue?Ue=ze&&(_||Se):H?Ue=ze&&Se&&(_||!Ne):Z?Ue=ze&&Se&&!Ne&&(_||!lt):Ne||lt?Ue=!1:Ue=_?ge<=c:ge<c;Ue?w=ce+1:D=ce}return An(D,fe)}function Xm(l,c){for(var g=-1,_=l.length,w=0,D=[];++g<_;){var P=l[g],H=c?c(P):P;if(!g||!Xi(H,Z)){var Z=H;D[w++]=P===0?0:P}}return D}function Qm(l){return typeof l=="number"?l:Ei(l)?k:+l}function Li(l){if(typeof l=="string")return l;if(tt(l))return Jt(l,Li)+"";if(Ei(l))return km?km.call(l):"";var c=l+"";return c=="0"&&1/l==-U?"-0":c}function rs(l,c,g){var _=-1,w=Ol,D=l.length,P=!0,H=[],Z=H;if(g)P=!1,w=hd;else if(D>=r){var ue=c?null:Rx(l);if(ue)return Rl(ue);P=!1,w=ua,Z=new As}else Z=c?[]:H;e:for(;++_<D;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=Z.length;Se--;)if(Z[Se]===ge)continue e;c&&Z.push(ge),H.push(ce)}else w(Z,ge,g)||(Z!==H&&Z.push(ge),H.push(ce))}return H}function Bd(l,c){return c=ss(c,l),l=x_(l,c),l==null||delete l[vr(Bi(c))]}function Jm(l,c,g,_){return ba(l,c,g(Ms(l,c)),_)}function tu(l,c,g,_){for(var w=l.length,D=_?w:-1;(_?D--:++D<w)&&c(l[D],D,l););return g?Fi(l,_?0:D,_?D+1:w):Fi(l,_?D+1:0,_?w:D)}function e_(l,c){var g=l;return g instanceof mt&&(g=g.value()),fd(c,function(_,w){return w.func.apply(w.thisArg,es([_],w.args))},g)}function Wd(l,c,g){var _=l.length;if(_<2)return _?rs(l[0]):[];for(var w=-1,D=ee(_);++w<_;)for(var P=l[w],H=-1;++H<_;)H!=w&&(D[w]=ma(D[w]||P,l[H],c,g));return rs(Dn(D,1),c,g)}function t_(l,c,g){for(var _=-1,w=l.length,D=c.length,P={};++_<w;){var H=_<D?c[_]:t;g(P,l[_],H)}return P}function Vd(l){return hn(l)?l:[]}function Hd(l){return typeof l=="function"?l:ci}function ss(l,c){return tt(l)?l:Zd(l,c)?[l]:k_(xt(l))}var Ex=ct;function os(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var n_=hE||function(l){return xn.clearTimeout(l)};function i_(l,c){if(c)return l.slice();var g=l.length,_=Lm?Lm(g):new l.constructor(g);return l.copy(_),_}function $d(l){var c=new l.constructor(l.byteLength);return new Hl(c).set(new Hl(l)),c}function xx(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Dx(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function Ix(l){return ga?Wt(ga.call(l)):{}}function r_(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function s_(l,c){if(l!==c){var g=l!==t,_=l===null,w=l===l,D=Ei(l),P=c!==t,H=c===null,Z=c===c,ue=Ei(c);if(!H&&!ue&&!D&&l>c||D&&P&&Z&&!H&&!ue||_&&P&&Z||!g&&Z||!w)return 1;if(!_&&!D&&!ue&&l<c||ue&&g&&w&&!_&&!D||H&&g&&w||!P&&w||!Z)return-1}return 0}function Tx(l,c,g){for(var _=-1,w=l.criteria,D=c.criteria,P=w.length,H=g.length;++_<P;){var Z=s_(w[_],D[_]);if(Z){if(_>=H)return Z;var ue=g[_];return Z*(ue=="desc"?-1:1)}}return l.index-c.index}function o_(l,c,g,_){for(var w=-1,D=l.length,P=g.length,H=-1,Z=c.length,ue=Cn(D-P,0),ce=ee(Z+ue),ge=!_;++H<Z;)ce[H]=c[H];for(;++w<P;)(ge||w<D)&&(ce[g[w]]=l[w]);for(;ue--;)ce[H++]=l[w++];return ce}function a_(l,c,g,_){for(var w=-1,D=l.length,P=-1,H=g.length,Z=-1,ue=c.length,ce=Cn(D-H,0),ge=ee(ce+ue),Se=!_;++w<ce;)ge[w]=l[w];for(var Ne=w;++Z<ue;)ge[Ne+Z]=c[Z];for(;++P<H;)(Se||w<D)&&(ge[Ne+g[P]]=l[w++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function _r(l,c,g,_){var w=!g;g||(g={});for(var D=-1,P=c.length;++D<P;){var H=c[D],Z=_?_(g[H],l[H],H,g,l):t;Z===t&&(Z=l[H]),w?Ar(g,H,Z):pa(g,H,Z)}return g}function kx(l,c){return _r(l,Yd(l),c)}function Nx(l,c){return _r(l,C_(l),c)}function nu(l,c){return function(g,_){var w=tt(g)?PL:JE,D=c?c():{};return w(g,l,We(_,2),D)}}function wo(l){return ct(function(c,g){var _=-1,w=g.length,D=w>1?g[w-1]:t,P=w>2?g[2]:t;for(D=l.length>3&&typeof D=="function"?(w--,D):t,P&&Yn(g[0],g[1],P)&&(D=w<3?t:D,w=1),c=Wt(c);++_<w;){var H=g[_];H&&l(c,H,_,D)}return c})}function l_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var w=g.length,D=c?w:-1,P=Wt(g);(c?D--:++D<w)&&_(P[D],D,P)!==!1;);return g}}function u_(l){return function(c,g,_){for(var w=-1,D=Wt(c),P=_(c),H=P.length;H--;){var Z=P[l?H:++w];if(g(D[Z],Z,D)===!1)break}return c}}function Ax(l,c,g){var _=c&L,w=Ca(l);function D(){var P=this&&this!==xn&&this instanceof D?w:l;return P.apply(_?g:this,arguments)}return D}function c_(l){return function(c){c=xt(c);var g=go(c)?Yi(c):t,_=g?g[0]:c.charAt(0),w=g?os(g,1).join(""):c.slice(1);return _[l]()+w}}function yo(l){return function(c){return fd(lv(av(c).replace(yL,"")),l,"")}}function Ca(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Co(l.prototype),_=l.apply(g,c);return tn(_)?_:g}}function Ox(l,c,g){var _=Ca(l);function w(){for(var D=arguments.length,P=ee(D),H=D,Z=So(w);H--;)P[H]=arguments[H];var ue=D<3&&P[0]!==Z&&P[D-1]!==Z?[]:ts(P,Z);if(D-=ue.length,D<g)return p_(l,c,iu,w.placeholder,t,P,ue,t,t,g-D);var ce=this&&this!==xn&&this instanceof w?_:l;return yi(ce,this,P)}return w}function d_(l){return function(c,g,_){var w=Wt(c);if(!li(c)){var D=We(g,3);c=Ln(c),g=function(H){return D(w[H],H,w)}}var P=l(c,g,_);return P>-1?w[D?c[P]:P]:t}}function h_(l){return Mr(function(c){var g=c.length,_=g,w=Ri.prototype.thru;for(l&&c.reverse();_--;){var D=c[_];if(typeof D!="function")throw new Mi(o);if(w&&!P&&au(D)=="wrapper")var P=new Ri([],!0)}for(_=P?_:g;++_<g;){D=c[_];var H=au(D),Z=H=="wrapper"?qd(D):t;Z&&Xd(Z[0])&&Z[1]==(M|E|N|R)&&!Z[4].length&&Z[9]==1?P=P[au(Z[0])].apply(P,Z[3]):P=D.length==1&&Xd(D)?P[H]():P.thru(D)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&tt(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function iu(l,c,g,_,w,D,P,H,Z,ue){var ce=c&M,ge=c&L,Se=c&S,Ne=c&(E|A),ze=c&Y,lt=Se?t:Ca(l);function Ue(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Zn=So(Ue),Di=jL(vt,Zn);if(_&&(vt=o_(vt,_,w,Ne)),D&&(vt=a_(vt,D,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=ts(vt,Zn);return p_(l,c,iu,Ue.placeholder,g,vt,fn,H,Z,ue-ht)}var Qi=ge?g:this,Br=Se?Qi[l]:l;return ht=vt.length,H?vt=Jx(vt,H):ze&&ht>1&&vt.reverse(),ce&&Z<ht&&(vt.length=Z),this&&this!==xn&&this instanceof Ue&&(Br=lt||Ca(Br)),Br.apply(Qi,vt)}return Ue}function f_(l,c){return function(g,_){return ax(g,l,c(_),{})}}function ru(l,c){return function(g,_){var w;if(g===t&&_===t)return c;if(g!==t&&(w=g),_!==t){if(w===t)return _;typeof g=="string"||typeof _=="string"?(g=Li(g),_=Li(_)):(g=Qm(g),_=Qm(_)),w=l(g,_)}return w}}function zd(l){return Mr(function(c){return c=Jt(c,Si(We())),ct(function(g){var _=this;return l(c,function(w){return yi(w,_,g)})})})}function su(l,c){c=c===t?" ":Li(c);var g=c.length;if(g<2)return g?Pd(c,l):c;var _=Pd(c,jl(l/po(c)));return go(c)?os(Yi(_),0,l).join(""):_.slice(0,l)}function Mx(l,c,g,_){var w=c&L,D=Ca(l);function P(){for(var H=-1,Z=arguments.length,ue=-1,ce=_.length,ge=ee(ce+Z),Se=this&&this!==xn&&this instanceof P?D:l;++ue<ce;)ge[ue]=_[ue];for(;Z--;)ge[ue++]=arguments[++H];return yi(Se,w?g:this,ge)}return P}function g_(l){return function(c,g,_){return _&&typeof _!="number"&&Yn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),bx(c,g,_,l)}}function ou(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function p_(l,c,g,_,w,D,P,H,Z,ue){var ce=c&E,ge=ce?P:t,Se=ce?t:P,Ne=ce?D:t,ze=ce?t:D;c|=ce?N:V,c&=~(ce?V:N),c&y||(c&=~(L|S));var lt=[l,c,w,Ne,ge,ze,Se,H,Z,ue],Ue=g.apply(t,lt);return Xd(l)&&D_(Ue,lt),Ue.placeholder=_,I_(Ue,l,c)}function Ud(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:An(st(_),292),_&&Im(g)){var w=(xt(g)+"e").split("e"),D=c(w[0]+"e"+(+w[1]+_));return w=(xt(D)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return c(g)}}var Rx=vo&&1/Rl(new vo([,-0]))[1]==U?function(l){return new vo(l)}:hh;function m_(l){return function(c){var g=On(c);return g==Kt?Cd(c):g==Pt?QL(c):UL(c,l(c))}}function Or(l,c,g,_,w,D,P,H){var Z=c&S;if(!Z&&typeof l!="function")throw new Mi(o);var ue=_?_.length:0;if(ue||(c&=~(N|V),_=w=t),P=P===t?P:Cn(st(P),0),H=H===t?H:st(H),ue-=w?w.length:0,c&V){var ce=_,ge=w;_=w=t}var Se=Z?t:qd(l),Ne=[l,c,g,_,w,ce,ge,D,P,H];if(Se&&Zx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],w=Ne[4],H=Ne[9]=Ne[9]===t?Z?0:l.length:Cn(Ne[9]-ue,0),!H&&c&(E|A)&&(c&=~(E|A)),!c||c==L)var ze=Ax(l,c,g);else c==E||c==A?ze=Ox(l,c,H):(c==N||c==(L|N))&&!w.length?ze=Mx(l,c,g,_):ze=iu.apply(t,Ne);var lt=Se?Zm:D_;return I_(lt(ze,Ne),l,c)}function __(l,c,g,_){return l===t||Xi(l,_o[g])&&!Nt.call(_,g)?c:l}function v_(l,c,g,_,w,D){return tn(l)&&tn(c)&&(D.set(c,l),Jl(l,c,t,v_,D),D.delete(c)),l}function Px(l){return Sa(l)?t:l}function b_(l,c,g,_,w,D){var P=g&v,H=l.length,Z=c.length;if(H!=Z&&!(P&&Z>H))return!1;var ue=D.get(l),ce=D.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new As:t;for(D.set(l,c),D.set(c,l);++ge<H;){var ze=l[ge],lt=c[ge];if(_)var Ue=P?_(lt,ze,ge,c,l,D):_(ze,lt,ge,l,c,D);if(Ue!==t){if(Ue)continue;Se=!1;break}if(Ne){if(!gd(c,function(ht,vt){if(!ua(Ne,vt)&&(ze===ht||w(ze,ht,g,_,D)))return Ne.push(vt)})){Se=!1;break}}else if(!(ze===lt||w(ze,lt,g,_,D))){Se=!1;break}}return D.delete(l),D.delete(c),Se}function Fx(l,c,g,_,w,D,P){switch(g){case bt:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!D(new Hl(l),new Hl(c)));case At:case Me:case dn:return Xi(+l,+c);case Ct:return l.name==c.name&&l.message==c.message;case jn:case pn:return l==c+"";case Kt:var H=Cd;case Pt:var Z=_&v;if(H||(H=Rl),l.size!=c.size&&!Z)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=b_(H(l),H(c),_,w,D,P);return P.delete(l),ce;case Ci:if(ga)return ga.call(l)==ga.call(c)}return!1}function Bx(l,c,g,_,w,D){var P=g&v,H=jd(l),Z=H.length,ue=jd(c),ce=ue.length;if(Z!=ce&&!P)return!1;for(var ge=Z;ge--;){var Se=H[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=D.get(l),ze=D.get(c);if(Ne&&ze)return Ne==c&&ze==l;var lt=!0;D.set(l,c),D.set(c,l);for(var Ue=P;++ge<Z;){Se=H[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,D):_(ht,vt,Se,l,c,D);if(!(xi===t?ht===vt||w(ht,vt,g,_,D):xi)){lt=!1;break}Ue||(Ue=Se=="constructor")}if(lt&&!Ue){var Zn=l.constructor,Di=c.constructor;Zn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return D.delete(l),D.delete(c),lt}function Mr(l){return Jd(E_(l,t,M_),l+"")}function jd(l){return Wm(l,Ln,Yd)}function Kd(l){return Wm(l,ui,C_)}var qd=ql?function(l){return ql.get(l)}:hh;function au(l){for(var c=l.name+"",g=bo[c],_=Nt.call(bo,c)?g.length:0;_--;){var w=g[_],D=w.func;if(D==null||D==l)return w.name}return c}function So(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||ch;return l=l===ch?$m:l,arguments.length?l(arguments[0],arguments[1]):l}function lu(l,c){var g=l.__data__;return Kx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function Gd(l){for(var c=Ln(l),g=c.length;g--;){var _=c[g],w=l[_];c[g]=[_,w,S_(w)]}return c}function Rs(l,c){var g=YL(l,c);return Hm(g)?g:t}function Wx(l){var c=Nt.call(l,ks),g=l[ks];try{l[ks]=t;var _=!0}catch{}var w=Wl.call(l);return _&&(c?l[ks]=g:delete l[ks]),w}var Yd=yd?function(l){return l==null?[]:(l=Wt(l),Jr(yd(l),function(c){return xm.call(l,c)}))}:fh,C_=yd?function(l){for(var c=[];l;)es(c,Yd(l)),l=$l(l);return c}:fh,On=Gn;(Sd&&On(new Sd(new ArrayBuffer(1)))!=bt||da&&On(new da)!=Kt||Ld&&On(Ld.resolve())!=Jn||vo&&On(new vo)!=Pt||ha&&On(new ha)!=Fe)&&(On=function(l){var c=Gn(l),g=c==Wn?l.constructor:t,_=g?Ps(g):"";if(_)switch(_){case wE:return bt;case yE:return Kt;case SE:return Jn;case LE:return Pt;case EE:return Fe}return c});function Vx(l,c,g){for(var _=-1,w=g.length;++_<w;){var D=g[_],P=D.size;switch(D.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=An(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function Hx(l){var c=l.match($e);return c?c[1].split(Re):[]}function w_(l,c,g){c=ss(c,l);for(var _=-1,w=c.length,D=!1;++_<w;){var P=vr(c[_]);if(!(D=l!=null&&g(l,P)))break;l=l[P]}return D||++_!=w?D:(w=l==null?0:l.length,!!w&&pu(w)&&Rr(P,w)&&(tt(l)||Fs(l)))}function $x(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function y_(l){return typeof l.constructor=="function"&&!wa(l)?Co($l(l)):{}}function zx(l,c,g){var _=l.constructor;switch(c){case at:return $d(l);case At:case Me:return new _(+l);case bt:return xx(l,g);case wi:case Vt:case Tt:case qt:case Gt:case Bt:case fr:case ei:case He:return r_(l,g);case Kt:return new _;case dn:case pn:return new _(l);case jn:return Dx(l);case Pt:return new _;case Ci:return Ix(l)}}function Ux(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function jx(l){return tt(l)||Fs(l)||!!(Dm&&l&&l[Dm])}function Rr(l,c){var g=typeof l;return c=c??q,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Yn(l,c,g){if(!tn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Rr(c,g.length):_=="string"&&c in g)?Xi(g[c],l):!1}function Zd(l,c){if(tt(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Ei(l)?!0:Ee.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Kx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Xd(l){var c=au(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=qd(g);return!!_&&l===_[0]}function qx(l){return!!Sm&&Sm in l}var Gx=Fl?Pr:gh;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_o;return l===g}function S_(l){return l===l&&!tn(l)}function L_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Yx(l){var c=fu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Zx(l,c){var g=l[1],_=c[1],w=g|_,D=w<(L|S|M),P=_==M&&g==E||_==M&&g==R&&l[7].length<=c[8]||_==(M|R)&&c[7].length<=c[8]&&g==E;if(!(D||P))return l;_&L&&(l[2]=c[2],w|=g&L?0:y);var H=c[3];if(H){var Z=l[3];l[3]=Z?o_(Z,H,c[4]):H,l[4]=Z?ts(l[3],h):c[4]}return H=c[5],H&&(Z=l[5],l[5]=Z?a_(Z,H,c[6]):H,l[6]=Z?ts(l[5],h):c[6]),H=c[7],H&&(l[7]=H),_&M&&(l[8]=l[8]==null?c[8]:An(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Xx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Qx(l){return Wl.call(l)}function E_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,w=-1,D=Cn(_.length-c,0),P=ee(D);++w<D;)P[w]=_[c+w];w=-1;for(var H=ee(c+1);++w<c;)H[w]=_[w];return H[c]=g(P),yi(l,this,H)}}function x_(l,c){return c.length<2?l:Ms(l,Fi(c,0,-1))}function Jx(l,c){for(var g=l.length,_=An(c.length,g),w=ai(l);_--;){var D=c[_];l[_]=Rr(D,g)?w[D]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var D_=T_(Zm),ya=gE||function(l,c){return xn.setTimeout(l,c)},Jd=T_(yx);function I_(l,c,g){var _=c+"";return Jd(l,Ux(_,eD(Hx(_),g)))}function T_(l){var c=0,g=0;return function(){var _=vE(),w=O-(_-g);if(g=_,w>0){if(++c>=T)return arguments[0]}else c=0;return l.apply(t,arguments)}}function uu(l,c){var g=-1,_=l.length,w=_-1;for(c=c===t?_:c;++g<c;){var D=Rd(g,w),P=l[D];l[D]=l[g],l[g]=P}return l.length=c,l}var k_=Yx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,w,D){c.push(w?D.replace(I,"$1"):_||g)}),c});function vr(l){if(typeof l=="string"||Ei(l))return l;var c=l+"";return c=="0"&&1/l==-U?"-0":c}function Ps(l){if(l!=null){try{return Bl.call(l)}catch{}try{return l+""}catch{}}return""}function eD(l,c){return Oi(be,function(g){var _="_."+g[0];c&g[1]&&!Ol(l,_)&&l.push(_)}),l.sort()}function N_(l){if(l instanceof mt)return l.clone();var c=new Ri(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function tD(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=Cn(st(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var w=0,D=0,P=ee(jl(_/c));w<_;)P[D++]=Fi(l,w,w+=c);return P}function nD(l){for(var c=-1,g=l==null?0:l.length,_=0,w=[];++c<g;){var D=l[c];D&&(w[_++]=D)}return w}function iD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return es(tt(g)?ai(g):[g],Dn(c,1))}var rD=ct(function(l,c){return hn(l)?ma(l,Dn(c,1,hn,!0)):[]}),sD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),We(g,2)):[]}),oD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),t,g):[]});function aD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),Fi(l,c<0?0:c,_)):[]}function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function uD(l,c){return l&&l.length?tu(l,We(c,3),!0,!0):[]}function cD(l,c){return l&&l.length?tu(l,We(c,3),!0):[]}function dD(l,c,g,_){var w=l==null?0:l.length;return w?(g&&typeof g!="number"&&Yn(l,c,g)&&(g=0,_=w),ix(l,c,g,_)):[]}function A_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:st(g);return w<0&&(w=Cn(_+w,0)),Ml(l,We(c,3),w)}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return g!==t&&(w=st(g),w=g<0?Cn(_+w,0):An(w,_-1)),Ml(l,We(c,3),w,!0)}function M_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function hD(l){var c=l==null?0:l.length;return c?Dn(l,U):[]}function fD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:st(c),Dn(l,c)):[]}function gD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var w=l[c];_[w[0]]=w[1]}return _}function R_(l){return l&&l.length?l[0]:t}function pD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:st(g);return w<0&&(w=Cn(_+w,0)),fo(l,c,w)}function mD(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var _D=ct(function(l){var c=Jt(l,Vd);return c.length&&c[0]===l[0]?kd(c):[]}),vD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?kd(g,We(c,2)):[]}),bD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?kd(g,t,c):[]});function CD(l,c){return l==null?"":mE.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function wD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_;return g!==t&&(w=st(g),w=w<0?Cn(_+w,0):An(w,_-1)),c===c?eE(l,c,w):Ml(l,pm,w,!0)}function yD(l,c){return l&&l.length?Km(l,st(c)):t}var SD=ct(P_);function P_(l,c){return l&&l.length&&c&&c.length?Md(l,c):l}function LD(l,c,g){return l&&l.length&&c&&c.length?Md(l,c,We(g,2)):l}function ED(l,c,g){return l&&l.length&&c&&c.length?Md(l,c,t,g):l}var xD=Mr(function(l,c){var g=l==null?0:l.length,_=xd(l,c);return Ym(l,Jt(c,function(w){return Rr(w,g)?+w:w}).sort(s_)),_});function DD(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,w=[],D=l.length;for(c=We(c,3);++_<D;){var P=l[_];c(P,_,l)&&(g.push(P),w.push(_))}return Ym(l,w),g}function eh(l){return l==null?l:CE.call(l)}function ID(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Yn(l,c,g)?(c=0,g=_):(c=c==null?0:st(c),g=g===t?_:st(g)),Fi(l,c,g)):[]}function TD(l,c){return eu(l,c)}function kD(l,c,g){return Fd(l,c,We(g,2))}function ND(l,c){var g=l==null?0:l.length;if(g){var _=eu(l,c);if(_<g&&Xi(l[_],c))return _}return-1}function AD(l,c){return eu(l,c,!0)}function OD(l,c,g){return Fd(l,c,We(g,2),!0)}function MD(l,c){var g=l==null?0:l.length;if(g){var _=eu(l,c,!0)-1;if(Xi(l[_],c))return _}return-1}function RD(l){return l&&l.length?Xm(l):[]}function PD(l,c){return l&&l.length?Xm(l,We(c,2)):[]}function FD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function BD(l,c,g){return l&&l.length?(c=g||c===t?1:st(c),Fi(l,0,c<0?0:c)):[]}function WD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function VD(l,c){return l&&l.length?tu(l,We(c,3),!1,!0):[]}function HD(l,c){return l&&l.length?tu(l,We(c,3)):[]}var $D=ct(function(l){return rs(Dn(l,1,hn,!0))}),zD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),rs(Dn(l,1,hn,!0),We(c,2))}),UD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,rs(Dn(l,1,hn,!0),t,c)});function jD(l){return l&&l.length?rs(l):[]}function KD(l,c){return l&&l.length?rs(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?rs(l,t,c):[]}function th(l){if(!(l&&l.length))return[];var c=0;return l=Jr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),vd(c,function(g){return Jt(l,pd(g))})}function F_(l,c){if(!(l&&l.length))return[];var g=th(l);return c==null?g:Jt(g,function(_){return yi(c,t,_)})}var GD=ct(function(l,c){return hn(l)?ma(l,c):[]}),YD=ct(function(l){return Wd(Jr(l,hn))}),ZD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),Wd(Jr(l,hn),We(c,2))}),XD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Wd(Jr(l,hn),t,c)}),QD=ct(th);function JD(l,c){return t_(l||[],c||[],pa)}function eI(l,c){return t_(l||[],c||[],ba)}var tI=ct(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,F_(l,g)});function B_(l){var c=x(l);return c.__chain__=!0,c}function nI(l,c){return c(l),l}function cu(l,c){return c(l)}var iI=Mr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,w=function(D){return xd(D,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Rr(g)?this.thru(w):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:cu,args:[w],thisArg:t}),new Ri(_,this.__chain__).thru(function(D){return c&&!D.length&&D.push(t),D}))});function rI(){return B_(this)}function sI(){return new Ri(this.value(),this.__chain__)}function oI(){this.__values__===t&&(this.__values__=Q_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function aI(){return this}function lI(l){for(var c,g=this;g instanceof Yl;){var _=N_(g);_.__index__=0,_.__values__=t,c?w.__wrapped__=_:c=_;var w=_;g=g.__wrapped__}return w.__wrapped__=l,c}function uI(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:cu,args:[eh],thisArg:t}),new Ri(c,this.__chain__)}return this.thru(eh)}function cI(){return e_(this.__wrapped__,this.__actions__)}var dI=nu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function hI(l,c,g){var _=tt(l)?fm:nx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}function fI(l,c){var g=tt(l)?Jr:Fm;return g(l,We(c,3))}var gI=d_(A_),pI=d_(O_);function mI(l,c){return Dn(du(l,c),1)}function _I(l,c){return Dn(du(l,c),U)}function vI(l,c,g){return g=g===t?1:st(g),Dn(du(l,c),g)}function W_(l,c){var g=tt(l)?Oi:is;return g(l,We(c,3))}function V_(l,c){var g=tt(l)?FL:Pm;return g(l,We(c,3))}var bI=nu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function CI(l,c,g,_){l=li(l)?l:Eo(l),g=g&&!_?st(g):0;var w=l.length;return g<0&&(g=Cn(w+g,0)),mu(l)?g<=w&&l.indexOf(c,g)>-1:!!w&&fo(l,c,g)>-1}var wI=ct(function(l,c,g){var _=-1,w=typeof c=="function",D=li(l)?ee(l.length):[];return is(l,function(P){D[++_]=w?yi(c,P,g):_a(P,c,g)}),D}),yI=nu(function(l,c,g){Ar(l,g,c)});function du(l,c){var g=tt(l)?Jt:zm;return g(l,We(c,3))}function SI(l,c,g,_){return l==null?[]:(tt(c)||(c=c==null?[]:[c]),g=_?t:g,tt(g)||(g=g==null?[]:[g]),qm(l,c,g))}var LI=nu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function EI(l,c,g){var _=tt(l)?fd:_m,w=arguments.length<3;return _(l,We(c,4),g,w,is)}function xI(l,c,g){var _=tt(l)?BL:_m,w=arguments.length<3;return _(l,We(c,4),g,w,Pm)}function DI(l,c){var g=tt(l)?Jr:Fm;return g(l,gu(We(c,3)))}function II(l){var c=tt(l)?Am:Cx;return c(l)}function TI(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=st(c);var _=tt(l)?XE:wx;return _(l,c)}function kI(l){var c=tt(l)?QE:Sx;return c(l)}function NI(l){if(l==null)return 0;if(li(l))return mu(l)?po(l):l.length;var c=On(l);return c==Kt||c==Pt?l.size:Ad(l).length}function AI(l,c,g){var _=tt(l)?gd:Lx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}var OI=ct(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Yn(l,c[0],c[1])?c=[]:g>2&&Yn(c[0],c[1],c[2])&&(c=[c[0]]),qm(l,Dn(c,1),[])}),hu=fE||function(){return xn.Date.now()};function MI(l,c){if(typeof c!="function")throw new Mi(o);return l=st(l),function(){if(--l<1)return c.apply(this,arguments)}}function H_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,M,t,t,t,t,c)}function $_(l,c){var g;if(typeof c!="function")throw new Mi(o);return l=st(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var nh=ct(function(l,c,g){var _=L;if(g.length){var w=ts(g,So(nh));_|=N}return Or(l,_,c,g,w)}),z_=ct(function(l,c,g){var _=L|S;if(g.length){var w=ts(g,So(z_));_|=N}return Or(c,_,l,g,w)});function U_(l,c,g){c=g?t:c;var _=Or(l,E,t,t,t,t,t,c);return _.placeholder=U_.placeholder,_}function j_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){var _,w,D,P,H,Z,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Mi(o);c=Wi(c)||0,tn(g)&&(ce=!!g.leading,ge="maxWait"in g,D=ge?Cn(Wi(g.maxWait)||0,c):D,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Qi=_,Br=w;return _=w=t,ue=fn,P=l.apply(Br,Qi),P}function ze(fn){return ue=fn,H=ya(ht,c),ce?Ne(fn):P}function lt(fn){var Qi=fn-Z,Br=fn-ue,dv=c-Qi;return ge?An(dv,D-Br):dv}function Ue(fn){var Qi=fn-Z,Br=fn-ue;return Z===t||Qi>=c||Qi<0||ge&&Br>=D}function ht(){var fn=hu();if(Ue(fn))return vt(fn);H=ya(ht,lt(fn))}function vt(fn){return H=t,Se&&_?Ne(fn):(_=w=t,P)}function xi(){H!==t&&n_(H),ue=0,_=Z=w=H=t}function Zn(){return H===t?P:vt(hu())}function Di(){var fn=hu(),Qi=Ue(fn);if(_=arguments,w=this,Z=fn,Qi){if(H===t)return ze(Z);if(ge)return n_(H),H=ya(ht,c),Ne(Z)}return H===t&&(H=ya(ht,c)),P}return Di.cancel=xi,Di.flush=Zn,Di}var RI=ct(function(l,c){return Rm(l,1,c)}),PI=ct(function(l,c,g){return Rm(l,Wi(c)||0,g)});function FI(l){return Or(l,Y)}function fu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Mi(o);var g=function(){var _=arguments,w=c?c.apply(this,_):_[0],D=g.cache;if(D.has(w))return D.get(w);var P=l.apply(this,_);return g.cache=D.set(w,P)||D,P};return g.cache=new(fu.Cache||Nr),g}fu.Cache=Nr;function gu(l){if(typeof l!="function")throw new Mi(o);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function BI(l){return $_(2,l)}var WI=Ex(function(l,c){c=c.length==1&&tt(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ct(function(_){for(var w=-1,D=An(_.length,g);++w<D;)_[w]=c[w].call(this,_[w]);return yi(l,this,_)})}),ih=ct(function(l,c){var g=ts(c,So(ih));return Or(l,N,t,c,g)}),q_=ct(function(l,c){var g=ts(c,So(q_));return Or(l,V,t,c,g)}),VI=Mr(function(l,c){return Or(l,R,t,t,t,c)});function HI(l,c){if(typeof l!="function")throw new Mi(o);return c=c===t?c:st(c),ct(l,c)}function $I(l,c){if(typeof l!="function")throw new Mi(o);return c=c==null?0:Cn(st(c),0),ct(function(g){var _=g[c],w=os(g,0,c);return _&&es(w,_),yi(l,this,w)})}function zI(l,c,g){var _=!0,w=!0;if(typeof l!="function")throw new Mi(o);return tn(g)&&(_="leading"in g?!!g.leading:_,w="trailing"in g?!!g.trailing:w),K_(l,c,{leading:_,maxWait:c,trailing:w})}function UI(l){return H_(l,1)}function jI(l,c){return ih(Hd(c),l)}function KI(){if(!arguments.length)return[];var l=arguments[0];return tt(l)?l:[l]}function qI(l){return Pi(l,m)}function GI(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function YI(l){return Pi(l,f|m)}function ZI(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function XI(l,c){return c==null||Mm(l,c,Ln(c))}function Xi(l,c){return l===c||l!==l&&c!==c}var QI=ou(Td),JI=ou(function(l,c){return l>=c}),Fs=Vm(function(){return arguments}())?Vm:function(l){return on(l)&&Nt.call(l,"callee")&&!xm.call(l,"callee")},tt=ee.isArray,eT=am?Si(am):lx;function li(l){return l!=null&&pu(l.length)&&!Pr(l)}function hn(l){return on(l)&&li(l)}function tT(l){return l===!0||l===!1||on(l)&&Gn(l)==At}var as=pE||gh,nT=lm?Si(lm):ux;function iT(l){return on(l)&&l.nodeType===1&&!Sa(l)}function rT(l){if(l==null)return!0;if(li(l)&&(tt(l)||typeof l=="string"||typeof l.splice=="function"||as(l)||Lo(l)||Fs(l)))return!l.length;var c=On(l);if(c==Kt||c==Pt)return!l.size;if(wa(l))return!Ad(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sT(l,c){return va(l,c)}function oT(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?va(l,c,t,g):!!_}function rh(l){if(!on(l))return!1;var c=Gn(l);return c==Ct||c==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Sa(l)}function aT(l){return typeof l=="number"&&Im(l)}function Pr(l){if(!tn(l))return!1;var c=Gn(l);return c==Xe||c==sn||c==rt||c==si}function G_(l){return typeof l=="number"&&l==st(l)}function pu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=q}function tn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function on(l){return l!=null&&typeof l=="object"}var Y_=um?Si(um):dx;function lT(l,c){return l===c||Nd(l,c,Gd(c))}function uT(l,c,g){return g=typeof g=="function"?g:t,Nd(l,c,Gd(c),g)}function cT(l){return Z_(l)&&l!=+l}function dT(l){if(Gx(l))throw new Qe(s);return Hm(l)}function hT(l){return l===null}function fT(l){return l==null}function Z_(l){return typeof l=="number"||on(l)&&Gn(l)==dn}function Sa(l){if(!on(l)||Gn(l)!=Wn)return!1;var c=$l(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Bl.call(g)==uE}var sh=cm?Si(cm):hx;function gT(l){return G_(l)&&l>=-q&&l<=q}var X_=dm?Si(dm):fx;function mu(l){return typeof l=="string"||!tt(l)&&on(l)&&Gn(l)==pn}function Ei(l){return typeof l=="symbol"||on(l)&&Gn(l)==Ci}var Lo=hm?Si(hm):gx;function pT(l){return l===t}function mT(l){return on(l)&&On(l)==Fe}function _T(l){return on(l)&&Gn(l)==pt}var vT=ou(Od),bT=ou(function(l,c){return l<=c});function Q_(l){if(!l)return[];if(li(l))return mu(l)?Yi(l):ai(l);if(ca&&l[ca])return XL(l[ca]());var c=On(l),g=c==Kt?Cd:c==Pt?Rl:Eo;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===U||l===-U){var c=l<0?-1:1;return c*z}return l===l?l:0}function st(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function J_(l){return l?Os(st(l),0,K):0}function Wi(l){if(typeof l=="number")return l;if(Ei(l))return k;if(tn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=tn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=vm(l);var g=me.test(l);return g||Ie.test(l)?ML(l.slice(2),g?2:8):ie.test(l)?k:+l}function ev(l){return _r(l,ui(l))}function CT(l){return l?Os(st(l),-q,q):l===0?l:0}function xt(l){return l==null?"":Li(l)}var wT=wo(function(l,c){if(wa(c)||li(c)){_r(c,Ln(c),l);return}for(var g in c)Nt.call(c,g)&&pa(l,g,c[g])}),tv=wo(function(l,c){_r(c,ui(c),l)}),_u=wo(function(l,c,g,_){_r(c,ui(c),l,_)}),yT=wo(function(l,c,g,_){_r(c,Ln(c),l,_)}),ST=Mr(xd);function LT(l,c){var g=Co(l);return c==null?g:Om(g,c)}var ET=ct(function(l,c){l=Wt(l);var g=-1,_=c.length,w=_>2?c[2]:t;for(w&&Yn(c[0],c[1],w)&&(_=1);++g<_;)for(var D=c[g],P=ui(D),H=-1,Z=P.length;++H<Z;){var ue=P[H],ce=l[ue];(ce===t||Xi(ce,_o[ue])&&!Nt.call(l,ue))&&(l[ue]=D[ue])}return l}),xT=ct(function(l){return l.push(t,v_),yi(nv,t,l)});function DT(l,c){return gm(l,We(c,3),mr)}function IT(l,c){return gm(l,We(c,3),Id)}function TT(l,c){return l==null?l:Dd(l,We(c,3),ui)}function kT(l,c){return l==null?l:Bm(l,We(c,3),ui)}function NT(l,c){return l&&mr(l,We(c,3))}function AT(l,c){return l&&Id(l,We(c,3))}function OT(l){return l==null?[]:Ql(l,Ln(l))}function MT(l){return l==null?[]:Ql(l,ui(l))}function oh(l,c,g){var _=l==null?t:Ms(l,c);return _===t?g:_}function RT(l,c){return l!=null&&w_(l,c,rx)}function ah(l,c){return l!=null&&w_(l,c,sx)}var PT=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Wl.call(c)),l[c]=g},uh(ci)),FT=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Wl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),BT=ct(_a);function Ln(l){return li(l)?Nm(l):Ad(l)}function ui(l){return li(l)?Nm(l,!0):px(l)}function WT(l,c){var g={};return c=We(c,3),mr(l,function(_,w,D){Ar(g,c(_,w,D),_)}),g}function VT(l,c){var g={};return c=We(c,3),mr(l,function(_,w,D){Ar(g,w,c(_,w,D))}),g}var HT=wo(function(l,c,g){Jl(l,c,g)}),nv=wo(function(l,c,g,_){Jl(l,c,g,_)}),$T=Mr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(D){return D=ss(D,l),_||(_=D.length>1),D}),_r(l,Kd(l),g),_&&(g=Pi(g,f|p|m,Px));for(var w=c.length;w--;)Bd(g,c[w]);return g});function zT(l,c){return iv(l,gu(We(c)))}var UT=Mr(function(l,c){return l==null?{}:_x(l,c)});function iv(l,c){if(l==null)return{};var g=Jt(Kd(l),function(_){return[_]});return c=We(c),Gm(l,g,function(_,w){return c(_,w[0])})}function jT(l,c,g){c=ss(c,l);var _=-1,w=c.length;for(w||(w=1,l=t);++_<w;){var D=l==null?t:l[vr(c[_])];D===t&&(_=w,D=g),l=Pr(D)?D.call(l):D}return l}function KT(l,c,g){return l==null?l:ba(l,c,g)}function qT(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:ba(l,c,g,_)}var rv=m_(Ln),sv=m_(ui);function GT(l,c,g){var _=tt(l),w=_||as(l)||Lo(l);if(c=We(c,4),g==null){var D=l&&l.constructor;w?g=_?new D:[]:tn(l)?g=Pr(D)?Co($l(l)):{}:g={}}return(w?Oi:mr)(l,function(P,H,Z){return c(g,P,H,Z)}),g}function YT(l,c){return l==null?!0:Bd(l,c)}function ZT(l,c,g){return l==null?l:Jm(l,c,Hd(g))}function XT(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Jm(l,c,Hd(g),_)}function Eo(l){return l==null?[]:bd(l,Ln(l))}function QT(l){return l==null?[]:bd(l,ui(l))}function JT(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Os(Wi(l),c,g)}function ek(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ox(l,c,g)}function tk(l,c,g){if(g&&typeof g!="boolean"&&Yn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var w=Tm();return An(l+w*(c-l+OL("1e-"+((w+"").length-1))),c)}return Rd(l,c)}var nk=yo(function(l,c,g){return c=c.toLowerCase(),l+(g?ov(c):c)});function ov(l){return lh(xt(l).toLowerCase())}function av(l){return l=xt(l),l&&l.replace(Ze,KL).replace(SL,"")}function ik(l,c,g){l=xt(l),c=Li(c);var _=l.length;g=g===t?_:Os(st(g),0,_);var w=g;return g-=c.length,g>=0&&l.slice(g,w)==c}function rk(l){return l=xt(l),l&&sl.test(l)?l.replace(vn,qL):l}function sk(l){return l=xt(l),l&&ae.test(l)?l.replace(oe,"\\$&"):l}var ok=yo(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),ak=yo(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),lk=c_("toLowerCase");function uk(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;if(!c||_>=c)return l;var w=(c-_)/2;return su(Kl(w),g)+l+su(jl(w),g)}function ck(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;return c&&_<c?l+su(c-_,g):l}function dk(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;return c&&_<c?su(c-_,g)+l:l}function hk(l,c,g){return g||c==null?c=0:c&&(c=+c),bE(xt(l).replace(pe,""),c||0)}function fk(l,c,g){return(g?Yn(l,c,g):c===t)?c=1:c=st(c),Pd(xt(l),c)}function gk(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var pk=yo(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function mk(l,c,g){return g&&typeof g!="number"&&Yn(l,c,g)&&(c=g=t),g=g===t?K:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!sh(c))&&(c=Li(c),!c&&go(l))?os(Yi(l),0,g):l.split(c,g)):[]}var _k=yo(function(l,c,g){return l+(g?" ":"")+lh(c)});function vk(l,c,g){return l=xt(l),g=g==null?0:Os(st(g),0,l.length),c=Li(c),l.slice(g,g+c.length)==c}function bk(l,c,g){var _=x.templateSettings;g&&Yn(l,c,g)&&(c=t),l=xt(l),c=_u({},c,_,__);var w=_u({},c.imports,_.imports,__),D=Ln(w),P=bd(w,D),H,Z,ue=0,ce=c.interpolate||ot,ge="__p += '",Se=wd((c.escape||ot).source+"|"+ce.source+"|"+(ce===no?F:ot).source+"|"+(c.evaluate||ot).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++IL+"]")+`
`;l.replace(Se,function(Ue,ht,vt,xi,Zn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(kt,GL),ht&&(H=!0,ge+=`' +
__e(`+ht+`) +
'`),Zn&&(Z=!0,ge+=`';
`+Zn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+Ue.length,Ue}),ge+=`';
`;var ze=Nt.call(c,"variable")&&c.variable;if(!ze)ge=`with (obj) {
`+ge+`
}
`;else if(Yt.test(ze))throw new Qe(a);ge=(Z?ge.replace(Fa,""):ge).replace(Vn,"$1").replace(ti,"$1;"),ge="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=uv(function(){return St(D,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,rh(lt))throw lt;return lt}function Ck(l){return xt(l).toLowerCase()}function wk(l){return xt(l).toUpperCase()}function yk(l,c,g){if(l=xt(l),l&&(g||c===t))return vm(l);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Yi(c),D=bm(_,w),P=Cm(_,w)+1;return os(_,D,P).join("")}function Sk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,ym(l)+1);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Cm(_,Yi(c))+1;return os(_,0,w).join("")}function Lk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Li(c)))return l;var _=Yi(l),w=bm(_,Yi(c));return os(_,w).join("")}function Ek(l,c){var g=X,_=$;if(tn(c)){var w="separator"in c?c.separator:w;g="length"in c?st(c.length):g,_="omission"in c?Li(c.omission):_}l=xt(l);var D=l.length;if(go(l)){var P=Yi(l);D=P.length}if(g>=D)return l;var H=g-po(_);if(H<1)return _;var Z=P?os(P,0,H).join(""):l.slice(0,H);if(w===t)return Z+_;if(P&&(H+=Z.length-H),sh(w)){if(l.slice(H).search(w)){var ue,ce=Z;for(w.global||(w=wd(w.source,xt(te.exec(w))+"g")),w.lastIndex=0;ue=w.exec(ce);)var ge=ue.index;Z=Z.slice(0,ge===t?H:ge)}}else if(l.indexOf(Li(w),H)!=H){var Se=Z.lastIndexOf(w);Se>-1&&(Z=Z.slice(0,Se))}return Z+_}function xk(l){return l=xt(l),l&&ir.test(l)?l.replace(Go,tE):l}var Dk=yo(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),lh=c_("toUpperCase");function lv(l,c,g){return l=xt(l),c=g?t:c,c===t?ZL(l)?rE(l):HL(l):l.match(c)||[]}var uv=ct(function(l,c){try{return yi(l,t,c)}catch(g){return rh(g)?g:new Qe(g)}}),Ik=Mr(function(l,c){return Oi(c,function(g){g=vr(g),Ar(l,g,nh(l[g],l))}),l});function Tk(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Mi(o);return[g(_[0]),_[1]]}):[],ct(function(_){for(var w=-1;++w<c;){var D=l[w];if(yi(D[0],this,_))return yi(D[1],this,_)}})}function kk(l){return tx(Pi(l,f))}function uh(l){return function(){return l}}function Nk(l,c){return l==null||l!==l?c:l}var Ak=h_(),Ok=h_(!0);function ci(l){return l}function ch(l){return $m(typeof l=="function"?l:Pi(l,f))}function Mk(l){return Um(Pi(l,f))}function Rk(l,c){return jm(l,Pi(c,f))}var Pk=ct(function(l,c){return function(g){return _a(g,l,c)}}),Fk=ct(function(l,c){return function(g){return _a(l,g,c)}});function dh(l,c,g){var _=Ln(c),w=Ql(c,_);g==null&&!(tn(c)&&(w.length||!_.length))&&(g=c,c=l,l=this,w=Ql(c,Ln(c)));var D=!(tn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(w,function(H){var Z=c[H];l[H]=Z,P&&(l.prototype[H]=function(){var ue=this.__chain__;if(D||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:Z,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Z.apply(l,es([this.value()],arguments))})}),l}function Bk(){return xn._===this&&(xn._=cE),this}function hh(){}function Wk(l){return l=st(l),ct(function(c){return Km(c,l)})}var Vk=zd(Jt),Hk=zd(fm),$k=zd(gd);function cv(l){return Zd(l)?pd(vr(l)):vx(l)}function zk(l){return function(c){return l==null?t:Ms(l,c)}}var Uk=g_(),jk=g_(!0);function fh(){return[]}function gh(){return!1}function Kk(){return{}}function qk(){return""}function Gk(){return!0}function Yk(l,c){if(l=st(l),l<1||l>q)return[];var g=K,_=An(l,K);c=We(c),l-=K;for(var w=vd(_,c);++g<l;)c(g);return w}function Zk(l){return tt(l)?Jt(l,vr):Ei(l)?[l]:ai(k_(xt(l)))}function Xk(l){var c=++lE;return xt(l)+c}var Qk=ru(function(l,c){return l+c},0),Jk=Ud("ceil"),eN=ru(function(l,c){return l/c},1),tN=Ud("floor");function nN(l){return l&&l.length?Xl(l,ci,Td):t}function iN(l,c){return l&&l.length?Xl(l,We(c,2),Td):t}function rN(l){return mm(l,ci)}function sN(l,c){return mm(l,We(c,2))}function oN(l){return l&&l.length?Xl(l,ci,Od):t}function aN(l,c){return l&&l.length?Xl(l,We(c,2),Od):t}var lN=ru(function(l,c){return l*c},1),uN=Ud("round"),cN=ru(function(l,c){return l-c},0);function dN(l){return l&&l.length?_d(l,ci):0}function hN(l,c){return l&&l.length?_d(l,We(c,2)):0}return x.after=MI,x.ary=H_,x.assign=wT,x.assignIn=tv,x.assignInWith=_u,x.assignWith=yT,x.at=ST,x.before=$_,x.bind=nh,x.bindAll=Ik,x.bindKey=z_,x.castArray=KI,x.chain=B_,x.chunk=tD,x.compact=nD,x.concat=iD,x.cond=Tk,x.conforms=kk,x.constant=uh,x.countBy=dI,x.create=LT,x.curry=U_,x.curryRight=j_,x.debounce=K_,x.defaults=ET,x.defaultsDeep=xT,x.defer=RI,x.delay=PI,x.difference=rD,x.differenceBy=sD,x.differenceWith=oD,x.drop=aD,x.dropRight=lD,x.dropRightWhile=uD,x.dropWhile=cD,x.fill=dD,x.filter=fI,x.flatMap=mI,x.flatMapDeep=_I,x.flatMapDepth=vI,x.flatten=M_,x.flattenDeep=hD,x.flattenDepth=fD,x.flip=FI,x.flow=Ak,x.flowRight=Ok,x.fromPairs=gD,x.functions=OT,x.functionsIn=MT,x.groupBy=bI,x.initial=mD,x.intersection=_D,x.intersectionBy=vD,x.intersectionWith=bD,x.invert=PT,x.invertBy=FT,x.invokeMap=wI,x.iteratee=ch,x.keyBy=yI,x.keys=Ln,x.keysIn=ui,x.map=du,x.mapKeys=WT,x.mapValues=VT,x.matches=Mk,x.matchesProperty=Rk,x.memoize=fu,x.merge=HT,x.mergeWith=nv,x.method=Pk,x.methodOf=Fk,x.mixin=dh,x.negate=gu,x.nthArg=Wk,x.omit=$T,x.omitBy=zT,x.once=BI,x.orderBy=SI,x.over=Vk,x.overArgs=WI,x.overEvery=Hk,x.overSome=$k,x.partial=ih,x.partialRight=q_,x.partition=LI,x.pick=UT,x.pickBy=iv,x.property=cv,x.propertyOf=zk,x.pull=SD,x.pullAll=P_,x.pullAllBy=LD,x.pullAllWith=ED,x.pullAt=xD,x.range=Uk,x.rangeRight=jk,x.rearg=VI,x.reject=DI,x.remove=DD,x.rest=HI,x.reverse=eh,x.sampleSize=TI,x.set=KT,x.setWith=qT,x.shuffle=kI,x.slice=ID,x.sortBy=OI,x.sortedUniq=RD,x.sortedUniqBy=PD,x.split=mk,x.spread=$I,x.tail=FD,x.take=BD,x.takeRight=WD,x.takeRightWhile=VD,x.takeWhile=HD,x.tap=nI,x.throttle=zI,x.thru=cu,x.toArray=Q_,x.toPairs=rv,x.toPairsIn=sv,x.toPath=Zk,x.toPlainObject=ev,x.transform=GT,x.unary=UI,x.union=$D,x.unionBy=zD,x.unionWith=UD,x.uniq=jD,x.uniqBy=KD,x.uniqWith=qD,x.unset=YT,x.unzip=th,x.unzipWith=F_,x.update=ZT,x.updateWith=XT,x.values=Eo,x.valuesIn=QT,x.without=GD,x.words=lv,x.wrap=jI,x.xor=YD,x.xorBy=ZD,x.xorWith=XD,x.zip=QD,x.zipObject=JD,x.zipObjectDeep=eI,x.zipWith=tI,x.entries=rv,x.entriesIn=sv,x.extend=tv,x.extendWith=_u,dh(x,x),x.add=Qk,x.attempt=uv,x.camelCase=nk,x.capitalize=ov,x.ceil=Jk,x.clamp=JT,x.clone=qI,x.cloneDeep=YI,x.cloneDeepWith=ZI,x.cloneWith=GI,x.conformsTo=XI,x.deburr=av,x.defaultTo=Nk,x.divide=eN,x.endsWith=ik,x.eq=Xi,x.escape=rk,x.escapeRegExp=sk,x.every=hI,x.find=gI,x.findIndex=A_,x.findKey=DT,x.findLast=pI,x.findLastIndex=O_,x.findLastKey=IT,x.floor=tN,x.forEach=W_,x.forEachRight=V_,x.forIn=TT,x.forInRight=kT,x.forOwn=NT,x.forOwnRight=AT,x.get=oh,x.gt=QI,x.gte=JI,x.has=RT,x.hasIn=ah,x.head=R_,x.identity=ci,x.includes=CI,x.indexOf=pD,x.inRange=ek,x.invoke=BT,x.isArguments=Fs,x.isArray=tt,x.isArrayBuffer=eT,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=tT,x.isBuffer=as,x.isDate=nT,x.isElement=iT,x.isEmpty=rT,x.isEqual=sT,x.isEqualWith=oT,x.isError=rh,x.isFinite=aT,x.isFunction=Pr,x.isInteger=G_,x.isLength=pu,x.isMap=Y_,x.isMatch=lT,x.isMatchWith=uT,x.isNaN=cT,x.isNative=dT,x.isNil=fT,x.isNull=hT,x.isNumber=Z_,x.isObject=tn,x.isObjectLike=on,x.isPlainObject=Sa,x.isRegExp=sh,x.isSafeInteger=gT,x.isSet=X_,x.isString=mu,x.isSymbol=Ei,x.isTypedArray=Lo,x.isUndefined=pT,x.isWeakMap=mT,x.isWeakSet=_T,x.join=CD,x.kebabCase=ok,x.last=Bi,x.lastIndexOf=wD,x.lowerCase=ak,x.lowerFirst=lk,x.lt=vT,x.lte=bT,x.max=nN,x.maxBy=iN,x.mean=rN,x.meanBy=sN,x.min=oN,x.minBy=aN,x.stubArray=fh,x.stubFalse=gh,x.stubObject=Kk,x.stubString=qk,x.stubTrue=Gk,x.multiply=lN,x.nth=yD,x.noConflict=Bk,x.noop=hh,x.now=hu,x.pad=uk,x.padEnd=ck,x.padStart=dk,x.parseInt=hk,x.random=tk,x.reduce=EI,x.reduceRight=xI,x.repeat=fk,x.replace=gk,x.result=jT,x.round=uN,x.runInContext=G,x.sample=II,x.size=NI,x.snakeCase=pk,x.some=AI,x.sortedIndex=TD,x.sortedIndexBy=kD,x.sortedIndexOf=ND,x.sortedLastIndex=AD,x.sortedLastIndexBy=OD,x.sortedLastIndexOf=MD,x.startCase=_k,x.startsWith=vk,x.subtract=cN,x.sum=dN,x.sumBy=hN,x.template=bk,x.times=Yk,x.toFinite=Fr,x.toInteger=st,x.toLength=J_,x.toLower=Ck,x.toNumber=Wi,x.toSafeInteger=CT,x.toString=xt,x.toUpper=wk,x.trim=yk,x.trimEnd=Sk,x.trimStart=Lk,x.truncate=Ek,x.unescape=xk,x.uniqueId=Xk,x.upperCase=Dk,x.upperFirst=lh,x.each=W_,x.eachRight=V_,x.first=R_,dh(x,function(){var l={};return mr(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(st(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=An(g,_.__takeCount__):_.__views__.push({size:An(g,K),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==B||g==j;mt.prototype[l]=function(w){var D=this.clone();return D.__iteratees__.push({iteratee:We(w,3),type:g}),D.__filtered__=D.__filtered__||_,D}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ct(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return _a(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(gu(We(l)))},mt.prototype.slice=function(l,c){l=st(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=st(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(K)},mr(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),w=x[_?"take"+(c=="last"?"Right":""):c],D=_||/^find/.test(c);w&&(x.prototype[c]=function(){var P=this.__wrapped__,H=_?[1]:arguments,Z=P instanceof mt,ue=H[0],ce=Z||tt(P),ge=function(ht){var vt=w.apply(x,es([ht],H));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(Z=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,ze=D&&!Se,lt=Z&&!Ne;if(!D&&ce){P=lt?P:new mt(this);var Ue=l.apply(P,H);return Ue.__actions__.push({func:cu,args:[ge],thisArg:t}),new Ri(Ue,Se)}return ze&&lt?l.apply(this,H):(Ue=this.thru(ge),ze?_?Ue.value()[0]:Ue.value():Ue)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Pl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var D=this.value();return c.apply(tt(D)?D:[],w)}return this[g](function(P){return c.apply(tt(P)?P:[],w)})}}),mr(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bo,_)||(bo[_]=[]),bo[_].push({name:c,func:g})}}),bo[iu(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=xE,mt.prototype.reverse=DE,mt.prototype.value=IE,x.prototype.at=iI,x.prototype.chain=rI,x.prototype.commit=sI,x.prototype.next=oI,x.prototype.plant=lI,x.prototype.reverse=uI,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=cI,x.prototype.first=x.prototype.head,ca&&(x.prototype[ca]=aI),x},mo=sE();Ts?((Ts.exports=mo)._=mo,cd._=mo):xn._=mo}).call(hw)}),_h={browserCheck:function(){var e={};if(_h.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge?\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox||e.edge)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=e,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1024;)t=Number((t/1024).toFixed(2)),r++;return"".concat(t," ").concat(n[r])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){var n=t;n||(n=window.location.href);var r=e.replace(/[\[\]]/g,"\\$&"),s=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),o=s.exec(n);if(!o)return null;if(!o[2])return"";var a=decodeURIComponent(o[2].replace(/\+/g," "));if(a==="null")return null;if(a!=="undefined")return a},generateFullUrlPath:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new URLSearchParams(t),r=n.toString();return e+(r?"?".concat(r):"")},getQueryParameters:function(e){var t=new URLSearchParams(e),n=Object.fromEntries(t.entries());for(var r in n)n[r]==="null"&&(n[r]=null),n[r]==="undefined"&&(n[r]=void 0);return n},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){var n=e;if(!n||n===1/0)return"0%";n>1&&(n=1);var r=t||2;return r=Math.pow(10,r),Math.round(n*r*100)/r+"%"},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){var t=e;if(t==null||t==="")return"0";t="".concat(e);var n=t.split("."),r=HX(n,2),s=r[0],o=r[1];return"".concat(s.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(o?".".concat(o):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),r=JSON.stringify(n,null,t||2);return r}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.sort(function(s,o){for(var a=0,u=0,d=n;u<d.length;u++){var h=d[u];if(a=h(s,o),a!==0)return a}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){var t=_h.trim(e);return t.charAt(0)==="{"&&t.charAt(t.length-1)==="}"||t.charAt(0)==="["&&t.charAt(t.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVXYZ";function s(d){var h=Math.random()*(d.length-1);return d.charAt(h)}for(var o="num",a="",u=0;u<e;u++)o==="num"?(a+=s(t),o="lower"):o==="lower"?(a+=s(n),o="upper"):o==="upper"&&(a+=s(r),o="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!_h.isEqual(this.state,n)||!_h.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||r>=65376&&r<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,r=[],s=0;s*t<n;)r.push(e.slice(s*t,(s+1)*t)),s++;return r},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!_h.isObj(e)))return Object.entries(e).forEach(function(t){var n=HX(t,2),r=n[0],s=n[1];s&&_h.isObj(s)?_h.removeEmpty(s):_h.isEmpty(s)&&delete e[r]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!Q7.isPlainObject(e)||!Q7.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var r=Cbe({},e);return Q7.forEach(t,function(s,o){o in e?r[o]=_h.mergeDeep(e[o],s):r[o]=s}),r},downLoadData:function(e){var t=e.url,n=e.payload,r=e.finallyCallback,s=e.successCallback,o=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return o(a);var u=a.headers.get("Content-type")||"";if(u.includes("application/json"))return o(a);var d=e.fileName;if(!d){var h=a.headers.get("Content-disposition")||"";d=h.split("filename=")[1]}a.blob().then(function(f){var p=URL.createObjectURL(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",decodeURIComponent(d||"")),m.click(),URL.revokeObjectURL(p),s&&s(a)})}).finally(function(){r&&r()})},isUtf8:function(e){var t=["","","","","",""];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,r;t="";var s=e.length||0;for(n=0;n<s;n++)r=e.charCodeAt(n),r>=1&&r<=127?t+=e.charAt(n):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}},xbe={getCookie:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.cookie,n=t.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));if(n!=null)try{return unescape(decodeURI(n[2]))}catch{return n[2]}return null},getAllCookies:function(){var e={};try{document.cookie.split("; ").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]})}catch{throw new Error("CookieCookie")}return e},deleteCookie:function(e,t,n){var r=new Date(0),s=t?"; domain=".concat(t):"",o=n||"/";document.cookie=e+"=; expires="+r.toUTCString()+s+"; path="+o},deleteAllCookies:function(e,t){for(var n=document.cookie.split(";"),r=0;r<n.length;r++)n[r]&&this.deleteCookie(n[r].split("=")[0],e,t)},setCookie:function(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"/",o="";if(n){var a=new Date;a.setTime(a.getTime()+n*24*60*60*1e3),o="; expires="+a.toUTCString()}var u="";r&&(u="; domain="+r),document.cookie=e+"="+t+o+u+"; path="+s}},zC=rae(function(i,e){(function(t,n){i.exports=n()})(hw,function(){var t=1e3,n=6e4,r=36e5,s="millisecond",o="second",a="minute",u="hour",d="day",h="week",f="month",p="quarter",m="year",v="date",b="Invalid Date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(O,B,W){var j=String(O);return!j||j.length>=B?O:""+Array(B+1-j.length).join(W)+O},A={s:E,z:function(O){var B=-O.utcOffset(),W=Math.abs(B),j=Math.floor(W/60),U=W%60;return(B<=0?"+":"-")+E(j,2,"0")+":"+E(U,2,"0")},m:function O(B,W){if(B.date()<W.date())return-O(W,B);var j=12*(W.year()-B.year())+(W.month()-B.month()),U=B.clone().add(j,f),q=W-U<0,z=B.clone().add(j+(q?-1:1),f);return+(-(j+(W-U)/(q?U-z:z-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:m,w:h,d,D:v,h:u,m:a,s:o,ms:s,Q:p}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},N="en",V={};V[N]=y;var M=function(O){return O instanceof $},R=function O(B,W,j){var U;if(!B)return N;if(typeof B=="string"){var q=B.toLowerCase();V[q]&&(U=q),W&&(V[q]=W,U=q);var z=B.split("-");if(!U&&z.length>1)return O(z[0])}else{var k=B.name;V[k]=B,U=k}return!j&&U&&(N=U),U||!j&&N},Y=function(O,B){if(M(O))return O.clone();var W=typeof B=="object"?B:{};return W.date=O,W.args=arguments,new $(W)},X=A;X.l=R,X.i=M,X.w=function(O,B){return Y(O,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var $=function(){function O(W){this.$L=R(W.locale,null,!0),this.parse(W)}var B=O.prototype;return B.parse=function(W){this.$d=function(j){var U=j.date,q=j.utc;if(U===null)return new Date(NaN);if(X.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var z=U.match(L);if(z){var k=z[2]-1||0,K=(z[7]||"0").substring(0,3);return q?new Date(Date.UTC(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)):new Date(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)}}return new Date(U)}(W),this.$x=W.x||{},this.init()},B.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},B.$utils=function(){return X},B.isValid=function(){return this.$d.toString()!==b},B.isSame=function(W,j){var U=Y(W);return this.startOf(j)<=U&&U<=this.endOf(j)},B.isAfter=function(W,j){return Y(W)<this.startOf(j)},B.isBefore=function(W,j){return this.endOf(j)<Y(W)},B.$g=function(W,j,U){return X.u(W)?this[j]:this.set(U,W)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(W,j){var U=this,q=!!X.u(j)||j,z=X.p(W),k=function(At,Me){var ut=X.w(U.$u?Date.UTC(U.$y,Me,At):new Date(U.$y,Me,At),U);return q?ut:ut.endOf(d)},K=function(At,Me){return X.w(U.toDate()[At].apply(U.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(Me)),U)},fe=this.$W,ne=this.$M,be=this.$D,De="set"+(this.$u?"UTC":"");switch(z){case m:return q?k(1,0):k(31,11);case f:return q?k(1,ne):k(0,ne+1);case h:var Ve=this.$locale().weekStart||0,rt=(fe<Ve?fe+7:fe)-Ve;return k(q?be-rt:be+(6-rt),ne);case d:case v:return K(De+"Hours",0);case u:return K(De+"Minutes",1);case a:return K(De+"Seconds",2);case o:return K(De+"Milliseconds",3);default:return this.clone()}},B.endOf=function(W){return this.startOf(W,!1)},B.$set=function(W,j){var U,q=X.p(W),z="set"+(this.$u?"UTC":""),k=(U={},U[d]=z+"Date",U[v]=z+"Date",U[f]=z+"Month",U[m]=z+"FullYear",U[u]=z+"Hours",U[a]=z+"Minutes",U[o]=z+"Seconds",U[s]=z+"Milliseconds",U)[q],K=q===d?this.$D+(j-this.$W):j;if(q===f||q===m){var fe=this.clone().set(v,1);fe.$d[k](K),fe.init(),this.$d=fe.set(v,Math.min(this.$D,fe.daysInMonth())).$d}else k&&this.$d[k](K);return this.init(),this},B.set=function(W,j){return this.clone().$set(W,j)},B.get=function(W){return this[X.p(W)]()},B.add=function(W,j){var U,q=this;W=Number(W);var z=X.p(j),k=function(ne){var be=Y(q);return X.w(be.date(be.date()+Math.round(ne*W)),q)};if(z===f)return this.set(f,this.$M+W);if(z===m)return this.set(m,this.$y+W);if(z===d)return k(1);if(z===h)return k(7);var K=(U={},U[a]=n,U[u]=r,U[o]=t,U)[z]||1,fe=this.$d.getTime()+W*K;return X.w(fe,this)},B.subtract=function(W,j){return this.add(-1*W,j)},B.format=function(W){var j=this,U=this.$locale();if(!this.isValid())return U.invalidDate||b;var q=W||"YYYY-MM-DDTHH:mm:ssZ",z=X.z(this),k=this.$H,K=this.$m,fe=this.$M,ne=U.weekdays,be=U.months,De=function(Me,ut,Ct,Xe){return Me&&(Me[ut]||Me(j,q))||Ct[ut].slice(0,Xe)},Ve=function(Me){return X.s(k%12||12,Me,"0")},rt=U.meridiem||function(Me,ut,Ct){var Xe=Me<12?"AM":"PM";return Ct?Xe.toLowerCase():Xe},At={YY:String(this.$y).slice(-2),YYYY:this.$y,M:fe+1,MM:X.s(fe+1,2,"0"),MMM:De(U.monthsShort,fe,be,3),MMMM:De(be,fe),D:this.$D,DD:X.s(this.$D,2,"0"),d:String(this.$W),dd:De(U.weekdaysMin,this.$W,ne,2),ddd:De(U.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(k),HH:X.s(k,2,"0"),h:Ve(1),hh:Ve(2),a:rt(k,K,!0),A:rt(k,K,!1),m:String(K),mm:X.s(K,2,"0"),s:String(this.$s),ss:X.s(this.$s,2,"0"),SSS:X.s(this.$ms,3,"0"),Z:z};return q.replace(S,function(Me,ut){return ut||At[Me]||z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(W,j,U){var q,z=X.p(j),k=Y(W),K=(k.utcOffset()-this.utcOffset())*n,fe=this-k,ne=X.m(this,k);return ne=(q={},q[m]=ne/12,q[f]=ne,q[p]=ne/3,q[h]=(fe-K)/6048e5,q[d]=(fe-K)/864e5,q[u]=fe/r,q[a]=fe/n,q[o]=fe/t,q)[z]||fe,U?ne:X.a(ne)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return V[this.$L]},B.locale=function(W,j){if(!W)return this.$L;var U=this.clone(),q=R(W,j,!0);return q&&(U.$L=q),U},B.clone=function(){return X.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},O}(),T=$.prototype;return Y.prototype=T,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",d],["$M",f],["$y",m],["$D",v]].forEach(function(O){T[O[1]]=function(B){return this.$g(B,O[0],O[1])}}),Y.extend=function(O,B){return O.$i||(O(B,$,Y),O.$i=!0),Y},Y.locale=R,Y.isDayjs=M,Y.unix=function(O){return Y(1e3*O)},Y.en=V[N],Y.Ls=V,Y.p={},Y})}),Dbe={formatDateTime:function(e){return zC(e).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(e){return zC(e).format("YYYY-MM-DD")},formatDateHours:function(e){return zC(e).format("YYYY-MM-DD HH:mm")},formatDayHours:function(e){return zC(e).format("MM-DD HH:mm")},formatHours:function(e){return zC(e).format("HH:mm")},formatMinute:function(e){return zC(e).format("HH:mm:ss")},formatSecond:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=0,n=0,r=0;function s(u){return r=Math.floor(u/3600),u-r*3600}function o(u){return n=Math.floor(u/60),u-n*60}function a(u){return t=u,t}return a(o(s(e))),"".concat(r?r+"h":"").concat(n?n+"m":"").concat(t?t+"s":"")||"0s"}},Ibe={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},Tbe=function(){function i(){nae(this,i),this.fakeHandler=null}return iae(i,[{key:"copy",value:function(t,n){var r=this;this.removeFake(),this.fakeHandlerCallback=function(){return r.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px";var s=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top="".concat(s,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=t,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText(n)}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"copyText",value:function(t){var n;try{n=document.execCommand("copy")}catch{n=!1}t&&t(n)}}]),i}(),kbe=function(){function i(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;nae(this,i),"indexedDB"in window?(this._storeName=n,this._version=t,this._database=e,this._openLog=r):console.log("This browser doesn't support IndexedDB")}return iae(i,[{key:"open",value:function(){var t=this;return new Promise(function(n,r){try{var s=t;if(s._db)return n(s._db);var o=indexedDB.open(s._database,s._version);o.onsuccess=function(){s._db=o.result,s._db.onversionchange=function(a){console.log("onversionchange",a)},n(o.result),console.log("Open indexedDB success!")},o.onupgradeneeded=function(a){console.log("openDb.onupgradeneeded",a),s._db=o.result,s._db.objectStoreNames.contains(s._storeName)||s._db.createObjectStore(s._storeName),n(o.result)},o.onblocked=function(a){console.log("openDb onblocked",a)},o.onerror=function(a){console.log("Maybe you not allow my web app to use IndexedDB!"),r(a)}}catch(a){console.error(a),r(a)}})}},{key:"getObjectStore",value:function(t,n){if(this._db){var r=this._db.transaction([t],n);return r.objectStore(t)}return null}},{key:"add",value:function(t,n){return this.wrapStoreOperationPromise(function(r){return r.add(t,n)})}},{key:"set",value:function(t,n){return this.log("IndexedDB set",t,n),this.wrapStoreOperationPromise(function(r){return r.put(n,t)})}},{key:"get",value:function(t){return this.log("IndexedDB get",t),this.wrapStoreOperationPromise(function(n){return n.get(t)})}},{key:"delete",value:function(t){return this.wrapStoreOperationPromise(function(n){return n.delete(t)})}},{key:"clear",value:function(){return this.wrapStoreOperationPromise(function(t){return t.clear()})}},{key:"getStore",value:function(){return this.getObjectStore(this._storeName,"readwrite")}},{key:"wrapStoreOperationPromise",value:function(t){var n=this;return new Promise(function(r,s){try{var o=n.getObjectStore(n._storeName,"readwrite");if(o){var a=t(o);a.onsuccess=function(u){return r(u.target.result)},a.onerror=function(u){return s(u)}}}catch(u){console.error(u),s(u)}})}},{key:"log",value:function(){if(this._openLog){var t;(t=console).log.apply(t,arguments)}}}]),i}(),Nbe={set:function(e,t){if(t==null)delete window.localStorage[e];else{var n=FV(t)==="object"?JSON.stringify(t):t;window.localStorage[e]=n}},get:function(e){var t=window.localStorage[e]||"";try{return _h.isJSONStr(t)?JSON.parse(t):t}catch{return t}},remove:function(e){delete window.localStorage[e]},clear:function(){window.localStorage.clear()}};V0.Cookie=xbe;V0.CopyUtils=Tbe;V0.DateTime=Dbe;V0.Layout=Ibe;V0.LocalDB=Nbe;V0.LocalIndexedDB=kbe;var sae=V0.Utils=_h;const j5="mo";function Bn(i,e=j5){return i?`${e}-${i}`:""}function mn(...i){if(wr.isEmpty(i))return;const e=[];for(const t of i){if(!t)continue;const n=typeof t;if(n==="string"||n==="number"){e.push(`${t}`);continue}if(n==="object"){if(t.toString!==Object.prototype.toString){e.push(t.toString());continue}for(const r in t)Object.hasOwnProperty.call(t,r)&&t[r]&&e.push(r)}}return e.join(" ")}function gt(i,e){return`${i}__${e}`}function _n(i,e){return`${i}--${e}`}function oae(){return sae.isMacOs()?"mac":""}const K5=Object.assign({},tbe);let aF;const lF=Symbol("__molecule__root");z5.version.startsWith("18")&&(aF=K5.createRoot);function zX(i){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:e}=K5;e&&typeof e=="object"&&(e.usingClientEntryPoint=i)}const uF=(i,e)=>{if(aF){zX(!0);const t=e[lF]||aF(e);zX(!1),t.render(i),e[lF]=t;return}K5.render(i,e)},aae=i=>{var e;return aF?((e=i[lF])===null||e===void 0||e.unmount(),Reflect.deleteProperty(i,lF),!0):K5.unmountComponentAtNode(i)},ty=document.querySelector.bind(document);document.querySelectorAll.bind(document);function Abe(){const i=document.body,e=document.documentElement,t=e.clientWidth,n=e.clientHeight,r=Math.max(i.scrollHeight,i.offsetHeight,n,e.scrollHeight,e.offsetHeight),s=Math.max(i.scrollWidth,i.offsetWidth,t,e.scrollWidth,e.offsetWidth);return{height:r,width:s,clientWidth:t,clientHeight:n}}function lae(i,e){const{clientWidth:t,clientHeight:n}=Abe(),r=e.x,s=e.y,o=t-r,a=n-s,u=i.offsetHeight,d=i.offsetWidth,h=o<d?r-d:r,f=a<u?s-u:s;return{x:h,y:f}}function cF(i){return{x:i.clientX,y:i.clientY}}function uae(i){switch(i){case"click":return"onClick";case"hover":return"onMouseOver";case"contextmenu":return"onContextMenu";default:return i}}function UX(i,e){let t=e.x,n=e.y;return i==="top"?n=e.y-e.height:i==="right"?t=e.x+e.width:i==="bottom"?n=e.y+e.height:i==="left"?t=e.x-e.width:i==="rightBottom"&&(t=e.x+e.width,n=e.y+e.height),{x:t,y:n}}function hR(i,e){return i.getAttribute(e)||""}function _b(i){return Object.keys(i).reduce((e,t)=>(t.startsWith("data-")&&(e[t]=i[t]),e),{})}function jX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Obe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jX(Object(t),!0).forEach(function(n){Mbe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):jX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Mbe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function KX(i,e){return Rbe(i)||Pbe(i,e)||Fbe(i,e)||Bbe()}function Rbe(i){if(Array.isArray(i))return i}function Pbe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,o,a;try{for(t=t.call(i);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(u){s=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function Fbe(i,e){if(i){if(typeof i=="string")return qX(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qX(i,e)}}function qX(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Bbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cae(i,e){return e={exports:{}},i(e,e.exports),e.exports}var J7=cae(function(i,e){(function(){var t,n="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,L=1,S=2,y=4,E=8,A=16,N=32,V=64,M=128,R=256,Y=512,X=30,$="...",T=800,O=16,B=1,W=2,j=3,U=1/0,q=9007199254740991,z=17976931348623157e292,k=0/0,K=4294967295,fe=K-1,ne=K>>>1,be=[["ary",M],["bind",L],["bindKey",S],["curry",E],["curryRight",A],["flip",Y],["partial",N],["partialRight",V],["rearg",R]],De="[object Arguments]",Ve="[object Array]",rt="[object AsyncFunction]",At="[object Boolean]",Me="[object Date]",ut="[object DOMException]",Ct="[object Error]",Xe="[object Function]",sn="[object GeneratorFunction]",Kt="[object Map]",dn="[object Number]",Sn="[object Null]",Wn="[object Object]",Jn="[object Promise]",si="[object Proxy]",jn="[object RegExp]",Pt="[object Set]",pn="[object String]",Ci="[object Symbol]",Te="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",bt="[object DataView]",wi="[object Float32Array]",Vt="[object Float64Array]",Tt="[object Int8Array]",qt="[object Int16Array]",Gt="[object Int32Array]",Bt="[object Uint8Array]",fr="[object Uint8ClampedArray]",ei="[object Uint16Array]",He="[object Uint32Array]",Fa=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Go=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,ir=RegExp(Go.source),sl=RegExp(vn.source),qi=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,no=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,I=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,Ie=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",oi="\\u20d0-\\u20ff",Hn=Ot+wt+oi,rr="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Ba="\\xac\\xb1\\xd7\\xf7",ol="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ag="\\u2000-\\u206f",hL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Up="A-Z\\xc0-\\xd6\\xd8-\\xde",jp="\\ufe0e\\ufe0f",Kp=Ba+ol+Ag+hL,sd="[']",fL="["+Ft+"]",qp="["+Kp+"]",Al="["+Hn+"]",Gp="\\d+",gL="["+rr+"]",Yp="["+$i+"]",Zp="[^"+Ft+Kp+Gp+rr+$i+Up+"]",od="\\ud83c[\\udffb-\\udfff]",pL="(?:"+Al+"|"+od+")",Xp="[^"+Ft+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",ld="[\\ud800-\\udbff][\\udc00-\\udfff]",ho="["+Up+"]",Qp="\\u200d",Jp="(?:"+Yp+"|"+Zp+")",mL="(?:"+ho+"|"+Zp+")",em="(?:"+sd+"(?:d|ll|m|re|s|t|ve))?",tm="(?:"+sd+"(?:D|LL|M|RE|S|T|VE))?",nm=pL+"?",im="["+jp+"]?",_L="(?:"+Qp+"(?:"+[Xp,ad,ld].join("|")+")"+im+nm+")*",vL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rm=im+nm+_L,CL="(?:"+[gL,ad,ld].join("|")+")"+rm,wL="(?:"+[Xp+Al+"?",Al,ad,ld,fL].join("|")+")",yL=RegExp(sd,"g"),SL=RegExp(Al,"g"),ud=RegExp(od+"(?="+od+")|"+wL+rm,"g"),LL=RegExp([ho+"?"+Yp+"+"+em+"(?="+[qp,ho,"$"].join("|")+")",mL+"+"+tm+"(?="+[qp,ho+Jp,"$"].join("|")+")",ho+"?"+Jp+"+"+em,ho+"+"+tm,bL,vL,Gp,CL].join("|"),"g"),EL=RegExp("["+Qp+Ft+Hn+jp+"]"),xL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,DL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],IL=-1,jt={};jt[wi]=jt[Vt]=jt[Tt]=jt[qt]=jt[Gt]=jt[Bt]=jt[fr]=jt[ei]=jt[He]=!0,jt[De]=jt[Ve]=jt[at]=jt[At]=jt[bt]=jt[Me]=jt[Ct]=jt[Xe]=jt[Kt]=jt[dn]=jt[Wn]=jt[jn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[De]=$t[Ve]=$t[at]=$t[bt]=$t[At]=$t[Me]=$t[wi]=$t[Vt]=$t[Tt]=$t[qt]=$t[Gt]=$t[Kt]=$t[dn]=$t[Wn]=$t[jn]=$t[Pt]=$t[pn]=$t[Ci]=$t[Bt]=$t[fr]=$t[ei]=$t[He]=!0,$t[Ct]=$t[Xe]=$t[Fe]=!1;var TL={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},kL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},NL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},AL={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},OL=parseFloat,ML=parseInt,sm=typeof fw=="object"&&fw&&fw.Object===Object&&fw,RL=typeof self=="object"&&self&&self.Object===Object&&self,xn=sm||RL||Function("return this")(),cd=e&&!e.nodeType&&e,Ts=cd&&!0&&i&&!i.nodeType&&i,om=Ts&&Ts.exports===cd,dd=om&&sm.process,Ai=function(){try{var G=Ts&&Ts.require&&Ts.require("util").types;return G||dd&&dd.binding&&dd.binding("util")}catch{}}(),am=Ai&&Ai.isArrayBuffer,lm=Ai&&Ai.isDate,um=Ai&&Ai.isMap,cm=Ai&&Ai.isRegExp,dm=Ai&&Ai.isSet,hm=Ai&&Ai.isTypedArray;function yi(G,se,ee){switch(ee.length){case 0:return G.call(se);case 1:return G.call(se,ee[0]);case 2:return G.call(se,ee[0],ee[1]);case 3:return G.call(se,ee[0],ee[1],ee[2])}return G.apply(se,ee)}function PL(G,se,ee,xe){for(var Qe=-1,St=G==null?0:G.length;++Qe<St;){var bn=G[Qe];se(xe,bn,ee(bn),G)}return xe}function Oi(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe&&se(G[ee],ee,G)!==!1;);return G}function FL(G,se){for(var ee=G==null?0:G.length;ee--&&se(G[ee],ee,G)!==!1;);return G}function fm(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe;)if(!se(G[ee],ee,G))return!1;return!0}function Jr(G,se){for(var ee=-1,xe=G==null?0:G.length,Qe=0,St=[];++ee<xe;){var bn=G[ee];se(bn,ee,G)&&(St[Qe++]=bn)}return St}function Ol(G,se){var ee=G==null?0:G.length;return!!ee&&fo(G,se,0)>-1}function hd(G,se,ee){for(var xe=-1,Qe=G==null?0:G.length;++xe<Qe;)if(ee(se,G[xe]))return!0;return!1}function Jt(G,se){for(var ee=-1,xe=G==null?0:G.length,Qe=Array(xe);++ee<xe;)Qe[ee]=se(G[ee],ee,G);return Qe}function es(G,se){for(var ee=-1,xe=se.length,Qe=G.length;++ee<xe;)G[Qe+ee]=se[ee];return G}function fd(G,se,ee,xe){var Qe=-1,St=G==null?0:G.length;for(xe&&St&&(ee=G[++Qe]);++Qe<St;)ee=se(ee,G[Qe],Qe,G);return ee}function BL(G,se,ee,xe){var Qe=G==null?0:G.length;for(xe&&Qe&&(ee=G[--Qe]);Qe--;)ee=se(ee,G[Qe],Qe,G);return ee}function gd(G,se){for(var ee=-1,xe=G==null?0:G.length;++ee<xe;)if(se(G[ee],ee,G))return!0;return!1}var WL=pd("length");function VL(G){return G.split("")}function HL(G){return G.match(dt)||[]}function gm(G,se,ee){var xe;return ee(G,function(Qe,St,bn){if(se(Qe,St,bn))return xe=St,!1}),xe}function Ml(G,se,ee,xe){for(var Qe=G.length,St=ee+(xe?1:-1);xe?St--:++St<Qe;)if(se(G[St],St,G))return St;return-1}function fo(G,se,ee){return se===se?JL(G,se,ee):Ml(G,pm,ee)}function $L(G,se,ee,xe){for(var Qe=ee-1,St=G.length;++Qe<St;)if(xe(G[Qe],se))return Qe;return-1}function pm(G){return G!==G}function mm(G,se){var ee=G==null?0:G.length;return ee?_d(G,se)/ee:k}function pd(G){return function(se){return se==null?t:se[G]}}function md(G){return function(se){return G==null?t:G[se]}}function _m(G,se,ee,xe,Qe){return Qe(G,function(St,bn,Wt){ee=xe?(xe=!1,St):se(ee,St,bn,Wt)}),ee}function zL(G,se){var ee=G.length;for(G.sort(se);ee--;)G[ee]=G[ee].value;return G}function _d(G,se){for(var ee,xe=-1,Qe=G.length;++xe<Qe;){var St=se(G[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function vd(G,se){for(var ee=-1,xe=Array(G);++ee<G;)xe[ee]=se(ee);return xe}function UL(G,se){return Jt(se,function(ee){return[ee,G[ee]]})}function vm(G){return G&&G.slice(0,ym(G)+1).replace(pe,"")}function Si(G){return function(se){return G(se)}}function bd(G,se){return Jt(se,function(ee){return G[ee]})}function ua(G,se){return G.has(se)}function bm(G,se){for(var ee=-1,xe=G.length;++ee<xe&&fo(se,G[ee],0)>-1;);return ee}function Cm(G,se){for(var ee=G.length;ee--&&fo(se,G[ee],0)>-1;);return ee}function jL(G,se){for(var ee=G.length,xe=0;ee--;)G[ee]===se&&++xe;return xe}var KL=md(TL),qL=md(kL);function GL(G){return"\\"+AL[G]}function YL(G,se){return G==null?t:G[se]}function go(G){return EL.test(G)}function ZL(G){return xL.test(G)}function XL(G){for(var se,ee=[];!(se=G.next()).done;)ee.push(se.value);return ee}function Cd(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe,Qe){ee[++se]=[Qe,xe]}),ee}function wm(G,se){return function(ee){return G(se(ee))}}function ts(G,se){for(var ee=-1,xe=G.length,Qe=0,St=[];++ee<xe;){var bn=G[ee];(bn===se||bn===h)&&(G[ee]=h,St[Qe++]=ee)}return St}function Rl(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe){ee[++se]=xe}),ee}function QL(G){var se=-1,ee=Array(G.size);return G.forEach(function(xe){ee[++se]=[xe,xe]}),ee}function JL(G,se,ee){for(var xe=ee-1,Qe=G.length;++xe<Qe;)if(G[xe]===se)return xe;return-1}function eE(G,se,ee){for(var xe=ee+1;xe--;)if(G[xe]===se)return xe;return xe}function po(G){return go(G)?nE(G):WL(G)}function Yi(G){return go(G)?iE(G):VL(G)}function ym(G){for(var se=G.length;se--&&J.test(G.charAt(se)););return se}var tE=md(NL);function nE(G){for(var se=ud.lastIndex=0;ud.test(G);)++se;return se}function iE(G){return G.match(ud)||[]}function rE(G){return G.match(LL)||[]}var sE=function G(se){se=se==null?xn:mo.defaults(xn.Object(),se,mo.pick(xn,DL));var ee=se.Array,xe=se.Date,Qe=se.Error,St=se.Function,bn=se.Math,Wt=se.Object,wd=se.RegExp,oE=se.String,Mi=se.TypeError,Pl=ee.prototype,aE=St.prototype,_o=Wt.prototype,Fl=se["__core-js_shared__"],Bl=aE.toString,Nt=_o.hasOwnProperty,lE=0,Sm=function(){var l=/[^.]+$/.exec(Fl&&Fl.keys&&Fl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Wl=_o.toString,uE=Bl.call(Wt),cE=xn._,dE=wd("^"+Bl.call(Nt).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=om?se.Buffer:t,ns=se.Symbol,Hl=se.Uint8Array,Lm=Vl?Vl.allocUnsafe:t,$l=wm(Wt.getPrototypeOf,Wt),Em=Wt.create,xm=_o.propertyIsEnumerable,zl=Pl.splice,Dm=ns?ns.isConcatSpreadable:t,ca=ns?ns.iterator:t,ks=ns?ns.toStringTag:t,Ul=function(){try{var l=Rs(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),hE=se.clearTimeout!==xn.clearTimeout&&se.clearTimeout,fE=xe&&xe.now!==xn.Date.now&&xe.now,gE=se.setTimeout!==xn.setTimeout&&se.setTimeout,jl=bn.ceil,Kl=bn.floor,yd=Wt.getOwnPropertySymbols,pE=Vl?Vl.isBuffer:t,Im=se.isFinite,mE=Pl.join,_E=wm(Wt.keys,Wt),Cn=bn.max,An=bn.min,vE=xe.now,bE=se.parseInt,Tm=bn.random,CE=Pl.reverse,Sd=Rs(se,"DataView"),da=Rs(se,"Map"),Ld=Rs(se,"Promise"),vo=Rs(se,"Set"),ha=Rs(se,"WeakMap"),fa=Rs(Wt,"create"),ql=ha&&new ha,bo={},wE=Ps(Sd),yE=Ps(da),SE=Ps(Ld),LE=Ps(vo),EE=Ps(ha),Gl=ns?ns.prototype:t,ga=Gl?Gl.valueOf:t,km=Gl?Gl.toString:t;function x(l){if(on(l)&&!tt(l)&&!(l instanceof mt)){if(l instanceof Ri)return l;if(Nt.call(l,"__wrapped__"))return N_(l)}return new Ri(l)}var Co=function(){function l(){}return function(c){if(!tn(c))return{};if(Em)return Em(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Yl(){}function Ri(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qi,evaluate:Ye,interpolate:no,variable:"",imports:{_:x}},x.prototype=Yl.prototype,x.prototype.constructor=x,Ri.prototype=Co(Yl.prototype),Ri.prototype.constructor=Ri;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function xE(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function DE(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function IE(){var l=this.__wrapped__.value(),c=this.__dir__,g=tt(l),_=c<0,w=g?l.length:0,D=Vx(0,w,this.__views__),P=D.start,H=D.end,Z=H-P,ue=_?H:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=An(Z,this.__takeCount__);if(!g||!_&&w==Z&&Ne==Z)return e_(l,this.__actions__);var ze=[];e:for(;Z--&&Se<Ne;){ue+=c;for(var lt=-1,Ue=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Zn=vt(Ue);if(xi==W)Ue=Zn;else if(!Zn){if(xi==B)continue e;break e}}ze[Se++]=Ue}return ze}mt.prototype=Co(Yl.prototype),mt.prototype.constructor=mt;function Ns(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function TE(){this.__data__=fa?fa(null):{},this.size=0}function kE(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function NE(l){var c=this.__data__;if(fa){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function AE(l){var c=this.__data__;return fa?c[l]!==t:Nt.call(c,l)}function OE(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=fa&&c===t?u:c,this}Ns.prototype.clear=TE,Ns.prototype.delete=kE,Ns.prototype.get=NE,Ns.prototype.has=AE,Ns.prototype.set=OE;function kr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function ME(){this.__data__=[],this.size=0}function RE(l){var c=this.__data__,g=Zl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():zl.call(c,g,1),--this.size,!0}function PE(l){var c=this.__data__,g=Zl(c,l);return g<0?t:c[g][1]}function FE(l){return Zl(this.__data__,l)>-1}function BE(l,c){var g=this.__data__,_=Zl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}kr.prototype.clear=ME,kr.prototype.delete=RE,kr.prototype.get=PE,kr.prototype.has=FE,kr.prototype.set=BE;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function WE(){this.size=0,this.__data__={hash:new Ns,map:new(da||kr),string:new Ns}}function VE(l){var c=lu(this,l).delete(l);return this.size-=c?1:0,c}function HE(l){return lu(this,l).get(l)}function $E(l){return lu(this,l).has(l)}function zE(l,c){var g=lu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=WE,Nr.prototype.delete=VE,Nr.prototype.get=HE,Nr.prototype.has=$E,Nr.prototype.set=zE;function As(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function UE(l){return this.__data__.set(l,u),this}function jE(l){return this.__data__.has(l)}As.prototype.add=As.prototype.push=UE,As.prototype.has=jE;function Zi(l){var c=this.__data__=new kr(l);this.size=c.size}function KE(){this.__data__=new kr,this.size=0}function qE(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function GE(l){return this.__data__.get(l)}function YE(l){return this.__data__.has(l)}function ZE(l,c){var g=this.__data__;if(g instanceof kr){var _=g.__data__;if(!da||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Zi.prototype.clear=KE,Zi.prototype.delete=qE,Zi.prototype.get=GE,Zi.prototype.has=YE,Zi.prototype.set=ZE;function Nm(l,c){var g=tt(l),_=!g&&Fs(l),w=!g&&!_&&as(l),D=!g&&!_&&!w&&Lo(l),P=g||_||w||D,H=P?vd(l.length,oE):[],Z=H.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||w&&(ue=="offset"||ue=="parent")||D&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Rr(ue,Z)))&&H.push(ue);return H}function Am(l){var c=l.length;return c?l[Rd(0,c-1)]:t}function XE(l,c){return uu(ai(l),Os(c,0,l.length))}function QE(l){return uu(ai(l))}function Ed(l,c,g){(g!==t&&!Xi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function pa(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Xi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Zl(l,c){for(var g=l.length;g--;)if(Xi(l[g][0],c))return g;return-1}function JE(l,c,g,_){return is(l,function(w,D,P){c(_,w,g(w),P)}),_}function Om(l,c){return l&&_r(c,Ln(c),l)}function ex(l,c){return l&&_r(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&Ul?Ul(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function xd(l,c){for(var g=-1,_=c.length,w=ee(_),D=l==null;++g<_;)w[g]=D?t:oh(l,c[g]);return w}function Os(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,w,D){var P,H=c&f,Z=c&p,ue=c&m;if(g&&(P=w?g(l,_,w,D):g(l)),P!==t)return P;if(!tn(l))return l;var ce=tt(l);if(ce){if(P=$x(l),!H)return ai(l,P)}else{var ge=On(l),Se=ge==Xe||ge==sn;if(as(l))return i_(l,H);if(ge==Wn||ge==De||Se&&!w){if(P=Z||Se?{}:y_(l),!H)return Z?Nx(l,ex(P,l)):kx(l,Om(P,l))}else{if(!$t[ge])return w?l:{};P=zx(l,ge,H)}}D||(D=new Zi);var Ne=D.get(l);if(Ne)return Ne;D.set(l,P),X_(l)?l.forEach(function(Ue){P.add(Pi(Ue,c,g,Ue,l,D))}):Y_(l)&&l.forEach(function(Ue,ht){P.set(ht,Pi(Ue,c,g,ht,l,D))});var ze=ue?Z?Kd:jd:Z?ui:Ln,lt=ce?t:ze(l);return Oi(lt||l,function(Ue,ht){lt&&(ht=Ue,Ue=l[ht]),pa(P,ht,Pi(Ue,c,g,ht,l,D))}),P}function tx(l){var c=Ln(l);return function(g){return Mm(g,l,c)}}function Mm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var w=g[_],D=c[w],P=l[w];if(P===t&&!(w in l)||!D(P))return!1}return!0}function Rm(l,c,g){if(typeof l!="function")throw new Mi(o);return ya(function(){l.apply(t,g)},c)}function ma(l,c,g,_){var w=-1,D=Ol,P=!0,H=l.length,Z=[],ue=c.length;if(!H)return Z;g&&(c=Jt(c,Si(g))),_?(D=hd,P=!1):c.length>=r&&(D=ua,P=!1,c=new As(c));e:for(;++w<H;){var ce=l[w],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;Z.push(ce)}else D(c,ge,_)||Z.push(ce)}return Z}var is=l_(mr),Pm=l_(Id,!0);function nx(l,c){var g=!0;return is(l,function(_,w,D){return g=!!c(_,w,D),g}),g}function Xl(l,c,g){for(var _=-1,w=l.length;++_<w;){var D=l[_],P=c(D);if(P!=null&&(H===t?P===P&&!Ei(P):g(P,H)))var H=P,Z=D}return Z}function ix(l,c,g,_){var w=l.length;for(g=st(g),g<0&&(g=-g>w?0:w+g),_=_===t||_>w?w:st(_),_<0&&(_+=w),_=g>_?0:J_(_);g<_;)l[g++]=c;return l}function Fm(l,c){var g=[];return is(l,function(_,w,D){c(_,w,D)&&g.push(_)}),g}function Dn(l,c,g,_,w){var D=-1,P=l.length;for(g||(g=jx),w||(w=[]);++D<P;){var H=l[D];c>0&&g(H)?c>1?Dn(H,c-1,g,_,w):es(w,H):_||(w[w.length]=H)}return w}var Dd=u_(),Bm=u_(!0);function mr(l,c){return l&&Dd(l,c,Ln)}function Id(l,c){return l&&Bm(l,c,Ln)}function Ql(l,c){return Jr(c,function(g){return Pr(l[g])})}function Ms(l,c){c=ss(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[vr(c[g++])];return g&&g==_?l:t}function Wm(l,c,g){var _=c(l);return tt(l)?_:es(_,g(l))}function Gn(l){return l==null?l===t?Te:Sn:ks&&ks in Wt(l)?Wx(l):Qx(l)}function Td(l,c){return l>c}function rx(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ox(l,c,g){return l>=An(c,g)&&l<Cn(c,g)}function kd(l,c,g){for(var _=g?hd:Ol,w=l[0].length,D=l.length,P=D,H=ee(D),Z=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),Z=An(ce.length,Z),H[P]=!g&&(c||w>=120&&ce.length>=120)?new As(P&&ce):t}ce=l[0];var ge=-1,Se=H[0];e:for(;++ge<w&&ue.length<Z;){var Ne=ce[ge],ze=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ua(Se,ze):_(ue,ze,g))){for(P=D;--P;){var lt=H[P];if(!(lt?ua(lt,ze):_(l[P],ze,g)))continue e}Se&&Se.push(ze),ue.push(Ne)}}return ue}function ax(l,c,g,_){return mr(l,function(w,D,P){c(_,g(w),D,P)}),_}function _a(l,c,g){c=ss(c,l),l=x_(l,c);var _=l==null?l:l[vr(Bi(c))];return _==null?t:yi(_,l,g)}function Vm(l){return on(l)&&Gn(l)==De}function lx(l){return on(l)&&Gn(l)==at}function ux(l){return on(l)&&Gn(l)==Me}function va(l,c,g,_,w){return l===c?!0:l==null||c==null||!on(l)&&!on(c)?l!==l&&c!==c:cx(l,c,g,_,va,w)}function cx(l,c,g,_,w,D){var P=tt(l),H=tt(c),Z=P?Ve:On(l),ue=H?Ve:On(c);Z=Z==De?Wn:Z,ue=ue==De?Wn:ue;var ce=Z==Wn,ge=ue==Wn,Se=Z==ue;if(Se&&as(l)){if(!as(c))return!1;P=!0,ce=!1}if(Se&&!ce)return D||(D=new Zi),P||Lo(l)?b_(l,c,g,_,w,D):Fx(l,c,Z,g,_,w,D);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),ze=ge&&Nt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?l.value():l,Ue=ze?c.value():c;return D||(D=new Zi),w(lt,Ue,g,_,D)}}return Se?(D||(D=new Zi),Bx(l,c,g,_,w,D)):!1}function dx(l){return on(l)&&On(l)==Kt}function Nd(l,c,g,_){var w=g.length,D=w,P=!_;if(l==null)return!D;for(l=Wt(l);w--;){var H=g[w];if(P&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++w<D;){H=g[w];var Z=H[0],ue=l[Z],ce=H[1];if(P&&H[2]){if(ue===t&&!(Z in l))return!1}else{var ge=new Zi;if(_)var Se=_(ue,ce,Z,l,c,ge);if(!(Se===t?va(ce,ue,v|b,_,ge):Se))return!1}}return!0}function Hm(l){if(!tn(l)||qx(l))return!1;var c=Pr(l)?dE:le;return c.test(Ps(l))}function hx(l){return on(l)&&Gn(l)==jn}function fx(l){return on(l)&&On(l)==Pt}function gx(l){return on(l)&&pu(l.length)&&!!jt[Gn(l)]}function $m(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?tt(l)?jm(l[0],l[1]):Um(l):cv(l)}function Ad(l){if(!wa(l))return _E(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function px(l){if(!tn(l))return Xx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Od(l,c){return l<c}function zm(l,c){var g=-1,_=li(l)?ee(l.length):[];return is(l,function(w,D,P){_[++g]=c(w,D,P)}),_}function Um(l){var c=Gd(l);return c.length==1&&c[0][2]?L_(c[0][0],c[0][1]):function(g){return g===l||Nd(g,l,c)}}function jm(l,c){return Zd(l)&&S_(c)?L_(vr(l),c):function(g){var _=oh(g,l);return _===t&&_===c?ah(g,l):va(c,_,v|b)}}function Jl(l,c,g,_,w){l!==c&&Dd(c,function(D,P){if(w||(w=new Zi),tn(D))mx(l,c,P,g,Jl,_,w);else{var H=_?_(Qd(l,P),D,P+"",l,c,w):t;H===t&&(H=D),Ed(l,P,H)}},ui)}function mx(l,c,g,_,w,D,P){var H=Qd(l,g),Z=Qd(c,g),ue=P.get(Z);if(ue){Ed(l,g,ue);return}var ce=D?D(H,Z,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=tt(Z),Ne=!Se&&as(Z),ze=!Se&&!Ne&&Lo(Z);ce=Z,Se||Ne||ze?tt(H)?ce=H:hn(H)?ce=ai(H):Ne?(ge=!1,ce=i_(Z,!0)):ze?(ge=!1,ce=r_(Z,!0)):ce=[]:Sa(Z)||Fs(Z)?(ce=H,Fs(H)?ce=ev(H):(!tn(H)||Pr(H))&&(ce=y_(Z))):ge=!1}ge&&(P.set(Z,ce),w(ce,Z,_,D,P),P.delete(Z)),Ed(l,g,ce)}function Km(l,c){var g=l.length;if(g)return c+=c<0?g:0,Rr(c,g)?l[c]:t}function qm(l,c,g){c.length?c=Jt(c,function(D){return tt(D)?function(P){return Ms(P,D.length===1?D[0]:D)}:D}):c=[ci];var _=-1;c=Jt(c,Si(We()));var w=zm(l,function(D,P,H){var Z=Jt(c,function(ue){return ue(D)});return{criteria:Z,index:++_,value:D}});return zL(w,function(D,P){return Tx(D,P,g)})}function _x(l,c){return Gm(l,c,function(g,_){return ah(l,_)})}function Gm(l,c,g){for(var _=-1,w=c.length,D={};++_<w;){var P=c[_],H=Ms(l,P);g(H,P)&&ba(D,ss(P,l),H)}return D}function vx(l){return function(c){return Ms(c,l)}}function Md(l,c,g,_){var w=_?$L:fo,D=-1,P=c.length,H=l;for(l===c&&(c=ai(c)),g&&(H=Jt(l,Si(g)));++D<P;)for(var Z=0,ue=c[D],ce=g?g(ue):ue;(Z=w(H,ce,Z,_))>-1;)H!==l&&zl.call(H,Z,1),zl.call(l,Z,1);return l}function Ym(l,c){for(var g=l?c.length:0,_=g-1;g--;){var w=c[g];if(g==_||w!==D){var D=w;Rr(w)?zl.call(l,w,1):Bd(l,w)}}return l}function Rd(l,c){return l+Kl(Tm()*(c-l+1))}function bx(l,c,g,_){for(var w=-1,D=Cn(jl((c-l)/(g||1)),0),P=ee(D);D--;)P[_?D:++w]=l,l+=g;return P}function Pd(l,c){var g="";if(!l||c<1||c>q)return g;do c%2&&(g+=l),c=Kl(c/2),c&&(l+=l);while(c);return g}function ct(l,c){return Jd(E_(l,c,ci),l+"")}function Cx(l){return Am(Eo(l))}function wx(l,c){var g=Eo(l);return uu(g,Os(c,0,g.length))}function ba(l,c,g,_){if(!tn(l))return l;c=ss(c,l);for(var w=-1,D=c.length,P=D-1,H=l;H!=null&&++w<D;){var Z=vr(c[w]),ue=g;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return l;if(w!=P){var ce=H[Z];ue=_?_(ce,Z,H):t,ue===t&&(ue=tn(ce)?ce:Rr(c[w+1])?[]:{})}pa(H,Z,ue),H=H[Z]}return l}var Zm=ql?function(l,c){return ql.set(l,c),l}:ci,yx=Ul?function(l,c){return Ul(l,"toString",{configurable:!0,enumerable:!1,value:uh(c),writable:!0})}:ci;function Sx(l){return uu(Eo(l))}function Fi(l,c,g){var _=-1,w=l.length;c<0&&(c=-c>w?0:w+c),g=g>w?w:g,g<0&&(g+=w),w=c>g?0:g-c>>>0,c>>>=0;for(var D=ee(w);++_<w;)D[_]=l[_+c];return D}function Lx(l,c){var g;return is(l,function(_,w,D){return g=c(_,w,D),!g}),!!g}function eu(l,c,g){var _=0,w=l==null?_:l.length;if(typeof c=="number"&&c===c&&w<=ne){for(;_<w;){var D=_+w>>>1,P=l[D];P!==null&&!Ei(P)&&(g?P<=c:P<c)?_=D+1:w=D}return w}return Fd(l,c,ci,g)}function Fd(l,c,g,_){var w=0,D=l==null?0:l.length;if(D===0)return 0;c=g(c);for(var P=c!==c,H=c===null,Z=Ei(c),ue=c===t;w<D;){var ce=Kl((w+D)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,ze=ge===ge,lt=Ei(ge);if(P)var Ue=_||ze;else ue?Ue=ze&&(_||Se):H?Ue=ze&&Se&&(_||!Ne):Z?Ue=ze&&Se&&!Ne&&(_||!lt):Ne||lt?Ue=!1:Ue=_?ge<=c:ge<c;Ue?w=ce+1:D=ce}return An(D,fe)}function Xm(l,c){for(var g=-1,_=l.length,w=0,D=[];++g<_;){var P=l[g],H=c?c(P):P;if(!g||!Xi(H,Z)){var Z=H;D[w++]=P===0?0:P}}return D}function Qm(l){return typeof l=="number"?l:Ei(l)?k:+l}function Li(l){if(typeof l=="string")return l;if(tt(l))return Jt(l,Li)+"";if(Ei(l))return km?km.call(l):"";var c=l+"";return c=="0"&&1/l==-U?"-0":c}function rs(l,c,g){var _=-1,w=Ol,D=l.length,P=!0,H=[],Z=H;if(g)P=!1,w=hd;else if(D>=r){var ue=c?null:Rx(l);if(ue)return Rl(ue);P=!1,w=ua,Z=new As}else Z=c?[]:H;e:for(;++_<D;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=Z.length;Se--;)if(Z[Se]===ge)continue e;c&&Z.push(ge),H.push(ce)}else w(Z,ge,g)||(Z!==H&&Z.push(ge),H.push(ce))}return H}function Bd(l,c){return c=ss(c,l),l=x_(l,c),l==null||delete l[vr(Bi(c))]}function Jm(l,c,g,_){return ba(l,c,g(Ms(l,c)),_)}function tu(l,c,g,_){for(var w=l.length,D=_?w:-1;(_?D--:++D<w)&&c(l[D],D,l););return g?Fi(l,_?0:D,_?D+1:w):Fi(l,_?D+1:0,_?w:D)}function e_(l,c){var g=l;return g instanceof mt&&(g=g.value()),fd(c,function(_,w){return w.func.apply(w.thisArg,es([_],w.args))},g)}function Wd(l,c,g){var _=l.length;if(_<2)return _?rs(l[0]):[];for(var w=-1,D=ee(_);++w<_;)for(var P=l[w],H=-1;++H<_;)H!=w&&(D[w]=ma(D[w]||P,l[H],c,g));return rs(Dn(D,1),c,g)}function t_(l,c,g){for(var _=-1,w=l.length,D=c.length,P={};++_<w;){var H=_<D?c[_]:t;g(P,l[_],H)}return P}function Vd(l){return hn(l)?l:[]}function Hd(l){return typeof l=="function"?l:ci}function ss(l,c){return tt(l)?l:Zd(l,c)?[l]:k_(xt(l))}var Ex=ct;function os(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var n_=hE||function(l){return xn.clearTimeout(l)};function i_(l,c){if(c)return l.slice();var g=l.length,_=Lm?Lm(g):new l.constructor(g);return l.copy(_),_}function $d(l){var c=new l.constructor(l.byteLength);return new Hl(c).set(new Hl(l)),c}function xx(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Dx(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function Ix(l){return ga?Wt(ga.call(l)):{}}function r_(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function s_(l,c){if(l!==c){var g=l!==t,_=l===null,w=l===l,D=Ei(l),P=c!==t,H=c===null,Z=c===c,ue=Ei(c);if(!H&&!ue&&!D&&l>c||D&&P&&Z&&!H&&!ue||_&&P&&Z||!g&&Z||!w)return 1;if(!_&&!D&&!ue&&l<c||ue&&g&&w&&!_&&!D||H&&g&&w||!P&&w||!Z)return-1}return 0}function Tx(l,c,g){for(var _=-1,w=l.criteria,D=c.criteria,P=w.length,H=g.length;++_<P;){var Z=s_(w[_],D[_]);if(Z){if(_>=H)return Z;var ue=g[_];return Z*(ue=="desc"?-1:1)}}return l.index-c.index}function o_(l,c,g,_){for(var w=-1,D=l.length,P=g.length,H=-1,Z=c.length,ue=Cn(D-P,0),ce=ee(Z+ue),ge=!_;++H<Z;)ce[H]=c[H];for(;++w<P;)(ge||w<D)&&(ce[g[w]]=l[w]);for(;ue--;)ce[H++]=l[w++];return ce}function a_(l,c,g,_){for(var w=-1,D=l.length,P=-1,H=g.length,Z=-1,ue=c.length,ce=Cn(D-H,0),ge=ee(ce+ue),Se=!_;++w<ce;)ge[w]=l[w];for(var Ne=w;++Z<ue;)ge[Ne+Z]=c[Z];for(;++P<H;)(Se||w<D)&&(ge[Ne+g[P]]=l[w++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function _r(l,c,g,_){var w=!g;g||(g={});for(var D=-1,P=c.length;++D<P;){var H=c[D],Z=_?_(g[H],l[H],H,g,l):t;Z===t&&(Z=l[H]),w?Ar(g,H,Z):pa(g,H,Z)}return g}function kx(l,c){return _r(l,Yd(l),c)}function Nx(l,c){return _r(l,C_(l),c)}function nu(l,c){return function(g,_){var w=tt(g)?PL:JE,D=c?c():{};return w(g,l,We(_,2),D)}}function wo(l){return ct(function(c,g){var _=-1,w=g.length,D=w>1?g[w-1]:t,P=w>2?g[2]:t;for(D=l.length>3&&typeof D=="function"?(w--,D):t,P&&Yn(g[0],g[1],P)&&(D=w<3?t:D,w=1),c=Wt(c);++_<w;){var H=g[_];H&&l(c,H,_,D)}return c})}function l_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var w=g.length,D=c?w:-1,P=Wt(g);(c?D--:++D<w)&&_(P[D],D,P)!==!1;);return g}}function u_(l){return function(c,g,_){for(var w=-1,D=Wt(c),P=_(c),H=P.length;H--;){var Z=P[l?H:++w];if(g(D[Z],Z,D)===!1)break}return c}}function Ax(l,c,g){var _=c&L,w=Ca(l);function D(){var P=this&&this!==xn&&this instanceof D?w:l;return P.apply(_?g:this,arguments)}return D}function c_(l){return function(c){c=xt(c);var g=go(c)?Yi(c):t,_=g?g[0]:c.charAt(0),w=g?os(g,1).join(""):c.slice(1);return _[l]()+w}}function yo(l){return function(c){return fd(lv(av(c).replace(yL,"")),l,"")}}function Ca(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Co(l.prototype),_=l.apply(g,c);return tn(_)?_:g}}function Ox(l,c,g){var _=Ca(l);function w(){for(var D=arguments.length,P=ee(D),H=D,Z=So(w);H--;)P[H]=arguments[H];var ue=D<3&&P[0]!==Z&&P[D-1]!==Z?[]:ts(P,Z);if(D-=ue.length,D<g)return p_(l,c,iu,w.placeholder,t,P,ue,t,t,g-D);var ce=this&&this!==xn&&this instanceof w?_:l;return yi(ce,this,P)}return w}function d_(l){return function(c,g,_){var w=Wt(c);if(!li(c)){var D=We(g,3);c=Ln(c),g=function(H){return D(w[H],H,w)}}var P=l(c,g,_);return P>-1?w[D?c[P]:P]:t}}function h_(l){return Mr(function(c){var g=c.length,_=g,w=Ri.prototype.thru;for(l&&c.reverse();_--;){var D=c[_];if(typeof D!="function")throw new Mi(o);if(w&&!P&&au(D)=="wrapper")var P=new Ri([],!0)}for(_=P?_:g;++_<g;){D=c[_];var H=au(D),Z=H=="wrapper"?qd(D):t;Z&&Xd(Z[0])&&Z[1]==(M|E|N|R)&&!Z[4].length&&Z[9]==1?P=P[au(Z[0])].apply(P,Z[3]):P=D.length==1&&Xd(D)?P[H]():P.thru(D)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&tt(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function iu(l,c,g,_,w,D,P,H,Z,ue){var ce=c&M,ge=c&L,Se=c&S,Ne=c&(E|A),ze=c&Y,lt=Se?t:Ca(l);function Ue(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Zn=So(Ue),Di=jL(vt,Zn);if(_&&(vt=o_(vt,_,w,Ne)),D&&(vt=a_(vt,D,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=ts(vt,Zn);return p_(l,c,iu,Ue.placeholder,g,vt,fn,H,Z,ue-ht)}var Qi=ge?g:this,Br=Se?Qi[l]:l;return ht=vt.length,H?vt=Jx(vt,H):ze&&ht>1&&vt.reverse(),ce&&Z<ht&&(vt.length=Z),this&&this!==xn&&this instanceof Ue&&(Br=lt||Ca(Br)),Br.apply(Qi,vt)}return Ue}function f_(l,c){return function(g,_){return ax(g,l,c(_),{})}}function ru(l,c){return function(g,_){var w;if(g===t&&_===t)return c;if(g!==t&&(w=g),_!==t){if(w===t)return _;typeof g=="string"||typeof _=="string"?(g=Li(g),_=Li(_)):(g=Qm(g),_=Qm(_)),w=l(g,_)}return w}}function zd(l){return Mr(function(c){return c=Jt(c,Si(We())),ct(function(g){var _=this;return l(c,function(w){return yi(w,_,g)})})})}function su(l,c){c=c===t?" ":Li(c);var g=c.length;if(g<2)return g?Pd(c,l):c;var _=Pd(c,jl(l/po(c)));return go(c)?os(Yi(_),0,l).join(""):_.slice(0,l)}function Mx(l,c,g,_){var w=c&L,D=Ca(l);function P(){for(var H=-1,Z=arguments.length,ue=-1,ce=_.length,ge=ee(ce+Z),Se=this&&this!==xn&&this instanceof P?D:l;++ue<ce;)ge[ue]=_[ue];for(;Z--;)ge[ue++]=arguments[++H];return yi(Se,w?g:this,ge)}return P}function g_(l){return function(c,g,_){return _&&typeof _!="number"&&Yn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),bx(c,g,_,l)}}function ou(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function p_(l,c,g,_,w,D,P,H,Z,ue){var ce=c&E,ge=ce?P:t,Se=ce?t:P,Ne=ce?D:t,ze=ce?t:D;c|=ce?N:V,c&=~(ce?V:N),c&y||(c&=~(L|S));var lt=[l,c,w,Ne,ge,ze,Se,H,Z,ue],Ue=g.apply(t,lt);return Xd(l)&&D_(Ue,lt),Ue.placeholder=_,I_(Ue,l,c)}function Ud(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:An(st(_),292),_&&Im(g)){var w=(xt(g)+"e").split("e"),D=c(w[0]+"e"+(+w[1]+_));return w=(xt(D)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return c(g)}}var Rx=vo&&1/Rl(new vo([,-0]))[1]==U?function(l){return new vo(l)}:hh;function m_(l){return function(c){var g=On(c);return g==Kt?Cd(c):g==Pt?QL(c):UL(c,l(c))}}function Or(l,c,g,_,w,D,P,H){var Z=c&S;if(!Z&&typeof l!="function")throw new Mi(o);var ue=_?_.length:0;if(ue||(c&=~(N|V),_=w=t),P=P===t?P:Cn(st(P),0),H=H===t?H:st(H),ue-=w?w.length:0,c&V){var ce=_,ge=w;_=w=t}var Se=Z?t:qd(l),Ne=[l,c,g,_,w,ce,ge,D,P,H];if(Se&&Zx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],w=Ne[4],H=Ne[9]=Ne[9]===t?Z?0:l.length:Cn(Ne[9]-ue,0),!H&&c&(E|A)&&(c&=~(E|A)),!c||c==L)var ze=Ax(l,c,g);else c==E||c==A?ze=Ox(l,c,H):(c==N||c==(L|N))&&!w.length?ze=Mx(l,c,g,_):ze=iu.apply(t,Ne);var lt=Se?Zm:D_;return I_(lt(ze,Ne),l,c)}function __(l,c,g,_){return l===t||Xi(l,_o[g])&&!Nt.call(_,g)?c:l}function v_(l,c,g,_,w,D){return tn(l)&&tn(c)&&(D.set(c,l),Jl(l,c,t,v_,D),D.delete(c)),l}function Px(l){return Sa(l)?t:l}function b_(l,c,g,_,w,D){var P=g&v,H=l.length,Z=c.length;if(H!=Z&&!(P&&Z>H))return!1;var ue=D.get(l),ce=D.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new As:t;for(D.set(l,c),D.set(c,l);++ge<H;){var ze=l[ge],lt=c[ge];if(_)var Ue=P?_(lt,ze,ge,c,l,D):_(ze,lt,ge,l,c,D);if(Ue!==t){if(Ue)continue;Se=!1;break}if(Ne){if(!gd(c,function(ht,vt){if(!ua(Ne,vt)&&(ze===ht||w(ze,ht,g,_,D)))return Ne.push(vt)})){Se=!1;break}}else if(!(ze===lt||w(ze,lt,g,_,D))){Se=!1;break}}return D.delete(l),D.delete(c),Se}function Fx(l,c,g,_,w,D,P){switch(g){case bt:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!D(new Hl(l),new Hl(c)));case At:case Me:case dn:return Xi(+l,+c);case Ct:return l.name==c.name&&l.message==c.message;case jn:case pn:return l==c+"";case Kt:var H=Cd;case Pt:var Z=_&v;if(H||(H=Rl),l.size!=c.size&&!Z)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=b_(H(l),H(c),_,w,D,P);return P.delete(l),ce;case Ci:if(ga)return ga.call(l)==ga.call(c)}return!1}function Bx(l,c,g,_,w,D){var P=g&v,H=jd(l),Z=H.length,ue=jd(c),ce=ue.length;if(Z!=ce&&!P)return!1;for(var ge=Z;ge--;){var Se=H[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=D.get(l),ze=D.get(c);if(Ne&&ze)return Ne==c&&ze==l;var lt=!0;D.set(l,c),D.set(c,l);for(var Ue=P;++ge<Z;){Se=H[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,D):_(ht,vt,Se,l,c,D);if(!(xi===t?ht===vt||w(ht,vt,g,_,D):xi)){lt=!1;break}Ue||(Ue=Se=="constructor")}if(lt&&!Ue){var Zn=l.constructor,Di=c.constructor;Zn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return D.delete(l),D.delete(c),lt}function Mr(l){return Jd(E_(l,t,M_),l+"")}function jd(l){return Wm(l,Ln,Yd)}function Kd(l){return Wm(l,ui,C_)}var qd=ql?function(l){return ql.get(l)}:hh;function au(l){for(var c=l.name+"",g=bo[c],_=Nt.call(bo,c)?g.length:0;_--;){var w=g[_],D=w.func;if(D==null||D==l)return w.name}return c}function So(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||ch;return l=l===ch?$m:l,arguments.length?l(arguments[0],arguments[1]):l}function lu(l,c){var g=l.__data__;return Kx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function Gd(l){for(var c=Ln(l),g=c.length;g--;){var _=c[g],w=l[_];c[g]=[_,w,S_(w)]}return c}function Rs(l,c){var g=YL(l,c);return Hm(g)?g:t}function Wx(l){var c=Nt.call(l,ks),g=l[ks];try{l[ks]=t;var _=!0}catch{}var w=Wl.call(l);return _&&(c?l[ks]=g:delete l[ks]),w}var Yd=yd?function(l){return l==null?[]:(l=Wt(l),Jr(yd(l),function(c){return xm.call(l,c)}))}:fh,C_=yd?function(l){for(var c=[];l;)es(c,Yd(l)),l=$l(l);return c}:fh,On=Gn;(Sd&&On(new Sd(new ArrayBuffer(1)))!=bt||da&&On(new da)!=Kt||Ld&&On(Ld.resolve())!=Jn||vo&&On(new vo)!=Pt||ha&&On(new ha)!=Fe)&&(On=function(l){var c=Gn(l),g=c==Wn?l.constructor:t,_=g?Ps(g):"";if(_)switch(_){case wE:return bt;case yE:return Kt;case SE:return Jn;case LE:return Pt;case EE:return Fe}return c});function Vx(l,c,g){for(var _=-1,w=g.length;++_<w;){var D=g[_],P=D.size;switch(D.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=An(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function Hx(l){var c=l.match($e);return c?c[1].split(Re):[]}function w_(l,c,g){c=ss(c,l);for(var _=-1,w=c.length,D=!1;++_<w;){var P=vr(c[_]);if(!(D=l!=null&&g(l,P)))break;l=l[P]}return D||++_!=w?D:(w=l==null?0:l.length,!!w&&pu(w)&&Rr(P,w)&&(tt(l)||Fs(l)))}function $x(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function y_(l){return typeof l.constructor=="function"&&!wa(l)?Co($l(l)):{}}function zx(l,c,g){var _=l.constructor;switch(c){case at:return $d(l);case At:case Me:return new _(+l);case bt:return xx(l,g);case wi:case Vt:case Tt:case qt:case Gt:case Bt:case fr:case ei:case He:return r_(l,g);case Kt:return new _;case dn:case pn:return new _(l);case jn:return Dx(l);case Pt:return new _;case Ci:return Ix(l)}}function Ux(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function jx(l){return tt(l)||Fs(l)||!!(Dm&&l&&l[Dm])}function Rr(l,c){var g=typeof l;return c=c??q,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Yn(l,c,g){if(!tn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Rr(c,g.length):_=="string"&&c in g)?Xi(g[c],l):!1}function Zd(l,c){if(tt(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Ei(l)?!0:Ee.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Kx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Xd(l){var c=au(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=qd(g);return!!_&&l===_[0]}function qx(l){return!!Sm&&Sm in l}var Gx=Fl?Pr:gh;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_o;return l===g}function S_(l){return l===l&&!tn(l)}function L_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Yx(l){var c=fu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Zx(l,c){var g=l[1],_=c[1],w=g|_,D=w<(L|S|M),P=_==M&&g==E||_==M&&g==R&&l[7].length<=c[8]||_==(M|R)&&c[7].length<=c[8]&&g==E;if(!(D||P))return l;_&L&&(l[2]=c[2],w|=g&L?0:y);var H=c[3];if(H){var Z=l[3];l[3]=Z?o_(Z,H,c[4]):H,l[4]=Z?ts(l[3],h):c[4]}return H=c[5],H&&(Z=l[5],l[5]=Z?a_(Z,H,c[6]):H,l[6]=Z?ts(l[5],h):c[6]),H=c[7],H&&(l[7]=H),_&M&&(l[8]=l[8]==null?c[8]:An(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Xx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Qx(l){return Wl.call(l)}function E_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,w=-1,D=Cn(_.length-c,0),P=ee(D);++w<D;)P[w]=_[c+w];w=-1;for(var H=ee(c+1);++w<c;)H[w]=_[w];return H[c]=g(P),yi(l,this,H)}}function x_(l,c){return c.length<2?l:Ms(l,Fi(c,0,-1))}function Jx(l,c){for(var g=l.length,_=An(c.length,g),w=ai(l);_--;){var D=c[_];l[_]=Rr(D,g)?w[D]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var D_=T_(Zm),ya=gE||function(l,c){return xn.setTimeout(l,c)},Jd=T_(yx);function I_(l,c,g){var _=c+"";return Jd(l,Ux(_,eD(Hx(_),g)))}function T_(l){var c=0,g=0;return function(){var _=vE(),w=O-(_-g);if(g=_,w>0){if(++c>=T)return arguments[0]}else c=0;return l.apply(t,arguments)}}function uu(l,c){var g=-1,_=l.length,w=_-1;for(c=c===t?_:c;++g<c;){var D=Rd(g,w),P=l[D];l[D]=l[g],l[g]=P}return l.length=c,l}var k_=Yx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,w,D){c.push(w?D.replace(I,"$1"):_||g)}),c});function vr(l){if(typeof l=="string"||Ei(l))return l;var c=l+"";return c=="0"&&1/l==-U?"-0":c}function Ps(l){if(l!=null){try{return Bl.call(l)}catch{}try{return l+""}catch{}}return""}function eD(l,c){return Oi(be,function(g){var _="_."+g[0];c&g[1]&&!Ol(l,_)&&l.push(_)}),l.sort()}function N_(l){if(l instanceof mt)return l.clone();var c=new Ri(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function tD(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=Cn(st(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var w=0,D=0,P=ee(jl(_/c));w<_;)P[D++]=Fi(l,w,w+=c);return P}function nD(l){for(var c=-1,g=l==null?0:l.length,_=0,w=[];++c<g;){var D=l[c];D&&(w[_++]=D)}return w}function iD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return es(tt(g)?ai(g):[g],Dn(c,1))}var rD=ct(function(l,c){return hn(l)?ma(l,Dn(c,1,hn,!0)):[]}),sD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),We(g,2)):[]}),oD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),t,g):[]});function aD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),Fi(l,c<0?0:c,_)):[]}function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function uD(l,c){return l&&l.length?tu(l,We(c,3),!0,!0):[]}function cD(l,c){return l&&l.length?tu(l,We(c,3),!0):[]}function dD(l,c,g,_){var w=l==null?0:l.length;return w?(g&&typeof g!="number"&&Yn(l,c,g)&&(g=0,_=w),ix(l,c,g,_)):[]}function A_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:st(g);return w<0&&(w=Cn(_+w,0)),Ml(l,We(c,3),w)}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return g!==t&&(w=st(g),w=g<0?Cn(_+w,0):An(w,_-1)),Ml(l,We(c,3),w,!0)}function M_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function hD(l){var c=l==null?0:l.length;return c?Dn(l,U):[]}function fD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:st(c),Dn(l,c)):[]}function gD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var w=l[c];_[w[0]]=w[1]}return _}function R_(l){return l&&l.length?l[0]:t}function pD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:st(g);return w<0&&(w=Cn(_+w,0)),fo(l,c,w)}function mD(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var _D=ct(function(l){var c=Jt(l,Vd);return c.length&&c[0]===l[0]?kd(c):[]}),vD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?kd(g,We(c,2)):[]}),bD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?kd(g,t,c):[]});function CD(l,c){return l==null?"":mE.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function wD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_;return g!==t&&(w=st(g),w=w<0?Cn(_+w,0):An(w,_-1)),c===c?eE(l,c,w):Ml(l,pm,w,!0)}function yD(l,c){return l&&l.length?Km(l,st(c)):t}var SD=ct(P_);function P_(l,c){return l&&l.length&&c&&c.length?Md(l,c):l}function LD(l,c,g){return l&&l.length&&c&&c.length?Md(l,c,We(g,2)):l}function ED(l,c,g){return l&&l.length&&c&&c.length?Md(l,c,t,g):l}var xD=Mr(function(l,c){var g=l==null?0:l.length,_=xd(l,c);return Ym(l,Jt(c,function(w){return Rr(w,g)?+w:w}).sort(s_)),_});function DD(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,w=[],D=l.length;for(c=We(c,3);++_<D;){var P=l[_];c(P,_,l)&&(g.push(P),w.push(_))}return Ym(l,w),g}function eh(l){return l==null?l:CE.call(l)}function ID(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Yn(l,c,g)?(c=0,g=_):(c=c==null?0:st(c),g=g===t?_:st(g)),Fi(l,c,g)):[]}function TD(l,c){return eu(l,c)}function kD(l,c,g){return Fd(l,c,We(g,2))}function ND(l,c){var g=l==null?0:l.length;if(g){var _=eu(l,c);if(_<g&&Xi(l[_],c))return _}return-1}function AD(l,c){return eu(l,c,!0)}function OD(l,c,g){return Fd(l,c,We(g,2),!0)}function MD(l,c){var g=l==null?0:l.length;if(g){var _=eu(l,c,!0)-1;if(Xi(l[_],c))return _}return-1}function RD(l){return l&&l.length?Xm(l):[]}function PD(l,c){return l&&l.length?Xm(l,We(c,2)):[]}function FD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function BD(l,c,g){return l&&l.length?(c=g||c===t?1:st(c),Fi(l,0,c<0?0:c)):[]}function WD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:st(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function VD(l,c){return l&&l.length?tu(l,We(c,3),!1,!0):[]}function HD(l,c){return l&&l.length?tu(l,We(c,3)):[]}var $D=ct(function(l){return rs(Dn(l,1,hn,!0))}),zD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),rs(Dn(l,1,hn,!0),We(c,2))}),UD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,rs(Dn(l,1,hn,!0),t,c)});function jD(l){return l&&l.length?rs(l):[]}function KD(l,c){return l&&l.length?rs(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?rs(l,t,c):[]}function th(l){if(!(l&&l.length))return[];var c=0;return l=Jr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),vd(c,function(g){return Jt(l,pd(g))})}function F_(l,c){if(!(l&&l.length))return[];var g=th(l);return c==null?g:Jt(g,function(_){return yi(c,t,_)})}var GD=ct(function(l,c){return hn(l)?ma(l,c):[]}),YD=ct(function(l){return Wd(Jr(l,hn))}),ZD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),Wd(Jr(l,hn),We(c,2))}),XD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Wd(Jr(l,hn),t,c)}),QD=ct(th);function JD(l,c){return t_(l||[],c||[],pa)}function eI(l,c){return t_(l||[],c||[],ba)}var tI=ct(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,F_(l,g)});function B_(l){var c=x(l);return c.__chain__=!0,c}function nI(l,c){return c(l),l}function cu(l,c){return c(l)}var iI=Mr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,w=function(D){return xd(D,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Rr(g)?this.thru(w):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:cu,args:[w],thisArg:t}),new Ri(_,this.__chain__).thru(function(D){return c&&!D.length&&D.push(t),D}))});function rI(){return B_(this)}function sI(){return new Ri(this.value(),this.__chain__)}function oI(){this.__values__===t&&(this.__values__=Q_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function aI(){return this}function lI(l){for(var c,g=this;g instanceof Yl;){var _=N_(g);_.__index__=0,_.__values__=t,c?w.__wrapped__=_:c=_;var w=_;g=g.__wrapped__}return w.__wrapped__=l,c}function uI(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:cu,args:[eh],thisArg:t}),new Ri(c,this.__chain__)}return this.thru(eh)}function cI(){return e_(this.__wrapped__,this.__actions__)}var dI=nu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function hI(l,c,g){var _=tt(l)?fm:nx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}function fI(l,c){var g=tt(l)?Jr:Fm;return g(l,We(c,3))}var gI=d_(A_),pI=d_(O_);function mI(l,c){return Dn(du(l,c),1)}function _I(l,c){return Dn(du(l,c),U)}function vI(l,c,g){return g=g===t?1:st(g),Dn(du(l,c),g)}function W_(l,c){var g=tt(l)?Oi:is;return g(l,We(c,3))}function V_(l,c){var g=tt(l)?FL:Pm;return g(l,We(c,3))}var bI=nu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function CI(l,c,g,_){l=li(l)?l:Eo(l),g=g&&!_?st(g):0;var w=l.length;return g<0&&(g=Cn(w+g,0)),mu(l)?g<=w&&l.indexOf(c,g)>-1:!!w&&fo(l,c,g)>-1}var wI=ct(function(l,c,g){var _=-1,w=typeof c=="function",D=li(l)?ee(l.length):[];return is(l,function(P){D[++_]=w?yi(c,P,g):_a(P,c,g)}),D}),yI=nu(function(l,c,g){Ar(l,g,c)});function du(l,c){var g=tt(l)?Jt:zm;return g(l,We(c,3))}function SI(l,c,g,_){return l==null?[]:(tt(c)||(c=c==null?[]:[c]),g=_?t:g,tt(g)||(g=g==null?[]:[g]),qm(l,c,g))}var LI=nu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function EI(l,c,g){var _=tt(l)?fd:_m,w=arguments.length<3;return _(l,We(c,4),g,w,is)}function xI(l,c,g){var _=tt(l)?BL:_m,w=arguments.length<3;return _(l,We(c,4),g,w,Pm)}function DI(l,c){var g=tt(l)?Jr:Fm;return g(l,gu(We(c,3)))}function II(l){var c=tt(l)?Am:Cx;return c(l)}function TI(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=st(c);var _=tt(l)?XE:wx;return _(l,c)}function kI(l){var c=tt(l)?QE:Sx;return c(l)}function NI(l){if(l==null)return 0;if(li(l))return mu(l)?po(l):l.length;var c=On(l);return c==Kt||c==Pt?l.size:Ad(l).length}function AI(l,c,g){var _=tt(l)?gd:Lx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}var OI=ct(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Yn(l,c[0],c[1])?c=[]:g>2&&Yn(c[0],c[1],c[2])&&(c=[c[0]]),qm(l,Dn(c,1),[])}),hu=fE||function(){return xn.Date.now()};function MI(l,c){if(typeof c!="function")throw new Mi(o);return l=st(l),function(){if(--l<1)return c.apply(this,arguments)}}function H_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,M,t,t,t,t,c)}function $_(l,c){var g;if(typeof c!="function")throw new Mi(o);return l=st(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var nh=ct(function(l,c,g){var _=L;if(g.length){var w=ts(g,So(nh));_|=N}return Or(l,_,c,g,w)}),z_=ct(function(l,c,g){var _=L|S;if(g.length){var w=ts(g,So(z_));_|=N}return Or(c,_,l,g,w)});function U_(l,c,g){c=g?t:c;var _=Or(l,E,t,t,t,t,t,c);return _.placeholder=U_.placeholder,_}function j_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){var _,w,D,P,H,Z,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Mi(o);c=Wi(c)||0,tn(g)&&(ce=!!g.leading,ge="maxWait"in g,D=ge?Cn(Wi(g.maxWait)||0,c):D,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Qi=_,Br=w;return _=w=t,ue=fn,P=l.apply(Br,Qi),P}function ze(fn){return ue=fn,H=ya(ht,c),ce?Ne(fn):P}function lt(fn){var Qi=fn-Z,Br=fn-ue,dv=c-Qi;return ge?An(dv,D-Br):dv}function Ue(fn){var Qi=fn-Z,Br=fn-ue;return Z===t||Qi>=c||Qi<0||ge&&Br>=D}function ht(){var fn=hu();if(Ue(fn))return vt(fn);H=ya(ht,lt(fn))}function vt(fn){return H=t,Se&&_?Ne(fn):(_=w=t,P)}function xi(){H!==t&&n_(H),ue=0,_=Z=w=H=t}function Zn(){return H===t?P:vt(hu())}function Di(){var fn=hu(),Qi=Ue(fn);if(_=arguments,w=this,Z=fn,Qi){if(H===t)return ze(Z);if(ge)return n_(H),H=ya(ht,c),Ne(Z)}return H===t&&(H=ya(ht,c)),P}return Di.cancel=xi,Di.flush=Zn,Di}var RI=ct(function(l,c){return Rm(l,1,c)}),PI=ct(function(l,c,g){return Rm(l,Wi(c)||0,g)});function FI(l){return Or(l,Y)}function fu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Mi(o);var g=function(){var _=arguments,w=c?c.apply(this,_):_[0],D=g.cache;if(D.has(w))return D.get(w);var P=l.apply(this,_);return g.cache=D.set(w,P)||D,P};return g.cache=new(fu.Cache||Nr),g}fu.Cache=Nr;function gu(l){if(typeof l!="function")throw new Mi(o);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function BI(l){return $_(2,l)}var WI=Ex(function(l,c){c=c.length==1&&tt(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ct(function(_){for(var w=-1,D=An(_.length,g);++w<D;)_[w]=c[w].call(this,_[w]);return yi(l,this,_)})}),ih=ct(function(l,c){var g=ts(c,So(ih));return Or(l,N,t,c,g)}),q_=ct(function(l,c){var g=ts(c,So(q_));return Or(l,V,t,c,g)}),VI=Mr(function(l,c){return Or(l,R,t,t,t,c)});function HI(l,c){if(typeof l!="function")throw new Mi(o);return c=c===t?c:st(c),ct(l,c)}function $I(l,c){if(typeof l!="function")throw new Mi(o);return c=c==null?0:Cn(st(c),0),ct(function(g){var _=g[c],w=os(g,0,c);return _&&es(w,_),yi(l,this,w)})}function zI(l,c,g){var _=!0,w=!0;if(typeof l!="function")throw new Mi(o);return tn(g)&&(_="leading"in g?!!g.leading:_,w="trailing"in g?!!g.trailing:w),K_(l,c,{leading:_,maxWait:c,trailing:w})}function UI(l){return H_(l,1)}function jI(l,c){return ih(Hd(c),l)}function KI(){if(!arguments.length)return[];var l=arguments[0];return tt(l)?l:[l]}function qI(l){return Pi(l,m)}function GI(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function YI(l){return Pi(l,f|m)}function ZI(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function XI(l,c){return c==null||Mm(l,c,Ln(c))}function Xi(l,c){return l===c||l!==l&&c!==c}var QI=ou(Td),JI=ou(function(l,c){return l>=c}),Fs=Vm(function(){return arguments}())?Vm:function(l){return on(l)&&Nt.call(l,"callee")&&!xm.call(l,"callee")},tt=ee.isArray,eT=am?Si(am):lx;function li(l){return l!=null&&pu(l.length)&&!Pr(l)}function hn(l){return on(l)&&li(l)}function tT(l){return l===!0||l===!1||on(l)&&Gn(l)==At}var as=pE||gh,nT=lm?Si(lm):ux;function iT(l){return on(l)&&l.nodeType===1&&!Sa(l)}function rT(l){if(l==null)return!0;if(li(l)&&(tt(l)||typeof l=="string"||typeof l.splice=="function"||as(l)||Lo(l)||Fs(l)))return!l.length;var c=On(l);if(c==Kt||c==Pt)return!l.size;if(wa(l))return!Ad(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sT(l,c){return va(l,c)}function oT(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?va(l,c,t,g):!!_}function rh(l){if(!on(l))return!1;var c=Gn(l);return c==Ct||c==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Sa(l)}function aT(l){return typeof l=="number"&&Im(l)}function Pr(l){if(!tn(l))return!1;var c=Gn(l);return c==Xe||c==sn||c==rt||c==si}function G_(l){return typeof l=="number"&&l==st(l)}function pu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=q}function tn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function on(l){return l!=null&&typeof l=="object"}var Y_=um?Si(um):dx;function lT(l,c){return l===c||Nd(l,c,Gd(c))}function uT(l,c,g){return g=typeof g=="function"?g:t,Nd(l,c,Gd(c),g)}function cT(l){return Z_(l)&&l!=+l}function dT(l){if(Gx(l))throw new Qe(s);return Hm(l)}function hT(l){return l===null}function fT(l){return l==null}function Z_(l){return typeof l=="number"||on(l)&&Gn(l)==dn}function Sa(l){if(!on(l)||Gn(l)!=Wn)return!1;var c=$l(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Bl.call(g)==uE}var sh=cm?Si(cm):hx;function gT(l){return G_(l)&&l>=-q&&l<=q}var X_=dm?Si(dm):fx;function mu(l){return typeof l=="string"||!tt(l)&&on(l)&&Gn(l)==pn}function Ei(l){return typeof l=="symbol"||on(l)&&Gn(l)==Ci}var Lo=hm?Si(hm):gx;function pT(l){return l===t}function mT(l){return on(l)&&On(l)==Fe}function _T(l){return on(l)&&Gn(l)==pt}var vT=ou(Od),bT=ou(function(l,c){return l<=c});function Q_(l){if(!l)return[];if(li(l))return mu(l)?Yi(l):ai(l);if(ca&&l[ca])return XL(l[ca]());var c=On(l),g=c==Kt?Cd:c==Pt?Rl:Eo;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===U||l===-U){var c=l<0?-1:1;return c*z}return l===l?l:0}function st(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function J_(l){return l?Os(st(l),0,K):0}function Wi(l){if(typeof l=="number")return l;if(Ei(l))return k;if(tn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=tn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=vm(l);var g=me.test(l);return g||Ie.test(l)?ML(l.slice(2),g?2:8):ie.test(l)?k:+l}function ev(l){return _r(l,ui(l))}function CT(l){return l?Os(st(l),-q,q):l===0?l:0}function xt(l){return l==null?"":Li(l)}var wT=wo(function(l,c){if(wa(c)||li(c)){_r(c,Ln(c),l);return}for(var g in c)Nt.call(c,g)&&pa(l,g,c[g])}),tv=wo(function(l,c){_r(c,ui(c),l)}),_u=wo(function(l,c,g,_){_r(c,ui(c),l,_)}),yT=wo(function(l,c,g,_){_r(c,Ln(c),l,_)}),ST=Mr(xd);function LT(l,c){var g=Co(l);return c==null?g:Om(g,c)}var ET=ct(function(l,c){l=Wt(l);var g=-1,_=c.length,w=_>2?c[2]:t;for(w&&Yn(c[0],c[1],w)&&(_=1);++g<_;)for(var D=c[g],P=ui(D),H=-1,Z=P.length;++H<Z;){var ue=P[H],ce=l[ue];(ce===t||Xi(ce,_o[ue])&&!Nt.call(l,ue))&&(l[ue]=D[ue])}return l}),xT=ct(function(l){return l.push(t,v_),yi(nv,t,l)});function DT(l,c){return gm(l,We(c,3),mr)}function IT(l,c){return gm(l,We(c,3),Id)}function TT(l,c){return l==null?l:Dd(l,We(c,3),ui)}function kT(l,c){return l==null?l:Bm(l,We(c,3),ui)}function NT(l,c){return l&&mr(l,We(c,3))}function AT(l,c){return l&&Id(l,We(c,3))}function OT(l){return l==null?[]:Ql(l,Ln(l))}function MT(l){return l==null?[]:Ql(l,ui(l))}function oh(l,c,g){var _=l==null?t:Ms(l,c);return _===t?g:_}function RT(l,c){return l!=null&&w_(l,c,rx)}function ah(l,c){return l!=null&&w_(l,c,sx)}var PT=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Wl.call(c)),l[c]=g},uh(ci)),FT=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Wl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),BT=ct(_a);function Ln(l){return li(l)?Nm(l):Ad(l)}function ui(l){return li(l)?Nm(l,!0):px(l)}function WT(l,c){var g={};return c=We(c,3),mr(l,function(_,w,D){Ar(g,c(_,w,D),_)}),g}function VT(l,c){var g={};return c=We(c,3),mr(l,function(_,w,D){Ar(g,w,c(_,w,D))}),g}var HT=wo(function(l,c,g){Jl(l,c,g)}),nv=wo(function(l,c,g,_){Jl(l,c,g,_)}),$T=Mr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(D){return D=ss(D,l),_||(_=D.length>1),D}),_r(l,Kd(l),g),_&&(g=Pi(g,f|p|m,Px));for(var w=c.length;w--;)Bd(g,c[w]);return g});function zT(l,c){return iv(l,gu(We(c)))}var UT=Mr(function(l,c){return l==null?{}:_x(l,c)});function iv(l,c){if(l==null)return{};var g=Jt(Kd(l),function(_){return[_]});return c=We(c),Gm(l,g,function(_,w){return c(_,w[0])})}function jT(l,c,g){c=ss(c,l);var _=-1,w=c.length;for(w||(w=1,l=t);++_<w;){var D=l==null?t:l[vr(c[_])];D===t&&(_=w,D=g),l=Pr(D)?D.call(l):D}return l}function KT(l,c,g){return l==null?l:ba(l,c,g)}function qT(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:ba(l,c,g,_)}var rv=m_(Ln),sv=m_(ui);function GT(l,c,g){var _=tt(l),w=_||as(l)||Lo(l);if(c=We(c,4),g==null){var D=l&&l.constructor;w?g=_?new D:[]:tn(l)?g=Pr(D)?Co($l(l)):{}:g={}}return(w?Oi:mr)(l,function(P,H,Z){return c(g,P,H,Z)}),g}function YT(l,c){return l==null?!0:Bd(l,c)}function ZT(l,c,g){return l==null?l:Jm(l,c,Hd(g))}function XT(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Jm(l,c,Hd(g),_)}function Eo(l){return l==null?[]:bd(l,Ln(l))}function QT(l){return l==null?[]:bd(l,ui(l))}function JT(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Os(Wi(l),c,g)}function ek(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ox(l,c,g)}function tk(l,c,g){if(g&&typeof g!="boolean"&&Yn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var w=Tm();return An(l+w*(c-l+OL("1e-"+((w+"").length-1))),c)}return Rd(l,c)}var nk=yo(function(l,c,g){return c=c.toLowerCase(),l+(g?ov(c):c)});function ov(l){return lh(xt(l).toLowerCase())}function av(l){return l=xt(l),l&&l.replace(Ze,KL).replace(SL,"")}function ik(l,c,g){l=xt(l),c=Li(c);var _=l.length;g=g===t?_:Os(st(g),0,_);var w=g;return g-=c.length,g>=0&&l.slice(g,w)==c}function rk(l){return l=xt(l),l&&sl.test(l)?l.replace(vn,qL):l}function sk(l){return l=xt(l),l&&ae.test(l)?l.replace(oe,"\\$&"):l}var ok=yo(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),ak=yo(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),lk=c_("toLowerCase");function uk(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;if(!c||_>=c)return l;var w=(c-_)/2;return su(Kl(w),g)+l+su(jl(w),g)}function ck(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;return c&&_<c?l+su(c-_,g):l}function dk(l,c,g){l=xt(l),c=st(c);var _=c?po(l):0;return c&&_<c?su(c-_,g)+l:l}function hk(l,c,g){return g||c==null?c=0:c&&(c=+c),bE(xt(l).replace(pe,""),c||0)}function fk(l,c,g){return(g?Yn(l,c,g):c===t)?c=1:c=st(c),Pd(xt(l),c)}function gk(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var pk=yo(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function mk(l,c,g){return g&&typeof g!="number"&&Yn(l,c,g)&&(c=g=t),g=g===t?K:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!sh(c))&&(c=Li(c),!c&&go(l))?os(Yi(l),0,g):l.split(c,g)):[]}var _k=yo(function(l,c,g){return l+(g?" ":"")+lh(c)});function vk(l,c,g){return l=xt(l),g=g==null?0:Os(st(g),0,l.length),c=Li(c),l.slice(g,g+c.length)==c}function bk(l,c,g){var _=x.templateSettings;g&&Yn(l,c,g)&&(c=t),l=xt(l),c=_u({},c,_,__);var w=_u({},c.imports,_.imports,__),D=Ln(w),P=bd(w,D),H,Z,ue=0,ce=c.interpolate||ot,ge="__p += '",Se=wd((c.escape||ot).source+"|"+ce.source+"|"+(ce===no?F:ot).source+"|"+(c.evaluate||ot).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++IL+"]")+`
`;l.replace(Se,function(Ue,ht,vt,xi,Zn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(kt,GL),ht&&(H=!0,ge+=`' +
__e(`+ht+`) +
'`),Zn&&(Z=!0,ge+=`';
`+Zn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+Ue.length,Ue}),ge+=`';
`;var ze=Nt.call(c,"variable")&&c.variable;if(!ze)ge=`with (obj) {
`+ge+`
}
`;else if(Yt.test(ze))throw new Qe(a);ge=(Z?ge.replace(Fa,""):ge).replace(Vn,"$1").replace(ti,"$1;"),ge="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=uv(function(){return St(D,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,rh(lt))throw lt;return lt}function Ck(l){return xt(l).toLowerCase()}function wk(l){return xt(l).toUpperCase()}function yk(l,c,g){if(l=xt(l),l&&(g||c===t))return vm(l);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Yi(c),D=bm(_,w),P=Cm(_,w)+1;return os(_,D,P).join("")}function Sk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,ym(l)+1);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Cm(_,Yi(c))+1;return os(_,0,w).join("")}function Lk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Li(c)))return l;var _=Yi(l),w=bm(_,Yi(c));return os(_,w).join("")}function Ek(l,c){var g=X,_=$;if(tn(c)){var w="separator"in c?c.separator:w;g="length"in c?st(c.length):g,_="omission"in c?Li(c.omission):_}l=xt(l);var D=l.length;if(go(l)){var P=Yi(l);D=P.length}if(g>=D)return l;var H=g-po(_);if(H<1)return _;var Z=P?os(P,0,H).join(""):l.slice(0,H);if(w===t)return Z+_;if(P&&(H+=Z.length-H),sh(w)){if(l.slice(H).search(w)){var ue,ce=Z;for(w.global||(w=wd(w.source,xt(te.exec(w))+"g")),w.lastIndex=0;ue=w.exec(ce);)var ge=ue.index;Z=Z.slice(0,ge===t?H:ge)}}else if(l.indexOf(Li(w),H)!=H){var Se=Z.lastIndexOf(w);Se>-1&&(Z=Z.slice(0,Se))}return Z+_}function xk(l){return l=xt(l),l&&ir.test(l)?l.replace(Go,tE):l}var Dk=yo(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),lh=c_("toUpperCase");function lv(l,c,g){return l=xt(l),c=g?t:c,c===t?ZL(l)?rE(l):HL(l):l.match(c)||[]}var uv=ct(function(l,c){try{return yi(l,t,c)}catch(g){return rh(g)?g:new Qe(g)}}),Ik=Mr(function(l,c){return Oi(c,function(g){g=vr(g),Ar(l,g,nh(l[g],l))}),l});function Tk(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Mi(o);return[g(_[0]),_[1]]}):[],ct(function(_){for(var w=-1;++w<c;){var D=l[w];if(yi(D[0],this,_))return yi(D[1],this,_)}})}function kk(l){return tx(Pi(l,f))}function uh(l){return function(){return l}}function Nk(l,c){return l==null||l!==l?c:l}var Ak=h_(),Ok=h_(!0);function ci(l){return l}function ch(l){return $m(typeof l=="function"?l:Pi(l,f))}function Mk(l){return Um(Pi(l,f))}function Rk(l,c){return jm(l,Pi(c,f))}var Pk=ct(function(l,c){return function(g){return _a(g,l,c)}}),Fk=ct(function(l,c){return function(g){return _a(l,g,c)}});function dh(l,c,g){var _=Ln(c),w=Ql(c,_);g==null&&!(tn(c)&&(w.length||!_.length))&&(g=c,c=l,l=this,w=Ql(c,Ln(c)));var D=!(tn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(w,function(H){var Z=c[H];l[H]=Z,P&&(l.prototype[H]=function(){var ue=this.__chain__;if(D||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:Z,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Z.apply(l,es([this.value()],arguments))})}),l}function Bk(){return xn._===this&&(xn._=cE),this}function hh(){}function Wk(l){return l=st(l),ct(function(c){return Km(c,l)})}var Vk=zd(Jt),Hk=zd(fm),$k=zd(gd);function cv(l){return Zd(l)?pd(vr(l)):vx(l)}function zk(l){return function(c){return l==null?t:Ms(l,c)}}var Uk=g_(),jk=g_(!0);function fh(){return[]}function gh(){return!1}function Kk(){return{}}function qk(){return""}function Gk(){return!0}function Yk(l,c){if(l=st(l),l<1||l>q)return[];var g=K,_=An(l,K);c=We(c),l-=K;for(var w=vd(_,c);++g<l;)c(g);return w}function Zk(l){return tt(l)?Jt(l,vr):Ei(l)?[l]:ai(k_(xt(l)))}function Xk(l){var c=++lE;return xt(l)+c}var Qk=ru(function(l,c){return l+c},0),Jk=Ud("ceil"),eN=ru(function(l,c){return l/c},1),tN=Ud("floor");function nN(l){return l&&l.length?Xl(l,ci,Td):t}function iN(l,c){return l&&l.length?Xl(l,We(c,2),Td):t}function rN(l){return mm(l,ci)}function sN(l,c){return mm(l,We(c,2))}function oN(l){return l&&l.length?Xl(l,ci,Od):t}function aN(l,c){return l&&l.length?Xl(l,We(c,2),Od):t}var lN=ru(function(l,c){return l*c},1),uN=Ud("round"),cN=ru(function(l,c){return l-c},0);function dN(l){return l&&l.length?_d(l,ci):0}function hN(l,c){return l&&l.length?_d(l,We(c,2)):0}return x.after=MI,x.ary=H_,x.assign=wT,x.assignIn=tv,x.assignInWith=_u,x.assignWith=yT,x.at=ST,x.before=$_,x.bind=nh,x.bindAll=Ik,x.bindKey=z_,x.castArray=KI,x.chain=B_,x.chunk=tD,x.compact=nD,x.concat=iD,x.cond=Tk,x.conforms=kk,x.constant=uh,x.countBy=dI,x.create=LT,x.curry=U_,x.curryRight=j_,x.debounce=K_,x.defaults=ET,x.defaultsDeep=xT,x.defer=RI,x.delay=PI,x.difference=rD,x.differenceBy=sD,x.differenceWith=oD,x.drop=aD,x.dropRight=lD,x.dropRightWhile=uD,x.dropWhile=cD,x.fill=dD,x.filter=fI,x.flatMap=mI,x.flatMapDeep=_I,x.flatMapDepth=vI,x.flatten=M_,x.flattenDeep=hD,x.flattenDepth=fD,x.flip=FI,x.flow=Ak,x.flowRight=Ok,x.fromPairs=gD,x.functions=OT,x.functionsIn=MT,x.groupBy=bI,x.initial=mD,x.intersection=_D,x.intersectionBy=vD,x.intersectionWith=bD,x.invert=PT,x.invertBy=FT,x.invokeMap=wI,x.iteratee=ch,x.keyBy=yI,x.keys=Ln,x.keysIn=ui,x.map=du,x.mapKeys=WT,x.mapValues=VT,x.matches=Mk,x.matchesProperty=Rk,x.memoize=fu,x.merge=HT,x.mergeWith=nv,x.method=Pk,x.methodOf=Fk,x.mixin=dh,x.negate=gu,x.nthArg=Wk,x.omit=$T,x.omitBy=zT,x.once=BI,x.orderBy=SI,x.over=Vk,x.overArgs=WI,x.overEvery=Hk,x.overSome=$k,x.partial=ih,x.partialRight=q_,x.partition=LI,x.pick=UT,x.pickBy=iv,x.property=cv,x.propertyOf=zk,x.pull=SD,x.pullAll=P_,x.pullAllBy=LD,x.pullAllWith=ED,x.pullAt=xD,x.range=Uk,x.rangeRight=jk,x.rearg=VI,x.reject=DI,x.remove=DD,x.rest=HI,x.reverse=eh,x.sampleSize=TI,x.set=KT,x.setWith=qT,x.shuffle=kI,x.slice=ID,x.sortBy=OI,x.sortedUniq=RD,x.sortedUniqBy=PD,x.split=mk,x.spread=$I,x.tail=FD,x.take=BD,x.takeRight=WD,x.takeRightWhile=VD,x.takeWhile=HD,x.tap=nI,x.throttle=zI,x.thru=cu,x.toArray=Q_,x.toPairs=rv,x.toPairsIn=sv,x.toPath=Zk,x.toPlainObject=ev,x.transform=GT,x.unary=UI,x.union=$D,x.unionBy=zD,x.unionWith=UD,x.uniq=jD,x.uniqBy=KD,x.uniqWith=qD,x.unset=YT,x.unzip=th,x.unzipWith=F_,x.update=ZT,x.updateWith=XT,x.values=Eo,x.valuesIn=QT,x.without=GD,x.words=lv,x.wrap=jI,x.xor=YD,x.xorBy=ZD,x.xorWith=XD,x.zip=QD,x.zipObject=JD,x.zipObjectDeep=eI,x.zipWith=tI,x.entries=rv,x.entriesIn=sv,x.extend=tv,x.extendWith=_u,dh(x,x),x.add=Qk,x.attempt=uv,x.camelCase=nk,x.capitalize=ov,x.ceil=Jk,x.clamp=JT,x.clone=qI,x.cloneDeep=YI,x.cloneDeepWith=ZI,x.cloneWith=GI,x.conformsTo=XI,x.deburr=av,x.defaultTo=Nk,x.divide=eN,x.endsWith=ik,x.eq=Xi,x.escape=rk,x.escapeRegExp=sk,x.every=hI,x.find=gI,x.findIndex=A_,x.findKey=DT,x.findLast=pI,x.findLastIndex=O_,x.findLastKey=IT,x.floor=tN,x.forEach=W_,x.forEachRight=V_,x.forIn=TT,x.forInRight=kT,x.forOwn=NT,x.forOwnRight=AT,x.get=oh,x.gt=QI,x.gte=JI,x.has=RT,x.hasIn=ah,x.head=R_,x.identity=ci,x.includes=CI,x.indexOf=pD,x.inRange=ek,x.invoke=BT,x.isArguments=Fs,x.isArray=tt,x.isArrayBuffer=eT,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=tT,x.isBuffer=as,x.isDate=nT,x.isElement=iT,x.isEmpty=rT,x.isEqual=sT,x.isEqualWith=oT,x.isError=rh,x.isFinite=aT,x.isFunction=Pr,x.isInteger=G_,x.isLength=pu,x.isMap=Y_,x.isMatch=lT,x.isMatchWith=uT,x.isNaN=cT,x.isNative=dT,x.isNil=fT,x.isNull=hT,x.isNumber=Z_,x.isObject=tn,x.isObjectLike=on,x.isPlainObject=Sa,x.isRegExp=sh,x.isSafeInteger=gT,x.isSet=X_,x.isString=mu,x.isSymbol=Ei,x.isTypedArray=Lo,x.isUndefined=pT,x.isWeakMap=mT,x.isWeakSet=_T,x.join=CD,x.kebabCase=ok,x.last=Bi,x.lastIndexOf=wD,x.lowerCase=ak,x.lowerFirst=lk,x.lt=vT,x.lte=bT,x.max=nN,x.maxBy=iN,x.mean=rN,x.meanBy=sN,x.min=oN,x.minBy=aN,x.stubArray=fh,x.stubFalse=gh,x.stubObject=Kk,x.stubString=qk,x.stubTrue=Gk,x.multiply=lN,x.nth=yD,x.noConflict=Bk,x.noop=hh,x.now=hu,x.pad=uk,x.padEnd=ck,x.padStart=dk,x.parseInt=hk,x.random=tk,x.reduce=EI,x.reduceRight=xI,x.repeat=fk,x.replace=gk,x.result=jT,x.round=uN,x.runInContext=G,x.sample=II,x.size=NI,x.snakeCase=pk,x.some=AI,x.sortedIndex=TD,x.sortedIndexBy=kD,x.sortedIndexOf=ND,x.sortedLastIndex=AD,x.sortedLastIndexBy=OD,x.sortedLastIndexOf=MD,x.startCase=_k,x.startsWith=vk,x.subtract=cN,x.sum=dN,x.sumBy=hN,x.template=bk,x.times=Yk,x.toFinite=Fr,x.toInteger=st,x.toLength=J_,x.toLower=Ck,x.toNumber=Wi,x.toSafeInteger=CT,x.toString=xt,x.toUpper=wk,x.trim=yk,x.trimEnd=Sk,x.trimStart=Lk,x.truncate=Ek,x.unescape=xk,x.uniqueId=Xk,x.upperCase=Dk,x.upperFirst=lh,x.each=W_,x.eachRight=V_,x.first=R_,dh(x,function(){var l={};return mr(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(st(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=An(g,_.__takeCount__):_.__views__.push({size:An(g,K),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==B||g==j;mt.prototype[l]=function(w){var D=this.clone();return D.__iteratees__.push({iteratee:We(w,3),type:g}),D.__filtered__=D.__filtered__||_,D}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ct(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return _a(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(gu(We(l)))},mt.prototype.slice=function(l,c){l=st(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=st(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(K)},mr(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),w=x[_?"take"+(c=="last"?"Right":""):c],D=_||/^find/.test(c);w&&(x.prototype[c]=function(){var P=this.__wrapped__,H=_?[1]:arguments,Z=P instanceof mt,ue=H[0],ce=Z||tt(P),ge=function(ht){var vt=w.apply(x,es([ht],H));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(Z=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,ze=D&&!Se,lt=Z&&!Ne;if(!D&&ce){P=lt?P:new mt(this);var Ue=l.apply(P,H);return Ue.__actions__.push({func:cu,args:[ge],thisArg:t}),new Ri(Ue,Se)}return ze&&lt?l.apply(this,H):(Ue=this.thru(ge),ze?_?Ue.value()[0]:Ue.value():Ue)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Pl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var D=this.value();return c.apply(tt(D)?D:[],w)}return this[g](function(P){return c.apply(tt(P)?P:[],w)})}}),mr(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bo,_)||(bo[_]=[]),bo[_].push({name:c,func:g})}}),bo[iu(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=xE,mt.prototype.reverse=DE,mt.prototype.value=IE,x.prototype.at=iI,x.prototype.chain=rI,x.prototype.commit=sI,x.prototype.next=oI,x.prototype.plant=lI,x.prototype.reverse=uI,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=cI,x.prototype.first=x.prototype.head,ca&&(x.prototype[ca]=aI),x},mo=sE();Ts?((Ts.exports=mo)._=mo,cd._=mo):xn._=mo}).call(fw)}),vf={browserCheck:function(){var e={};if(vf.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge?\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox||e.edge)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=e,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1024;)t=Number((t/1024).toFixed(2)),r++;return"".concat(t," ").concat(n[r])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){var n=t;n||(n=window.location.href);var r=e.replace(/[\[\]]/g,"\\$&"),s=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),o=s.exec(n);if(!o)return null;if(!o[2])return"";var a=decodeURIComponent(o[2].replace(/\+/g," "));if(a==="null")return null;if(a!=="undefined")return a},generateFullUrlPath:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new URLSearchParams(t),r=n.toString();return e+(r?"?".concat(r):"")},getQueryParameters:function(e){var t=new URLSearchParams(e),n=Object.fromEntries(t.entries());for(var r in n)n[r]==="null"&&(n[r]=null),n[r]==="undefined"&&(n[r]=void 0);return n},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){var n=e;if(!n||n===1/0)return"0%";n>1&&(n=1);var r=t||2;return r=Math.pow(10,r),Math.round(n*r*100)/r+"%"},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){var t=e;if(t==null||t==="")return"0";t="".concat(e);var n=t.split("."),r=KX(n,2),s=r[0],o=r[1];return"".concat(s.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(o?".".concat(o):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),r=JSON.stringify(n,null,t||2);return r}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.sort(function(s,o){for(var a=0,u=0,d=n;u<d.length;u++){var h=d[u];if(a=h(s,o),a!==0)return a}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){var t=vf.trim(e);return t.charAt(0)==="{"&&t.charAt(t.length-1)==="}"||t.charAt(0)==="["&&t.charAt(t.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVXYZ";function s(d){var h=Math.random()*(d.length-1);return d.charAt(h)}for(var o="num",a="",u=0;u<e;u++)o==="num"?(a+=s(t),o="lower"):o==="lower"?(a+=s(n),o="upper"):o==="upper"&&(a+=s(r),o="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!vf.isEqual(this.state,n)||!vf.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||r>=65376&&r<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,r=[],s=0;s*t<n;)r.push(e.slice(s*t,(s+1)*t)),s++;return r},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!vf.isObj(e)))return Object.entries(e).forEach(function(t){var n=KX(t,2),r=n[0],s=n[1];s&&vf.isObj(s)?vf.removeEmpty(s):vf.isEmpty(s)&&delete e[r]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!J7.isPlainObject(e)||!J7.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var r=Obe({},e);return J7.forEach(t,function(s,o){o in e?r[o]=vf.mergeDeep(e[o],s):r[o]=s}),r},downLoadData:function(e){var t=e.url,n=e.payload,r=e.finallyCallback,s=e.successCallback,o=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return o(a);var u=a.headers.get("Content-type")||"";if(u.includes("application/json"))return o(a);var d=e.fileName;if(!d){var h=a.headers.get("Content-disposition")||"";d=h.split("filename=")[1]}a.blob().then(function(f){var p=URL.createObjectURL(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",decodeURIComponent(d||"")),m.click(),URL.revokeObjectURL(p),s&&s(a)})}).finally(function(){r&&r()})},isUtf8:function(e){var t=["","","","","",""];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,r;t="";var s=e.length||0;for(n=0;n<s;n++)r=e.charCodeAt(n),r>=1&&r<=127?t+=e.charAt(n):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}};cae(function(i,e){(function(t,n){i.exports=n()})(fw,function(){var t=1e3,n=6e4,r=36e5,s="millisecond",o="second",a="minute",u="hour",d="day",h="week",f="month",p="quarter",m="year",v="date",b="Invalid Date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(O,B,W){var j=String(O);return!j||j.length>=B?O:""+Array(B+1-j.length).join(W)+O},A={s:E,z:function(O){var B=-O.utcOffset(),W=Math.abs(B),j=Math.floor(W/60),U=W%60;return(B<=0?"+":"-")+E(j,2,"0")+":"+E(U,2,"0")},m:function O(B,W){if(B.date()<W.date())return-O(W,B);var j=12*(W.year()-B.year())+(W.month()-B.month()),U=B.clone().add(j,f),q=W-U<0,z=B.clone().add(j+(q?-1:1),f);return+(-(j+(W-U)/(q?U-z:z-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:m,w:h,d,D:v,h:u,m:a,s:o,ms:s,Q:p}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},N="en",V={};V[N]=y;var M=function(O){return O instanceof $},R=function O(B,W,j){var U;if(!B)return N;if(typeof B=="string"){var q=B.toLowerCase();V[q]&&(U=q),W&&(V[q]=W,U=q);var z=B.split("-");if(!U&&z.length>1)return O(z[0])}else{var k=B.name;V[k]=B,U=k}return!j&&U&&(N=U),U||!j&&N},Y=function(O,B){if(M(O))return O.clone();var W=typeof B=="object"?B:{};return W.date=O,W.args=arguments,new $(W)},X=A;X.l=R,X.i=M,X.w=function(O,B){return Y(O,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var $=function(){function O(W){this.$L=R(W.locale,null,!0),this.parse(W)}var B=O.prototype;return B.parse=function(W){this.$d=function(j){var U=j.date,q=j.utc;if(U===null)return new Date(NaN);if(X.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var z=U.match(L);if(z){var k=z[2]-1||0,K=(z[7]||"0").substring(0,3);return q?new Date(Date.UTC(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)):new Date(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)}}return new Date(U)}(W),this.$x=W.x||{},this.init()},B.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},B.$utils=function(){return X},B.isValid=function(){return this.$d.toString()!==b},B.isSame=function(W,j){var U=Y(W);return this.startOf(j)<=U&&U<=this.endOf(j)},B.isAfter=function(W,j){return Y(W)<this.startOf(j)},B.isBefore=function(W,j){return this.endOf(j)<Y(W)},B.$g=function(W,j,U){return X.u(W)?this[j]:this.set(U,W)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(W,j){var U=this,q=!!X.u(j)||j,z=X.p(W),k=function(At,Me){var ut=X.w(U.$u?Date.UTC(U.$y,Me,At):new Date(U.$y,Me,At),U);return q?ut:ut.endOf(d)},K=function(At,Me){return X.w(U.toDate()[At].apply(U.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(Me)),U)},fe=this.$W,ne=this.$M,be=this.$D,De="set"+(this.$u?"UTC":"");switch(z){case m:return q?k(1,0):k(31,11);case f:return q?k(1,ne):k(0,ne+1);case h:var Ve=this.$locale().weekStart||0,rt=(fe<Ve?fe+7:fe)-Ve;return k(q?be-rt:be+(6-rt),ne);case d:case v:return K(De+"Hours",0);case u:return K(De+"Minutes",1);case a:return K(De+"Seconds",2);case o:return K(De+"Milliseconds",3);default:return this.clone()}},B.endOf=function(W){return this.startOf(W,!1)},B.$set=function(W,j){var U,q=X.p(W),z="set"+(this.$u?"UTC":""),k=(U={},U[d]=z+"Date",U[v]=z+"Date",U[f]=z+"Month",U[m]=z+"FullYear",U[u]=z+"Hours",U[a]=z+"Minutes",U[o]=z+"Seconds",U[s]=z+"Milliseconds",U)[q],K=q===d?this.$D+(j-this.$W):j;if(q===f||q===m){var fe=this.clone().set(v,1);fe.$d[k](K),fe.init(),this.$d=fe.set(v,Math.min(this.$D,fe.daysInMonth())).$d}else k&&this.$d[k](K);return this.init(),this},B.set=function(W,j){return this.clone().$set(W,j)},B.get=function(W){return this[X.p(W)]()},B.add=function(W,j){var U,q=this;W=Number(W);var z=X.p(j),k=function(ne){var be=Y(q);return X.w(be.date(be.date()+Math.round(ne*W)),q)};if(z===f)return this.set(f,this.$M+W);if(z===m)return this.set(m,this.$y+W);if(z===d)return k(1);if(z===h)return k(7);var K=(U={},U[a]=n,U[u]=r,U[o]=t,U)[z]||1,fe=this.$d.getTime()+W*K;return X.w(fe,this)},B.subtract=function(W,j){return this.add(-1*W,j)},B.format=function(W){var j=this,U=this.$locale();if(!this.isValid())return U.invalidDate||b;var q=W||"YYYY-MM-DDTHH:mm:ssZ",z=X.z(this),k=this.$H,K=this.$m,fe=this.$M,ne=U.weekdays,be=U.months,De=function(Me,ut,Ct,Xe){return Me&&(Me[ut]||Me(j,q))||Ct[ut].slice(0,Xe)},Ve=function(Me){return X.s(k%12||12,Me,"0")},rt=U.meridiem||function(Me,ut,Ct){var Xe=Me<12?"AM":"PM";return Ct?Xe.toLowerCase():Xe},At={YY:String(this.$y).slice(-2),YYYY:this.$y,M:fe+1,MM:X.s(fe+1,2,"0"),MMM:De(U.monthsShort,fe,be,3),MMMM:De(be,fe),D:this.$D,DD:X.s(this.$D,2,"0"),d:String(this.$W),dd:De(U.weekdaysMin,this.$W,ne,2),ddd:De(U.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(k),HH:X.s(k,2,"0"),h:Ve(1),hh:Ve(2),a:rt(k,K,!0),A:rt(k,K,!1),m:String(K),mm:X.s(K,2,"0"),s:String(this.$s),ss:X.s(this.$s,2,"0"),SSS:X.s(this.$ms,3,"0"),Z:z};return q.replace(S,function(Me,ut){return ut||At[Me]||z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(W,j,U){var q,z=X.p(j),k=Y(W),K=(k.utcOffset()-this.utcOffset())*n,fe=this-k,ne=X.m(this,k);return ne=(q={},q[m]=ne/12,q[f]=ne,q[p]=ne/3,q[h]=(fe-K)/6048e5,q[d]=(fe-K)/864e5,q[u]=fe/r,q[a]=fe/n,q[o]=fe/t,q)[z]||fe,U?ne:X.a(ne)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return V[this.$L]},B.locale=function(W,j){if(!W)return this.$L;var U=this.clone(),q=R(W,j,!0);return q&&(U.$L=q),U},B.clone=function(){return X.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},O}(),T=$.prototype;return Y.prototype=T,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",d],["$M",f],["$y",m],["$D",v]].forEach(function(O){T[O[1]]=function(B){return this.$g(B,O[0],O[1])}}),Y.extend=function(O,B){return O.$i||(O(B,$,Y),O.$i=!0),Y},Y.locale=R,Y.isDayjs=M,Y.unix=function(O){return Y(1e3*O)},Y.en=V[N],Y.Ls=V,Y.p={},Y})});const pA=Bn("context-view"),e9=gt(pA,"content"),Wbe=gt(pA,"block"),dae=_n(pA,"shadow");var y2;(function(i){i.onHide="onHide"})(y2||(y2={}));const t9=new U5;function XO(i){const[e,t]=he.useState();return he.useEffect(()=>{t(NS(i))},[]),e}function NS(i={}){const{shadowOutline:e=!0}=i,t=mn(pA,"fade-in");let n=ty(`.${pA}`);const r=(d,h)=>{const f=ty("."+e9),p=h||(i==null?void 0:i.render);if(!p)throw new Error("ContextView show Error: the render parameter is required!");uF(re.createElement("div",{ref:()=>{if(n){const m=lae(n,d);n.style.cssText=`
                    visibility: visible;
                    top: ${m.y}px;
                    left: ${m.x}px;
                `}}},p()),f)},s=()=>{if(n){const d=ty(`.${e9}`);d&&aae(d),n.style.visibility="hidden",t9.emit(y2.onHide)}},o=d=>{t9.subscribe(y2.onHide,d)},a=d=>{d.preventDefault(),d.stopPropagation(),s()},u=()=>{t9.unsubscribe(y2.onHide),s()};if(!n){n=document.createElement("div"),n.className=mn(t,vf.isMacOs()?"mac":""),n.style.visibility="hidden";const d=document.getElementById("molecule");d?d.appendChild(n):document.body.appendChild(n);const h=e===!1?"":dae;uF(re.createElement(re.Fragment,null,re.createElement("div",{className:Wbe,onClick:a,onContextMenu:a}),re.createElement("div",{className:mn(e9,h)})),n)}return{view:n,show:r,hide:s,onHide:o,dispose:u}}function q5(i){const{anchor:e,render:t}=i;if(!e)return;const n=NS({render:t}),r=o=>{o.target===o.currentTarget&&(o.preventDefault(),n.show({x:o.clientX,y:o.clientY},t))};e.addEventListener("contextmenu",r);const s=()=>{n.hide(),e.removeEventListener("contextmenu",r)};return Object.assign(Object.assign({},n),{dispose:s})}function di(i){return e=>e.id===i}function yK(...i){return function(...e){i.filter(t=>!!t).forEach(t=>t==null?void 0:t(...e))}}function hae(){return Date.now()+Math.round(Math.random()*1e3)}function SK(i,e){for(const t in e)typeof i[t]=="object"&&e[t]?i[t]=SK(i[t],e[t]):i[t]=e[t];return i}function Vbe(i){const e={},t=(n,r)=>{for(const s in r)if(s){const o=r[s],a=n?`${n}.${s}`:s;typeof o=="object"?t(a,o):e[a]=o}};return t("",i),e}function Hbe(i){let e={};for(const t in i)if(t){const n=t.split(".");let r="",s={},o=s;for(let a=0;a<n.length&&a!==n.length;++a){const u=n[a],d={[u]:""};r&&(o[r]=d),o=d,r=u,a===0&&(s=d)}o[r]=i[t],e=SK(e,s)}return e}function $be(i){let e,t,n;if(i.match(/^rgb/)){const s=i.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[];e=+s[1],t=+s[2],n=+s[3]}else{let s=+("0x"+i.slice(1,7));i.length<5&&(s=+("0x"+i.slice(1).replace(/./g,"$&$&").slice(0,6))),e=s>>16,t=s>>8&255,n=s&255}return Math.sqrt(.299*(e*e)+.587*(t*t)+.114*(n*n))>127.5?"light":"dark"}function zbe(i,e){return i*e}function Ube(i,e){const t=document.head.getElementsByClassName(e);if(t.length===0){const n=document.createElement("style");n.type="text/css",n.className=e,n.innerHTML=i,document.head.appendChild(n)}else t[0].innerHTML=i}const bg=Bn("menu"),fae=Bn("sub-menu"),jbe=_n(bg,"vertical"),Kbe=_n(bg,"horizontal"),QO=gt(bg,"item"),qbe=gt(bg,"divider"),gae=gt(bg,"check"),LK=_n(QO,"disabled"),KN=_n(QO,"active"),pae=gt(bg,"label"),mae=gt(bg,"content"),Gbe=gt(bg,"keybinding"),Ybe=gt(bg,"indicator"),Zbe=()=>re.createElement("li",{className:mn(QO,LK),role:"separator"},re.createElement("a",{className:qbe}));var Xbe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function dr(i){const{className:e,type:t,children:n}=i,r=Xbe(i,["className","type","children"]);return t?typeof t=="string"?re.createElement("span",Object.assign({className:mn(e,"codicon",t.includes("~spin")&&"codicon-spin",Bn(t.split("~spin")[0],"codicon"))},r)):t:n?re.createElement("span",Object.assign({className:e},r),n):null}var Qbe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function _ae(i){const{icon:e,disabled:t=!1,className:n,onClick:r,keybinding:s,render:o,children:a,name:u,title:d,id:h,sortIndex:f}=i,p=Qbe(i,["icon","disabled","className","onClick","keybinding","render","children","name","title","id","sortIndex"]),m={onClick:function(v){r==null||r(v,i)}};return re.createElement("li",Object.assign({className:mn(QO,n,t?LK:null),id:h==null?void 0:h.toString(),"data-sort":f},typeof d=="string"?{title:d}:{},m,p),re.createElement("div",{className:mae},re.createElement(dr,{type:e,className:gae}),re.createElement("span",{className:pae,title:typeof u=="string"?u:""},o?o(i):a),s?re.createElement("span",{className:Gbe},s):null))}var Jbe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t},p0;(function(i){i.Vertical="vertical",i.Horizontal="horizontal"})(p0||(p0={}));function vae(i){return i===p0.Horizontal}function bae(i){const{className:e,name:t,render:n,data:r=[],mode:s=p0.Vertical,icon:o,disabled:a=!1,children:u,onClick:d,title:h,sortIndex:f}=i,p=Jbe(i,["className","name","render","data","mode","icon","disabled","children","onClick","title","sortIndex"]),m=mn(fae,e),b=vae(s)?"down":"right",L=r.length>0?re.createElement(Za,Object.assign({className:m,style:{opacity:"0",pointerEvents:"none"},data:r,onClick:d},p)):re.createElement(Za,{className:m,style:{opacity:"0",pointerEvents:"none"},onClick:d},u);return re.createElement("li",Object.assign({className:mn(QO,a?LK:null),"data-submenu":!0,"data-mode":s,"data-sort":f},typeof h=="string"?{title:h}:{},p),re.createElement("div",{className:mae},typeof o=="string"?re.createElement(dr,{className:gae,type:o||""}):o,re.createElement("span",{className:pae},n?n(i):t),re.createElement(dr,{className:Ybe,type:`chevron-${b}`})),L)}var eCe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const tCe=i=>{if(i&&i!=null&&i.dataset.submenu){const e=Array.prototype.find.call(i.children,t=>t.nodeName==="UL");e.style.opacity="1",e.style.pointerEvents="auto",i.classList.add(KN)}},nCe=(i,e,t=!1)=>{if(!i||!e)return;const n=i.getBoundingClientRect(),r=lae(e,n);if(t)r.y=r.y+n.height;else{r.x=r.x+n.width;const s=getComputedStyle(e).getPropertyValue("font-size"),o=zbe(.5,parseInt(s.replace(/px/g,"")));r.y=r.y-o}e.style.top=`${r.y}px`,e.style.left=`${r.x}px`};function iCe(i,e){const{className:t,mode:n=p0.Vertical,data:r=[],children:s,onClick:o,trigger:a="hover",title:u}=i,d=eCe(i,["className","mode","data","children","onClick","trigger","title"]),h=he.useRef(null),f=he.useRef(!1);let p=ZO(s,{onClick:o});const m=a==="hover"?200:0,v=n===p0.Horizontal?Kbe:jbe,b=mn(bg,v,t);if(r.length>0){const V=M=>M.map(R=>{if(R.type==="divider")return re.createElement(Zbe,{key:R.id});const Y=yK(o,R.onClick);return R.data&&R.data.length>0?re.createElement(bae,Object.assign({key:R.id,mode:R.mode||n},R,{onClick:Y}),V(R.data)):re.createElement(_ae,Object.assign({},R,{key:R.id,onClick:Y}),R.name)});p=V(r)}const L=()=>{var V,M;(V=h.current)===null||V===void 0||V.querySelectorAll("ul").forEach(R=>{R.style.opacity="0",R.style.pointerEvents="none"}),(M=h.current)===null||M===void 0||M.querySelectorAll(`li.${KN}`).forEach(R=>{R.classList.remove(KN)})},S=wr.debounce(V=>{if(f.current){const M=document.elementsFromPoint(V.pageX,V.pageY),R=M.find(T=>T.nodeName==="UL"),Y=M.find(T=>T.nodeName==="LI");R&&(R.querySelectorAll("ul").forEach(T=>{T.style.opacity="0",T.style.pointerEvents="none"}),R.querySelectorAll(`li.${KN}`).forEach(T=>{T.classList.remove(KN)})),tCe(Y);const X=(Y==null?void 0:Y.querySelector("ul"))||void 0,$=(Y==null?void 0:Y.dataset.mode)||n;nCe(Y,X,vae($))}},m),y=V=>{V.preventDefault(),V.persist(),V.stopPropagation(),f.current=!0,S(V)},E=()=>{f.current=!1},A=()=>b!=null&&b.includes(fae)?{}:{onContextMenu:V=>{V.preventDefault(),V.persist(),V.stopPropagation()},onClick:V=>{V.preventDefault(),V.persist(),V.stopPropagation()},[uae(a)]:y,onMouseOut:E},N=he.useCallback(()=>{document.hidden&&L()},[]);return he.useEffect(()=>(window.addEventListener("contextmenu",L),window.addEventListener("click",L),window.addEventListener("visibilitychange",N),()=>{document.removeEventListener("contextmenu",L),window.removeEventListener("click",L),window.removeEventListener("visibilitychange",N)}),[]),he.useImperativeHandle(e,()=>({dispose:()=>{L()}})),re.createElement("ul",Object.assign({className:b,ref:h},typeof u=="string"?{title:u}:{},A(),d),p)}const Za=he.forwardRef(iCe);function lo(){return lo=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},lo.apply(null,arguments)}function Ko(i){"@babel/helpers - typeof";return Ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(i)}function rCe(i,e){if(Ko(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(Ko(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Cae(i){var e=rCe(i,"string");return Ko(e)=="symbol"?e:e+""}function en(i,e,t){return(e=Cae(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function GX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function wn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GX(Object(t),!0).forEach(function(n){en(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):GX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function sCe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function dF(i,e){if(i==null)return{};var t,n,r=sCe(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function H0(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function YX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Cae(n.key),n)}}function $0(i,e,t){return e&&YX(i.prototype,e),t&&YX(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function In(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function BV(i,e){return BV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},BV(i,e)}function fC(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&BV(i,e)}function hF(i){return hF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hF(i)}function wae(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wae=function(){return!!i})()}function oCe(i,e){if(e&&(Ko(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return In(i)}function gC(i){var e=wae();return function(){var t,n=hF(i);if(e){var r=hF(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return oCe(this,t)}}var yae=function(e){return+setTimeout(e,16)},Sae=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(yae=function(e){return window.requestAnimationFrame(e)},Sae=function(e){return window.cancelAnimationFrame(e)});var ZX=0,EK=new Map;function Lae(i){EK.delete(i)}var Uh=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;ZX+=1;var n=ZX;function r(s){if(s===0)Lae(n),e();else{var o=yae(function(){r(s-1)});EK.set(n,o)}}return r(t),n};Uh.cancel=function(i){var e=EK.get(i);return Lae(i),Sae(e)};function ny(i,e){if(!i)return!1;if(i.contains)return i.contains(e);for(var t=e;t;){if(t===i)return!0;t=t.parentNode}return!1}function XX(i){return i instanceof HTMLElement||i instanceof SVGElement}function aCe(i){return i&&Ko(i)==="object"&&XX(i.nativeElement)?i.nativeElement:XX(i)?i:null}function S2(i){var e=aCe(i);if(e)return e;if(i instanceof re.Component){var t;return(t=mb.findDOMNode)===null||t===void 0?void 0:t.call(mb,i)}return null}var Eae={exports:{}},Hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xK=Symbol.for("react.element"),DK=Symbol.for("react.portal"),G5=Symbol.for("react.fragment"),Y5=Symbol.for("react.strict_mode"),Z5=Symbol.for("react.profiler"),X5=Symbol.for("react.provider"),Q5=Symbol.for("react.context"),lCe=Symbol.for("react.server_context"),J5=Symbol.for("react.forward_ref"),e8=Symbol.for("react.suspense"),t8=Symbol.for("react.suspense_list"),n8=Symbol.for("react.memo"),i8=Symbol.for("react.lazy"),uCe=Symbol.for("react.offscreen"),xae;xae=Symbol.for("react.module.reference");function id(i){if(typeof i=="object"&&i!==null){var e=i.$$typeof;switch(e){case xK:switch(i=i.type,i){case G5:case Z5:case Y5:case e8:case t8:return i;default:switch(i=i&&i.$$typeof,i){case lCe:case Q5:case J5:case i8:case n8:case X5:return i;default:return e}}case DK:return e}}}Hr.ContextConsumer=Q5;Hr.ContextProvider=X5;Hr.Element=xK;Hr.ForwardRef=J5;Hr.Fragment=G5;Hr.Lazy=i8;Hr.Memo=n8;Hr.Portal=DK;Hr.Profiler=Z5;Hr.StrictMode=Y5;Hr.Suspense=e8;Hr.SuspenseList=t8;Hr.isAsyncMode=function(){return!1};Hr.isConcurrentMode=function(){return!1};Hr.isContextConsumer=function(i){return id(i)===Q5};Hr.isContextProvider=function(i){return id(i)===X5};Hr.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===xK};Hr.isForwardRef=function(i){return id(i)===J5};Hr.isFragment=function(i){return id(i)===G5};Hr.isLazy=function(i){return id(i)===i8};Hr.isMemo=function(i){return id(i)===n8};Hr.isPortal=function(i){return id(i)===DK};Hr.isProfiler=function(i){return id(i)===Z5};Hr.isStrictMode=function(i){return id(i)===Y5};Hr.isSuspense=function(i){return id(i)===e8};Hr.isSuspenseList=function(i){return id(i)===t8};Hr.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===G5||i===Z5||i===Y5||i===e8||i===t8||i===uCe||typeof i=="object"&&i!==null&&(i.$$typeof===i8||i.$$typeof===n8||i.$$typeof===X5||i.$$typeof===Q5||i.$$typeof===J5||i.$$typeof===xae||i.getModuleId!==void 0)};Hr.typeOf=id;Eae.exports=Hr;var L2=Eae.exports;function cCe(i,e,t){var n=he.useRef({});return(!("value"in n.current)||t(n.current.condition,e))&&(n.current.value=i(),n.current.condition=e),n.current.value}var Dae=function(e,t){typeof e=="function"?e(t):Ko(e)==="object"&&e&&"current"in e&&(e.current=t)},IK=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(s){t.forEach(function(o){Dae(o,s)})}},dCe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cCe(function(){return IK.apply(void 0,t)},t,function(r,s){return r.length!==s.length||r.every(function(o,a){return o!==s[a]})})},TK=function(e){var t,n,r=L2.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render)&&r.$$typeof!==L2.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==L2.ForwardRef)};function QX(i){return he.isValidElement(i)&&!L2.isFragment(i)}Number(he.version.split(".")[0])>=19;function qN(i,e,t,n){var r=mb.unstable_batchedUpdates?function(o){mb.unstable_batchedUpdates(t,o)}:t;return i!=null&&i.addEventListener&&i.addEventListener(e,r,n),{remove:function(){i!=null&&i.removeEventListener&&i.removeEventListener(e,r,n)}}}function pC(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Iae=he.forwardRef(function(i,e){var t=i.didUpdate,n=i.getContainer,r=i.children,s=he.useRef(),o=he.useRef();he.useImperativeHandle(e,function(){return{}});var a=he.useRef(!1);return!a.current&&pC()&&(o.current=n(),s.current=o.current.parentNode,a.current=!0),he.useEffect(function(){t==null||t(i)}),he.useEffect(function(){return o.current.parentNode===null&&s.current!==null&&s.current.appendChild(o.current),function(){var u;(u=o.current)===null||u===void 0||(u=u.parentNode)===null||u===void 0||u.removeChild(o.current)}},[]),o.current?mb.createPortal(r,o.current):null}),Tae={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,n(a)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(Tae);var hCe=Tae.exports;const nd=Wp(hCe);function fCe(i,e,t){return t?i[0]===e[0]:i[0]===e[0]&&i[1]===e[1]}function gCe(i,e,t){var n=i[e]||{};return wn(wn({},n),t)}function pCe(i,e,t,n){for(var r=t.points,s=Object.keys(i),o=0;o<s.length;o+=1){var a=s[o];if(fCe(i[a].points,r,n))return"".concat(e,"-placement-").concat(a)}return""}function mCe(i){if(Array.isArray(i))return i}function _Ce(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],u=!0,d=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(h){d=!0,r=h}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw r}}return a}}function WV(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function kae(i,e){if(i){if(typeof i=="string")return WV(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?WV(i,e):void 0}}function vCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(i,e){return mCe(i)||_Ce(i,e)||kae(i,e)||vCe()}const bCe=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(i==null?void 0:i.substr(0,4))};var CCe=he.createContext({}),wCe=function(i){fC(t,i);var e=gC(t);function t(){return H0(this,t),e.apply(this,arguments)}return $0(t,[{key:"render",value:function(){return this.props.children}}]),t}(he.Component);function VV(i){var e=he.useRef();e.current=i;var t=he.useCallback(function(){for(var n,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(s))},[]);return t}var JX=pC()?he.useLayoutEffect:he.useEffect,HV=function(e,t){var n=he.useRef(!0);JX(function(){return e(n.current)},t),JX(function(){return n.current=!1,function(){n.current=!0}},[])};function fF(i){var e=he.useRef(!1),t=he.useState(i),n=hs(t,2),r=n[0],s=n[1];he.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(a,u){u&&e.current||s(a)}return[r,o]}function yCe(i){if(Array.isArray(i))return WV(i)}function SCe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function LCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eQ(i){return yCe(i)||SCe(i)||kae(i)||LCe()}var $V={},ECe=function(e){};function xCe(i,e){}function DCe(i,e){}function ICe(){$V={}}function Nae(i,e,t){!e&&!$V[t]&&(i(!1,t),$V[t]=!0)}function r8(i,e){Nae(xCe,i,e)}function TCe(i,e){Nae(DCe,i,e)}r8.preMessage=ECe;r8.resetWarned=ICe;r8.noteOnce=TCe;function kCe(i){var e=he.useReducer(function(a){return a+1},0),t=hs(e,2),n=t[1],r=he.useRef(i),s=VV(function(){return r.current}),o=VV(function(a){r.current=typeof a=="function"?a(r.current):a,n()});return[s,o]}var Cv="none",fR="appear",gR="enter",pR="leave",tQ="none",Lh="prepare",Nw="start",Aw="active",kK="end",Aae="prepared";function nQ(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(i)]="webkit".concat(e),t["Moz".concat(i)]="moz".concat(e),t["ms".concat(i)]="MS".concat(e),t["O".concat(i)]="o".concat(e.toLowerCase()),t}function NCe(i,e){var t={animationend:nQ("Animation","AnimationEnd"),transitionend:nQ("Transition","TransitionEnd")};return i&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var ACe=NCe(pC(),typeof window<"u"?window:{}),Oae={};if(pC()){var OCe=document.createElement("div");Oae=OCe.style}var mR={};function Mae(i){if(mR[i])return mR[i];var e=ACe[i];if(e)for(var t=Object.keys(e),n=t.length,r=0;r<n;r+=1){var s=t[r];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Oae)return mR[i]=e[s],mR[i]}return""}var Rae=Mae("animationend"),Pae=Mae("transitionend"),Fae=!!(Rae&&Pae),iQ=Rae||"animationend",rQ=Pae||"transitionend";function sQ(i,e){if(!i)return null;if(Ko(i)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return i[t]}return"".concat(i,"-").concat(e)}const MCe=function(i){var e=he.useRef();function t(r){r&&(r.removeEventListener(rQ,i),r.removeEventListener(iQ,i))}function n(r){e.current&&e.current!==r&&t(e.current),r&&r!==e.current&&(r.addEventListener(rQ,i),r.addEventListener(iQ,i),e.current=r)}return he.useEffect(function(){return function(){t(e.current)}},[]),[n,t]};var Bae=pC()?he.useLayoutEffect:he.useEffect;const RCe=function(){var i=he.useRef(null);function e(){Uh.cancel(i.current)}function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Uh(function(){r<=1?n({isCanceled:function(){return s!==i.current}}):t(n,r-1)});i.current=s}return he.useEffect(function(){return function(){e()}},[]),[t,e]};var PCe=[Lh,Nw,Aw,kK],FCe=[Lh,Aae],Wae=!1,BCe=!0;function Vae(i){return i===Aw||i===kK}const WCe=function(i,e,t){var n=fF(tQ),r=hs(n,2),s=r[0],o=r[1],a=RCe(),u=hs(a,2),d=u[0],h=u[1];function f(){o(Lh,!0)}var p=e?FCe:PCe;return Bae(function(){if(s!==tQ&&s!==kK){var m=p.indexOf(s),v=p[m+1],b=t(s);b===Wae?o(v,!0):v&&d(function(L){function S(){L.isCanceled()||o(v,!0)}b===!0?S():Promise.resolve(b).then(S)})}},[i,s]),he.useEffect(function(){return function(){h()}},[]),[f,s]};function VCe(i,e,t,n){var r=n.motionEnter,s=r===void 0?!0:r,o=n.motionAppear,a=o===void 0?!0:o,u=n.motionLeave,d=u===void 0?!0:u,h=n.motionDeadline,f=n.motionLeaveImmediately,p=n.onAppearPrepare,m=n.onEnterPrepare,v=n.onLeavePrepare,b=n.onAppearStart,L=n.onEnterStart,S=n.onLeaveStart,y=n.onAppearActive,E=n.onEnterActive,A=n.onLeaveActive,N=n.onAppearEnd,V=n.onEnterEnd,M=n.onLeaveEnd,R=n.onVisibleChanged,Y=fF(),X=hs(Y,2),$=X[0],T=X[1],O=kCe(Cv),B=hs(O,2),W=B[0],j=B[1],U=fF(null),q=hs(U,2),z=q[0],k=q[1],K=W(),fe=he.useRef(!1),ne=he.useRef(null);function be(){return t()}var De=he.useRef(!1);function Ve(){j(Cv),k(null,!0)}var rt=VV(function(jn){var Pt=W();if(Pt!==Cv){var pn=be();if(!(jn&&!jn.deadline&&jn.target!==pn)){var Ci=De.current,Te;Pt===fR&&Ci?Te=N==null?void 0:N(pn,jn):Pt===gR&&Ci?Te=V==null?void 0:V(pn,jn):Pt===pR&&Ci&&(Te=M==null?void 0:M(pn,jn)),Ci&&Te!==!1&&Ve()}}}),At=MCe(rt),Me=hs(At,1),ut=Me[0],Ct=function(Pt){switch(Pt){case fR:return en(en(en({},Lh,p),Nw,b),Aw,y);case gR:return en(en(en({},Lh,m),Nw,L),Aw,E);case pR:return en(en(en({},Lh,v),Nw,S),Aw,A);default:return{}}},Xe=he.useMemo(function(){return Ct(K)},[K]),sn=WCe(K,!i,function(jn){if(jn===Lh){var Pt=Xe[Lh];return Pt?Pt(be()):Wae}if(Sn in Xe){var pn;k(((pn=Xe[Sn])===null||pn===void 0?void 0:pn.call(Xe,be(),null))||null)}return Sn===Aw&&K!==Cv&&(ut(be()),h>0&&(clearTimeout(ne.current),ne.current=setTimeout(function(){rt({deadline:!0})},h))),Sn===Aae&&Ve(),BCe}),Kt=hs(sn,2),dn=Kt[0],Sn=Kt[1],Wn=Vae(Sn);De.current=Wn,Bae(function(){T(e);var jn=fe.current;fe.current=!0;var Pt;!jn&&e&&a&&(Pt=fR),jn&&e&&s&&(Pt=gR),(jn&&!e&&d||!jn&&f&&!e&&d)&&(Pt=pR);var pn=Ct(Pt);Pt&&(i||pn[Lh])?(j(Pt),dn()):j(Cv)},[e]),he.useEffect(function(){(K===fR&&!a||K===gR&&!s||K===pR&&!d)&&j(Cv)},[a,s,d]),he.useEffect(function(){return function(){fe.current=!1,clearTimeout(ne.current)}},[]);var Jn=he.useRef(!1);he.useEffect(function(){$&&(Jn.current=!0),$!==void 0&&K===Cv&&((Jn.current||$)&&(R==null||R($)),Jn.current=!0)},[$,K]);var si=z;return Xe[Lh]&&Sn===Nw&&(si=wn({transition:"none"},si)),[K,Sn,si,$??e]}function HCe(i){var e=i;Ko(i)==="object"&&(e=i.transitionSupport);function t(r,s){return!!(r.motionName&&e&&s!==!1)}var n=he.forwardRef(function(r,s){var o=r.visible,a=o===void 0?!0:o,u=r.removeOnLeave,d=u===void 0?!0:u,h=r.forceRender,f=r.children,p=r.motionName,m=r.leavedClassName,v=r.eventProps,b=he.useContext(CCe),L=b.motion,S=t(r,L),y=he.useRef(),E=he.useRef();function A(){try{return y.current instanceof HTMLElement?y.current:S2(E.current)}catch{return null}}var N=VCe(S,a,A,r),V=hs(N,4),M=V[0],R=V[1],Y=V[2],X=V[3],$=he.useRef(X);X&&($.current=!0);var T=he.useCallback(function(z){y.current=z,Dae(s,z)},[s]),O,B=wn(wn({},v),{},{visible:a});if(!f)O=null;else if(M===Cv)X?O=f(wn({},B),T):!d&&$.current&&m?O=f(wn(wn({},B),{},{className:m}),T):h||!d&&!m?O=f(wn(wn({},B),{},{style:{display:"none"}}),T):O=null;else{var W;R===Lh?W="prepare":Vae(R)?W="active":R===Nw&&(W="start");var j=sQ(p,"".concat(M,"-").concat(W));O=f(wn(wn({},B),{},{className:nd(sQ(p,M),en(en({},j,j&&W),p,typeof p=="string")),style:Y}),T)}if(he.isValidElement(O)&&TK(O)){var U=O,q=U.ref;q||(O=he.cloneElement(O,{ref:T}))}return he.createElement(wCe,{ref:E},O)});return n.displayName="CSSMotion",n}const AS=HCe(Fae);var zV="add",UV="keep",jV="remove",n9="removed";function $Ce(i){var e;return i&&Ko(i)==="object"&&"key"in i?e=i:e={key:i},wn(wn({},e),{},{key:String(e.key)})}function KV(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return i.map($Ce)}function zCe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,r=e.length,s=KV(i),o=KV(e);s.forEach(function(d){for(var h=!1,f=n;f<r;f+=1){var p=o[f];if(p.key===d.key){n<f&&(t=t.concat(o.slice(n,f).map(function(m){return wn(wn({},m),{},{status:zV})})),n=f),t.push(wn(wn({},p),{},{status:UV})),n+=1,h=!0;break}}h||t.push(wn(wn({},d),{},{status:jV}))}),n<r&&(t=t.concat(o.slice(n).map(function(d){return wn(wn({},d),{},{status:zV})})));var a={};t.forEach(function(d){var h=d.key;a[h]=(a[h]||0)+1});var u=Object.keys(a).filter(function(d){return a[d]>1});return u.forEach(function(d){t=t.filter(function(h){var f=h.key,p=h.status;return f!==d||p!==jV}),t.forEach(function(h){h.key===d&&(h.status=UV)})}),t}var UCe=["component","children","onVisibleChanged","onAllRemoved"],jCe=["status"],KCe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function qCe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:AS,t=function(n){fC(s,n);var r=gC(s);function s(){var o;H0(this,s);for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return o=r.call.apply(r,[this].concat(u)),en(In(o),"state",{keyEntities:[]}),en(In(o),"removeKey",function(h){var f=o.state.keyEntities,p=f.map(function(m){return m.key!==h?m:wn(wn({},m),{},{status:n9})});return o.setState({keyEntities:p}),p.filter(function(m){var v=m.status;return v!==n9}).length}),o}return $0(s,[{key:"render",value:function(){var a=this,u=this.state.keyEntities,d=this.props,h=d.component,f=d.children,p=d.onVisibleChanged,m=d.onAllRemoved,v=dF(d,UCe),b=h||he.Fragment,L={};return KCe.forEach(function(S){L[S]=v[S],delete v[S]}),delete v.keys,he.createElement(b,v,u.map(function(S,y){var E=S.status,A=dF(S,jCe),N=E===zV||E===UV;return he.createElement(e,lo({},L,{key:A.key,visible:N,eventProps:A,onVisibleChanged:function(M){if(p==null||p(M,{key:A.key}),!M){var R=a.removeKey(A.key);R===0&&m&&m()}}}),function(V,M){return f(wn(wn({},V),{},{index:y}),M)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,u){var d=a.keys,h=u.keyEntities,f=KV(d),p=zCe(h,f);return{keyEntities:p.filter(function(m){var v=h.find(function(b){var L=b.key;return m.key===L});return!(v&&v.status===n9&&m.status===jV)})}}}]),s}(he.Component);return en(t,"defaultProps",{component:"div"}),t}qCe(Fae);function Hae(i){var e=i.prefixCls,t=i.motion,n=i.animation,r=i.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function GCe(i){var e=i.prefixCls,t=i.visible,n=i.zIndex,r=i.mask,s=i.maskMotion,o=i.maskAnimation,a=i.maskTransitionName;if(!r)return null;var u={};return(s||a||o)&&(u=wn({motionAppear:!0},Hae({motion:s,prefixCls:e,transitionName:a,animation:o}))),he.createElement(AS,lo({},u,{visible:t,removeOnLeave:!0}),function(d){var h=d.className;return he.createElement("div",{style:{zIndex:n},className:nd("".concat(e,"-mask"),h)})})}function oQ(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function aQ(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oQ(Object(t),!0).forEach(function(n){YCe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):oQ(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function qV(i){"@babel/helpers - typeof";return qV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qV(i)}function YCe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var wN,ZCe={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function gF(){if(wN!==void 0)return wN;wN="";var i=document.createElement("p").style,e="Transform";for(var t in ZCe)t+e in i&&(wN=t);return wN}function $ae(){return gF()?"".concat(gF(),"TransitionProperty"):"transitionProperty"}function s8(){return gF()?"".concat(gF(),"Transform"):"transform"}function lQ(i,e){var t=$ae();t&&(i.style[t]=e,t!=="transitionProperty"&&(i.style.transitionProperty=e))}function i9(i,e){var t=s8();t&&(i.style[t]=e,t!=="transform"&&(i.style.transform=e))}function XCe(i){return i.style.transitionProperty||i.style[$ae()]}function QCe(i){var e=window.getComputedStyle(i,null),t=e.getPropertyValue("transform")||e.getPropertyValue(s8());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var JCe=/matrix\((.*)\)/,ewe=/matrix3d\((.*)\)/;function twe(i,e){var t=window.getComputedStyle(i,null),n=t.getPropertyValue("transform")||t.getPropertyValue(s8());if(n&&n!=="none"){var r,s=n.match(JCe);if(s)s=s[1],r=s.split(",").map(function(a){return parseFloat(a,10)}),r[4]=e.x,r[5]=e.y,i9(i,"matrix(".concat(r.join(","),")"));else{var o=n.match(ewe)[1];r=o.split(",").map(function(a){return parseFloat(a,10)}),r[12]=e.x,r[13]=e.y,i9(i,"matrix3d(".concat(r.join(","),")"))}}else i9(i,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var nwe=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,JO;function uQ(i){var e=i.style.display;i.style.display="none",i.offsetHeight,i.style.display=e}function iy(i,e,t){var n=t;if(qV(e)==="object"){for(var r in e)e.hasOwnProperty(r)&&iy(i,r,e[r]);return}if(typeof n<"u"){typeof n=="number"&&(n="".concat(n,"px")),i.style[e]=n;return}return JO(i,e)}function iwe(i){var e,t,n,r=i.ownerDocument,s=r.body,o=r&&r.documentElement;return e=i.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=o.clientLeft||s.clientLeft||0,n-=o.clientTop||s.clientTop||0,{left:t,top:n}}function zae(i,e){var t=i["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=i.document;t=r.documentElement[n],typeof t!="number"&&(t=r.body[n])}return t}function Uae(i){return zae(i)}function jae(i){return zae(i,!0)}function mA(i){var e=iwe(i),t=i.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=Uae(n),e.top+=jae(n),e}function NK(i){return i!=null&&i==i.window}function Kae(i){return NK(i)?i.document:i.nodeType===9?i:i.ownerDocument}function rwe(i,e,t){var n=t,r="",s=Kae(i);return n=n||s.defaultView.getComputedStyle(i,null),n&&(r=n.getPropertyValue(e)||n[e]),r}var swe=new RegExp("^(".concat(nwe,")(?!px)[a-z%]+$"),"i"),owe=/^(top|right|bottom|left)$/,r9="currentStyle",s9="runtimeStyle",J0="left",awe="px";function lwe(i,e){var t=i[r9]&&i[r9][e];if(swe.test(t)&&!owe.test(e)){var n=i.style,r=n[J0],s=i[s9][J0];i[s9][J0]=i[r9][J0],n[J0]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+awe,n[J0]=r,i[s9][J0]=s}return t===""?"auto":t}typeof window<"u"&&(JO=window.getComputedStyle?rwe:lwe);function _R(i,e){return i==="left"?e.useCssRight?"right":i:e.useCssBottom?"bottom":i}function cQ(i){if(i==="left")return"right";if(i==="right")return"left";if(i==="top")return"bottom";if(i==="bottom")return"top"}function dQ(i,e,t){iy(i,"position")==="static"&&(i.style.position="relative");var n=-999,r=-999,s=_R("left",t),o=_R("top",t),a=cQ(s),u=cQ(o);s!=="left"&&(n=999),o!=="top"&&(r=999);var d="",h=mA(i);("left"in e||"top"in e)&&(d=XCe(i)||"",lQ(i,"none")),"left"in e&&(i.style[a]="",i.style[s]="".concat(n,"px")),"top"in e&&(i.style[u]="",i.style[o]="".concat(r,"px")),uQ(i);var f=mA(i),p={};for(var m in e)if(e.hasOwnProperty(m)){var v=_R(m,t),b=m==="left"?n:r,L=h[m]-f[m];v===m?p[v]=b+L:p[v]=b-L}iy(i,p),uQ(i),("left"in e||"top"in e)&&lQ(i,d);var S={};for(var y in e)if(e.hasOwnProperty(y)){var E=_R(y,t),A=e[y]-h[y];y===E?S[E]=p[E]+A:S[E]=p[E]-A}iy(i,S)}function uwe(i,e){var t=mA(i),n=QCe(i),r={x:n.x,y:n.y};"left"in e&&(r.x=n.x+e.left-t.left),"top"in e&&(r.y=n.y+e.top-t.top),twe(i,r)}function cwe(i,e,t){if(t.ignoreShake){var n=mA(i),r=n.left.toFixed(0),s=n.top.toFixed(0),o=e.left.toFixed(0),a=e.top.toFixed(0);if(r===o&&s===a)return}t.useCssRight||t.useCssBottom?dQ(i,e,t):t.useCssTransform&&s8()in document.body.style?uwe(i,e):dQ(i,e,t)}function AK(i,e){for(var t=0;t<i.length;t++)e(i[t])}function qae(i){return JO(i,"boxSizing")==="border-box"}var dwe=["margin","border","padding"],GV=-1,hwe=2,YV=1,fwe=0;function gwe(i,e,t){var n={},r=i.style,s;for(s in e)e.hasOwnProperty(s)&&(n[s]=r[s],r[s]=e[s]);t.call(i);for(s in e)e.hasOwnProperty(s)&&(r[s]=n[s])}function GN(i,e,t){var n=0,r,s,o;for(s=0;s<e.length;s++)if(r=e[s],r)for(o=0;o<t.length;o++){var a=void 0;r==="border"?a="".concat(r).concat(t[o],"Width"):a=r+t[o],n+=parseFloat(JO(i,a))||0}return n}var Kf={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};AK(["Width","Height"],function(i){Kf["doc".concat(i)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(i)],t.body["scroll".concat(i)],Kf["viewport".concat(i)](t))},Kf["viewport".concat(i)]=function(e){var t="client".concat(i),n=e.document,r=n.body,s=n.documentElement,o=s[t];return n.compatMode==="CSS1Compat"&&o||r&&r[t]||o}});function hQ(i,e,t){var n=t;if(NK(i))return e==="width"?Kf.viewportWidth(i):Kf.viewportHeight(i);if(i.nodeType===9)return e==="width"?Kf.docWidth(i):Kf.docHeight(i);var r=e==="width"?["Left","Right"]:["Top","Bottom"],s=Math.floor(e==="width"?i.getBoundingClientRect().width:i.getBoundingClientRect().height),o=qae(i),a=0;(s==null||s<=0)&&(s=void 0,a=JO(i,e),(a==null||Number(a)<0)&&(a=i.style[e]||0),a=Math.floor(parseFloat(a))||0),n===void 0&&(n=o?YV:GV);var u=s!==void 0||o,d=s||a;return n===GV?u?d-GN(i,["border","padding"],r):a:u?n===YV?d:d+(n===hwe?-GN(i,["border"],r):GN(i,["margin"],r)):a+GN(i,dwe.slice(n),r)}var pwe={position:"absolute",visibility:"hidden",display:"block"};function fQ(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n,r=e[0];return r.offsetWidth!==0?n=hQ.apply(void 0,e):gwe(r,pwe,function(){n=hQ.apply(void 0,e)}),n}AK(["width","height"],function(i){var e=i.charAt(0).toUpperCase()+i.slice(1);Kf["outer".concat(e)]=function(n,r){return n&&fQ(n,i,r?fwe:YV)};var t=i==="width"?["Left","Right"]:["Top","Bottom"];Kf[i]=function(n,r){var s=r;if(s!==void 0){if(n){var o=qae(n);return o&&(s+=GN(n,["padding","border"],t)),iy(n,i,s)}return}return n&&fQ(n,i,GV)}});function Gae(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}var hi={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Kae,offset:function(e,t,n){if(typeof t<"u")cwe(e,t,n||{});else return mA(e)},isWindow:NK,each:AK,css:iy,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var r=e.overflow;if(r)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Gae,getWindowScrollLeft:function(e){return Uae(e)},getWindowScrollTop:function(e){return jae(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)hi.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Gae(hi,Kf);var o9=hi.getParent;function ZV(i){if(hi.isWindow(i)||i.nodeType===9)return null;var e=hi.getDocument(i),t=e.body,n,r=hi.css(i,"position"),s=r==="fixed"||r==="absolute";if(!s)return i.nodeName.toLowerCase()==="html"?null:o9(i);for(n=o9(i);n&&n!==t&&n.nodeType!==9;n=o9(n))if(r=hi.css(n,"position"),r!=="static")return n;return null}var gQ=hi.getParent;function mwe(i){if(hi.isWindow(i)||i.nodeType===9)return!1;var e=hi.getDocument(i),t=e.body,n=null;for(n=gQ(i);n&&n!==t&&n!==e;n=gQ(n)){var r=hi.css(n,"position");if(r==="fixed")return!0}return!1}function OK(i,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=ZV(i),r=hi.getDocument(i),s=r.defaultView||r.parentWindow,o=r.body,a=r.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==o&&n!==a&&hi.css(n,"overflow")!=="visible"){var u=hi.offset(n);u.left+=n.clientLeft,u.top+=n.clientTop,t.top=Math.max(t.top,u.top),t.right=Math.min(t.right,u.left+n.clientWidth),t.bottom=Math.min(t.bottom,u.top+n.clientHeight),t.left=Math.max(t.left,u.left)}else if(n===o||n===a)break;n=ZV(n)}var d=null;if(!hi.isWindow(i)&&i.nodeType!==9){d=i.style.position;var h=hi.css(i,"position");h==="absolute"&&(i.style.position="fixed")}var f=hi.getWindowScrollLeft(s),p=hi.getWindowScrollTop(s),m=hi.viewportWidth(s),v=hi.viewportHeight(s),b=a.scrollWidth,L=a.scrollHeight,S=window.getComputedStyle(o);if(S.overflowX==="hidden"&&(b=s.innerWidth),S.overflowY==="hidden"&&(L=s.innerHeight),i.style&&(i.style.position=d),e||mwe(i))t.left=Math.max(t.left,f),t.top=Math.max(t.top,p),t.right=Math.min(t.right,f+m),t.bottom=Math.min(t.bottom,p+v);else{var y=Math.max(b,f+m);t.right=Math.min(t.right,y);var E=Math.max(L,p+v);t.bottom=Math.min(t.bottom,E)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function _we(i,e,t,n){var r=hi.clone(i),s={width:e.width,height:e.height};return n.adjustX&&r.left<t.left&&(r.left=t.left),n.resizeWidth&&r.left>=t.left&&r.left+s.width>t.right&&(s.width-=r.left+s.width-t.right),n.adjustX&&r.left+s.width>t.right&&(r.left=Math.max(t.right-s.width,t.left)),n.adjustY&&r.top<t.top&&(r.top=t.top),n.resizeHeight&&r.top>=t.top&&r.top+s.height>t.bottom&&(s.height-=r.top+s.height-t.bottom),n.adjustY&&r.top+s.height>t.bottom&&(r.top=Math.max(t.bottom-s.height,t.top)),hi.mix(r,s)}function MK(i){var e,t,n;if(!hi.isWindow(i)&&i.nodeType!==9)e=hi.offset(i),t=hi.outerWidth(i),n=hi.outerHeight(i);else{var r=hi.getWindow(i);e={left:hi.getWindowScrollLeft(r),top:hi.getWindowScrollTop(r)},t=hi.viewportWidth(r),n=hi.viewportHeight(r)}return e.width=t,e.height=n,e}function pQ(i,e){var t=e.charAt(0),n=e.charAt(1),r=i.width,s=i.height,o=i.left,a=i.top;return t==="c"?a+=s/2:t==="b"&&(a+=s),n==="c"?o+=r/2:n==="r"&&(o+=r),{left:o,top:a}}function vR(i,e,t,n,r){var s=pQ(e,t[1]),o=pQ(i,t[0]),a=[o.left-s.left,o.top-s.top];return{left:Math.round(i.left-a[0]+n[0]-r[0]),top:Math.round(i.top-a[1]+n[1]-r[1])}}function mQ(i,e,t){return i.left<t.left||i.left+e.width>t.right}function _Q(i,e,t){return i.top<t.top||i.top+e.height>t.bottom}function vwe(i,e,t){return i.left>t.right||i.left+e.width<t.left}function bwe(i,e,t){return i.top>t.bottom||i.top+e.height<t.top}function bR(i,e,t){var n=[];return hi.each(i,function(r){n.push(r.replace(e,function(s){return t[s]}))}),n}function CR(i,e){return i[e]=-i[e],i}function vQ(i,e){var t;return/%$/.test(i)?t=parseInt(i.substring(0,i.length-1),10)/100*e:t=parseInt(i,10),t||0}function bQ(i,e){i[0]=vQ(i[0],e.width),i[1]=vQ(i[1],e.height)}function Yae(i,e,t,n){var r=t.points,s=t.offset||[0,0],o=t.targetOffset||[0,0],a=t.overflow,u=t.source||i;s=[].concat(s),o=[].concat(o),a=a||{};var d={},h=0,f=!!(a&&a.alwaysByViewport),p=OK(u,f),m=MK(u);bQ(s,m),bQ(o,e);var v=vR(m,e,r,s,o),b=hi.merge(m,v);if(p&&(a.adjustX||a.adjustY)&&n){if(a.adjustX&&mQ(v,m,p)){var L=bR(r,/[lr]/gi,{l:"r",r:"l"}),S=CR(s,0),y=CR(o,0),E=vR(m,e,L,S,y);vwe(E,m,p)||(h=1,r=L,s=S,o=y)}if(a.adjustY&&_Q(v,m,p)){var A=bR(r,/[tb]/gi,{t:"b",b:"t"}),N=CR(s,1),V=CR(o,1),M=vR(m,e,A,N,V);bwe(M,m,p)||(h=1,r=A,s=N,o=V)}h&&(v=vR(m,e,r,s,o),hi.mix(b,v));var R=mQ(v,m,p),Y=_Q(v,m,p);if(R||Y){var X=r;R&&(X=bR(r,/[lr]/gi,{l:"r",r:"l"})),Y&&(X=bR(r,/[tb]/gi,{t:"b",b:"t"})),r=X,s=t.offset||[0,0],o=t.targetOffset||[0,0]}d.adjustX=a.adjustX&&R,d.adjustY=a.adjustY&&Y,(d.adjustX||d.adjustY)&&(b=_we(v,m,p,d))}return b.width!==m.width&&hi.css(u,"width",hi.width(u)+b.width-m.width),b.height!==m.height&&hi.css(u,"height",hi.height(u)+b.height-m.height),hi.offset(u,{left:b.left,top:b.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:r,offset:s,targetOffset:o,overflow:d}}function Cwe(i,e){var t=OK(i,e),n=MK(i);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function RK(i,e,t){var n=t.target||e,r=MK(n),s=!Cwe(n,t.overflow&&t.overflow.alwaysByViewport);return Yae(i,r,t,s)}RK.__getOffsetParent=ZV;RK.__getVisibleRectForElement=OK;function wwe(i,e,t){var n,r,s=hi.getDocument(i),o=s.defaultView||s.parentWindow,a=hi.getWindowScrollLeft(o),u=hi.getWindowScrollTop(o),d=hi.viewportWidth(o),h=hi.viewportHeight(o);"pageX"in e?n=e.pageX:n=a+e.clientX,"pageY"in e?r=e.pageY:r=u+e.clientY;var f={left:n,top:r,width:0,height:0},p=n>=0&&n<=a+d&&r>=0&&r<=u+h,m=[t.points[0],"cc"];return Yae(i,f,aQ(aQ({},t),{},{points:m}),p)}function ywe(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function r(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,u=n.has(s);if(r8(!u,"Warning: There may be circular references"),u)return!1;if(s===o)return!0;if(t&&a>1)return!1;n.add(s);var d=a+1;if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(var h=0;h<s.length;h++)if(!r(s[h],o[h],d))return!1;return!0}if(s&&o&&Ko(s)==="object"&&Ko(o)==="object"){var f=Object.keys(s);return f.length!==Object.keys(o).length?!1:f.every(function(p){return r(s[p],o[p],d)})}return!1}return r(i,e)}const Swe=function(i){if(!i)return!1;if(i instanceof Element){if(i.offsetParent)return!0;if(i.getBBox){var e=i.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(i.getBoundingClientRect){var r=i.getBoundingClientRect(),s=r.width,o=r.height;if(s||o)return!0}}return!1},Lwe=function(i,e){var t=re.useRef(!1),n=re.useRef(null);function r(){window.clearTimeout(n.current)}function s(o){if(r(),!t.current||o===!0){if(i(o)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,s()},e)}return[s,function(){t.current=!1,r()}]};var Zae=function(){if(typeof Map<"u")return Map;function i(e,t){var n=-1;return e.some(function(r,s){return r[0]===t?(n=s,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=i(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(t,n){var r=i(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,r=i(n,t);~r&&n.splice(r,1)},e.prototype.has=function(t){return!!~i(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var r=0,s=this.__entries__;r<s.length;r++){var o=s[r];t.call(n,o[1],o[0])}},e}()}(),XV=typeof window<"u"&&typeof document<"u"&&window.document===document,pF=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Ewe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pF):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),xwe=2;function Dwe(i,e){var t=!1,n=!1,r=0;function s(){t&&(t=!1,i()),n&&a()}function o(){Ewe(s)}function a(){var u=Date.now();if(t){if(u-r<xwe)return;n=!0}else t=!0,n=!1,setTimeout(o,e);r=u}return a}var Iwe=20,Twe=["top","right","bottom","left","width","height","size","weight"],kwe=typeof MutationObserver<"u",Nwe=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Dwe(this.refresh.bind(this),Iwe)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!XV||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),kwe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!XV||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,r=Twe.some(function(s){return!!~n.indexOf(s)});r&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),Xae=function(i,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Object.defineProperty(i,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return i},Fy=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||pF},Qae=o8(0,0,0,0);function mF(i){return parseFloat(i)||0}function CQ(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,r){var s=i["border-"+r+"-width"];return n+mF(s)},0)}function Awe(i){for(var e=["top","right","bottom","left"],t={},n=0,r=e;n<r.length;n++){var s=r[n],o=i["padding-"+s];t[s]=mF(o)}return t}function Owe(i){var e=i.getBBox();return o8(0,0,e.width,e.height)}function Mwe(i){var e=i.clientWidth,t=i.clientHeight;if(!e&&!t)return Qae;var n=Fy(i).getComputedStyle(i),r=Awe(n),s=r.left+r.right,o=r.top+r.bottom,a=mF(n.width),u=mF(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=CQ(n,"left","right")+s),Math.round(u+o)!==t&&(u-=CQ(n,"top","bottom")+o)),!Pwe(i)){var d=Math.round(a+s)-e,h=Math.round(u+o)-t;Math.abs(d)!==1&&(a-=d),Math.abs(h)!==1&&(u-=h)}return o8(r.left,r.top,a,u)}var Rwe=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof Fy(i).SVGGraphicsElement}:function(i){return i instanceof Fy(i).SVGElement&&typeof i.getBBox=="function"}}();function Pwe(i){return i===Fy(i).document.documentElement}function Fwe(i){return XV?Rwe(i)?Owe(i):Mwe(i):Qae}function Bwe(i){var e=i.x,t=i.y,n=i.width,r=i.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return Xae(o,{x:e,y:t,width:n,height:r,top:t,right:e+n,bottom:r+t,left:e}),o}function o8(i,e,t,n){return{x:i,y:e,width:t,height:n}}var Wwe=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=o8(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=Fwe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),Vwe=function(){function i(e,t){var n=Bwe(t);Xae(this,{target:e,contentRect:n})}return i}(),Hwe=function(){function i(e,t,n){if(this.activeObservations_=[],this.observations_=new Zae,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Fy(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Wwe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Fy(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Vwe(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),Jae=typeof WeakMap<"u"?new WeakMap:new Zae,ele=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Nwe.getInstance(),n=new Hwe(e,t,this);Jae.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){ele.prototype[i]=function(){var e;return(e=Jae.get(this))[i].apply(e,arguments)}});var tle=function(){return typeof pF.ResizeObserver<"u"?pF.ResizeObserver:ele}();function $we(i,e){return i===e?!0:!i||!e?!1:"pageX"in e&&"pageY"in e?i.pageX===e.pageX&&i.pageY===e.pageY:"clientX"in e&&"clientY"in e?i.clientX===e.clientX&&i.clientY===e.clientY:!1}function zwe(i,e){i!==document.activeElement&&ny(e,i)&&typeof i.focus=="function"&&i.focus()}function wQ(i,e){var t=null,n=null;function r(o){var a=hs(o,1),u=a[0].target;if(document.documentElement.contains(u)){var d=u.getBoundingClientRect(),h=d.width,f=d.height,p=Math.floor(h),m=Math.floor(f);(t!==p||n!==m)&&Promise.resolve().then(function(){e({width:p,height:m})}),t=p,n=m}}var s=new tle(r);return i&&s.observe(i),function(){s.disconnect()}}function yQ(i){return typeof i!="function"?null:i()}function SQ(i){return Ko(i)!=="object"||!i?null:i}var Uwe=function(e,t){var n=e.children,r=e.disabled,s=e.target,o=e.align,a=e.onAlign,u=e.monitorWindowResize,d=e.monitorBufferTime,h=d===void 0?0:d,f=re.useRef({}),p=re.useRef(),m=re.Children.only(n),v=re.useRef({});v.current.disabled=r,v.current.target=s,v.current.align=o,v.current.onAlign=a;var b=Lwe(function(){var $=v.current,T=$.disabled,O=$.target,B=$.align,W=$.onAlign,j=p.current;if(!T&&O&&j){var U,q=yQ(O),z=SQ(O);f.current.element=q,f.current.point=z,f.current.align=B;var k=document,K=k.activeElement;return q&&Swe(q)?U=RK(j,q,B):z&&(U=wwe(j,z,B)),zwe(K,j),W&&U&&W(j,U),!0}return!1},h),L=hs(b,2),S=L[0],y=L[1],E=re.useState(),A=hs(E,2),N=A[0],V=A[1],M=re.useState(),R=hs(M,2),Y=R[0],X=R[1];return HV(function(){V(yQ(s)),X(SQ(s))}),re.useEffect(function(){(f.current.element!==N||!$we(f.current.point,Y)||!ywe(f.current.align,o))&&S()}),re.useEffect(function(){var $=wQ(p.current,S);return $},[p.current]),re.useEffect(function(){var $=wQ(N,S);return $},[N]),re.useEffect(function(){r?y():S()},[r]),re.useEffect(function(){if(u){var $=qN(window,"resize",S);return $.remove}},[u]),re.useEffect(function(){return function(){y()}},[]),re.useImperativeHandle(t,function(){return{forceAlign:function(){return S(!0)}}}),re.isValidElement(m)&&(m=re.cloneElement(m,{ref:IK(m.ref,p)})),m},nle=re.forwardRef(Uwe);nle.displayName="Align";function QV(){QV=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(j,U,q){j[U]=q.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(j,U,q){return Object.defineProperty(j,U,{value:q,enumerable:!0,configurable:!0,writable:!0}),j[U]}try{d({},"")}catch{d=function(q,z,k){return q[z]=k}}function h(j,U,q,z){var k=U&&U.prototype instanceof S?U:S,K=Object.create(k.prototype),fe=new B(z||[]);return r(K,"_invoke",{value:X(j,q,fe)}),K}function f(j,U,q){try{return{type:"normal",arg:j.call(U,q)}}catch(z){return{type:"throw",arg:z}}}e.wrap=h;var p="suspendedStart",m="suspendedYield",v="executing",b="completed",L={};function S(){}function y(){}function E(){}var A={};d(A,o,function(){return this});var N=Object.getPrototypeOf,V=N&&N(N(W([])));V&&V!==t&&n.call(V,o)&&(A=V);var M=E.prototype=S.prototype=Object.create(A);function R(j){["next","throw","return"].forEach(function(U){d(j,U,function(q){return this._invoke(U,q)})})}function Y(j,U){function q(k,K,fe,ne){var be=f(j[k],j,K);if(be.type!=="throw"){var De=be.arg,Ve=De.value;return Ve&&Ko(Ve)=="object"&&n.call(Ve,"__await")?U.resolve(Ve.__await).then(function(rt){q("next",rt,fe,ne)},function(rt){q("throw",rt,fe,ne)}):U.resolve(Ve).then(function(rt){De.value=rt,fe(De)},function(rt){return q("throw",rt,fe,ne)})}ne(be.arg)}var z;r(this,"_invoke",{value:function(K,fe){function ne(){return new U(function(be,De){q(K,fe,be,De)})}return z=z?z.then(ne,ne):ne()}})}function X(j,U,q){var z=p;return function(k,K){if(z===v)throw Error("Generator is already running");if(z===b){if(k==="throw")throw K;return{value:i,done:!0}}for(q.method=k,q.arg=K;;){var fe=q.delegate;if(fe){var ne=$(fe,q);if(ne){if(ne===L)continue;return ne}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(z===p)throw z=b,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);z=v;var be=f(j,U,q);if(be.type==="normal"){if(z=q.done?b:m,be.arg===L)continue;return{value:be.arg,done:q.done}}be.type==="throw"&&(z=b,q.method="throw",q.arg=be.arg)}}}function $(j,U){var q=U.method,z=j.iterator[q];if(z===i)return U.delegate=null,q==="throw"&&j.iterator.return&&(U.method="return",U.arg=i,$(j,U),U.method==="throw")||q!=="return"&&(U.method="throw",U.arg=new TypeError("The iterator does not provide a '"+q+"' method")),L;var k=f(z,j.iterator,U.arg);if(k.type==="throw")return U.method="throw",U.arg=k.arg,U.delegate=null,L;var K=k.arg;return K?K.done?(U[j.resultName]=K.value,U.next=j.nextLoc,U.method!=="return"&&(U.method="next",U.arg=i),U.delegate=null,L):K:(U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,L)}function T(j){var U={tryLoc:j[0]};1 in j&&(U.catchLoc=j[1]),2 in j&&(U.finallyLoc=j[2],U.afterLoc=j[3]),this.tryEntries.push(U)}function O(j){var U=j.completion||{};U.type="normal",delete U.arg,j.completion=U}function B(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(T,this),this.reset(!0)}function W(j){if(j||j===""){var U=j[o];if(U)return U.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var q=-1,z=function k(){for(;++q<j.length;)if(n.call(j,q))return k.value=j[q],k.done=!1,k;return k.value=i,k.done=!0,k};return z.next=z}}throw new TypeError(Ko(j)+" is not iterable")}return y.prototype=E,r(M,"constructor",{value:E,configurable:!0}),r(E,"constructor",{value:y,configurable:!0}),y.displayName=d(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(j){var U=typeof j=="function"&&j.constructor;return!!U&&(U===y||(U.displayName||U.name)==="GeneratorFunction")},e.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,E):(j.__proto__=E,d(j,u,"GeneratorFunction")),j.prototype=Object.create(M),j},e.awrap=function(j){return{__await:j}},R(Y.prototype),d(Y.prototype,a,function(){return this}),e.AsyncIterator=Y,e.async=function(j,U,q,z,k){k===void 0&&(k=Promise);var K=new Y(h(j,U,q,z),k);return e.isGeneratorFunction(U)?K:K.next().then(function(fe){return fe.done?fe.value:K.next()})},R(M),d(M,u,"Generator"),d(M,o,function(){return this}),d(M,"toString",function(){return"[object Generator]"}),e.keys=function(j){var U=Object(j),q=[];for(var z in U)q.push(z);return q.reverse(),function k(){for(;q.length;){var K=q.pop();if(K in U)return k.value=K,k.done=!1,k}return k.done=!0,k}},e.values=W,B.prototype={constructor:B,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(O),!U)for(var q in this)q.charAt(0)==="t"&&n.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=i)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var q=this;function z(De,Ve){return fe.type="throw",fe.arg=U,q.next=De,Ve&&(q.method="next",q.arg=i),!!Ve}for(var k=this.tryEntries.length-1;k>=0;--k){var K=this.tryEntries[k],fe=K.completion;if(K.tryLoc==="root")return z("end");if(K.tryLoc<=this.prev){var ne=n.call(K,"catchLoc"),be=n.call(K,"finallyLoc");if(ne&&be){if(this.prev<K.catchLoc)return z(K.catchLoc,!0);if(this.prev<K.finallyLoc)return z(K.finallyLoc)}else if(ne){if(this.prev<K.catchLoc)return z(K.catchLoc,!0)}else{if(!be)throw Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return z(K.finallyLoc)}}}},abrupt:function(U,q){for(var z=this.tryEntries.length-1;z>=0;--z){var k=this.tryEntries[z];if(k.tryLoc<=this.prev&&n.call(k,"finallyLoc")&&this.prev<k.finallyLoc){var K=k;break}}K&&(U==="break"||U==="continue")&&K.tryLoc<=q&&q<=K.finallyLoc&&(K=null);var fe=K?K.completion:{};return fe.type=U,fe.arg=q,K?(this.method="next",this.next=K.finallyLoc,L):this.complete(fe)},complete:function(U,q){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&q&&(this.next=q),L},finish:function(U){for(var q=this.tryEntries.length-1;q>=0;--q){var z=this.tryEntries[q];if(z.finallyLoc===U)return this.complete(z.completion,z.afterLoc),O(z),L}},catch:function(U){for(var q=this.tryEntries.length-1;q>=0;--q){var z=this.tryEntries[q];if(z.tryLoc===U){var k=z.completion;if(k.type==="throw"){var K=k.arg;O(z)}return K}}throw Error("illegal catch attempt")},delegateYield:function(U,q,z){return this.delegate={iterator:W(U),resultName:q,nextLoc:z},this.method==="next"&&(this.arg=i),L}},e}function LQ(i,e,t,n,r,s,o){try{var a=i[s](o),u=a.value}catch(d){return void t(d)}a.done?e(u):Promise.resolve(u).then(n,r)}function jwe(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(u){LQ(s,n,r,o,a,"next",u)}function a(u){LQ(s,n,r,o,a,"throw",u)}o(void 0)})}}var EQ=["measure","alignPre","align",null,"motion"];const Kwe=function(i,e){var t=fF(null),n=hs(t,2),r=n[0],s=n[1],o=he.useRef();function a(h){s(h,!0)}function u(){Uh.cancel(o.current)}function d(h){u(),o.current=Uh(function(){a(function(f){switch(r){case"align":return"motion";case"motion":return"stable"}return f}),h==null||h()})}return he.useEffect(function(){a("measure")},[i]),he.useEffect(function(){switch(r){case"measure":e();break}r&&(o.current=Uh(jwe(QV().mark(function h(){var f,p;return QV().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:f=EQ.indexOf(r),p=EQ[f+1],p&&f!==-1&&a(p);case 3:case"end":return v.stop()}},h)}))))},[r]),he.useEffect(function(){return function(){u()}},[]),[r,d]},qwe=function(i){var e=he.useState({width:0,height:0}),t=hs(e,2),n=t[0],r=t[1];function s(a){var u=a.offsetWidth,d=a.offsetHeight,h=a.getBoundingClientRect(),f=h.width,p=h.height;Math.abs(u-f)<1&&Math.abs(d-p)<1&&(u=f,d=p),r({width:u,height:d})}var o=he.useMemo(function(){var a={};if(i){var u=n.width,d=n.height;i.indexOf("height")!==-1&&d?a.height=d:i.indexOf("minHeight")!==-1&&d&&(a.minHeight=d),i.indexOf("width")!==-1&&u?a.width=u:i.indexOf("minWidth")!==-1&&u&&(a.minWidth=u)}return a},[i,n]);return[o,s]};var ile=he.forwardRef(function(i,e){var t=i.visible,n=i.prefixCls,r=i.className,s=i.style,o=i.children,a=i.zIndex,u=i.stretch,d=i.destroyPopupOnHide,h=i.forceRender,f=i.align,p=i.point,m=i.getRootDomNode,v=i.getClassNameFromAlign,b=i.onAlign,L=i.onMouseEnter,S=i.onMouseLeave,y=i.onMouseDown,E=i.onTouchStart,A=i.onClick,N=he.useRef(),V=he.useRef(),M=he.useState(),R=hs(M,2),Y=R[0],X=R[1],$=qwe(u),T=hs($,2),O=T[0],B=T[1];function W(){u&&B(m())}var j=Kwe(t,W),U=hs(j,2),q=U[0],z=U[1],k=he.useState(0),K=hs(k,2),fe=K[0],ne=K[1],be=he.useRef();HV(function(){q==="alignPre"&&ne(0)},[q]);function De(){return p||m}function Ve(){var sn;(sn=N.current)===null||sn===void 0||sn.forceAlign()}function rt(sn,Kt){var dn=v(Kt);Y!==dn&&X(dn),ne(function(Sn){return Sn+1}),q==="align"&&(b==null||b(sn,Kt))}HV(function(){q==="align"&&(fe<3?Ve():z(function(){var sn;(sn=be.current)===null||sn===void 0||sn.call(be)}))},[fe]);var At=wn({},Hae(i));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(sn){var Kt=At[sn];At[sn]=function(dn,Sn){return z(),Kt==null?void 0:Kt(dn,Sn)}});function Me(){return new Promise(function(sn){be.current=sn})}he.useEffect(function(){!At.motionName&&q==="motion"&&z()},[At.motionName,q]),he.useImperativeHandle(e,function(){return{forceAlign:Ve,getElement:function(){return V.current}}});var ut=wn(wn({},O),{},{zIndex:a,opacity:q==="motion"||q==="stable"||!t?void 0:0,pointerEvents:!t&&q!=="stable"?"none":void 0},s),Ct=!0;f!=null&&f.points&&(q==="align"||q==="stable")&&(Ct=!1);var Xe=o;return he.Children.count(o)>1&&(Xe=he.createElement("div",{className:"".concat(n,"-content")},o)),he.createElement(AS,lo({visible:t,ref:V,leavedClassName:"".concat(n,"-hidden")},At,{onAppearPrepare:Me,onEnterPrepare:Me,removeOnLeave:d,forceRender:h}),function(sn,Kt){var dn=sn.className,Sn=sn.style,Wn=nd(n,r,Y,dn);return he.createElement(nle,{target:De(),key:"popup",ref:N,monitorWindowResize:!0,disabled:Ct,align:f,onAlign:rt},he.createElement("div",{ref:Kt,className:Wn,onMouseEnter:L,onMouseLeave:S,onMouseDownCapture:y,onTouchStartCapture:E,onClick:A,style:wn(wn({},Sn),ut)},Xe))})});ile.displayName="PopupInner";var rle=he.forwardRef(function(i,e){var t=i.prefixCls,n=i.visible,r=i.zIndex,s=i.children,o=i.mobile;o=o===void 0?{}:o;var a=o.popupClassName,u=o.popupStyle,d=o.popupMotion,h=d===void 0?{}:d,f=o.popupRender,p=i.onClick,m=he.useRef();he.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return m.current}}});var v=wn({zIndex:r},u),b=s;return he.Children.count(s)>1&&(b=he.createElement("div",{className:"".concat(t,"-content")},s)),f&&(b=f(b)),he.createElement(AS,lo({visible:n,ref:m,removeOnLeave:!0},h),function(L,S){var y=L.className,E=L.style,A=nd(t,a,y);return he.createElement("div",{ref:S,className:A,onClick:p,style:wn(wn({},E),v)},b)})});rle.displayName="MobilePopupInner";var Gwe=["visible","mobile"],sle=he.forwardRef(function(i,e){var t=i.visible,n=i.mobile,r=dF(i,Gwe),s=he.useState(t),o=hs(s,2),a=o[0],u=o[1],d=he.useState(!1),h=hs(d,2),f=h[0],p=h[1],m=wn(wn({},r),{},{visible:a});he.useEffect(function(){u(t),t&&n&&p(bCe())},[t,n]);var v=f?he.createElement(rle,lo({},m,{mobile:n,ref:e})):he.createElement(ile,lo({},m,{ref:e}));return he.createElement("div",null,he.createElement(GCe,m),v)});sle.displayName="Popup";var xQ=he.createContext(null);function a9(){}function Ywe(){return""}function Zwe(i){return i?i.ownerDocument:window.document}var Xwe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Qwe(i){var e=function(t){fC(r,t);var n=gC(r);function r(s){var o;H0(this,r),o=n.call(this,s),en(In(o),"popupRef",he.createRef()),en(In(o),"triggerRef",he.createRef()),en(In(o),"portalContainer",void 0),en(In(o),"attachId",void 0),en(In(o),"clickOutsideHandler",void 0),en(In(o),"touchOutsideHandler",void 0),en(In(o),"contextMenuOutsideHandler1",void 0),en(In(o),"contextMenuOutsideHandler2",void 0),en(In(o),"mouseDownTimeout",void 0),en(In(o),"focusTime",void 0),en(In(o),"preClickTime",void 0),en(In(o),"preTouchTime",void 0),en(In(o),"delayTimer",void 0),en(In(o),"hasPopupMouseDown",void 0),en(In(o),"onMouseEnter",function(u){var d=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",u),o.delaySetPopupVisible(!0,d,d?null:u)}),en(In(o),"onMouseMove",function(u){o.fireEvents("onMouseMove",u),o.setPoint(u)}),en(In(o),"onMouseLeave",function(u){o.fireEvents("onMouseLeave",u),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)}),en(In(o),"onPopupMouseEnter",function(){o.clearDelayTimer()}),en(In(o),"onPopupMouseLeave",function(u){var d;u.relatedTarget&&!u.relatedTarget.setTimeout&&ny((d=o.popupRef.current)===null||d===void 0?void 0:d.getElement(),u.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)}),en(In(o),"onFocus",function(u){o.fireEvents("onFocus",u),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))}),en(In(o),"onMouseDown",function(u){o.fireEvents("onMouseDown",u),o.preClickTime=Date.now()}),en(In(o),"onTouchStart",function(u){o.fireEvents("onTouchStart",u),o.preTouchTime=Date.now()}),en(In(o),"onBlur",function(u){o.fireEvents("onBlur",u),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)}),en(In(o),"onContextMenu",function(u){u.preventDefault(),o.fireEvents("onContextMenu",u),o.setPopupVisible(!0,u)}),en(In(o),"onContextMenuClose",function(){o.isContextMenuToShow()&&o.close()}),en(In(o),"onClick",function(u){if(o.fireEvents("onClick",u),o.focusTime){var d;if(o.preClickTime&&o.preTouchTime?d=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?d=o.preClickTime:o.preTouchTime&&(d=o.preTouchTime),Math.abs(d-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&u&&u.preventDefault&&u.preventDefault();var h=!o.state.popupVisible;(o.isClickToHide()&&!h||h&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,u)}),en(In(o),"onPopupMouseDown",function(){if(o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout(function(){o.hasPopupMouseDown=!1},0),o.context){var u;(u=o.context).onPopupMouseDown.apply(u,arguments)}}),en(In(o),"onDocumentClick",function(u){if(!(o.props.mask&&!o.props.maskClosable)){var d=u.target,h=o.getRootDomNode(),f=o.getPopupDomNode();(!ny(h,d)||o.isContextMenuOnly())&&!ny(f,d)&&!o.hasPopupMouseDown&&o.close()}}),en(In(o),"getRootDomNode",function(){var u=o.props.getTriggerDOMNode;if(u)return u(o.triggerRef.current);try{var d=S2(o.triggerRef.current);if(d)return d}catch{}return mb.findDOMNode(In(o))}),en(In(o),"getPopupClassNameFromAlign",function(u){var d=[],h=o.props,f=h.popupPlacement,p=h.builtinPlacements,m=h.prefixCls,v=h.alignPoint,b=h.getPopupClassNameFromAlign;return f&&p&&d.push(pCe(p,m,u,v)),b&&d.push(b(u)),d.join(" ")}),en(In(o),"getComponent",function(){var u=o.props,d=u.prefixCls,h=u.destroyPopupOnHide,f=u.popupClassName,p=u.onPopupAlign,m=u.popupMotion,v=u.popupAnimation,b=u.popupTransitionName,L=u.popupStyle,S=u.mask,y=u.maskAnimation,E=u.maskTransitionName,A=u.maskMotion,N=u.zIndex,V=u.popup,M=u.stretch,R=u.alignPoint,Y=u.mobile,X=u.forceRender,$=u.onPopupClick,T=o.state,O=T.popupVisible,B=T.point,W=o.getPopupAlign(),j={};return o.isMouseEnterToShow()&&(j.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(j.onMouseLeave=o.onPopupMouseLeave),j.onMouseDown=o.onPopupMouseDown,j.onTouchStart=o.onPopupMouseDown,he.createElement(sle,lo({prefixCls:d,destroyPopupOnHide:h,visible:O,point:R&&B,className:f,align:W,onAlign:p,animation:v,getClassNameFromAlign:o.getPopupClassNameFromAlign},j,{stretch:M,getRootDomNode:o.getRootDomNode,style:L,mask:S,zIndex:N,transitionName:b,maskAnimation:y,maskTransitionName:E,maskMotion:A,ref:o.popupRef,motion:m,mobile:Y,forceRender:X,onClick:$}),typeof V=="function"?V():V)}),en(In(o),"attachParent",function(u){Uh.cancel(o.attachId);var d=o.props,h=d.getPopupContainer,f=d.getDocument,p=o.getRootDomNode(),m;h?(p||h.length===0)&&(m=h(p)):m=f(o.getRootDomNode()).body,m?m.appendChild(u):o.attachId=Uh(function(){o.attachParent(u)})}),en(In(o),"getContainer",function(){if(!o.portalContainer){var u=o.props.getDocument,d=u(o.getRootDomNode()).createElement("div");d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="100%",o.portalContainer=d}return o.attachParent(o.portalContainer),o.portalContainer}),en(In(o),"setPoint",function(u){var d=o.props.alignPoint;!d||!u||o.setState({point:{pageX:u.pageX,pageY:u.pageY}})}),en(In(o),"handlePortalUpdate",function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)}),en(In(o),"triggerContextValue",{onPopupMouseDown:o.onPopupMouseDown});var a;return"popupVisible"in s?a=!!s.popupVisible:a=!!s.defaultPopupVisible,o.state={prevPopupVisible:a,popupVisible:a},Xwe.forEach(function(u){o["fire".concat(u)]=function(d){o.fireEvents(u,d)}}),o}return $0(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var o=this.props,a=this.state;if(a.popupVisible){var u;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(u=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=qN(u,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(u=u||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=qN(u,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(u=u||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=qN(u,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=qN(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Uh.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var o;return((o=this.popupRef.current)===null||o===void 0?void 0:o.getElement())||null}},{key:"getPopupAlign",value:function(){var o=this.props,a=o.popupPlacement,u=o.popupAlign,d=o.builtinPlacements;return a&&d?gCe(d,a,u):u}},{key:"setPopupVisible",value:function(o,a){var u=this.props.alignPoint,d=this.state.popupVisible;this.clearDelayTimer(),d!==o&&("popupVisible"in this.props||this.setState({popupVisible:o,prevPopupVisible:d}),this.props.onPopupVisibleChange(o)),u&&a&&o&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(o,a,u){var d=this,h=a*1e3;if(this.clearDelayTimer(),h){var f=u?{pageX:u.pageX,pageY:u.pageY}:null;this.delayTimer=window.setTimeout(function(){d.setPopupVisible(o,f),d.clearDelayTimer()},h)}else this.setPopupVisible(o,u)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(o){var a=this.props.children.props,u=this.props;return a[o]&&u[o]?this["fire".concat(o)]:a[o]||u[o]}},{key:"isClickToShow",value:function(){var o=this.props,a=o.action,u=o.showAction;return a.indexOf("click")!==-1||u.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var o=this.props.action;return o==="contextMenu"||o.length===1&&o[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var o=this.props,a=o.action,u=o.showAction;return a.indexOf("contextMenu")!==-1||u.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var o=this.props,a=o.action,u=o.hideAction;return a.indexOf("click")!==-1||u.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var o=this.props,a=o.action,u=o.showAction;return a.indexOf("hover")!==-1||u.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var o=this.props,a=o.action,u=o.hideAction;return a.indexOf("hover")!==-1||u.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var o=this.props,a=o.action,u=o.showAction;return a.indexOf("focus")!==-1||u.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var o=this.props,a=o.action,u=o.hideAction;return a.indexOf("focus")!==-1||u.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var o;(o=this.popupRef.current)===null||o===void 0||o.forceAlign()}}},{key:"fireEvents",value:function(o,a){var u=this.props.children.props[o];u&&u(a);var d=this.props[o];d&&d(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var o=this.state.popupVisible,a=this.props,u=a.children,d=a.forceRender,h=a.alignPoint,f=a.className,p=a.autoDestroy,m=he.Children.only(u),v={key:"trigger"};this.isContextMenuToShow()?v.onContextMenu=this.onContextMenu:v.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(v.onClick=this.onClick,v.onMouseDown=this.onMouseDown,v.onTouchStart=this.onTouchStart):(v.onClick=this.createTwoChains("onClick"),v.onMouseDown=this.createTwoChains("onMouseDown"),v.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(v.onMouseEnter=this.onMouseEnter,h&&(v.onMouseMove=this.onMouseMove)):v.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?v.onMouseLeave=this.onMouseLeave:v.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(v.onFocus=this.onFocus,v.onBlur=this.onBlur):(v.onFocus=this.createTwoChains("onFocus"),v.onBlur=this.createTwoChains("onBlur"));var b=nd(m&&m.props&&m.props.className,f);b&&(v.className=b);var L=wn({},v);TK(m)&&(L.ref=IK(this.triggerRef,m.ref));var S=he.cloneElement(m,L),y;return(o||this.popupRef.current||d)&&(y=he.createElement(i,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!o&&p&&(y=null),he.createElement(xQ.Provider,{value:this.triggerContextValue},S,y)}}],[{key:"getDerivedStateFromProps",value:function(o,a){var u=o.popupVisible,d={};return u!==void 0&&a.popupVisible!==u&&(d.popupVisible=u,d.prevPopupVisible=a.popupVisible),d}}]),r}(he.Component);return en(e,"contextType",xQ),en(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Ywe,getDocument:Zwe,onPopupVisibleChange:a9,afterPopupVisibleChange:a9,onPopupAlign:a9,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}const Jwe=Qwe(Iae);var yc={adjustX:1,adjustY:1},Sc=[0,0],eye={left:{points:["cr","cl"],overflow:yc,offset:[-4,0],targetOffset:Sc},right:{points:["cl","cr"],overflow:yc,offset:[4,0],targetOffset:Sc},top:{points:["bc","tc"],overflow:yc,offset:[0,-4],targetOffset:Sc},bottom:{points:["tc","bc"],overflow:yc,offset:[0,4],targetOffset:Sc},topLeft:{points:["bl","tl"],overflow:yc,offset:[0,-4],targetOffset:Sc},leftTop:{points:["tr","tl"],overflow:yc,offset:[-4,0],targetOffset:Sc},topRight:{points:["br","tr"],overflow:yc,offset:[0,-4],targetOffset:Sc},rightTop:{points:["tl","tr"],overflow:yc,offset:[4,0],targetOffset:Sc},bottomRight:{points:["tr","br"],overflow:yc,offset:[0,4],targetOffset:Sc},rightBottom:{points:["bl","br"],overflow:yc,offset:[4,0],targetOffset:Sc},bottomLeft:{points:["tl","bl"],overflow:yc,offset:[0,4],targetOffset:Sc},leftBottom:{points:["br","bl"],overflow:yc,offset:[-4,0],targetOffset:Sc}};function tye(i){var e=i.showArrow,t=i.arrowContent,n=i.children,r=i.prefixCls,s=i.id,o=i.overlayInnerStyle,a=i.className,u=i.style;return he.createElement("div",{className:nd("".concat(r,"-content"),a),style:u},e!==!1&&he.createElement("div",{className:"".concat(r,"-arrow"),key:"arrow"},t),he.createElement("div",{className:"".concat(r,"-inner"),id:s,role:"tooltip",style:o},typeof n=="function"?n():n))}var nye=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],iye=function(e,t){var n=e.overlayClassName,r=e.trigger,s=r===void 0?["hover"]:r,o=e.mouseEnterDelay,a=o===void 0?0:o,u=e.mouseLeaveDelay,d=u===void 0?.1:u,h=e.overlayStyle,f=e.prefixCls,p=f===void 0?"rc-tooltip":f,m=e.children,v=e.onVisibleChange,b=e.afterVisibleChange,L=e.transitionName,S=e.animation,y=e.motion,E=e.placement,A=E===void 0?"right":E,N=e.align,V=N===void 0?{}:N,M=e.destroyTooltipOnHide,R=M===void 0?!1:M,Y=e.defaultVisible,X=e.getTooltipContainer,$=e.overlayInnerStyle,T=e.arrowContent,O=e.overlay,B=e.id,W=e.showArrow,j=W===void 0?!0:W,U=dF(e,nye),q=he.useRef(null);he.useImperativeHandle(t,function(){return q.current});var z=wn({},U);"visible"in e&&(z.popupVisible=e.visible);var k=function(){return he.createElement(tye,{showArrow:j,arrowContent:T,key:"content",prefixCls:p,id:B,overlayInnerStyle:$},O)},K=!1,fe=!1;if(typeof R=="boolean")K=R;else if(R&&Ko(R)==="object"){var ne=R.keepParent;K=ne===!0,fe=ne===!1}return he.createElement(Jwe,lo({popupClassName:n,prefixCls:p,popup:k,action:s,builtinPlacements:eye,popupPlacement:A,ref:q,popupAlign:V,getPopupContainer:X,onPopupVisibleChange:v,afterPopupVisibleChange:b,popupTransitionName:L,popupAnimation:S,popupMotion:y,defaultPopupVisible:Y,destroyPopupOnHide:K,autoDestroy:fe,mouseLeaveDelay:d,popupStyle:h,mouseEnterDelay:a},z),m)};const rye=he.forwardRef(iye);var sye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const PK=i=>{var{overlay:e,children:t,placement:n="bottom",trigger:r="hover",overlayClassName:s,mouseEnterDelay:o}=i,a=sye(i,["overlay","children","placement","trigger","overlayClassName","mouseEnterDelay"]);return e?re.createElement(rye,Object.assign({overlayClassName:mn(oae(),s),placement:n,trigger:r,overlay:e,mouseEnterDelay:o||.1},a),t):t||null};var ole=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const FK=Bn("action-bar"),oye=gt(FK,"container"),BK=gt(FK,"item"),aye=_n(BK,"disabled"),lye=_n(BK,"checked");function uye(i){const{title:e,name:t,contextMenu:n=[],onClick:r,icon:s,onContextMenuClick:o}=i,a=ole(i,["title","name","contextMenu","onClick","icon","onContextMenuClick"]),u=i.disabled?aye:null,d=i.checked?lye:null,h=he.useRef(null),f=he.useRef(),p=he.useCallback((L,S)=>{var y;o==null||o(L,S),(y=f.current)===null||y===void 0||y.hide()},[n]),m=()=>re.createElement(Za,{onClick:p,data:n});he.useEffect(()=>(n.length>0&&(f.current=q5({anchor:h.current,render:m})),function(){var S;(S=f.current)===null||S===void 0||S.dispose()}));const v=function(L){if(i.disabled){L.preventDefault();return}r&&r(L,i),n.length>-1&&f.current&&f.current.show({x:L.clientX,y:L.clientY})},b=_b(a);return re.createElement("li",Object.assign({ref:h,className:mn(BK,u,d),onClick:v},b),re.createElement(PK,{overlay:re.createElement("span",null,e)},re.createElement(dr,{type:s},t)))}function eM(i){const{data:e=[],onClick:t,onContextMenuClick:n,className:r,style:s,title:o}=i,a=ole(i,["data","onClick","onContextMenuClick","className","style","title"]),u=mn(FK,r),d=e.map((f,p)=>re.createElement(uye,Object.assign({key:f.id},f,{onContextMenuClick:n,"data-index":p,onClick:yK(t,f.onClick)}))),h=_b(a);return re.createElement("div",Object.assign({className:u,style:s,title:o},h),re.createElement("ul",{className:oye},d))}const WK=Bn("breadcrumb"),cye=gt(WK,"item"),dye=gt(WK,"label");var DQ=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function ale(i){const{onClick:e,className:t,separator:n,routes:r=[],style:s,title:o,role:a}=i,u=DQ(i,["onClick","className","separator","routes","style","title","role"]),d=mn(WK,t),h=r.length,f=n||re.createElement(dr,{type:"chevron-right"}),p=_b(u);return re.createElement("div",Object.assign({className:d,role:a,style:s,title:o},p),r.map((m,v)=>{const{id:b,className:L,title:S,style:y,href:E,icon:A,render:N,name:V}=m,M=DQ(m,["id","className","title","style","href","icon","render","name"]);return re.createElement("a",Object.assign({key:b,className:mn(cye,L),title:S,style:y,href:E,tabIndex:0,onContextMenu:R=>R.preventDefault(),onClick:R=>e==null?void 0:e(R,m)},_b(M)),re.createElement(dr,{type:A}),re.createElement("span",{className:dye},N?N(m):V),h-v>1?f:null)}))}var hye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const a8=Bn("btn"),fye=_n(a8,"normal"),gye=_n(a8,"large"),pye=_n(a8,"disabled"),vb=he.forwardRef(function(i,e){const{className:t,children:n,size:r="normal"}=i,s=hye(i,["className","children","size"]),o=i.disabled?pye:null,u=mn(t,a8,r==="large"?gye:fye,o);return re.createElement("button",Object.assign({ref:e,className:u},s),n)});var mye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const VK=Bn("checkbox"),_ye=gt(VK,"label"),vye=gt(VK,"input");function bye(i){const{className:e,id:t,children:n,value:r,onChange:s,title:o,role:a,style:u}=i,d=mye(i,["className","id","children","value","onChange","title","role","style"]),h=mn(VK,e),f=m=>{s==null||s(m,{id:t,value:m.target.value})},p=_b(d);return re.createElement("div",Object.assign({className:h,role:a,style:u,title:o},p),re.createElement("input",{id:t.toString(),type:"checkbox",className:vye,value:r,onChange:f}),re.createElement("label",{htmlFor:t.toString(),className:mn(_ye,"codicon")},n))}const mC=Bn("collapse"),Cye=gt(mC,"item"),lle=gt(mC,"pane"),wye=_n(lle,"collapsing"),yye=_n(mC,"active"),ule=gt(mC,"header"),Sye=gt(ule,"title"),IQ=gt(mC,"content"),Lye=gt(mC,"extra");var Eye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const xye="tool-bar",Dye=Bn(xye);function tM(i){const{className:e}=i,t=Eye(i,["className"]);return re.createElement("div",{className:mn(Dye,e)},re.createElement(eM,Object.assign({},t)))}function gp({children:i,style:e,className:t,role:n,title:r}){return re.createElement("div",{role:n,title:r,className:t,style:e},i)}const OS=Bn("split"),Iye=_n(OS,"dragging"),Tye=_n(OS,"vertical"),kye=_n(OS,"horizontal"),Nye=gt(OS,"pane"),nM=gt(OS,"sash"),Aye=_n(nM,"vertical"),Oye=_n(nM,"horizontal"),Mye=_n(nM,"disabled"),Rye=_n(nM,"hover");var Pye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function Fye(i){var{className:e,onDragStart:t,onDragging:n,onDragEnd:r}=i,s=Pye(i,["className","onDragStart","onDragging","onDragEnd"]);const o=he.useRef(),[a,u]=he.useState(!1),[d,h]=he.useState(!1);return he.useEffect(function(){return function(){clearTimeout(o.current)}},[]),re.createElement("div",Object.assign({role:"Resizer",className:mn(nM,(d||a)&&Rye,e),onMouseEnter:()=>{o.current=setTimeout(()=>{u(!0)},150)},onMouseLeave:()=>{o.current&&(u(!1),clearTimeout(o.current))},onMouseDown:f=>{h(!0),t(f);const p=function(v){n(v)},m=function(v){h(!1),r(v),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m)};window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)}},s))}var Bye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const l9=function(i,e,t=1/0){return typeof i>"u"?t:typeof i=="number"?i:i.endsWith("%")?e*(+i.replace("%","")/100):i.endsWith("px")?+i.replace("px",""):t},_A=i=>{var e,{children:t,sizes:n,allowResize:r=!0,showSashes:s=!0,split:o="vertical",className:a,sashClassName:u,paneClassName:d,resizerSize:h=4,onChange:f}=i,p=Bye(i,["children","sizes","allowResize","showSashes","split","className","sashClassName","paneClassName","resizerSize","onChange"]);const m=he.useRef({x:0,y:0}),v=he.useRef(null),[b,L]=he.useState({}),[S,y]=he.useState(!1);he.useEffect(()=>{const O=new ResizeObserver(()=>{L(v.current.getBoundingClientRect())});return O.observe(v.current),()=>{O.disconnect()}},[]);const{sizeName:E,sPos:A,sAxis:N}=he.useMemo(function(){return{sizeName:o==="vertical"?"width":"height",sPos:o==="vertical"?"left":"top",sAxis:o==="vertical"?"x":"y"}},[o]),V=(e=b[E])!==null&&e!==void 0?e:0,M=he.useMemo(function(){return t.map(O=>{const B=[0,1/0];if(O.type===gp){const{minSize:W,maxSize:j}=O.props;B[0]=l9(W,V,0),B[1]=l9(j,V)}return B})},[t,V]),R=he.useMemo(()=>typeof r=="boolean"?new Array(t.length).fill(r):t.map((O,B)=>{var W;return(W=r[B])!==null&&W!==void 0?W:!0}),[t.length,r]),Y=he.useMemo(function(){let O=0,B=0,W=0;const j=t.map((q,z)=>{const k=l9(n[z],V);return k===1/0?O++:(B+=k,R[z]&&(W+=k)),k});if(R.filter(q=>q===!0).length===0)return j;if(B>V||!O&&B<V){const q=(B-V)/W;return j.map((z,k)=>z===1/0?0:R[k]?z-z*q:z)}if(O>0){const q=(V-B)/O;return j.map(z=>z===1/0?q:z)}return j},[...n,t.length,V,...R]),X=he.useMemo(function(){return Y.reduce(function(O,B){return[...O,O[O.length-1]+B]},[0])},[...Y]),$=he.useCallback(function(O){var B,W;m.current={x:(B=O.pageX)!==null&&B!==void 0?B:O.screenX,y:(W=O.pageY)!==null&&W!==void 0?W:O.screenY},y(!0)},[]),T=he.useCallback(function(O,B){var W,j;let q={x:(W=O.pageX)!==null&&W!==void 0?W:O.screenX,y:(j=O.pageY)!==null&&j!==void 0?j:O.screenY}[N]-m.current[N];const z=-Math.min(Y[B]-M[B][0],M[B+1][1]-Y[B+1]),k=Math.min(Y[B+1]-M[B+1][0],M[B][1]-Y[B]);q<z&&(q=z),q>k&&(q=k);const K=[...Y];K[B]+=q,K[B+1]-=q,f==null||f(K)},[M,f,Y]);return re.createElement("div",Object.assign({className:mn(OS,S&&Iye,o==="vertical"&&Tye,o==="horizontal"&&kye,a),ref:v},p),t.map((O,B)=>{const W=mn(Nye,d),j={[E]:Y[B],[A]:X[B]};let U=null;if(B>0){const q=s===!1||(s==null?void 0:s[B-1])===!1;U=re.createElement(Fye,{className:mn(q&&Mye,o==="vertical"?Aye:Oye,u),style:{[E]:h,[A]:X[B]-h/2},onDragStart:$,onDragging:z=>T(z,B-1),onDragEnd:()=>{y(!1)}})}if(O.type===gp){const{className:q="",style:z={}}=O.props;return re.createElement(re.Fragment,{key:B},U,ZO(O,{className:mn(W,q),style:Object.assign(Object.assign({},z),j)}))}return re.createElement(re.Fragment,{key:B},U,re.createElement(gp,{className:W,style:j},O))}))};var Wye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const $P=220,Hg=26;function cle(i){var{data:e=[],activePanelKeys:t,className:n,title:r,style:s,role:o,onCollapseChange:a,onToolbarClick:u,onResize:d}=i,h=Wye(i,["data","activePanelKeys","className","title","style","role","onCollapseChange","onToolbarClick","onResize"]);const[f,p]=he.useState(new Array(e.length)),[m,v]=he.useState(!1),b=he.useRef(null),[L,S]=he.useState(e.map(W=>W.hidden?0:Hg)),y=he.useRef([]),E=he.useRef(!0),A=W=>W===void 0,N=(W,j)=>{for(let U=0;U<W.length;U++)if(W[U]!==j[U])return U+1;return-1},V=W=>{const j=N(L,W);j!==-1&&(y.current[j]=W[j],d==null||d(W),S(W))},M=(W,j,U)=>{W.stopPropagation(),u==null||u(j,U)},R=(W,j)=>j?j(W):null,Y=(W,j)=>{const U=[...f];A(U[j])?U[j]=W:delete U[j],a==null||a(U),p(U.concat())},X=()=>{v(!0),$(),setTimeout(()=>{v(!1)},300)},$=()=>{if(f.filter(j=>!A(j)).length){const{height:j}=b.current.getBoundingClientRect();let U=j,q=0;const z=e.map((fe,ne)=>{var be,De,Ve,rt;if(fe.hidden)return 0;if(!f.includes(fe.id))return U=U-Hg,Hg;if(((be=fe.config)===null||be===void 0?void 0:be.grow)===0){const ut=(Ve=(De=b.current)===null||De===void 0?void 0:De.querySelector(`.${IQ}[data-collapse-index='${ne}']`))===null||Ve===void 0?void 0:Ve.querySelector(`[data-content='${fe.id}']`);if(!ut)return U=U-Hg,Hg;const{height:Ct}=ut.getBoundingClientRect(),Xe=Ct+Hg;return Xe>$P?(U=U-$P,$P):(U=U-Xe,Xe)}return typeof y.current[ne]<"u"?(U=U-y.current[ne],y.current[ne]):(q=q+(((rt=fe.config)===null||rt===void 0?void 0:rt.grow)||1),"auto")}),k=U/q,K=z.map((fe,ne)=>{var be;return fe==="auto"?k*(((be=e[ne].config)===null||be===void 0?void 0:be.grow)||1):fe});d==null||d(K),S(K)}else{const j=e.map(U=>U.hidden?0:Hg);d==null||d(j),S(j)}},{nextSashes:T,allowResize:O}=he.useMemo(function(){var W,j;const U=[];for(let q=1;q<f.length;q++){const z=!A(f[q-1]),k=((j=(W=e[q-1])===null||W===void 0?void 0:W.config)===null||j===void 0?void 0:j.grow)!==0,K=!A(f[q]),fe=z&&k&&K;U.push(fe)}return{nextSashes:U,allowResize:e.map((q,z)=>{var k;return((k=q==null?void 0:q.config)===null||k===void 0?void 0:k.grow)===0?!1:!A(f[z])})}},[f,e]);he.useLayoutEffect(()=>{E.current||X(),E.current=!1},[f,e]),he.useLayoutEffect(()=>{Array.isArray(t)&&p(t)},[t]);const B=_b(h);return re.createElement("div",Object.assign({ref:b,className:mn(mC,n),title:r,style:s,role:o},B),re.createElement(_A,{sizes:L,onChange:V,split:"horizontal",allowResize:O,showSashes:T,paneClassName:mn(lle,m&&wye)},e.map((W,j)=>{const U=f.includes(W.id);return re.createElement(gp,{key:W.id,minSize:Hg},re.createElement("div",{className:mn(W.className,Cye,U&&yye),"data-collapse-id":W.id},re.createElement("div",{className:ule,tabIndex:0,onClick:()=>Y(W.id,j)},re.createElement(dr,{type:U?"chevron-down":"chevron-right"}),re.createElement("span",{className:Sye},W.name),re.createElement("div",{className:Lye},U&&re.createElement(tM,{key:W.id,data:W.toolbar||[],onClick:(q,z)=>M(q,z,W)}))),re.createElement("div",{className:IQ,tabIndex:0,"data-collapse-index":j},R(W,W.renderPanel))))})))}var TQ="data-rc-order",kQ="data-rc-priority",Vye="rc-util-key",JV=new Map;function dle(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=i.mark;return e?e.startsWith("data-")?e:"data-".concat(e):Vye}function l8(i){if(i.attachTo)return i.attachTo;var e=document.querySelector("head");return e||document.body}function Hye(i){return i==="queue"?"prependQueue":i?"prepend":"append"}function HK(i){return Array.from((JV.get(i)||i).children).filter(function(e){return e.tagName==="STYLE"})}function hle(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!pC())return null;var t=e.csp,n=e.prepend,r=e.priority,s=r===void 0?0:r,o=Hye(n),a=o==="prependQueue",u=document.createElement("style");u.setAttribute(TQ,o),a&&s&&u.setAttribute(kQ,"".concat(s)),t!=null&&t.nonce&&(u.nonce=t==null?void 0:t.nonce),u.innerHTML=i;var d=l8(e),h=d.firstChild;if(n){if(a){var f=(e.styles||HK(d)).filter(function(p){if(!["prepend","prependQueue"].includes(p.getAttribute(TQ)))return!1;var m=Number(p.getAttribute(kQ)||0);return s>=m});if(f.length)return d.insertBefore(u,f[f.length-1].nextSibling),u}d.insertBefore(u,h)}else d.appendChild(u);return u}function fle(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=l8(e);return(e.styles||HK(t)).find(function(n){return n.getAttribute(dle(e))===i})}function $ye(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=fle(i,e);if(t){var n=l8(e);n.removeChild(t)}}function zye(i,e){var t=JV.get(i);if(!t||!ny(document,t)){var n=hle("",e),r=n.parentNode;JV.set(i,r),i.removeChild(n)}}function Uye(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=l8(t),r=HK(n),s=wn(wn({},t),{},{styles:r});zye(n,s);var o=fle(e,s);if(o){var a,u;if((a=s.csp)!==null&&a!==void 0&&a.nonce&&o.nonce!==((u=s.csp)===null||u===void 0?void 0:u.nonce)){var d;o.nonce=(d=s.csp)===null||d===void 0?void 0:d.nonce}return o.innerHTML!==i&&(o.innerHTML=i),o}var h=hle(i,s);return h.setAttribute(dle(s),e),h}var u9;function jye(i){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),t=document.createElement("div");t.id=e;var n=t.style;n.position="absolute",n.left="0",n.top="0",n.width="100px",n.height="100px",n.overflow="scroll";var r,s;if(i){var o=getComputedStyle(i);n.scrollbarColor=o.scrollbarColor,n.scrollbarWidth=o.scrollbarWidth;var a=getComputedStyle(i,"::-webkit-scrollbar"),u=parseInt(a.width,10),d=parseInt(a.height,10);try{var h=u?"width: ".concat(a.width,";"):"",f=d?"height: ".concat(a.height,";"):"";Uye(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(h,`
`).concat(f,`
}`),e)}catch(v){console.error(v),r=u,s=d}}document.body.appendChild(t);var p=i&&r&&!isNaN(r)?r:t.offsetWidth-t.clientWidth,m=i&&s&&!isNaN(s)?s:t.offsetHeight-t.clientHeight;return document.body.removeChild(t),$ye(e),{width:p,height:m}}function gle(i){return typeof document>"u"?0:((i||u9===void 0)&&(u9=jye()),u9.width)}function By(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!i)return{};var t=e.element,n=t===void 0?document.body:t,r={},s=Object.keys(i);return s.forEach(function(o){r[o]=n.style[o]}),s.forEach(function(o){n.style[o]=i[o]}),r}function Kye(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var c9={};const NQ=function(i){if(!(!Kye()&&!i)){var e="ant-scrolling-effect",t=new RegExp("".concat(e),"g"),n=document.body.className;if(i){if(!t.test(n))return;By(c9),c9={},document.body.className=n.replace(t,"").trim();return}var r=gle();if(r&&(c9=By({position:"relative",width:"calc(100% - ".concat(r,"px)")}),!t.test(n))){var s="".concat(n," ").concat(e);document.body.className=s.trim()}}};var qye=0,Lc=[],ple="ant-scrolling-effect",d9=new RegExp("".concat(ple),"g"),h9=new Map,Gye=$0(function i(e){var t=this;H0(this,i),en(this,"lockTarget",void 0),en(this,"options",void 0),en(this,"getContainer",function(){var n;return(n=t.options)===null||n===void 0?void 0:n.container}),en(this,"reLock",function(n){var r=Lc.find(function(s){var o=s.target;return o===t.lockTarget});r&&t.unLock(),t.options=n,r&&(r.options=n,t.lock())}),en(this,"lock",function(){var n;if(!Lc.some(function(u){var d=u.target;return d===t.lockTarget})){if(Lc.some(function(u){var d,h=u.options;return(h==null?void 0:h.container)===((d=t.options)===null||d===void 0?void 0:d.container)})){Lc=[].concat(eQ(Lc),[{target:t.lockTarget,options:t.options}]);return}var r=0,s=((n=t.options)===null||n===void 0?void 0:n.container)||document.body;(s===document.body&&window.innerWidth-document.documentElement.clientWidth>0||s.scrollHeight>s.clientHeight)&&getComputedStyle(s).overflow!=="hidden"&&(r=gle());var o=s.className;if(Lc.filter(function(u){var d,h=u.options;return(h==null?void 0:h.container)===((d=t.options)===null||d===void 0?void 0:d.container)}).length===0&&h9.set(s,By({width:r!==0?"calc(100% - ".concat(r,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:s})),!d9.test(o)){var a="".concat(o," ").concat(ple);s.className=a.trim()}Lc=[].concat(eQ(Lc),[{target:t.lockTarget,options:t.options}])}}),en(this,"unLock",function(){var n,r=Lc.find(function(a){var u=a.target;return u===t.lockTarget});if(Lc=Lc.filter(function(a){var u=a.target;return u!==t.lockTarget}),!(!r||Lc.some(function(a){var u,d=a.options;return(d==null?void 0:d.container)===((u=r.options)===null||u===void 0?void 0:u.container)}))){var s=((n=t.options)===null||n===void 0?void 0:n.container)||document.body,o=s.className;d9.test(o)&&(By(h9.get(s),{element:s}),h9.delete(s),s.className=s.className.replace(d9,"").trim())}}),this.lockTarget=qye++,this.options=e}),Og=0,YN=pC(),wR={},UC=function(e){if(!YN)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(Ko(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body},Yye=function(i){fC(t,i);var e=gC(t);function t(n){var r;return H0(this,t),r=e.call(this,n),en(In(r),"container",void 0),en(In(r),"componentRef",he.createRef()),en(In(r),"rafId",void 0),en(In(r),"scrollLocker",void 0),en(In(r),"renderComponent",void 0),en(In(r),"updateScrollLocker",function(s){var o=s||{},a=o.visible,u=r.props,d=u.getContainer,h=u.visible;h&&h!==a&&YN&&UC(d)!==r.scrollLocker.getContainer()&&r.scrollLocker.reLock({container:UC(d)})}),en(In(r),"updateOpenCount",function(s){var o=s||{},a=o.visible,u=o.getContainer,d=r.props,h=d.visible,f=d.getContainer;h!==a&&YN&&UC(f)===document.body&&(h&&!a?Og+=1:s&&(Og-=1));var p=typeof f=="function"&&typeof u=="function";(p?f.toString()!==u.toString():f!==u)&&r.removeCurrentContainer()}),en(In(r),"attachToParent",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(s||r.container&&!r.container.parentNode){var o=UC(r.props.getContainer);return o?(o.appendChild(r.container),!0):!1}return!0}),en(In(r),"getContainer",function(){return YN?(r.container||(r.container=document.createElement("div"),r.attachToParent(!0)),r.setWrapperClassName(),r.container):null}),en(In(r),"setWrapperClassName",function(){var s=r.props.wrapperClassName;r.container&&s&&s!==r.container.className&&(r.container.className=s)}),en(In(r),"removeCurrentContainer",function(){var s;(s=r.container)===null||s===void 0||(s=s.parentNode)===null||s===void 0||s.removeChild(r.container)}),en(In(r),"switchScrollingEffect",function(){Og===1&&!Object.keys(wR).length?(NQ(),wR=By({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):Og||(By(wR),wR={},NQ(!0))}),r.scrollLocker=new Gye({container:UC(n.getContainer)}),r}return $0(t,[{key:"componentDidMount",value:function(){var r=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Uh(function(){r.forceUpdate()}))}},{key:"componentDidUpdate",value:function(r){this.updateOpenCount(r),this.updateScrollLocker(r),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var r=this.props,s=r.visible,o=r.getContainer;YN&&UC(o)===document.body&&(Og=s&&Og?Og-1:Og),this.removeCurrentContainer(),Uh.cancel(this.rafId)}},{key:"render",value:function(){var r=this.props,s=r.children,o=r.forceRender,a=r.visible,u=null,d={getOpenCount:function(){return Og},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(o||a||this.componentRef.current)&&(u=he.createElement(Iae,{getContainer:this.getContainer,ref:this.componentRef},s(d))),u}}]),t}(he.Component),Mn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Mn.F1&&t<=Mn.F12)return!1;switch(t){case Mn.ALT:case Mn.CAPS_LOCK:case Mn.CONTEXT_MENU:case Mn.CTRL:case Mn.DOWN:case Mn.END:case Mn.ESC:case Mn.HOME:case Mn.INSERT:case Mn.LEFT:case Mn.MAC_FF_META:case Mn.META:case Mn.NUMLOCK:case Mn.NUM_CENTER:case Mn.PAGE_DOWN:case Mn.PAGE_UP:case Mn.PAUSE:case Mn.PRINT_SCREEN:case Mn.RIGHT:case Mn.SHIFT:case Mn.UP:case Mn.WIN_KEY:case Mn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Mn.ZERO&&e<=Mn.NINE||e>=Mn.NUM_ZERO&&e<=Mn.NUM_MULTIPLY||e>=Mn.A&&e<=Mn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Mn.SPACE:case Mn.QUESTION_MARK:case Mn.NUM_PLUS:case Mn.NUM_MINUS:case Mn.NUM_PERIOD:case Mn.NUM_DIVISION:case Mn.SEMICOLON:case Mn.DASH:case Mn.EQUALS:case Mn.COMMA:case Mn.PERIOD:case Mn.SLASH:case Mn.APOSTROPHE:case Mn.SINGLE_QUOTE:case Mn.OPEN_SQUARE_BRACKET:case Mn.BACKSLASH:case Mn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function Zye(){var i=wn({},Uve);return i.useId}var AQ=0,OQ=Zye();const Xye=OQ?function(e){var t=OQ();return e||t}:function(e){var t=he.useState("ssr-id"),n=hs(t,2),r=n[0],s=n[1];return he.useEffect(function(){var o=AQ;AQ+=1,s("rc_unique_".concat(o))},[]),e||r};var Qye=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Jye=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,eSe="".concat(Qye," ").concat(Jye).split(/[\s\n]+/),tSe="aria-",nSe="data-";function MQ(i,e){return i.indexOf(e)===0}function iSe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t=wn({},e);var n={};return Object.keys(i).forEach(function(r){(t.aria&&(r==="role"||MQ(r,tSe))||t.data&&MQ(r,nSe)||t.attr&&eSe.includes(r))&&(n[r]=i[r])}),n}function rSe(i){var e=i.prefixCls,t=i.style,n=i.visible,r=i.maskProps,s=i.motionName;return he.createElement(AS,{key:"mask",visible:n,motionName:s,leavedClassName:"".concat(e,"-mask-hidden")},function(o){var a=o.className,u=o.style;return he.createElement("div",lo({style:wn(wn({},u),t),className:nd("".concat(e,"-mask"),a)},r))})}function RQ(i,e,t){var n=e;return!n&&t&&(n="".concat(i,"-").concat(t)),n}function PQ(i,e){var t=i["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=i.document;t=r.documentElement[n],typeof t!="number"&&(t=r.body[n])}return t}function sSe(i){var e=i.getBoundingClientRect(),t={left:e.left,top:e.top},n=i.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=PQ(r),t.top+=PQ(r,!0),t}const oSe=he.memo(function(i){var e=i.children;return e},function(i,e){var t=e.shouldUpdate;return!t});var FQ={width:0,height:0,overflow:"hidden",outline:"none"},aSe=re.forwardRef(function(i,e){var t=i.prefixCls,n=i.className,r=i.style,s=i.title,o=i.ariaId,a=i.footer,u=i.closable,d=i.closeIcon,h=i.onClose,f=i.children,p=i.bodyStyle,m=i.bodyProps,v=i.modalRender,b=i.onMouseDown,L=i.onMouseUp,S=i.holderRef,y=i.visible,E=i.forceRender,A=i.width,N=i.height,V=he.useRef(),M=he.useRef();re.useImperativeHandle(e,function(){return{focus:function(){var B;(B=V.current)===null||B===void 0||B.focus()},changeActive:function(B){var W=document,j=W.activeElement;B&&j===M.current?V.current.focus():!B&&j===V.current&&M.current.focus()}}});var R={};A!==void 0&&(R.width=A),N!==void 0&&(R.height=N);var Y;a&&(Y=re.createElement("div",{className:"".concat(t,"-footer")},a));var X;s&&(X=re.createElement("div",{className:"".concat(t,"-header")},re.createElement("div",{className:"".concat(t,"-title"),id:o},s)));var $;u&&($=re.createElement("button",{type:"button",onClick:h,"aria-label":"Close",className:"".concat(t,"-close")},d||re.createElement("span",{className:"".concat(t,"-close-x")})));var T=re.createElement("div",{className:"".concat(t,"-content")},$,X,re.createElement("div",lo({className:"".concat(t,"-body"),style:p},m),f),Y);return re.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?o:null,"aria-modal":"true",ref:S,style:wn(wn({},r),R),className:nd(t,n),onMouseDown:b,onMouseUp:L},re.createElement("div",{tabIndex:0,ref:V,style:FQ,"aria-hidden":"true"}),re.createElement(oSe,{shouldUpdate:y||E},v?v(T):T),re.createElement("div",{tabIndex:0,ref:M,style:FQ,"aria-hidden":"true"}))}),mle=he.forwardRef(function(i,e){var t=i.prefixCls,n=i.title,r=i.style,s=i.className,o=i.visible,a=i.forceRender,u=i.destroyOnClose,d=i.motionName,h=i.ariaId,f=i.onVisibleChanged,p=i.mousePosition,m=he.useRef(),v=he.useState(),b=hs(v,2),L=b[0],S=b[1],y={};L&&(y.transformOrigin=L);function E(){var A=sSe(m.current);S(p?"".concat(p.x-A.left,"px ").concat(p.y-A.top,"px"):"")}return he.createElement(AS,{visible:o,onVisibleChanged:f,onAppearPrepare:E,onEnterPrepare:E,forceRender:a,motionName:d,removeOnLeave:u,ref:m},function(A,N){var V=A.className,M=A.style;return he.createElement(aSe,lo({},i,{ref:e,title:n,ariaId:h,prefixCls:t,holderRef:N,style:wn(wn(wn({},M),r),y),className:nd(s,V)}))})});mle.displayName="Content";function BQ(i){var e=i.prefixCls,t=e===void 0?"rc-dialog":e,n=i.zIndex,r=i.visible,s=r===void 0?!1:r,o=i.keyboard,a=o===void 0?!0:o,u=i.focusTriggerAfterClose,d=u===void 0?!0:u,h=i.scrollLocker,f=i.wrapStyle,p=i.wrapClassName,m=i.wrapProps,v=i.onClose,b=i.afterClose,L=i.transitionName,S=i.animation,y=i.closable,E=y===void 0?!0:y,A=i.mask,N=A===void 0?!0:A,V=i.maskTransitionName,M=i.maskAnimation,R=i.maskClosable,Y=R===void 0?!0:R,X=i.maskStyle,$=i.maskProps,T=i.rootClassName,O=he.useRef(),B=he.useRef(),W=he.useRef(),j=he.useState(s),U=hs(j,2),q=U[0],z=U[1],k=Xye();function K(Me){if(Me){if(!ny(B.current,document.activeElement)){var ut;O.current=document.activeElement,(ut=W.current)===null||ut===void 0||ut.focus()}}else{if(z(!1),N&&O.current&&d){try{O.current.focus({preventScroll:!0})}catch{}O.current=null}q&&(b==null||b())}}function fe(Me){v==null||v(Me)}var ne=he.useRef(!1),be=he.useRef(),De=function(){clearTimeout(be.current),ne.current=!0},Ve=function(){be.current=setTimeout(function(){ne.current=!1})},rt=null;Y&&(rt=function(ut){ne.current?ne.current=!1:B.current===ut.target&&fe(ut)});function At(Me){if(a&&Me.keyCode===Mn.ESC){Me.stopPropagation(),fe(Me);return}s&&Me.keyCode===Mn.TAB&&W.current.changeActive(!Me.shiftKey)}return he.useEffect(function(){return s&&z(!0),function(){}},[s]),he.useEffect(function(){return function(){clearTimeout(be.current)}},[]),he.useEffect(function(){return q?(h==null||h.lock(),h==null?void 0:h.unLock):function(){}},[q,h]),he.createElement("div",lo({className:nd("".concat(t,"-root"),T)},iSe(i,{data:!0})),he.createElement(rSe,{prefixCls:t,visible:N&&s,motionName:RQ(t,V,M),style:wn({zIndex:n},X),maskProps:$}),he.createElement("div",lo({tabIndex:-1,onKeyDown:At,className:nd("".concat(t,"-wrap"),p),ref:B,onClick:rt,style:wn(wn({zIndex:n},f),{},{display:q?null:"none"})},m),he.createElement(mle,lo({},i,{onMouseDown:De,onMouseUp:Ve,ref:W,closable:E,ariaId:k,prefixCls:t,visible:s,onClose:fe,onVisibleChanged:K,motionName:RQ(t,L,S)}))))}var _le=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,s=e.destroyOnClose,o=s===void 0?!1:s,a=e.afterClose,u=he.useState(t),d=hs(u,2),h=d[0],f=d[1];return he.useEffect(function(){t&&f(!0)},[t]),n===!1?he.createElement(BQ,lo({},e,{getOpenCount:function(){return 2}})):!r&&o&&!h?null:he.createElement(Yye,{visible:t,forceRender:r,getContainer:n},function(p){return he.createElement(BQ,lo({},e,{destroyOnClose:o,afterClose:function(){a==null||a(),f(!1)}},p))})};_le.displayName="Dialog";const $K=Bn("modal"),Tp=Bn("confirm"),lSe=gt($K,"close"),uSe=_n(lSe,"x"),cSe=_n($K,"centered"),dSe=gt(Tp,"container"),hSe=gt(Tp,"indicator"),fSe=i=>typeof i=="string"?gt(Tp,tH[i]):"",gSe=gt(Tp,"content"),zK=gt(Tp,"message"),pSe=gt(Tp,"btns"),mSe=_n(Tp,"centered"),_Se=_n(zK,"text"),vSe=_n(zK,"detail");var bSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Ow=[];let eH;const WQ=i=>{eH={x:i.pageX,y:i.pageY},setTimeout(()=>{eH=null},100)},CSe=re.createElement("span",{className:uSe},re.createElement(dr,{type:"close"})),vle=i=>{he.useEffect(()=>(document.documentElement.addEventListener("click",WQ,!0),()=>{document.documentElement.removeEventListener("click",WQ,!0)}),[]);const e=v=>{const{onCancel:b}=i;b==null||b(v)},t=v=>{const{onOk:b}=i;b==null||b(v)},{footer:n,visible:r,wrapClassName:s,centered:o,getContainer:a,closeIcon:u,cancelText:d="Cancel",okText:h="Ok"}=i,f=bSe(i,["footer","visible","wrapClassName","centered","getContainer","closeIcon","cancelText","okText"]),p=mn(s,{[cSe]:!!o}),m=()=>{const{footer:v,cancelButtonProps:b,okButtonProps:L}=i;return v!==void 0?v:re.createElement(re.Fragment,null,re.createElement(vb,Object.assign({onClick:e},b),d),re.createElement(vb,Object.assign({onClick:t},L),h))};return re.createElement(_le,Object.assign({},f,{getContainer:a,prefixCls:$K,wrapClassName:p,footer:m(),visible:r,mousePosition:eH,onClose:e,closeIcon:CSe}))},VQ=i=>{const e=he.useRef(!1),{close:t}=i,n=a=>{!a||!a.then||a.then((...u)=>{t==null||t(...u)},u=>{console.error(u),e.current=!1})},r=()=>{const{actionFn:a,close:u}=i;if(e.current)return;if(e.current=!0,!a){u==null||u();return}let d;if(a.length)d=a(u),e.current=!1;else if(d=a(),!d){u==null||u();return}n(d)},{children:s,buttonProps:o}=i;return re.createElement(vb,Object.assign({onClick:r},o),s)},wSe=i=>{const{actions:e,icon:t,onCancel:n,onOk:r,close:s,maskStyle:o,okText:a="Ok",okButtonProps:u,cancelText:d="Cancel",cancelButtonProps:h,okCancel:f,bodyStyle:p,closable:m=!1,className:v,width:b=520,style:L={},mask:S=!0,maskClosable:y=!1,transitionName:E="zoom",maskTransitionName:A="fade",type:N,visible:V}=i,M=fSe(N),R=mn(Tp,M,v),Y=f&&re.createElement(VQ,{actionFn:n,close:s,buttonProps:h},d);return re.createElement(vle,{prefixCls:Tp,className:R,wrapClassName:mn({[mSe]:!!i.centered}),onCancel:()=>s({triggerCancel:!0}),transitionName:E,maskTransitionName:A,mask:S,maskClosable:y,style:L,width:b,closable:m,footer:"",title:"",maskStyle:o,visible:V},re.createElement("div",{className:dSe,style:p},re.createElement("div",{className:gSe},re.createElement("div",{className:hSe}," ",t," "),re.createElement("div",{className:zK},i.title!==void 0&&re.createElement("span",{className:_Se},i.title),re.createElement("div",{className:vSe},i.content))),re.createElement("div",{className:pSe},e===void 0?re.createElement(re.Fragment,null,Y,re.createElement(VQ,{actionFn:r,close:s,buttonProps:u},a)):e)))};var ySe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function ble(i){const e=document.createElement("div");document.body.appendChild(e);const t=Object.assign(Object.assign({},i),{close:s,visible:!0});function n(...o){const a=o.some(d=>d&&d.triggerCancel);i.onCancel&&a&&i.onCancel(...o),aae(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let d=0;d<Ow.length;d++)if(Ow[d]===s){Ow.splice(d,1);break}}function r(o){var{okText:a,cancelText:u}=o,d=ySe(o,["okText","cancelText"]);uF(re.createElement(wSe,Object.assign({okText:a,cancelText:u},d)),e)}function s(...o){n(...o)}return r(t),Ow.push(s),{destroy:s}}function SSe(i){return Object.assign({type:"warning",okCancel:!1,icon:re.createElement(dr,{type:"warning"})},i)}function LSe(i){return Object.assign({type:"confirm",okCancel:!0,icon:re.createElement(dr,{type:"warning"})},i)}function Cle(i){return ble(SSe(i))}const iM=vle;var tH;(function(i){i.warning="warning",i.confirm="confirm"})(tH||(tH={}));iM.warning=Cle;iM.warn=Cle;iM.confirm=function(e){return ble(LSe(e))};iM.destroyAll=function(){for(;Ow.length;){const e=Ow.pop();e&&e()}};var ESe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const HQ=Bn("drop-down"),UK=he.forwardRef((i,e)=>{const{className:t,overlay:n,children:r,placement:s="right",trigger:o="click"}=i,a=ESe(i,["className","overlay","children","placement","trigger"]),u=XO({render:()=>n});he.useImperativeHandle(e,()=>({contextView:u,dispose:()=>{u.hide()}}));const d=mn(HQ,_n(HQ,s),t),h={[uae(o)]:function(f){if(!u)return;const m=f.currentTarget.getBoundingClientRect();let v=UX(s,m);if(u.show(v),s==="left"||s==="top"){const b=u.view.getBoundingClientRect();b.x=m.x,b.y=m.y,v=UX(s,b),u.show(v)}}};return re.createElement("div",Object.assign({className:d},h,a),r)});var nH;(function(i){i.ENTER="Enter"})(nH||(nH={}));var xSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const MS=Bn("input"),DSe=_n(MS,"normal"),ISe=_n(MS,"lg"),TSe=_n(MS,"disabled");function kSe(i){return typeof i>"u"||i===null?"":i}function wle(i,e,t){t&&t(e)}function NSe(i,e){return mn(MS,{[DSe]:i==="normal"},{[ISe]:i==="large"},{[TSe]:e})}let jK=class extends re.Component{constructor(e){super(e),this.input=null,this.saveInput=n=>{this.input=n},this.handleChange=n=>{const{onChange:r}=this.props;this.setValue(n.target.value),typeof r=="function"&&wle(this.input,n,r)},this.handleKeyDown=n=>{const{onPressEnter:r,onKeyDown:s}=this.props;n.key===nH.ENTER&&(r==null||r(n)),s==null||s(n)};const t=typeof e.value>"u"?e.defaultValue:e.value;this.state={value:t,prevValue:e.value}}static getDerivedStateFromProps(e,{prevValue:t}){const n={prevValue:e.value};return(e.value!==void 0||t!==e.value)&&(n.value=e.value),n}setValue(e){this.props.value===void 0&&this.setState({value:e})}render(){const{value:e}=this.state,t=this.props,{className:n,size:r="normal",disabled:s=!1,placeholder:o,style:a}=t,u=xSe(t,["className","size","disabled","placeholder","style"]);return re.createElement("input",Object.assign({value:e,style:a,placeholder:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:mn(n,NSe(r,s)),ref:this.saveInput},u))}};jK.defaultProps={type:"text"};function iH(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[];return re.Children.forEach(i,function(n){n==null&&!e.keepEmpty||(Array.isArray(n)?t=t.concat(iH(n)):L2.isFragment(n)&&n.props?t=t.concat(iH(n.props.children,e)):t.push(n))}),t}var rH=he.createContext(null);function ASe(i){var e=i.children,t=i.onBatchResize,n=he.useRef(0),r=he.useRef([]),s=he.useContext(rH),o=he.useCallback(function(a,u,d){n.current+=1;var h=n.current;r.current.push({size:a,element:u,data:d}),Promise.resolve().then(function(){h===n.current&&(t==null||t(r.current),r.current=[])}),s==null||s(a,u,d)},[t,s]);return he.createElement(rH.Provider,{value:o},e)}var Bv=new Map;function OSe(i){i.forEach(function(e){var t,n=e.target;(t=Bv.get(n))===null||t===void 0||t.forEach(function(r){return r(n)})})}var yle=new tle(OSe);function MSe(i,e){Bv.has(i)||(Bv.set(i,new Set),yle.observe(i)),Bv.get(i).add(e)}function RSe(i,e){Bv.has(i)&&(Bv.get(i).delete(e),Bv.get(i).size||(yle.unobserve(i),Bv.delete(i)))}var PSe=function(i){fC(t,i);var e=gC(t);function t(){return H0(this,t),e.apply(this,arguments)}return $0(t,[{key:"render",value:function(){return this.props.children}}]),t}(he.Component);function FSe(i,e){var t=i.children,n=i.disabled,r=he.useRef(null),s=he.useRef(null),o=he.useContext(rH),a=typeof t=="function",u=a?t(r):t,d=he.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!a&&he.isValidElement(u)&&TK(u),f=h?u.ref:null,p=dCe(f,r),m=function(){var S;return S2(r.current)||(r.current&&Ko(r.current)==="object"?S2((S=r.current)===null||S===void 0?void 0:S.nativeElement):null)||S2(s.current)};he.useImperativeHandle(e,function(){return m()});var v=he.useRef(i);v.current=i;var b=he.useCallback(function(L){var S=v.current,y=S.onResize,E=S.data,A=L.getBoundingClientRect(),N=A.width,V=A.height,M=L.offsetWidth,R=L.offsetHeight,Y=Math.floor(N),X=Math.floor(V);if(d.current.width!==Y||d.current.height!==X||d.current.offsetWidth!==M||d.current.offsetHeight!==R){var $={width:Y,height:X,offsetWidth:M,offsetHeight:R};d.current=$;var T=M===Math.round(N)?N:M,O=R===Math.round(V)?V:R,B=wn(wn({},$),{},{offsetWidth:T,offsetHeight:O});o==null||o(B,L,E),y&&Promise.resolve().then(function(){y(B,L)})}},[]);return he.useEffect(function(){var L=m();return L&&!n&&MSe(L,b),function(){return RSe(L,b)}},[r.current,n]),he.createElement(PSe,{ref:s},h?he.cloneElement(u,{ref:p}):u)}var BSe=he.forwardRef(FSe),WSe="rc-observer-key";function VSe(i,e){var t=i.children,n=typeof t=="function"?[t]:iH(t);return n.map(function(r,s){var o=(r==null?void 0:r.key)||"".concat(WSe,"-").concat(s);return he.createElement(BSe,lo({},i,{key:o,ref:s===0?e:void 0}),r)})}var Sle=he.forwardRef(VSe);Sle.Collection=ASe;function HSe(i,e){var t=Object.assign({},i);return Array.isArray(e)&&e.forEach(function(n){delete t[n]}),t}var $Se=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,zSe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],f9={},Ec;function USe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=i.getAttribute("id")||i.getAttribute("data-reactid")||i.getAttribute("name");if(e&&f9[t])return f9[t];var n=window.getComputedStyle(i),r=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),s=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),a=zSe.map(function(d){return"".concat(d,":").concat(n.getPropertyValue(d))}).join(";"),u={sizingStyle:a,paddingSize:s,borderSize:o,boxSizing:r};return e&&t&&(f9[t]=u),u}function jSe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ec||(Ec=document.createElement("textarea"),Ec.setAttribute("tab-index","-1"),Ec.setAttribute("aria-hidden","true"),document.body.appendChild(Ec)),i.getAttribute("wrap")?Ec.setAttribute("wrap",i.getAttribute("wrap")):Ec.removeAttribute("wrap");var r=USe(i,e),s=r.paddingSize,o=r.borderSize,a=r.boxSizing,u=r.sizingStyle;Ec.setAttribute("style","".concat(u,";").concat($Se)),Ec.value=i.value||i.placeholder||"";var d=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,f=Ec.scrollHeight,p;if(a==="border-box"?f+=o:a==="content-box"&&(f-=s),t!==null||n!==null){Ec.value=" ";var m=Ec.scrollHeight-s;t!==null&&(d=m*t,a==="border-box"&&(d=d+s+o),f=Math.max(d,f)),n!==null&&(h=m*n,a==="border-box"&&(h=h+s+o),p=f>h?"":"hidden",f=Math.min(h,f))}return{height:f,minHeight:d,maxHeight:h,overflowY:p,resize:"none"}}var KSe=function(e,t,n,r){var s=n?n.call(r,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),d=0;d<o.length;d++){var h=o[d];if(!u(h))return!1;var f=e[h],p=t[h];if(s=n?n.call(r,f,p,h):void 0,s===!1||s===void 0&&f!==p)return!1}return!0};const qSe=Wp(KSe);var Iv;(function(i){i[i.NONE=0]="NONE",i[i.RESIZING=1]="RESIZING",i[i.RESIZED=2]="RESIZED"})(Iv||(Iv={}));var GSe=function(i){fC(t,i);var e=gC(t);function t(n){var r;return H0(this,t),r=e.call(this,n),r.nextFrameActionId=void 0,r.resizeFrameId=void 0,r.textArea=void 0,r.saveTextArea=function(s){r.textArea=s},r.handleResize=function(s){var o=r.state.resizeStatus,a=r.props,u=a.autoSize,d=a.onResize;o===Iv.NONE&&(typeof d=="function"&&d(s),u&&r.resizeOnNextFrame())},r.resizeOnNextFrame=function(){cancelAnimationFrame(r.nextFrameActionId),r.nextFrameActionId=requestAnimationFrame(r.resizeTextarea)},r.resizeTextarea=function(){var s=r.props.autoSize;if(!(!s||!r.textArea)){var o=s.minRows,a=s.maxRows,u=jSe(r.textArea,!1,o,a);r.setState({textareaStyles:u,resizeStatus:Iv.RESIZING},function(){cancelAnimationFrame(r.resizeFrameId),r.resizeFrameId=requestAnimationFrame(function(){r.setState({resizeStatus:Iv.RESIZED},function(){r.resizeFrameId=requestAnimationFrame(function(){r.setState({resizeStatus:Iv.NONE}),r.fixFirefoxAutoScroll()})})})})}},r.renderTextArea=function(){var s=r.props,o=s.prefixCls,a=o===void 0?"rc-textarea":o,u=s.autoSize,d=s.onResize,h=s.className,f=s.disabled,p=r.state,m=p.textareaStyles,v=p.resizeStatus,b=HSe(r.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),L=nd(a,h,en({},"".concat(a,"-disabled"),f));"value"in b&&(b.value=b.value||"");var S=wn(wn(wn({},r.props.style),m),v===Iv.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return he.createElement(Sle,{onResize:r.handleResize,disabled:!(u||d)},he.createElement("textarea",lo({},b,{className:L,style:S,ref:r.saveTextArea})))},r.state={textareaStyles:{},resizeStatus:Iv.NONE},r}return $0(t,[{key:"componentDidUpdate",value:function(r){(r.value!==this.props.value||!qSe(r.autoSize,this.props.autoSize))&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var r=this.textArea.selectionStart,s=this.textArea.selectionEnd;this.textArea.setSelectionRange(r,s)}}catch{}}},{key:"render",value:function(){return this.renderTextArea()}}]),t}(he.Component),YSe=function(i){fC(t,i);var e=gC(t);function t(n){var r;H0(this,t),r=e.call(this,n),r.resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(o){r.resizableTextArea=o},r.handleChange=function(o){var a=r.props.onChange;r.setValue(o.target.value,function(){r.resizableTextArea.resizeTextarea()}),a&&a(o)},r.handleKeyDown=function(o){var a=r.props,u=a.onPressEnter,d=a.onKeyDown;o.keyCode===13&&u&&u(o),d&&d(o)};var s=typeof n.value>"u"||n.value===null?n.defaultValue:n.value;return r.state={value:s},r}return $0(t,[{key:"setValue",value:function(r,s){"value"in this.props||this.setState({value:r},s)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return he.createElement(GSe,lo({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(r){return"value"in r?{value:r.value}:null}}]),t}(he.Component),Lle={},Ele={exports:{}};(function(i){function e(t){return t&&t.__esModule?t:{default:t}}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Ele);var KK=Ele.exports,xle={exports:{}},Dle={exports:{}};(function(i){function e(t){if(Array.isArray(t))return t}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Dle);var ZSe=Dle.exports,Ile={exports:{}};(function(i){function e(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,o,a,u,d=[],h=!0,f=!1;try{if(a=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(s=a.call(r)).done)&&(d.push(s.value),d.length!==n);h=!0);}catch(p){f=!0,o=p}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw o}}return d}}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Ile);var XSe=Ile.exports,Tle={exports:{}},kle={exports:{}};(function(i){function e(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,s=Array(n);r<n;r++)s[r]=t[r];return s}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(kle);var QSe=kle.exports;(function(i){var e=QSe;function t(n,r){if(n){if(typeof n=="string")return e(n,r);var s={}.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(n,r):void 0}}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports})(Tle);var JSe=Tle.exports,Nle={exports:{}};(function(i){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Nle);var eLe=Nle.exports;(function(i){var e=ZSe,t=XSe,n=JSe,r=eLe;function s(o,a){return e(o)||t(o,a)||n(o,a)||r()}i.exports=s,i.exports.__esModule=!0,i.exports.default=i.exports})(xle);var Ale=xle.exports,qK={},Ole={exports:{}},Mle={exports:{}};(function(i){function e(t){"@babel/helpers - typeof";return i.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i.exports.__esModule=!0,i.exports.default=i.exports,e(t)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Mle);var tLe=Mle.exports;(function(i){var e=tLe.default;function t(r){if(typeof WeakMap!="function")return null;var s=new WeakMap,o=new WeakMap;return(t=function(u){return u?o:s})(r)}function n(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||e(r)!="object"&&typeof r!="function")return{default:r};var o=t(s);if(o&&o.has(r))return o.get(r);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in r)if(d!=="default"&&{}.hasOwnProperty.call(r,d)){var h=u?Object.getOwnPropertyDescriptor(r,d):null;h&&(h.get||h.set)?Object.defineProperty(a,d,h):a[d]=r[d]}return a.default=r,o&&o.set(r,a),a}i.exports=n,i.exports.__esModule=!0,i.exports.default=i.exports})(Ole);var GK=Ole.exports,nLe=GK.default;Object.defineProperty(qK,"__esModule",{value:!0});qK.default=iLe;var $Q=nLe(he);function iLe(i){var e=$Q.useRef();e.current=i;var t=$Q.useCallback(function(){for(var n,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(s))},[]);return t}var Wy={},YK={};Object.defineProperty(YK,"__esModule",{value:!0});YK.default=rLe;function rLe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sLe=KK.default,oLe=GK.default;Object.defineProperty(Wy,"__esModule",{value:!0});Wy.useLayoutUpdateEffect=Wy.default=void 0;var sH=oLe(he),aLe=sLe(YK),zQ=(0,aLe.default)()?sH.useLayoutEffect:sH.useEffect,Rle=function(e,t){var n=sH.useRef(!0);zQ(function(){return e(n.current)},t),zQ(function(){return n.current=!1,function(){n.current=!0}},[])};Wy.useLayoutUpdateEffect=function(e,t){Rle(function(n){if(!n)return e()},t)};Wy.default=Rle;var ZK={},lLe=GK.default,uLe=KK.default;Object.defineProperty(ZK,"__esModule",{value:!0});ZK.default=dLe;var cLe=uLe(Ale),g9=lLe(he);function dLe(i){var e=g9.useRef(!1),t=g9.useState(i),n=(0,cLe.default)(t,2),r=n[0],s=n[1];g9.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(a,u){u&&e.current||s(a)}return[r,o]}var XK=KK.default;Object.defineProperty(Lle,"__esModule",{value:!0});var hLe=Lle.default=fLe,UQ=XK(Ale),jQ=XK(qK),KQ=Wy,qQ=XK(ZK);function p9(i){return i!==void 0}function fLe(i,e){var t=e||{},n=t.defaultValue,r=t.value,s=t.onChange,o=t.postState,a=(0,qQ.default)(function(){return p9(r)?r:p9(n)?typeof n=="function"?n():n:typeof i=="function"?i():i}),u=(0,UQ.default)(a,2),d=u[0],h=u[1],f=r!==void 0?r:d,p=o?o(f):f,m=(0,jQ.default)(s),v=(0,qQ.default)([f]),b=(0,UQ.default)(v,2),L=b[0],S=b[1];(0,KQ.useLayoutUpdateEffect)(function(){var E=L[0];d!==E&&m(d,E)},[L]),(0,KQ.useLayoutUpdateEffect)(function(){p9(r)||h(r)},[r]);var y=(0,jQ.default)(function(E,A){h(E,A),S([f],A)});return[p,y]}var gLe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Ple=gt(MS,"textarea"),pLe=_n(Ple,"show-count"),mLe=i=>{var{showCount:e=!1,maxLength:t,className:n,style:r,onChange:s}=i,o=gLe(i,["showCount","maxLength","className","style","onChange"]);const a=he.useRef(null),[u,d]=hLe(o.defaultValue,{value:o.value}),h=he.useRef(o.value);he.useEffect(()=>{(o.value!==void 0||h.current!==o.value)&&(d(o.value),h.current=o.value)},[o.value,h.current]);const f=S=>{o.value===void 0&&d(S)},p=S=>{f(S.target.value),wle(a.current,S,s)},m=wr.omit(o,["value"]),v=re.createElement(YSe,Object.assign({},m,{value:u,maxLength:t,className:mn(n&&!e?[n]:""),style:e?{}:r,prefixCls:MS,onChange:p,ref:a}));let b=kSe(u);const L=Number(t)>0;if(b=L?[...b].slice(0,t).join(""):b,e){const y=`${[...b].length}${L?` / ${t}`:""}`;return re.createElement("div",{className:mn(n,Ple,pLe),style:r,"data-count":y},v)}return v};jK.TextArea=mLe;var _Le=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const rM=Bn("list"),vLe=_n(rM,"vertical"),bLe=_n(rM,"horizontal");function CLe(i){const{children:e,current:t,disable:n,onClick:r,onSelect:s,className:o,mode:a}=i,u=_Le(i,["children","current","disable","onClick","onSelect","className","mode"]),[d,h]=he.useState(t),[f,p]=he.useState(n);he.useEffect(()=>{d!==t&&h(t),n!==f&&p(n)},[t,n]);const m=(L,S)=>{r==null||r(L,S),S&&(S.id!==d&&h(S.id),s==null||s(L,S))},b=mn(rM,o,a==="horizontal"?bLe:vLe);return re.createElement("ul",Object.assign({},u,{className:b}),ZO(e,{active:d,disable:f,onClick:m}))}var wLe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const QK=gt(rM,"item"),yLe=gt(rM,"label"),SLe=_n(QK,"active"),GQ=_n(QK,"disabled");function LLe(i){const{id:e,onClick:t,disabled:n,active:r,disable:s,className:o,children:a}=i,u=wLe(i,["id","onClick","disabled","active","disable","className","children"]),d=p=>{t==null||t(p,i)};let h="";(n!==void 0||n===!0)&&(h=GQ),s===e&&(h=GQ);const f=mn(QK,o,h,r===e?SLe:"");return re.createElement("li",Object.assign({id:e.toString(),className:f},u,{onClick:d}),re.createElement("span",{className:yLe},a))}class ELe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Fle=new ELe;function gn(i){Cg(i)||Fle.onUnexpectedError(i)}function Ro(i){Cg(i)||Fle.onUnexpectedExternalError(i)}function YQ(i){if(i instanceof Error){let{name:e,message:t}=i;const n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n}}return i}const oH="Canceled";function Cg(i){return i instanceof Error&&i.name===oH&&i.message===oH}function _C(){const i=new Error(oH);return i.name=i.message,i}function jh(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function xLe(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class DLe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function kp(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var Qn;(function(i){function e(y){return y&&typeof y=="object"&&typeof y[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*r(y){yield y}i.single=r;function s(y){return y||t}i.from=s;function o(y){return!y||y[Symbol.iterator]().next().done===!0}i.isEmpty=o;function a(y){return y[Symbol.iterator]().next().value}i.first=a;function u(y,E){for(const A of y)if(E(A))return!0;return!1}i.some=u;function d(y,E){for(const A of y)if(E(A))return A}i.find=d;function*h(y,E){for(const A of y)E(A)&&(yield A)}i.filter=h;function*f(y,E){let A=0;for(const N of y)yield E(N,A++)}i.map=f;function*p(...y){for(const E of y)for(const A of E)yield A}i.concat=p;function*m(y){for(const E of y)for(const A of E)yield A}i.concatNested=m;function v(y,E,A){let N=A;for(const V of y)N=E(N,V);return N}i.reduce=v;function*b(y,E,A=y.length){for(E<0&&(E+=y.length),A<0?A+=y.length:A>y.length&&(A=y.length);E<A;E++)yield y[E]}i.slice=b;function L(y,E=Number.POSITIVE_INFINITY){const A=[];if(E===0)return[A,y];const N=y[Symbol.iterator]();for(let V=0;V<E;V++){const M=N.next();if(M.done)return[A,i.empty()];A.push(M.value)}return[A,{[Symbol.iterator](){return N}}]}i.consume=L;function S(y,E,A=(N,V)=>N===V){const N=y[Symbol.iterator](),V=E[Symbol.iterator]();for(;;){const M=N.next(),R=V.next();if(M.done!==R.done)return!1;if(M.done)return!0;if(!A(M.value,R.value))return!1}}i.equals=S})(Qn||(Qn={}));class ILe extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function JK(i){return typeof i.dispose=="function"&&i.dispose.length===0}function ri(i){if(Qn.is(i)){let e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new ILe(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function t0(...i){return Un(()=>ri(i))}function Un(i){return{dispose:kp(()=>{i()})}}class Je{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{ri(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Je.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Je.DISABLE_DISPOSED_WARNING=!1;class Oe{constructor(){this._store=new Je,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Oe.None=Object.freeze({dispose(){}});class Oa{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class TLe{constructor(e){this.object=e}dispose(){}}let _s=class aH{constructor(e){this.element=e,this.next=aH.Undefined,this.prev=aH.Undefined}};_s.Undefined=new _s(void 0);class Tu{constructor(){this._first=_s.Undefined,this._last=_s.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===_s.Undefined}clear(){let e=this._first;for(;e!==_s.Undefined;){const t=e.next;e.prev=_s.Undefined,e.next=_s.Undefined,e=t}this._first=_s.Undefined,this._last=_s.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new _s(e);if(this._first===_s.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(n))}}shift(){if(this._first!==_s.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==_s.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==_s.Undefined&&e.next!==_s.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===_s.Undefined&&e.next===_s.Undefined?(this._first=_s.Undefined,this._last=_s.Undefined):e.next===_s.Undefined?(this._last=this._last.prev,this._last.next=_s.Undefined):e.prev===_s.Undefined&&(this._first=this._first.next,this._first.prev=_s.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==_s.Undefined;)yield e.element,e=e.next}}var m9;const zP="en";let _F=!1,vF=!1,UP=!1,Ble=!1,Wle=!1,eq=!1,ZN,jP=zP,kLe,wv;const Yr=typeof self=="object"?self:typeof global=="object"?global:{};let dl;typeof Yr.vscode<"u"&&typeof Yr.vscode.process<"u"?dl=Yr.vscode.process:typeof process<"u"&&(dl=process);const NLe=typeof((m9=dl==null?void 0:dl.versions)===null||m9===void 0?void 0:m9.electron)=="string",ALe=NLe&&(dl==null?void 0:dl.type)==="renderer";if(typeof navigator=="object"&&!ALe)wv=navigator.userAgent,_F=wv.indexOf("Windows")>=0,vF=wv.indexOf("Macintosh")>=0,eq=(wv.indexOf("Macintosh")>=0||wv.indexOf("iPad")>=0||wv.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,UP=wv.indexOf("Linux")>=0,Wle=!0,ZN=navigator.language,jP=ZN;else if(typeof dl=="object"){_F=dl.platform==="win32",vF=dl.platform==="darwin",UP=dl.platform==="linux",UP&&dl.env.SNAP&&dl.env.SNAP_REVISION,ZN=zP,jP=zP;const i=dl.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];ZN=e.locale,jP=t||zP,kLe=e._translationsConfigFile}catch{}Ble=!0}else console.error("Unable to resolve platform.");const Ao=_F,qn=vF,Xa=UP,Kh=Ble,RS=Wle,ng=eq,OLe=wv,MLe=jP,RLe=ZN,PLe=(()=>{if(typeof Yr.postMessage=="function"&&!Yr.importScripts){let i=[];Yr.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=i.length;n<r;n++){const s=i[n];if(s.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),Yr.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),qu=vF||eq?2:_F?1:3;let ZQ=!0,XQ=!1;function Vle(){if(!XQ){XQ=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,ZQ=new Uint16Array(i.buffer)[0]===512+1}return ZQ}const FLe=Yr.performance&&typeof Yr.performance.now=="function";class ig{constructor(e){this._highResolution=FLe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new ig(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?Yr.performance.now():Date.now()}}var Rt;(function(i){i.None=()=>Oe.None;function e(y){return(E,A=null,N)=>{let V=!1,M;return M=y(R=>{if(!V)return M?M.dispose():V=!0,E.call(A,R)},null,N),V&&M.dispose(),M}}i.once=e;function t(y,E){return u((A,N=null,V)=>y(M=>A.call(N,E(M)),null,V))}i.map=t;function n(y,E){return u((A,N=null,V)=>y(M=>{E(M),A.call(N,M)},null,V))}i.forEach=n;function r(y,E){return u((A,N=null,V)=>y(M=>E(M)&&A.call(N,M),null,V))}i.filter=r;function s(y){return y}i.signal=s;function o(...y){return(E,A=null,N)=>t0(...y.map(V=>V(M=>E.call(A,M),null,N)))}i.any=o;function a(y,E,A){let N=A;return t(y,V=>(N=E(N,V),N))}i.reduce=a;function u(y){let E;const A=new Ce({onFirstListenerAdd(){E=y(A.fire,A)},onLastListenerRemove(){E.dispose()}});return A.event}function d(y,E,A=100,N=!1,V){let M,R,Y,X=0;const $=new Ce({leakWarningThreshold:V,onFirstListenerAdd(){M=y(T=>{X++,R=E(R,T),N&&!Y&&($.fire(R),R=void 0),clearTimeout(Y),Y=setTimeout(()=>{const O=R;R=void 0,Y=void 0,(!N||X>1)&&$.fire(O),X=0},A)})},onLastListenerRemove(){M.dispose()}});return $.event}i.debounce=d;function h(y,E=(A,N)=>A===N){let A=!0,N;return r(y,V=>{const M=A||!E(V,N);return A=!1,N=V,M})}i.latch=h;function f(y,E){return[i.filter(y,E),i.filter(y,A=>!E(A))]}i.split=f;function p(y,E=!1,A=[]){let N=A.slice(),V=y(Y=>{N?N.push(Y):R.fire(Y)});const M=()=>{N&&N.forEach(Y=>R.fire(Y)),N=null},R=new Ce({onFirstListenerAdd(){V||(V=y(Y=>R.fire(Y)))},onFirstListenerDidAdd(){N&&(E?setTimeout(M):M())},onLastListenerRemove(){V&&V.dispose(),V=null}});return R.event}i.buffer=p;class m{constructor(E){this.event=E}map(E){return new m(t(this.event,E))}forEach(E){return new m(n(this.event,E))}filter(E){return new m(r(this.event,E))}reduce(E,A){return new m(a(this.event,E,A))}latch(){return new m(h(this.event))}debounce(E,A=100,N=!1,V){return new m(d(this.event,E,A,N,V))}on(E,A,N){return this.event(E,A,N)}once(E,A,N){return e(this.event)(E,A,N)}}function v(y){return new m(y)}i.chain=v;function b(y,E,A=N=>N){const N=(...Y)=>R.fire(A(...Y)),V=()=>y.on(E,N),M=()=>y.removeListener(E,N),R=new Ce({onFirstListenerAdd:V,onLastListenerRemove:M});return R.event}i.fromNodeEventEmitter=b;function L(y,E,A=N=>N){const N=(...Y)=>R.fire(A(...Y)),V=()=>y.addEventListener(E,N),M=()=>y.removeEventListener(E,N),R=new Ce({onFirstListenerAdd:V,onLastListenerRemove:M});return R.event}i.fromDOMEventEmitter=L;function S(y){return new Promise(E=>e(y)(E))}i.toPromise=S})(Rt||(Rt={}));class u8{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${u8._idPool++}`}start(e){this._stopWatch=new ig(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}u8._idPool=0;let Ce=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new u8(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var r;this._listeners||(this._listeners=new Tu);const s=this._listeners.isEmpty();s&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);s&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(r=this._leakageMon)===null||r===void 0?void 0:r.check(this._listeners.size),u=Un(()=>{a&&a(),this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Je?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new Tu);for(let r of this._listeners)this._deliveryQueue.push([r,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[r,s]=this._deliveryQueue.shift();try{typeof r=="function"?r.call(void 0,s):r[0].call(r[1],s)}catch(o){gn(o)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,r,s;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(r=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||r===void 0||r.call(n),(s=this._leakageMon)===null||s===void 0||s.dispose())}};class bF extends Ce{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Tu,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class BLe extends bF{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class tq{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,r)=>e(s=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,s)):t.call(n,s)},void 0,r)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(r=>r()),n}}class QQ{constructor(){this.listening=!1,this.inputEvent=Rt.None,this.inputEventListener=Oe.None,this.emitter=new Ce({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class bb{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new Ce,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}bb.INSTANCE=new bb;function CF(){return bb.INSTANCE.getZoomLevel()}function Hle(){return bb.INSTANCE.getTimeSinceLastZoomLevelChanged()}function nq(i){return bb.INSTANCE.onDidChangeZoomLevel(i)}function $le(){return bb.INSTANCE.getZoomFactor()}function vA(){return bb.INSTANCE.getPixelRatio()}const sM=navigator.userAgent,wl=sM.indexOf("Firefox")>=0,n0=sM.indexOf("AppleWebKit")>=0,iq=sM.indexOf("Chrome")>=0,Kc=!iq&&sM.indexOf("Safari")>=0,zle=!iq&&!Kc&&n0,Ule=sM.indexOf("Android")>=0,rq=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,WLe=Object.freeze(Object.defineProperty({__proto__:null,getPixelRatio:vA,getTimeSinceLastZoomLevelChanged:Hle,getZoomFactor:$le,getZoomLevel:CF,isAndroid:Ule,isChrome:iq,isFirefox:wl,isSafari:Kc,isStandalone:rq,isWebKit:n0,isWebkitWebView:zle,onDidChangeZoomLevel:nq},Symbol.toStringTag,{value:"Module"})),c8={clipboard:{writeText:Kh||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Kh||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Kh||rq?0:navigator.keyboard||Kc?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};class sq{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const KP=new sq,lH=new sq,uH=new sq,jle=new Array(230),VLe=Object.create(null),HLe=Object.create(null),oq=[];for(let i=0;i<=193;i++)oq[i]=-1;(function(){const i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",0,i,0,i,i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_CLEAR",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]];let t=[],n=[];for(const r of e){const[s,o,a,u,d,h,f,p,m,v]=r;if(n[a]||(n[a]=!0,VLe[u]=a,HLe[u.toLowerCase()]=a,o&&(oq[a]=d)),!t[d]){if(t[d]=!0,!h)throw new Error(`String representation missing for key code ${d} around scan code ${u}`);KP.define(d,h),lH.define(d,m||h),uH.define(d,v||m||h)}f&&(jle[f]=d)}})();var M1;(function(i){function e(a){return KP.keyCodeToStr(a)}i.toString=e;function t(a){return KP.strToKeyCode(a)}i.fromString=t;function n(a){return lH.keyCodeToStr(a)}i.toUserSettingsUS=n;function r(a){return uH.keyCodeToStr(a)}i.toUserSettingsGeneral=r;function s(a){return lH.strToKeyCode(a)||uH.strToKeyCode(a)}i.fromUserSettings=s;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return KP.keyCodeToStr(a)}i.toElectronAccelerator=o})(M1||(M1={}));function Zr(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}function cH(i,e){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new wF([_9(t,e),_9(n,e)]):new wF([_9(t,e)])}function _9(i,e){const t=!!(i&2048),n=!!(i&256),r=e===2?n:t,s=!!(i&1024),o=!!(i&512),a=e===2?t:n,u=i&255;return new Cb(r,s,o,a,u)}class Cb{constructor(e,t,n,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyCode=s}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new wF([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class wF{constructor(e){if(e.length===0)throw jh("parts");this.parts=e}}class $Le{constructor(e,t,n,r,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyLabel=s,this.keyAriaLabel=o}}class zLe{}function ULe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return M1.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(wl){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(qn&&e===224)return 57}else if(n0){if(e===91)return 57;if(qn&&e===93)return 57;if(!qn&&e===92)return 57}return jle[e]||0}const jLe=qn?256:2048,KLe=512,qLe=1024,GLe=qn?2048:256;class yr{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=ULe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=jLe),this.altKey&&(t|=KLe),this.shiftKey&&(t|=qLe),this.metaKey&&(t|=GLe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Cb(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let dH=!1,jC=null;function YLe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return dH=!0,null}catch{return dH=!0,null}return i.parent}class hH{static getSameOriginWindowChain(){if(!jC){jC=[];let e=window,t;do t=YLe(e),t?jC.push({window:e,iframeElement:e.frameElement||null}):jC.push({window:e,iframeElement:null}),e=t;while(e)}return jC.slice(0)}static hasDifferentOriginAncestor(){return jC||this.getSameOriginWindowChain(),dH}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,r=0,s=this.getSameOriginWindowChain();for(const o of s){if(n+=o.window.scrollY,r+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();n+=a.top,r+=a.left}return{top:n,left:r}}}class Qu{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=hH.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Vy{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let r=e,s=e;if(typeof r.wheelDeltaY<"u")this.deltaY=r.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?wl&&!qn?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")Kc&&Ao?this.deltaX=-(r.wheelDeltaX/120):this.deltaX=r.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?wl&&!qn?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}const Kle=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var Fn;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof qP?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Rt.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Kle})})(Fn||(Fn={}));class qP{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Kle:(this._emitter||(this._emitter=new Ce),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let oa=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new qP),this._token}cancel(){this._token?this._token instanceof qP&&this._token.cancel():this._token=Fn.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof qP&&this._token.dispose():this._token=Fn.None}};var Uu=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},XN=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,u){o=i[s](o),r(a,u,o.done,o.value)})}}function r(s,o,a,u){Promise.resolve(u).then(function(d){s({value:d,done:a})},o)}};function ZLe(i){return!!i&&typeof i.then=="function"}function uo(i){const e=new oa,t=i(e.token),n=new Promise((r,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),s(_C())});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),r(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(r,s){return n.then(r,s)}catch(r){return this.then(void 0,r)}finally(r){return n.finally(r)}}}function aq(i,e,t){return Promise.race([i,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class XLe{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(r=>{this.activePromise=null,t(r)},r=>{this.activePromise=null,n(r)})})}}class Np{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,r)=>{this.doResolve=n,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(_C()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class QLe{constructor(e){this.delayer=new Np(e),this.throttler=new XLe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function m0(i,e){return e?new Promise((t,n)=>{const r=setTimeout(()=>{s.dispose(),t()},i),s=e.onCancellationRequested(()=>{clearTimeout(r),s.dispose(),n(_C())})}):uo(t=>m0(i,t))}function wb(i,e=0){const t=setTimeout(i,e);return Un(()=>clearTimeout(t))}function qle(i,e=n=>!!n,t=null){let n=0;const r=i.length,s=()=>{if(n>=r)return Promise.resolve(t);const o=i[n++];return Promise.resolve(o()).then(u=>e(u)?Promise.resolve(u):s())};return s()}class Ma{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class oM{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class er{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let bA;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?bA=i=>{PLe(()=>{if(e)return;const t=Date.now()+3;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:bA=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class ry{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=bA(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Gle{constructor(){this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}}var fH;(function(i){function e(n){return Uu(this,void 0,void 0,function*(){let r;const s=yield Promise.all(n.map(o=>o.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return s})}i.settled=e;function t(n){return new Promise((r,s)=>Uu(this,void 0,void 0,function*(){try{yield n(r,s)}catch(o){s(o)}}))}i.withAsyncBody=t})(fH||(fH={}));class Gs{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Ce,queueMicrotask(()=>Uu(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Gs(t=>{t.emitMany(e)})}static fromPromise(e){return new Gs(t=>Uu(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Gs(t=>Uu(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>Uu(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Gs(t=>Uu(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var r,s;return Uu(this,void 0,void 0,function*(){var o,a;try{for(r=XN(n);s=yield r.next(),!s.done;){const u=s.value;t.emitOne(u)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>Uu(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Rt.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Gs(n=>Uu(this,void 0,void 0,function*(){var r,s;try{for(var o=XN(e),a;a=yield o.next(),!a.done;){const u=a.value;n.emitOne(t(u))}}catch(u){r={error:u}}finally{try{a&&!a.done&&(s=o.return)&&(yield s.call(o))}finally{if(r)throw r.error}}}))}map(e){return Gs.map(this,e)}static filter(e,t){return new Gs(n=>Uu(this,void 0,void 0,function*(){var r,s;try{for(var o=XN(e),a;a=yield o.next(),!a.done;){const u=a.value;t(u)&&n.emitOne(u)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(s=o.return)&&(yield s.call(o))}finally{if(r)throw r.error}}}))}filter(e){return Gs.filter(this,e)}static coalesce(e){return Gs.filter(e,t=>!!t)}coalesce(){return Gs.coalesce(this)}static toPromise(e){var t,n,r,s;return Uu(this,void 0,void 0,function*(){const o=[];try{for(t=XN(e);n=yield t.next(),!n.done;){const a=n.value;o.push(a)}}catch(a){r={error:a}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}return o})}toPromise(){return Gs.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}Gs.EMPTY=Gs.fromArray([]);class JLe extends Gs{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function eEe(i){const e=new oa,t=i(e.token);return new JLe(e,n=>Uu(this,void 0,void 0,function*(){var r,s;const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),n.reject(_C())});try{try{for(var a=XN(t),u;u=yield a.next(),!u.done;){const d=u.value;if(e.token.isCancellationRequested)return;n.emitOne(d)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(s=a.return)&&(yield s.call(a))}finally{if(r)throw r.error}}o.dispose(),e.dispose()}catch(d){o.dispose(),e.dispose(),n.reject(d)}}))}let sy;if(typeof Yr.vscode<"u"&&typeof Yr.vscode.process<"u"){const i=Yr.vscode.process;sy={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"?sy={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:sy={get platform(){return Ao?"win32":qn?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const gH=sy.cwd,tEe=sy.env,vC=sy.platform,nEe=65,iEe=97,rEe=90,sEe=122,i0=46,Zo=47,wu=92,gv=58,oEe=63;class Yle extends Error{constructor(e,t,n){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${r} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Ys(i,e){if(typeof i!="string")throw new Yle(e,"string",i)}function Ii(i){return i===Zo||i===wu}function pH(i){return i===Zo}function pv(i){return i>=nEe&&i<=rEe||i>=iEe&&i<=sEe}function yF(i,e,t,n){let r="",s=0,o=-1,a=0,u=0;for(let d=0;d<=i.length;++d){if(d<i.length)u=i.charCodeAt(d);else{if(n(u))break;u=Zo}if(n(u)){if(!(o===d-1||a===1))if(a===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==i0||r.charCodeAt(r.length-2)!==i0){if(r.length>2){const h=r.lastIndexOf(t);h===-1?(r="",s=0):(r=r.slice(0,h),s=r.length-1-r.lastIndexOf(t)),o=d,a=0;continue}else if(r.length!==0){r="",s=0,o=d,a=0;continue}}e&&(r+=r.length>0?`${t}..`:"..",s=2)}else r.length>0?r+=`${t}${i.slice(o+1,d)}`:r=i.slice(o+1,d),s=d-o-1;o=d,a=0}else u===i0&&a!==-1?++a:a=-1}return r}function Zle(i,e){if(e===null||typeof e!="object")throw new Yle("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const gl={resolve(...i){let e="",t="",n=!1;for(let r=i.length-1;r>=-1;r--){let s;if(r>=0){if(s=i[r],Ys(s,"path"),s.length===0)continue}else e.length===0?s=gH():(s=tEe[`=${e}`]||gH(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===wu)&&(s=`${e}\\`));const o=s.length;let a=0,u="",d=!1;const h=s.charCodeAt(0);if(o===1)Ii(h)&&(a=1,d=!0);else if(Ii(h))if(d=!0,Ii(s.charCodeAt(1))){let f=2,p=f;for(;f<o&&!Ii(s.charCodeAt(f));)f++;if(f<o&&f!==p){const m=s.slice(p,f);for(p=f;f<o&&Ii(s.charCodeAt(f));)f++;if(f<o&&f!==p){for(p=f;f<o&&!Ii(s.charCodeAt(f));)f++;(f===o||f!==p)&&(u=`\\\\${m}\\${s.slice(p,f)}`,a=f)}}}else a=1;else pv(h)&&s.charCodeAt(1)===gv&&(u=s.slice(0,2),a=2,o>2&&Ii(s.charCodeAt(2))&&(d=!0,a=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=yF(t,!n,"\\",Ii),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){Ys(i,"path");const e=i.length;if(e===0)return".";let t=0,n,r=!1;const s=i.charCodeAt(0);if(e===1)return pH(s)?"\\":i;if(Ii(s))if(r=!0,Ii(i.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){const d=i.slice(u,a);for(u=a;a<e&&Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ii(i.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${i.slice(u)}\\`;a!==u&&(n=`\\\\${d}\\${i.slice(u,a)}`,t=a)}}}else t=1;else pv(s)&&i.charCodeAt(1)===gv&&(n=i.slice(0,2),t=2,e>2&&Ii(i.charCodeAt(2))&&(r=!0,t=3));let o=t<e?yF(i.slice(t),!r,"\\",Ii):"";return o.length===0&&!r&&(o="."),o.length>0&&Ii(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?r?`\\${o}`:o:r?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){Ys(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return Ii(t)||e>2&&pv(t)&&i.charCodeAt(1)===gv&&Ii(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let s=0;s<i.length;++s){const o=i[s];Ys(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,r=0;if(typeof t=="string"&&Ii(t.charCodeAt(0))){++r;const s=t.length;s>1&&Ii(t.charCodeAt(1))&&(++r,s>2&&(Ii(t.charCodeAt(2))?++r:n=!1))}if(n){for(;r<e.length&&Ii(e.charCodeAt(r));)r++;r>=2&&(e=`\\${e.slice(r)}`)}return gl.normalize(e)},relative(i,e){if(Ys(i,"from"),Ys(e,"to"),i===e)return"";const t=gl.resolve(i),n=gl.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let r=0;for(;r<i.length&&i.charCodeAt(r)===wu;)r++;let s=i.length;for(;s-1>r&&i.charCodeAt(s-1)===wu;)s--;const o=s-r;let a=0;for(;a<e.length&&e.charCodeAt(a)===wu;)a++;let u=e.length;for(;u-1>a&&e.charCodeAt(u-1)===wu;)u--;const d=u-a,h=o<d?o:d;let f=-1,p=0;for(;p<h;p++){const v=i.charCodeAt(r+p);if(v!==e.charCodeAt(a+p))break;v===wu&&(f=p)}if(p!==h){if(f===-1)return n}else{if(d>h){if(e.charCodeAt(a+p)===wu)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}o>h&&(i.charCodeAt(r+p)===wu?f=p:p===2&&(f=3)),f===-1&&(f=0)}let m="";for(p=r+f+1;p<=s;++p)(p===s||i.charCodeAt(p)===wu)&&(m+=m.length===0?"..":"\\..");return a+=f,m.length>0?`${m}${n.slice(a,u)}`:(n.charCodeAt(a)===wu&&++a,n.slice(a,u))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";const e=gl.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===wu){if(e.charCodeAt(1)===wu){const t=e.charCodeAt(2);if(t!==oEe&&t!==i0)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(pv(e.charCodeAt(0))&&e.charCodeAt(1)===gv&&e.charCodeAt(2)===wu)return`\\\\?\\${e}`;return i},dirname(i){Ys(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const r=i.charCodeAt(0);if(e===1)return Ii(r)?i:".";if(Ii(r)){if(t=n=1,Ii(i.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ii(i.charCodeAt(a));)a++;if(a===e)return i;a!==u&&(t=n=a+1)}}}}else pv(r)&&i.charCodeAt(1)===gv&&(t=e>2&&Ii(i.charCodeAt(2))?3:2,n=t);let s=-1,o=!0;for(let a=e-1;a>=n;--a)if(Ii(i.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return i.slice(0,s)},basename(i,e){e!==void 0&&Ys(e,"ext"),Ys(i,"path");let t=0,n=-1,r=!0,s;if(i.length>=2&&pv(i.charCodeAt(0))&&i.charCodeAt(1)===gv&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(s=i.length-1;s>=t;--s){const u=i.charCodeAt(s);if(Ii(u)){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(s=i.length-1;s>=t;--s)if(Ii(i.charCodeAt(s))){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)},extname(i){Ys(i,"path");let e=0,t=-1,n=0,r=-1,s=!0,o=0;i.length>=2&&i.charCodeAt(1)===gv&&pv(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const u=i.charCodeAt(a);if(Ii(u)){if(!s){n=a+1;break}continue}r===-1&&(s=!1,r=a+1),u===i0?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===n+1?"":i.slice(t,r)},format:Zle.bind(null,"\\"),parse(i){Ys(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,r=i.charCodeAt(0);if(t===1)return Ii(r)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(Ii(r)){if(n=1,Ii(i.charCodeAt(1))){let f=2,p=f;for(;f<t&&!Ii(i.charCodeAt(f));)f++;if(f<t&&f!==p){for(p=f;f<t&&Ii(i.charCodeAt(f));)f++;if(f<t&&f!==p){for(p=f;f<t&&!Ii(i.charCodeAt(f));)f++;f===t?n=f:f!==p&&(n=f+1)}}}}else if(pv(r)&&i.charCodeAt(1)===gv){if(t<=2)return e.root=e.dir=i,e;if(n=2,Ii(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let s=-1,o=n,a=-1,u=!0,d=i.length-1,h=0;for(;d>=n;--d){if(r=i.charCodeAt(d),Ii(r)){if(!u){o=d+1;break}continue}a===-1&&(u=!1,a=d+1),r===i0?s===-1?s=d:h!==1&&(h=1):s!==-1&&(h=-1)}return a!==-1&&(s===-1||h===0||h===1&&s===a-1&&s===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,s),e.base=i.slice(o,a),e.ext=i.slice(s,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},xs={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const r=n>=0?i[n]:gH();Ys(r,"path"),r.length!==0&&(e=`${r}/${e}`,t=r.charCodeAt(0)===Zo)}return e=yF(e,!t,"/",pH),t?`/${e}`:e.length>0?e:"."},normalize(i){if(Ys(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Zo,t=i.charCodeAt(i.length-1)===Zo;return i=yF(i,!e,"/",pH),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return Ys(i,"path"),i.length>0&&i.charCodeAt(0)===Zo},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];Ys(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":xs.normalize(e)},relative(i,e){if(Ys(i,"from"),Ys(e,"to"),i===e||(i=xs.resolve(i),e=xs.resolve(e),i===e))return"";const t=1,n=i.length,r=n-t,s=1,o=e.length-s,a=r<o?r:o;let u=-1,d=0;for(;d<a;d++){const f=i.charCodeAt(t+d);if(f!==e.charCodeAt(s+d))break;f===Zo&&(u=d)}if(d===a)if(o>a){if(e.charCodeAt(s+d)===Zo)return e.slice(s+d+1);if(d===0)return e.slice(s+d)}else r>a&&(i.charCodeAt(t+d)===Zo?u=d:d===0&&(u=0));let h="";for(d=t+u+1;d<=n;++d)(d===n||i.charCodeAt(d)===Zo)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(s+u)}`},toNamespacedPath(i){return i},dirname(i){if(Ys(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Zo;let t=-1,n=!0;for(let r=i.length-1;r>=1;--r)if(i.charCodeAt(r)===Zo){if(!n){t=r;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&Ys(e,"ext"),Ys(i,"path");let t=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(s=i.length-1;s>=0;--s){const u=i.charCodeAt(s);if(u===Zo){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===Zo){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)},extname(i){Ys(i,"path");let e=-1,t=0,n=-1,r=!0,s=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===Zo){if(!r){t=o+1;break}continue}n===-1&&(r=!1,n=o+1),a===i0?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:Zle.bind(null,"/"),parse(i){Ys(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Zo;let n;t?(e.root="/",n=1):n=0;let r=-1,s=0,o=-1,a=!0,u=i.length-1,d=0;for(;u>=n;--u){const h=i.charCodeAt(u);if(h===Zo){if(!a){s=u+1;break}continue}o===-1&&(a=!1,o=u+1),h===i0?r===-1?r=u:d!==1&&(d=1):r!==-1&&(d=-1)}if(o!==-1){const h=s===0&&t?1:s;r===-1||d===0||d===1&&r===o-1&&r===s+1?e.base=e.name=i.slice(h,o):(e.name=i.slice(h,r),e.base=i.slice(h,o),e.ext=i.slice(r,o))}return s>0?e.dir=i.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};xs.win32=gl.win32=gl;xs.posix=gl.posix=xs;const lq=vC==="win32"?gl.normalize:xs.normalize,aEe=vC==="win32"?gl.resolve:xs.resolve,lEe=vC==="win32"?gl.relative:xs.relative,Xle=vC==="win32"?gl.dirname:xs.dirname,K1=vC==="win32"?gl.basename:xs.basename,uEe=vC==="win32"?gl.extname:xs.extname,q1=vC==="win32"?gl.sep:xs.sep,cEe=/^\w[\w\d+.-]*$/,dEe=/^\//,hEe=/^\/\//;function JQ(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!cEe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!dEe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(hEe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function fEe(i,e){return!i&&!e?"file":i}function gEe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==kh&&(e=kh+e):e=kh;break}return e}const Kr="",kh="/",pEe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class rn{constructor(e,t,n,r,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||Kr,this.authority=e.authority||Kr,this.path=e.path||Kr,this.query=e.query||Kr,this.fragment=e.fragment||Kr):(this.scheme=fEe(e,o),this.authority=t||Kr,this.path=gEe(this.scheme,n||Kr),this.query=r||Kr,this.fragment=s||Kr,JQ(this,o))}static isUri(e){return e instanceof rn?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return SF(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Kr),n===void 0?n=this.authority:n===null&&(n=Kr),r===void 0?r=this.path:r===null&&(r=Kr),s===void 0?s=this.query:s===null&&(s=Kr),o===void 0?o=this.fragment:o===null&&(o=Kr),t===this.scheme&&n===this.authority&&r===this.path&&s===this.query&&o===this.fragment?this:new KC(t,n,r,s,o)}static parse(e,t=!1){const n=pEe.exec(e);return n?new KC(n[2]||Kr,yR(n[4]||Kr),yR(n[5]||Kr),yR(n[7]||Kr),yR(n[9]||Kr),t):new KC(Kr,Kr,Kr,Kr,Kr)}static file(e){let t=Kr;if(Ao&&(e=e.replace(/\\/g,kh)),e[0]===kh&&e[1]===kh){const n=e.indexOf(kh,2);n===-1?(t=e.substring(2),e=kh):(t=e.substring(2,n),e=e.substring(n)||kh)}return new KC("file",t,e,Kr,Kr)}static from(e){const t=new KC(e.scheme,e.authority,e.path,e.query,e.fragment);return JQ(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ao&&e.scheme==="file"?n=rn.file(gl.join(SF(e,!0),...t)).path:n=xs.join(e.path,...t),e.with({path:n})}toString(e=!1){return mH(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof rn)return e;{const t=new KC(e);return t._formatted=e.external,t._fsPath=e._sep===Qle?e.fsPath:null,t}}else return e}}const Qle=Ao?1:void 0;let KC=class extends rn{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=SF(this,!1)),this._fsPath}toString(e=!1){return e?mH(this,!0):(this._formatted||(this._formatted=mH(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Qle),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Jle={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function eJ(i,e){let t,n=-1;for(let r=0;r<i.length;r++){const s=i.charCodeAt(r);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,r)),n=-1),t!==void 0&&(t+=i.charAt(r));else{t===void 0&&(t=i.substr(0,r));const o=Jle[s];o!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,r)),n=-1),t+=o):n===-1&&(n=r)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function mEe(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=Jle[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function SF(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Ao&&(t=t.replace(/\//g,"\\")),t}function mH(i,e){const t=e?mEe:eJ;let n="",{scheme:r,authority:s,path:o,query:a,fragment:u}=i;if(r&&(n+=r,n+=":"),(s||r==="file")&&(n+=kh,n+=kh),s){let d=s.indexOf("@");if(d!==-1){const h=s.substr(0,d);s=s.substr(d+1),d=h.indexOf(":"),d===-1?n+=t(h,!1):(n+=t(h.substr(0,d),!1),n+=":",n+=t(h.substr(d+1),!1)),n+="@"}s=s.toLowerCase(),d=s.indexOf(":"),d===-1?n+=t(s,!1):(n+=t(s.substr(0,d),!1),n+=s.substr(d))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const d=o.charCodeAt(1);d>=65&&d<=90&&(o=`/${String.fromCharCode(d+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const d=o.charCodeAt(0);d>=65&&d<=90&&(o=`${String.fromCharCode(d+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),u&&(n+="#",n+=e?u:eJ(u,!1)),n}function eue(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+eue(i.substr(3)):i}}const tJ=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function yR(i){return i.match(tJ)?i.replace(tJ,e=>eue(e)):i}var Tn;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.userData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls"})(Tn||(Tn={}));class _Ee{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const r=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&tkn=${encodeURIComponent(s)}`),rn.from({scheme:RS?this._preferredWebSchema:Tn.vscodeRemoteResource,authority:`${n}:${r}`,path:"/vscode-remote-resource",query:o})}}const tue=new _Ee;class CA{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===Tn.vscodeRemote?tue.rewrite(n):n.scheme===Tn.file&&(Kh||typeof Yr.importScripts=="function"&&Yr.origin===`${Tn.vscodeFileResource}://${CA.FALLBACK_AUTHORITY}`)?n.with({scheme:Tn.vscodeFileResource,authority:n.authority||CA.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return rn.isUri(e)?e:rn.parse(t.toUrl(e))}}CA.FALLBACK_AUTHORITY="vscode-app";const nue=new CA;function Hs(i){for(;i.firstChild;)i.firstChild.remove()}function uq(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class iue{constructor(e,t,n,r){this._node=e,this._type=t,this._handler=n,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Ge(i,e,t,n){return new iue(i,e,t,n)}function rue(i){return function(e){return i(new Qu(e))}}function vEe(i){return function(e){return i(new yr(e))}}let eo=function(e,t,n,r){let s=n;return t==="click"||t==="mousedown"?s=rue(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=vEe(n)),Ge(e,t,s,r)},bEe=function(e,t,n){let r=rue(t);return cq(e,r,n)};function cq(i,e,t){return Ge(i,ng&&c8.pointerEvents?Ht.POINTER_DOWN:Ht.MOUSE_DOWN,e,t)}function sue(i,e,t){return Ge(i,ng&&c8.pointerEvents?Ht.POINTER_UP:Ht.MOUSE_UP,e,t)}function dq(i,e){return Ge(i,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function CEe(i,e){return Ge(i,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function mh(i,e,t){let n=null;const r=u=>a.fire(u),s=()=>{n||(n=new iue(i,e,r,t))},o=()=>{n&&(n.dispose(),n=null)},a=new Ce({onFirstListenerAdd:s,onLastListenerRemove:o});return a}let v9=null;function wEe(i){if(!v9){const e=t=>setTimeout(()=>t(new Date().getTime()),0);v9=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return v9.call(self,i)}let oue,rg;class b9{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){gn(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1,r=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(b9.sort),e.shift().execute();n=!1};rg=(s,o=0)=>{let a=new b9(s,o);return i.push(a),t||(t=!0,wEe(r)),a},oue=(s,o)=>{if(n){let a=new b9(s,o);return e.push(a),a}else return rg(s,o)}})();const yEe=8,SEe=function(i,e){return e};class LEe extends Oe{constructor(e,t,n,r=SEe,s=yEe){super();let o=null,a=0,u=this._register(new Ma),d=()=>{a=new Date().getTime(),n(o),o=null};this._register(Ge(e,t,h=>{o=r(o,h);let f=new Date().getTime()-a;f>=s?(u.cancel(),d()):u.setIfNotSet(d,s-f)}))}}function hq(i,e,t,n,r){return new LEe(i,e,t,n,r)}function fq(i){return document.defaultView.getComputedStyle(i,null)}function d8(i){if(i!==document.body)return new cr(i.clientWidth,i.clientHeight);if(ng&&window.visualViewport)return new cr(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new cr(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new cr(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new cr(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class zr{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let r=fq(e),s="0";return r&&(r.getPropertyValue?s=r.getPropertyValue(t):s=r.getAttribute(n)),zr.convertToPixels(e,s)}static getBorderLeftWidth(e){return zr.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return zr.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return zr.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return zr.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return zr.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return zr.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return zr.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return zr.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return zr.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return zr.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return zr.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return zr.getDimension(e,"margin-bottom","marginBottom")}}class cr{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new cr(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof cr?e:new cr(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function aue(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;const r=uue(i)?null:fq(i);r&&(n-=r.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=zr.getBorderLeftWidth(i),t+=zr.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function EEe(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Uo(i){let e=i.getBoundingClientRect();return{left:e.left+pp.scrollX,top:e.top+pp.scrollY,width:e.width,height:e.height}}const pp=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Nc(i){let e=zr.getMarginLeft(i)+zr.getMarginRight(i);return i.offsetWidth+e}function C9(i){let e=zr.getBorderLeftWidth(i)+zr.getBorderRightWidth(i),t=zr.getPaddingLeft(i)+zr.getPaddingRight(i);return i.offsetWidth-e-t}function xEe(i){let e=zr.getBorderTopWidth(i)+zr.getBorderBottomWidth(i),t=zr.getPaddingTop(i)+zr.getPaddingBottom(i);return i.offsetHeight-e-t}function _H(i){let e=zr.getMarginTop(i)+zr.getMarginBottom(i);return i.offsetHeight+e}function mp(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function lue(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function nJ(i,e,t){return!!lue(i,e,t)}function uue(i){return i&&!!i.host&&!!i.mode}function h8(i){return!!_0(i)}function _0(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return uue(i)?i:null}function oy(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function uc(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}let w9=null;function cue(){return w9||(w9=uc()),w9}function DEe(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function vH(i,e,t=cue()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function iJ(i,e=cue()){if(!e)return;let t=DEe(e),n=[];for(let r=0;r<t.length;r++)t[r].selectorText.indexOf(i)!==-1&&n.push(r);for(let r=n.length-1;r>=0;r--)e.sheet.deleteRule(n[r])}function due(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Ht={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:n0?"webkitAnimationStart":"animationstart",ANIMATION_END:n0?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:n0?"webkitAnimationIteration":"animationiteration"},Ni={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function IEe(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function TEe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class LF extends Oe{constructor(e){super(),this._onDidFocus=this._register(new Ce),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Ce),this.onDidBlur=this._onDidBlur.event;let t=LF.hasFocusWithin(e),n=!1;const r=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{LF.hasFocusWithin(e)!==t&&(t?s():r())},this._register(Ge(e,Ht.FOCUS,r,!0)),this._register(Ge(e,Ht.BLUR,s,!0)),this._register(Ge(e,Ht.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Ge(e,Ht.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=_0(e),n=t?t.activeElement:document.activeElement;return mp(n,e)}}function Hy(i){return new LF(i)}function Be(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function kEe(i,e){return i.insertBefore(e,i.firstChild),e}function v0(i,...e){i.innerText="",Be(i,...e)}const NEe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var wA;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(wA||(wA={}));function hue(i,e,t,...n){let r=NEe.exec(e);if(!r)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let s=r[1]||"div",o;return i!==wA.HTML?o=document.createElementNS(i,s):o=document.createElement(s),r[3]&&(o.id=r[3]),r[4]&&(o.className=r[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const u=t[a];typeof u>"u"||(/^on\w+$/.test(a)?o[a]=u:a==="selected"?u&&o.setAttribute(a,"true"):o.setAttribute(a,u))}),o.append(...n),o}function qe(i,e,...t){return hue(wA.HTML,i,e,...t)}qe.SVG=function(i,e,...t){return hue(wA.SVG,i,e,...t)};function Lu(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function Ua(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function AEe(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function rJ(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function fue(i){window.open(i,"_blank","noopener")}function OEe(i){const e=()=>{i(),t=rg(e)};let t=rg(e);return Un(()=>t.dispose())}tue.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function yb(i){return i?`url('${nue.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function sJ(i){return`'${i.replace(/'/g,"%27")}'`}class R1 extends Ce{constructor(){super(),this._subscriptions=new Je,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Ge(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new yr(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(Ge(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(Ge(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Ge(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Ge(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(Ge(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return R1.instance||(R1.instance=new R1),R1.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function MEe(i,e){const t=window.matchMedia(i);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}const oJ=2e4;let _1,GP,bH,YP,CH;function REe(i){_1=document.createElement("div"),_1.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),_1.appendChild(n),n};GP=e(),bH=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),_1.appendChild(n),n};YP=t(),CH=t(),i.appendChild(_1)}function To(i){_1&&(GP.textContent!==i?(Hs(bH),xF(GP,i)):(Hs(GP),xF(bH,i)))}function EF(i){_1&&(qn?To(i):YP.textContent!==i?(Hs(CH),xF(YP,i)):(Hs(YP),xF(CH,i)))}function xF(i,e){Hs(i),e.length>oJ&&(e=e.substr(0,oJ)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var Rh;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(Rh||(Rh={}));const Nn=gi("instantiationService");function PEe(i,e,t,n){e[Rh.DI_TARGET]===e?e[Rh.DI_DEPENDENCIES].push({id:i,index:t,optional:n}):(e[Rh.DI_DEPENDENCIES]=[{id:i,index:t,optional:n}],e[Rh.DI_TARGET]=e)}function gi(i){if(Rh.serviceIds.has(i))return Rh.serviceIds.get(i);const e=function(t,n,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");PEe(e,t,r,!1)};return e.toString=()=>i,Rh.serviceIds.set(i,e),e}const Ti=gi("codeEditorService"),gq=gi("markerDecorationsService");function FEe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,function(n,r){const s=r[0];return typeof e[s]<"u"?e[s]:n}),t}function C(i,e,...t){return FEe(e,t)}let Le=class d1{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new d1(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return d1.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return d1.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return d1.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,r=t.lineNumber|0;if(n===r){let s=e.column|0,o=t.column|0;return s-o}return n-r}clone(){return new d1(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new d1(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}};const Ds=gi("modelService");function BEe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}const Qa=gi("textModelService");var DF=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class ic extends Oe{constructor(e,t="",n="",r=!0,s){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=r,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return DF(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class $y extends Oe{constructor(){super(...arguments),this._onBeforeRun=this._register(new Ce),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new Ce),this.onDidRun=this._onDidRun.event}run(e,t){return DF(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(r){n=r}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return DF(this,void 0,void 0,function*(){yield e.run(t)})}}class Zc extends ic{constructor(e){super(Zc.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Zc.ID="vs.actions.separator";class f8{constructor(e,t,n,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=n}get actions(){return this._actions}dispose(){}run(){return DF(this,void 0,void 0,function*(){})}}class g8 extends ic{constructor(){super(g8.ID,C("submenu.empty","(empty)"),void 0,!1)}}g8.ID="vs.actions.empty";let WEe=class{constructor(){this._icons=new Map,this._onDidRegister=new Ce}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const gue=new WEe,IF=gue;function VEe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class _e{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,gue.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}_e.add=new _e("add",{fontCharacter:"\\ea60"});_e.lightBulb=new _e("light-bulb",{fontCharacter:"\\ea61"});_e.warning=new _e("warning",{fontCharacter:"\\ea6c"});_e.info=new _e("info",{fontCharacter:"\\ea74"});_e.close=new _e("close",{fontCharacter:"\\ea76"});_e.symbolFolder=new _e("symbol-folder",{fontCharacter:"\\ea83"});_e.symbolEvent=new _e("symbol-event",{fontCharacter:"\\ea86"});_e.error=new _e("error",{fontCharacter:"\\ea87"});_e.symbolVariable=new _e("symbol-variable",{fontCharacter:"\\ea88"});_e.symbolArray=new _e("symbol-array",{fontCharacter:"\\ea8a"});_e.symbolModule=new _e("symbol-module",{fontCharacter:"\\ea8b"});_e.symbolPackage=new _e("symbol-package",{fontCharacter:"\\ea8b"});_e.symbolNamespace=new _e("symbol-namespace",{fontCharacter:"\\ea8b"});_e.symbolObject=new _e("symbol-object",{fontCharacter:"\\ea8b"});_e.symbolMethod=new _e("symbol-method",{fontCharacter:"\\ea8c"});_e.symbolFunction=new _e("symbol-function",{fontCharacter:"\\ea8c"});_e.symbolConstructor=new _e("symbol-constructor",{fontCharacter:"\\ea8c"});_e.symbolBoolean=new _e("symbol-boolean",{fontCharacter:"\\ea8f"});_e.symbolNull=new _e("symbol-null",{fontCharacter:"\\ea8f"});_e.symbolNumber=new _e("symbol-number",{fontCharacter:"\\ea90"});_e.symbolStruct=new _e("symbol-struct",{fontCharacter:"\\ea91"});_e.symbolTypeParameter=new _e("symbol-type-parameter",{fontCharacter:"\\ea92"});_e.symbolKey=new _e("symbol-key",{fontCharacter:"\\ea93"});_e.symbolText=new _e("symbol-text",{fontCharacter:"\\ea93"});_e.symbolReference=new _e("symbol-reference",{fontCharacter:"\\ea94"});_e.symbolEnum=new _e("symbol-enum",{fontCharacter:"\\ea95"});_e.symbolValue=new _e("symbol-value",{fontCharacter:"\\ea95"});_e.symbolUnit=new _e("symbol-unit",{fontCharacter:"\\ea96"});_e.arrowDown=new _e("arrow-down",{fontCharacter:"\\ea9a"});_e.arrowLeft=new _e("arrow-left",{fontCharacter:"\\ea9b"});_e.arrowUp=new _e("arrow-up",{fontCharacter:"\\eaa1"});_e.caseSensitive=new _e("case-sensitive",{fontCharacter:"\\eab1"});_e.check=new _e("check",{fontCharacter:"\\eab2"});_e.chevronDown=new _e("chevron-down",{fontCharacter:"\\eab4"});_e.chevronRight=new _e("chevron-right",{fontCharacter:"\\eab6"});_e.chevronUp=new _e("chevron-up",{fontCharacter:"\\eab7"});_e.lightbulbAutofix=new _e("lightbulb-autofix",{fontCharacter:"\\eb13"});_e.loading=new _e("loading",{fontCharacter:"\\eb19"});_e.preserveCase=new _e("preserve-case",{fontCharacter:"\\eb2e"});_e.regex=new _e("regex",{fontCharacter:"\\eb38"});_e.remove=new _e("remove",{fontCharacter:"\\eb3b"});_e.replaceAll=new _e("replace-all",{fontCharacter:"\\eb3c"});_e.replace=new _e("replace",{fontCharacter:"\\eb3d"});_e.splitHorizontal=new _e("split-horizontal",{fontCharacter:"\\eb56"});_e.splitVertical=new _e("split-vertical",{fontCharacter:"\\eb57"});_e.symbolClass=new _e("symbol-class",{fontCharacter:"\\eb5b"});_e.symbolColor=new _e("symbol-color",{fontCharacter:"\\eb5c"});_e.symbolConstant=new _e("symbol-constant",{fontCharacter:"\\eb5d"});_e.symbolEnumMember=new _e("symbol-enum-member",{fontCharacter:"\\eb5e"});_e.symbolField=new _e("symbol-field",{fontCharacter:"\\eb5f"});_e.symbolFile=new _e("symbol-file",{fontCharacter:"\\eb60"});_e.symbolInterface=new _e("symbol-interface",{fontCharacter:"\\eb61"});_e.symbolKeyword=new _e("symbol-keyword",{fontCharacter:"\\eb62"});_e.symbolOperator=new _e("symbol-operator",{fontCharacter:"\\eb64"});_e.symbolProperty=new _e("symbol-property",{fontCharacter:"\\eb65"});_e.symbolSnippet=new _e("symbol-snippet",{fontCharacter:"\\eb66"});_e.triangleDown=new _e("triangle-down",{fontCharacter:"\\eb6e"});_e.triangleLeft=new _e("triangle-left",{fontCharacter:"\\eb6f"});_e.triangleRight=new _e("triangle-right",{fontCharacter:"\\eb70"});_e.triangleUp=new _e("triangle-up",{fontCharacter:"\\eb71"});_e.wholeWord=new _e("whole-word",{fontCharacter:"\\eb7e"});_e.listFilter=new _e("list-filter",{fontCharacter:"\\eb83"});_e.listSelection=new _e("list-selection",{fontCharacter:"\\eb85"});_e.selection=new _e("selection",{fontCharacter:"\\eb85"});_e.symbolString=new _e("symbol-string",{fontCharacter:"\\eb8d"});_e.treeItemExpanded=new _e("tree-item-expanded",_e.chevronDown.definition);_e.treeFilterOnTypeOn=new _e("tree-filter-on-type-on",_e.listFilter.definition);_e.treeFilterOnTypeOff=new _e("tree-filter-on-type-off",_e.listSelection.definition);_e.treeFilterClear=new _e("tree-filter-clear",_e.close.definition);_e.treeItemLoading=new _e("tree-item-loading",_e.loading.definition);_e.menuSelection=new _e("menu-selection",_e.check.definition);_e.menuSubmenu=new _e("menu-submenu",_e.chevronRight.definition);_e.scrollbarButtonLeft=new _e("scrollbar-button-left",_e.triangleLeft.definition);_e.scrollbarButtonRight=new _e("scrollbar-button-right",_e.triangleRight.definition);_e.scrollbarButtonUp=new _e("scrollbar-button-up",_e.triangleUp.definition);_e.scrollbarButtonDown=new _e("scrollbar-button-down",_e.triangleDown.definition);_e.quickInputBack=new _e("quick-input-back",_e.arrowLeft.definition);var Ka;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(s){if(s instanceof _e)return["codicon","codicon-"+s.id];const o=e.exec(s.id);if(!o)return t(_e.error);let[,a,u]=o;const d=["codicon","codicon-"+a];return u&&d.push("codicon-modifier-"+u.substr(1)),d}i.asClassNameArray=t;function n(s){return t(s).join(" ")}i.asClassName=n;function r(s){return"."+t(s).join(".")}i.asCSSSelector=r})(Ka||(Ka={}));function pue(i){return Array.isArray(i)}function cc(i){return typeof i=="string"}function Ga(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function Sb(i){return typeof i=="number"&&!isNaN(i)}function mue(i){return i===!0||i===!1}function pl(i){return typeof i>"u"}function HEe(i){return!Eu(i)}function Eu(i){return pl(i)||i===null}function Gi(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function SR(i){if(Eu(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function TF(i){return typeof i=="function"}function $Ee(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)zEe(i[n],e[n])}function zEe(i,e){if(cc(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(TF(e)){try{if(i instanceof e)return}catch{}if(!Eu(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function UEe(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function pq(i){const e=[];for(const t of UEe(i))typeof i[t]=="function"&&e.push(t);return e}function jEe(i,e){const t=r=>function(){const s=Array.prototype.slice.call(arguments,0);return e(r,s)};let n={};for(const r of i)n[r]=t(r);return n}function ml(i){return i===null?void 0:i}function _ue(i,e="Unreachable"){throw new Error(e)}const Tr=gi("commandService"),Xn=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Ce,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const o=[];for(let u of i.description.args)o.push(u.constraint);const a=i.handler;i.handler=function(u,...d){return $Ee(d,o),a(u,...d)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new Tu,this._commands.set(t,n));let r=n.unshift(i),s=Un(()=>{r();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(i,e){return Xn.registerCommand(i,(t,...n)=>t.get(Tr).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return Qn.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Xn.registerCommand("noop",()=>{});function vue(i){return!i||typeof i!="string"?!0:i.trim().length===0}const KEe=/{(\d+)}/g;function Ju(i,...e){return e.length===0?i:i.replace(KEe,function(t,n){const r=parseInt(n,10);return isNaN(r)||r<0||r>=e.length?t:e[r]})}function mq(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function dc(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function qEe(i,e=" "){const t=_q(i,e);return bue(t,e)}function _q(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function bue(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let r=n,s=-1;for(;s=i.lastIndexOf(e,r-1),!(s===-1||s+t!==r);){if(s===0)return"";r=s}return i.substring(0,r)}function GEe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function YEe(i){return i.replace(/\*/g,"")}function Cue(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=dc(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function ZEe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function y9(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function sg(i){return i.split(/\r\n|\r|\n/)}function Ta(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function zi(i,e=0,t=i.length){for(let n=e;n<t;n++){const r=i.charCodeAt(n);if(r!==32&&r!==9)return i.substring(e,n)}return i.substring(e,t)}function Qf(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function yA(i,e){return i<e?-1:i>e?1:0}function vq(i,e,t=0,n=i.length,r=0,s=e.length){for(;t<n&&r<s;t++,r++){let u=i.charCodeAt(t),d=e.charCodeAt(r);if(u<d)return-1;if(u>d)return 1}const o=n-t,a=s-r;return o<a?-1:o>a?1:0}function wH(i,e){return aM(i,e,0,i.length,0,e.length)}function aM(i,e,t=0,n=i.length,r=0,s=e.length){for(;t<n&&r<s;t++,r++){let u=i.charCodeAt(t),d=e.charCodeAt(r);if(u===d)continue;if(u>=128||d>=128)return vq(i.toLowerCase(),e.toLowerCase(),t,n,r,s);Wv(u)&&(u-=32),Wv(d)&&(d-=32);const h=u-d;if(h!==0)return h}const o=n-t,a=s-r;return o<a?-1:o>a?1:0}function Wv(i){return i>=97&&i<=122}function If(i){return i>=65&&i<=90}function QN(i,e){return i.length===e.length&&aM(i,e)===0}function bq(i,e){const t=e.length;return e.length>i.length?!1:aM(i,e,0,t)===0}function zy(i,e){let t,n=Math.min(i.length,e.length);for(t=0;t<n;t++)if(i.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function kF(i,e){let t,n=Math.min(i.length,e.length);const r=i.length-1,s=e.length-1;for(t=0;t<n;t++)if(i.charCodeAt(r-t)!==e.charCodeAt(s-t))return t;return n}function Ws(i){return 55296<=i&&i<=56319}function Uy(i){return 56320<=i&&i<=57343}function Cq(i,e){return(i-55296<<10)+(e-56320)+65536}function P1(i,e,t){const n=i.charCodeAt(t);if(Ws(n)&&t+1<e){const r=i.charCodeAt(t+1);if(Uy(r))return Cq(n,r)}return n}function ay(i,e){const t=i.charCodeAt(e-1);if(Uy(t)&&e>1){const n=i.charCodeAt(e-2);if(Ws(n))return Cq(n,t)}return t}function NF(i,e){const t=up.getInstance(),n=e,r=i.length,s=P1(i,r,e);e+=s>=65536?2:1;let o=t.getGraphemeBreakType(s);for(;e<r;){const a=P1(i,r,e),u=t.getGraphemeBreakType(a);if(OF(o,u))break;e+=a>=65536?2:1,o=u}return e-n}function XEe(i,e){const t=up.getInstance(),n=e,r=ay(i,e);e-=r>=65536?2:1;let s=t.getGraphemeBreakType(r);for(;e>0;){const o=ay(i,e),a=t.getGraphemeBreakType(o);if(OF(a,s))break;e-=o>=65536?2:1,s=a}return n-e}const QEe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function p8(i){return QEe.test(i)}const JEe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFF0]|\uD83E[\uDD00-\uDDFF\uDE70-\uDEF6])/;function exe(i){return JEe.test(i)}const txe=/^[\t\n\r\x20-\x7E]*$/;function wq(i){return txe.test(i)}const wue=/[\u2028\u2029]/;function yue(i){return wue.test(i)}function nxe(i){for(let e=0,t=i.length;e<t;e++)if(og(i.charCodeAt(e)))return!0;return!1}function og(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function AF(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const ixe=String.fromCharCode(65279);function yq(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function rxe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function Sue(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function LR(i){return up.getInstance().getGraphemeBreakType(i)}function OF(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class up{constructor(){this._data=sxe()}static getInstance(){return up._INSTANCE||(up._INSTANCE=new up),up._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let r=1;for(;r<=n;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}}up._INSTANCE=null;function sxe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function oxe(i,e){if(i===0)return 0;const t=axe(i,e);if(t!==void 0)return t;const n=ay(e,i);return i-=ZP(n),i}function axe(i,e){let t=ay(e,i);for(i-=ZP(t);lxe(t)||t===65039||t===8419;){if(i===0)return;t=ay(e,i),i-=ZP(t)}if(AF(t)){if(i>=0){const n=ay(e,i);n===8205&&(i-=ZP(n))}return i}}function ZP(i){return i>=65536?2:1}function lxe(i){return 127995<=i&&i<=127999}const uxe="";class Eh{static getData(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,40,10088,40,10098,40,12308,40,64830,40,65341,41,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,124,8739,124,9213,124,65512,124,1633,124,1777,124,66336,124,125127,124,120783,124,120793,124,120803,124,120813,124,120823,124,130033,124,65321,124,8544,124,8464,124,8465,124,119816,124,119868,124,119920,124,120024,124,120128,124,120180,124,120232,124,120284,124,120336,124,120388,124,120440,124,406,124,65356,124,8572,124,8467,124,119845,124,119897,124,119949,124,120001,124,120053,124,120105,124,120157,124,120209,124,120261,124,120313,124,120365,124,120417,124,120469,124,448,124,120496,124,120554,124,120612,124,120670,124,120728,124,11410,124,1030,124,1216,124,1493,124,1503,124,1575,124,126464,124,126592,124,65166,124,65165,124,1994,124,11599,124,5825,124,42226,124,93992,124,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90],"_default":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"cs":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"de":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"es":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"fr":[65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"it":[160,32,8211,45,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ko":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pl":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pt-BR":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"qps-ploc":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ru":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,124,1009,112,215,120],"tr":[160,32,8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hans":[65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hant":[8211,45,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')}static getConfusablesForCurrentLocale(){if(!Eh.map){let n=function(o){const a=new Map;for(let u=0;u<o.length;u+=2)a.set(o[u],o[u+1]);return a};const e=Eh.getData();let t=RLe;(!t||!(t in e))&&(t=MLe),(!t||!(t in e))&&(t="_default");const r=n(e._common),s=n(e[t]);for(const[o,a]of s)r.set(o,a);Eh.map=r}return Eh.map}static isAmbiguous(e){return Eh.getConfusablesForCurrentLocale().has(e)}static getPrimaryConfusable(e){return Eh.getConfusablesForCurrentLocale().get(e)}static getPrimaryConfusableCodePoints(){return new Set(Eh.getConfusablesForCurrentLocale().keys())}}class _p{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(_p.getRawData())),this._data}static isInvisibleCharacter(e){return _p.getData().has(e)}static get codePoints(){return _p.getData()}}_p._data=void 0;let m8=OLe||"";const qo=new Map;qo.set("false",!1);qo.set("true",!0);qo.set("isMac",qn);qo.set("isLinux",Xa);qo.set("isWindows",Ao);qo.set("isWeb",RS);qo.set("isMacNative",qn&&!RS);qo.set("isEdge",m8.indexOf("Edg/")>=0);qo.set("isFirefox",m8.indexOf("Firefox")>=0);qo.set("isChrome",m8.indexOf("Chrome")>=0);qo.set("isSafari",m8.indexOf("Safari")>=0);const cxe=Object.prototype.hasOwnProperty;class _t{static has(e){return b0.create(e)}static equals(e,t){return jy.create(e,t)}static regex(e,t){return MF.create(e,t)}static not(e){return Lb.create(e)}static and(...e){return Vv.create(e,null)}static or(...e){return cp.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return cp.create(n.map(r=>this._deserializeAndExpression(r,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return Vv.create(n.map(r=>this._deserializeOne(r,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return _8.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return jy.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return MF.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return Sq.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return C8.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return b8.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return y8.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return w8.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Lb.create(e.substr(1).trim()):b0.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(vue(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),r=e.lastIndexOf("/");if(n===r||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let s=e.slice(n+1,r),o=e[r+1]==="i"?"i":"";try{return new RegExp(s,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function dxe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function ly(i,e){return i.cmp(e)}class Ru{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return hc.INSTANCE}}Ru.INSTANCE=new Ru;class hc{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Ru.INSTANCE}}hc.INSTANCE=new hc;class b0{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=qo.get(e);return typeof n=="boolean"?n?hc.INSTANCE:Ru.INSTANCE:new b0(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Eue(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=qo.get(this.key);return typeof e=="boolean"?e?hc.INSTANCE:Ru.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Lb.create(this.key,this)),this.negated}}class jy{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?b0.create(e,n):Lb.create(e,n);const r=qo.get(e);return typeof r=="boolean"?t===(r?"true":"false")?hc.INSTANCE:Ru.INSTANCE:new jy(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=qo.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?hc.INSTANCE:Ru.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_8.create(this.key,this.value,this)),this.negated}}class Sq{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new Sq(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?cxe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Lq.create(this)),this.negated}}class Lq{constructor(e){this._actual=e,this.type=11}static create(e){return new Lq(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class _8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?Lb.create(e,n):b0.create(e,n);const r=qo.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Ru.INSTANCE:hc.INSTANCE:new _8(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=qo.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ru.INSTANCE:hc.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=jy.create(this.key,this.value,this)),this.negated}}class Lb{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=qo.get(e);return typeof n=="boolean"?n?Ru.INSTANCE:hc.INSTANCE:new Lb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Eue(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=qo.get(this.key);return typeof e=="boolean"?e?Ru.INSTANCE:hc.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=b0.create(this.key,this)),this.negated}}function v8(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Ru.INSTANCE}class b8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return v8(t,r=>new b8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=y8.create(this.key,this.value,this)),this.negated}}class C8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return v8(t,r=>new C8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=w8.create(this.key,this.value,this)),this.negated}}class w8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return v8(t,r=>new w8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=C8.create(this.key,this.value,this)),this.negated}}class y8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return v8(t,r=>new y8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:bC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=b8.create(this.key,this.value,this)),this.negated}}class MF{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new MF(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Eq.create(this)),this.negated}}class Eq{constructor(e){this._actual=e,this.type=8}static create(e){return new Eq(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function Lue(i){let e=null;for(let t=0,n=i.length;t<n;t++){const r=i[t].substituteConstants();if(i[t]!==r&&e===null){e=[];for(let s=0;s<t;s++)e[s]=i[s]}e!==null&&(e[t]=r)}return e===null?i:e}class Vv{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Vv._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=ly(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Lue(this.expr);return e===this.expr?this:Vv.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let r=!1;for(const s of e)if(s){if(s.type===1){r=!0;continue}if(s.type===0)return Ru.INSTANCE;if(s.type===6){n.push(...s.expr);continue}n.push(s)}if(n.length===0&&r)return hc.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(ly);for(let s=1;s<n.length;s++)n[s-1].equals(n[s])&&(n.splice(s,1),s--);if(n.length===1)return n[0];for(;n.length>1;){const s=n[n.length-1];if(s.type!==9)break;n.pop();const o=n.pop(),a=n.length===0,u=cp.create(s.expr.map(d=>Vv.create([d,o],null)),null,a);u&&(n.push(u),n.sort(ly))}return n.length===1?n[0]:new Vv(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=cp.create(e,this,!0)}return this.negated}}class cp{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return cp._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=ly(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Lue(this.expr);return e===this.expr?this:cp.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let r=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const u=e[o];if(u){if(u.type===0){s=!0;continue}if(u.type===1)return hc.INSTANCE;if(u.type===9){r=r.concat(u.expr);continue}r.push(u)}}if(r.length===0&&s)return Ru.INSTANCE;r.sort(ly)}if(r.length!==0){if(r.length===1)return r[0];for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];if(n){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)xue(r[o],r[a])&&(r.splice(a,1),a--);if(r.length===1)return r[0]}return new cp(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),r=[];for(const o of RF(t))for(const a of RF(n))r.push(Vv.create([o,a],null));const s=e.length===0;e.unshift(cp.create(r,null,s))}this.negated=e[0]}return this.negated}}class Dt extends b0{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Dt._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&Dt._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return Dt._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return jy.create(this.key,e)}}Dt._info=[];const cn=gi("contextKeyService"),hxe="setContext";function Eue(i,e){return i<e?-1:i>e?1:0}function bC(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function xue(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(const r of e.expr)if(i.equals(r))return!0}const t=i.negate(),n=RF(t).concat(RF(e));n.sort(ly);for(let r=0;r<n.length;r++){const o=n[r].negate();for(let a=r+1;a<n.length;a++){const u=n[a];if(o.equals(u))return!0}}return!1}function RF(i){return i.type===9?i.expr:[i]}function XP(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class fxe{constructor(){this.data=new Map}add(e,t){XP(cc(e)),XP(Ga(t)),XP(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Xr=new fxe;var Xc;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(Xc||(Xc={}));const Er=gi("themeService");var yH;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(yH||(yH={}));function Lr(i){return{id:i}}var pr;(function(i){function e(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(typeof u.color>"u"||yH.isThemeColor(u.color))}i.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Ka.iconNameExpression}(?:${Ka.iconModifierExpression})?)\\)$`);function n(u){const d=t.exec(u);if(!d)return;let[,h]=d;return{id:h}}i.fromString=n;function r(u,d){let h=u.id;const f=h.lastIndexOf("~");return f!==-1&&(h=h.substring(0,f)),d&&(h=`${h}~${d}`),{id:h}}i.modify=r;function s(u){const d=u.id.lastIndexOf("~");if(d!==-1)return u.id.substring(d+1)}i.getModifier=s;function o(u,d){var h,f;return u.id===d.id&&((h=u.color)===null||h===void 0?void 0:h.id)===((f=d.color)===null||f===void 0?void 0:f.id)}i.isEqual=o;function a(u,d){return{id:u.id,color:d?Lr(d):void 0}}i.asThemeIcon=a,i.asClassNameArray=Ka.asClassNameArray,i.asClassName=Ka.asClassName,i.asCSSSelector=Ka.asCSSSelector})(pr||(pr={}));function PF(i){switch(i){case Xc.DARK:return"vs-dark";case Xc.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const Due={ThemingContribution:"base.contributions.theming"};class gxe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Ce}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Un(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let Iue=new gxe;Xr.add(Due.ThemingContribution,Iue);function hr(i){return Iue.onColorThemeChange(i)}class pxe extends Oe{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var mxe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},aJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function JN(i){return i.command!==void 0}class Mt{constructor(e){this.id=Mt._idPool++,this._debugName=e}}Mt._idPool=0;Mt.CommandPalette=new Mt("CommandPalette");Mt.EditorContext=new Mt("EditorContext");Mt.SimpleEditorContext=new Mt("SimpleEditorContext");Mt.EditorContextCopy=new Mt("EditorContextCopy");Mt.EditorContextPeek=new Mt("EditorContextPeek");Mt.MenubarEditMenu=new Mt("MenubarEditMenu");Mt.MenubarCopy=new Mt("MenubarCopy");Mt.MenubarGoMenu=new Mt("MenubarGoMenu");Mt.MenubarSelectionMenu=new Mt("MenubarSelectionMenu");Mt.InlineCompletionsActions=new Mt("InlineCompletionsActions");const CC=gi("menuService"),ra=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Ce,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===Mt.CommandPalette}}addCommand(i){return this.addCommands(Qn.single(i))}addCommands(i){for(const e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Un(()=>{let e=!1;for(const t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(Qn.single({id:i,item:e}))}appendMenuItems(i){const e=new Set,t=new Tu;for(const{id:n,item:r}of i){let s=this._menuItems.get(n);s||(s=new Tu,this._menuItems.set(n,s)),t.push(s.push(r)),e.add(n)}return this._onDidChangeMenu.fire(e),Un(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Mt.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)JN(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class xq extends f8{constructor(e,t,n,r){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=r}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,r]of n)r.length>0&&(e.push(...r),e.push(new Zc));return e.length&&e.pop(),e}}let C0=class Tue{constructor(e,t,n,r,s){var o,a;if(this._commandService=s,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(o=e.tooltip)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}this.item=e,this.alt=t?new Tue(t,void 0,n,r,s):void 0,this._options=n,pr.isThemeIcon(e.icon)&&(this.class=Ka.asClassName(e.icon))}dispose(){}run(...e){var t,n;let r=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(r=[...r,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(r=[...r,...e]),this._commandService.executeCommand(this.id,...r)}};C0=mxe([aJ(3,cn),aJ(4,Tr)],C0);class FF{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(qu===1){if(e&&e.win)return e.win}else if(qu===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=FF.bindToCurrentPlatform(e);if(t&&t.primary){const n=cH(t.primary,qu);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,r=t.secondary.length;n<r;n++){const s=t.secondary[n],o=cH(s,qu);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Xn.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&FF._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,r,s,o){qu===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:o,weight1:r,weight2:s,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(vxe)),this._cachedMergedKeybindings.slice(0)}}const Oo=new FF,_xe={EditorModes:"platform.keybindingsRegistry"};Xr.add(_xe.EditorModes,Oo);function vxe(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}const wg=gi("telemetryService"),yg=gi("logService");var Ph;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(Ph||(Ph={}));const kue=Ph.Info;class bxe extends Oe{constructor(){super(...arguments),this.level=kue,this._onDidChangeLogLevel=this._register(new Ce)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class Cxe extends bxe{constructor(e=kue){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=Ph.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=Ph.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=Ph.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=Ph.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class wxe extends Oe{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}class S8{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=_t.and(n,this.precondition):n=this.precondition);const r={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Oo.registerKeybindingRule(r)}}Xn.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){ra.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class PS extends S8{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((r,s)=>s.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){const n=e.get(yg);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){const s=r.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Nue extends S8{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Po extends S8{static bindToContribution(e){return class extends Po{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,r,s){e(r)&&this._callback(e(r),s)}}}runCommand(e,t){const n=e.get(Ti),r=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(r)return r.invokeWithinContext(s=>{if(s.get(cn).contextMatchesRules(ml(this.precondition)))return this.runEditorCommand(s,r,t)})}}let Et=class Aue extends Po{constructor(e){super(Aue.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(r){return r.menuId||(r.menuId=Mt.EditorContext),r.title||(r.title=e.label),r.when=_t.and(e.precondition,r.when),r}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(wg).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};class Oue extends Et{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,r)=>r[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const r of this._implementations){const s=r[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}function Sg(i,e){Xn.registerCommand(i,function(t,...n){const[r,s]=n;Gi(rn.isUri(r)),Gi(Le.isIPosition(s));const o=t.get(Ds).getModel(r);if(o){const a=Le.lift(s);return e(o,a,...n.slice(2))}return t.get(Qa).createModelReference(r).then(a=>new Promise((u,d)=>{try{const h=e(a.object.textEditorModel,Le.lift(s),n.slice(2));u(h)}catch(h){d(h)}}).finally(()=>{a.dispose()}))})}function yxe(i,e){Xn.registerCommand(i,function(t,...n){const[r]=n;Gi(rn.isUri(r));const s=t.get(Ds).getModel(r);return s?e(s,...n.slice(1)):t.get(Qa).createModelReference(r).then(o=>new Promise((a,u)=>{try{const d=e(o.object.textEditorModel,n.slice(1));a(d)}catch(d){u(d)}}).finally(()=>{o.dispose()}))})}function nt(i){return Gu.INSTANCE.registerEditorCommand(i),i}function it(i){const e=new i;return Gu.INSTANCE.registerEditorAction(e),e}function Mue(i){return Gu.INSTANCE.registerEditorAction(i),i}function Rue(i){Gu.INSTANCE.registerEditorAction(i)}function ki(i,e){Gu.INSTANCE.registerEditorContribution(i,e)}var uy;(function(i){function e(o){return Gu.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return Gu.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Gu.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function r(o){return Gu.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=r;function s(){return Gu.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=s})(uy||(uy={}));const Sxe={EditorCommonContributions:"editor.contributions"};class Gu{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Gu.INSTANCE=new Gu;Xr.add(Sxe.EditorCommonContributions,Gu.INSTANCE);function lM(i){return i.register(),i}const Pue=lM(new PS({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Mt.MenubarEditMenu,group:"1_do",title:C({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Mt.CommandPalette,group:"",title:C("undo","Undo"),order:1}]}));lM(new Nue(Pue,{id:"default:undo",precondition:void 0}));const Fue=lM(new PS({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Mt.MenubarEditMenu,group:"1_do",title:C({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Mt.CommandPalette,group:"",title:C("redo","Redo"),order:1}]}));lM(new Nue(Fue,{id:"default:redo",precondition:void 0}));const Lxe=lM(new PS({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Mt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Mt.CommandPalette,group:"",title:C("selectAll","Select All"),order:1}]}));var Exe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},xxe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SA=class{constructor(e,t){}dispose(){}};SA.ID="editor.contrib.markerDecorations";SA=Exe([xxe(1,gq)],SA);ki(SA.ID,SA);const Bue="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Dxe(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Bue)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Wue=Dxe();function BF(i){let e=Wue;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const Ixe={maxLen:1e3,windowSize:15,timeBudget:150};function WF(i,e,t,n,r=Ixe){if(t.length>r.maxLen){let d=i-r.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,i+r.maxLen/2),WF(i,e,t,n,r)}const s=Date.now(),o=i-1-n;let a=-1,u=null;for(let d=1;!(Date.now()-s>=r.timeBudget);d++){const h=o-r.windowSize*d;e.lastIndex=Math.max(0,h);const f=Txe(e,t,o,a);if(!f&&u||(u=f,h<=0))break;a=h}if(u){let d={word:u[0],startColumn:n+1+u.index,endColumn:n+1+u.index+u[0].length};return e.lastIndex=0,d}return null}function Txe(i,e,t,n){let r;for(;r=i.exec(e);){const s=r.index||0;if(s<=t&&i.lastIndex>=t)return r;if(n>0&&s>n)return null}return null}function $u(i,e=0){return i[i.length-(1+e)]}function kxe(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function rc(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,r=i.length;n<r;n++)if(!t(i[n],e[n]))return!1;return!0}function Dq(i,e,t){let n=0,r=i.length-1;for(;n<=r;){const s=(n+r)/2|0,o=t(i[s],e);if(o<0)n=s+1;else if(o>0)r=s-1;else return s}return-(n+1)}function Vue(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){const r=Math.floor((t+n)/2);e(i[r])?n=r:t=r+1}return t}function SH(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],r=[],s=[],o=[];for(let a of e){const u=t(a,n);u<0?r.push(a):u>0?s.push(a):o.push(a)}return i<r.length?SH(i,r,t):i<r.length+o.length?o[0]:SH(i-(r.length+o.length),s,t)}function lJ(i,e){const t=[];let n;for(const r of i.slice(0).sort(e))!n||e(n[0],r)!==0?(n=[r],t.push(n)):n.push(r);return t}function FS(i){return i.filter(e=>!!e)}function Hue(i){return!Array.isArray(i)||i.length===0}function vl(i){return Array.isArray(i)&&i.length>0}function Eb(i,e=t=>t){const t=new Set;return i.filter(n=>{const r=e(n);return t.has(r)?!1:(t.add(r),!0)})}function Nxe(i,e){const t=Axe(i,e);if(t!==-1)return i[t]}function Axe(i,e){for(let t=i.length-1;t>=0;t--){const n=i[t];if(e(n))return t}return-1}function LH(i,e){return i.length>0?i[0]:e}function $ue(i){return[].concat(...i)}function xa(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let r=t;r<e;r++)n.push(r);else for(let r=t;r>e;r--)n.push(r);return n}function LA(i,e,t){const n=i.slice(0,e),r=i.slice(e);return n.concat(t,r)}function S9(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function ER(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function Iq(i){return Array.isArray(i)?i:[i]}function Oxe(i,e,t){const n=zue(i,e),r=i.length,s=t.length;i.length=r+s;for(let o=r-1;o>=n;o--)i[o+s]=i[o];for(let o=0;o<s;o++)i[o+n]=t[o]}function uJ(i,e,t,n){const r=zue(i,e),s=i.splice(r,t);return Oxe(i,r,n),s}function zue(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}class cy{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function Xg(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Xg(i[t]):e[t]=i[t]}),e}function Mxe(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Uue.call(t,n)){const r=t[n];typeof r=="object"&&!Object.isFrozen(r)&&e.push(r)}}return i}const Uue=Object.prototype.hasOwnProperty;function Rxe(i,e){return EH(i,e,new Set)}function EH(i,e,t){if(Eu(i))return i;const n=e(i);if(typeof n<"u")return n;if(pue(i)){const r=[];for(const s of i)r.push(EH(s,e,t));return r}if(Ga(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const r={};for(let s in i)Uue.call(i,s)&&(r[s]=EH(i[s],e,t));return t.delete(i),r}return i}function Lg(i,e,t=!0){return Ga(i)?(Ga(e)&&Object.keys(e).forEach(n=>{n in i?t&&(Ga(i[n])&&Ga(e[n])?Lg(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function Qc(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!Qc(i[t],e[t]))return!1}else{const r=[];for(n in i)r.push(n);r.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!Qc(r,s))return!1;for(t=0;t<r.length;t++)if(!Qc(i[r[t]],e[r[t]]))return!1}return!0}function ff(i,e,t){const n=e(i);return typeof n>"u"?t:n}const yv=8;class jue{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Pxe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Kue{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Us{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return L8(e,t)}compute(e,t,n){return n}}class E2{constructor(e,t){this.newValue=e,this.didChange=t}}function L8(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new E2(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&rc(i,e);return new E2(e,n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){const r=L8(i[n],e[n]);r.didChange&&(i[n]=r.newValue,t=!0)}return new E2(i,t)}class BS{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}applyUpdate(e,t){return L8(e,t)}validate(e){return this.defaultValue}}class wC{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return L8(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Zt(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class Kn extends wC{constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=n),super(e,t,n,r)}validate(e){return Zt(e,this.defaultValue)}}function xH(i,e,t,n){if(typeof i>"u")return e;let r=parseInt(i,10);return isNaN(r)?e:(r=Math.max(t,r),r=Math.min(n,r),r|0)}class br extends wC{constructor(e,t,n,r,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=r,o.maximum=s),super(e,t,n,o),this.minimum=r,this.maximum=s}static clampedInt(e,t,n,r){return xH(e,t,n,r)}validate(e){return br.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class qf extends wC{constructor(e,t,n,r,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=r}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(qf.float(e,this.defaultValue))}}class hl extends wC{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="string",r.default=n),super(e,t,n,r)}validate(e){return hl.string(e,this.defaultValue)}}function ja(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}class Ss extends wC{constructor(e,t,n,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=n),super(e,t,n,s),this._allowedValues=r}validate(e){return ja(e,this.defaultValue,this._allowedValues)}}class yN extends Us{constructor(e,t,n,r,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=r),super(e,t,n,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Fxe(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Bxe extends Us{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[C("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),C("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),C("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:C("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Wxe extends Us{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:C("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:C("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Zt(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Zt(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Vxe(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ao;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(ao||(ao={}));function Hxe(i){switch(i){case"line":return ao.Line;case"block":return ao.Block;case"underline":return ao.Underline;case"line-thin":return ao.LineThin;case"block-outline":return ao.BlockOutline;case"underline-thin":return ao.UnderlineThin}}class $xe extends BS{constructor(){super(127,[65,33])}compute(e,t,n){const r=["monaco-editor"];return t.get(33)&&r.push(t.get(33)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(65)==="default"?r.push("mouse-default"):t.get(65)==="copy"&&r.push("mouse-copy"),t.get(99)&&r.push("showUnused"),t.get(125)&&r.push("showDeprecated"),r.join(" ")}}class zxe extends Kn{constructor(){super(32,"emptySelectionClipboard",!0,{description:C("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class Uxe extends Us{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:C("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[C("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),C("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),C("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:C("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[C("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),C("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),C("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:C("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:C("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:qn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:C("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:C("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Zt(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ja(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ja(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Zt(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Zt(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Zt(t.loop,this.defaultValue.loop)}}}class xu extends Us{constructor(){super(44,"fontLigatures",xu.OFF,{anyOf:[{type:"boolean",description:C("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:C("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:C("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?xu.OFF:e==="true"?xu.ON:e:e?xu.ON:xu.OFF}}xu.OFF='"liga" off, "calt" off';xu.ON='"liga" on, "calt" on';class jxe extends BS{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class Kxe extends wC{constructor(){super(45,"fontSize",jo.fontSize,{type:"number",minimum:6,maximum:100,default:jo.fontSize,description:C("fontSize","Controls the font size in pixels.")})}validate(e){let t=qf.float(e,this.defaultValue);return t===0?jo.fontSize:qf.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class Mf extends Us{constructor(){super(46,"fontWeight",jo.fontWeight,{anyOf:[{type:"number",minimum:Mf.MINIMUM_VALUE,maximum:Mf.MAXIMUM_VALUE,errorMessage:C("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Mf.SUGGESTION_VALUES}],default:jo.fontWeight,description:C("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(br.clampedInt(e,jo.fontWeight,Mf.MINIMUM_VALUE,Mf.MAXIMUM_VALUE))}}Mf.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Mf.MINIMUM_VALUE=1;Mf.MAXIMUM_VALUE=1e3;class qxe extends Us{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[C("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),C("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),C("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:C("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:C("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:C("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:C("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:C("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:C("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:C("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:C("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:C("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:C("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:C("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,r,s,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:ja(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:ja(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:ja(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(r=a.multipleDeclarations)!==null&&r!==void 0?r:ja(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:ja(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:ja(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:hl.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:hl.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:hl.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:hl.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:hl.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class Gxe extends Us{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:C("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:C("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:C("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:C("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),delay:br.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Zt(t.sticky,this.defaultValue.sticky),above:Zt(t.above,this.defaultValue.above)}}}class dy extends BS{constructor(){super(130,[49,57,37,64,91,59,60,93,117,120,121,122,2])}compute(e,t,n){return dy.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,r=(e.viewLineCount+n)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:r,minimapLineCount:s}}static _computeMinimapLayout(e,t){const n=e.outerWidth,r=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,u=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,f=e.minimap.renderCharacters;let p=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const m=e.minimap.maxColumn,v=e.minimap.size,b=e.minimap.side,L=e.verticalScrollbarWidth,S=e.viewLineCount,y=e.remainingWidth,E=e.isViewportWrapping,A=f?2:3;let N=Math.floor(s*r);const V=N/s;let M=!1,R=!1,Y=A*p,X=p/s,$=1;if(v==="fill"||v==="fit"){const{typicalViewportLineCount:q,extraLinesBeyondLastLine:z,desiredRatio:k,minimapLineCount:K}=dy.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:h,height:r,lineHeight:u,pixelRatio:s});if(S/K>1)M=!0,R=!0,p=1,Y=1,X=p/s;else{let ne=!1,be=p+1;if(v==="fit"){const De=Math.ceil((S+z)*Y);E&&a&&y<=t.stableFitRemainingWidth?(ne=!0,be=t.stableFitMaxMinimapScale):ne=De>N}if(v==="fill"||ne){M=!0;const De=p;Y=Math.min(u*s,Math.max(1,Math.floor(1/k))),E&&a&&y<=t.stableFitRemainingWidth&&(be=t.stableFitMaxMinimapScale),p=Math.min(be,Math.max(1,Math.floor(Y/A))),p>De&&($=Math.min(2,p/De)),X=p/s/$,N=Math.ceil(Math.max(q,S+z)*Y),E?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=y,t.stableFitMaxMinimapScale=p):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const T=Math.floor(m*X),O=Math.min(T,Math.max(0,Math.floor((y-L-2)*X/(d+X)))+yv);let B=Math.floor(s*O);const W=B/s;B=Math.floor(B*$);const j=f?1:2,U=b==="left"?0:n-O-L;return{renderMinimap:j,minimapLeft:U,minimapWidth:O,minimapHeightIsEditorHeight:M,minimapIsSampling:R,minimapScale:p,minimapLineHeight:Y,minimapCanvasInnerWidth:B,minimapCanvasInnerHeight:N,minimapCanvasOuterWidth:W,minimapCanvasOuterHeight:V}}static computeLayout(e,t){const n=t.outerWidth|0,r=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,u=t.maxDigitWidth,d=t.pixelRatio,h=t.viewLineCount,f=e.get(122),p=f==="inherit"?e.get(121):f,m=p==="inherit"?e.get(117):p,v=e.get(120),b=e.get(2),L=t.isDominatedByLongLines,S=e.get(49),y=e.get(59).renderType!==0,E=e.get(60),A=e.get(93),N=e.get(64),V=e.get(91),M=V.verticalScrollbarSize,R=V.verticalHasArrows,Y=V.arrowSize,X=V.horizontalScrollbarSize,$=e.get(57),T=e.get(37);let O;if(typeof $=="string"&&/^\d+(\.\d+)?ch$/.test($)){const At=parseFloat($.substr(0,$.length-2));O=br.clampedInt(At*a,0,0,1e3)}else O=br.clampedInt($,0,0,1e3);T&&(O+=16);let B=0;if(y){const At=Math.max(o,E);B=Math.round(At*u)}let W=0;S&&(W=s);let j=0,U=j+W,q=U+B,z=q+O;const k=n-W-B-O;let K=!1,fe=!1,ne=-1;b!==2&&(p==="inherit"&&L?(K=!0,fe=!0):m==="on"||m==="bounded"?fe=!0:m==="wordWrapColumn"&&(ne=v));const be=dy._computeMinimapLayout({outerWidth:n,outerHeight:r,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:A,minimap:N,verticalScrollbarWidth:M,viewLineCount:h,remainingWidth:k,isViewportWrapping:fe},t.memory||new Kue);be.renderMinimap!==0&&be.minimapLeft===0&&(j+=be.minimapWidth,U+=be.minimapWidth,q+=be.minimapWidth,z+=be.minimapWidth);const De=k-be.minimapWidth,Ve=Math.max(1,Math.floor((De-M-2)/a)),rt=R?Y:0;return fe&&(ne=Math.max(1,Ve),m==="bounded"&&(ne=Math.min(ne,v))),{width:n,height:r,glyphMarginLeft:j,glyphMarginWidth:W,lineNumbersLeft:U,lineNumbersWidth:B,decorationsLeft:q,decorationsWidth:O,contentLeft:z,contentWidth:De,minimap:be,viewportColumn:Ve,isWordWrapMinified:K,isViewportWrapping:fe,wrappingColumn:ne,verticalScrollbarWidth:M,horizontalScrollbarHeight:X,overviewRuler:{top:rt,width:M,height:r-2*rt,right:0}}}}class Yxe extends Us{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:C("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Zt(e.enabled,this.defaultValue.enabled)}}}class Zxe extends Us{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(126,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:C("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:C("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:C("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),fontSize:br.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:hl.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Xxe extends qf{constructor(){super(58,"lineHeight",jo.lineHeight,e=>qf.clamp(e,0,150),{markdownDescription:C("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Qxe extends Us{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:C("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[C("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),C("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),C("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:C("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:C("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:C("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:C("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:C("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:C("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),size:ja(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ja(t.side,this.defaultValue.side,["right","left"]),showSlider:ja(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Zt(t.renderCharacters,this.defaultValue.renderCharacters),scale:br.clampedInt(t.scale,1,1,3),maxColumn:br.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function Jxe(i){return i==="ctrlCmd"?qn?"metaKey":"ctrlKey":"altKey"}class eDe extends Us{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:br.clampedInt(t.top,0,0,1e3),bottom:br.clampedInt(t.bottom,0,0,1e3)}}}class tDe extends Us{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:C("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:C("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),cycle:Zt(t.cycle,this.defaultValue.cycle)}}}class nDe extends BS{constructor(){super(128)}compute(e,t,n){return e.pixelRatio}}class iDe extends Us{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:C("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:C("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:C("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:C("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Zt(t.other,this.defaultValue.other),comments:Zt(t.comments,this.defaultValue.comments),strings:Zt(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class rDe extends Us{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[C("lineNumbers.off","Line numbers are not rendered."),C("lineNumbers.on","Line numbers are rendered as absolute number."),C("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),C("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:C("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function Tq(i){const e=i.get(86);return e==="editable"?i.get(80):e!=="on"}class sDe extends Us{constructor(){const e=[],t={type:"number",description:C("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:C("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:C("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:br.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const r=n;t.push({column:br.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((n,r)=>n.column-r.column),t}return this.defaultValue}}function cJ(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let oDe=class extends Us{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),C("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),C("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),C("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),C("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:C("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:C("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:C("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=br.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=br.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:br.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:cJ(t.vertical,this.defaultValue.vertical),horizontal:cJ(t.horizontal,this.defaultValue.horizontal),useShadows:Zt(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Zt(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Zt(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Zt(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Zt(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:br.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:r,verticalSliderSize:br.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Zt(t.scrollByPage,this.defaultValue.scrollByPage)}}};const Sf="inUntrustedWorkspace",Rf={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments"};class aDe extends Us{constructor(){const e={nonBasicASCII:Sf,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Sf,allowedCharacters:{}};super(112,"unicodeHighlight",e,{[Rf.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Sf],default:e.nonBasicASCII,description:C("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Rf.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:C("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Rf.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:C("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Rf.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Sf],default:e.includeComments,description:C("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[Rf.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:C("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&(Qc(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0));const r=super.applyUpdate(e,t);return n?new E2(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:VF(t.nonBasicASCII,Sf,[!0,!1,Sf]),invisibleCharacters:Zt(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Zt(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:VF(t.includeComments,Sf,[!0,!1,Sf]),allowedCharacters:this.validateAllowedCharacters(e.allowedCharacters,this.defaultValue.allowedCharacters)}}validateAllowedCharacters(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[r,s]of Object.entries(e))s===!0&&(n[r]=!0);return n}}class lDe extends Us{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:C("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),mode:ja(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class uDe extends Us{constructor(){const e={enabled:Jo.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:C("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Zt(e.enabled,this.defaultValue.enabled)}}}class cDe extends Us{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairs.true","Enables bracket pair guides."),C("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),C("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:C("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),C("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),C("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:C("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:C("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:C("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:C("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:VF(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:VF(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Zt(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Zt(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Zt(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function VF(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class dDe extends Us{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[C("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),C("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:C("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:C("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:C("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:C("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:C("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:C("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:C("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:C("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:C("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:C("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:C("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:ja(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Zt(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Zt(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Zt(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Zt(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Zt(t.showIcons,this.defaultValue.showIcons),showStatusBar:Zt(t.showStatusBar,this.defaultValue.showStatusBar),preview:Zt(t.preview,this.defaultValue.preview),previewMode:ja(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Zt(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Zt(t.showMethods,this.defaultValue.showMethods),showFunctions:Zt(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Zt(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Zt(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Zt(t.showFields,this.defaultValue.showFields),showVariables:Zt(t.showVariables,this.defaultValue.showVariables),showClasses:Zt(t.showClasses,this.defaultValue.showClasses),showStructs:Zt(t.showStructs,this.defaultValue.showStructs),showInterfaces:Zt(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Zt(t.showModules,this.defaultValue.showModules),showProperties:Zt(t.showProperties,this.defaultValue.showProperties),showEvents:Zt(t.showEvents,this.defaultValue.showEvents),showOperators:Zt(t.showOperators,this.defaultValue.showOperators),showUnits:Zt(t.showUnits,this.defaultValue.showUnits),showValues:Zt(t.showValues,this.defaultValue.showValues),showConstants:Zt(t.showConstants,this.defaultValue.showConstants),showEnums:Zt(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Zt(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Zt(t.showKeywords,this.defaultValue.showKeywords),showWords:Zt(t.showWords,this.defaultValue.showWords),showColors:Zt(t.showColors,this.defaultValue.showColors),showFiles:Zt(t.showFiles,this.defaultValue.showFiles),showReferences:Zt(t.showReferences,this.defaultValue.showReferences),showFolders:Zt(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Zt(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Zt(t.showSnippets,this.defaultValue.showSnippets),showUsers:Zt(t.showUsers,this.defaultValue.showUsers),showIssues:Zt(t.showIssues,this.defaultValue.showIssues)}}}class hDe extends Us{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:C("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Zt(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class fDe extends BS{constructor(){super(129,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function gDe(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class pDe extends BS{constructor(){super(131,[130])}compute(e,t,n){const r=t.get(130);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}const mDe="Consolas, 'Courier New', monospace",_De="Menlo, Monaco, 'Courier New', monospace",vDe="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",jo={fontFamily:qn?_De:Xa?vDe:mDe,fontWeight:"normal",fontSize:qn?12:14,lineHeight:0,letterSpacing:0},Jo={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},v1=[];function et(i){return v1[i.id]=i,i}const af={acceptSuggestionOnCommitCharacter:et(new Kn(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:C("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:et(new Ss(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",C("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:C("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:et(new Bxe),accessibilityPageSize:et(new br(3,"accessibilityPageSize",10,1,1073741824,{description:C("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:et(new hl(4,"ariaLabel",C("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:et(new Ss(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),C("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:C("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:et(new Ss(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:et(new Ss(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:et(new Ss(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),C("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:C("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:et(new yN(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Fxe,{enumDescriptions:[C("editor.autoIndent.none","The editor will not insert indentation automatically."),C("editor.autoIndent.keep","The editor will keep the current line's indentation."),C("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),C("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),C("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:C("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:et(new Kn(10,"automaticLayout",!1)),autoSurround:et(new Ss(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[C("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),C("editor.autoSurround.quotes","Surround with quotes but not brackets."),C("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:C("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:et(new uDe),bracketPairGuides:et(new cDe),stickyTabStops:et(new Kn(103,"stickyTabStops",!1,{description:C("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:et(new Kn(14,"codeLens",!0,{description:C("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:et(new hl(15,"codeLensFontFamily","",{description:C("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:et(new br(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:C("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:et(new Kn(17,"colorDecorators",!0,{description:C("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:et(new Kn(18,"columnSelection",!1,{description:C("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:et(new Wxe),contextmenu:et(new Kn(20,"contextmenu",!0)),copyWithSyntaxHighlighting:et(new Kn(21,"copyWithSyntaxHighlighting",!0,{description:C("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:et(new yN(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Vxe,{description:C("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:et(new Kn(23,"cursorSmoothCaretAnimation",!1,{description:C("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:et(new yN(24,"cursorStyle",ao.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Hxe,{description:C("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:et(new br(25,"cursorSurroundingLines",0,0,1073741824,{description:C("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:et(new Ss(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[C("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),C("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:C("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:et(new br(27,"cursorWidth",0,0,1073741824,{markdownDescription:C("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:et(new Kn(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:et(new Kn(29,"disableMonospaceOptimizations",!1)),domReadOnly:et(new Kn(30,"domReadOnly",!1)),dragAndDrop:et(new Kn(31,"dragAndDrop",!0,{description:C("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:et(new zxe),extraEditorClassName:et(new hl(33,"extraEditorClassName","")),fastScrollSensitivity:et(new qf(34,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:C("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:et(new Uxe),fixedOverflowWidgets:et(new Kn(36,"fixedOverflowWidgets",!1)),folding:et(new Kn(37,"folding",!0,{description:C("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:et(new Ss(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[C("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),C("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:C("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:et(new Kn(39,"foldingHighlight",!0,{description:C("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:et(new Kn(40,"foldingImportsByDefault",!1,{description:C("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:et(new Kn(41,"unfoldOnClickAfterEndOfLine",!1,{description:C("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:et(new hl(42,"fontFamily",jo.fontFamily,{description:C("fontFamily","Controls the font family.")})),fontInfo:et(new jxe),fontLigatures2:et(new xu),fontSize:et(new Kxe),fontWeight:et(new Mf),formatOnPaste:et(new Kn(47,"formatOnPaste",!1,{description:C("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:et(new Kn(48,"formatOnType",!1,{description:C("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:et(new Kn(49,"glyphMargin",!0,{description:C("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:et(new qxe),hideCursorInOverviewRuler:et(new Kn(51,"hideCursorInOverviewRuler",!1,{description:C("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:et(new Gxe),inDiffEditor:et(new Kn(53,"inDiffEditor",!1)),letterSpacing:et(new qf(55,"letterSpacing",jo.letterSpacing,i=>qf.clamp(i,-5,20),{description:C("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:et(new Yxe),lineDecorationsWidth:et(new wC(57,"lineDecorationsWidth",10)),lineHeight:et(new Xxe),lineNumbers:et(new rDe),lineNumbersMinChars:et(new br(60,"lineNumbersMinChars",5,1,300)),linkedEditing:et(new Kn(61,"linkedEditing",!1,{description:C("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:et(new Kn(62,"links",!0,{description:C("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:et(new Ss(63,"matchBrackets","always",["always","near","never"],{description:C("matchBrackets","Highlight matching brackets.")})),minimap:et(new Qxe),mouseStyle:et(new Ss(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:et(new qf(66,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:C("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:et(new Kn(67,"mouseWheelZoom",!1,{markdownDescription:C("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:et(new Kn(68,"multiCursorMergeOverlapping",!0,{description:C("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:et(new yN(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Jxe,{markdownEnumDescriptions:[C("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:C({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:et(new Ss(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[C("multiCursorPaste.spread","Each cursor pastes a single line of the text."),C("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:C("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:et(new Kn(71,"occurrencesHighlight",!0,{description:C("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:et(new Kn(72,"overviewRulerBorder",!0,{description:C("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:et(new br(73,"overviewRulerLanes",3,0,3)),padding:et(new eDe),parameterHints:et(new tDe),peekWidgetDefaultFocus:et(new Ss(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[C("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),C("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:C("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:et(new Kn(77,"definitionLinkOpensInPeek",!1,{description:C("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:et(new iDe),quickSuggestionsDelay:et(new br(79,"quickSuggestionsDelay",10,0,1073741824,{description:C("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:et(new Kn(80,"readOnly",!1)),renameOnType:et(new Kn(81,"renameOnType",!1,{description:C("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:C("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:et(new Kn(82,"renderControlCharacters",!0,{description:C("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:et(new Kn(83,"renderFinalNewline",!0,{description:C("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:et(new Ss(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",C("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:C("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:et(new Kn(85,"renderLineHighlightOnlyWhenFocus",!1,{description:C("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:et(new Ss(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:et(new Ss(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",C("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),C("renderWhitespace.selection","Render whitespace characters only on selected text."),C("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:C("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:et(new br(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:et(new Kn(89,"roundedSelection",!0,{description:C("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:et(new sDe),scrollbar:et(new oDe),scrollBeyondLastColumn:et(new br(92,"scrollBeyondLastColumn",5,0,1073741824,{description:C("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:et(new Kn(93,"scrollBeyondLastLine",!0,{description:C("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:et(new Kn(94,"scrollPredominantAxis",!0,{description:C("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:et(new Kn(95,"selectionClipboard",!0,{description:C("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Xa})),selectionHighlight:et(new Kn(96,"selectionHighlight",!0,{description:C("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:et(new Kn(97,"selectOnLineNumbers",!0)),showFoldingControls:et(new Ss(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[C("showFoldingControls.always","Always show the folding controls."),C("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:C("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:et(new Kn(99,"showUnused",!0,{description:C("showUnused","Controls fading out of unused code.")})),showDeprecated:et(new Kn(125,"showDeprecated",!0,{description:C("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:et(new Zxe),snippetSuggestions:et(new Ss(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[C("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),C("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),C("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),C("snippetSuggestions.none","Do not show snippet suggestions.")],description:C("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:et(new hDe),smoothScrolling:et(new Kn(102,"smoothScrolling",!1,{description:C("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:et(new br(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:et(new dDe),inlineSuggest:et(new lDe),suggestFontSize:et(new br(106,"suggestFontSize",0,0,1e3,{markdownDescription:C("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:et(new br(107,"suggestLineHeight",0,0,1e3,{markdownDescription:C("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:et(new Kn(108,"suggestOnTriggerCharacters",!0,{description:C("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:et(new Ss(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[C("suggestSelection.first","Always select the first suggestion."),C("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),C("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:C("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:et(new Ss(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[C("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),C("tabCompletion.off","Disable tab completions."),C("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:C("tabCompletion","Enables tab completions.")})),tabIndex:et(new br(111,"tabIndex",0,-1,1073741824)),unicodeHighlight:et(new aDe),unusualLineTerminators:et(new Ss(113,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[C("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),C("unusualLineTerminators.off","Unusual line terminators are ignored."),C("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:C("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:et(new Kn(114,"useShadowDOM",!0)),useTabStops:et(new Kn(115,"useTabStops",!0,{description:C("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:et(new hl(116,"wordSeparators",Bue,{description:C("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:et(new Ss(117,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),C({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:C({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:et(new hl(118,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:et(new hl(119,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:et(new br(120,"wordWrapColumn",80,1,1073741824,{markdownDescription:C({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:et(new Ss(121,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:et(new Ss(122,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:et(new yN(123,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],gDe,{enumDescriptions:[C("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),C("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),C("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),C("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:C("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:et(new Ss(124,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[C("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),C("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:C("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:et(new $xe),pixelRatio:et(new nDe),tabFocusMode:et(new fDe),layoutInfo:et(new dy),wrappingInfo:et(new pDe)};class bDe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class kq{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(Kc?jo.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight="bold",r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(r);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight=this._bareFontInfo.fontWeight,s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",s.style.fontStyle="italic",t.appendChild(s);const o=[];for(const a of this._requests){let u;a.type===0&&(u=n),a.type===2&&(u=r),a.type===1&&(u=s),u.appendChild(document.createElement("br"));const d=document.createElement("span");kq._render(d,a),u.appendChild(d),o.push(d)}this._container=t,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="";for(let r=0;r<8;r++)n+=n;e.innerText=n}else{let n=t.chr;for(let r=0;r<8;r++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],r=this._testElements[e];n.fulfill(r.offsetWidth/256)}}}function CDe(i,e){new kq(i,e).read()}class que extends Oe{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,r=0;t?(n=t.width,r=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,r=this.referenceDomElement.clientHeight),n=Math.max(5,n),r=Math.max(5,r),(this.width!==n||this.height!==r)&&(this.width=n,this.height=r,e&&this.changeCallback())}}const Ap=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Ce,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},wDe=qn?1.5:1.35,L9=8;class G1{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,r){const s=e.get(42),o=e.get(46),a=e.get(45),u=e.get(44),d=e.get(58),h=e.get(55);return G1._create(s,o,a,u,d,h,t,n,r)}static _create(e,t,n,r,s,o,a,u,d){s===0?s=wDe*n:s<L9&&(s=s*n),s=Math.round(s),s<L9&&(s=L9);const h=1+(d?0:Ap.getZoomLevel()*.1);return n*=h,s*=h,new G1({zoomLevel:a,pixelRatio:u,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:r,lineHeight:s,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=G1._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const yDe=1;class DH extends G1{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=yDe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const E8={JSONContribution:"base.contributions.json"};function SDe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class LDe{constructor(){this._onDidChangeSchema=new Ce,this.schemasById={}}registerSchema(e,t){this.schemasById[SDe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const EDe=new LDe;Xr.add(E8.JSONContribution,EDe);const yC={Configuration:"base.contributions.configuration"},SN="vscode://schemas/settings/resourceLanguage",dJ=Xr.as(E8.JSONContribution);class xDe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Ce,this._onDidUpdateConfiguration=new Ce,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:C("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},dJ.registerSchema(SN,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);dJ.registerSchema(SN,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],r=[];for(const{overrides:s,source:o}of e)for(const a in s)if(n.push(a),EA.test(a)){const u=Object.assign(Object.assign({},((t=this.configurationDefaultsOverrides.get(a))===null||t===void 0?void 0:t.value)||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:o,value:u});const d={type:"object",default:u,description:C("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",a),$ref:SN,defaultDefaultValue:u,source:cc(o)?void 0:o};r.push(...Yue(a)),this.configurationProperties[a]=d,this.defaultLanguageConfigurationOverridesNode.properties[a]=d}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:o});const u=this.configurationProperties[a];u&&(this.updatePropertyDefaultValue(a,u),this.updateSchema(a,u))}this.registerOverrideIdentifiers(r),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(r=>{n.push(...this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties)),this.configurationContributors.push(r),this.registerJSONConfiguration(r)}),n}validateAndRegisterProperties(e,t=!0,n,r,s=3){s=Eu(e.scope)?s:e.scope;let o=[],a=e.properties;if(a)for(let d in a){if(t&&TDe(d)){delete a[d];continue}const h=a[d];if(h.source=n,h.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,h),EA.test(d)?h.scope=void 0:(h.scope=Eu(h.scope)?s:h.scope,h.restricted=Eu(h.restricted)?!!(r!=null&&r.includes(d)):h.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d];!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),o.push(d)}let u=e.allOf;if(u)for(let d of u)o.push(...this.validateAndRegisterProperties(d,t,n,r,s));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let r=n.properties;if(r)for(const o in r)this.updateSchema(o,r[o]);let s=n.allOf;s&&s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:C("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:SN};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),C("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let r=n==null?void 0:n.value,s=n==null?void 0:n.source;pl(r)&&(r=t.defaultDefaultValue,s=void 0),pl(r)&&(r=IDe(t.type)),t.default=r,t.defaultValueSource=s}}const Gue="\\[([^\\]]+)\\]",hJ=new RegExp(Gue,"g"),DDe=`^(${Gue})+$`,EA=new RegExp(DDe);function Yue(i){const e=[];if(EA.test(i)){let t=hJ.exec(i);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=hJ.exec(i)}}return Eb(e)}function IDe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const Zue=new xDe;Xr.add(yC.Configuration,Zue);function TDe(i){return i.trim()?EA.test(i)?C("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):Zue.getConfigurationProperties()[i]!==void 0?C("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null:C("config.property.empty","Cannot register an empty property")}const kDe=Object.prototype.hasOwnProperty;function NDe(i,e){for(let t in i)if(kDe.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}class ADe{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const HF=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Ce,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(i){this._tabFocus!==i&&(this._tabFocus=i,this._onDidChangeTabFocus.fire(this._tabFocus))}},ODe=Object.hasOwnProperty;class MDe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class RDe{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Ef{static readOptions(e){const t=e,n=new RDe;for(const r of v1){const s=r.name==="_never_"?void 0:t[r.name];n._write(r.id,s)}return n}static validateOptions(e){const t=new Pxe;for(const n of v1)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new MDe;for(const r of v1)n._write(r.id,r.compute(t,n,e._read(r.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?rc(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!Ef._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let r=!1;for(const s of v1){const o=!Ef._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=o,o&&(r=!0)}return r?new jue(n):null}static applyUpdate(e,t){let n=!1;for(const r of v1)if(t.hasOwnProperty(r.name)){const s=r.applyUpdate(e[r.name],t[r.name]);e[r.name]=s.newValue,n=n||s.didChange}return n}}function PDe(i){const e=i.wordWrap;e===!0?i.wordWrap="on":e===!1&&(i.wordWrap="off");const t=i.lineNumbers;t===!0?i.lineNumbers="on":t===!1&&(i.lineNumbers="off"),i.autoClosingBrackets===!1&&(i.autoClosingBrackets="never",i.autoClosingQuotes="never",i.autoSurround="never"),i.cursorBlinking==="visible"&&(i.cursorBlinking="solid");const s=i.renderWhitespace;s===!0?i.renderWhitespace="boundary":s===!1&&(i.renderWhitespace="none");const o=i.renderLineHighlight;o===!0?i.renderLineHighlight="line":o===!1&&(i.renderLineHighlight="none");const a=i.acceptSuggestionOnEnter;a===!0?i.acceptSuggestionOnEnter="on":a===!1&&(i.acceptSuggestionOnEnter="off");const u=i.tabCompletion;u===!1?i.tabCompletion="off":u===!0&&(i.tabCompletion="onlySnippets");const d=i.suggest;if(d&&typeof d.filteredTypes=="object"&&d.filteredTypes){const L={};L.method="showMethods",L.function="showFunctions",L.constructor="showConstructors",L.deprecated="showDeprecated",L.field="showFields",L.variable="showVariables",L.class="showClasses",L.struct="showStructs",L.interface="showInterfaces",L.module="showModules",L.property="showProperties",L.event="showEvents",L.operator="showOperators",L.unit="showUnits",L.value="showValues",L.constant="showConstants",L.enum="showEnums",L.enumMember="showEnumMembers",L.keyword="showKeywords",L.text="showWords",L.color="showColors",L.file="showFiles",L.reference="showReferences",L.folder="showFolders",L.typeParameter="showTypeParameters",L.snippet="showSnippets",NDe(L,S=>{const y=d.filteredTypes[S.key];y===!1&&(d[S.value]=y)})}const h=i.hover;h===!0?i.hover={enabled:!0}:h===!1&&(i.hover={enabled:!1});const f=i.parameterHints;f===!0?i.parameterHints={enabled:!0}:f===!1&&(i.parameterHints={enabled:!1});const p=i.autoIndent;p===!0?i.autoIndent="full":p===!1&&(i.autoIndent="advanced");const m=i.matchBrackets;m===!0?i.matchBrackets="always":m===!1&&(i.matchBrackets="never");const{renderIndentGuides:v,highlightActiveIndentGuide:b}=i;i.guides||(i.guides={}),v!==void 0&&(i.guides.indentation=!!v),b!==void 0&&(i.guides.highlightActiveIndentation=!!b)}function fJ(i){const e=Xg(i);return PDe(e),e}class Nq extends Oe{constructor(e,t){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Ce),this.onDidChangeFast=this._onDidChangeFast.event,this._reservedHeight=0,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new Kue,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=fJ(t),this._readOptions=Ef.readOptions(this._rawOptions),this._validatedOptions=Ef.validateOptions(this._readOptions),this._register(Ap.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(HF.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=Ef.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=G1.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:HF.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Ef.computeOptions(this._validatedOptions,n)}updateOptions(e){if(typeof e>"u")return;const t=fJ(e);Ef.applyUpdate(this._rawOptions,t)&&(this._readOptions=Ef.readOptions(this._rawOptions),this._validatedOptions=Ef.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=Nq._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}reserveHeight(e){this._reservedHeight=e,this._recomputeOptions()}}const FDe=Object.freeze({id:"editor",order:5,type:"object",title:C("editorConfigurationTitle","Editor"),scope:5}),BDe=Xr.as(yC.Configuration),$F=Object.assign(Object.assign({},FDe),{properties:{"editor.tabSize":{type:"number",default:Jo.tabSize,minimum:1,markdownDescription:C("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Jo.insertSpaces,markdownDescription:C("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Jo.detectIndentation,markdownDescription:C("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Jo.trimAutoWhitespace,description:C("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Jo.largeFileOptimizations,description:C("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:C("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[C("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),C("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),C("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:C("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[C("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),C("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),C("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:C("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:C("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:C("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:C("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:C("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:C("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:C("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:C("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:C("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:C("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:C("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function WDe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of v1){const e=i.schema;if(typeof e<"u")if(WDe(e))$F.properties[`editor.${i.name}`]=e;else for(let t in e)ODe.call(e,t)&&($F.properties[t]=e[t])}let xR=null;function Xue(){return xR===null&&(xR=Object.create(null),Object.keys($F.properties).forEach(i=>{xR[i]=!0})),xR}function VDe(i){return Xue()[`editor.${i}`]||!1}function HDe(i){return Xue()[`diffEditor.${i}`]||!1}BDe.registerConfiguration($F);class gJ{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function $De(){xb.INSTANCE.clearCache()}class xb extends Oe{constructor(){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._cache=new gJ,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new gJ,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=xb._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new DH({zoomLevel:CF(),pixelRatio:vA(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,r){const s=new bDe(e,t);return n.push(s),r&&r.push(s),s}static _actualReadConfiguration(e){const t=[],n=[],r=this.createRequest("n",0,t,n),s=this.createRequest("",0,t,null),o=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),u=this.createRequest("1",0,t,n),d=this.createRequest("2",0,t,n),h=this.createRequest("3",0,t,n),f=this.createRequest("4",0,t,n),p=this.createRequest("5",0,t,n),m=this.createRequest("6",0,t,n),v=this.createRequest("7",0,t,n),b=this.createRequest("8",0,t,n),L=this.createRequest("9",0,t,n),S=this.createRequest("",0,t,n),y=this.createRequest("",0,t,null),E=this.createRequest("",0,t,n),A=this.createRequest(String.fromCharCode(11825),0,t,null),N="|/-_ilm%";for(let $=0,T=N.length;$<T;$++)this.createRequest(N.charAt($),0,t,n),this.createRequest(N.charAt($),1,t,n),this.createRequest(N.charAt($),2,t,n);CDe(e,t);const V=Math.max(a.width,u.width,d.width,h.width,f.width,p.width,m.width,v.width,b.width,L.width);let M=e.fontFeatureSettings===xu.OFF;const R=n[0].width;for(let $=1,T=n.length;M&&$<T;$++){const O=R-n[$].width;if(O<-.001||O>.001){M=!1;break}}let Y=!0;M&&y.width!==R&&(Y=!1),y.width>S.width&&(Y=!1);const X=Hle()>2e3;return new DH({zoomLevel:CF(),pixelRatio:vA(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:M,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:Y,spaceWidth:o.width,middotWidth:E.width,wsmiddotWidth:A.width,maxDigitWidth:V},X)}}xb.INSTANCE=new xb;let Aa=class Que extends Nq{constructor(e,t,n=null,r){super(e,t),this.accessibilityService=r,this._elementSizeObserver=this._register(new que(n,t.dimension,()=>this._recomputeOptions())),this._register(xb.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(nq(s=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(Kc?jo.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(Kc?jo.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!Kc&&!zle&&(e+="no-user-select "),Kc&&(e+="no-minimap-shadow "),qn&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Que._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:n0||wl,pixelRatio:vA(),zoomLevel:CF(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return xb.INSTANCE.readConfiguration(e)}},Q=class Yo{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return Yo.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Yo.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Yo.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Yo.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Yo.plusRange(this,e)}static plusRange(e,t){let n,r,s,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new Yo(n,r,s,o)}intersectRanges(e){return Yo.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,u=t.startColumn,d=t.endLineNumber,h=t.endColumn;return n<a?(n=a,r=u):n===a&&(r=Math.max(r,u)),s>d?(s=d,o=h):s===d&&(o=Math.min(o,h)),n>s||n===s&&r>o?null:new Yo(n,r,s,o)}equalsRange(e){return Yo.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Yo.getEndPosition(this)}static getEndPosition(e){return new Le(e.endLineNumber,e.endColumn)}getStartPosition(){return Yo.getStartPosition(this)}static getStartPosition(e){return new Le(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Yo(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Yo(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Yo.collapseToStart(this)}static collapseToStart(e){return new Yo(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Yo(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Yo(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,u=t.startColumn|0;if(a===u){const d=e.endLineNumber|0,h=t.endLineNumber|0;if(d===h){const f=e.endColumn|0,p=t.endColumn|0;return f-p}return d-h}return a-u}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}},yt=class Tc extends Q{constructor(e,t,n,r){super(e,t,n,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Tc.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Tc(this.startLineNumber,this.startColumn,e,t):new Tc(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Le(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Le(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Tc(e,t,this.endLineNumber,this.endColumn):new Tc(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Tc(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Tc(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Tc(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Tc(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,r,s){return s===0?new Tc(e,t,n,r):new Tc(n,r,e,t)}};class Jue{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function ii(i){return new Jue(i)}function Is(i,e,t){let n=null,r=null;if(typeof t.value=="function"?(n="value",r=t.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",r=t.get),!r)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[s]}}var zDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},lr;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(lr||(lr={}));class Hi extends Oe{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(Ge(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(Ge(document,"touchend",e=>this.onTouchEnd(e))),this._register(Ge(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Hi.isTouchDevice()?(Hi.INSTANCE||(Hi.INSTANCE=new Hi),Hi.INSTANCE.targets.push(e),{dispose:()=>{Hi.INSTANCE.targets=Hi.INSTANCE.targets.filter(t=>t!==e)}}):Oe.None}static ignoreTarget(e){return Hi.isTouchDevice()?(Hi.INSTANCE||(Hi.INSTANCE=new Hi),Hi.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Hi.INSTANCE.ignoreTargets=Hi.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):Oe.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,r=e.targetTouches.length;n<r;n++){let s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};let o=this.newGestureEvent(lr.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,s=e.changedTouches.length;r<s;r++){let o=e.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],u=Date.now()-a.initialTimeStamp;if(u<Hi.HOLD_DELAY&&Math.abs(a.initialPageX-$u(a.rollingPageX))<30&&Math.abs(a.initialPageY-$u(a.rollingPageY))<30){let d=this.newGestureEvent(lr.Tap,a.initialTarget);d.pageX=$u(a.rollingPageX),d.pageY=$u(a.rollingPageY),this.dispatchEvent(d)}else if(u>=Hi.HOLD_DELAY&&Math.abs(a.initialPageX-$u(a.rollingPageX))<30&&Math.abs(a.initialPageY-$u(a.rollingPageY))<30){let d=this.newGestureEvent(lr.Contextmenu,a.initialTarget);d.pageX=$u(a.rollingPageX),d.pageY=$u(a.rollingPageY),this.dispatchEvent(d)}else if(n===1){let d=$u(a.rollingPageX),h=$u(a.rollingPageY),f=$u(a.rollingTimestamps)-a.rollingTimestamps[0],p=d-a.rollingPageX[0],m=h-a.rollingPageY[0];const v=this.targets.filter(b=>a.initialTarget instanceof Node&&b.contains(a.initialTarget));this.inertia(v,t,Math.abs(p)/f,p>0?1:-1,d,Math.abs(m)/f,m>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(lr.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===lr.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Hi.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===lr.Change||e.type===lr.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,r,s,o,a,u){this.handle=rg(()=>{let d=Date.now(),h=d-t,f=0,p=0,m=!0;n+=Hi.SCROLL_FRICTION*h,o+=Hi.SCROLL_FRICTION*h,n>0&&(m=!1,f=r*n*h),o>0&&(m=!1,p=a*o*h);let v=this.newGestureEvent(lr.Change);v.translationX=f,v.translationY=p,e.forEach(b=>b.dispatchEvent(v)),m||this.inertia(e,d,n,r,s+f,o,a,u+p)})}onTouchMove(e){let t=Date.now();for(let n=0,r=e.changedTouches.length;n<r;n++){let s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}let o=this.activeTouches[s.identifier],a=this.newGestureEvent(lr.Change,o.initialTarget);a.translationX=s.pageX-$u(o.rollingPageX),a.translationY=s.pageY-$u(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Hi.SCROLL_FRICTION=-.005;Hi.HOLD_DELAY=700;Hi.CLEAR_TAP_COUNT_TIME=400;zDe([Is],Hi,"isTouchDevice",null);function WS(i,e){let t=new Qu(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class SC{constructor(){this._hooks=new Je,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,r,s){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=r,this._onStopCallback=s;const o=hH.getSameOriginWindowChain(),a=ng?"pointermove":"mousemove",u="mouseup",d=o.map(f=>f.window.document),h=_0(e);h&&d.unshift(h);for(const f of d)this._hooks.add(hq(f,a,p=>{if(p.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(p)},(p,m)=>this._mouseMoveEventMerger(p,m))),this._hooks.add(Ge(f,u,p=>this.stopMonitoring(!0)));if(hH.hasDifferentOriginAncestor()){let f=o[o.length-1];this._hooks.add(Ge(f.window.document,"mouseout",p=>{new Qu(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(Ge(f.window.document,"mouseover",p=>{new Qu(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(Ge(f.window.document.body,"mouseleave",p=>{this.stopMonitoring(!0)}))}}}function r0(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class fi{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Nh{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=r0(Math.max(Math.min(1,t),0),3),this.l=r0(Math.max(Math.min(1,n),0),3),this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=e.a,o=Math.max(t,n,r),a=Math.min(t,n,r);let u=0,d=0;const h=(a+o)/2,f=o-a;if(f>0){switch(d=Math.min(h<=.5?f/(2*h):f/(2-2*h),1),o){case t:u=(n-r)/f+(n<r?6:0);break;case n:u=(r-t)/f+2;break;case r:u=(t-n)/f+4;break}u*=60,u=Math.round(u)}return new Nh(u,d,h,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:r,a:s}=e;let o,a,u;if(n===0)o=a=u=r;else{const d=r<.5?r*(1+n):r+n-r*n,h=2*r-d;o=Nh._hue2rgb(h,d,t+1/3),a=Nh._hue2rgb(h,d,t),u=Nh._hue2rgb(h,d,t-1/3)}return new fi(Math.round(o*255),Math.round(a*255),Math.round(u*255),s)}}class Gf{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=r0(Math.max(Math.min(1,t),0),3),this.v=r0(Math.max(Math.min(1,n),0),3),this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),o=Math.min(t,n,r),a=s-o,u=s===0?0:a/s;let d;return a===0?d=0:s===t?d=((n-r)/a%6+6)%6:s===n?d=(r-t)/a+2:d=(t-n)/a+4,new Gf(Math.round(d*60),u,s,e.a)}static toRGBA(e){const{h:t,s:n,v:r,a:s}=e,o=r*n,a=o*(1-Math.abs(t/60%2-1)),u=r-o;let[d,h,f]=[0,0,0];return t<60?(d=o,h=a):t<120?(d=a,h=o):t<180?(h=o,f=a):t<240?(h=a,f=o):t<300?(d=a,f=o):t<=360&&(d=o,f=a),d=Math.round((d+u)*255),h=Math.round((h+u)*255),f=Math.round((f+u)*255),new fi(d,h,f,s)}}class ye{constructor(e){if(e)if(e instanceof fi)this.rgba=e;else if(e instanceof Nh)this._hsla=e,this.rgba=Nh.toRGBA(e);else if(e instanceof Gf)this._hsva=e,this.rgba=Gf.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return ye.Format.CSS.parseHex(e)||ye.red}get hsla(){return this._hsla?this._hsla:Nh.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Gf.fromRGBA(this.rgba)}equals(e){return!!e&&fi.equals(this.rgba,e.rgba)&&Nh.equals(this.hsla,e.hsla)&&Gf.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=ye._relativeLuminanceForComponent(this.rgba.r),t=ye._relativeLuminanceForComponent(this.rgba.g),n=ye._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*n;return r0(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new ye(new Nh(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new ye(new Nh(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:r,a:s}=this.rgba;return new ye(new fi(t,n,r,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new ye(new fi(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=ye.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-r)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(r-s)/r,e.darken(n)}}ye.white=new ye(new fi(255,255,255,1));ye.black=new ye(new fi(0,0,0,1));ye.red=new ye(new fi(255,0,0,1));ye.blue=new ye(new fi(0,0,255,1));ye.cyan=new ye(new fi(0,255,255,1));ye.lightgrey=new ye(new fi(211,211,211,1));ye.transparent=new ye(new fi(0,0,0,0));(function(i){(function(e){(function(t){function n(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:i.Format.CSS.formatRGBA(m)}t.formatRGB=n;function r(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}t.formatRGBA=r;function s(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(m)}t.formatHSL=s;function o(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(m){const v=m.toString(16);return v.length!==2?"0"+v:v}function u(m){return`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}`}t.formatHex=u;function d(m,v=!1){return v&&m.rgba.a===1?i.Format.CSS.formatHex(m):`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}${a(Math.round(m.rgba.a*255))}`}t.formatHexA=d;function h(m){return m.isOpaque()?i.Format.CSS.formatHex(m):i.Format.CSS.formatRGBA(m)}t.format=h;function f(m){const v=m.length;if(v===0||m.charCodeAt(0)!==35)return null;if(v===7){const b=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),L=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),S=16*p(m.charCodeAt(5))+p(m.charCodeAt(6));return new i(new fi(b,L,S,1))}if(v===9){const b=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),L=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),S=16*p(m.charCodeAt(5))+p(m.charCodeAt(6)),y=16*p(m.charCodeAt(7))+p(m.charCodeAt(8));return new i(new fi(b,L,S,y/255))}if(v===4){const b=p(m.charCodeAt(1)),L=p(m.charCodeAt(2)),S=p(m.charCodeAt(3));return new i(new fi(16*b+b,16*L+L,16*S+S))}if(v===5){const b=p(m.charCodeAt(1)),L=p(m.charCodeAt(2)),S=p(m.charCodeAt(3)),y=p(m.charCodeAt(4));return new i(new fi(16*b+b,16*L+L,16*S+S,(16*y+y)/255))}return null}t.parseHex=f;function p(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(ye||(ye={}));function ece(i){return`--vscode-${i.replace(".","-")}`}const tce={ColorContribution:"base.contributions.colors"};class UDe{constructor(){this._onDidChangeSchema=new Ce,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,r=!1,s){let o={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:s};this.colorsById[e]=o;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const r=n.defaults[t.type];return Ug(r,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let r=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return r!==s?r-s:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const x8=new UDe;Xr.add(tce.ColorContribution,x8);function we(i,e,t,n,r){return x8.registerColor(i,e,t,n,r)}const zt=we("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},C("foreground","Overall foreground color. This color is only used if not overridden by a component.")),jDe=we("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},C("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),E9=we("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},C("iconForeground","The default color for icons in the workbench.")),Db=we("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},C("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),fs=we("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},C("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Ja=we("contrastActiveBorder",{light:null,dark:null,hc:Db},C("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),D8=we("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},C("textLinkForeground","Foreground color for links in text.")),I8=we("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},C("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),nce=we("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:ye.black},C("textCodeBlockBackground","Background color for code blocks in text.")),w0=we("widget.shadow",{dark:tr(ye.black,.36),light:tr(ye.black,.16),hc:null},C("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Aq=we("input.background",{dark:"#3C3C3C",light:ye.white,hc:ye.black},C("inputBoxBackground","Input box background.")),Oq=we("input.foreground",{dark:zt,light:zt,hc:zt},C("inputBoxForeground","Input box foreground.")),Mq=we("input.border",{dark:null,light:null,hc:fs},C("inputBoxBorder","Input box border.")),IH=we("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:fs},C("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),TH=we("inputOption.activeBackground",{dark:tr(Db,.4),light:tr(Db,.2),hc:ye.transparent},C("inputOption.activeBackground","Background hover color of options in input fields.")),kH=we("inputOption.activeForeground",{dark:ye.white,light:ye.black,hc:null},C("inputOption.activeForeground","Foreground color of activated options in input fields.")),ice=we("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:ye.black},C("inputValidationInfoBackground","Input validation background color for information severity.")),rce=we("inputValidation.infoForeground",{dark:null,light:null,hc:null},C("inputValidationInfoForeground","Input validation foreground color for information severity.")),sce=we("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:fs},C("inputValidationInfoBorder","Input validation border color for information severity.")),oce=we("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:ye.black},C("inputValidationWarningBackground","Input validation background color for warning severity.")),ace=we("inputValidation.warningForeground",{dark:null,light:null,hc:null},C("inputValidationWarningForeground","Input validation foreground color for warning severity.")),lce=we("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:fs},C("inputValidationWarningBorder","Input validation border color for warning severity.")),uce=we("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:ye.black},C("inputValidationErrorBackground","Input validation background color for error severity.")),cce=we("inputValidation.errorForeground",{dark:null,light:null,hc:null},C("inputValidationErrorForeground","Input validation foreground color for error severity.")),dce=we("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:fs},C("inputValidationErrorBorder","Input validation border color for error severity.")),x9=we("dropdown.background",{dark:"#3C3C3C",light:ye.white,hc:ye.black},C("dropdownBackground","Dropdown background.")),pJ=we("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:ye.white},C("dropdownForeground","Dropdown foreground.")),KDe=we("button.foreground",{dark:ye.white,light:ye.white,hc:ye.white},C("buttonForeground","Button foreground color.")),NH=we("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},C("buttonBackground","Button background color.")),qDe=we("button.hoverBackground",{dark:vce(NH,.2),light:_ce(NH,.2),hc:null},C("buttonHoverBackground","Button background color when hovering.")),x2=we("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:ye.black},C("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),D2=we("badge.foreground",{dark:ye.white,light:"#333",hc:ye.white},C("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),VS=we("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},C("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),hy=we("scrollbarSlider.background",{dark:ye.fromHex("#797979").transparent(.4),light:ye.fromHex("#646464").transparent(.4),hc:tr(fs,.6)},C("scrollbarSliderBackground","Scrollbar slider background color.")),fy=we("scrollbarSlider.hoverBackground",{dark:ye.fromHex("#646464").transparent(.7),light:ye.fromHex("#646464").transparent(.7),hc:tr(fs,.8)},C("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),gy=we("scrollbarSlider.activeBackground",{dark:ye.fromHex("#BFBFBF").transparent(.4),light:ye.fromHex("#000000").transparent(.6),hc:fs},C("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),GDe=we("progressBar.background",{dark:ye.fromHex("#0E70C0"),light:ye.fromHex("#0E70C0"),hc:fs},C("progressBarBackground","Background color of the progress bar that can show for long running operations.")),YDe=we("editorError.background",{dark:null,light:null,hc:null},C("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),I2=we("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},C("editorError.foreground","Foreground color of error squigglies in the editor.")),hce=we("editorError.border",{dark:null,light:null,hc:ye.fromHex("#E47777").transparent(.8)},C("errorBorder","Border color of error boxes in the editor.")),ZDe=we("editorWarning.background",{dark:null,light:null,hc:null},C("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),vp=we("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},C("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),T8=we("editorWarning.border",{dark:null,light:null,hc:ye.fromHex("#FFCC00").transparent(.8)},C("warningBorder","Border color of warning boxes in the editor.")),XDe=we("editorInfo.background",{dark:null,light:null,hc:null},C("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),qh=we("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},C("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Rq=we("editorInfo.border",{dark:null,light:null,hc:ye.fromHex("#3794FF").transparent(.8)},C("infoBorder","Border color of info boxes in the editor.")),QDe=we("editorHint.foreground",{dark:ye.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},C("editorHint.foreground","Foreground color of hint squigglies in the editor.")),JDe=we("editorHint.border",{dark:null,light:null,hc:ye.fromHex("#eeeeee").transparent(.8)},C("hintBorder","Border color of hint boxes in the editor.")),sc=we("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:ye.black},C("editorBackground","Editor background color.")),uM=we("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:ye.white},C("editorForeground","Editor default foreground color.")),Gh=we("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},C("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),bp=we("editorWidget.foreground",{dark:zt,light:zt,hc:zt},C("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),QP=we("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:fs},C("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),eIe=we("editorWidget.resizeBorder",{light:null,dark:null,hc:null},C("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),mJ=we("quickInput.background",{dark:Gh,light:Gh,hc:Gh},C("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),tIe=we("quickInput.foreground",{dark:bp,light:bp,hc:bp},C("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),nIe=we("quickInputTitle.background",{dark:new ye(new fi(255,255,255,.105)),light:new ye(new fi(0,0,0,.06)),hc:"#000000"},C("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),iIe=we("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:ye.white},C("pickerGroupForeground","Quick picker color for grouping labels.")),rIe=we("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:ye.white},C("pickerGroupBorder","Quick picker color for grouping borders.")),sIe=we("keybindingLabel.background",{dark:new ye(new fi(128,128,128,.17)),light:new ye(new fi(221,221,221,.4)),hc:ye.transparent},C("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),oIe=we("keybindingLabel.foreground",{dark:ye.fromHex("#CCCCCC"),light:ye.fromHex("#555555"),hc:ye.white},C("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),aIe=we("keybindingLabel.border",{dark:new ye(new fi(51,51,51,.6)),light:new ye(new fi(204,204,204,.4)),hc:new ye(new fi(111,195,223))},C("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),lIe=we("keybindingLabel.bottomBorder",{dark:new ye(new fi(68,68,68,.6)),light:new ye(new fi(187,187,187,.4)),hc:new ye(new fi(111,195,223))},C("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),s0=we("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},C("editorSelectionBackground","Color of the editor selection.")),uIe=we("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},C("editorSelectionForeground","Color of the selected text for high contrast.")),Pq=we("editor.inactiveSelectionBackground",{light:tr(s0,.5),dark:tr(s0,.5),hc:tr(s0,.5)},C("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Fq=we("editor.selectionHighlightBackground",{light:bJ(s0,sc,.3,.6),dark:bJ(s0,sc,.3,.6),hc:null},C("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),cIe=we("editor.selectionHighlightBorder",{light:null,dark:null,hc:Ja},C("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),dIe=we("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},C("editorFindMatch","Color of the current search match.")),AH=we("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},C("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),hIe=we("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},C("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),fIe=we("editor.findMatchBorder",{light:null,dark:null,hc:Ja},C("editorFindMatchBorder","Border color of the current search match.")),gIe=we("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Ja},C("findMatchHighlightBorder","Border color of the other search matches.")),pIe=we("editor.findRangeHighlightBorder",{dark:null,light:null,hc:tr(Ja,.4)},C("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),mIe=we("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},C("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Ib=we("editorHoverWidget.background",{light:Gh,dark:Gh,hc:Gh},C("hoverBackground","Background color of the editor hover.")),Bq=we("editorHoverWidget.foreground",{light:bp,dark:bp,hc:bp},C("hoverForeground","Foreground color of the editor hover.")),Wq=we("editorHoverWidget.border",{light:QP,dark:QP,hc:QP},C("hoverBorder","Border color of the editor hover.")),_Ie=we("editorHoverWidget.statusBarBackground",{dark:vce(Ib,.2),light:_ce(Ib,.05),hc:Gh},C("statusBarBackground","Background color of the editor hover status bar.")),fce=we("editorLink.activeForeground",{dark:"#4E94CE",light:ye.blue,hc:ye.cyan},C("activeLinkForeground","Color of active links.")),Y1=we("editorInlayHint.foreground",{dark:tr(D2,.8),light:tr(D2,.8),hc:D2},C("editorInlayHintForeground","Foreground color of inline hints")),Z1=we("editorInlayHint.background",{dark:tr(x2,.6),light:tr(x2,.3),hc:x2},C("editorInlayHintBackground","Background color of inline hints")),vIe=we("editorInlayHint.typeForeground",{dark:Y1,light:Y1,hc:Y1},C("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),bIe=we("editorInlayHint.typeBackground",{dark:Z1,light:Z1,hc:Z1},C("editorInlayHintBackgroundTypes","Background color of inline hints for types")),CIe=we("editorInlayHint.parameterForeground",{dark:Y1,light:Y1,hc:Y1},C("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),wIe=we("editorInlayHint.parameterBackground",{dark:Z1,light:Z1,hc:Z1},C("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),yIe=we("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},C("editorLightBulbForeground","The color used for the lightbulb actions icon.")),SIe=we("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),OH=new ye(new fi(155,185,85,.2)),MH=new ye(new fi(255,0,0,.2)),gce=we("diffEditor.insertedTextBackground",{dark:OH,light:OH,hc:null},C("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),pce=we("diffEditor.removedTextBackground",{dark:MH,light:MH,hc:null},C("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),LIe=we("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},C("diffEditorInsertedOutline","Outline color for the text that got inserted.")),EIe=we("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},C("diffEditorRemovedOutline","Outline color for text that got removed.")),xIe=we("diffEditor.border",{dark:null,light:null,hc:fs},C("diffEditorBorder","Border color between the two text editors.")),DIe=we("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},C("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),IIe=we("list.focusBackground",{dark:null,light:null,hc:null},C("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),TIe=we("list.focusForeground",{dark:null,light:null,hc:null},C("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),kIe=we("list.focusOutline",{dark:Db,light:Db,hc:Ja},C("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),X1=we("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},C("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),o0=we("list.activeSelectionForeground",{dark:ye.white,light:ye.white,hc:null},C("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JP=we("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},C("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),NIe=we("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},C("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),AIe=we("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},C("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),OIe=we("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},C("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),MIe=we("list.inactiveFocusBackground",{dark:null,light:null,hc:null},C("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),RIe=we("list.inactiveFocusOutline",{dark:null,light:null,hc:null},C("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),PIe=we("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},C("listHoverBackground","List/Tree background when hovering over items using the mouse.")),FIe=we("list.hoverForeground",{dark:null,light:null,hc:null},C("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),BIe=we("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},C("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),D9=we("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:Db},C("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),WIe=we("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:ye.black},C("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),VIe=we("listFilterWidget.outline",{dark:ye.transparent,light:ye.transparent,hc:"#f38518"},C("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),HIe=we("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:fs},C("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),$Ie=we("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},C("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),zIe=we("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},C("tableColumnsBorder","Table border color between columns.")),UIe=we("tree.tableOddRowsBackground",{dark:tr(zt,.04),light:tr(zt,.04),hc:null},C("tableOddRowsBackgroundColor","Background color for odd table rows.")),_J=we("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,C("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),jIe=we("quickInputList.focusForeground",{dark:o0,light:o0,hc:o0},C("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),KIe=we("quickInputList.focusIconForeground",{dark:JP,light:JP,hc:JP},C("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),e4=we("quickInputList.focusBackground",{dark:xA(_J,X1),light:xA(_J,X1),hc:null},C("quickInput.listFocusBackground","Quick picker background color for the focused item.")),qIe=we("menu.border",{dark:null,light:null,hc:fs},C("menuBorder","Border color of menus.")),GIe=we("menu.foreground",{dark:pJ,light:zt,hc:pJ},C("menuForeground","Foreground color of menu items.")),YIe=we("menu.background",{dark:x9,light:x9,hc:x9},C("menuBackground","Background color of menu items.")),ZIe=we("menu.selectionForeground",{dark:o0,light:o0,hc:o0},C("menuSelectionForeground","Foreground color of the selected menu item in menus.")),XIe=we("menu.selectionBackground",{dark:X1,light:X1,hc:X1},C("menuSelectionBackground","Background color of the selected menu item in menus.")),QIe=we("menu.selectionBorder",{dark:null,light:null,hc:Ja},C("menuSelectionBorder","Border color of the selected menu item in menus.")),JIe=we("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:fs},C("menuSeparatorBackground","Color of a separator menu item in menus.")),eTe=we("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},C("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),k8=we("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},C("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),mce=we("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},C("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),tTe=we("editorOverviewRuler.unicodeForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},C("overviewRulerUnicodeForeground","Overview ruler marker color for highlighted unicode characters. The color must not be opaque so as not to hide underlying decorations."),!0),Vq=we("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},C("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),N8=we("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},C("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),vJ=we("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},C("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),nTe=we("minimap.errorHighlight",{dark:new ye(new fi(255,18,18,.7)),light:new ye(new fi(255,18,18,.7)),hc:new ye(new fi(255,50,50,1))},C("minimapError","Minimap marker color for errors.")),iTe=we("minimap.warningHighlight",{dark:vp,light:vp,hc:T8},C("overviewRuleWarning","Minimap marker color for warnings.")),rTe=we("minimap.background",{dark:null,light:null,hc:null},C("minimapBackground","Minimap background color.")),sTe=we("minimap.foregroundOpacity",{dark:ye.fromHex("#000f"),light:ye.fromHex("#000f"),hc:ye.fromHex("#000f")},C("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),oTe=we("minimap.unicodeHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},C("minimapUnicodeHighlight","Minimap marker color for highlighted unicode characters.")),aTe=we("minimapSlider.background",{light:tr(hy,.5),dark:tr(hy,.5),hc:tr(hy,.5)},C("minimapSliderBackground","Minimap slider background color.")),lTe=we("minimapSlider.hoverBackground",{light:tr(fy,.5),dark:tr(fy,.5),hc:tr(fy,.5)},C("minimapSliderHoverBackground","Minimap slider background color when hovering.")),uTe=we("minimapSlider.activeBackground",{light:tr(gy,.5),dark:tr(gy,.5),hc:tr(gy,.5)},C("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),cTe=we("problemsErrorIcon.foreground",{dark:I2,light:I2,hc:I2},C("problemsErrorIconForeground","The color used for the problems error icon.")),dTe=we("problemsWarningIcon.foreground",{dark:vp,light:vp,hc:vp},C("problemsWarningIconForeground","The color used for the problems warning icon.")),hTe=we("problemsInfoIcon.foreground",{dark:qh,light:qh,hc:qh},C("problemsInfoIconForeground","The color used for the problems info icon."));function fTe(i,e){var t,n,r;switch(i.op){case 0:return(t=Ug(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=Ug(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(r=Ug(i.value,e))===null||r===void 0?void 0:r.transparent(i.factor);case 3:for(const a of i.values){const u=Ug(a,e);if(u)return u}return;case 5:return Ug(e.defines(i.if)?i.then:i.else,e);case 4:const s=Ug(i.value,e);if(!s)return;const o=Ug(i.background,e);return o?s.isDarkerThan(o)?ye.getLighterColor(s,o,i.factor).transparent(i.transparency):ye.getDarkerColor(s,o,i.factor).transparent(i.transparency):s.transparent(i.factor*i.transparency);default:throw _ue()}}function _ce(i,e){return{op:0,value:i,factor:e}}function vce(i,e){return{op:1,value:i,factor:e}}function tr(i,e){return{op:2,value:i,factor:e}}function xA(...i){return{op:3,values:i}}function bJ(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function Ug(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?ye.fromHex(i):e.getColor(i);if(i instanceof ye)return i;if(typeof i=="object")return fTe(i,e)}}const bce="vscode://schemas/workbench-colors";let Cce=Xr.as(E8.JSONContribution);Cce.registerSchema(bce,x8.getColorSchema());const CJ=new er(()=>Cce.notifySchemaChanged(bce),200);x8.onDidChangeSchema(()=>{CJ.isScheduled()||CJ.schedule()});class Hq{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new wce(this.x-pp.scrollX,this.y-pp.scrollY)}}class wce{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new Hq(this.clientX+pp.scrollX,this.clientY+pp.scrollY)}}class gTe{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r,this._editorPagePositionBrand=void 0}}function yce(i){const e=Uo(i);return new gTe(e.left,e.top,e.width,e.height)}class Tb extends Qu{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new Hq(this.posx,this.posy),this.editorPos=yce(t)}}class pTe{constructor(e){this._editorViewDomNode=e}_create(e){return new Tb(e,this._editorViewDomNode)}onContextMenu(e,t){return Ge(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return Ge(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return Ge(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return dq(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,r){return hq(e,"mousemove",t,(o,a)=>n(o,this._create(a)),r)}}class mTe{constructor(e){this._editorViewDomNode=e}_create(e){return new Tb(e,this._editorViewDomNode)}onPointerUp(e,t){return Ge(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return Ge(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return CEe(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,r){return hq(e,"pointermove",t,(o,a)=>n(o,this._create(a)),r)}}class _Te extends Oe{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new SC),this._keydownListener=null}startMonitoring(e,t,n,r,s){this._keydownListener=eo(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,u)=>n(a,new Tb(u,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,r,a=>{this._keydownListener.dispose(),s(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class Sce{constructor(e){this._editor=e,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new er(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const r=this._counter++;n=new vTe(t,`dyn-rule-${r}`,h8(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class vTe{constructor(e,t,n,r){this.key=e,this.className=t,this.properties=r,this._referenceCount=0,this._styleElement=uc(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const r in t){const s=t[r];let o;typeof s=="object"?o=`var(${ece(s.id)})`:o=s;const a=bTe(r);n+=`
	${a}: ${o};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function bTe(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class cM extends Oe{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,r=e.length;n<r;n++){let s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class vc extends cM{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class ag{static write(e,t){e instanceof Jue,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],r=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[r++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(r);for(let o=0;o<r;o++)s[o]=n[r-o-1];return s}}class CTe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class wTe extends CTe{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class yTe{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class A8{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const s=e[n];t[n]=new A8(s.left,s.width)}return t}toString(){return`[${this.left},${this.width}]`}}class py{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class STe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class LTe{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class I9{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,r,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,r),o.getClientRects()}catch{return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(py.compare);let t=[],n=0,r=e[0];for(let s=1,o=e.length;s<o;s++){const a=e[s];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[n++]=r,r=a)}return t[n++]=r,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n[r]=new py(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,r,s,o,a){const d=e.children.length-1;if(0>d)return null;if(t=Math.min(d,Math.max(0,t)),r=Math.min(d,Math.max(0,r)),t===r&&n===s&&n===0&&!e.children[t].firstChild){const m=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(m,o)}t!==r&&r>0&&s===0&&(r--,s=1073741824);let h=e.children[t].firstChild,f=e.children[r].firstChild;if((!h||!f)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!f&&s===0&&r>0&&(f=e.children[r-1].firstChild,s=1073741824)),!h||!f)return null;n=Math.min(h.textContent.length,Math.max(0,n)),s=Math.min(f.textContent.length,Math.max(0,s));const p=this._readClientRects(h,n,f,s,a);return this._createHorizontalRangesFromClientRects(p,o)}}class ku{constructor(e,t,n,r){this.startColumn=e,this.endColumn=t,this.className=n,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,r=t.length;if(n!==r)return!1;for(let s=0;s<n;s++)if(!ku._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const r=t+1,s=n+1,o=n-t,a=[];let u=0;for(const d of e)d.endColumn<=r||d.startColumn>=s||(a[u++]=new ku(Math.max(1,d.startColumn-r+1),Math.min(o+1,d.endColumn-r+1),d.className,d.type));return a}static filter(e,t,n,r){if(e.length===0)return[];let s=[],o=0;for(let a=0,u=e.length;a<u;a++){const d=e[a],h=d.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(d.type===0||d.type===3))continue;const f=h.startLineNumber===t?h.startColumn:n,p=h.endLineNumber===t?h.endColumn:r;s[o++]=new ku(f,p,d.inlineClassName,d.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=ku._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class wJ{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=r}}let ETe=class RH{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,r=e.length;n<r;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let r=0;for(;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;n.push(new wJ(t,this.stopOffsets[r],this.classNames.join(" "),RH._metadata(this.metadata))),t=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&t<e&&(n.push(new wJ(t,e-1,this.classNames.join(" "),RH._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,n);break}this.count++}};class xTe{static normalize(e,t){if(t.length===0)return[];let n=[];const r=new ETe;let s=0;for(let o=0,a=t.length;o<a;o++){const u=t[o];let d=u.startColumn,h=u.endColumn;const f=u.className,p=u.type===1?2:u.type===2?4:0;if(d>1){const b=e.charCodeAt(d-2);Ws(b)&&d--}if(h>1){const b=e.charCodeAt(h-2);Ws(b)&&h--}const m=d-1,v=h-2;s=r.consumeLowerThan(m,s,n),r.count===0&&(s=m),r.insert(v,f,p)}return r.consumeLowerThan(1073741824,s,n),n}}const yJ=typeof Buffer<"u";let T9;class O8{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return yJ&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new O8(e)}toString(){return yJ?this.buffer.toString():(T9||(T9=new TextDecoder),T9.decode(this.buffer))}}function DTe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function ITe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function Ch(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function wh(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function SJ(i,e){return i[e]}function LJ(i,e,t){i[t]=e}let k9;function Lce(){return k9||(k9=new TextDecoder("UTF-16LE")),k9}let N9;function TTe(){return N9||(N9=new TextDecoder("UTF-16BE")),N9}let A9;function Ece(){return A9||(A9=Vle()?Lce():TTe()),A9}const xce=typeof TextDecoder<"u";let kb,PH;xce?(kb=i=>new NTe(i),PH=kTe):(kb=i=>new ATe,PH=Dce);function kTe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?Dce(i,e,t):Lce().decode(n)}function Dce(i,e,t){let n=[],r=0;for(let s=0;s<t;s++){const o=DTe(i,e);e+=2,n[r++]=String.fromCharCode(o)}return n.join("")}class NTe{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Ece().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Ws(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class ATe{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Qs{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class OTe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class LC{constructor(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b,L,S,y,E){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=r,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=u,this.lineDecorations=d.sort(ku.compare),this.tabSize=h,this.startVisibleColumn=f,this.spaceWidth=p,this.stopRenderingLineAfter=b,this.renderWhitespace=L==="all"?4:L==="boundary"?1:L==="selection"?2:L==="trailing"?3:0,this.renderControlCharacters=S,this.fontLigatures=y,this.selectionsOnLine=E&&E.sort((V,M)=>V.startOffset<M.startOffset?-1:1);const A=Math.abs(v-p),N=Math.abs(m-p);A<N?(this.renderSpaceWidth=v,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=m,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ku.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class $q{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Tf{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,r){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._absoluteOffsets[e-1]=r+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=Tf.getPartIndex(t),r=Tf.getCharIndex(t);return new $q(n,r)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let r=(e<<16|n<<0)>>>0,s=0,o=this.length-1;for(;s+1<o;){let b=s+o>>>1,L=this._data[b];if(L===r)return b;L>r?o=b:s=b}if(s===o)return s;let a=this._data[s],u=this._data[o];if(a===r)return s;if(u===r)return o;let d=Tf.getPartIndex(a),h=Tf.getCharIndex(a),f=Tf.getPartIndex(u),p;d!==f?p=t:p=Tf.getCharIndex(u);let m=n-h,v=p-n;return m<=v?s:o}}class FH{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function M8(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,r=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(r|=1,t++),o.type===2&&(r|=2,n++));e.appendASCIIString("</span>");const s=new Tf(1,t+n);return s.setColumnInfo(1,t,0,0),new FH(s,!1,r)}return e.appendASCIIString("<span><span></span></span>"),new FH(new Tf(0,0),!1,0)}return $Te(PTe(i),e)}class MTe{constructor(e,t,n,r){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=r}}function R8(i){let e=kb(1e4),t=M8(i,e);return new MTe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class RTe{constructor(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=r,this.isOverflowing=s,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=u,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=f,this.spaceWidth=p,this.renderSpaceCharCode=m,this.renderWhitespace=v,this.renderControlCharacters=b}}function PTe(i){const e=i.lineContent;let t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let r=FTe(i.lineTokens,i.fauxIndentLength,n);i.renderControlCharacters&&!i.isBasicASCII&&(r=WTe(e,r)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(r=VTe(i,e,n,r));let s=0;if(i.lineDecorations.length>0){for(let o=0,a=i.lineDecorations.length;o<a;o++){const u=i.lineDecorations[o];u.type===3||u.type===1?s|=1:u.type===2&&(s|=2)}r=HTe(e,n,r,i.lineDecorations)}return i.containsRTL||(r=BTe(e,r,!i.isBasicASCII||i.fontLigatures)),new RTe(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,r,s,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function FTe(i,e,t){let n=[],r=0;e>0&&(n[r++]=new Qs(e,"",0));for(let s=0,o=i.getCount();s<o;s++){const a=i.getEndOffset(s);if(a<=e)continue;const u=i.getClassName(s);if(a>=t){n[r++]=new Qs(t,u,0);break}n[r++]=new Qs(a,u,0)}return n}function BTe(i,e,t){let n=0,r=[],s=0;if(t)for(let o=0,a=e.length;o<a;o++){const u=e[o],d=u.endIndex;if(n+50<d){const h=u.type,f=u.metadata;let p=-1,m=n;for(let v=n;v<d;v++)i.charCodeAt(v)===32&&(p=v),p!==-1&&v-m>=50&&(r[s++]=new Qs(p+1,h,f),m=p+1,p=-1);m!==d&&(r[s++]=new Qs(d,h,f))}else r[s++]=u;n=d}else for(let o=0,a=e.length;o<a;o++){const u=e[o],d=u.endIndex;let h=d-n;if(h>50){const f=u.type,p=u.metadata,m=Math.ceil(h/50);for(let v=1;v<m;v++){let b=n+v*50;r[s++]=new Qs(b,f,p)}r[s++]=new Qs(d,f,p)}else r[s++]=u;n=d}return r}function Ice(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function WTe(i,e){let t=[],n=new Qs(0,"",0),r=0;for(const s of e){const o=s.endIndex;for(;r<o;r++){const a=i.charCodeAt(r);Ice(a)&&(r>n.endIndex&&(n=new Qs(r,s.type,s.metadata),t.push(n)),n=new Qs(r+1,"mtkcontrol",s.metadata),t.push(n))}r>n.endIndex&&(n=new Qs(o,s.type,s.metadata),t.push(n))}return t}function VTe(i,e,t,n){const r=i.continuesWithWrappedLine,s=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,u=i.useMonospaceOptimizations,d=i.selectionsOnLine,h=i.renderWhitespace===1,f=i.renderWhitespace===3,p=i.renderSpaceWidth!==i.spaceWidth;let m=[],v=0,b=0,L=n[b].type,S=n[b].endIndex;const y=n.length;let E=!1,A=Ta(e),N;A===-1?(E=!0,A=t,N=t):N=Qf(e);let V=!1,M=0,R=d&&d[M],Y=a%o;for(let $=s;$<t;$++){const T=e.charCodeAt($);R&&$>=R.endOffset&&(M++,R=d&&d[M]);let O;if($<A||$>N)O=!0;else if(T===9)O=!0;else if(T===32)if(h)if(V)O=!0;else{const B=$+1<t?e.charCodeAt($+1):0;O=B===32||B===9}else O=!0;else O=!1;if(O&&d&&(O=!!R&&R.startOffset<=$&&R.endOffset>$),O&&f&&(O=E||$>N),V){if(!O||!u&&Y>=o){if(p){const B=v>0?m[v-1].endIndex:s;for(let W=B+1;W<=$;W++)m[v++]=new Qs(W,"mtkw",1)}else m[v++]=new Qs($,"mtkw",1);Y=Y%o}}else($===S||O&&$>s)&&(m[v++]=new Qs($,L,0),Y=Y%o);for(T===9?Y=o:og(T)?Y+=2:Y++,V=O;$===S&&(b++,b<y);)L=n[b].type,S=n[b].endIndex}let X=!1;if(V)if(r&&h){let $=t>0?e.charCodeAt(t-1):0,T=t>1?e.charCodeAt(t-2):0;$===32&&T!==32&&T!==9||(X=!0)}else X=!0;if(X)if(p){const $=v>0?m[v-1].endIndex:s;for(let T=$+1;T<=t;T++)m[v++]=new Qs(T,"mtkw",1)}else m[v++]=new Qs(t,"mtkw",1);else m[v++]=new Qs(t,L,0);return m}function HTe(i,e,t,n){n.sort(ku.compare);const r=xTe.normalize(i,n),s=r.length;let o=0,a=[],u=0,d=0;for(let f=0,p=t.length;f<p;f++){const m=t[f],v=m.endIndex,b=m.type,L=m.metadata;for(;o<s&&r[o].startOffset<v;){const S=r[o];if(S.startOffset>d&&(d=S.startOffset,a[u++]=new Qs(d,b,L)),S.endOffset+1<=v)d=S.endOffset+1,a[u++]=new Qs(d,b+" "+S.className,L|S.metadata),o++;else{d=v,a[u++]=new Qs(d,b+" "+S.className,L|S.metadata);break}}v>d&&(d=v,a[u++]=new Qs(d,b,L))}const h=t[t.length-1].endIndex;if(o<s&&r[o].startOffset===h)for(;o<s&&r[o].startOffset===h;){const f=r[o];a[u++]=new Qs(d,f.className,f.metadata),o++}return a}function $Te(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,r=i.containsForeignElements,s=i.lineContent,o=i.len,a=i.isOverflowing,u=i.parts,d=i.fauxIndentLength,h=i.tabSize,f=i.startVisibleColumn,p=i.containsRTL,m=i.spaceWidth,v=i.renderSpaceCharCode,b=i.renderWhitespace,L=i.renderControlCharacters,S=new Tf(o+1,u.length);let y=!1,E=0,A=f,N=0,V=0,M=0,R=0;p?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let Y=0,X=u.length;Y<X;Y++){R+=M;const $=u[Y],T=$.endIndex,O=$.type,B=b!==0&&$.isWhitespace(),W=B&&!t&&(O==="mtkw"||!r),j=E===T&&$.isPseudoAfter();if(N=0,e.appendASCIIString('<span class="'),e.appendASCIIString(W?"mtkz":O),e.appendASCII(34),B){let U=0;{let q=E,z=A;for(;q<T;q++){const K=(s.charCodeAt(q)===9?h-z%h:1)|0;U+=K,q>=d&&(z+=K)}}for(W&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(m*U)),e.appendASCIIString('px"')),e.appendASCII(62);E<T;E++){S.setColumnInfo(E+1,Y-V,N,R),V=0;const q=s.charCodeAt(E);let z;if(q===9){z=h-A%h|0,!n||z>1?e.write1(8594):e.write1(65515);for(let k=2;k<=z;k++)e.write1(160)}else z=1,e.write1(v);N+=z,E>=d&&(A+=z)}M=U}else{let U=0;for(e.appendASCII(62);E<T;E++){S.setColumnInfo(E+1,Y-V,N,R),V=0;const q=s.charCodeAt(E);let z=1,k=1;switch(q){case 9:z=h-A%h,k=z;for(let K=1;K<=z;K++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:L?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:og(q)&&k++,L&&q<32?e.write1(9216+q):L&&q===127?e.write1(9249):L&&Ice(q)?(e.appendASCIIString("[U+"),e.appendASCIIString(zTe(q)),e.appendASCIIString("]"),z=8):e.write1(q)}N+=z,U+=z,E>=d&&(A+=k)}M=U}j?V++:V=0,E>=o&&!y&&$.isPseudoAfter()&&(y=!0,S.setColumnInfo(E+1,Y,N,R)),e.appendASCIIString("</span>")}return y||S.setColumnInfo(o+1,u.length-1,N,R),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new FH(S,p,r)}function zTe(i){return i.toString(16).toUpperCase().padStart(4,"0")}const UTe=function(){return Kh?!0:!(Xa||wl||Kc)}();let my=!0;class EJ{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class xJ{constructor(e,t){this.themeType=t;const n=e.options,r=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Pf{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ii(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Xc.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),o=this._options,a=ku.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let u=null;if(o.themeType===Xc.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const p=n.selections;for(const m of p){if(m.endLineNumber<e||m.startLineNumber>e)continue;const v=m.startLineNumber===e?m.startColumn:s.minColumn,b=m.endLineNumber===e?m.endColumn:s.maxColumn;v<b&&(o.themeType===Xc.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new ku(v,b,"inline-selected-text",0)):(u||(u=[]),u.push(new OTe(v-1,b-1))))}}const d=new LC(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==xu.OFF,u);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;r.appendASCIIString('<div style="top:'),r.appendASCIIString(String(t)),r.appendASCIIString("px;height:"),r.appendASCIIString(String(this._options.lineHeight)),r.appendASCIIString('px;" class="'),r.appendASCIIString(Pf.CLASS_NAME),r.appendASCIIString('">');const h=M8(d,r);r.appendASCIIString("</div>");let f=null;return my&&UTe&&s.isBasicASCII&&o.useMonospaceOptimizations&&h.containsForeignElements===0&&s.content.length<300&&d.lineTokens.getCount()<100&&(f=new DR(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping)),f||(f=kce(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=f,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof DR:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof DR?this._renderedViewLine.monospaceAssumptionsAreValid():my}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof DR&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,r){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;let o=!1;s!==-1&&t>s+1&&n>s+1&&(o=!0),s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,r);return a&&a.length>0?new LTe(o,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}Pf.CLASS_NAME="view-line";class DR{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return my;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),my=!1),my}toSlowRenderedLine(){return kce(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,r){const s=this._getCharPosition(t),o=this._getCharPosition(n);return[new py(s,o-s)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const r=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new $q(s,n),r)}}class Tce{constructor(e,t,n,r,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,r);if(s===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,r);return o===-1?null:[new py(s,o-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,r)}_readVisibleRangesForRange(e,t,n,r,s){if(n===r){const o=this._readPixelOffset(e,t,n,s);return o===-1?null:[new py(o,0)]}else return this._readRawVisibleRangesForRange(e,n,r,s)}_readPixelOffset(e,t,n,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const s=this._getReadingTarget(e);return s.firstChild?s.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const o=this._actualReadPixelOffset(e,t,n,r);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,r)}_actualReadPixelOffset(e,t,n,r){if(this._characterMapping.length===0){const u=I9.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r.clientRectDeltaLeft,r.endNode);return!u||u.length===0?-1:u[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const s=this._characterMapping.getDomPosition(n),o=I9.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,r.clientRectDeltaLeft,r.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const u=this._characterMapping.getAbsoluteOffset(n),d=Math.round(this.input.spaceWidth*u);if(Math.abs(d-a)<=1)return d}return a}_readRawVisibleRangesForRange(e,t,n,r){if(t===1&&n===this._characterMapping.length)return[new py(0,this.getWidth())];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return I9.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,r.clientRectDeltaLeft,r.endNode)}getColumnOfNodeOffset(e,t,n){const r=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new $q(s,n),r)}}class jTe extends Tce{_readVisibleRangesForRange(e,t,n,r,s){const o=super._readVisibleRangesForRange(e,t,n,r,s);if(!o||o.length===0||n===r||n===1&&r===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,r,s);if(a!==-1){const u=o[o.length-1];u.left<a&&(u.width=a-u.left)}}return o}}const kce=function(){return n0?KTe:qTe}();function KTe(i,e,t,n,r){return new jTe(i,e,t,n,r)}function qTe(i,e,t,n,r){return new Tce(i,e,t,n,r)}var yl;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(yl||(yl={}));var bl;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(bl||(bl={}));class t4{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Qc(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class DA{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Q1;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(Q1||(Q1={}));class Mw{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class BH{constructor(e,t){this.top=e,this.endColumn=t}}class O9{constructor(e,t,n,r,s,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class GTe{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function IR(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Do{constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${IR(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${IR(this.oldText)}")`:`(replace@${this.oldPosition} "${IR(this.oldText)}" with "${IR(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const r=t.length;wh(e,r,n),n+=4;for(let s=0;s<r;s++)ITe(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=Ch(e,t);return t+=4,PH(e,t,n)}writeSize(){return 4+4+Do._writeStringSize(this.oldText)+Do._writeStringSize(this.newText)}write(e,t){return wh(e,this.oldPosition,t),t+=4,wh(e,this.newPosition,t),t+=4,t=Do._writeString(e,this.oldText,t),t=Do._writeString(e,this.newText,t),t}static read(e,t,n){const r=Ch(e,t);t+=4;const s=Ch(e,t);t+=4;const o=Do._readString(e,t);t+=Do._writeStringSize(o);const a=Do._readString(e,t);return t+=Do._writeStringSize(a),n.push(new Do(r,o,s,a)),t}}function YTe(i,e){return i===null||i.length===0?e:new Lf(i,e).compress()}class Lf{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(r),r=this._getCurr(++t);continue}if(r===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldEnd<=n.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(n.newEnd<=r.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldPosition<n.newPosition){const[d,h]=Lf._splitCurr(r,n.newPosition-r.oldPosition);this._acceptCurr(d),r=h;continue}if(n.newPosition<r.oldPosition){const[d,h]=Lf._splitPrev(n,r.oldPosition-n.newPosition);this._acceptPrev(d),n=h;continue}let a,u;if(r.oldEnd===n.newEnd)a=n,u=r,n=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<n.newEnd){const[d,h]=Lf._splitPrev(n,r.oldLength);a=d,u=r,n=h,r=this._getCurr(++t)}else{const[d,h]=Lf._splitCurr(r,n.newLength);a=n,u=d,n=this._getPrev(++e),r=h}this._result[this._resultLen++]=new Do(a.oldPosition,a.oldText,u.newPosition,u.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=u.newLength-u.oldLength}const s=Lf._merge(this._result);return Lf._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Lf._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Lf._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Do(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Do(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),r=e.newText.substr(t);return[new Do(e.oldPosition,e.oldText,e.newPosition,n),new Do(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new Do(e.oldPosition,n,e.newPosition,e.newText),new Do(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,r=e[0];for(let s=1;s<e.length;s++){const o=e[s];r.oldEnd===o.oldPosition?r=new Do(r.oldPosition,r.oldText+o.oldText,r.newPosition,r.newText+o.newText):(t[n++]=r,r=o)}return t[n++]=r,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let r=0;r<e.length;r++){const s=e[r];s.oldText!==s.newText&&(t[n++]=s)}return t}}function ZTe(i){return i.replace(/[\\/]/g,xs.sep)}function XTe(i){return i.indexOf("/")===-1&&(i=ZTe(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function QTe(i,e,t,n=q1){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!bq(i,e))return!1;if(e.length===i.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,i.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function JTe(i){return i>=65&&i<=90||i>=97&&i<=122}function eke(i){const e=lq(i);return Ao?i.length>3?!1:Nce(e)&&(i.length===2||e.charCodeAt(2)===92):e===xs.sep}function Nce(i,e){return(e!==void 0?e:Ao)?JTe(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function n4(i){return SF(i,!0)}class tke{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:yA(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return rn.joinPath(e,...t)}basenameOrAuthority(e){return fc(e)||e.authority}basename(e){return xs.basename(e.path)}extname(e){return xs.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Tn.file?t=rn.file(Xle(n4(e))).path:(t=xs.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Tn.file?t=rn.file(lq(n4(e))).path:t=xs.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===Tn.file){const n=rn.file(aEe(n4(e),t));return e.with({authority:n.authority,path:n.path})}return t=XTe(t),e.with({path:xs.resolve(e.path,t)})}}const aa=new tke(()=>!1),Ace=aa.isEqual.bind(aa),Oce=aa.basenameOrAuthority.bind(aa),fc=aa.basename.bind(aa),nke=aa.extname.bind(aa),zq=aa.dirname.bind(aa),ike=aa.joinPath.bind(aa),rke=aa.normalizePath.bind(aa),DJ=aa.resolvePath.bind(aa);var y0;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,u]=o.split(":");a&&u&&n.set(a,u)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(i.META_DATA_MIME,s),n}i.parseMetaData=e})(y0||(y0={}));function qC(i){return i.toString()}class qs{constructor(e,t,n,r,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),r=WH(e);return new qs(n,n,r,r,t,t,[])}append(e,t,n,r,s){t.length>0&&(this.changes=YTe(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(wh(e,t?t.length:0,n),n+=4,t)for(const r of t)wh(e,r.selectionStartLineNumber,n),n+=4,wh(e,r.selectionStartColumn,n),n+=4,wh(e,r.positionLineNumber,n),n+=4,wh(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const r=Ch(e,t);t+=4;for(let s=0;s<r;s++){const o=Ch(e,t);t+=4;const a=Ch(e,t);t+=4;const u=Ch(e,t);t+=4;const d=Ch(e,t);t+=4,n.push(new yt(o,a,u,d))}return t}serialize(){let e=10+qs._writeSelectionsSize(this.beforeCursorState)+qs._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)e+=r.writeSize();const t=new Uint8Array(e);let n=0;wh(t,this.beforeVersionId,n),n+=4,wh(t,this.afterVersionId,n),n+=4,LJ(t,this.beforeEOL,n),n+=1,LJ(t,this.afterEOL,n),n+=1,n=qs._writeSelections(t,this.beforeCursorState,n),n=qs._writeSelections(t,this.afterCursorState,n),wh(t,this.changes.length,n),n+=4;for(const r of this.changes)n=r.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const r=Ch(t,n);n+=4;const s=Ch(t,n);n+=4;const o=SJ(t,n);n+=1;const a=SJ(t,n);n+=1;const u=[];n=qs._readSelections(t,n,u);const d=[];n=qs._readSelections(t,n,d);const h=Ch(t,n);n+=4;const f=[];for(let p=0;p<h;p++)n=Do.read(t,n,f);return new qs(r,s,o,a,u,d,f)}}class Mce{constructor(e,t){this.model=e,this._data=qs.create(e,t)}get type(){return 0}get resource(){return rn.isUri(this.model)?this.model:this.model.uri}get label(){return C("edit","Typing")}toString(){return(this._data instanceof qs?this._data:qs.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(rn.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof qs}append(e,t,n,r,s){this._data instanceof qs&&this._data.append(e,t,n,r,s)}close(){this._data instanceof qs&&(this._data=this._data.serialize())}open(){this._data instanceof qs||(this._data=qs.deserialize(this._data))}undo(){if(rn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof qs&&(this._data=this._data.serialize());const e=qs.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(rn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof qs&&(this._data=this._data.serialize());const e=qs.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof qs&&(this._data=this._data.serialize()),this._data.byteLength+168}}class ske{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const r=qC(n.resource);this._editStackElementsMap.set(r,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=qC(e);return this._editStackElementsMap.has(t)}setModel(e){const t=qC(rn.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=qC(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,r,s){const o=qC(e.uri);this._editStackElementsMap.get(o).append(e,t,n,r,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=qC(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${fc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function WH(i){return i.getEOL()===`
`?0:1}function Qg(i){return i?i instanceof Mce||i instanceof ske:!1}class Uq{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Qg(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Qg(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Qg(t)&&t.canAppend(this._model))return t;const n=new Mce(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],WH(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const r=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),o=Uq._computeCursorState(n,s),a=s.map((u,d)=>({index:d,textChange:u.textChange}));return a.sort((u,d)=>u.textChange.oldPosition===d.textChange.oldPosition?u.index-d.index:u.textChange.oldPosition-d.textChange.oldPosition),r.append(this._model,a.map(u=>u.textChange),WH(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return gn(n),null}}}class oke{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function ake(i,e,t,n,r){r.spacesDiff=0,r.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){let p=i.charCodeAt(s),m=t.charCodeAt(s);if(p!==m)break}let o=0,a=0;for(let p=s;p<e;p++)i.charCodeAt(p)===32?o++:a++;let u=0,d=0;for(let p=s;p<n;p++)t.charCodeAt(p)===32?u++:d++;if(o>0&&a>0||u>0&&d>0)return;let h=Math.abs(a-d),f=Math.abs(o-u);if(h===0){r.spacesDiff=f,f>0&&0<=u-1&&u-1<i.length&&u<t.length&&t.charCodeAt(u)!==32&&i.charCodeAt(u-1)===32&&i.charCodeAt(i.length-1)===44&&(r.looksLikeAlignment=!0);return}if(f%h===0){r.spacesDiff=f/h;return}}function IJ(i,e,t){const n=Math.min(i.getLineCount(),1e4);let r=0,s=0,o="",a=0;const u=[2,4,6,8,3,5,7],d=8;let h=[0,0,0,0,0,0,0,0,0],f=new oke;for(let v=1;v<=n;v++){let b=i.getLineLength(v),L=i.getLineContent(v);const S=b<=65536;let y=!1,E=0,A=0,N=0;for(let M=0,R=b;M<R;M++){let Y=S?L.charCodeAt(M):i.getLineCharCode(v,M);if(Y===9)N++;else if(Y===32)A++;else{y=!0,E=M;break}}if(!y||(N>0?r++:A>1&&s++,ake(o,a,L,E,f),f.looksLikeAlignment&&!(t&&e===f.spacesDiff)))continue;let V=f.spacesDiff;V<=d&&h[V]++,o=L,a=E}let p=t;r!==s&&(p=r<s);let m=e;if(p){let v=p?0:.1*n;u.forEach(b=>{let L=h[b];L>v&&(v=L,m=b)}),m===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(m=2)}return{insertSpaces:p,tabSize:m}}function Ha(i){return(i.metadata&1)>>>0}function sr(i,e){i.metadata=i.metadata&254|e<<0}function No(i){return(i.metadata&2)>>>1===1}function Ji(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function Rce(i){return(i.metadata&4)>>>2===1}function TJ(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function lke(i){return(i.metadata&24)>>>3}function kJ(i,e){i.metadata=i.metadata&231|e<<3}function uke(i){return(i.metadata&32)>>>5===1}function NJ(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class Pce{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,sr(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,TJ(this,!1),kJ(this,1),NJ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Ji(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;let t=this.options.className;TJ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),kJ(this,this.options.stickiness),NJ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const yn=new Pce(null,0,0);yn.parent=yn;yn.left=yn;yn.right=yn;sr(yn,0);class M9{constructor(){this.root=yn,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,s){return this.root===yn?[]:_ke(this,e,t,n,r,s)}search(e,t,n){return this.root===yn?[]:mke(this,e,t,n)}collectNodesFromOwner(e){return gke(this,e)}collectNodesPostOrder(){return pke(this)}insert(e){AJ(this,e),this._normalizeDeltaIfNecessary()}delete(e){OJ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const s=n.start+r,o=n.end+r;n.setCachedOffsets(s,o,t)}acceptReplace(e,t,n,r){const s=hke(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const u=s[o];OJ(this,u)}this._normalizeDeltaIfNecessary(),fke(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const u=s[o];u.start=u.cachedAbsoluteStart,u.end=u.cachedAbsoluteEnd,dke(u,e,e+t,n,r),u.maxEnd=u.end,AJ(this,u)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,cke(this))}}function cke(i){let e=i.root,t=0;for(;e!==yn;){if(e.left!==yn&&!No(e.left)){e=e.left;continue}if(e.right!==yn&&!No(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,S0(e),Ji(e,!0),Ji(e.left,!1),Ji(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ji(i.root,!1)}function GC(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function dke(i,e,t,n,r){const s=lke(i),o=s===0||s===2,a=s===1||s===2,u=t-e,d=n,h=Math.min(u,d),f=i.start;let p=!1;const m=i.end;let v=!1;e<=f&&m<=t&&uke(i)&&(i.start=e,p=!0,i.end=e,v=!0);{const L=r?1:u>0?2:0;!p&&GC(f,o,e,L)&&(p=!0),!v&&GC(m,a,e,L)&&(v=!0)}if(h>0&&!r){const L=u>d?2:0;!p&&GC(f,o,e+h,L)&&(p=!0),!v&&GC(m,a,e+h,L)&&(v=!0)}{const L=r?1:0;!p&&GC(f,o,t,L)&&(i.start=e+d,p=!0),!v&&GC(m,a,t,L)&&(i.end=e+d,v=!0)}const b=d-u;p||(i.start=Math.max(0,f+b)),v||(i.end=Math.max(0,m+b)),i.start>i.end&&(i.end=i.start)}function hke(i,e,t){let n=i.root,r=0,s=0,o=0,a=0,u=[],d=0;for(;n!==yn;){if(No(n)){Ji(n.left,!1),Ji(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),n=n.parent;continue}if(!No(n.left)){if(s=r+n.maxEnd,s<e){Ji(n,!0);continue}if(n.left!==yn){n=n.left;continue}}if(o=r+n.start,o>t){Ji(n,!0);continue}if(a=r+n.end,a>=e&&(n.setCachedOffsets(o,a,0),u[d++]=n),Ji(n,!0),n.right!==yn&&!No(n.right)){r+=n.delta,n=n.right;continue}}return Ji(i.root,!1),u}function fke(i,e,t,n){let r=i.root,s=0,o=0,a=0;const u=n-(t-e);for(;r!==yn;){if(No(r)){Ji(r.left,!1),Ji(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),S0(r),r=r.parent;continue}if(!No(r.left)){if(o=s+r.maxEnd,o<e){Ji(r,!0);continue}if(r.left!==yn){r=r.left;continue}}if(a=s+r.start,a>t){r.start+=u,r.end+=u,r.delta+=u,(r.delta<-1073741824||r.delta>1073741824)&&(i.requestNormalizeDelta=!0),Ji(r,!0);continue}if(Ji(r,!0),r.right!==yn&&!No(r.right)){s+=r.delta,r=r.right;continue}}Ji(i.root,!1)}function gke(i,e){let t=i.root,n=[],r=0;for(;t!==yn;){if(No(t)){Ji(t.left,!1),Ji(t.right,!1),t=t.parent;continue}if(t.left!==yn&&!No(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[r++]=t),Ji(t,!0),t.right!==yn&&!No(t.right)){t=t.right;continue}}return Ji(i.root,!1),n}function pke(i){let e=i.root,t=[],n=0;for(;e!==yn;){if(No(e)){Ji(e.left,!1),Ji(e.right,!1),e=e.parent;continue}if(e.left!==yn&&!No(e.left)){e=e.left;continue}if(e.right!==yn&&!No(e.right)){e=e.right;continue}t[n++]=e,Ji(e,!0)}return Ji(i.root,!1),t}function mke(i,e,t,n){let r=i.root,s=0,o=0,a=0,u=[],d=0;for(;r!==yn;){if(No(r)){Ji(r.left,!1),Ji(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),r=r.parent;continue}if(r.left!==yn&&!No(r.left)){r=r.left;continue}o=s+r.start,a=s+r.end,r.setCachedOffsets(o,a,n);let h=!0;if(e&&r.ownerId&&r.ownerId!==e&&(h=!1),t&&Rce(r)&&(h=!1),h&&(u[d++]=r),Ji(r,!0),r.right!==yn&&!No(r.right)){s+=r.delta,r=r.right;continue}}return Ji(i.root,!1),u}function _ke(i,e,t,n,r,s){let o=i.root,a=0,u=0,d=0,h=0,f=[],p=0;for(;o!==yn;){if(No(o)){Ji(o.left,!1),Ji(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!No(o.left)){if(u=a+o.maxEnd,u<e){Ji(o,!0);continue}if(o.left!==yn){o=o.left;continue}}if(d=a+o.start,d>t){Ji(o,!0);continue}if(h=a+o.end,h>=e){o.setCachedOffsets(d,h,s);let m=!0;n&&o.ownerId&&o.ownerId!==n&&(m=!1),r&&Rce(o)&&(m=!1),m&&(f[p++]=o)}if(Ji(o,!0),o.right!==yn&&!No(o.right)){a+=o.delta,o=o.right;continue}}return Ji(i.root,!1),f}function AJ(i,e){if(i.root===yn)return e.parent=yn,e.left=yn,e.right=yn,sr(e,0),i.root=e,i.root;vke(i,e),Sv(e.parent);let t=e;for(;t!==i.root&&Ha(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Ha(n)===1?(sr(t.parent,0),sr(n,0),sr(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,T2(i,t)),sr(t.parent,0),sr(t.parent.parent,1),k2(i,t.parent.parent))}else{const n=t.parent.parent.left;Ha(n)===1?(sr(t.parent,0),sr(n,0),sr(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,k2(i,t)),sr(t.parent,0),sr(t.parent.parent,1),T2(i,t.parent.parent))}return sr(i.root,0),e}function vke(i,e){let t=0,n=i.root;const r=e.start,s=e.end;for(;;)if(Cke(r,s,n.start+t,n.end+t)<0)if(n.left===yn){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===yn){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=yn,e.right=yn,sr(e,1)}function OJ(i,e){let t,n;if(e.left===yn?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===yn?(t=e.left,n=e):(n=bke(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,sr(t,0),e.detach(),R9(),S0(t),i.root.parent=yn;return}let r=Ha(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,sr(n,Ha(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==yn&&(n.left.parent=n),n.right!==yn&&(n.right.parent=n)),e.detach(),r){Sv(t.parent),n!==e&&(Sv(n),Sv(n.parent)),R9();return}Sv(t),Sv(t.parent),n!==e&&(Sv(n),Sv(n.parent));let s;for(;t!==i.root&&Ha(t)===0;)t===t.parent.left?(s=t.parent.right,Ha(s)===1&&(sr(s,0),sr(t.parent,1),T2(i,t.parent),s=t.parent.right),Ha(s.left)===0&&Ha(s.right)===0?(sr(s,1),t=t.parent):(Ha(s.right)===0&&(sr(s.left,0),sr(s,1),k2(i,s),s=t.parent.right),sr(s,Ha(t.parent)),sr(t.parent,0),sr(s.right,0),T2(i,t.parent),t=i.root)):(s=t.parent.left,Ha(s)===1&&(sr(s,0),sr(t.parent,1),k2(i,t.parent),s=t.parent.left),Ha(s.left)===0&&Ha(s.right)===0?(sr(s,1),t=t.parent):(Ha(s.left)===0&&(sr(s.right,0),sr(s,1),T2(i,s),s=t.parent.left),sr(s,Ha(t.parent)),sr(t.parent,0),sr(s.left,0),k2(i,t.parent),t=i.root));sr(t,0),R9()}function bke(i){for(;i.left!==yn;)i=i.left;return i}function R9(){yn.parent=yn,yn.delta=0,yn.start=0,yn.end=0}function T2(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==yn&&(t.left.parent=e),t.parent=e.parent,e.parent===yn?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,S0(e),S0(t)}function k2(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==yn&&(t.right.parent=e),t.parent=e.parent,e.parent===yn?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,S0(e),S0(t)}function Fce(i){let e=i.end;if(i.left!==yn){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==yn){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function S0(i){i.maxEnd=Fce(i)}function Sv(i){for(;i!==yn;){const e=Fce(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function Cke(i,e,t,n){return i===t?e-n:i-t}let VH=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ln)return jq(this.right);let e=this;for(;e.parent!==ln&&e.parent.left!==e;)e=e.parent;return e.parent===ln?ln:e.parent}prev(){if(this.left!==ln)return Bce(this.left);let e=this;for(;e.parent!==ln&&e.parent.right!==e;)e=e.parent;return e.parent===ln?ln:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const ln=new VH(null,0);ln.parent=ln;ln.left=ln;ln.right=ln;ln.color=0;function jq(i){for(;i.left!==ln;)i=i.left;return i}function Bce(i){for(;i.right!==ln;)i=i.right;return i}function Kq(i){return i===ln?0:i.size_left+i.piece.length+Kq(i.right)}function qq(i){return i===ln?0:i.lf_left+i.piece.lineFeedCnt+qq(i.right)}function P9(){ln.parent=ln}function N2(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==ln&&(t.left.parent=e),t.parent=e.parent,e.parent===ln?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function A2(i,e){let t=e.left;e.left=t.right,t.right!==ln&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===ln?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function TR(i,e){let t,n;if(e.left===ln?(n=e,t=n.right):e.right===ln?(n=e,t=n.left):(n=jq(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),P9(),i.root.parent=ln;return}let r=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,e2(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,e2(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ln&&(n.left.parent=n),n.right!==ln&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,e2(i,n)),e.detach(),t.parent.left===t){let o=Kq(t),a=qq(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let u=o-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,$g(i,t.parent,u,d)}}if(e2(i,t.parent),r){P9();return}let s;for(;t!==i.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,N2(i,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,A2(i,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,N2(i,t.parent),t=i.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,A2(i,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,N2(i,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,A2(i,t.parent),t=i.root));t.color=0,P9()}function MJ(i,e){for(e2(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,N2(i,e)),e.parent.color=0,e.parent.parent.color=1,A2(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,A2(i,e)),e.parent.color=0,e.parent.parent.color=1,N2(i,e.parent.parent))}i.root.color=0}function $g(i,e,t,n){for(;e!==i.root&&e!==ln;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function e2(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=Kq(e.left)-e.size_left,n=qq(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}function zF(i){return i<0?0:i>255?255:i|0}function YC(i){return i<0?0:i>4294967295?4294967295:i|0}class HS{constructor(e){let t=zF(e);this._defaultValue=t,this._asciiMap=HS._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=zF(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class Rw{constructor(){this._actual=new HS(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class wke extends HS{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function yke(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const gc=yke(i=>new wke(i)),Ske=999;class h1{constructor(e,t,n,r){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Lke(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Cue(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Eke(t,this.wordSeparators?gc(this.wordSeparators):null,n?this.searchString:null)}}function Lke(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++)if(i.charCodeAt(e)===92){if(e++,e>=t)break;const r=i.charCodeAt(e);if(r===110||r===114||r===87)return!0}return!1}class Eke{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function b1(i,e,t){if(!t)return new DA(i,null);let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r];return new DA(i,n)}class RJ{constructor(e){let t=[],n=0;for(let r=0,s=e.length;r<s;r++)e.charCodeAt(r)===10&&(t[n++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;n<r;){const s=n+((r-n)/2>>0);t[s]>=e?r=s-1:t[s+1]>=e?(n=s,r=s):n=s+1}return n+1}}class kR{static findMatches(e,t,n,r,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new Pw(o.wordSeparators,o.regex),r,s):this._doFindMatchesLineByLine(e,n,o,r,s):[]}static _getMultilineMatchRange(e,t,n,r,s,o){let a,u=0;r?(u=r.findLineFeedCountBeforeOffset(s),a=t+s+u):a=t+s;let d;if(r){let m=r.findLineFeedCountBeforeOffset(s+o.length)-u;d=a+o.length+m}else d=a+o.length;const h=e.getPositionAt(a),f=e.getPositionAt(d);return new Q(h.lineNumber,h.column,f.lineNumber,f.column)}static _doFindMatchesMultiline(e,t,n,r,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),u=e.getEOL()===`\r
`?new RJ(a):null,d=[];let h=0,f;for(n.reset(0);f=n.next(a);)if(d[h++]=b1(this._getMultilineMatchRange(e,o,a,u,f.index,f[0]),f,r),h>=s)return d;return d}static _doFindMatchesLineByLine(e,t,n,r,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,o,r,s),o}const u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,a,o,r,s);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<s;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,o,r,s);if(a<s){const d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,o,r,s)}return o}static _findMatchesInLine(e,t,n,r,s,o,a,u){const d=e.wordSeparators;if(!a&&e.simpleSearch){const p=e.simpleSearch,m=p.length,v=t.length;let b=-m;for(;(b=t.indexOf(p,b+m))!==-1;)if((!d||Gq(d,t,v,b,m))&&(o[s++]=new DA(new Q(n,b+1+r,n,b+1+m+r),null),s>=u))return s;return s}const h=new Pw(e.wordSeparators,e.regex);let f;h.reset(0);do if(f=h.next(t),f&&(o[s++]=b1(new Q(n,f.index+1+r,n,f.index+1+f[0].length+r),f,a),s>=u))return s;while(f);return s}static findNextMatch(e,t,n,r){const s=t.parseSearchRequest();if(!s)return null;const o=new Pw(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,o,r):this._doFindNextMatchLineByLine(e,n,o,r)}static _doFindNextMatchMultiline(e,t,n,r){const s=new Le(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),u=e.getValueInRange(new Q(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new RJ(u):null;n.reset(t.column-1);let h=n.next(u);return h?b1(this._getMultilineMatchRange(e,o,u,d,h.index,h[0]),h,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Le(1,1),n,r):null}static _doFindNextMatchLineByLine(e,t,n,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),u=this._findFirstMatchInLine(n,a,o,t.column,r);if(u)return u;for(let d=1;d<=s;d++){const h=(o+d-1)%s,f=e.getLineContent(h+1),p=this._findFirstMatchInLine(n,f,h+1,1,r);if(p)return p}return null}static _findFirstMatchInLine(e,t,n,r,s){e.reset(r-1);const o=e.next(t);return o?b1(new Q(n,o.index+1,n,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,n,r){const s=t.parseSearchRequest();if(!s)return null;const o=new Pw(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,r):this._doFindPreviousMatchLineByLine(e,n,o,r)}static _doFindPreviousMatchMultiline(e,t,n,r){const s=this._doFindMatchesMultiline(e,new Q(1,1,t.lineNumber,t.column),n,r,10*Ske);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new Le(o,e.getLineMaxColumn(o)),n,r):null}static _doFindPreviousMatchLineByLine(e,t,n,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),u=this._findLastMatchInLine(n,a,o,r);if(u)return u;for(let d=1;d<=s;d++){const h=(s+o-d-1)%s,f=e.getLineContent(h+1),p=this._findLastMatchInLine(n,f,h+1,r);if(p)return p}return null}static _findLastMatchInLine(e,t,n,r){let s=null,o;for(e.reset(0);o=e.next(t);)s=b1(new Q(n,o.index+1,n,o.index+1+o[0].length),o,r);return s}}function xke(i,e,t,n,r){if(n===0)return!0;const s=e.charCodeAt(n-1);if(i.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function Dke(i,e,t,n,r){if(n+r===t)return!0;const s=e.charCodeAt(n+r);if(i.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(n+r-1);if(i.get(o)!==0)return!0}return!1}function Gq(i,e,t,n,r){return xke(i,e,t,n,r)&&Dke(i,e,t,n,r)}class Pw{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const r=n.index,s=n[0].length;if(r===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){P1(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=s,!this._wordSeparators||Gq(this._wordSeparators,e,t,r,s))return n}while(n);return null}}const Mg=65535;function Wce(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class Ike{constructor(e,t,n,r,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=s}}function jg(i,e=!0){let t=[0],n=1;for(let r=0,s=i.length;r<s;r++){const o=i.charCodeAt(r);o===13?r+1<s&&i.charCodeAt(r+1)===10?(t[n++]=r+2,r++):t[n++]=r+1:o===10&&(t[n++]=r+1)}return e?Wce(t):t}function Tke(i,e){i.length=0,i[0]=0;let t=1,n=0,r=0,s=0,o=!0;for(let u=0,d=e.length;u<d;u++){const h=e.charCodeAt(u);h===13?u+1<d&&e.charCodeAt(u+1)===10?(s++,i[t++]=u+2,u++):(n++,i[t++]=u+1):h===10?(r++,i[t++]=u+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new Ike(Wce(i),n,r,s,o);return i.length=0,a}class al{constructor(e,t,n,r,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=s}}class C1{constructor(e,t){this.buffer=e,this.lineStarts=t}}class kke{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==ln&&e.iterate(e.root,n=>(n!==ln&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Nke{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let r=0;r<n.length;r++){let s=n[r];if(s.node.parent===null||s.nodeStartOffset>=e){n[r]=null,t=!0;continue}}if(t){let r=[];for(const s of n)s!==null&&r.push(s);this._cache=r}}}class Ake{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new C1("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ln,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=jg(e[s].buffer));let a=new al(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),r=this.rbInsertRight(r,a)}this._searchCache=new Nke(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Mg,n=t-Math.floor(t/3),r=n*2,s="",o=0,a=[];if(this.iterate(this.root,u=>{let d=this.getNodeContent(u),h=d.length;if(o<=n||o+h<r)return s+=d,o+=h,!0;let f=s.replace(/\r\n|\r|\n/g,e);return a.push(new C1(f,jg(f))),s=d,o=h,!0}),o>0){let u=s.replace(/\r\n|\r|\n/g,e);a.push(new C1(u,jg(u)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new kke(this,e)}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==ln;)if(r.left!==ln&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;let s=this.getAccumulatedValue(r,e-r.lf_left-2);return n+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,r=e;for(;t!==ln;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){let o=this.getOffsetAt(n+1,1),a=r-o;return new Le(n+1,a+1)}return new Le(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===ln){let s=this.getOffsetAt(n+1,1),o=r-e-s;return new Le(n+1,o+1)}else t=t.right;return new Le(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,r);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,u=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return u.substring(d+e.remainder,d+t.remainder)}let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=r.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==ln;){let a=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(u,u+t.remainder);break}else o+=a.substr(u,n.piece.length);n=n.next()}return o}getLinesContent(){let e=[],t=0,n="",r=!1;return this.iterate(this.root,s=>{if(s===ln)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const u=this._buffers[o.bufferIndex].buffer,d=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,f=o.end.line;let p=d[h]+o.start.column;if(r&&(u.charCodeAt(p)===10&&(p++,a--),e[t++]=n,n="",r=!1,a===0))return!0;if(h===f)return!this._EOLNormalized&&u.charCodeAt(p+a-1)===13?(r=!0,n+=u.substr(p,a-1)):n+=u.substr(p,a),!0;n+=this._EOLNormalized?u.substring(p,Math.max(p,d[h+1]-this._EOLLength)):u.substring(p,d[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let m=h+1;m<f;m++)n=this._EOLNormalized?u.substring(d[m],d[m+1]-this._EOLLength):u.substring(d[m],d[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&u.charCodeAt(d[f]+o.end.column-1)===13?(r=!0,o.end.column===0?t--:n=u.substr(d[f],o.end.column-1)):n=u.substr(d[f],o.end.column),!0}),r&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}else{let t=this._buffers[e.node.piece.bufferIndex],r=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,r,s,o,a,u,d,h,f){let p=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),v=this.offsetInBuffer(e.piece.bufferIndex,s),b=this.offsetInBuffer(e.piece.bufferIndex,o),L,S={line:0,column:0},y,E;t._wordSeparators?(y=p.buffer.substring(v,b),E=A=>A+v,t.reset(0)):(y=p.buffer,E=A=>A,t.reset(v));do if(L=t.next(y),L){if(E(L.index)>=b)return h;this.positionInBuffer(e,E(L.index)-m,S);let A=this.getLineFeedCnt(e.piece.bufferIndex,s,S),N=S.line===s.line?S.column-s.column+r:S.column+1,V=N+L[0].length;if(f[h++]=b1(new Q(n+A,N,n+A,V),L,u),E(L.index)+L[0].length>=b||h>=d)return h}while(L);return h}findMatchesLineByLine(e,t,n,r){const s=[];let o=0;const a=new Pw(t.wordSeparators,t.regex);let u=this.nodeAt2(e.startLineNumber,e.startColumn);if(u===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let h=this.positionInBuffer(u.node,u.remainder),f=this.positionInBuffer(d.node,d.remainder);if(u.node===d.node)return this.findMatchesInNode(u.node,a,e.startLineNumber,e.startColumn,h,f,t,n,r,o,s),s;let p=e.startLineNumber,m=u.node;for(;m!==d.node;){let b=this.getLineFeedCnt(m.piece.bufferIndex,h,m.piece.end);if(b>=1){let S=this._buffers[m.piece.bufferIndex].lineStarts,y=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),E=S[h.line+b],A=p===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(m,a,p,A,h,this.positionInBuffer(m,E-y),t,n,r,o,s),o>=r)return s;p+=b}let L=p===e.startLineNumber?e.startColumn-1:0;if(p===e.endLineNumber){const S=this.getLineContent(p).substring(L,e.endColumn-1);return o=this._findMatchesInLine(t,a,S,e.endLineNumber,L,o,s,n,r),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(p).substr(L),p,L,o,s,n,r),o>=r)return s;p++,u=this.nodeAt2(p,1),m=u.node,h=this.positionInBuffer(u.node,u.remainder)}if(p===e.endLineNumber){let b=p===e.startLineNumber?e.startColumn-1:0;const L=this.getLineContent(p).substring(b,e.endColumn-1);return o=this._findMatchesInLine(t,a,L,e.endLineNumber,b,o,s,n,r),s}let v=p===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(d.node,a,p,v,h,f,t,n,r,o,s),s}_findMatchesInLine(e,t,n,r,s,o,a,u,d){const h=e.wordSeparators;if(!u&&e.simpleSearch){const p=e.simpleSearch,m=p.length,v=n.length;let b=-m;for(;(b=n.indexOf(p,b+m))!==-1;)if((!h||Gq(h,n,v,b,m))&&(a[o++]=new DA(new Q(r,b+1+s,r,b+1+m+s),null),o>=d))return o;return o}let f;t.reset(0);do if(f=t.next(n),f&&(a[o++]=b1(new Q(r,f.index+1+s,r,f.index+1+f[0].length+s),f,u),o>=d))return o;while(f);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ln){let{node:r,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=r.piece,u=a.bufferIndex,d=this.positionInBuffer(r,s);if(r.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Mg){this.appendToNode(r,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(o+r.piece.length>e){let h=[],f=new al(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(u,a.end)-this.offsetInBuffer(u,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(r,s)===10){let b={line:f.start.line+1,column:0};f=new al(f.bufferIndex,b,f.end,this.getLineFeedCnt(f.bufferIndex,b,f.end),f.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(r,s-1)===13){let b=this.positionInBuffer(r,s-1);this.deleteNodeTail(r,b),t="\r"+t,r.piece.length===0&&h.push(r)}else this.deleteNodeTail(r,d);else this.deleteNodeTail(r,d);let p=this.createNewPieces(t);f.length>0&&this.rbInsertRight(r,f);let m=r;for(let v=0;v<p.length;v++)m=this.rbInsertRight(m,p[v]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,r)}else{let r=this.createNewPieces(t),s=this.rbInsertLeft(null,r[0]);for(let o=1;o<r.length;o++)s=this.rbInsertRight(s,r[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===ln)return;let n=this.nodeAt(e),r=this.nodeAt(e+t),s=n.node,o=r.node;if(s===o){let p=this.positionInBuffer(s,n.remainder),m=this.positionInBuffer(s,r.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){let v=s.next();TR(this,s),this.validateCRLFWithPrevNode(v),this.computeBufferMetadata();return}this.deleteNodeHead(s,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,p),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,p,m),this.computeBufferMetadata();return}let a=[],u=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,u),this._searchCache.validate(e),s.piece.length===0&&a.push(s);let d=this.positionInBuffer(o,r.remainder);this.deleteNodeHead(o,d),o.piece.length===0&&a.push(o);let h=s.next();for(let p=h;p!==ln&&p!==o;p=p.next())a.push(p);let f=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},u=new al(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=u,e+=`
`,$g(this,t,-1,-1),t.piece.length===0&&n.push(t)}let r=this.createNewPieces(e),s=this.rbInsertLeft(t,r[r.length-1]);for(let o=r.length-2;o>=0;o--)s=this.rbInsertLeft(s,r[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]),s=r;for(let o=1;o<n.length;o++)s=this.rbInsertRight(s,n[o]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){let r=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,u=o[r.start.line]+r.start.column+t,d=r.start.line,h=r.end.line,f=0,p=0,m=0;for(;d<=h&&(f=d+(h-d)/2|0,m=o[f],f!==h);)if(p=o[f+1],u<m)h=f-1;else if(u>=p)d=f+1;else break;return n?(n.line=f,n.column=u-m,null):{line:f,column:u-m}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;let s=r[n.line+1],o=r[n.line]+n.column;if(s>o+1)return n.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)TR(this,e[t])}createNewPieces(e){if(e.length>Mg){let h=[];for(;e.length>Mg;){const p=e.charCodeAt(Mg-1);let m;p===13||p>=55296&&p<=56319?(m=e.substring(0,Mg-1),e=e.substring(Mg-1)):(m=e.substring(0,Mg),e=e.substring(Mg));let v=jg(m);h.push(new al(this._buffers.length,{line:0,column:0},{line:v.length-1,column:m.length-v[v.length-1]},v.length-1,m.length)),this._buffers.push(new C1(m,v))}let f=jg(e);return h.push(new al(this._buffers.length,{line:0,column:0},{line:f.length-1,column:e.length-f[f.length-1]},f.length-1,e.length)),this._buffers.push(new C1(e,f)),h}let t=this._buffers[0].buffer.length;const n=jg(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],u={line:o,column:a},d=new al(0,r,u,this.getLineFeedCnt(0,r,u),s-t);return this._lastChangeBufferPos=u,[d]}getLineRawContent(e,t=0){let n=this.root,r="",s=this._searchCache.get2(e);if(s){n=s.node;let o=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)r=a.substring(u+o,u+n.piece.length);else{let d=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(u+o,u+d-t)}}else{let o=0;const a=e;for(;n!==ln;)if(n.left!==ln&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let u=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,f=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(f+u,f+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let u=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=d.substring(h+u,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==ln;){let o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=o.substring(u,u+a-t),r}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=o.substr(a,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==ln;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,r=this.positionInBuffer(e,t),s=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[s]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,r=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),u=this.getLineFeedCnt(n.bufferIndex,n.start,o),d=u-r,h=a-s,f=n.length+h;e.piece=new al(n.bufferIndex,n.start,o,u,f),$g(this,e,h,d)}deleteNodeHead(e,t){const n=e.piece,r=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),u=this.offsetInBuffer(n.bufferIndex,o),d=a-r,h=s-u,f=n.length+h;e.piece=new al(n.bufferIndex,o,n.end,a,f),$g(this,e,h,d)}shrinkNode(e,t,n){const r=e.piece,s=r.start,o=r.end,a=r.length,u=r.lineFeedCnt,d=t,h=this.getLineFeedCnt(r.bufferIndex,r.start,d),f=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,s);e.piece=new al(r.bufferIndex,r.start,d,h,f),$g(this,e,f-a,h-u);let p=new al(r.bufferIndex,n,o,this.getLineFeedCnt(r.bufferIndex,n,o),this.offsetInBuffer(r.bufferIndex,o)-this.offsetInBuffer(r.bufferIndex,n)),m=this.rbInsertRight(e,p);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=jg(t,!1);for(let m=0;m<s.length;m++)s[m]+=r;if(n){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],u={line:o,column:a},d=e.piece.length+t.length,h=e.piece.lineFeedCnt,f=this.getLineFeedCnt(0,e.piece.start,u),p=f-h;e.piece=new al(e.piece.bufferIndex,e.piece.start,u,f,d),this._lastChangeBufferPos=u,$g(this,e,t.length,p)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==ln;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;let s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==ln;)if(n.left!==ln&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(s+t-1,o),nodeStartOffset:r}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:r};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==ln;){if(n.piece.lineFeedCnt>0){let s=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(n.piece.length>=t-1){let s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ln||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,s=n[r]+t.start.column;return r===n.length-1||n[r+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ln||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],r=this._buffers[e.piece.bufferIndex].lineStarts,s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new al(e.piece.bufferIndex,e.piece.start,s,a,o),$g(this,e,-1,-1),e.piece.length===0&&n.push(e);let u={line:t.piece.start.line+1,column:0};const d=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,u,t.piece.end);t.piece=new al(t.piece.bufferIndex,u,t.piece.end,h,d),$g(this,t,-1,-1),t.piece.length===0&&n.push(t);let f=this.createNewPieces(`\r
`);this.rbInsertRight(e,f[0]);for(let p=0;p<n.length;p++)TR(this,n[p])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)TR(this,n);else{const r=n.piece,s={line:r.start.line+1,column:0},o=r.length-1,a=this.getLineFeedCnt(r.bufferIndex,s,r.end);n.piece=new al(r.bufferIndex,s,r.end,a,o),$g(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ln)return t(ln);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===ln)return"";let t=this._buffers[e.piece.bufferIndex],n,r=e.piece,s=this.offsetInBuffer(r.bufferIndex,r.start),o=this.offsetInBuffer(r.bufferIndex,r.end);return n=t.buffer.substring(s,o),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){let n=new VH(t,1);if(n.left=ln,n.right=ln,n.parent=ln,n.size_left=0,n.lf_left=0,this.root===ln)this.root=n,n.color=0;else if(e.right===ln)e.right=n,n.parent=e;else{let s=jq(e.right);s.left=n,n.parent=s}return MJ(this,n),n}rbInsertLeft(e,t){let n=new VH(t,1);if(n.left=ln,n.right=ln,n.parent=ln,n.size_left=0,n.lf_left=0,this.root===ln)this.root=n,n.color=0;else if(e.left===ln)e.left=n,n.parent=e;else{let r=Bce(e.left);r.right=n,n.parent=r}return MJ(this,n),n}}function Vce(i){return P8(i,0)}function P8(i,e){switch(typeof i){case"object":return i===null?dp(349,e):Array.isArray(i)?Mke(i,e):Rke(i,e);case"string":return Yq(i,e);case"boolean":return Oke(i,e);case"number":return dp(i,e);case"undefined":return dp(937,e);default:return dp(617,e)}}function dp(i,e){return(e<<5)-e+i|0}function Oke(i,e){return dp(i?433:863,e)}function Yq(i,e){e=dp(149417,e);for(let t=0,n=i.length;t<n;t++)e=dp(i.charCodeAt(t),e);return e}function Mke(i,e){return e=dp(104579,e),i.reduce((t,n)=>P8(n,t),e)}function Rke(i,e){return e=dp(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=Yq(n,t),P8(i[n],t)),e)}function F9(i,e,t=32){const n=t-e,r=~((1<<n)-1);return(i<<e|(r&i)>>>n)>>>0}function PJ(i,e=0,t=i.byteLength,n=0){for(let r=0;r<t;r++)i[e+r]=n}function Pke(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function LN(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):Pke((i>>>0).toString(16),e/4)}class F8{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let r=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let u=o;if(Ws(o))if(a+1<t){const d=e.charCodeAt(a+1);Uy(d)?(a++,u=Cq(o,d)):u=65533}else{s=o;break}else Uy(o)&&(u=65533);if(r=this._push(n,r,u),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=r,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),LN(this._h0)+LN(this._h1)+LN(this._h2)+LN(this._h3)+LN(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,PJ(this._buff,this._buffLen),this._buffLen>56&&(this._step(),PJ(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=F8._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,F9(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,s=this._h2,o=this._h3,a=this._h4,u,d,h;for(let f=0;f<80;f++)f<20?(u=r&s|~r&o,d=1518500249):f<40?(u=r^s^o,d=1859775393):f<60?(u=r&s|r&o|s&o,d=2400959708):(u=r^s^o,d=3395469782),h=F9(n,5)+u+a+d+e.getUint32(f*4,!1)&4294967295,a=o,o=s,s=F9(r,30),r=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}F8._bigBlock32=new DataView(new ArrayBuffer(320));var FJ,BJ;class Fke{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class Bke{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?vq(e,this._value,0,e.length,this._from,this._to):aM(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Wke{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?vq(e,this._value,0,e.length,this._from,this._to):aM(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Vke{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Wke(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return wH(e,this._value.scheme);if(this._states[this._stateIdx]===2)return wH(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return yA(e,this._value.query);if(this._states[this._stateIdx]===5)return yA(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class NR{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class _y{constructor(e){this._iter=e}static forUris(e=()=>!1){return new _y(new Vke(e))}static forStrings(){return new _y(new Fke)}static forConfigKeys(){return new _y(new Bke)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let r;this._root||(this._root=new NR,this._root.segment=n.value());const s=[];for(r=this._root;;){const a=n.cmp(r.segment);if(a>0)r.left||(r.left=new NR,r.left.segment=n.value()),s.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new NR,r.right.segment=n.value()),s.push([1,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new NR,r.mid.segment=n.value()),s.push([0,r]),r=r.mid;else break}const o=r.value;r.value=t,r.key=e;for(let a=s.length-1;a>=0;a--){const u=s[a][1];u.updateHeight();const d=u.balanceFactor();if(d<-1||d>1){const h=s[a][0],f=s[a+1][0];if(h===1&&f===1)s[a][1]=u.rotateLeft();else if(h===-1&&f===-1)s[a][1]=u.rotateRight();else if(h===1&&f===-1)u.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=u.rotateLeft();else if(h===-1&&f===1)u.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=u.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const r=this._iter.reset(e),s=[];let o=this._root;for(;o;){const a=r.cmp(o.segment);if(a>0)s.push([-1,o]),o=o.left;else if(a<0)s.push([1,o]),o=o.right;else if(r.hasNext())r.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:u,value:d,segment:h}=a;this._delete(a.key,!1),o.key=u,o.value=d,o.segment=h}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(s.length>0){const[u,d]=s[s.length-1];switch(u){case-1:d.left=a;break;case 0:d.mid=a;break;case 1:d.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const u=s[a][1];u.updateHeight();const d=u.balanceFactor();if(d>1?(u.right.balanceFactor()>=0||(u.right=s[a+1][1]=s[a+1][1].rotateRight()),s[a][1]=u.rotateLeft()):d<-1&&(u.left.balanceFactor()<=0||(u.left=s[a+1][1]=s[a+1][1].rotateLeft()),s[a][1]=u.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,r;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),r=n.value||r,n=n.mid;else break}return n&&n.value||r}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class Hke{constructor(e,t){this.uri=e,this.value=t}}class na{constructor(e,t){this[FJ]="ResourceMap",e instanceof na?(this.map=new Map(e.map),this.toKey=t??na.defaultToKey):(this.map=new Map,this.toKey=e??na.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new Hke(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,r]of this.map)e(r.value,r.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(FJ=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}na.defaultToKey=i=>i.toString();class $ke{constructor(){this[BJ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let r=this._map.get(e);if(r)r.value=t,n!==0&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return r}[(BJ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(n.previous=r,r.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,r=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=r,r.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class z0 extends $ke{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function Mc(i,e,t){return Math.min(Math.max(i,e),t)}class zke{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}}const B9="**",WJ="/",i4="[/\\\\]",r4="[^/\\\\]",Uke=/\//g;function VJ(i){switch(i){case 0:return"";case 1:return`${r4}*?`;default:return`(?:${i4}|${r4}+${i4}|${i4}${r4}+)*?`}}function HJ(i,e){if(!i)return[];const t=[];let n=!1,r=!1,s="";for(const o of i){switch(o){case e:if(!n&&!r){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1;break}s+=o}return s&&t.push(s),t}function Hce(i){if(!i)return"";let e="";const t=HJ(i,WJ);if(t.every(n=>n===B9))e=".*";else{let n=!1;t.forEach((r,s)=>{if(r===B9){n||(e+=VJ(2),n=!0);return}let o=!1,a="",u=!1,d="";for(const h of r){if(h!=="}"&&o){a+=h;continue}if(u&&(h!=="]"||!d)){let f;h==="-"?f=h:(h==="^"||h==="!")&&!d?f="^":h===WJ?f="":f=dc(h),d+=f;continue}switch(h){case"{":o=!0;continue;case"[":u=!0;continue;case"}":const p=`(?:${HJ(a,",").map(m=>Hce(m)).join("|")})`;e+=p,o=!1,a="";break;case"]":e+="["+d+"]",u=!1,d="";break;case"?":e+=r4;continue;case"*":e+=VJ(1);continue;default:e+=dc(h)}}s<t.length-1&&(t[s+1]!==B9||s+2<t.length)&&(e+=i4),n=!1})}return e}const jke=/^\*\*\/\*\.[\w\.-]+$/,Kke=/^\*\*\/([\w\.-]+)\/?$/,qke=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,Gke=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,Yke=/^\*\*((\/[\w\.-]+)+)\/?$/,Zke=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,$J=new z0(1e4),zJ=function(){return!1},Jf=function(){return null};function Zq(i,e){if(!i)return Jf;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let r=$J.get(n);if(r)return UJ(r,i);let s;if(jke.test(t)){const o=t.substr(4);r=function(a,u){return typeof a=="string"&&a.endsWith(o)?t:null}}else(s=Kke.exec(W9(t,e)))?r=Xke(s[1],t):(e.trimForExclusions?Gke:qke).test(t)?r=Qke(t,e):(s=Yke.exec(W9(t,e)))?r=jJ(s[1].substr(1),t,!0):(s=Zke.exec(W9(t,e)))?r=jJ(s[1],t,!1):r=Jke(t);return $J.set(n,r),UJ(r,i)}function UJ(i,e){return typeof e=="string"?i:function(t,n){return QTe(t,e.base)?i(lEe(e.base,t),n):null}}function W9(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function Xke(i,e){const t=`/${i}`,n=`\\${i}`,r=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},s=[i];return r.basenames=s,r.patterns=[e],r.allBasenames=s,r}function Qke(i,e){const t=zce(i.slice(1,-1).split(",").map(a=>Zq(a,e)).filter(a=>a!==Jf),i),n=t.length;if(!n)return Jf;if(n===1)return t[0];const r=function(a,u){for(let d=0,h=t.length;d<h;d++)if(t[d](a,u))return i;return null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function jJ(i,e,t){const n=q1===xs.sep,r=n?i:i.replace(Uke,q1),s=q1+r,o=xs.sep+i,a=t?function(u,d){return typeof u=="string"&&(u===r||u.endsWith(s)||!n&&(u===i||u.endsWith(o)))?e:null}:function(u,d){return typeof u=="string"&&(u===r||!n&&u===i)?e:null};return a.allPaths=[(t?"*/":"./")+i],a}function Jke(i){try{const e=new RegExp(`^${Hce(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Jf}}function eNe(i,e,t){return!i||typeof e!="string"?!1:$ce(i)(e,void 0,t)}function $ce(i,e={}){if(!i)return zJ;if(typeof i=="string"||tNe(i)){const t=Zq(i,e);if(t===Jf)return zJ;const n=function(r,s){return!!t(r,s)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return nNe(i,e)}function tNe(i){const e=i;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function nNe(i,e){const t=zce(Object.getOwnPropertyNames(i).map(a=>iNe(a,i[a],e)).filter(a=>a!==Jf)),n=t.length;if(!n)return Jf;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,f){for(let p=0,m=t.length;p<m;p++){const v=t[p](h,f);if(v)return v}return null},u=t.find(h=>!!h.allBasenames);u&&(a.allBasenames=u.allBasenames);const d=t.reduce((h,f)=>f.allPaths?h.concat(f.allPaths):h,[]);return d.length&&(a.allPaths=d),a}const r=function(a,u,d){let h;for(let f=0,p=t.length;f<p;f++){const m=t[f];m.requiresSiblings&&d&&(u||(u=K1(a)),h||(h=u.substr(0,u.length-uEe(a).length)));const v=m(a,u,h,d);if(v)return v}return null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function iNe(i,e,t){if(e===!1)return Jf;const n=Zq(i,t);if(n===Jf)return Jf;if(typeof e=="boolean")return n;if(e){const r=e.when;if(typeof r=="string"){const s=(o,a,u,d)=>{if(!d||!n(o,a))return null;const h=r.replace("$(basename)",u),f=d(h);return ZLe(f)?f.then(p=>p?i:null):f?i:null};return s.requiresSiblings=!0,s}}return n}function zce(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,u)=>{const d=u.basenames;return d?a.concat(d):a},[]);let r;if(e){r=[];for(let a=0,u=n.length;a<u;a++)r.push(e)}else r=t.reduce((a,u)=>{const d=u.patterns;return d?a.concat(d):a},[]);const s=function(a,u){if(typeof a!="string")return null;if(!u){let h;for(h=a.length;h>0;h--){const f=a.charCodeAt(h-1);if(f===47||f===92)break}u=a.substr(h)}const d=n.indexOf(u);return d!==-1?r[d]:null};s.basenames=n,s.patterns=r,s.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(s),o}function Uce(i,e,t,n){if(Array.isArray(i)){let r=0;for(const s of i){const o=Uce(s,e,t,n);if(o===10)return o;o>r&&(r=o)}return r}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:r,pattern:s,scheme:o,hasAccessToAllModels:a}=i;if(!n&&!a)return 0;let u=0;if(o)if(o===e.scheme)u=10;else if(o==="*")u=5;else return 0;if(r)if(r===t)u=10;else if(r==="*")u=Math.max(u,5);else return 0;if(s){let d;if(typeof s=="string"?d=s:d=Object.assign(Object.assign({},s),{base:lq(s.base)}),d===e.fsPath||eNe(d,e.fsPath))u=10;else return 0}return u}else return 0}}function jce(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(jce):!!i.exclusive}class Qr{constructor(){this._clock=0,this._entries=[],this._onDidChange=new Ce}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Un(()=>{if(n){let r=this._entries.indexOf(n);r>=0&&(this._entries.splice(r,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,r;return this._orderedForEach(e,s=>{n&&r===s._score?n.push(s.provider):(r=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=Uce(n.selector,e.uri,e.getLanguageId(),BEe(e)),jce(n.selector)&&n._score>0){for(let r of this._entries)r._score=0;n._score=1e3;break}this._entries.sort(Qr._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}const KJ=new WeakMap;let rNe=0;function sNe(i){let e=KJ.get(i);return e===void 0&&(e=++rNe,KJ.set(i,e)),e}class UF{constructor(e,t,n=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=n,this._cache=new z0(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>P8(sNe(n),t),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){const t=this._key(e),n=this._cache.get(t);return this._clamp(n==null?void 0:n.value)}update(e,t){const n=this._key(e);let r=this._cache.get(n);return r||(r=new zke,this._cache.set(n,r)),r.update(t),this.get(e)}}class oNe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Un(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,r=!1;return this._promises.set(e,t.then(s=>{this._promises.delete(e),!(r||!s)&&(n=this.register(e,s))})),Un(()=>{r=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(r=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class ia{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),r=this.getFontStyle(e);return r&1&&(n+=" mtki"),r&2&&(n+=" mtkb"),r&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),r=this.getFontStyle(e);let s=`color: ${t[n]};`;return r&1&&(s+="font-style: italic;"),r&2&&(s+="font-weight: bold;"),r&4&&(s+="text-decoration: underline;"),s}}const aNe=function(){let i=Object.create(null);return i[0]="symbol-method",i[1]="symbol-function",i[2]="symbol-constructor",i[3]="symbol-field",i[4]="symbol-variable",i[5]="symbol-class",i[6]="symbol-struct",i[7]="symbol-interface",i[8]="symbol-module",i[9]="symbol-property",i[10]="symbol-event",i[11]="symbol-operator",i[12]="symbol-unit",i[13]="symbol-value",i[14]="symbol-constant",i[15]="symbol-enum",i[16]="symbol-enum-member",i[17]="symbol-keyword",i[27]="symbol-snippet",i[18]="symbol-text",i[19]="symbol-color",i[20]="symbol-file",i[21]="symbol-reference",i[22]="symbol-customcolor",i[23]="symbol-folder",i[24]="symbol-type-parameter",i[25]="account",i[26]="issues",function(e){const t=i[e];let n=t&&IF.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=_e.symbolProperty),n.classNames}}();let Kce=function(){let i=Object.create(null);return i.method=0,i.function=1,i.constructor=2,i.field=3,i.variable=4,i.class=5,i.struct=6,i.interface=7,i.module=8,i.property=9,i.event=10,i.operator=11,i.unit=12,i.value=13,i.constant=14,i.enum=15,i["enum-member"]=16,i.enumMember=16,i.keyword=17,i.snippet=27,i.text=18,i.color=19,i.file=20,i.reference=21,i.customcolor=22,i.folder=23,i["type-parameter"]=24,i.typeParameter=24,i.account=25,i.issue=26,function(e,t){let n=i[e];return typeof n>"u"&&!t&&(n=9),n}}();var Yu;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Yu||(Yu={}));var eg;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(eg||(eg={}));var IA;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(IA||(IA={}));function lNe(i){return i&&rn.isUri(i.uri)&&Q.isIRange(i.range)&&(Q.isIRange(i.originSelectionRange)||Q.isIRange(i.targetSelectionRange))}var HH;(function(i){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(o){return e.get(o)}i.fromString=n;function r(o){return t.get(o)}i.toString=r;function s(o,a){const u=t.get(o);let d=u&&IF.get("symbol-"+u);return d||(console.info("No codicon found for SymbolKind "+o),d=_e.symbolProperty),`${a?"inline":"block"} ${d.classNames}`}i.toCssClassName=s})(HH||(HH={}));class ef{constructor(e){this.value=e}}ef.Comment=new ef("comment");ef.Imports=new ef("imports");ef.Region=new ef("region");var jF;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(jF||(jF={}));const KF=new Qr,qF=new Qr,Ah=new Qr,Xq=new Qr,J1=new Qr,TA=new Qr,qc=new Qr,Ky=new Qr,GF=new Qr,kA=new Qr,YF=new Qr,ZF=new Qr,XF=new Qr,ip=new Qr,Hv=new Qr,tg=new Qr,O2=new Qr,Oh=new Qr,QF=new Qr,NA=new Qr,qy=new Qr,B8=new Qr,$H=new Qr,Gy=new Qr,W8=new Qr,Wr=new oNe;class Js{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=Js.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=n,new Js(r,e,t)}equals(e){return e instanceof Js?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const r=t<<1,s=r+(n<<1);for(let o=r;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=ia.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return ia.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return ia.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return ia.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return ia.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Js.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new Qq(this,e,t,n)}static convertToEndOffset(e,t){const r=(e.length>>>1)-1;for(let s=0;s<r;s++)e[s<<1]=e[s+1<<1];e[r<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){const s=n+Math.floor((r-n)/2),o=e[s<<1];if(o===t)return s+1;o<t?n=s+1:o>t&&(r=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,r="";const s=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,u=n<e.length?e[n]:null;if(a!==-1&&(u===null||a<=u.offset)){r+=this._text.substring(o,a);const d=this._tokens[(t<<1)+1];s.push(r.length,d),t++,o=a}else if(u){if(u.offset>o){r+=this._text.substring(o,u.offset);const d=this._tokens[(t<<1)+1];s.push(r.length,d),o=u.offset}r+=u.text,s.push(r.length,u.tokenMetadata),n++}else break}return new Js(new Uint32Array(s),r,this._languageIdCodec)}}Js.defaultTokenMetadata=(16384|2<<23)>>>0;class Qq{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof Qq?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}function Nb(i){let e=0,t=0,n=0,r=0;for(let s=0,o=i.length;s<o;s++){const a=i.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&i.charCodeAt(s+1)===10?(r|=2,s++):r|=3,n=s+1):a===10&&(r|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=i.length),[e,t,i.length-n,r]}function qJ(i){return(i<<0|0|0|16384|2<<23)>>>0}const Rg=new Uint32Array(0).buffer;class V9{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new uNe(e,[t]))}}class JF{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new Q(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const r=t+Math.floor((n-t)/2),s=this._getDeltaLine(r);if(s<e)t=r+1;else if(s>e)n=r-1;else{let o=r;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=r;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new GJ(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new GJ(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){const s=this._tokens,o=this._tokenCount;let a=0,u=!1,d=0;for(let h=0;h<o;h++){const f=4*h,p=s[f],m=s[f+1],v=s[f+2],b=s[f+3];if((p>e||p===e&&v>=t)&&(p<n||p===n&&m<=r))u=!0;else{if(a===0&&(d=p),u){const L=4*a;s[L]=p-d,s[L+1]=m,s[L+2]=v,s[L+3]=b}a++}}return this._tokenCount=a,d}split(e,t,n,r){const s=this._tokens,o=this._tokenCount;let a=[],u=[],d=a,h=0,f=0;for(let p=0;p<o;p++){const m=4*p,v=s[m],b=s[m+1],L=s[m+2],S=s[m+3];if(v>e||v===e&&L>=t){if(v<n||v===n&&b<=r)continue;d!==u&&(d=u,h=0,f=v)}d[h++]=v-f,d[h++]=b,d[h++]=L,d[h++]=S}return[new JF(new Uint32Array(a)),new JF(new Uint32Array(u)),f]}acceptDeleteRange(e,t,n,r,s){const o=this._tokens,a=this._tokenCount,u=r-t;let d=0,h=!1;for(let f=0;f<a;f++){const p=4*f;let m=o[p],v=o[p+1],b=o[p+2];const L=o[p+3];if(m<t||m===t&&b<=n){d++;continue}else if(m===t&&v<n)m===r&&b>s?b-=s-n:b=n;else if(m===t&&v===n)if(m===r&&b>s)b-=s-n;else{h=!0;continue}else if(m<r||m===r&&v<s)if(m===r&&b>s)m===t?(v=n,b=v+(b-s)):(v=0,b=v+(b-s));else{h=!0;continue}else if(m>r){if(u===0&&!h){d=a;break}m-=u}else if(m===r&&v>=s)e&&m===0&&(v+=e,b+=e),m-=u,v-=s-n,b-=s-n;else throw new Error("Not possible!");const S=4*d;o[S]=m,o[S+1]=v,o[S+2]=b,o[S+3]=L,d++}this._tokenCount=d}acceptInsertText(e,t,n,r,s,o){const a=n===0&&r===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),u=this._tokens,d=this._tokenCount;for(let h=0;h<d;h++){const f=4*h;let p=u[f],m=u[f+1],v=u[f+2];if(!(p<e||p===e&&v<t)){if(p===e&&v===t)if(a)v+=1;else continue;else if(p===e&&m<t&&t<v)n===0?v+=r:v=t;else{if(p===e&&m===t&&a)continue;if(p===e)if(p+=n,n===0)m+=r,v+=r;else{const b=v-m;m=s+(m-t),v=m+b}else p+=n}u[f]=p,u[f+1]=m,u[f+2]=v}}}}class GJ{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class e3{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new Q(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[r,s,o]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new e3(this.startLineNumber,r),new e3(this.startLineNumber+o,s)]}applyEdit(e,t){const[n,r,s]=Nb(t);this.acceptEdit(e,n,r,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,r,s){this._acceptDeleteRange(e),this._acceptInsertText(new Le(e.startLineNumber,e.startColumn),t,n,r,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const s=n-t;this.startLineNumber-=s;return}const r=this.tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const s=-t;this.startLineNumber-=s,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,s){if(t===0&&n===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,n,r,s)}}class uNe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function Pg(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class Jq{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;n=e.plusRange(s).plusRange(o)}let r=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:s};continue}const[u,d]=a.split(n);if(u.isEmpty()){r=r||{index:s};continue}d.isEmpty()||(this._pieces.splice(s,1,u,d),s++,o++,r=r||{index:s})}return r=r||{index:this._pieces.length},t.length>0&&(this._pieces=LA(this._pieces,r.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const r=Jq._findFirstPieceWithLine(n,e),s=n[r].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let u=0,d=[],h=0,f=0;const p=(m,v)=>{m!==f&&(f=m,d[h++]=m,d[h++]=v)};for(let m=0;m<a;m++){const v=s.getStartCharacter(m),b=s.getEndCharacter(m),L=s.getMetadata(m),S=((L&1?2048:0)|(L&2?4096:0)|(L&4?8192:0)|(L&8?8372224:0)|(L&16?4286578688:0))>>>0,y=~S>>>0;for(;u<o&&t.getEndOffset(u)<=v;)p(t.getEndOffset(u),t.getMetadata(u)),u++;for(u<o&&t.getStartOffset(u)<v&&p(v,t.getMetadata(u));u<o&&t.getEndOffset(u)<b;)p(t.getEndOffset(u),t.getMetadata(u)&y|L&S),u++;if(u<o)p(b,t.getMetadata(u)&y|L&S),t.getEndOffset(u)===b&&u++;else{const E=Math.min(Math.max(0,u-1),o-1);p(b,t.getMetadata(E)&y|L&S)}}for(;u<o;)p(t.getEndOffset(u),t.getMetadata(u)),u++;return new Js(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let s=n+Math.floor((r-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)r=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,r,s){for(const o of this._pieces)o.acceptEdit(e,t,n,r,s)}}class zu{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==Rg)return new Js(Pg(r),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=qJ(this._languageIdCodec.encodeLanguageId(e)),new Js(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const r=n?Pg(n):null;if(t===0){let s=!1;if(r&&r.length>1&&(s=ia.getLanguageId(r[1])!==e),!s)return Rg}if(!r||r.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=qJ(e),s.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let r=0;r<t;r++)n[r]=null;this._lineTokens=LA(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,r,s){const o=zu._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,r);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!zu._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Pg(e),r=Pg(t);if(n.length!==r.length)return!1;for(let s=0,o=n.length;s<o;s++)if(n[s]!==r[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Le(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=zu._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=zu._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let r=null;n<this._len&&(r=zu._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=zu._append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=zu._insert(this._lineTokens[r],e.column-1,n);return}this._lineTokens[r]=zu._deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=zu._insert(this._lineTokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Rg?e:zu._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Rg)return e;const n=Pg(e),r=n[n.length-2];return zu._delete(e,t,r)}static _delete(e,t,n){if(e===null||e===Rg||t===n)return e;const r=Pg(e),s=r.length>>>1;if(t===0&&r[r.length-2]===n)return Rg;const o=Js.findIndexInTokensArray(r,t),a=o>0?r[o-1<<1]:0,u=r[o<<1];if(n<u){const m=n-t;for(let v=o;v<s;v++)r[v<<1]-=m;return e}let d,h;a!==t?(r[o<<1]=t,d=o+1<<1,h=t):(d=o<<1,h=a);const f=n-t;for(let m=o+1;m<s;m++){const v=r[m<<1]-f;v>h&&(r[d++]=v,r[d++]=r[(m<<1)+1],h=v)}if(d===r.length)return e;let p=new Uint32Array(d);return p.set(r.subarray(0,d),0),p.buffer}static _append(e,t){if(t===Rg)return e;if(e===Rg)return t;if(e===null)return e;if(t===null)return null;const n=Pg(e),r=Pg(t),s=r.length>>>1;let o=new Uint32Array(n.length+r.length);o.set(n,0);let a=n.length;const u=n[n.length-2];for(let d=0;d<s;d++)o[a++]=r[d<<1]+u,o[a++]=r[(d<<1)+1];return o.buffer}static _insert(e,t,n){if(e===null||e===Rg)return e;const r=Pg(e),s=r.length>>>1;let o=Js.findIndexInTokensArray(r,t);o>0&&r[o-1<<1]===t&&o--;for(let a=o;a<s;a++)r[a<<1]+=n;return e}}class vy extends Oe{constructor(e,t,n,r,s,o,a){super(),this._onDidChangeContent=this._register(new Ce),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new Ake(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const r=this.getPositionAt(e),s=this.getPositionAt(n);return new Q(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const r=e.startLineNumber,s=e.endLineNumber;for(let o=r;o<=s;o++){const a=this.getLineContent(o),u=o===r?e.startColumn-1:0,d=o===s?e.endColumn-1:a.length;for(let h=u;h<d;h++)Ws(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-r),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Ta(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Qf(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let r=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,u=[];for(let b=0;b<e.length;b++){let L=e[b];a&&L._isTracked&&(a=!1);let S=L.range;if(L.text){let V=!0;o||(V=!wq(L.text),o=V),!r&&V&&(r=p8(L.text)),!s&&V&&(s=yue(L.text))}let y="",E=0,A=0,N=0;if(L.text){let V;[E,A,N,V]=Nb(L.text);const M=this.getEOL();V===0||V===(M===`\r
`?2:1)?y=L.text:y=L.text.replace(/\r\n|\r|\n/g,M)}u[b]={sortIndex:b,identifier:L.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:y,eolCount:E,firstLineLength:A,lastLineLength:N,forceMoveMarkers:!!L.forceMoveMarkers,isAutoWhitespaceEdit:L.isAutoWhitespaceEdit||!1}}u.sort(vy._sortOpsAscending);let d=!1;for(let b=0,L=u.length-1;b<L;b++){let S=u[b].range.getEndPosition(),y=u[b+1].range.getStartPosition();if(y.isBeforeOrEqual(S)){if(y.isBefore(S))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(u=this._reduceOperations(u));let h=n||t?vy._getInverseEditRanges(u):[],f=[];if(t)for(let b=0;b<u.length;b++){let L=u[b],S=h[b];if(L.isAutoWhitespaceEdit&&L.range.isEmpty())for(let y=S.startLineNumber;y<=S.endLineNumber;y++){let E="";y===S.startLineNumber&&(E=this.getLineContent(L.range.startLineNumber),Ta(E)!==-1)||f.push({lineNumber:y,oldContent:E})}}let p=null;if(n){let b=0;p=[];for(let L=0;L<u.length;L++){const S=u[L],y=h[L],E=this.getValueInRange(S.range),A=S.rangeOffset+b;b+=S.text.length-E.length,p[L]={sortIndex:S.sortIndex,identifier:S.identifier,range:y,text:E,textChange:new Do(S.rangeOffset,E,A,S.text)}}d||p.sort((L,S)=>L.sortIndex-S.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const m=this._doApplyEdits(u);let v=null;if(t&&f.length>0){f.sort((b,L)=>L.lineNumber-b.lineNumber),v=[];for(let b=0,L=f.length;b<L;b++){let S=f[b].lineNumber;if(b>0&&f[b-1].lineNumber===S)continue;let y=f[b].oldContent,E=this.getLineContent(S);E.length===0||E===y||Ta(E)!==-1||v.push(S)}}return this._onDidChangeContent.fire(),new GTe(p,m,v)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,r=e[e.length-1].range,s=new Q(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn);let o=n.startLineNumber,a=n.startColumn;const u=[];for(let m=0,v=e.length;m<v;m++){const b=e[m],L=b.range;t=t||b.forceMoveMarkers,u.push(this.getValueInRange(new Q(o,a,L.startLineNumber,L.startColumn))),b.text.length>0&&u.push(b.text),o=L.endLineNumber,a=L.endColumn}const d=u.join(""),[h,f,p]=Nb(d);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:d,eolCount:h,firstLineLength:f,lastLineLength:p,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(vy._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let r=e[n];const s=r.range.startLineNumber,o=r.range.startColumn,a=r.range.endLineNumber,u=r.range.endColumn;if(s===a&&o===u&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const d=new Q(s,o,a,u);t.push({range:d,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}static _getInverseEditRanges(e){let t=[],n=0,r=0,s=null;for(let o=0,a=e.length;o<a;o++){let u=e[o],d,h;s?s.range.endLineNumber===u.range.startLineNumber?(d=n,h=r+(u.range.startColumn-s.range.endColumn)):(d=n+(u.range.startLineNumber-s.range.endLineNumber),h=u.range.startColumn):(d=u.range.startLineNumber,h=u.range.startColumn);let f;if(u.text.length>0){const p=u.eolCount+1;p===1?f=new Q(d,h,d,h+u.firstLineLength):f=new Q(d,h,d+p-1,u.lastLineLength+1)}else f=new Q(d,h,d,h);n=f.endLineNumber,r=f.endColumn,t.push(f),s=u}return t}static _sortOpsAscending(e,t){let n=Q.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=Q.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class cNe{constructor(e,t,n,r,s,o,a,u,d){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=u,this._normalizeEOL=d}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=n.length;s<o;s++){let a=n[s].buffer.replace(/\r\n|\r|\n/g,t),u=jg(a);n[s]=new C1(a,u)}const r=new vy(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class dNe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&yq(e)&&(this.BOM=ixe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=Tke(this._tmpLineStarts,e);this.chunks.push(new C1(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=p8(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=yue(e))}finish(e=!0){return this._finish(),new cNe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=jg(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class hNe{constructor(){this.changeType=1}}class tf{constructor(e,t,n,r,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=s}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",r=0;for(const s of t)n+=e.substring(r,s.column-1),r=s.column-1,n+=s.options.content;return n+=e.substring(r),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new tf(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new tf(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,r)=>n.lineNumber===r.lineNumber?n.column===r.column?n.order-r.order:n.column-r.column:n.lineNumber-r.lineNumber),t}}class YJ{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class fNe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class gNe{constructor(e,t,n,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class pNe{constructor(){this.changeType=5}}class eb{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new eb(n,r,s,o)}}class qce{constructor(e){this.changes=e}}class t3{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=eb.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=t3._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new t3(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,u=e.isFlush||t.isFlush;return{changes:n,eol:r,versionId:s,isUndoing:o,isRedoing:a,isFlush:u}}}let V8=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class eG{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class H8{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}class mNe{clone(){return this}equals(e){return this===e}}const dM=new mNe,L0="vs.editor.nullMode";function Gce(i,e,t,n){return new eG([new V8(n,"",i)],t)}function tG(i,e,t,n){let r=new Uint32Array(2);return r[0]=n,r[1]=(i<<0|0|0|16384|2<<23)>>>0,new H8(r,t===null?dM:t)}class _Ne{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],r=[];for(let s=0;s<t;s++)n[s]=null,r[s]=!1;this._beginState=LA(this._beginState,e,n),this._valid=LA(this._valid,e,r),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const r=this.getBeginState(t+1);if(r===null||!n.equals(r)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let s=t+1;for(;s<e&&this._isValid(s);)s++;this._invalidLineStartIndex=s}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,s=Math.min(n,t);for(let o=s;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new Le(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class vNe extends Oe{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=new _Ne,this._tokenizationSupport=null,this._register(Wr.onDidChange(n=>{const r=this._textModel.getLanguageId();n.changedLanguages.indexOf(r)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let r=0,s=n.changes.length;r<s;r++){const o=n.changes[r],[a]=Nb(o.text);this._tokenizationStateStore.applyEdits(o.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=bNe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,bA(e=>{this._isScheduled=!1,!this._isDisposed&&this._revalidateTokensNow(e)}))}_revalidateTokensNow(e){const t=this._textModel.getLineCount(),n=1,r=new V9,s=ig.create(!1);let o=-1;do if(s.elapsed()>n||(o=this._tokenizeOneInvalidLine(r),o>=t))break;while(this._hasLinesToTokenize()&&e.timeRemaining()>0);this._beginBackgroundTokenization(),this._textModel.setTokens(r.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new V9;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new V9;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationSupport)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const r=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=AR(this._languageIdCodec,r,this._tokenizationSupport,o,!0,n),u=new Js(a.tokens,o,this._languageIdCodec);if(u.getCount()===0)return 0;const d=u.findTokenIndexAtOffset(e.column-1);return u.getStandardTokenType(d)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),r=this._textModel.getLineCount(),s=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=s;o++){const a=this._textModel.getLineContent(o+1),u=this._tokenizationStateStore.getBeginState(o),d=AR(this._languageIdCodec,n,this._tokenizationSupport,a,!0,u);e.add(o+1,d.tokens),this._tokenizationStateStore.setEndState(r,o,d.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let r=this._textModel.getLineFirstNonWhitespaceColumn(t);const s=[];let o=null;for(let d=t-1;r>1&&d>=1;d--){const h=this._textModel.getLineFirstNonWhitespaceColumn(d);if(h!==0&&h<r){if(o=this._tokenizationStateStore.getBeginState(d-1),o)break;s.push(this._textModel.getLineContent(d)),r=h}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let u=o;for(let d=s.length-1;d>=0;d--)u=AR(this._languageIdCodec,a,this._tokenizationSupport,s[d],!1,u).endState;for(let d=t;d<=n;d++){const h=this._textModel.getLineContent(d),f=AR(this._languageIdCodec,a,this._tokenizationSupport,h,!0,u);e.add(d,f.tokens),this._tokenizationStateStore.setFakeTokens(d-1),u=f.endState}}}function bNe(i){const e=i.getLanguageId();let t=i.isTooLargeForTokenization()?null:Wr.get(e),n=null;if(t)try{n=t.getInitialState()}catch(r){gn(r),t=null}return[t,n]}function AR(i,e,t,n,r,s){let o=null;if(t)try{o=t.tokenize2(n,r,s.clone(),0)}catch(a){gn(a)}return o||(o=tG(i.encodeLanguageId(e),n,s,0)),Js.convertToEndOffset(o.tokens,n.length),o}var cs;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(cs||(cs={}));class H9{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(n);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const r=String.fromCharCode(n);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class CNe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)EN(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),EN(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),EN(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),EN(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&EN(this.autoClosingPairsCloseSingleChar,t.close,t)}}function EN(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function s4(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),r=i.getLanguageId(n),s=n;for(;s+1<t&&i.getLanguageId(s+1)===r;)s++;let o=n;for(;o>0&&i.getLanguageId(o-1)===r;)o--;return new wNe(i,r,o,s+1,i.getStartOffset(o),i.getEndOffset(s))}class wNe{constructor(e,t,n,r,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=s,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function bf(i){return(i&7)!==0}class hM{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new H9(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new H9({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=ZJ(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=ZJ(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new H9({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:hM.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}hM.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function ZJ(i){return i.filter(([e,t])=>e!==""&&t!=="")}class n3{constructor(e,t,n,r,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=r,this.forwardRegex=s,this.reversedRegex=o,this._openSet=n3._toSet(this.open),this._closeSet=n3._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function yNe(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[u,d]=o,[h,f]=a;return u===h||u===f||d===h||d===f},r=(o,a)=>{const u=Math.min(o,a),d=Math.max(o,a);for(let h=0;h<e;h++)t[h]===d&&(t[h]=u)};for(let o=0;o<e;o++){const a=i[o];for(let u=o+1;u<e;u++){const d=i[u];n(a,d)&&r(t[o],t[u])}}const s=[];for(let o=0;o<e;o++){let a=[],u=[];for(let d=0;d<e;d++)if(t[d]===o){const[h,f]=i[d];a.push(h),u.push(f)}a.length>0&&s.push({open:a,close:u})}return s}class SNe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=yNe(t);this.brackets=n.map((r,s)=>new n3(e,s,r.open,r.close,LNe(r.open,r.close,n,s),ENe(r.open,r.close,n,s))),this.forwardRegex=xNe(this.brackets),this.reversedRegex=DNe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const r of this.brackets){for(const s of r.open)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of r.close)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function Yce(i,e,t,n){for(let r=0,s=e.length;r<s;r++){if(r===t)continue;const o=e[r];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function Zce(i,e){return i.length-e.length}function $8(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function LNe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)Yce(r[s],t,n,r);return r=$8(r),r.sort(Zce),r.reverse(),z8(r)}function ENe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)Yce(r[s],t,n,r);return r=$8(r),r.sort(Zce),r.reverse(),z8(r.map(nG))}function xNe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=$8(e),z8(e)}function DNe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=$8(e),z8(e.map(nG))}function INe(i){const e=/^[\w ]+$/.test(i);return i=dc(i),e?`\\b${i}\\b`:i}function z8(i){let e=`(${i.map(INe).join(")|(")})`;return Cue(e,!0)}const nG=function(){function i(n){if(xce){const r=new Uint16Array(n.length);let s=0;for(let o=n.length-1;o>=0;o--)r[s++]=n.charCodeAt(o);return Ece().decode(r)}else{let r=[],s=0;for(let o=n.length-1;o>=0;o--)r[s++]=n.charAt(o);return r.join("")}}let e=null,t=null;return function(r){return e!==r&&(e=r,t=i(e)),t}}();class kc{static _findPrevBracketInText(e,t,n,r){let s=n.match(e);if(!s)return null;let o=n.length-(s.index||0),a=s[0].length,u=r+o;return new Q(t,u-a+1,t,u+1)}static findPrevBracketInRange(e,t,n,r,s){const a=nG(n).substring(n.length-s,n.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,n,r){let s=n.match(e);if(!s)return null;let o=s.index||0,a=s[0].length;if(a===0)return null;let u=r+o;return new Q(t,u+1,t,u+1+a)}static findNextBracketInRange(e,t,n,r,s){const o=n.substring(r,s);return this.findNextBracketInText(e,t,o,r)}}class TNe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const r=n.charAt(n.length-1);e.push(r)}return Eb(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const r=t.findTokenIndexAtOffset(n-1);if(bf(t.getStandardTokenType(r)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=kc.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const u=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[u])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:u}:null}}function OR(i){return i.global&&(i.lastIndex=0),!0}class kNe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&OR(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&OR(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&OR(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&OR(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Fw{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Fw._createOpenBracketRegExp(t[0]),r=Fw._createCloseBracketRegExp(t[1]);n&&r&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:r})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,r){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){let a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:r},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&r.length>0)for(let s=0,o=this._brackets.length;s<o;s++){let a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(r))return{indentAction:cs.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:cs.Indent}}return null}static _createOpenBracketRegExp(e){let t=dc(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Fw._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=dc(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Fw._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return gn(t),null}}}const nr=gi("configurationService");function Xce(i,e){const t=Object.create(null);for(let n in i)iG(t,n,i[n],e);return t}function iG(i,e,t,n){const r=e.split("."),s=r.pop();let o=i;for(let a=0;a<r.length;a++){let u=r[a],d=o[u];switch(typeof d){case"undefined":d=o[u]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(d)}`);return}o=d}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}function NNe(i,e){const t=e.split(".");Qce(i,t)}function Qce(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(Qce(n,e),Object.keys(n).length===0&&delete i[t])}}function ANe(i,e,t){function n(o,a){let u=o;for(const d of a){if(typeof u!="object"||u===null)return;u=u[d]}return u}const r=e.split("."),s=n(i,r);return typeof s>"u"?t:s}const Fo=gi("modeService");class Tv{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const Jce=[];function U0(i,e,t){e instanceof Tv||(e=new Tv(e,[],t)),Jce.push([i,e])}function ONe(){return Jce}var MNe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},XJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class $9{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const fM=gi("languageConfigurationService");let i3=class extends Oe{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new Ce),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(zH));this._register(this.configurationService.onDidChangeConfiguration(r=>{const s=r.change.keys.some(a=>n.has(a)),o=r.change.overrides.filter(([a,u])=>u.some(d=>n.has(d))).map(([a])=>this.modeService.validateLanguageId(a));if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new $9(void 0));else for(const a of o)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new $9(a)))})),this._register(_i.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new $9(r.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=RNe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};i3=MNe([XJ(0,nr),XJ(1,Fo)],i3);function RNe(i,e,t){let n=_i.getLanguageConfiguration(i);if(!n){const a=t.validateLanguageId(i);if(!a)throw new Error("Unexpected languageId");n=new AA(a,{})}const r=PNe(n.languageId,e),s=ede([n.underlyingConfig,r]);return new AA(n.languageId,s)}const zH={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function PNe(i,e){const t=e.getValue(zH.brackets,{overrideIdentifier:i}),n=e.getValue(zH.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:QJ(t),colorizedBracketPairs:QJ(n)}}function QJ(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class JJ{constructor(e){this.languageId=e}}class FNe{constructor(){this._entries=new Map,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let r=this._entries.get(e);r||(r=new BNe(e),this._entries.set(e,r));const s=r.register(t,n);return this._onDidChange.fire(new JJ(e)),Un(()=>{s.dispose(),this._onDidChange.fire(new JJ(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let r=s4(t,n-1),s=this._getElectricCharacterSupport(r.languageId);return s?s.onElectricCharacter(e,r,n-r.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new CNe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():hM.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return BF(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let r=e.getLanguageIdAtPosition(t,0);if(t>1){let s,o=-1;for(s=t-1;s>=1;s--){if(e.getLanguageIdAtPosition(s,0)!==r)return o;let a=e.getLineContent(s);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=s;continue}return s}}return-1}getInheritIndentForLine(e,t,n,r=!0){if(e<4)return null;const s=this.getIndentRulesSupport(t.getLanguageId());if(!s)return null;if(n<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,n,s);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:zi(a),action:cs.Indent,line:o};if(s.shouldDecrease(a))return{indentation:zi(a),action:null,line:o};{if(o===1)return{indentation:zi(t.getLineContent(o)),action:null,line:o};const u=o-1,d=s.getIndentMetadata(t.getLineContent(u));if(!(d&3)&&d&4){let h=0;for(let f=u-1;f>0;f--)if(!s.shouldIndentNextLine(t.getLineContent(f))){h=f;break}return{indentation:zi(t.getLineContent(h+1)),action:null,line:h+1}}if(r)return{indentation:zi(t.getLineContent(o)),action:null,line:o};for(let h=o;h>0;h--){const f=t.getLineContent(h);if(s.shouldIncrease(f))return{indentation:zi(f),action:cs.Indent,line:h};if(s.shouldIndentNextLine(f)){let p=0;for(let m=h-1;m>0;m--)if(!s.shouldIndentNextLine(t.getLineContent(h))){p=m;break}return{indentation:zi(t.getLineContent(p+1)),action:null,line:p+1}}else if(s.shouldDecrease(f))return{indentation:zi(f),action:null,line:h}}return{indentation:zi(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,r,s){if(e<4)return null;const o=this.getLanguageConfiguration(n);if(!o)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const u=this.getInheritIndentForLine(e,t,r),d=t.getLineContent(r);if(u){const h=u.line;if(h!==void 0){const f=o.onEnter(e,"",t.getLineContent(h),"");if(f){let p=zi(t.getLineContent(h));return f.removeText&&(p=p.substring(0,p.length-f.removeText)),f.indentAction===cs.Indent||f.indentAction===cs.IndentOutdent?p=s.shiftIndent(p):f.indentAction===cs.Outdent&&(p=s.unshiftIndent(p)),a.shouldDecrease(d)&&(p=s.unshiftIndent(p)),f.appendText&&(p+=f.appendText),zi(p)}}return a.shouldDecrease(d)?u.action===cs.Indent?u.indentation:s.unshiftIndent(u.indentation):u.action===cs.Indent?s.shiftIndent(u.indentation):u.indentation}return null}getIndentForEnter(e,t,n,r){if(e<4)return null;t.forceTokenization(n.startLineNumber);const s=t.getLineTokens(n.startLineNumber),o=s4(s,n.startColumn-1),a=o.getLineContent();let u=!1,d;o.firstCharOffset>0&&s.getLanguageId(0)!==o.languageId?(u=!0,d=a.substr(0,n.startColumn-1-o.firstCharOffset)):d=s.getLineContent().substring(0,n.startColumn-1);let h;n.isEmpty()?h=a.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const f=this.getIndentRulesSupport(o.languageId);if(!f)return null;const p=d,m=zi(d),v={getLineTokens:y=>t.getLineTokens(y),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(y,E)=>t.getLanguageIdAtPosition(y,E),getLineContent:y=>y===n.startLineNumber?p:t.getLineContent(y)},b=zi(s.getLineContent()),L=this.getInheritIndentForLine(e,v,n.startLineNumber+1);if(!L){const y=u?b:m;return{beforeEnter:y,afterEnter:y}}let S=u?b:L.indentation;return L.action===cs.Indent&&(S=r.shiftIndent(S)),f.shouldDecrease(h)&&(S=r.unshiftIndent(S)),{beforeEnter:u?b:m,afterEnter:S}}getIndentActionForType(e,t,n,r,s){if(e<4)return null;const o=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const u=o.getLineContent(),d=u.substr(0,n.startColumn-1-o.firstCharOffset);let h;if(n.isEmpty()?h=u.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset),!a.shouldDecrease(d+h)&&a.shouldDecrease(d+r+h)){const f=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!f)return null;let p=f.indentation;return f.action!==cs.Indent&&(p=s.unshiftIndent(p)),p}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const r=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),s=this.getLanguageConfiguration(r.languageId);if(!s)return null;const o=r.getLineContent(),a=o.substr(0,n.startColumn-1-r.firstCharOffset);let u;n.isEmpty()?u=o.substr(n.startColumn-1-r.firstCharOffset):u=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-r.firstCharOffset);let d="";if(n.startLineNumber>1&&r.firstCharOffset===0){const b=this.getScopedLineTokens(t,n.startLineNumber-1);b.languageId===r.languageId&&(d=b.getLineContent())}const h=s.onEnter(e,d,a,u);if(!h)return null;const f=h.indentAction;let p=h.appendText;const m=h.removeText||0;p?f===cs.Indent&&(p="	"+p):f===cs.Indent||f===cs.IndentOutdent?p="	":p="";let v=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return m&&(v=v.substring(0,v.length-m)),{indentAction:f,appendText:p,removeText:m,indentation:v}}getIndentationAtPosition(e,t,n){const r=e.getLineContent(t);let s=zi(r);return s.length>n-1&&(s=s.substring(0,n-1)),s}getScopedLineTokens(e,t,n){e.forceTokenization(t);const r=e.getLineTokens(t),s=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return s4(r,s)}}const _i=new FNe;class BNe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new eee(e,t,++this._order);return this._entries.push(n),this._resolved=null,Un(()=>{for(let r=0;r<this._entries.length;r++)if(this._entries[r]===n){this._entries.splice(r,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new AA(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(eee.cmp),ede(this._entries.map(e=>e.configuration)))}}function ede(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class eee{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class AA{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Fw(this.underlyingConfig):null,this.comments=AA._handleComments(this.underlyingConfig),this.characterPair=new hM(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Wue,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new kNe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return BF(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new SNe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new TNe(this.brackets)),this._electricCharacter}onEnter(e,t,n,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,r):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[r,s]=t.blockComment;n.blockCommentStartToken=r,n.blockCommentEndToken=s}return n}}U0(fM,i3);const gM=gi("undoRedoService");class tde{constructor(e,t){this.resource=e,this.elements=t}}class Yy{constructor(){this.id=Yy._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Yy._ID=0;Yy.None=new Yy;class Ff{constructor(){this.id=Ff._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Ff._ID=0;Ff.None=new Ff;class tee{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class WNe{constructor(e,t,n,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r}}class VNe extends WNe{constructor(e,t,n,r,s){super(e,t,n,r),this.minVisibleColumnIndentation=s}}class HNe{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function $Ne(i,e,t,n){return i!==t?Gr(t-i,n):Gr(0,n-e)}const Op=0;function zNe(i){return i===0}const Nu=Math.pow(2,26);function Gr(i,e){return i*Nu+e}function a0(i){const e=i,t=Math.floor(e/Nu),n=e-t*Nu;return new HNe(t,n)}function UNe(i){return Math.floor(i/Nu)}function ko(i,e){return e<Nu?i+e:i-i%Nu+e}function jNe(i,e){const t=i,n=e;if(n-t<=0)return Op;const s=Math.floor(t/Nu),o=Math.floor(n/Nu),a=n-o*Nu;if(s===o){const u=t-s*Nu;return Gr(0,a-u)}else return Gr(o-s,a)}function o4(i,e){return i<e}function F1(i,e){return i<=e}function MR(i,e){return i>=e}function RR(i){return Gr(i.lineNumber-1,i.column-1)}function M2(i,e){const t=i,n=Math.floor(t/Nu),r=t-n*Nu,s=e,o=Math.floor(s/Nu),a=s-o*Nu;return new Q(n+1,r+1,o+1,a+1)}function KNe(i){const e=sg(i);return Gr(e.length-1,e[e.length-1].length)}class nee{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class qNe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>rG.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return jNe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Gr(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Gr(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=a0(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Gr(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Gr(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(F1(n,e)){this.nextEditIdx++;const r=a0(n),s=a0(this.translateOldToCur(t.endOffsetBeforeObj)),o=r.lineCount-s.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,u=r.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+u,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class rG{constructor(e,t,n){this.endOffsetBeforeObj=a0(t),this.endOffsetAfterObj=a0(ko(e,n)),this.offsetObj=a0(e)}static from(e){return new rG(e.startOffset,e.endOffset,e.newLength)}}class ur{static visibleColumnFromColumn(e,t,n){const r=e.length,s=t-1<r?t-1:r;let o=0,a=0;for(;a<s;){const u=P1(e,s,a);if(a+=u>=65536?2:1,u===9)o=ur.nextRenderTabStop(o,n);else{let d=LR(u);for(;a<s;){const h=P1(e,s,a),f=LR(h);if(OF(d,f))break;a+=h>=65536?2:1,d=f}og(u)||AF(u)?o=o+2:o=o+1}}return o}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const r=e.length;let s=0,o=1,a=0;for(;a<r;){const u=P1(e,r,a);a+=u>=65536?2:1;let d;if(u===9)d=ur.nextRenderTabStop(s,n);else{let f=LR(u);for(;a<r;){const p=P1(e,r,a),m=LR(p);if(OF(f,m))break;a+=p>=65536?2:1,f=m}og(u)||AF(u)?d=s+2:d=s+1}const h=a+1;if(d>=t){const f=t-s;return d-t<f?h:o}s=d,o=h}return r+1}static columnFromVisibleColumn2(e,t,n,r){let s=this.columnFromVisibleColumn(t.getLineContent(n),r,e.tabSize),o=t.getLineMinColumn(n);if(s<o)return o;let a=t.getLineMaxColumn(n);return s>a?a:s}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const a4=new Array;class ws{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=ws.cache[e];return n||(n=new ws(e,t),ws.cache[e]=n),n}return new ws(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let r=n>>5;if(r===0){const o=1<<n|this.items;return o===this.items?this:ws.create(o,this.additionalItems)}r--;const s=this.additionalItems.slice(0);for(;s.length<r;)s.push(0);return s[r]|=1<<(n&31),ws.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===a4&&e.additionalItems===a4)return t===this.items?this:t===e.items?e:ws.create(t,a4);const n=new Array;for(let r=0;r<Math.max(this.additionalItems.length,e.additionalItems.length);r++){const s=this.additionalItems[r]||0,o=e.additionalItems[r]||0;n.push(s|o)}return ws.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}ws.cache=new Array(129);ws.empty=ws.create(0,a4);const iee={getKey(i){return i}};class GNe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class sG{constructor(e){this._length=e}get length(){return this._length}}class OA extends sG{constructor(e,t,n,r,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=s}static create(e,t,n){let r=e.length;return t&&(r=ko(r,t.length)),n&&(r=ko(r,n.length)),new OA(r,e,t,n,t?t.missingOpeningBracketIds:ws.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new OA(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(ko(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class lg extends sG{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,r=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=ko(s,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=ko(s,n.length),o=o.merge(n.missingOpeningBracketIds)}return r?new YNe(s,e.listHeight+1,e,t,n,o):new MA(s,e.listHeight+1,e,t,n,o)}static getEmpty(){return new ZNe(Op,0,[],ws.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const s=this.getChild(r);t=ko(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,r=e;for(let s=0;s<this.childrenLength;s++){const o=this.getChild(s);o&&(n=Math.min(n,o.computeMinIndentation(r,t)),r=ko(r,o.length))}return this.cachedMinIndentation=n,n}}class MA extends lg{constructor(e,t,n,r,s,o){super(e,t,o),this._item1=n,this._item2=r,this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new MA(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class YNe extends MA{toMutable(){return new MA(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class r3 extends lg{constructor(e,t,n,r){super(e,t,r),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new r3(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class ZNe extends r3{toMutable(){return new r3(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const XNe=[];class oG extends sG{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return XNe}deepClone(){return this}}class gw extends oG{get kind(){return 0}get missingOpeningBracketIds(){return ws.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=a0(e),r=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=UNe(ko(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=r;a<=s;a++){const u=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(u===0)continue;const h=ur.visibleColumnFromColumn(d,u,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class tb extends oG{constructor(e){super(e)}static create(e){const t=e,n=tb.cacheByLength.get(t);if(n)return n;const r=new tb(e);return tb.cacheByLength.set(t,r),r}get kind(){return 1}get missingOpeningBracketIds(){return ws.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}tb.cacheByLength=new Map;class QNe extends oG{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Ov=class{constructor(e,t,n,r,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=s}};class JNe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new e2e(this.textModel,this.bracketTokens),this._offset=Op,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Gr(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=ko(this._offset,e);const t=a0(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=ko(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class e2e{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,o=s.getCount();let a=null;if(this.lineTokenOffset<o){const u=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&u===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const d=ia.getTokenType(u)===0,h=s.getEndOffset(this.lineTokenOffset);if(d&&h!==this.lineCharOffset){const f=s.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,h),m=this.bracketTokens.getSingleLanguageBracketTokens(f),v=m.regExpGlobal;if(v){v.lastIndex=0;const b=v.exec(p);b&&(a=m.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const r=$Ne(e,t,this.lineIdx,this.lineCharOffset);return new Ov(r,0,-1,ws.getEmpty(),new gw(r))}}class t2e{constructor(e,t){this.text=e,this._offset=Op,this.idx=0;const r=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,s=[];let o,a=0,u=0,d=0,h=0;const f=new Array;for(let v=0;v<60;v++)f.push(new Ov(Gr(0,v),0,-1,ws.getEmpty(),new gw(Gr(0,v))));const p=new Array;for(let v=0;v<60;v++)p.push(new Ov(Gr(1,v),0,-1,ws.getEmpty(),new gw(Gr(1,v))));if(r)for(r.lastIndex=0;(o=r.exec(e))!==null;){const v=o.index,b=o[0];if(b===`
`)a++,u=v+1;else{if(d!==v){let L;if(h===a){const S=v-d;if(S<f.length)L=f[S];else{const y=Gr(0,S);L=new Ov(y,0,-1,ws.getEmpty(),new gw(y))}}else{const S=a-h,y=v-u;if(S===1&&y<p.length)L=p[y];else{const E=Gr(S,y);L=new Ov(E,0,-1,ws.getEmpty(),new gw(E))}}s.push(L)}s.push(t.getToken(b)),d=v+b.length,h=a}}const m=e.length;if(d!==m){const v=h===a?Gr(0,m-d):Gr(a-h,m-u);s.push(new Ov(v,0,-1,ws.getEmpty(),new gw(v)))}this.length=Gr(a,m-u),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new DLe}}class s3{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(u,d){return t.getKey(`${u}:::${d}`)}const r=e.characterPair.getColorizedBrackets(),s=new Map,o=new Set;for(const[u,d]of r){o.add(u);let h=s.get(d);const f=n(e.languageId,u);h||(h={openingBrackets:ws.getEmpty(),first:f},s.set(d,h)),h.openingBrackets=h.openingBrackets.add(f,iee)}const a=new Map;for(const[u,d]of s){const h=Gr(0,u.length);a.set(u,new Ov(h,2,d.first,d.openingBrackets,tb.create(h)))}for(const u of o){const d=Gr(0,u.length),h=n(e.languageId,u);a.set(u,new Ov(d,1,h,ws.getEmpty().add(h,iee),tb.create(d)))}return new s3(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>n2e(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function n2e(i){const e=dc(i);return/^[\w ]+$/.test(i)?`\\b${e}\\b`:e}class i2e{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=s3.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=s3.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function r2e(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?nde(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),r=t();if(!r)return n;for(let o=t();o;o=t())ree(n,r)<=ree(r,o)?(n=z9(n,r),r=o):r=z9(r,o);return z9(n,r)}function nde(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let r=0;r<n;r++){const s=r<<1;i[r]=lg.create23(i[s],i[s+1],s+3===t?i[s+2]:null,e)}t=n}return lg.create23(i[0],i[1],t>=3?i[2]:null,e)}function ree(i,e){return Math.abs(i.listHeight-e.listHeight)}function z9(i,e){return i.listHeight===e.listHeight?lg.create23(i,e,null,!1):i.listHeight>e.listHeight?s2e(i,e):o2e(e,i)}function s2e(i,e){i=i.toMutable();let t=i;const n=new Array;let r;for(;;){if(e.listHeight===t.listHeight){r=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const o=n[s];r?o.childrenLength>=3?r=lg.create23(o.unappendChild(),r,null,!1):(o.appendChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?lg.create23(i,r,null,!1):i}function o2e(i,e){i=i.toMutable();let t=i;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let r=e;for(let s=n.length-1;s>=0;s--){const o=n[s];r?o.childrenLength>=3?r=lg.create23(r,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?lg.create23(r,i,null,!1):i}class a2e{constructor(e){this.lastOffset=Op,this.nextNodes=[e],this.offsets=[Op],this.idxs=[]}readLongestNodeAt(e,t){if(o4(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=xN(this.nextNodes);if(!n)return;const r=xN(this.offsets);if(o4(e,r))return;if(o4(r,e))if(ko(r,n.length)<=e)this.nextNodeAfterCurrent();else{const s=U9(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(r),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=U9(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(r),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=xN(this.offsets),t=xN(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=xN(this.nextNodes),r=U9(n,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(n.getChild(r)),this.offsets.push(ko(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}}function U9(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function xN(i){return i.length>0?i[i.length-1]:void 0}function see(i,e,t,n){return new l2e(i,e,t,n).parseDocument()}class l2e{constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw new Error("Not supported");this.oldNodeReader=n?new a2e(n):void 0,this.positionMapper=new qNe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(ws.getEmpty());return e||(e=lg.getEmpty()),e}parseList(e){const t=new Array;for(;;){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;const s=this.parseChild(e);s.kind===4&&s.childrenLength===0||t.push(s)}return this.oldNodeReader?r2e(t):nde(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!zNe(n)){const r=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>o4(s.length,n)?s.canBeReused(e):!1);if(r)return this._itemsFromCache++,this.tokenizer.skip(r.length),r}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new QNe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),r=this.parseList(n),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===t.bracketId||s.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),OA.create(t.astNode,r,s.astNode)):OA.create(t.astNode,r,null);default:throw new Error("unexpected")}}}class u2e extends Oe{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Ce,this.denseKeyProvider=new GNe,this.brackets=new i2e(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const r=n.map(s=>new nee(Gr(s.fromLineNumber-1,0),Gr(s.toLineNumber,0),Gr(s.toLineNumber-s.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(r,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new t2e(this.textModel.getValue(),n);this.initialAstWithoutTokens=see(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const r=Q.lift(n.range);return new nee(RR(r.getStartPosition()),RR(r.getEndPosition()),KNe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const r=t,s=new JNe(this.textModel,this.brackets);return see(s,e,r,n)}getBracketsInRange(e){const t=Gr(e.startLineNumber-1,e.startColumn-1),n=Gr(e.endLineNumber-1,e.endColumn-1),r=new Array,s=this.initialAstWithoutTokens||this.astWithTokens;return t2(s,Op,s.length,t,n,r),r}getBracketPairsInRange(e,t){const n=new Array,r=RR(e.getStartPosition()),s=RR(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new c2e(n,t,this.textModel);return ide(o,Op,o.length,r,s,a),n}}function t2(i,e,t,n,r,s,o=0){if(i.kind===1){const a=M2(e,t);s.push(new tee(a,o-1,!1))}else if(i.kind===3){const a=M2(e,t);s.push(new tee(a,o-1,!0))}else if(i.kind===4)for(const a of i.children)t=ko(e,a.length),F1(e,r)&&MR(t,n)&&t2(a,e,t,n,r,s,o),e=t;else if(i.kind===2){o++;{const a=i.openingBracket;t=ko(e,a.length),F1(e,r)&&MR(t,n)&&t2(a,e,t,n,r,s,o),e=t}if(i.child){const a=i.child;t=ko(e,a.length),F1(e,r)&&MR(t,n)&&t2(a,e,t,n,r,s,o),e=t}if(i.closingBracket){const a=i.closingBracket;t=ko(e,a.length),F1(e,r)&&MR(t,n)&&t2(a,e,t,n,r,s,o),e=t}}}class c2e{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function ide(i,e,t,n,r,s,o=0){var a;if(i.kind===2){const d=ko(e,i.openingBracket.length);let h=-1;s.includeMinIndentation&&(h=i.computeMinIndentation(e,s.textModel)),s.result.push(new VNe(M2(e,t),M2(e,d),i.closingBracket?M2(ko(d,((a=i.child)===null||a===void 0?void 0:a.length)||Op),t):void 0,o,h)),o++}let u=e;for(const d of i.children){const h=u;u=ko(u,d.length),F1(h,r)&&F1(n,u)&&ide(d,h,u,n,r,s,o)}}class d2e extends Oe{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Oa),this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(e.onDidChangeLanguage(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(this.languageConfigurationService.onDidChange(n=>{var r;(!n.languageId||!((r=this.bracketPairsTree.value)===null||r===void 0)&&r.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new Je;this.bracketPairsTree.value=h2e(e.add(new u2e(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}handleContentChanged(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t){let n=e.toLowerCase(),r=this.textModel.validatePosition(t);const s=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);let o=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!o)return null;let a=o.textIsBracket[n];return a?PR(this._findMatchingBracketUp(a,r,null)):null}matchBracket(e){return this._matchBracket(this.textModel.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,r){const s=t.getCount(),o=t.getLanguageId(r);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let d=r-1;d>=0;d--){const h=t.getEndOffset(d);if(h<=a)break;if(bf(t.getStandardTokenType(d))||t.getLanguageId(d)!==o){a=h;break}}let u=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let d=r+1;d<s;d++){const h=t.getStartOffset(d);if(h>=u)break;if(bf(t.getStandardTokenType(d))||t.getLanguageId(d)!==o){u=h;break}}return{searchStartOffset:a,searchEndOffset:u}}_matchBracket(e){const t=e.lineNumber,n=this.textModel.getLineTokens(t),r=this.textModel.getLineContent(t),s=n.findTokenIndexAtOffset(e.column-1);if(s<0)return null;const o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(s)).brackets;if(o&&!bf(n.getStandardTokenType(s))){let{searchStartOffset:a,searchEndOffset:u}=this._establishBracketSearchOffsets(e,n,o,s),d=null;for(;;){const h=kc.findNextBracketInRange(o.forwardRegex,t,r,a,u);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const f=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),p=this._matchFoundBracket(h,o.textIsBracket[f],o.textIsOpenBracket[f],null);if(p){if(p instanceof Jg)return null;d=p}}a=h.endColumn-1}if(d)return d}if(s>0&&n.getStartOffset(s)===e.column-1){const a=s-1,u=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(u&&!bf(n.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,n,u,a);const f=kc.findPrevBracketInRange(u.reversedRegex,t,r,d,h);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn){const p=r.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),m=this._matchFoundBracket(f,u.textIsBracket[p],u.textIsOpenBracket[p],null);if(m)return m instanceof Jg?null:m}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return s?s instanceof Jg?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const r=e.languageId,s=e.reversedRegex;let o=-1,a=0;const u=(d,h,f,p)=>{for(;;){if(n&&++a%100===0&&!n())return Jg.INSTANCE;const m=kc.findPrevBracketInRange(s,d,h,f,p);if(!m)break;const v=h.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(v)?o++:e.isClose(v)&&o--,o===0)return m;p=m.startColumn-1}return null};for(let d=t.lineNumber;d>=1;d--){const h=this.textModel.getLineTokens(d),f=h.getCount(),p=this.textModel.getLineContent(d);let m=f-1,v=p.length,b=p.length;d===t.lineNumber&&(m=h.findTokenIndexAtOffset(t.column-1),v=t.column-1,b=t.column-1);let L=!0;for(;m>=0;m--){const S=h.getLanguageId(m)===r&&!bf(h.getStandardTokenType(m));if(S)L?v=h.getStartOffset(m):(v=h.getStartOffset(m),b=h.getEndOffset(m));else if(L&&v!==b){const y=u(d,p,v,b);if(y)return y}L=S}if(L&&v!==b){const S=u(d,p,v,b);if(S)return S}}return null}_findMatchingBracketDown(e,t,n){const r=e.languageId,s=e.forwardRegex;let o=1,a=0;const u=(h,f,p,m)=>{for(;;){if(n&&++a%100===0&&!n())return Jg.INSTANCE;const v=kc.findNextBracketInRange(s,h,f,p,m);if(!v)break;const b=f.substring(v.startColumn-1,v.endColumn-1).toLowerCase();if(e.isOpen(b)?o++:e.isClose(b)&&o--,o===0)return v;p=v.endColumn-1}return null},d=this.textModel.getLineCount();for(let h=t.lineNumber;h<=d;h++){const f=this.textModel.getLineTokens(h),p=f.getCount(),m=this.textModel.getLineContent(h);let v=0,b=0,L=0;h===t.lineNumber&&(v=f.findTokenIndexAtOffset(t.column-1),b=t.column-1,L=t.column-1);let S=!0;for(;v<p;v++){const y=f.getLanguageId(v)===r&&!bf(f.getStandardTokenType(v));if(y)S||(b=f.getStartOffset(v)),L=f.getEndOffset(v);else if(S&&b!==L){const E=u(h,m,b,L);if(E)return E}S=y}if(S&&b!==L){const y=u(h,m,b,L);if(y)return y}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);let n=null,r=null;for(let s=t.lineNumber;s>=1;s--){const o=this.textModel.getLineTokens(s),a=o.getCount(),u=this.textModel.getLineContent(s);let d=a-1,h=u.length,f=u.length;if(s===t.lineNumber){d=o.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const m=o.getLanguageId(d);n!==m&&(n=m,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets)}let p=!0;for(;d>=0;d--){const m=o.getLanguageId(d);if(n!==m){if(r&&p&&h!==f){const b=kc.findPrevBracketInRange(r.reversedRegex,s,u,h,f);if(b)return this._toFoundBracket(r,b);p=!1}n=m,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets}const v=!!r&&!bf(o.getStandardTokenType(d));if(v)p?h=o.getStartOffset(d):(h=o.getStartOffset(d),f=o.getEndOffset(d));else if(r&&p&&h!==f){const b=kc.findPrevBracketInRange(r.reversedRegex,s,u,h,f);if(b)return this._toFoundBracket(r,b)}p=v}if(r&&p&&h!==f){const m=kc.findPrevBracketInRange(r.reversedRegex,s,u,h,f);if(m)return this._toFoundBracket(r,m)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e),n=this.textModel.getLineCount();let r=null,s=null;for(let o=t.lineNumber;o<=n;o++){const a=this.textModel.getLineTokens(o),u=a.getCount(),d=this.textModel.getLineContent(o);let h=0,f=0,p=0;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),f=t.column-1,p=t.column-1;const v=a.getLanguageId(h);r!==v&&(r=v,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets)}let m=!0;for(;h<u;h++){const v=a.getLanguageId(h);if(r!==v){if(s&&m&&f!==p){const L=kc.findNextBracketInRange(s.forwardRegex,o,d,f,p);if(L)return this._toFoundBracket(s,L);m=!1}r=v,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets}const b=!!s&&!bf(a.getStandardTokenType(h));if(b)m||(f=a.getStartOffset(h)),p=a.getEndOffset(h);else if(s&&m&&f!==p){const L=kc.findNextBracketInRange(s.forwardRegex,o,d,f,p);if(L)return this._toFoundBracket(s,L)}m=b}if(s&&m&&f!==p){const v=kc.findNextBracketInRange(s.forwardRegex,o,d,f,p);if(v)return this._toFoundBracket(s,v)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const m=Date.now();n=()=>Date.now()-m<=t}const r=this.textModel.validatePosition(e),s=this.textModel.getLineCount(),o=new Map;let a=[];const u=(m,v)=>{if(!o.has(m)){let b=[];for(let L=0,S=v?v.brackets.length:0;L<S;L++)b[L]=0;o.set(m,b)}a=o.get(m)};let d=0;const h=(m,v,b,L,S)=>{for(;;){if(n&&++d%100===0&&!n())return Jg.INSTANCE;const y=kc.findNextBracketInRange(m.forwardRegex,v,b,L,S);if(!y)break;const E=b.substring(y.startColumn-1,y.endColumn-1).toLowerCase(),A=m.textIsBracket[E];if(A&&(A.isOpen(E)?a[A.index]++:A.isClose(E)&&a[A.index]--,a[A.index]===-1))return this._matchFoundBracket(y,A,!1,n);L=y.endColumn-1}return null};let f=null,p=null;for(let m=r.lineNumber;m<=s;m++){const v=this.textModel.getLineTokens(m),b=v.getCount(),L=this.textModel.getLineContent(m);let S=0,y=0,E=0;if(m===r.lineNumber){S=v.findTokenIndexAtOffset(r.column-1),y=r.column-1,E=r.column-1;const N=v.getLanguageId(S);f!==N&&(f=N,p=this.languageConfigurationService.getLanguageConfiguration(f).brackets,u(f,p))}let A=!0;for(;S<b;S++){const N=v.getLanguageId(S);if(f!==N){if(p&&A&&y!==E){const M=h(p,m,L,y,E);if(M)return PR(M);A=!1}f=N,p=this.languageConfigurationService.getLanguageConfiguration(f).brackets,u(f,p)}const V=!!p&&!bf(v.getStandardTokenType(S));if(V)A||(y=v.getStartOffset(S)),E=v.getEndOffset(S);else if(p&&A&&y!==E){const M=h(p,m,L,y,E);if(M)return PR(M)}A=V}if(p&&A&&y!==E){const N=h(p,m,L,y,E);if(N)return PR(N)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let r=e.textIsBracket[n];return r?{range:t,open:r.open,close:r.close,isOpen:e.textIsOpenBracket[n]}:null}}function h2e(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}class Jg{constructor(){this._searchCanceledBrand=void 0}}Jg.INSTANCE=new Jg;function PR(i){return i instanceof Jg?null:i}const f2e=we("editor.lineHighlightBackground",{dark:null,light:null,hc:null},C("lineHighlight","Background color for the highlight of line at the cursor position.")),oee=we("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},C("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),g2e=we("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},C("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),p2e=we("editor.rangeHighlightBorder",{dark:null,light:null,hc:Ja},C("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),m2e=we("editor.symbolHighlightBackground",{dark:AH,light:AH,hc:null},C("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),_2e=we("editor.symbolHighlightBorder",{dark:null,light:null,hc:Ja},C("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),rde=we("editorCursor.foreground",{dark:"#AEAFAD",light:ye.black,hc:ye.white},C("caret","Color of the editor cursor.")),v2e=we("editorCursor.background",null,C("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),nb=we("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},C("editorWhitespaces","Color of whitespace characters in the editor.")),U8=we("editorIndentGuide.background",{dark:nb,light:nb,hc:nb},C("editorIndentGuides","Color of the editor indentation guides.")),j8=we("editorIndentGuide.activeBackground",{dark:nb,light:nb,hc:nb},C("editorActiveIndentGuide","Color of the active editor indentation guides.")),sde=we("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:ye.white},C("editorLineNumbers","Color of editor line numbers.")),j9=we("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Ja},C("editorActiveLineNumber","Color of editor active line number"),!1,C("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),b2e=we("editorLineNumber.activeForeground",{dark:j9,light:j9,hc:j9},C("editorActiveLineNumber","Color of editor active line number")),C2e=we("editorRuler.foreground",{dark:"#5A5A5A",light:ye.lightgrey,hc:ye.white},C("editorRuler","Color of the editor rulers.")),w2e=we("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},C("editorBracketMatchBackground","Background color behind matching brackets")),ode=we("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:fs},C("editorBracketMatchBorder","Color for matching brackets boxes")),y2e=we("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},C("editorOverviewRulerBorder","Color of the overview ruler border.")),S2e=we("editorOverviewRuler.background",null,C("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),L2e=we("editorGutter.background",{dark:sc,light:sc,hc:sc},C("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),E2e=we("editorUnnecessaryCode.border",{dark:null,light:null,hc:ye.fromHex("#fff").transparent(.8)},C("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),x2e=we("editorUnnecessaryCode.opacity",{dark:ye.fromHex("#000a"),light:ye.fromHex("#0007"),hc:null},C("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),D2e=we("editorGhostText.border",{dark:null,light:null,hc:ye.fromHex("#fff").transparent(.8)},C("editorGhostTextBorder","Border color of ghost text in the editor.")),I2e=we("editorGhostText.foreground",{dark:ye.fromHex("#ffffff56"),light:ye.fromHex("#0007"),hc:null},C("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),T2e=we("editorGhostText.background",{dark:null,light:null,hc:null},C("editorGhostTextBackground","Background color of the ghost text in the editor.")),K9=new ye(new fi(0,122,204,.6)),k2e=we("editorOverviewRuler.rangeHighlightForeground",{dark:K9,light:K9,hc:K9},C("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),N2e=we("editorOverviewRuler.errorForeground",{dark:new ye(new fi(255,18,18,.7)),light:new ye(new fi(255,18,18,.7)),hc:new ye(new fi(255,50,50,1))},C("overviewRuleError","Overview ruler marker color for errors.")),A2e=we("editorOverviewRuler.warningForeground",{dark:vp,light:vp,hc:T8},C("overviewRuleWarning","Overview ruler marker color for warnings.")),O2e=we("editorOverviewRuler.infoForeground",{dark:qh,light:qh,hc:Rq},C("overviewRuleInfo","Overview ruler marker color for infos.")),ade=we("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},C("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),lde=we("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},C("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),ude=we("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},C("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),cde=we("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),dde=we("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),hde=we("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),M2e=we("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ye(new fi(255,18,18,.8)),light:new ye(new fi(255,18,18,.8)),hc:new ye(new fi(255,50,50,1))},C("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),R2e=we("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),P2e=we("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),F2e=we("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),B2e=we("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),W2e=we("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),V2e=we("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),H2e=we("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),$2e=we("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),z2e=we("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),U2e=we("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),j2e=we("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),K2e=we("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));hr((i,e)=>{const t=i.getColor(sc);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=i.getColor(uM);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const r=i.getColor(L2e);r&&e.addRule(`.monaco-editor .margin { background-color: ${r}; }`);const s=i.getColor(g2e);s&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${s}; }`);const o=i.getColor(p2e);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; }`);const a=i.getColor(m2e);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const u=i.getColor(_2e);u&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${u}; }`);const d=i.getColor(nb);d&&(e.addRule(`.monaco-editor .mtkw { color: ${d} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${d} !important; }`))});class q2e extends Oe{constructor(e){super(),this.textModel=e,this.colorProvider=new fde,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const r=new Array,s=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of s)r.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o)},ownerId:0,range:o.range});return r}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Q(1,1,this.textModel.getLineCount(),1),e,t):[]}}class fde{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}hr((i,e)=>{const t=[ade,lde,ude,cde,dde,hde],n=new fde;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(M2e)}; }`);let r=t.map(s=>i.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const o=r[s%r.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${o}; }`)}});var G2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},q9=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function Y2e(){return new dNe}function Z2e(i){const e=Y2e();return e.acceptChunk(i),e.finish()}function aee(i,e){return(typeof i=="string"?Z2e(i):i).create(e)}let FR=0;const X2e=999,Q2e=1e4;class J2e{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join("");if(r.length>0&&(e[t++]=r,n+=r.length),n>=64*1024)return e.join("")}while(!0)}}const DN=()=>{throw new Error("Invalid change accessor")};let Sl=class Cf extends Oe{constructor(e,t,n,r=null,s,o,a){super(),this._undoRedoService=s,this._modeService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new Ce),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new iAe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new Ce),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Ce),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Ce),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new Ce),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Ce),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new Ce),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new rAe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new Ce),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(p=>{this._onDidChangeContentOrInjectedText.fire(p.rawContentChangedEvent)})),FR++,this.id="$model"+FR,this.isForSimpleWidget=t.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=rn.parse("inmemory://model/"+FR):this._associatedResource=r,this._attachedEditorCount=0;const{textBuffer:u,disposable:d}=aee(e,t.defaultEOL);this._buffer=u,this._bufferDisposable=d,this._options=Cf.resolveOptions(this._buffer,t);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new Q(1,1,h,this._buffer.getLineLength(h)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=f>Cf.LARGE_FILE_SIZE_THRESHOLD||h>Cf.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=f>Cf.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||L0,this._languageRegistryListener=this._languageConfigurationService.onDidChange(p=>{p.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=Sue(FR),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new lee,this._commandManager=new Uq(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new zu(this._modeService.languageIdCodec),this._tokens2=new Jq(this._modeService.languageIdCodec),this._tokenization=new vNe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new d2e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new q2e(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=IJ(e,t.tabSize,t.insertSpaces);return new t4({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new t4({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new vy([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new t3(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=aee(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,r,s,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new lee,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new eb([new hNe],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,s,o),0,r,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new eb([new pNe],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,s,o),0,r,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){const s=t[n],o=s.range,a=s.cachedAbsoluteStart-s.start,u=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),d=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=u,s.cachedAbsoluteEnd=d,s.cachedVersionId=e,s.start=u-a,s.end=d-a,S0(s)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let r=1;r<=n;r++){const s=this._buffer.getLineLength(r);s>=Q2e?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,r=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new t4({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(a))return;let u=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(u)}detectIndentation(e,t){this._assertNotDisposed();let n=IJ(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let r=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?r+=t:r++;let s="";if(!n){let o=Math.floor(r/t);r=r%t;for(let a=0;a<o;a++)s+="	"}for(let o=0;o<r;o++)s+=" ";return s}static normalizeIndentation(e,t,n){let r=Ta(e);return r===-1&&(r=e.length),Cf._normalizeIndentationFromWhitespace(e.substring(0,r),t,n)+e.substring(r)}normalizeIndentation(e){return this._assertNotDisposed(),Cf.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(wue.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new J2e(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const f=this.getLineMaxColumn(s);o>=f&&(o=f)}const a=e.endLineNumber,u=e.endColumn;let d=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof u=="number"&&!isNaN(u)?u:1);if(d<1)d=1,h=1;else if(d>t)d=t,h=this.getLineMaxColumn(d);else if(h<=1)h=1;else{const f=this.getLineMaxColumn(d);h>=f&&(h=f)}return n===s&&r===o&&a===d&&u===h&&e instanceof Q&&!(e instanceof yt)?e:new Q(s,o,d,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const r=this._buffer.getLineCount();if(e>r)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(Ws(o))return!1}return!0}_validatePosition(e,t,n){const r=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(r<1)return new Le(1,1);if(r>o)return new Le(o,this.getLineMaxColumn(o));if(s<=1)return new Le(r,1);const a=this.getLineMaxColumn(r);if(s>=a)return new Le(r,a);if(n===1){const u=this._buffer.getLineCharCode(r,s-2);if(Ws(u))return new Le(r,s-1)}return new Le(r,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof Le&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,r,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=r>1?this._buffer.getLineCharCode(n,r-2):0,u=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,d=Ws(a),h=Ws(u);return!d&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof Q&&!(e instanceof yt)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),r=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,o=n.column,a=r.lineNumber,u=r.column;{const d=o>1?this._buffer.getLineCharCode(s,o-2):0,h=u>1&&u<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,u-2):0,f=Ws(d),p=Ws(h);return!f&&!p?new Q(s,o,a,u):s===a&&o===u?new Q(s,o-1,a,u-1):f&&p?new Q(s,o-1,a,u+1):f?new Q(s,o-1,a,u):new Q(s,o,a,u+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Q(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,s,o,a=X2e){this._assertNotDisposed();let u=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(f=>Q.isIRange(f))&&(u=t.map(f=>this.validateRange(f)))),u===null&&(u=[this.getFullModelRange()]),u=u.sort((f,p)=>f.startLineNumber-p.startLineNumber||f.startColumn-p.startColumn);const d=[];d.push(u.reduce((f,p)=>Q.areIntersecting(f,p)?f.plusRange(p):(d.push(f),p)));let h;if(!n&&e.indexOf(`
`)<0){const p=new h1(e,n,r,s).parseSearchRequest();if(!p)return[];h=m=>this.findMatchesLineByLine(m,p,o,a)}else h=f=>kR.findMatches(this,new h1(e,n,r,s),f,o,a);return d.map(h).reduce((f,p)=>f.concat(p),[])}findNextMatch(e,t,n,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const d=new h1(e,n,r,s).parseSearchRequest();if(!d)return null;const h=this.getLineCount();let f=new Q(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),p=this.findMatchesLineByLine(f,d,o,1);return kR.findNextMatch(this,new h1(e,n,r,s),a,o),p.length>0||(f=new Q(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),p=this.findMatchesLineByLine(f,d,o,1),p.length>0)?p[0]:null}return kR.findNextMatch(this,new h1(e,n,r,s),a,o)}findPreviousMatch(e,t,n,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return kR.findPreviousMatch(this,new h1(e,n,r,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof O9?e:new O9(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let r=t.map(o=>({range:this.validateRange(o.range),text:o.text})),s=!0;if(e)for(let o=0,a=e.length;o<a;o++){let u=e[o],d=!1;for(let h=0,f=r.length;h<f;h++){let p=r[h].range,m=p.startLineNumber>u.endLineNumber,v=u.startLineNumber>p.endLineNumber;if(!m&&!v){d=!0;break}}if(!d){s=!1;break}}if(s)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let u=this._trimAutoWhitespaceLines[o],d=this.getLineMaxColumn(u),h=!0;for(let f=0,p=r.length;f<p;f++){let m=r[f].range,v=r[f].text;if(!(u<m.startLineNumber||u>m.endLineNumber)&&!(u===m.startLineNumber&&m.startColumn===d&&m.isEmpty()&&v&&v.length>0&&v.charAt(0)===`
`)&&!(u===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&v&&v.length>0&&v.charAt(v.length-1)===`
`)){h=!1;break}}if(h){const f=new Q(u,1,u,d);t.push(new O9(null,f,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,r){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),u=this.getPositionAt(o.newEnd);return{range:new Q(a.lineNumber,a.column,u.lineNumber,u.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,r)}_applyRedo(e,t,n,r){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),u=this.getPositionAt(o.oldEnd);return{range:new Q(a.lineNumber,a.column,u.lineNumber,u.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,o.length!==0){for(let d=0,h=o.length;d<h;d++){const f=o[d],[p,m,v]=Nb(f.text);this._tokens.acceptEdit(f.range,p,m),this._tokens2.acceptEdit(f.range,p,m,v,f.text.length>0?f.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers)}let a=[];this._increaseVersionId();let u=n;for(let d=0,h=o.length;d<h;d++){const f=o[d],[p]=Nb(f.text);this._onDidChangeDecorations.fire();const m=f.range.startLineNumber,v=f.range.endLineNumber,b=v-m,L=p,S=Math.min(b,L),y=L-b,E=s-u-y+m,A=E,N=E+L,V=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Le(A,1)),this.getOffsetAt(new Le(N,this.getLineMaxColumn(N))),0),M=tf.fromDecorations(V),R=new cy(M);for(let Y=S;Y>=0;Y--){const X=m+Y,$=E+Y;R.takeFromEndWhile(O=>O.lineNumber>$);const T=R.takeFromEndWhile(O=>O.lineNumber===$);a.push(new YJ(X,this.getLineContent($),T))}if(S<b){const Y=m+S;a.push(new fNe(Y+1,v))}if(S<L){const Y=new cy(M),X=m+S,$=L-S,T=s-u-$+X+1;let O=[],B=[];for(let W=0;W<$;W++){let j=T+W;B[W]=this.getLineContent(j),Y.takeWhile(U=>U.lineNumber<j),O[W]=Y.takeWhile(U=>U.lineNumber===j)}a.push(new gNe(X+1,m+L,B,O))}u+=y}this._emitContentChangedEvent(new eb(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(r=>new YJ(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeContentOrInjectedText.fire(new qce(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,cee(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)},r=null;try{r=t(n)}catch(s){gn(s)}return n.addDecoration=DN,n.changeDecoration=DN,n.changeDecorationOptions=DN,n.removeDecoration=DN,n.deltaDecorations=DN,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:uee[n]}])[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),o,a,s),r.setOptions(uee[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,r=t.length;n<r;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,r=!1){let s=this.getLineCount(),o=Math.min(s,Math.max(1,e)),a=Math.min(s,Math.max(1,t)),u=this.getLineMaxColumn(a);const d=new Q(o,1,a,u),h=this._getDecorationsInRange(d,n,r);return h.push(...this._decorationProvider.getDecorationsInRange(d,n,r)),h}getDecorationsInRange(e,t=0,n=!1){let r=this.validateRange(e);const s=this._getDecorationsInRange(r,t,n);return s.push(...this._decorationProvider.getDecorationsInRange(r,t,n)),s}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return tf.fromDecorations(r).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,s,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),o=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,o,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const r=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}r!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const r=this.getVersionId(),s=t.length;let o=0;const a=n.length;let u=0,d=new Array(a);for(;o<s||u<a;){let h=null;if(o<s){do h=this._decorations[t[o++]];while(!h&&o<s);if(h){if(h.options.after){const f=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber)}if(h.options.before){const f=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<a){if(!h){const L=++this._lastDecorationId,S=`${this._instanceId};${L}`;h=new Pce(S,0,0),this._decorations[S]=h}const f=n[u],p=this._validateRangeRelaxedNoAllocations(f.range),m=cee(f.options),v=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),b=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);h.ownerId=e,h.reset(r,v,b,p),h.setOptions(m),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(h),d[u]=h.id,u++}else h&&delete this._decorations[h.id]}return d}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];let a=0,u=0,d=!1;for(let h=0,f=o.tokens.length;h<f;h++){const p=o.startLineNumber+h;d?(this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),o.tokens[h],!1),u=p):this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),o.tokens[h],!0)&&(d=!0,a=p,u=p)}d&&n.push({fromLineNumber:a,toLineNumber:u})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new Le(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}getTokenTypeIfInsertingCharacter(e,t,n){const r=this.validatePosition(new Le(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(r,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),r=this._getLineTokens(t.lineNumber),s=r.findTokenIndexAtOffset(t.column-1),[o,a]=Cf._findLanguageBoundaries(r,s),u=WF(t.column,this.getLanguageConfiguration(r.getLanguageId(s)).getWordDefinition(),n.substring(o,a),o);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u;if(s>0&&o===t.column-1){const[d,h]=Cf._findLanguageBoundaries(r,s-1),f=WF(t.column,this.getLanguageConfiguration(r.getLanguageId(s-1)).getWordDefinition(),n.substring(d,h),d);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let r=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)r=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)s=e.getEndOffset(o);return[r,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}static computeIndentLevel(e,t){let n=0,r=0,s=e.length;for(;r<s;){let o=e.charCodeAt(r);if(o===32)n++;else if(o===9)n=n-n%t+t;else break;r++}return r===s?-1:n}_computeIndentLevel(e){return Cf.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const r=this.getLineCount();if(e<1||e>r)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(s&&s.offSide);let a=-2,u=-1,d=-2,h=-1;const f=M=>{if(a!==-1&&(a===-2||a>M-1)){a=-1,u=-1;for(let R=M-2;R>=0;R--){let Y=this._computeIndentLevel(R);if(Y>=0){a=R,u=Y;break}}}if(d===-2){d=-1,h=-1;for(let R=M;R<r;R++){let Y=this._computeIndentLevel(R);if(Y>=0){d=R,h=Y;break}}}};let p=-2,m=-1,v=-2,b=-1;const L=M=>{if(p===-2){p=-1,m=-1;for(let R=M-2;R>=0;R--){let Y=this._computeIndentLevel(R);if(Y>=0){p=R,m=Y;break}}}if(v!==-1&&(v===-2||v<M-1)){v=-1,b=-1;for(let R=M;R<r;R++){let Y=this._computeIndentLevel(R);if(Y>=0){v=R,b=Y;break}}}};let S=0,y=!0,E=0,A=!0,N=0,V=0;for(let M=0;y||A;M++){const R=e-M,Y=e+M;M>1&&(R<1||R<t)&&(y=!1),M>1&&(Y>r||Y>n)&&(A=!1),M>5e4&&(y=!1,A=!1);let X=-1;if(y){const T=this._computeIndentLevel(R-1);T>=0?(d=R-1,h=T,X=Math.ceil(T/this._options.indentSize)):(f(R),X=this._getIndentLevelForWhitespaceLine(o,u,h))}let $=-1;if(A){const T=this._computeIndentLevel(Y-1);T>=0?(p=Y-1,m=T,$=Math.ceil(T/this._options.indentSize)):(L(Y),$=this._getIndentLevelForWhitespaceLine(o,m,b))}if(M===0){V=X;continue}if(M===1){if(Y<=r&&$>=0&&V+1===$){y=!1,S=Y,E=Y,N=$;continue}if(R>=1&&X>=0&&X-1===V){A=!1,S=R,E=R,N=X;continue}if(S=e,E=e,N=V,N===0)return{startLineNumber:S,endLineNumber:E,indent:N}}y&&(X>=N?S=R:y=!1),A&&($>=N?E=Y:A=!1)}return{startLineNumber:S,endLineNumber:E,indent:N}}getLinesBracketGuides(e,t,n,r){var s,o,a,u,d;const h=[],f=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new Q(e,1,t,this.getLineMaxColumn(t)));let p;if(n&&f.length>0){const S=e<=n.lineNumber&&n.lineNumber<=t?f.filter(y=>Q.strictContainsPosition(y.range,n)):this._bracketPairColorizer.getBracketPairsInRange(Q.fromPositions(n));p=(s=Nxe(S,y=>y.range.startLineNumber!==y.range.endLineNumber))===null||s===void 0?void 0:s.range}const m=new cy(f),v=new Array,b=new Array,L=new gde;for(let S=e;S<=t;S++){let y=new Array;b.length>0&&(y=y.concat(b),b.length=0),h.push(y);for(const A of m.takeWhile(N=>N.openingBracketRange.startLineNumber<=S)||[]){if(A.range.startLineNumber===A.range.endLineNumber)continue;const N=Math.min(this.getVisibleColumnFromPosition(A.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(o=A.closingBracketRange)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:A.range.getEndPosition()),A.minVisibleColumnIndentation+1);let V=!1;A.closingBracketRange&&Ta(this.getLineContent(A.closingBracketRange.startLineNumber))<A.closingBracketRange.startColumn-1&&(V=!0);const M=A.openingBracketRange.getStartPosition(),R=(d=(u=A.closingBracketRange)===null||u===void 0?void 0:u.getStartPosition())!==null&&d!==void 0?d:A.range.getEndPosition();A.closingBracketRange===void 0?v[A.nestingLevel]=null:v[A.nestingLevel]={nestingLevel:A.nestingLevel,guideVisibleColumn:N,start:M,visibleStartColumn:this.getVisibleColumnFromPosition(M),end:R,visibleEndColumn:this.getVisibleColumnFromPosition(R),bracketPair:A,renderHorizontalEndLineAtTheBottom:V}}for(const A of v){if(!A)continue;const N=p&&A.bracketPair.range.equalsRange(p),V=L.getInlineClassNameOfLevel(A.nestingLevel)+(r.highlightActive&&N?" "+L.activeClassName:"");(N&&r.horizontalGuides!==Q1.Disabled||r.includeInactive&&r.horizontalGuides===Q1.Enabled)&&(A.start.lineNumber===S&&A.guideVisibleColumn<A.visibleStartColumn&&y.push(new Mw(A.guideVisibleColumn,V,new BH(!1,A.start.column))),A.end.lineNumber===S+1&&A.guideVisibleColumn<A.visibleEndColumn&&b.push(new Mw(A.guideVisibleColumn,V,new BH(!A.renderHorizontalEndLineAtTheBottom,A.end.column))))}let E=Number.MAX_SAFE_INTEGER;for(let A=v.length-1;A>=0;A--){const N=v[A];if(!N)continue;const V=r.highlightActive&&p&&N.bracketPair.range.equalsRange(p),M=L.getInlineClassNameOfLevel(N.nestingLevel)+(V?" "+L.activeClassName:"");(V||r.includeInactive)&&N.renderHorizontalEndLineAtTheBottom&&N.end.lineNumber===S+1&&b.push(new Mw(N.guideVisibleColumn,M,null)),!(N.end.lineNumber<=S||N.start.lineNumber>=S)&&(N.guideVisibleColumn>=E&&!V||(E=N.guideVisibleColumn,(V||r.includeInactive)&&y.push(new Mw(N.guideVisibleColumn,M,null))))}y.sort((A,N)=>A.visibleColumn-N.visibleColumn)}return h}getVisibleColumnFromPosition(e){return ur.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,s=!!(r&&r.offSide);let o=new Array(t-e+1),a=-2,u=-1,d=-2,h=-1;for(let f=e;f<=t;f++){let p=f-e;const m=this._computeIndentLevel(f-1);if(m>=0){a=f-1,u=m,o[p]=Math.ceil(m/this._options.indentSize);continue}if(a===-2){a=-1,u=-1;for(let v=f-2;v>=0;v--){let b=this._computeIndentLevel(v);if(b>=0){a=v,u=b;break}}}if(d!==-1&&(d===-2||d<f-1)){d=-1,h=-1;for(let v=f;v<n;v++){let b=this._computeIndentLevel(v);if(b>=0){d=v,h=b;break}}}o[p]=this._getIndentLevelForWhitespaceLine(s,u,h)}return o}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return eAe(this.getLineContent(e))+1}};Sl.MODEL_SYNC_LIMIT=50*1024*1024;Sl.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Sl.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Sl.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Jo.tabSize,indentSize:Jo.indentSize,insertSpaces:Jo.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Jo.trimAutoWhitespace,largeFileOptimizations:Jo.largeFileOptimizations,bracketPairColorizationOptions:Jo.bracketPairColorizationOptions};Sl=G2e([q9(4,gM),q9(5,Fo),q9(6,fM)],Sl);function eAe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}class gde{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function G9(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function Y9(i){return!!i.options.after||!!i.options.before}class lee{constructor(){this._decorationsTree0=new M9,this._decorationsTree1=new M9,this._injectedTextDecorationsTree=new M9}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,s){const o=e.getVersionId(),a=this._intervalSearch(t,n,r,s,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,r,s){const o=this._decorationsTree0.intervalSearch(e,t,n,r,s),a=this._decorationsTree1.intervalSearch(e,t,n,r,s),u=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,s);return o.concat(a).concat(u)}getInjectedTextInInterval(e,t,n,r){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,s);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,r).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,r){const s=e.getVersionId(),o=this._search(t,n,r,s);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,r){if(n)return this._decorationsTree1.search(e,t,r);{const s=this._decorationsTree0.search(e,t,r),o=this._decorationsTree1.search(e,t,r),a=this._injectedTextDecorationsTree.search(e,t,r);return s.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){Y9(e)?this._injectedTextDecorationsTree.insert(e):G9(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Y9(e)?this._injectedTextDecorationsTree.delete(e):G9(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Y9(e)?this._injectedTextDecorationsTree.resolveNode(e,t):G9(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}}function mv(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class pde{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class tAe extends pde{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:yl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class nAe extends pde{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?ye.fromHex(e):t.getColor(e.id)}}class RA{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof RA?e:new RA(e)}}class En{constructor(e){var t;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?mv(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new tAe(e.overviewRuler):null,this.minimap=e.minimap?new nAe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?mv(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?mv(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?mv(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?mv(e.marginClassName):null,this.inlineClassName=e.inlineClassName?mv(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?mv(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?mv(e.afterContentClassName):null,this.after=e.after?RA.from(e.after):null,this.before=e.before?RA.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1}static register(e){return new En(e)}static createDynamic(e){return new En(e)}}En.EMPTY=En.register({description:"empty"});const uee=[En.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),En.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),En.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),En.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function cee(i){return i instanceof En?i:En.createDynamic(i)}class iAe extends Oe{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Ce),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class rAe extends Oe{constructor(){super(),this._fastEmitter=this._register(new Ce),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Ce),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const sAe=()=>!0,dee=()=>!1,oAe=i=>i===" "||i==="	";class Bc{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=n.options,s=r.get(130);this.readOnly=r.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(103),this.lineHeight=r.get(58),this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=r.get(115),this.wordSeparators=r.get(116),this.emptySelectionClipboard=r.get(32),this.copyWithSyntaxHighlighting=r.get(21),this.multiCursorMergeOverlapping=r.get(68),this.multiCursorPaste=r.get(70),this.autoClosingBrackets=r.get(5),this.autoClosingQuotes=r.get(8),this.autoClosingDelete=r.get(6),this.autoClosingOvertype=r.get(7),this.autoSurround=r.get(11),this.autoIndent=r.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:Bc._getShouldAutoClose(e,this.autoClosingQuotes),bracket:Bc._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=_i.getAutoClosingPairs(e);let o=Bc._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(130)||e.hasChanged(116)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(115)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=Bc._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Sl.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return _i.getElectricCharacters(e)}catch(t){return gn(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return oAe;case"languageDefined":return Bc._getLanguageDefinedShouldAutoClose(e);case"always":return sAe;case"never":return dee}}static _getLanguageDefinedShouldAutoClose(e){try{const t=_i.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return gn(t),dee}}static _getSurroundingPairs(e){try{return _i.getSurroundingPairs(e)}catch(t){return gn(t),null}}}class so{constructor(e,t,n,r){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=r,this.selection=so._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new so(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new Le(t,n),r):new so(new Q(t,n,t,n),r,new Le(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?yt.fromPositions(e.getStartPosition(),t):yt.fromPositions(e.getEndPosition(),t)}}class hee{constructor(e,t,n,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=r}}class aAe{constructor(e){this.modelState=e,this.viewState=null}}class lAe{constructor(e){this.modelState=null,this.viewState=e}}let Rn=class mde{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new aAe(e)}static fromViewState(e){return new lAe(e)}static fromModelSelection(e){const t=yt.liftSelection(e),n=new so(Q.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return mde.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class ll{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function pw(i){return i==="'"||i==='"'||i==="`"}class PA{static whitespaceVisibleColumn(e,t,n){const r=e.length;let s=0,o=-1,a=-1;for(let u=0;u<r;u++){if(u===t)return[o,a,s];switch(s%n===0&&(o=u,a=s),e.charCodeAt(u)){case 32:s+=1;break;case 9:s=ur.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===r?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const s=e.length,[o,a,u]=PA.whitespaceVisibleColumn(e,t,n);if(u===-1)return-1;let d;switch(r){case 0:d=!0;break;case 1:d=!1;break;case 2:if(u%n===0)return t;d=u%n<=n/2;break}if(d){if(o===-1)return-1;let p=a;for(let m=o;m<s;++m){if(p===a+n)return o;switch(e.charCodeAt(m)){case 32:p+=1;break;case 9:p=ur.nextRenderTabStop(p,n);break;default:return-1}}return p===a+n?o:-1}const h=ur.nextRenderTabStop(u,n);let f=u;for(let p=t;p<s;p++){if(f===h)return p;switch(e.charCodeAt(p)){case 32:f+=1;break;case 9:f=ur.nextRenderTabStop(f,n);break;default:return-1}}return f===h?s:-1}}class Lv{constructor(e=null){this.hitTarget=e,this.type=0}}class UH{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var w1;(function(i){function e(t,n,r){const s=t.getPositionFromDOMInfo(n,r);return s?new UH(s,n,null):new Lv(n)}i.createFromDOMInfo=e})(w1||(w1={}));class uAe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class xh{constructor(e,t,n=0,r=null,s=null,o=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,!s&&r&&(s=new Q(r.lineNumber,r.column,r.lineNumber,r.column)),this.range=s,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return xh.toString(this)}}class xc{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Zy{constructor(e,t,n){this.model=e.model;const r=e.configuration.options;this.layoutInfo=r.get(130),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(58),this.stickyTabStops=r.get(103),this.typicalHalfwidthCharacterWidth=r.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Zy.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const r=n.verticalOffset+n.height/2,s=e.model.getLineCount();let o=null,a,u=null;return n.afterLineNumber!==s&&(u=new Le(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new Le(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),u===null?a=o:o===null?a=u:t<r?a=o:a=u,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:u,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const r=this._context.model.getLineCount(),s=this._context.model.getLineMaxColumn(r);return{range:new Q(r,s,r,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new Q(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Zy._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class cAe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Wo._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class aG extends cAe{constructor(e,t,n,r){super(e,t,n),this._ctx=e,r?(this.target=r,this.targetPath=ag.collect(r,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,r=null){let s=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(s=ur.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new xh(this.target,e,s,t,n,r)}withTarget(e){return new aG(this._ctx,this.editorPos,this.pos,e)}}const fee={isAfterLines:!0};function Z9(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Wo{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=ag.collect(t,this._viewHelper.viewDomNode);return!!(xc.isChildOfContentWidgets(n)||xc.isChildOfOverflowingContentWidgets(n)||xc.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,r){const s=new Zy(this._context,this._viewHelper,e),o=new aG(s,t,n,r);try{return Wo._createMouseTarget(s,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const o=Wo._doHitTest(e,t);return o.type===1?Wo.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const r=t;let s=null;return s=s||Wo._hitTestContentWidget(e,r),s=s||Wo._hitTestOverlayWidget(e,r),s=s||Wo._hitTestMinimap(e,r),s=s||Wo._hitTestScrollbarSlider(e,r),s=s||Wo._hitTestViewZone(e,r),s=s||Wo._hitTestMargin(e,r),s=s||Wo._hitTestViewCursor(e,r),s=s||Wo._hitTestTextArea(e,r),s=s||Wo._hitTestViewLines(e,r,n),s=s||Wo._hitTestScrollbar(e,r),s||t.fulfill(0)}static _hitTestContentWidget(e,t){if(xc.isChildOfContentWidgets(t.targetPath)||xc.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(xc.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const r of n)if(t.target===r.domNode)return t.fulfill(6,r.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of n){if(r<o.contentLeft||r>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const r=t.isInContentArea?8:5;return t.fulfill(r,n.position,null,n)}return null}static _hitTestTextArea(e,t){return xc.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=n.range.getStartPosition();let s=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,r,n.range,o):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,r,n.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,r,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!xc.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new Le(1,1),null,fee);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return t.fulfill(7,new Le(s,o),null,fee)}if(n){if(xc.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(s)===0){const a=e.getLineWidth(s),u=Z9(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new Le(s,1),null,u)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const a=Z9(t.mouseContentHorizontalOffset-o),u=new Le(s,e.model.getLineMaxColumn(s));return t.fulfill(7,u,null,a)}}return t.fulfill(0)}const r=Wo._doHitTest(e,t);return r.type===1?Wo.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}static _hitTestMinimap(e,t){if(xc.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new Le(n,r))}return null}static _hitTestScrollbarSlider(e,t){if(xc.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(r);return t.fulfill(11,new Le(r,s))}}return null}static _hitTestScrollbar(e,t){if(xc.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new Le(n,r))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,r=n.get(130),s=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-r.contentLeft;return Wo._getMouseColumn(s,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,r,s){const o=r.lineNumber,a=r.column,u=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>u){const L=Z9(t.mouseContentHorizontalOffset-u);return t.fulfill(7,r,null,L)}const d=e.visibleRangeForPosition(o,a);if(!d)return t.fulfill(0,r);const h=d.left;if(t.mouseContentHorizontalOffset===h)return t.fulfill(6,r,null,{mightBeForeignElement:!!s});const f=[];if(f.push({offset:d.left,column:a}),a>1){const L=e.visibleRangeForPosition(o,a-1);L&&f.push({offset:L.left,column:a-1})}const p=e.model.getLineMaxColumn(o);if(a<p){const L=e.visibleRangeForPosition(o,a+1);L&&f.push({offset:L.left,column:a+1})}f.sort((L,S)=>L.offset-S.offset);const m=t.pos.toClientCoordinates(),v=n.getBoundingClientRect(),b=v.left<=m.clientX&&m.clientX<=v.right;for(let L=1;L<f.length;L++){const S=f[L-1],y=f[L];if(S.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){const E=new Q(o,S.column,o,y.column);return t.fulfill(6,r,E,{mightBeForeignElement:!b||!!s})}}return t.fulfill(6,r,null,{mightBeForeignElement:!b||!!s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(s-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new Hq(t.pos.x,o),u=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return u.type===1?u:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=_0(e.viewDomNode);let r;if(n?typeof n.caretRangeFromPoint>"u"?r=dAe(n,t.clientX,t.clientY):r=n.caretRangeFromPoint(t.clientX,t.clientY):r=document.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new Lv;const s=r.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,u=a?a.parentNode:null;return(u&&u.nodeType===u.ELEMENT_NODE?u.className:null)===Pf.CLASS_NAME?w1.createFromDOMInfo(e,o,r.startOffset):new Lv(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Pf.CLASS_NAME?w1.createFromDOMInfo(e,s,s.textContent.length):new Lv(s)}return new Lv}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const r=n.offsetNode.parentNode,s=r?r.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===Pf.CLASS_NAME?w1.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Lv(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const r=n.offsetNode.parentNode,s=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,o=r?r.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===Pf.CLASS_NAME){const u=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(u)return w1.createFromDOMInfo(e,u,0)}else if(a===Pf.CLASS_NAME)return w1.createFromDOMInfo(e,n.offsetNode,0)}return new Lv(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:r}=t.getTextModelOptions(),s=PA.atomicPosition(n,e.column-1,r,2);return s!==-1?new Le(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new Lv;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const r=e.model.getInjectedTextAt(n.position),s=e.model.normalizePosition(n.position,2);(r||!s.equals(n.position))&&(n=new UH(s,n.spanNode,r))}return n.type===1&&e.stickyTabStops&&(n=new UH(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function dAe(i,e,t){const n=document.createRange();let r=i.elementFromPoint(e,t);if(r!==null){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const s=r.getBoundingClientRect(),o=window.getComputedStyle(r,null).getPropertyValue("font"),a=r.innerText;let u=s.left,d=0,h;if(e>s.left+s.width)d=a.length;else{const f=B1.getInstance();for(let p=0;p<a.length+1;p++){if(h=f.getCharWidth(a.charAt(p),o)/2,u+=h,e<u){d=p;break}u+=h}}n.setStart(r.firstChild,d),n.setEnd(r.firstChild,d)}return n}class B1{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return B1._INSTANCE||(B1._INSTANCE=new B1),B1._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const r=this._canvas.getContext("2d");r.font=t;const o=r.measureText(e).width;return this._cache[n]=o,o}}B1._INSTANCE=null;function o3(i){return function(e,t){let n=!1;return i&&(n=i.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class Ab extends cM{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Wo(this._context,n),this._mouseDownOperation=this._register(new hAe(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(130).height;const r=new pTe(this.viewHelper.viewDomNode);this._register(r.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(r.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),o3(this.mouseTargetFactory),Ab.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(r.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(r.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const s=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(67))return;const a=new Vy(o);if(qn?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const d=Ap.getZoomLevel(),h=a.deltaY>0?1:-1;Ap.setZoomLevel(d+h),a.preventDefault(),a.stopPropagation()}};this._register(Ge(this.viewHelper.viewDomNode,Ht.MOUSE_WHEEL,s,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(130)){const t=this._context.configuration.options.get(130).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const r=new wce(e,t).toPageCoordinates(),s=yce(this.viewHelper.viewDomNode);return r.y<s.y||r.y>s.y+s.height||r.x<s.x||r.x>s.x+s.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const r=_0(this.viewHelper.viewDomNode);r&&(n=r.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,r=t.type===2||t.type===3||t.type===4,s=t.type===3,o=this._context.configuration.options.get(97),a=t.type===8||t.type===5,u=t.type===9;let d=e.leftButton||e.middleButton;qn&&e.leftButton&&e.ctrlKey&&(d=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(n||s&&o))h(),this._mouseDownOperation.start(t.type,e);else if(r)e.preventDefault();else if(a){const f=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(f.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else u&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}Ab.MOUSE_MOVE_MINIMUM_TIME=100;class hAe extends Oe{constructor(e,t,n,r,s){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=r,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new _Te(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Ma),this._mouseState=new K8,this._currentSelection=new yt(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(80)&&r.get(31)&&!r.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,o3(null),s=>this._onMouseDownThenMove(s),s=>{const o=this._findMousePosition(this._lastMouseEvent,!0);s&&s instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,o3(null),s=>this._onMouseDownThenMove(s),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,r=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(r.getCurrentScrollTop()-(t.y-e.posy),0),u=Zy.getZoneAtCoord(this._context,a);if(u){const h=this._helpPositionJumpOverViewZone(u);if(h)return new xh(null,13,s,h)}const d=r.getLineNumberAtVerticalOffset(a);return new xh(null,13,s,new Le(d,1))}if(e.posy>t.y+t.height){const a=r.getCurrentScrollTop()+(e.posy-t.y),u=Zy.getZoneAtCoord(this._context,a);if(u){const h=this._helpPositionJumpOverViewZone(u);if(h)return new xh(null,13,s,h)}const d=r.getLineNumberAtVerticalOffset(a);return new xh(null,13,s,new Le(d,n.getLineMaxColumn(d)))}const o=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new xh(null,13,s,new Le(o,1)):e.posx>t.x+t.width?new xh(null,13,s,new Le(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){const o=this._helpPositionJumpOverViewZone(r.detail);if(o)return new xh(r.element,r.type,r.mouseColumn,o,null,r.detail)}return r}_helpPositionJumpOverViewZone(e){const t=new Le(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,r=e.positionAfter;return n&&r?n.isBefore(t)?n:r:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class K8{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>K8.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}K8.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Vc;(function(i){i.text="text/plain",i.binary="application/octet-stream",i.unknown="application/unknown",i.markdown="text/markdown",i.latex="text/latex"})(Vc||(Vc={}));let ib=[],lG=[],a3=[];function BR(i,e=!1){const t=fAe(i);ib.push(t),t.userConfigured?a3.push(t):lG.push(t),e&&!t.userConfigured&&ib.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function fAe(i){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:i.userConfigured,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?$ce(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(xs.sep)>=0:!1}}function gAe(i){i?(ib=ib.filter(e=>!e.userConfigured),a3=[]):(ib=[],lG=[],a3=[])}function pAe(i,e){let t;if(i)switch(i.scheme){case Tn.file:t=i.fsPath;break;case Tn.data:t=y0.parseMetaData(i).get(y0.META_DATA_LABEL);break;default:t=i.path}if(!t)return[Vc.unknown];t=t.toLowerCase();const n=K1(t),r=gee(t,n,a3);if(r)return[r,Vc.text];const s=gee(t,n,lG);if(s)return[s,Vc.text];if(e){const o=mAe(e);if(o)return[o,Vc.text]}return[Vc.unknown]}function gee(i,e,t){var n;let r=null,s=null,o=null;for(let a=t.length-1;a>=0;a--){const u=t[a];if(e===u.filenameLowercase){r=u;break}if(u.filepattern&&(!s||u.filepattern.length>s.filepattern.length)){const d=u.filepatternOnPath?i:e;!((n=u.filepatternLowercase)===null||n===void 0)&&n.call(u,d)&&(s=u)}u.extension&&(!o||u.extension.length>o.extension.length)&&e.endsWith(u.extensionLowercase)&&(o=u)}return r?r.mime:s?s.mime:o?o.mime:null}function mAe(i){if(yq(i)&&(i=i.substr(1)),i.length>0)for(let e=ib.length-1;e>=0;e--){const t=ib[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class Zs{constructor(e,t,n,r,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=r,this.selectionEndPosition=s}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new Zs(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new Zs(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const r=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,r,-1)}if(e>=this.selectionEnd){const r=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,r,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let r=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)r++;return[e,n*t.length,r]}static selectedText(e){return new Zs(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let r=e.value,s=e.selectionStart,o=e.selectionEnd,a=t.value,u=t.selectionStart,d=t.selectionEnd;const h=r.substring(o),f=a.substring(d),p=kF(h,f);a=a.substring(0,a.length-p),r=r.substring(0,r.length-p);const m=r.substring(0,s),v=a.substring(0,u),b=zy(m,v);if(a=a.substring(b),r=r.substring(b),u-=b,s-=b,d-=b,o-=b,n&&u===d&&r.length>0){let S=null;if(u===a.length?a.startsWith(r)&&(S=a.substring(r.length)):a.endsWith(r)&&(S=a.substring(0,a.length-r.length)),S!==null&&S.length>0&&(/\uFE0F/.test(S)||exe(S)))return{text:S,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(u===d){if(r===a&&s===0&&o===r.length&&u===a.length&&a.indexOf(`
`)===-1&&nxe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const S=m.length-b;return{text:a,replacePrevCharCnt:S,replaceNextCharCnt:0,positionDelta:0}}const L=o-s;return{text:a,replacePrevCharCnt:L,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(zy(e.value,t.value),e.selectionEnd),r=Math.min(kF(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-r),o=t.value.substring(n,t.value.length-r);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const u=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:u-o.length}}}Zs.EMPTY=new Zs("",0,0,null,null);class Bw{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,r=n+1,s=n+t;return new Q(r,1,s+1,1)}static fromEditorSelection(e,t,n,r,s){const o=Bw._getPageOfLine(n.startLineNumber,r),a=Bw._getRangeForPage(o,r),u=Bw._getPageOfLine(n.endLineNumber,r),d=Bw._getRangeForPage(u,r),h=a.intersectRanges(new Q(1,1,n.startLineNumber,n.startColumn));let f=t.getValueInRange(h,1);const p=t.getLineCount(),m=t.getLineMaxColumn(p),v=d.intersectRanges(new Q(n.endLineNumber,n.endColumn,p,m));let b=t.getValueInRange(v,1),L;if(o===u||o+1===u)L=t.getValueInRange(n,1);else{const S=a.intersectRanges(n),y=d.intersectRanges(n);L=t.getValueInRange(S,1)+String.fromCharCode(8230)+t.getValueInRange(y,1)}return s&&(f.length>500&&(f=f.substring(f.length-500,f.length)),b.length>500&&(b=b.substring(0,500)),L.length>2*500&&(L=L.substring(0,500)+String.fromCharCode(8230)+L.substring(L.length-500,L.length))),new Zs(f+L+b,f.length,f.length+L.length,new Le(n.startLineNumber,n.startColumn),new Le(n.endLineNumber,n.endColumn))}}var l3;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(l3||(l3={}));const jH={forceCopyWithSyntaxHighlighting:!1};class FA{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}FA.INSTANCE=new FA;class _Ae{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class vAe extends Oe{constructor(e,t,n,r){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=r,this._onFocus=this._register(new Ce),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Ce),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Ce),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Ce),this.onCut=this._onCut.event,this._onPaste=this._register(new Ce),this.onPaste=this._onPaste.event,this._onType=this._register(new Ce),this.onType=this._onType.event,this._onCompositionStart=this._register(new Ce),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Ce),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Ce),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Ce),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new er(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new er(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Zs.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null,this._nextCommand=0;let s=null;this._register(this._textArea.onKeyDown(o=>{const a=new yr(o);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(o=>{const a=new yr(o);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(o=>{const a=new _Ae;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===o.data&&(s&&s.equals(109)&&(s.code==="ArrowRight"||s.code==="ArrowLeft")||this._browser.isFirefox)){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(this._browser.isAndroid){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._onCompositionStart.fire({revealDeltaColumns:0})})),this._register(this._textArea.onCompositionUpdate(o=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const d=Zs.readFromTextArea(this._textArea),h=Zs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(o);return}const u=a.handleCompositionUpdate(o.data);this._textAreaState=Zs.readFromTextArea(this._textArea),this._onType.fire(u),this._onCompositionUpdate.fire(o)})),this._register(this._textArea.onCompositionEnd(o=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Zs.readFromTextArea(this._textArea),h=Zs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}const u=a.handleCompositionUpdate(o.data);this._textAreaState=Zs.readFromTextArea(this._textArea),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Zs.readFromTextArea(this._textArea),u=Zs.deduceInput(this._textAreaState,a,this._OS===2);if(u.replacePrevCharCnt===0&&u.text.length===1&&Ws(u.text.charCodeAt(0)))return;this._textAreaState=a;const d=u.text===""&&u.replacePrevCharCnt===0&&u.replaceNextCharCnt===0&&u.positionDelta===0;this._nextCommand===0?d||this._onType.fire(u):(d||this._firePaste(u.text,null),this._nextCommand=0)})),this._register(this._textArea.onCut(o=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(o),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(o=>{this._ensureClipboardGetsEditorSelection(o)})),this._register(this._textArea.onPaste(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),IN.canUseTextData(o)){const[a,u]=IN.getTextData(o);a!==""&&this._firePaste(a,u)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",Zs.EMPTY),this._nextCommand=1})),this._register(this._textArea.onFocus(()=>{const o=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!o&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return Ge(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),r=n-e;if(e=n,r<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),u=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===u)return;const d=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(d[0],d[1],d[2]),f=this._textAreaState.deduceEditorPosition(u),p=this._host.deduceModelPosition(f[0],f[1],f[2]),m=new yt(h.lineNumber,h.column,p.lineNumber,p.column);this._onSelectionChangeRequest.fire(m)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(IN.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(FA.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),!IN.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",Zs.selectedText(t.text));return}IN.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=FA.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class IN{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(Vc.text);let n=null;const r=e.clipboardData.getData("vscode-editor-data");if(typeof r=="string")try{n=JSON.parse(r),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,r){if(e.clipboardData){e.clipboardData.setData(Vc.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(r)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class bAe extends Oe{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(mh(this._actual,"keydown")).event,this.onKeyUp=this._register(mh(this._actual,"keyup")).event,this.onCompositionStart=this._register(mh(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(mh(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(mh(this._actual,"compositionend")).event,this.onInput=this._register(mh(this._actual,"input")).event,this.onCut=this._register(mh(this._actual,"cut")).event,this.onCopy=this._register(mh(this._actual,"copy")).event,this.onPaste=this._register(mh(this._actual,"paste")).event,this.onFocus=this._register(mh(this._actual,"focus")).event,this.onBlur=this._register(mh(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Ce),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(Ge(this._actual,l3.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=_0(this._actual);return e?e.activeElement===this._actual:uq(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const r=this._actual;let s=null;const o=_0(r);o?s=o.activeElement:s=document.activeElement;const a=s===r,u=r.selectionStart,d=r.selectionEnd;if(a&&u===t&&d===n){wl&&window.parent!==window&&r.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(t,n),wl&&window.parent!==window&&r.focus();return}try{const h=IEe(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(t,n),TEe(r,h)}catch{}}}class CAe extends Ab{constructor(e,t,n){super(e,t,n),this._register(Hi.addTarget(this.viewHelper.linesContentDomNode)),this._register(Ge(this.viewHelper.linesContentDomNode,lr.Tap,s=>this.onTap(s))),this._register(Ge(this.viewHelper.linesContentDomNode,lr.Change,s=>this.onChange(s))),this._register(Ge(this.viewHelper.linesContentDomNode,lr.Contextmenu,s=>this._onContextMenu(new Tb(s,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(Ge(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const r=new mTe(this.viewHelper.viewDomNode);this._register(r.onPointerMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),o3(this.mouseTargetFactory),Ab.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Tb(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class wAe extends Ab{constructor(e,t,n){super(e,t,n),this._register(Hi.addTarget(this.viewHelper.linesContentDomNode)),this._register(Ge(this.viewHelper.linesContentDomNode,lr.Tap,r=>this.onTap(r))),this._register(Ge(this.viewHelper.linesContentDomNode,lr.Change,r=>this.onChange(r))),this._register(Ge(this.viewHelper.linesContentDomNode,lr.Contextmenu,r=>this._onContextMenu(new Tb(r,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Tb(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(l3.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class yAe extends Oe{constructor(e,t,n){super(),ng&&c8.pointerEvents?this.handler=this._register(new CAe(e,t,n)):window.TouchEvent?this.handler=this._register(new wAe(e,t,n)):this.handler=this._register(new Ab(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class $S extends cM{}class Xy extends $S{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Le(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(130);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Le(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const r=Math.abs(this._lastCursorModelPosition.lineNumber-n);return r===0?'<span class="relative-current-line-number">'+n+"</span>":String(r)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Xa?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s='<div class="'+Xy.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let u=n;u<=r;u++){const d=u-n;if(!this._renderFinalNewline&&u===o&&this._context.model.getLineLength(u)===0){a[d]="";continue}const h=this._getLineRenderLineNumber(u);h?u===this._activeLineNumber?a[d]='<div class="active-line-number '+Xy.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[d]=s+h+"</div>":a[d]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Xy.CLASS_NAME="line-numbers";hr((i,e)=>{const t=i.getColor(sde);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=i.getColor(b2e);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class Ob extends vc{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=ii(document.createElement("div")),this._domNode.setClassName(Ob.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ii(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ob.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Ob.CLASS_NAME="glyph-margin";Ob.OUTER_CLASS_NAME="margin";const rb="monaco-mouse-cursor-text";class uG{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new uG(this.top,this.left,e)}}const TN=wl;class SAe extends vc{constructor(e,t,n){super(e),this._primaryCursorPosition=new Le(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,s=r.get(130);this._setAccessibilityOptions(r),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=r.get(43),this._lineHeight=r.get(58),this._emptySelectionClipboard=r.get(32),this._copyWithSyntaxHighlighting=r.get(21),this._visibleTextArea=null,this._selections=[new yt(1,1,1,1)],this._modelSelections=[new yt(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ii(document.createElement("textarea")),ag.write(this.textArea,6),this.textArea.setClassName(`inputarea ${rb}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("tabindex",String(r.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",C("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),r.get(30)&&r.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=ii(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:d=>this._context.model.getLineMaxColumn(d),getValueInRange:(d,h)=>this._context.model.getValueInRange(d,h)},a={getDataToCopy:d=>{const h=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Ao),f=this._context.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),m=Array.isArray(h)?h:null,v=Array.isArray(h)?h.join(f):h;let b,L=null;if(d&&(jH.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&v.length<65536)){const S=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);S&&(b=S.html,L=S.mode)}return{isFromEmptySelection:p,multicursorText:m,text:v,html:b,mode:L}},getScreenReaderContent:d=>{if(this._accessibilitySupport===1){if(qn){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition();let p=this._getWordBeforePosition(f);if(p.length===0&&(p=this._getCharacterBeforePosition(f)),p.length>0)return new Zs(p,p.length,p.length,f,f)}}return Zs.EMPTY}if(Ule){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[p,m]=this._getAndroidWordAtPosition(f);if(p.length>0)return new Zs(p,m,m,f,f)}return Zs.EMPTY}return Bw.fromEditorSelection(d,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,h,f)=>this._context.model.deduceModelPositionRelativeToViewPosition(d,h,f)},u=this._register(new bAe(this.textArea.domNode));this._textAreaInput=this._register(new vAe(a,u,qu,WLe)),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let h=!1,f=null,p=null;d.metadata&&(h=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,f=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,p=d.metadata.mode),this._viewController.paste(d.text,h,f,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const h=this._selections[0].startLineNumber,f=this._selections[0].startColumn+d.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new Q(h,f,h,f),0,1);const p=this._viewHelper.visibleRangeForPositionRelativeToEditor(h,f);p&&(this._visibleTextArea=new uG(this._context.viewLayout.getVerticalOffsetForLineNumber(h),p.left,TN?0:1),this.textArea.domNode.scrollLeft=0,this._render()),this.textArea.setClassName(`inputarea ${rb} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(LAe(d.data,this._fontInfo)),this.textArea.domNode.scrollLeft=0,this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${rb}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),r=gc(t);let s=!0,o=e.column,a=!0,u=e.column,d=0;for(;d<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const h=n.charCodeAt(o-2);r.get(h)!==0?s=!1:o--}if(a&&u>n.length&&(a=!1),a){const h=n.charCodeAt(u-1);r.get(h)!==0?a=!1:u++}d++}return[n.substring(o-1,u-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=gc(this._context.configuration.options.get(116));let r=e.column,s=0;for(;r>1;){const o=t.charCodeAt(r-2);if(n.get(o)!==0||s>50)return t.substring(r-1,e.column-1);s++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Ws(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?C("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Xa?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===af.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new Le(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(qn){this._renderInsideEditor(this._primaryCursorPosition,t,e,TN?0:1,this._lineHeight),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._renderInsideEditor(this._primaryCursorPosition,t,e,TN?0:1,TN?0:1)}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderInsideEditor(e,t,n,r,s){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;Aa.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(n),o.setWidth(r),o.setHeight(s),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Aa.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),TN){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+Ob.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+Xy.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function LAe(i,e){const n=document.createElement("canvas").getContext("2d");n.font=EAe(e);const r=n.measureText(i);return wl?r.width+2:r.width}function EAe(i){return xAe("normal",i.fontWeight,i.fontSize,i.lineHeight,i.fontFamily)}function xAe(i,e,t,n,r){return`${i} normal ${e} ${t}px / ${n}px ${r}`}class y1{static columnSelect(e,t,n,r,s,o){let a=Math.abs(s-n)+1,u=n>s,d=r>o,h=r<o,f=[];for(let p=0;p<a;p++){let m=n+(u?-p:p),v=ur.columnFromVisibleColumn2(e,t,m,r),b=ur.columnFromVisibleColumn2(e,t,m,o),L=ur.visibleColumnFromColumn2(e,t,new Le(m,v)),S=ur.visibleColumnFromColumn2(e,t,new Le(m,b));h&&(L>o||S<r)||d&&(S>r||L<o)||f.push(new so(new Q(m,v,m,v),0,new Le(m,b),0))}if(f.length===0)for(let p=0;p<a;p++){const m=n+(u?-p:p),v=t.getLineMaxColumn(m);f.push(new so(new Q(m,v,m,v),0,new Le(m,v),0))}return{viewStates:f,reversed:u,fromLineNumber:n,fromVisualColumn:r,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,n){let r=n.toViewVisualColumn;return r>0&&r--,y1.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,r)}static columnSelectRight(e,t,n){let r=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let u=s;u<=o;u++){const d=t.getLineMaxColumn(u),h=ur.visibleColumnFromColumn2(e,t,new Le(u,d));r=Math.max(r,h)}let a=n.toViewVisualColumn;return a<r&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,r){const s=r?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,r){const s=r?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class xo{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return yt.fromPositions(r.getEndPosition())}}class DAe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return yt.fromRange(r,0)}}class WR{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return yt.fromPositions(r.getStartPosition())}}class l4{constructor(e,t,n,r,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return yt.fromPositions(r.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class cG{constructor(e,t,n,r=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class X9{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class pi{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-XEe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new Le(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const r=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=PA.atomicPosition(s,t.column-1,n,0);if(o!==-1&&o+1>=r)return new Le(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const r=e.stickyTabStops?pi.leftPositionAtomicSoftTabs(t,n,e.tabSize):pi.leftPosition(t,n);return new X9(r.lineNumber,r.column,0)}static moveLeft(e,t,n,r,s){let o,a;if(n.hasSelection()&&!r)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const u=n.position.delta(void 0,-(s-1)),d=t.normalizePosition(pi.clipPositionColumn(u,t),0),h=pi.left(e,t,d);o=h.lineNumber,a=h.column}return n.move(r,o,a,0)}static clipPositionColumn(e,t){return new Le(e.lineNumber,pi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+NF(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new Le(t,n)}static rightPositionAtomicSoftTabs(e,t,n,r,s){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=PA.atomicPosition(o,n-1,r,1);if(a!==-1)return new Le(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const r=e.stickyTabStops?pi.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):pi.rightPosition(t,n.lineNumber,n.column);return new X9(r.lineNumber,r.column,0)}static moveRight(e,t,n,r,s){let o,a;if(n.hasSelection()&&!r)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const u=n.position.delta(void 0,s-1),d=t.normalizePosition(pi.clipPositionColumn(u,t),1),h=pi.right(e,t,d);o=h.lineNumber,a=h.column}return n.move(r,o,a,0)}static vertical(e,t,n,r,s,o,a){const u=ur.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize)+s,d=t.getLineCount(),h=n===1&&r===1,f=n===d&&r===t.getLineMaxColumn(n),p=o<n?h:f;return n=o,n<1?(n=1,a?r=t.getLineMinColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):n>d?(n=d,a?r=t.getLineMaxColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):r=ur.columnFromVisibleColumn2(e,t,n,u),p?s=0:s=u-ur.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize),new X9(n,r,s)}static down(e,t,n,r,s,o,a){return this.vertical(e,t,n,r,s,n+o,a)}static moveDown(e,t,n,r,s){let o,a;n.hasSelection()&&!r?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let u=pi.down(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(r,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateDown(e,t,n){let r=n.selection,s=pi.down(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=pi.down(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new so(new Q(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new Le(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,r,s,o,a){return this.vertical(e,t,n,r,s,n-o,a)}static moveUp(e,t,n,r,s){let o,a;n.hasSelection()&&!r?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);let u=pi.up(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(r,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateUp(e,t,n){let r=n.selection,s=pi.up(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=pi.up(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new so(new Q(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new Le(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,r){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(r,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,r){const s=t.getLineCount();let o=n.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return n.move(r,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,r){let s=n.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o,u;return n.position.column===a?u=o:u=a,n.move(r,s,u,0)}static moveToEndOfLine(e,t,n,r,s){let o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(r,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,r){return n.move(r,1,1,0)}static moveToEndOfBuffer(e,t,n,r){let s=t.getLineCount(),o=t.getLineMaxColumn(s);return n.move(r,s,o,0)}}class Mb{static deleteRight(e,t,n,r){let s=[],o=e!==3;for(let a=0,u=r.length;a<u;a++){const d=r[a];let h=d;if(h.isEmpty()){let f=d.getPosition(),p=pi.right(t,n,f);h=new Q(p.lineNumber,p.column,f.lineNumber,f.column)}if(h.isEmpty()){s[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),s[a]=new xo(h,"")}return[o,s]}static isAutoClosingPairDelete(e,t,n,r,s,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let u=0,d=o.length;u<d;u++){const h=o[u],f=h.getPosition();if(!h.isEmpty())return!1;const p=s.getLineContent(f.lineNumber);if(f.column<2||f.column>=p.length+1)return!1;const m=p.charAt(f.column-2),v=r.get(m);if(!v)return!1;if(pw(m)){if(n==="never")return!1}else if(t==="never")return!1;const b=p.charAt(f.column-1);let L=!1;for(const S of v)S.open===m&&S.close===b&&(L=!0);if(!L)return!1;if(e==="auto"){let S=!1;for(let y=0,E=a.length;y<E;y++){const A=a[y];if(f.lineNumber===A.startLineNumber&&f.column===A.startColumn){S=!0;break}}if(!S)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let r=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].getPosition(),u=new Q(a.lineNumber,a.column-1,a.lineNumber,a.column+1);r[s]=new xo(u,"")}return[!0,r]}static deleteLeft(e,t,n,r,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,r,s))return this._runAutoClosingPairDelete(t,n,r);const o=[];let a=e!==2;for(let u=0,d=r.length;u<d;u++){let h=Mb.getDeleteRange(r[u],n,t);if(h.isEmpty()){o[u]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[u]=new xo(h,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const r=e.getPosition();if(n.useTabStops&&r.column>1){const s=t.getLineContent(r.lineNumber),o=Ta(s),a=o===-1?s.length+1:o+1;if(r.column<=a){const u=ur.visibleColumnFromColumn2(n,t,r),d=ur.prevIndentTabStop(u,n.indentSize),h=ur.columnFromVisibleColumn2(n,t,r.lineNumber,d);return new Q(r.lineNumber,h,r.lineNumber,r.column)}}return Q.fromPositions(Mb.getPositionAfterDeleteLeft(r,t),r)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=oxe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new Le(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let r=[],s=null;n.sort((o,a)=>Le.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const u=n[o];if(u.isEmpty())if(e.emptySelectionClipboard){let d=u.getPosition(),h,f,p,m;d.lineNumber<t.getLineCount()?(h=d.lineNumber,f=1,p=d.lineNumber+1,m=1):d.lineNumber>1&&(s==null?void 0:s.endLineNumber)!==d.lineNumber?(h=d.lineNumber-1,f=t.getLineMaxColumn(d.lineNumber-1),p=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber)):(h=d.lineNumber,f=1,p=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber));let v=new Q(h,f,p,m);s=v,v.isEmpty()?r[o]=null:r[o]=new xo(v,"")}else r[o]=null;else r[o]=new xo(u,"")}return new ll(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class ni{static _createWord(e,t,n,r,s){return{start:r,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(r,e,n)}static _doFindPreviousWordOnLine(e,t,n){let r=0;for(let s=n.column-2;s>=0;s--){let o=e.charCodeAt(s),a=t.get(o);if(a===0){if(r===2)return this._createWord(e,r,a,s+1,this._findEndOfWord(e,t,r,s+1));r=1}else if(a===2){if(r===1)return this._createWord(e,r,a,s+1,this._findEndOfWord(e,t,r,s+1));r=2}else if(a===1&&r!==0)return this._createWord(e,r,a,s+1,this._findEndOfWord(e,t,r,s+1))}return r!==0?this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0)):null}static _findEndOfWord(e,t,n,r){let s=e.length;for(let o=r;o<s;o++){let a=e.charCodeAt(o),u=t.get(a);if(u===1||n===1&&u===2||n===2&&u===0)return o}return s}static _findNextWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(r,e,n)}static _doFindNextWordOnLine(e,t,n){let r=0,s=e.length;for(let o=n.column-1;o<s;o++){let a=e.charCodeAt(o),u=t.get(a);if(u===0){if(r===2)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,o-1),o);r=1}else if(u===2){if(r===1)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,o-1),o);r=2}else if(u===1&&r!==0)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,o-1),o)}return r!==0?this._createWord(e,r,1,this._findStartOfWord(e,t,r,s-1),s):null}static _findStartOfWord(e,t,n,r){for(let s=r;s>=0;s--){let o=e.charCodeAt(s),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,r){let s=n.lineNumber,o=n.column;o===1&&s>1&&(s=s-1,o=t.getLineMaxColumn(s));let a=ni._findPreviousWordOnLine(e,t,new Le(s,o));if(r===0)return new Le(s,a?a.start+1:1);if(r===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=ni._findPreviousWordOnLine(e,t,new Le(s,a.start+1))),new Le(s,a?a.start+1:1);if(r===3){for(;a&&a.wordType===2;)a=ni._findPreviousWordOnLine(e,t,new Le(s,a.start+1));return new Le(s,a?a.start+1:1)}return a&&o<=a.end+1&&(a=ni._findPreviousWordOnLine(e,t,new Le(s,a.start+1))),new Le(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===1)return n>1?new Le(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),u=s.charCodeAt(o-1);if(a===95&&u!==95)return new Le(n,o);if(Wv(a)&&If(u))return new Le(n,o);if(If(a)&&If(u)&&o+1<r){const d=s.charCodeAt(o);if(Wv(d))return new Le(n,o)}}return new Le(n,1)}static moveWordRight(e,t,n,r){let s=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let u=ni._findNextWordOnLine(e,t,new Le(s,o));if(r===2)u&&u.wordType===2&&u.end-u.start===1&&u.nextCharClass===0&&(u=ni._findNextWordOnLine(e,t,new Le(s,u.end+1))),u?o=u.end+1:o=t.getLineMaxColumn(s);else if(r===3){for(a&&(o=0);u&&(u.wordType===2||u.start+1<=o);)u=ni._findNextWordOnLine(e,t,new Le(s,u.end+1));u?o=u.start+1:o=t.getLineMaxColumn(s)}else u&&!a&&o>=u.start+1&&(u=ni._findNextWordOnLine(e,t,new Le(s,u.end+1))),u?o=u.start+1:o=t.getLineMaxColumn(s);return new Le(s,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===r)return n<e.getLineCount()?new Le(n+1,1):t;const s=e.getLineContent(n);for(let o=t.column+1;o<r;o++){const a=s.charCodeAt(o-2),u=s.charCodeAt(o-1);if(a!==95&&u===95)return new Le(n,o);if(Wv(a)&&If(u))return new Le(n,o);if(If(a)&&If(u)&&o+1<r){const d=s.charCodeAt(o);if(Wv(d))return new Le(n,o)}}return new Le(n,r)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-2,s=Qf(n,r);return s+1<r?new Q(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(Mb.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const f=e.selection.getPosition();return new Q(f.lineNumber,f.column-1,f.lineNumber,f.column+1)}const a=new Le(s.positionLineNumber,s.positionColumn);let u=a.lineNumber,d=a.column;if(u===1&&d===1)return null;if(o){let f=this._deleteWordLeftWhitespace(r,a);if(f)return f}let h=ni._findPreviousWordOnLine(n,r,a);return t===0?h?d=h.start+1:d>1?d=1:(u--,d=r.getLineMaxColumn(u)):(h&&d<=h.end+1&&(h=ni._findPreviousWordOnLine(n,r,new Le(u,h.start+1))),h?d=h.end+1:d>1?d=1:(u--,d=r.getLineMaxColumn(u))),new Q(u,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const r=new Le(n.positionLineNumber,n.positionColumn);let s=this._deleteInsideWordWhitespace(t,r);return s||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=n.length;if(r===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let o=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(n,o))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;o+1<r&&this._charAtIsWhitespace(n,o+1);)o++;return new Q(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const r=t.getLineContent(n.lineNumber),s=r.length;if(s===0)return n.lineNumber>1?new Q(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new Q(n.lineNumber,1,n.lineNumber+1,1):new Q(n.lineNumber,1,n.lineNumber,1);const o=f=>f.start+1<=n.column&&n.column<=f.end+1,a=(f,p)=>(f=Math.min(f,n.column),p=Math.max(p,n.column),new Q(n.lineNumber,f,n.lineNumber,p)),u=f=>{let p=f.start+1,m=f.end+1,v=!1;for(;m-1<s&&this._charAtIsWhitespace(r,m-1);)v=!0,m++;if(!v)for(;p>1&&this._charAtIsWhitespace(r,p-2);)p--;return a(p,m)},d=ni._findPreviousWordOnLine(e,t,n);if(d&&o(d))return u(d);const h=ni._findNextWordOnLine(e,t,n);return h&&o(h)?u(h):d&&h?a(d.end+1,h.start+1):d?a(d.start+1,d.end+1):h?a(h.start+1,h.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=ni._moveWordPartLeft(e,n);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let r=t;r<n;r++){let s=e.charAt(r);if(s!==" "&&s!=="	")return r}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-1,s=this._findFirstNonWhitespaceChar(n,r);return r+1<s?new Q(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new Le(s.positionLineNumber,s.positionColumn);let u=a.lineNumber,d=a.column;const h=r.getLineCount(),f=r.getLineMaxColumn(u);if(u===h&&d===f)return null;if(o){let m=this._deleteWordRightWhitespace(r,a);if(m)return m}let p=ni._findNextWordOnLine(n,r,a);return t===2?p?d=p.end+1:d<f||u===h?d=f:(u++,p=ni._findNextWordOnLine(n,r,new Le(u,1)),p?d=p.start+1:d=r.getLineMaxColumn(u)):(p&&d>=p.start+1&&(p=ni._findNextWordOnLine(n,r,new Le(u,p.end+1))),p?d=p.start+1:d<f||u===h?d=f:(u++,p=ni._findNextWordOnLine(n,r,new Le(u,1)),p?d=p.start+1:d=r.getLineMaxColumn(u))),new Q(u,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=ni._moveWordPartRight(e,n);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}static _createWordAtPosition(e,t,n){const r=new Q(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(e,t,n){const r=gc(t),s=ni._findPreviousWordOnLine(r,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return ni._createWordAtPosition(e,n.lineNumber,s);const o=ni._findNextWordOnLine(r,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?ni._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,r,s){const o=gc(e.wordSeparators);let a=ni._findPreviousWordOnLine(o,t,s),u=ni._findNextWordOnLine(o,t,s);if(!r){let m,v;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(m=a.start+1,v=a.end+1):u&&u.wordType===1&&u.start<=s.column-1&&s.column-1<=u.end?(m=u.start+1,v=u.end+1):(a?m=a.end+1:m=1,u?v=u.start+1:v=t.getLineMaxColumn(s.lineNumber)),new so(new Q(s.lineNumber,m,s.lineNumber,v),0,new Le(s.lineNumber,v),0)}let d,h;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(d=a.start+1,h=a.end+1):u&&u.wordType===1&&u.start<s.column-1&&s.column-1<u.end?(d=u.start+1,h=u.end+1):(d=s.column,h=s.column);let f=s.lineNumber,p;if(n.selectionStart.containsPosition(s))p=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){p=d;let m=new Le(f,p);n.selectionStart.containsPosition(m)&&(p=n.selectionStart.endColumn)}else{p=h;let m=new Le(f,p);n.selectionStart.containsPosition(m)&&(p=n.selectionStart.startColumn)}return n.move(!0,f,p,0)}}class q8 extends ni{static deleteWordPartLeft(e){const t=VR([ni.deleteWordLeft(e,0),ni.deleteWordLeft(e,2),ni._deleteWordPartLeft(e.model,e.selection)]);return t.sort(Q.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=VR([ni.deleteWordRight(e,0),ni.deleteWordRight(e,2),ni._deleteWordPartRight(e.model,e.selection)]);return t.sort(Q.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const r=VR([ni.moveWordLeft(e,t,n,0),ni.moveWordLeft(e,t,n,2),ni._moveWordPartLeft(t,n)]);return r.sort(Le.compare),r[2]}static moveWordPartRight(e,t,n){const r=VR([ni.moveWordRight(e,t,n,0),ni.moveWordRight(e,t,n,2),ni._moveWordPartRight(t,n)]);return r.sort(Le.compare),r[0]}}function VR(i){return i.filter(e=>!!e)}class ro{static addCursorDown(e,t,n){let r=[],s=0;for(let o=0,a=t.length;o<a;o++){const u=t[o];r[s++]=new Rn(u.modelState,u.viewState),n?r[s++]=Rn.fromModelState(pi.translateDown(e.cursorConfig,e.model,u.modelState)):r[s++]=Rn.fromViewState(pi.translateDown(e.cursorConfig,e,u.viewState))}return r}static addCursorUp(e,t,n){let r=[],s=0;for(let o=0,a=t.length;o<a;o++){const u=t[o];r[s++]=new Rn(u.modelState,u.viewState),n?r[s++]=Rn.fromModelState(pi.translateUp(e.cursorConfig,e.model,u.modelState)):r[s++]=Rn.fromViewState(pi.translateUp(e.cursorConfig,e,u.viewState))}return r}static moveToBeginningOfLine(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=this._moveToLineStart(e,a,n)}return r}static _moveToLineStart(e,t,n){const r=t.viewState.position.column,s=t.modelState.position.column,o=r===s,a=t.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(r===u)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Rn.fromViewState(pi.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Rn.fromModelState(pi.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;o++){const u=t[o];s[o]=this._moveToLineEnd(e,u,n,r)}return s}static _moveToLineEnd(e,t,n,r){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,u=t.modelState.position,d=e.model.getLineMaxColumn(u.lineNumber),h=o-s.column===d-u.column;return a||h?this._moveToLineEndByModel(e,t,n,r):this._moveToLineEndByView(e,t,n,r)}static _moveToLineEndByView(e,t,n,r){return Rn.fromViewState(pi.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,r))}static _moveToLineEndByModel(e,t,n,r){return Rn.fromModelState(pi.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,r))}static expandLineSelection(e,t){let n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r],a=o.modelState.selection.startLineNumber,u=e.model.getLineCount();let d=o.modelState.selection.endLineNumber,h;d===u?h=e.model.getLineMaxColumn(u):(d++,h=1),n[r]=Rn.fromModelState(new so(new Q(a,1,a,1),0,new Le(d,h),0))}return n}static moveToBeginningOfBuffer(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=Rn.fromModelState(pi.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static moveToEndOfBuffer(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=Rn.fromModelState(pi.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static selectAll(e,t){const n=e.model.getLineCount(),r=e.model.getLineMaxColumn(n);return Rn.fromModelState(new so(new Q(1,1,1,1),0,new Le(n,r),0))}static line(e,t,n,r,s){const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new Le(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const d=e.model.getLineCount();let h=o.lineNumber+1,f=1;return h>d&&(h=d,f=e.model.getLineMaxColumn(h)),Rn.fromModelState(new so(new Q(o.lineNumber,1,h,f),0,new Le(h,f),0))}const u=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<u)return Rn.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>u){const d=e.getLineCount();let h=a.lineNumber+1,f=1;return h>d&&(h=d,f=e.getLineMaxColumn(h)),Rn.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,f,0))}else{const d=t.modelState.selectionStart.getEndPosition();return Rn.fromModelState(t.modelState.move(t.modelState.hasSelection(),d.lineNumber,d.column,0))}}static word(e,t,n,r){const s=e.model.validatePosition(r);return Rn.fromModelState(ni.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Rn(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,r=t.viewState.position.column;return Rn.fromViewState(new so(new Q(n,r,n,r),0,new Le(n,r),0))}static moveTo(e,t,n,r,s){const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new Le(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Rn.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,r,s,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,s);case 1:return o===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,s);case 2:return o===2?this._moveUpByViewLines(e,t,r,s):this._moveUpByModelLines(e,t,r,s);case 3:return o===2?this._moveDownByViewLines(e,t,r,s):this._moveDownByModelLines(e,t,r,s);case 4:return o===2?t.map(a=>Rn.fromViewState(pi.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Rn.fromModelState(pi.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 5:return o===2?t.map(a=>Rn.fromViewState(pi.moveToNextBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Rn.fromModelState(pi.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,n,r,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const u=this._firstLineNumberInRange(e.model,a,s),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 13:{const u=this._lastLineNumberInRange(e.model,a,s),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 12:{const u=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 14:{let u=[];for(let d=0,h=t.length;d<h;d++){const f=t[d];u[d]=this.findPositionInViewportIfOutside(e,f,o,r)}return u}default:return null}}static findPositionInViewportIfOutside(e,t,n,r){let s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new Rn(t.modelState,t.viewState);{let o;s>n.endLineNumber-1?o=n.endLineNumber-1:s<n.startLineNumber?o=n.startLineNumber:o=s;const a=pi.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Rn.fromViewState(t.viewState.move(r,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+n-1)}static _lastLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-n+1)}static _moveLeft(e,t,n,r){return t.map(s=>Rn.fromViewState(pi.moveLeft(e.cursorConfig,e,s.viewState,n,r)))}static _moveHalfLineLeft(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(u).length/2);r[s]=Rn.fromViewState(pi.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return r}static _moveRight(e,t,n,r){return t.map(s=>Rn.fromViewState(pi.moveRight(e.cursorConfig,e,s.viewState,n,r)))}static _moveHalfLineRight(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(u).length/2);r[s]=Rn.fromViewState(pi.moveRight(e.cursorConfig,e,a.viewState,n,d))}return r}static _moveDownByViewLines(e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;o++){const u=t[o];s[o]=Rn.fromViewState(pi.moveDown(e.cursorConfig,e,u.viewState,n,r))}return s}static _moveDownByModelLines(e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;o++){const u=t[o];s[o]=Rn.fromModelState(pi.moveDown(e.cursorConfig,e.model,u.modelState,n,r))}return s}static _moveUpByViewLines(e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;o++){const u=t[o];s[o]=Rn.fromViewState(pi.moveUp(e.cursorConfig,e,u.viewState,n,r))}return s}static _moveUpByModelLines(e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;o++){const u=t[o];s[o]=Rn.fromModelState(pi.moveUp(e.cursorConfig,e.model,u.modelState,n,r))}return s}static _moveToViewPosition(e,t,n,r,s){return Rn.fromViewState(t.viewState.move(n,r,s,0))}static _moveToModelPosition(e,t,n,r,s){return Rn.fromModelState(t.modelState.move(n,r,s,0))}static _moveToViewMinColumn(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=e.getLineMinColumn(u);r[s]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(u);r[s]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewCenterColumn(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(u)+e.getLineMinColumn(u))/2);r[s]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewMaxColumn(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=e.getLineMaxColumn(u);r[s]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,n){let r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(u);r[s]=this._moveToViewPosition(e,a,n,u,d)}return r}}var u3;(function(i){const e=function(n){if(!Ga(n))return!1;let r=n;return!(!cc(r.to)||!pl(r.select)&&!mue(r.select)||!pl(r.by)&&!cc(r.by)||!pl(r.value)&&!Sb(r.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let r;switch(n.to){case i.RawDirection.Left:r=0;break;case i.RawDirection.Right:r=1;break;case i.RawDirection.Up:r=2;break;case i.RawDirection.Down:r=3;break;case i.RawDirection.PrevBlankLine:r=4;break;case i.RawDirection.NextBlankLine:r=5;break;case i.RawDirection.WrappedLineStart:r=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:r=7;break;case i.RawDirection.WrappedLineColumnCenter:r=8;break;case i.RawDirection.WrappedLineEnd:r=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:r=10;break;case i.RawDirection.ViewPortTop:r=11;break;case i.RawDirection.ViewPortBottom:r=13;break;case i.RawDirection.ViewPortCenter:r=12;break;case i.RawDirection.ViewPortIfOutside:r=14;break;default:return null}let s=0;switch(n.by){case i.RawUnit.Line:s=1;break;case i.RawUnit.WrappedLine:s=2;break;case i.RawUnit.Character:s=3;break;case i.RawUnit.HalfLine:s=4;break}return{direction:r,unit:s,select:!!n.select,value:n.value||1}}i.parse=t})(u3||(u3={}));const Q9=Object.create(null);function e1(i,e){if(e<=0)return"";Q9[i]||(Q9[i]=["",i]);const t=Q9[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}class Du{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,r,s){const o=ur.visibleColumnFromColumn(e,t,n);if(s){const a=e1(" ",r),d=ur.prevIndentTabStop(o,r)/r;return e1(a,d)}else{const a="	",d=ur.prevRenderTabStop(o,n)/n;return e1(a,d)}}static shiftIndent(e,t,n,r,s){const o=ur.visibleColumnFromColumn(e,t,n);if(s){const a=e1(" ",r),d=ur.nextIndentTabStop(o,r)/r;return e1(a,d)}else{const a="	",d=ur.nextRenderTabStop(o,n)/n;return e1(a,d)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let r=this._selection.endLineNumber;this._selection.endColumn===1&&n!==r&&(r=r-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,u=n===r;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,h=0;for(let f=n;f<=r;f++,d=h){h=0;let p=e.getLineContent(f),m=Ta(p);if(this._opts.isUnshift&&(p.length===0||m===0)||!u&&!this._opts.isUnshift&&p.length===0)continue;if(m===-1&&(m=p.length),f>1&&ur.visibleColumnFromColumn(p,m+1,s)%o!==0&&e.isCheapToTokenize(f-1)){let L=_i.getEnterAction(this._opts.autoIndent,e,new Q(f-1,e.getLineMaxColumn(f-1),f-1,e.getLineMaxColumn(f-1)));if(L){if(h=d,L.appendText)for(let S=0,y=L.appendText.length;S<y&&h<o&&L.appendText.charCodeAt(S)===32;S++)h++;L.removeText&&(h=Math.max(0,h-L.removeText));for(let S=0;S<h&&!(m===0||p.charCodeAt(m-1)!==32);S++)m--}}if(this._opts.isUnshift&&m===0)continue;let v;this._opts.isUnshift?v=Du.unshiftIndent(p,m+1,s,o,a):v=Du.shiftIndent(p,m+1,s,o,a),this._addEditOperation(t,new Q(f,1,f,m+1),v),f===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const d=a?e1(" ",o):"	";for(let h=n;h<=r;h++){const f=e.getLineContent(h);let p=Ta(f);if(!(this._opts.isUnshift&&(f.length===0||p===0))&&!(!u&&!this._opts.isUnshift&&f.length===0)&&(p===-1&&(p=f.length),!(this._opts.isUnshift&&p===0)))if(this._opts.isUnshift){p=Math.min(p,o);for(let m=0;m<p;m++)if(f.charCodeAt(m)===9){p=m+1;break}this._addEditOperation(t,new Q(h,1,h,p+1),"")}else this._addEditOperation(t,new Q(h,1,h,1),d),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let r=t.getInverseEditOperations()[0];return new yt(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let r=this._selection.startColumn;return n.startColumn<=r?n:n.getDirection()===0?new yt(n.startLineNumber,r,n.endLineNumber,n.endColumn):new yt(n.endLineNumber,n.endColumn,n.startLineNumber,r)}return n}}class IAe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new Q(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new Q(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),r=n[0].range,s=n[1].range;return new yt(r.endLineNumber,r.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class xr{static indent(e,t,n){if(t===null||n===null)return[];let r=[];for(let s=0,o=n.length;s<o;s++)r[s]=new Du(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static outdent(e,t,n){let r=[];for(let s=0,o=n.length;s<o;s++)r[s]=new Du(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static shiftIndent(e,t,n){return n=n||1,Du.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Du.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,r){let s=[];for(let o=0,a=n.length;o<a;o++)s[o]=new xo(n[o],r[o]);return new ll(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,r,s){let o=[];for(let a=0,u=n.length;a<u;a++){const d=n[a];let h=d.getPosition();if(s&&!d.isEmpty()&&(s=!1),s&&r.indexOf(`
`)!==r.length-1&&(s=!1),s){let f=new Q(h.lineNumber,1,h.lineNumber,1);o[a]=new cG(f,r,d,!0)}else o[a]=new xo(d,r)}return new ll(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,r,s){if(r||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let o=sg(n);if(o.length===t.length)return o}return null}static paste(e,t,n,r,s,o){const a=this._distributePasteToCursors(e,n,r,s,o);return a?(n=n.sort(Q.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,r,s)}static _goodIndentForLine(e,t,n){let r=null,s="";const o=_i.getInheritIndentForLine(e.autoIndent,t,n,!1);if(o)r=o.action,s=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const h=t.getLineContent(a);if(Qf(h)>=0)break}if(a<1)return null;const u=t.getLineMaxColumn(a),d=_i.getEnterAction(e.autoIndent,t,new Q(a,u,a,u));d&&(s=d.indentation+d.appendText)}return r&&(r===cs.Indent&&(s=xr.shiftIndent(e,s)),r===cs.Outdent&&(s=xr.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,r){let s="",o=n.getStartPosition();if(e.insertSpaces){let a=ur.visibleColumnFromColumn2(e,t,o),u=e.indentSize,d=u-a%u;for(let h=0;h<d;h++)s+=" "}else s="	";return new xo(n,s,r)}static tab(e,t,n){let r=[];for(let s=0,o=n.length;s<o;s++){const a=n[s];if(a.isEmpty()){let u=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(u)&&t.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";let h=e.normalizeIndentation(d);if(!u.startsWith(h)){r[s]=new xo(new Q(a.startLineNumber,1,a.startLineNumber,u.length+1),h,!0);continue}}r[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let u=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==u){r[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[s]=new Du(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return r}static compositionType(e,t,n,r,s,o,a,u){const d=r.map(h=>this._compositionType(n,h,s,o,a,u));return new ll(4,d,{shouldPushStackElementBefore:HR(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,r,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),u=Math.max(1,a.column-r),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),h=new Q(a.lineNumber,u,a.lineNumber,d);return e.getValueInRange(h)===n&&o===0?null:new l4(h,n,0,o)}static _typeCommand(e,t,n){return n?new WR(e,t,!0):new xo(e,t,!0)}static _enter(e,t,n,r){if(e.autoIndent===0)return xr._typeCommand(r,`
`,n);if(!t.isCheapToTokenize(r.getStartPosition().lineNumber)||e.autoIndent===1){let u=t.getLineContent(r.startLineNumber),d=zi(u).substring(0,r.startColumn-1);return xr._typeCommand(r,`
`+e.normalizeIndentation(d),n)}const s=_i.getEnterAction(e.autoIndent,t,r);if(s){if(s.indentAction===cs.None)return xr._typeCommand(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===cs.Indent)return xr._typeCommand(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===cs.IndentOutdent){const u=e.normalizeIndentation(s.indentation),d=e.normalizeIndentation(s.indentation+s.appendText),h=`
`+d+`
`+u;return n?new WR(r,h,!0):new l4(r,h,-1,d.length-u.length,!0)}else if(s.indentAction===cs.Outdent){const u=xr.unshiftIndent(e,s.indentation);return xr._typeCommand(r,`
`+e.normalizeIndentation(u+s.appendText),n)}}const o=t.getLineContent(r.startLineNumber),a=zi(o).substring(0,r.startColumn-1);if(e.autoIndent>=4){const u=_i.getIndentForEnter(e.autoIndent,t,r,{unshiftIndent:d=>xr.unshiftIndent(e,d),shiftIndent:d=>xr.shiftIndent(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)});if(u){let d=ur.visibleColumnFromColumn2(e,t,r.getEndPosition());const h=r.endColumn,f=t.getLineContent(r.endLineNumber),p=Ta(f);if(p>=0?r=r.setEndPosition(r.endLineNumber,Math.max(r.endColumn,p+1)):r=r.setEndPosition(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),n)return new WR(r,`
`+e.normalizeIndentation(u.afterEnter),!0);{let m=0;return h<=p+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),m=Math.min(d+1-e.normalizeIndentation(u.afterEnter).length-1,0)),new l4(r,`
`+e.normalizeIndentation(u.afterEnter),0,m,!0)}}}return xr._typeCommand(r,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let r=0,s=n.length;r<s;r++)if(!t.isCheapToTokenize(n[r].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,r){const s=_i.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),o=_i.getIndentActionForType(e.autoIndent,t,n,r,{shiftIndent:a=>xr.shiftIndent(e,a),unshiftIndent:a=>xr.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?xr._typeCommand(new Q(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+r,!1):xr._typeCommand(new Q(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+r,!1)}return null}static _isAutoClosingOvertype(e,t,n,r,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,a=n.length;o<a;o++){const u=n[o];if(!u.isEmpty())return!1;const d=u.getPosition(),h=t.getLineContent(d.lineNumber);if(h.charAt(d.column-1)!==s)return!1;const p=pw(s);if((d.column>2?h.charCodeAt(d.column-2):0)===92&&p)return!1;if(e.autoClosingOvertype==="auto"){let v=!1;for(let b=0,L=r.length;b<L;b++){const S=r[b];if(d.lineNumber===S.startLineNumber&&d.column===S.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,r,s){let o=[];for(let a=0,u=r.length;a<u;a++){const h=r[a].getPosition(),f=new Q(h.lineNumber,h.column,h.lineNumber,h.column+1);o[a]=new xo(f,s)}return new ll(4,o,{shouldPushStackElementBefore:HR(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=r.some(u=>t.startsWith(u.open)),a=s.some(u=>t.startsWith(u.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,r){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let u=!0;for(const d of n)if(t.getValueInRange(new Q(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+r!==a.open){u=!1;break}u&&(o=a)}return o}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const o of r)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s}static _getAutoClosingPairClose(e,t,n,r,s){const o=pw(r),a=o?e.autoClosingQuotes:e.autoClosingBrackets,u=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const v of n)if(!v.isEmpty())return null;const d=n.map(v=>{const b=v.getPosition();return s?{lineNumber:b.lineNumber,beforeColumn:b.column-r.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),h=this._findAutoClosingPairOpen(e,t,d.map(v=>new Le(v.lineNumber,v.beforeColumn)),r);if(!h)return null;const f=this._findContainedAutoClosingPair(e,h),p=f?f.close:"";let m=!0;for(const v of d){const{lineNumber:b,beforeColumn:L,afterColumn:S}=v,y=t.getLineContent(b),E=y.substring(0,L-1),A=y.substring(S-1);if(A.startsWith(p)||(m=!1),A.length>0){const R=A.charAt(0);if(!xr._isBeforeClosingBrace(e,A)&&!u(R))return null}if(h.open.length===1&&(r==="'"||r==='"')&&a!=="always"){const R=gc(e.wordSeparators);if(E.length>0){const Y=E.charCodeAt(E.length-1);if(R.get(Y)===0)return null}}if(!t.isCheapToTokenize(b))return null;t.forceTokenization(b);const N=t.getLineTokens(b),V=s4(N,L-1);if(!h.shouldAutoClose(V,L-V.firstCharOffset))return null;const M=h.findNeutralCharacter();if(M){const R=t.getTokenTypeIfInsertingCharacter(b,L,M);if(!h.isOK(R))return null}}return m?h.close.substring(0,h.close.length-p.length):h.close}static _runAutoClosingOpenCharType(e,t,n,r,s,o,a){let u=[];for(let d=0,h=r.length;d<h;d++){const f=r[d];u[d]=new _de(f,s,!o,a)}return new ll(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return pw(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,r){if(!xr._shouldSurroundChar(e,r)||!e.surroundingPairs.hasOwnProperty(r))return!1;const s=pw(r);for(let o=0,a=n.length;o<a;o++){const u=n[o];if(u.isEmpty())return!1;let d=!0;for(let h=u.startLineNumber;h<=u.endLineNumber;h++){const f=t.getLineContent(h),p=h===u.startLineNumber?u.startColumn-1:0,m=h===u.endLineNumber?u.endColumn-1:f.length,v=f.substring(p,m);if(/[^ \t]/.test(v)){d=!1;break}}if(d)return!1;if(s&&u.startLineNumber===u.endLineNumber&&u.startColumn+1===u.endColumn){const h=t.getValueInRange(u);if(pw(h))return!1}}return!0}static _runSurroundSelectionType(e,t,n,r,s){let o=[];for(let a=0,u=r.length;a<u;a++){const d=r[a],h=t.surroundingPairs[s];o[a]=new IAe(d,s,h)}return new ll(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,r,s){if(!t.electricChars.hasOwnProperty(s)||!r.isEmpty())return null;let o=r.getPosition();n.forceTokenization(o.lineNumber);let a=n.getLineTokens(o.lineNumber),u;try{u=_i.onElectricCharacter(s,a,o.column)}catch(d){return gn(d),null}if(!u)return null;if(u.matchOpenBracket){let d=(a.getLineContent()+s).lastIndexOf(u.matchOpenBracket)+1,h=n.bracketPairs.findMatchingBracketUp(u.matchOpenBracket,{lineNumber:o.lineNumber,column:d});if(h){if(h.startLineNumber===o.lineNumber)return null;let f=n.getLineContent(h.startLineNumber),p=zi(f),m=t.normalizeIndentation(p),v=n.getLineContent(o.lineNumber),b=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,L=v.substring(b-1,o.column-1),S=m+L+s,y=new Q(o.lineNumber,1,o.lineNumber,o.column);const E=new xo(y,S);return new ll(J9(S,e),[E],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,r,s,o){if(!r||yt.selectionsArrEqual(r,s))return null;let a=null;for(const d of s){if(!d.isEmpty())return null;const h=d.getPosition(),f=n.getValueInRange(new Q(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=f;else if(a!==f)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,s,o,a)){const d=s.map(h=>new xo(new Q(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new ll(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=this._getAutoClosingPairClose(t,n,s,a,!0);return u!==null?this._runAutoClosingOpenCharType(e,t,n,s,a,!0,u):null}static typeWithInterceptors(e,t,n,r,s,o,a){if(!e&&a===`
`){let h=[];for(let f=0,p=s.length;f<p;f++)h[f]=xr._enter(n,r,!1,s[f]);return new ll(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,r,s)){let h=[],f=!1;for(let p=0,m=s.length;p<m;p++)if(h[p]=this._runAutoIndentType(n,r,s[p],a),!h[p]){f=!0;break}if(!f)return new ll(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,r,s,o,a))return this._runAutoClosingOvertype(t,n,r,s,a);if(!e){const h=this._getAutoClosingPairClose(n,r,s,a,!1);if(h)return this._runAutoClosingOpenCharType(t,n,r,s,a,!1,h)}if(this._isSurroundSelectionType(n,r,s,a))return this._runSurroundSelectionType(t,n,r,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,r,s)){const h=this._typeInterceptorElectricChar(t,n,r,s[0],a);if(h)return h}let u=[];for(let h=0,f=s.length;h<f;h++)u[h]=new xo(s[h],a);const d=J9(a,t);return new ll(d,u,{shouldPushStackElementBefore:HR(t,d),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,r,s){let o=[];for(let u=0,d=r.length;u<d;u++)o[u]=new xo(r[u],s);const a=J9(s,e);return new ll(a,o,{shouldPushStackElementBefore:HR(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let r=[];for(let s=0,o=n.length;s<o;s++){let a=n[s].positionLineNumber;if(a===1)r[s]=new WR(new Q(1,1,1,1),`
`);else{a--;let u=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new Q(a,u,a,u))}}return r}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let r=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].positionLineNumber;let u=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new Q(a,u,a,u))}return r}static lineBreakInsert(e,t,n){let r=[];for(let s=0,o=n.length;s<o;s++)r[s]=this._enter(e,t,!0,n[s]);return r}}class _de extends l4{constructor(e,t,n,r){super(e,(n?t:"")+r,0,-r.length),this._openCharacter=t,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Q(r.startLineNumber,r.endColumn-this._closeCharacter.length,r.endLineNumber,r.endColumn),this.enclosingRange=new Q(r.startLineNumber,r.endColumn-this._openCharacter.length-this._closeCharacter.length,r.endLineNumber,r.endColumn),super.computeCursorState(e,t)}}function J9(i,e){return i===" "?e===5||e===6?6:5:4}function HR(i,e){return mee(i)&&!mee(e)?!0:i===5?!1:pee(i)!==pee(e)}function pee(i){return i===6||i===5?"space":i}function mee(i){return i===4||i===5||i===6}var de;(function(i){i.editorSimpleInput=new Dt("editorSimpleInput",!1,!0),i.editorTextFocus=new Dt("editorTextFocus",!1,C("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Dt("editorFocus",!1,C("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Dt("textInputFocus",!1,C("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Dt("editorReadonly",!1,C("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new Dt("inDiffEditor",!1,C("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new Dt("editorColumnSelection",!1,C("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Dt("editorHasSelection",!1,C("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Dt("editorHasMultipleSelections",!1,C("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Dt("editorTabMovesFocus",!1,C("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new Dt("isInEmbeddedEditor",!1,!0),i.canUndo=new Dt("canUndo",!1,!0),i.canRedo=new Dt("canRedo",!1,!0),i.hoverVisible=new Dt("editorHoverVisible",!1,C("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new Dt("inCompositeEditor",void 0,C("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Dt("editorLangId","",C("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Dt("editorHasCompletionItemProvider",!1,C("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Dt("editorHasCodeActionsProvider",!1,C("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Dt("editorHasCodeLensProvider",!1,C("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Dt("editorHasDefinitionProvider",!1,C("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Dt("editorHasDeclarationProvider",!1,C("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Dt("editorHasImplementationProvider",!1,C("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Dt("editorHasTypeDefinitionProvider",!1,C("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Dt("editorHasHoverProvider",!1,C("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Dt("editorHasDocumentHighlightProvider",!1,C("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Dt("editorHasDocumentSymbolProvider",!1,C("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Dt("editorHasReferenceProvider",!1,C("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Dt("editorHasRenameProvider",!1,C("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Dt("editorHasSignatureHelpProvider",!1,C("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Dt("editorHasInlayHintsProvider",!1,C("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Dt("editorHasDocumentFormattingProvider",!1,C("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Dt("editorHasDocumentSelectionFormattingProvider",!1,C("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Dt("editorHasMultipleDocumentFormattingProvider",!1,C("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Dt("editorHasMultipleDocumentSelectionFormattingProvider",!1,C("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(de||(de={}));const mi=0;class ps extends Po{runEditorCommand(e,t,n){const r=t._getViewModel();r&&this.runCoreEditorCommand(r,n||{})}}var c3;(function(i){const e=function(n){if(!Ga(n))return!1;const r=n;return!(!cc(r.to)||!pl(r.by)&&!cc(r.by)||!pl(r.value)&&!Sb(r.value)||!pl(r.revealCursor)&&!mue(r.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let r;switch(n.to){case i.RawDirection.Up:r=1;break;case i.RawDirection.Down:r=2;break;default:return null}let s;switch(n.by){case i.RawUnit.Line:s=1;break;case i.RawUnit.WrappedLine:s=2;break;case i.RawUnit.Page:s=3;break;case i.RawUnit.HalfPage:s=4;break;default:s=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:r,unit:s,value:o,revealCursor:a,select:!!n.select}}i.parse=t})(c3||(c3={}));var Ww;(function(i){const e=function(t){if(!Ga(t))return!1;const n=t;return!(!Sb(n.lineNumber)&&!cc(n.lineNumber)||!pl(n.at)&&!cc(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Ww||(Ww={}));class KH{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(Ti).getFocusedCodeEditor();return r&&r.hasTextFocus()?this._runEditorCommand(t,r,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const r=document.activeElement;return r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const r=t.get(Ti).getActiveCodeEditor();return r?(r.focus(),this._runEditorCommand(t,r,n)):!1})}_runEditorCommand(e,t,n){const r=this.runEditorCommand(e,t,n);return r||!0}}var Ks;(function(i){class e extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,[ro.moveTo(y,y.getPrimaryCursorState(),this._inSelectionMode,E.position,E.viewPosition)]),y.revealPrimaryCursor(E.source,!0)}}i.MoveTo=nt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=nt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends ps{runCoreEditorCommand(y,E){y.model.pushStackElement();const A=this._getColumnSelectResult(y,y.getPrimaryCursorState(),y.getCursorColumnSelectData(),E);y.setCursorStates(E.source,3,A.viewStates.map(N=>Rn.fromViewState(N))),y.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:A.fromLineNumber,fromViewVisualColumn:A.fromVisualColumn,toViewLineNumber:A.toLineNumber,toViewVisualColumn:A.toVisualColumn}),A.reversed?y.revealTopMostCursor(E.source):y.revealBottomMostCursor(E.source)}}i.ColumnSelect=nt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(S,y,E,A){const N=S.model.validatePosition(A.position),V=S.coordinatesConverter.validateViewPosition(new Le(A.viewPosition.lineNumber,A.viewPosition.column),N);let M=A.doColumnSelect?E.fromViewLineNumber:V.lineNumber,R=A.doColumnSelect?E.fromViewVisualColumn:A.mouseColumn-1;return y1.columnSelect(S.cursorConfig,S,M,R,V.lineNumber,A.mouseColumn-1)}}),i.CursorColumnSelectLeft=nt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(S,y,E,A){return y1.columnSelectLeft(S.cursorConfig,S,E)}}),i.CursorColumnSelectRight=nt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(S,y,E,A){return y1.columnSelectRight(S.cursorConfig,S,E)}});class n extends t{constructor(y){super(y),this._isPaged=y.isPaged}_getColumnSelectResult(y,E,A,N){return y1.columnSelectUp(y.cursorConfig,y,A,this._isPaged)}}i.CursorColumnSelectUp=nt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=nt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends t{constructor(y){super(y),this._isPaged=y.isPaged}_getColumnSelectResult(y,E,A,N){return y1.columnSelectDown(y.cursorConfig,y,A,this._isPaged)}}i.CursorColumnSelectDown=nt(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=nt(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends ps{constructor(){super({id:"cursorMove",precondition:void 0,description:u3.description})}runCoreEditorCommand(y,E){const A=u3.parse(E);A&&this._runCursorMove(y,E.source,A)}_runCursorMove(y,E,A){y.model.pushStackElement(),y.setCursorStates(E,3,s._move(y,y.getCursorStates(),A)),y.revealPrimaryCursor(E,!0)}static _move(y,E,A){const N=A.select,V=A.value;switch(A.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ro.simpleMove(y,E,A.direction,N,V,A.unit);case 11:case 13:case 12:case 14:return ro.viewportMove(y,E,A.direction,N,V);default:return null}}}i.CursorMoveImpl=s,i.CursorMove=nt(new s);class o extends ps{constructor(y){super(y),this._staticArgs=y.args}runCoreEditorCommand(y,E){let A=this._staticArgs;this._staticArgs.value===-1&&(A={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.cursorConfig.pageSize}),y.model.pushStackElement(),y.setCursorStates(E.source,3,ro.simpleMove(y,y.getCursorStates(),A.direction,A.select,A.value,A.unit)),y.revealPrimaryCursor(E.source,!0)}}i.CursorLeft=nt(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=nt(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1039}})),i.CursorRight=nt(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=nt(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1041}})),i.CursorUp=nt(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=nt(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=nt(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:11}})),i.CursorPageUpSelect=nt(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1035}})),i.CursorDown=nt(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=nt(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=nt(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:12}})),i.CursorPageDownSelect=nt(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1036}})),i.CreateCursor=nt(new class extends ps{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(S,y){let E;y.wholeLine?E=ro.line(S,S.getPrimaryCursorState(),!1,y.position,y.viewPosition):E=ro.moveTo(S,S.getPrimaryCursorState(),!1,y.position,y.viewPosition);const A=S.getCursorStates();if(A.length>1){const N=E.modelState?E.modelState.position:null,V=E.viewState?E.viewState.position:null;for(let M=0,R=A.length;M<R;M++){const Y=A[M];if(!(N&&!Y.modelState.selection.containsPosition(N))&&!(V&&!Y.viewState.selection.containsPosition(V))){A.splice(M,1),S.model.pushStackElement(),S.setCursorStates(y.source,3,A);return}}}A.push(E),S.model.pushStackElement(),S.setCursorStates(y.source,3,A)}}),i.LastCursorMoveToSelect=nt(new class extends ps{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(S,y){const E=S.getLastAddedCursorIndex(),A=S.getCursorStates(),N=A.slice(0);N[E]=ro.moveTo(S,A[E],!0,y.position,y.viewPosition),S.model.pushStackElement(),S.setCursorStates(y.source,3,N)}});class a extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,ro.moveToBeginningOfLine(y,y.getCursorStates(),this._inSelectionMode)),y.revealPrimaryCursor(E.source,!0)}}i.CursorHome=nt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=nt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class u extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,this._exec(y.getCursorStates())),y.revealPrimaryCursor(E.source,!0)}_exec(y){const E=[];for(let A=0,N=y.length;A<N;A++){const V=y[A],M=V.modelState.position.lineNumber;E[A]=Rn.fromModelState(V.modelState.move(this._inSelectionMode,M,1,0))}return E}}i.CursorLineStart=nt(new u({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=nt(new u({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:1311}}}));class d extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,ro.moveToEndOfLine(y,y.getCursorStates(),this._inSelectionMode,E.sticky||!1)),y.revealPrimaryCursor(E.source,!0)}}i.CursorEnd=nt(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:mi,kbExpr:de.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=nt(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:mi,kbExpr:de.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,this._exec(y,y.getCursorStates())),y.revealPrimaryCursor(E.source,!0)}_exec(y,E){const A=[];for(let N=0,V=E.length;N<V;N++){const M=E[N],R=M.modelState.position.lineNumber,Y=y.model.getLineMaxColumn(R);A[N]=Rn.fromModelState(M.modelState.move(this._inSelectionMode,R,Y,0))}return A}}i.CursorLineEnd=nt(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=nt(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,ro.moveToBeginningOfBuffer(y,y.getCursorStates(),this._inSelectionMode)),y.revealPrimaryCursor(E.source,!0)}}i.CursorTop=nt(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=nt(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3086,mac:{primary:3088}}}));class p extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,ro.moveToEndOfBuffer(y,y.getCursorStates(),this._inSelectionMode)),y.revealPrimaryCursor(E.source,!0)}}i.CursorBottom=nt(new p({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=nt(new p({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3085,mac:{primary:3090}}}));class m extends ps{constructor(){super({id:"editorScroll",precondition:void 0,description:c3.description})}runCoreEditorCommand(y,E){const A=c3.parse(E);A&&this._runEditorScroll(y,E.source,A)}_runEditorScroll(y,E,A){const N=this._computeDesiredScrollTop(y,A);if(A.revealCursor){const V=y.getCompletelyVisibleViewRangeAtScrollTop(N);y.setCursorStates(E,3,[ro.findPositionInViewportIfOutside(y,y.getPrimaryCursorState(),V,A.select)])}y.setScrollTop(N,0)}_computeDesiredScrollTop(y,E){if(E.unit===1){const V=y.getCompletelyVisibleViewRange(),M=y.coordinatesConverter.convertViewRangeToModelRange(V);let R;E.direction===1?R=Math.max(1,M.startLineNumber-E.value):R=Math.min(y.model.getLineCount(),M.startLineNumber+E.value);const Y=y.coordinatesConverter.convertModelPositionToViewPosition(new Le(R,1));return y.getVerticalOffsetForLineNumber(Y.lineNumber)}let A;E.unit===3?A=y.cursorConfig.pageSize*E.value:E.unit===4?A=Math.round(y.cursorConfig.pageSize/2)*E.value:A=E.value;const N=(E.direction===1?-1:1)*A;return y.getScrollTop()+N*y.cursorConfig.lineHeight}}i.EditorScrollImpl=m,i.EditorScroll=nt(new m),i.ScrollLineUp=nt(new class extends ps{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=nt(new class extends ps{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=nt(new class extends ps{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=nt(new class extends ps{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class v extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,[ro.word(y,y.getPrimaryCursorState(),this._inSelectionMode,E.position)]),y.revealPrimaryCursor(E.source,!0)}}i.WordSelect=nt(new v({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=nt(new v({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=nt(new class extends ps{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(S,y){const E=S.getLastAddedCursorIndex(),A=S.getCursorStates(),N=A.slice(0),V=A[E];N[E]=ro.word(S,V,V.modelState.hasSelection(),y.position),S.model.pushStackElement(),S.setCursorStates(y.source,3,N)}});class b extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,[ro.line(y,y.getPrimaryCursorState(),this._inSelectionMode,E.position,E.viewPosition)]),y.revealPrimaryCursor(E.source,!1)}}i.LineSelect=nt(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=nt(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class L extends ps{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){const A=y.getLastAddedCursorIndex(),N=y.getCursorStates(),V=N.slice(0);V[A]=ro.line(y,N[A],this._inSelectionMode,E.position,E.viewPosition),y.model.pushStackElement(),y.setCursorStates(E.source,3,V)}}i.LastCursorLineSelect=nt(new L({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=nt(new L({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=nt(new class extends ps{constructor(){super({id:"cancelSelection",precondition:de.hasNonEmptySelection,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates(y.source,3,[ro.cancelSelection(S,S.getPrimaryCursorState())]),S.revealPrimaryCursor(y.source,!0)}}),i.RemoveSecondaryCursors=nt(new class extends ps{constructor(){super({id:"removeSecondaryCursors",precondition:de.hasMultipleSelections,kbOpts:{weight:mi+1,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates(y.source,3,[S.getPrimaryCursorState()]),S.revealPrimaryCursor(y.source,!0),EF(C("removedCursor","Removed secondary cursors"))}}),i.RevealLine=nt(new class extends ps{constructor(){super({id:"revealLine",precondition:void 0,description:Ww.description})}runCoreEditorCommand(S,y){const E=y,A=E.lineNumber||0;let N=typeof A=="number"?A+1:parseInt(A)+1;N<1&&(N=1);const V=S.model.getLineCount();N>V&&(N=V);const M=new Q(N,1,N,S.model.getLineMaxColumn(N));let R=0;if(E.at)switch(E.at){case Ww.RawAtArgument.Top:R=3;break;case Ww.RawAtArgument.Center:R=1;break;case Ww.RawAtArgument.Bottom:R=4;break}const Y=S.coordinatesConverter.convertModelRangeToViewRange(M);S.revealRange(y.source,!1,Y,R,0)}}),i.SelectAll=new class extends KH{constructor(){super(Lxe)}runDOMCommand(){wl&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(S,y,E){const A=y._getViewModel();A&&this.runCoreEditorCommand(A,E)}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates("keyboard",3,[ro.selectAll(S,S.getPrimaryCursorState())])}},i.SetSelection=nt(new class extends ps{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates(y.source,3,[Rn.fromModelSelection(y.selection)])}})})(Ks||(Ks={}));const TAe=_t.and(de.textInputFocus,de.columnSelection);function zS(i,e){Oo.registerKeybindingRule({id:i,primary:e,when:TAe,weight:mi+1})}zS(Ks.CursorColumnSelectLeft.id,1039);zS(Ks.CursorColumnSelectRight.id,1041);zS(Ks.CursorColumnSelectUp.id,1040);zS(Ks.CursorColumnSelectPageUp.id,1035);zS(Ks.CursorColumnSelectDown.id,1042);zS(Ks.CursorColumnSelectPageDown.id,1036);function _ee(i){return i.register(),i}var by;(function(i){class e extends Po{runEditorCommand(n,r,s){const o=r._getViewModel();o&&this.runCoreEditingCommand(r,o,s||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=nt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:de.writable,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,xr.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),i.Outdent=nt(new class extends e{constructor(){super({id:"outdent",precondition:de.writable,kbOpts:{weight:mi,kbExpr:_t.and(de.editorTextFocus,de.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,xr.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),i.Tab=nt(new class extends e{constructor(){super({id:"tab",precondition:de.writable,kbOpts:{weight:mi,kbExpr:_t.and(de.editorTextFocus,de.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,xr.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=nt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,r){const[s,o]=Mb.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=nt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,r){const[s,o]=Mb.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends KH{constructor(){super(Pue)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},i.Redo=new class extends KH{constructor(){super(Fue)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(by||(by={}));class vee extends S8{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(Ti).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function EC(i,e){_ee(new vee("default:"+i,i)),_ee(new vee(i,i,e))}EC("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});EC("replacePreviousChar");EC("compositionType");EC("compositionStart");EC("compositionEnd");EC("paste");EC("cut");class kAe{constructor(e,t,n,r){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=r}paste(e,t,n,r){this.commandDelegate.paste(e,t,n,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,r){this.commandDelegate.compositionType(e,t,n,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Ks.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Le(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Xa&&t.get(95),r=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Ks.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Ks.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Ks.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Ks.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Ks.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Ks.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Ks.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Ks.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Ks.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Ks.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Ks.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Ks.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Ks.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class G8{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return G8.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new NAe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class NAe{constructor(e,t,n,r,s,o){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,this.range=s,this.detail=o}toString(){return xh.toString(this)}}var e6;class vde{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<n){const u=t-e+1;return this._rendLineNumberStart-=u,null}if(e>r)return null;let s=0,o=0;for(let u=n;u<=r;u++){const d=u-this._rendLineNumberStart;e<=u&&u<=t&&(o===0?(s=d,o=1):o++)}if(e<n){let u=0;t<n?u=t-e+1:u=n-e,this._rendLineNumberStart-=u}return this._lines.splice(s,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),r=this.getEndLineNumber();let s=!1;for(let o=e;o<=t;o++)o>=n&&o<=r&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,r=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let f=0;f<n;f++)o[f]=this._createLine();const a=e-this._rendLineNumberStart,u=this._lines.slice(0,a),d=this._lines.slice(a,this._lines.length-n),h=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=u.concat(o).concat(d),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let r=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const u=Math.max(t,a.fromLineNumber),d=Math.min(n,a.toLineNumber);for(let h=u;h<=d;h++){const f=h-this._rendLineNumberStart;this._lines[f].onTokensChanged(),r=!0}}return r}}class bde{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new vde(()=>this._host.createVisibleLine())}_createDomNode(){const e=ii(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new rp(this.domNode.domNode,this._host,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class rp{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,r){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let o=t;o<=n;o++)s.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,r),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),r,t),s.rendLineNumberStart>t){const o=t,a=Math.min(n,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const o=s.rendLineNumberStart+s.linesLength,a=n;o<=a&&(this._insertLinesAfter(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const o=Math.max(0,n-s.rendLineNumberStart+1),u=s.linesLength-1-o+1;u>0&&(this._removeLinesAfter(s,u),s.linesLength-=u)}return this._finishRendering(s,!1,r),s}_renderUntouchedLines(e,t,n,r,s){const o=e.rendLineNumberStart,a=e.lines;for(let u=t;u<=n;u++){const d=o+u;a[u].layoutLine(d,r[d-s])}}_insertLinesBefore(e,t,n,r,s){const o=[];let a=0;for(let u=t;u<=n;u++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const r=e.lines[n].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,r,s){const o=[];let a=0;for(let u=t;u<=n;u++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let r=0;r<t;r++){const s=e.lines[n+r].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,r){rp._ttPolicy&&(n=rp._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const u=e.lines[a];r[a]&&(u.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const r=document.createElement("div");rp._ttPolicy&&(t=rp._ttPolicy.createHTML(t)),r.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(n[s]){const a=r.firstChild,u=o.getDomNode();u.parentNode.replaceChild(a,u),o.setDomNode(a)}}}_finishRendering(e,t,n){const r=rp._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,u=[];{r.reset();let d=!1;for(let h=0;h<s;h++){const f=o[h];u[h]=!1,!(f.getDomNode()||!f.renderLine(h+a,n[h],this.viewportData,r))&&(u[h]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,r.build(),u)}{r.reset();let d=!1;const h=[];for(let f=0;f<s;f++){const p=o[f];h[f]=!1,!(u[f]||!p.renderLine(f+a,n[f],this.viewportData,r))&&(h[f]=!0,d=!0)}d&&this._finishRenderingInvalidLines(e,r.build(),h)}}}rp._ttPolicy=(e6=window.trustedTypes)===null||e6===void 0?void 0:e6.createPolicy("editorViewLayer",{createHTML:i=>i});rp._sb=kb(1e5);class Cde extends vc{constructor(e){super(e),this._visibleLines=new bde(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new AAe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,r=t.length;n<r;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class AAe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ii(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,r){let s="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const u=this._dynamicOverlays[o];s+=u.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,r.appendASCIIString('<div style="position:absolute;top:'),r.appendASCIIString(String(t)),r.appendASCIIString("px;width:100%;height:"),r.appendASCIIString(String(this._lineHeight)),r.appendASCIIString('px;">'),r.appendASCIIString(s),r.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class OAe extends Cde{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class MAe extends Cde{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Aa.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Aa.applyFontInfo(this.domNode,t.get(43));const n=t.get(130);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class kN{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class RAe extends vc{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ii(document.createElement("div")),ag.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ii(document.createElement("div")),ag.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new PAe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const r=n.domNode.domNode;r.parentNode.removeChild(r),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let PAe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=ii(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const r=this._context.configuration.options,s=r.get(130);this._fixedOverflowWidgets=r.get(36),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=r.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(130)){const n=t.get(130);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,r,s){const o=e.top,a=o,u=t.top+this._lineHeight,d=s.viewportHeight-u,h=o-r,f=a>=r,p=u,m=d>=r;let v=e.left,b=t.left;return v+n>s.scrollLeft+s.viewportWidth&&(v=s.scrollLeft+s.viewportWidth-n),b+n>s.scrollLeft+s.viewportWidth&&(b=s.scrollLeft+s.viewportWidth-n),v<s.scrollLeft&&(v=s.scrollLeft),b<s.scrollLeft&&(b=s.scrollLeft),{fitsAbove:f,aboveTop:h,aboveLeft:v,fitsBelow:m,belowTop:p,belowLeft:b}}_layoutHorizontalSegmentInPage(e,t,n,r){const s=Math.max(0,t.left-r),o=Math.min(t.left+t.width+r,e.width);let a=t.left+n-pp.scrollX;if(a+r>o){const u=a-(o-r);a-=u,n-=u}if(a<s){const u=a-s;a-=u,n-=u}return[n,a]}_layoutBoxInPage(e,t,n,r,s){const o=e.top-r,a=t.top+this._lineHeight,u=Uo(this._viewDomNode.domNode),d=u.top+o-pp.scrollY,h=u.top+a-pp.scrollY,f=d8(document.body),[p,m]=this._layoutHorizontalSegmentInPage(f,u,e.left-s.scrollLeft+this._contentLeft,n),[v,b]=this._layoutHorizontalSegmentInPage(f,u,t.left-s.scrollLeft+this._contentLeft,n),L=22,S=22,y=d>=L,E=h+r<=f.height-S;return this._fixedOverflowWidgets?{fitsAbove:y,aboveTop:Math.max(d,L),aboveLeft:m,fitsBelow:E,belowTop:h,belowLeft:b}:{fitsAbove:y,aboveTop:o,aboveLeft:p,fitsBelow:E,belowTop:a,belowLeft:v}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new kN(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],r=t[0];for(const f of t)f.lineNumber<n.lineNumber&&(n=f),f.lineNumber>r.lineNumber&&(r=f);let s=1073741824;for(const f of n.ranges)f.left<s&&(s=f.left);let o=1073741824;for(const f of r.ranges)f.left<o&&(o=f.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,u=new kN(a,s),d=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop,h=new kN(d,o);return[u,h]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let s=null;if(typeof this._actual.beforeRender=="function"&&(s=t6(this._actual.beforeRender,this._actual)),s)this._cachedDomNodeClientWidth=s.width,this._cachedDomNodeClientHeight=s.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let r;this.allowEditorOverflow?r=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):r=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e);for(let s=1;s<=2;s++)for(const o of this._preference)if(o===1){if(!r)return null;if(s===2||r.fitsAbove)return{coordinate:new kN(r.aboveTop,r.aboveLeft),position:1}}else if(o===2){if(!r)return null;if(s===2||r.fitsBelow)return{coordinate:new kN(r.belowTop,r.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&t6(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&t6(this._actual.afterRender,this._actual,this._renderData.position)}};function t6(i,e,...t){try{return i.call(e,...t)}catch{return null}}let qH=!0;class wde extends $S{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new yt(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=qH?this._selections.slice(0,1):this._selections,n=t.map(s=>s.positionLineNumber);n.sort((s,o)=>s-o),rc(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const r=t.every(s=>s.isEmpty());return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let o=0;const a=[];for(let u=n;u<=r;u++){const d=u-n;for(;o<s&&this._cursorLineNumbers[o]<u;)o++;o<s&&this._cursorLineNumbers[o]===u?a[d]=t:a[d]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class FAe extends wde{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class BAe extends wde{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}hr((i,e)=>{qH=!1;const t=i.getColor(f2e);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(oee)){const n=i.getColor(oee);n&&(qH=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),i.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class WAe extends $S{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let u=0,d=t.length;u<d;u++){const h=t[u];h.options.className&&(n[r++]=h)}n=n.sort((u,d)=>{if(u.options.zIndex<d.options.zIndex)return-1;if(u.options.zIndex>d.options.zIndex)return 1;const h=u.options.className,f=d.options.className;return h<f?-1:h>f?1:Q.compareRangesUsingStarts(u.range,d.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let u=s;u<=o;u++){const d=u-s;a[d]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const r=String(this._lineHeight),s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,u=t.length;a<u;a++){const d=t[a];if(!d.options.isWholeLine)continue;const h='<div class="cdr '+d.options.className+'" style="left:0;width:100%;height:'+r+'px;"></div>',f=Math.max(d.range.startLineNumber,s),p=Math.min(d.range.endLineNumber,o);for(let m=f;m<=p;m++){const v=m-s;n[v]+=h}}}_renderNormalDecorations(e,t,n){const r=String(this._lineHeight),s=e.visibleRange.startLineNumber;let o=null,a=!1,u=null;for(let d=0,h=t.length;d<h;d++){const f=t[d];if(f.options.isWholeLine)continue;const p=f.options.className,m=!!f.options.showIfCollapsed;let v=f.range;if(m&&v.endColumn===1&&v.endLineNumber!==v.startLineNumber&&(v=new Q(v.startLineNumber,v.startColumn,v.endLineNumber-1,this._context.model.getLineMaxColumn(v.endLineNumber-1))),o===p&&a===m&&Q.areIntersectingOrTouching(u,v)){u=Q.plusRange(u,v);continue}o!==null&&this._renderNormalDecoration(e,u,o,a,r,s,n),o=p,a=m,u=v}o!==null&&this._renderNormalDecoration(e,u,o,a,r,s,n)}_renderNormalDecoration(e,t,n,r,s,o,a){const u=e.linesVisibleRangesForRange(t,n==="findMatch");if(u)for(let d=0,h=u.length;d<h;d++){const f=u[d];if(f.outsideRenderedLine)continue;const p=f.lineNumber-o;if(r&&f.ranges.length===1){const m=f.ranges[0];if(m.width<this._typicalHalfwidthCharacterWidth){const v=Math.round(m.left+m.width/2),b=Math.max(0,Math.round(v-this._typicalHalfwidthCharacterWidth/2));f.ranges[0]=new A8(b,this._typicalHalfwidthCharacterWidth)}}for(let m=0,v=f.ranges.length;m<v;m++){const b=f.ranges[m],L='<div class="cdr '+n+'" style="left:'+String(b.left)+"px;width:"+String(b.width)+"px;height:"+s+'px;"></div>';a[p]+=L}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Wu extends Oe{onclick(e,t){this._register(Ge(e,Ht.CLICK,n=>t(new Qu(n))))}onmousedown(e,t){this._register(Ge(e,Ht.MOUSE_DOWN,n=>t(new Qu(n))))}onmouseover(e,t){this._register(Ge(e,Ht.MOUSE_OVER,n=>t(new Qu(n))))}onnonbubblingmouseout(e,t){this._register(dq(e,n=>t(new Qu(n))))}onkeydown(e,t){this._register(Ge(e,Ht.KEY_DOWN,n=>t(new yr(n))))}onkeyup(e,t){this._register(Ge(e,Ht.KEY_UP,n=>t(new yr(n))))}oninput(e,t){this._register(Ge(e,Ht.INPUT,t))}onblur(e,t){this._register(Ge(e,Ht.BLUR,t))}onfocus(e,t){this._register(Ge(e,Ht.FOCUS,t))}ignoreGesture(e){Hi.ignoreTarget(e)}}const Qy=11;class VAe extends Wu{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=Qy+"px",this.domNode.style.height=Qy+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new SC),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new oM),this._mousedownScheduleRepeatTimer=this._register(new Ma)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,WS,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class HAe extends Oe{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ma)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const $Ae=140;class yde extends Wu{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new HAe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new SC),this._shouldRender=!0,this.domNode=ii(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new VAe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,r){this.slider=ii(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,s=>{s.leftButton&&(s.preventDefault(),this._sliderMouseDown(s,()=>{}))}),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderMousePosition(e);n<=s&&s<=r?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const s=Uo(this.domNode.domNode);t=e.posx-s.left,n=e.posy-s.top}const r=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),r=this._sliderOrthogonalMousePosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,WS,o=>{const a=this._sliderOrthogonalMousePosition(o),u=Math.abs(a-r);if(Ao&&u>$Ae){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const h=this._sliderMousePosition(o)-n;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const zAe=20;class BA{constructor(e,t,n,r,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new BA(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,r,s){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),u=r>0&&r>n;if(!u)return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const d=Math.round(Math.max(zAe,Math.floor(n*a/r))),h=(a-d)/(r-n),f=s*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(d),computedSliderRatio:h,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){const e=BA._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class UAe extends yde{constructor(e,t,n){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new BA(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-Qy)/2,a=(t.horizontalScrollbarSize-Qy)/2;this._createArrow({className:"scra",icon:_e.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Vy(null,1,0))}),this._createArrow({className:"scra",icon:_e.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Vy(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class jAe extends yde{constructor(e,t,n){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new BA(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-Qy)/2,a=(t.verticalScrollbarSize-Qy)/2;this._createArrow({className:"scra",icon:_e.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Vy(null,0,1))}),this._createArrow({className:"scra",icon:_e.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Vy(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class d3{constructor(e,t,n,r,s,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,r=r|0,s=s|0,o=o|0,this.rawScrollLeft=n,this.rawScrollTop=o,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),r<0&&(r=0),o+r>s&&(o=s-r),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=r,this.scrollHeight=s,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new d3(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new d3(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,u=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:r,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:u}}}class Y8 extends Oe{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ce),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new d3(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let r;t?r=new WA(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=WA.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class bee{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function n6(i,e){const t=e-i;return function(n){return i+t*GAe(n)}}function KAe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class WA{constructor(e,t,n,r){this.from=e,this.to=t,this.duration=r,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,o;return e<t?(s=e+.75*n,o=t-.75*n):(s=e-.75*n,o=t+.75*n),KAe(n6(e,s),n6(o,t),.33)}return n6(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),r=this.scrollTop(t);return new bee(n,r,!1)}return new bee(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return WA.start(e,t,n)}static start(e,t,n){n=n+10;const r=Date.now()-10;return new WA(e,t,r,n)}}function qAe(i){return Math.pow(i,3)}function GAe(i){return 1-qAe(1-i)}const YAe=500,Cee=50;class ZAe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class GH{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,r=this._rear;do{const s=r===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[r].score*s,r===this._front)break;r=(this._capacity+r-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const r=new ZAe(e,t,n);r.score=this._computeScore(r),this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}GH.INSTANCE=new GH;class Sde extends Wu{constructor(e,t,n){super(),this._onScroll=this._register(new Ce),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Ce),e.style.overflow="hidden",this._options=XAe(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const r={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new jAe(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new UAe(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ii(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ii(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ii(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onnonbubblingmouseout(this._listenOnDomNode,s=>this._onMouseOut(s)),this._hideTimeout=this._register(new Ma),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ri(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,qn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ri(this._mouseWheelToDispose),e)){const n=r=>{this._onMouseWheel(new Vy(r))};this._mouseWheelToDispose.push(Ge(this._listenOnDomNode,Ht.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=GH.INSTANCE;{const s=window.devicePixelRatio/$le();Ao||Xa?t.accept(Date.now(),e.deltaX/s,e.deltaY/s):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(s)>=Math.abs(o)?o=0:s=0),this._options.flipAxes&&([s,o]=[o,s]);const a=!qn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const u=this._scrollable.getFutureScrollPosition();let d={};if(s){const h=Cee*s,f=u.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(d,f)}if(o){const h=Cee*o,f=u.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(d,f)}d=this._scrollable.validateScrollPosition(d),(u.scrollLeft!==d.scrollLeft||u.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let r=n;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,r=n?" left":"",s=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),YAe)}}class dG extends Sde{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new Y8(0,r=>rg(r));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class hG extends Sde{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class pM extends dG{constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function XAe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,qn&&(e.className+=" mac"),e}class QAe extends vc{constructor(e,t,n,r){super(e);const s=this._context.configuration.options,o=s.get(91),a=s.get(66),u=s.get(34),d=s.get(94),h={listenOnDomNode:n.domNode,className:"editor-scrollable "+PF(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:u,scrollPredominantAxis:d,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new hG(t.domNode,h,this._context.viewLayout.getScrollable())),ag.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=ii(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const f=(p,m,v)=>{const b={};if(m){const L=p.scrollTop;L&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+L,p.scrollTop=0)}if(v){const L=p.scrollLeft;L&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+L,p.scrollLeft=0)}this._context.model.setScrollPosition(b,1)};this._register(Ge(n.domNode,"scroll",p=>f(n.domNode,!0,!0))),this._register(Ge(t.domNode,"scroll",p=>f(t.domNode,!0,!1))),this._register(Ge(r.domNode,"scroll",p=>f(r.domNode,!0,!1))),this._register(Ge(this.scrollbarDomNode.domNode,"scroll",p=>f(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(130);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),r=t.get(66),s=t.get(34),o=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(130)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+PF(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}hr((i,e)=>{const t=i.getColor(VS);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.getColor(hy);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const r=i.getColor(fy);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${r};
			}
		`);const s=i.getColor(gy);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${s};
			}
		`)});class h3{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class fG extends $S{_render(e,t,n){const r=[];for(let a=e;a<=t;a++){const u=a-e;r[u]=[]}if(n.length===0)return r;n.sort((a,u)=>a.className===u.className?a.startLineNumber===u.startLineNumber?a.endLineNumber-u.endLineNumber:a.startLineNumber-u.startLineNumber:a.className<u.className?-1:1);let s=null,o=0;for(let a=0,u=n.length;a<u;a++){const d=n[a],h=d.className;let f=Math.max(d.startLineNumber,e)-e;const p=Math.min(d.endLineNumber,t)-e;s===h?(f=Math.max(o+1,f),o=Math.max(o,p)):(s=h,o=p);for(let m=f;m<=o;m++)r[m].push(s)}return r}}class JAe extends fG{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.options.glyphMarginClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),s=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),u='" style="left:'+o+"px;width:"+a+"px;height:"+s+'px;"></div>',d=[];for(let h=t;h<=n;h++){const f=h-t,p=r[f];p.length===0?d[f]="":d[f]='<div class="cgmr codicon '+p.join(" ")+u}this._renderResult=d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class eOe extends $S{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(131),r=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131),r=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const r=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(r)?!1:(this._primaryPosition=r,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,r,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,u=e.scrollWidth,d=this._lineHeight,h=this._primaryPosition,f=this.getGuidesByLine(o,a,h),p=[];for(let m=o;m<=a;m++){const v=m-o,b=f[v];let L="";const S=(n=(t=e.visibleRangeForPosition(new Le(m,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const y of b){const E=S+(y.visibleColumn-1)*this._spaceWidth;if(E>u||this._maxIndentLeft>0&&E>this._maxIndentLeft)break;const A=y.horizontalLine?y.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",N=y.horizontalLine?((s=(r=e.visibleRangeForPosition(new Le(m,y.horizontalLine.endColumn)))===null||r===void 0?void 0:r.left)!==null&&s!==void 0?s:E+this._spaceWidth)-E:this._spaceWidth;L+=`<div class="core-guide ${y.className} ${A}" style="left:${E}px;height:${d}px;width:${N}px"></div>`}p[v]=L}this._renderResult=p}getGuidesByLine(e,t,n){const r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Q1.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Q1.EnabledForActive:Q1.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let o=0,a=0,u=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const f=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);o=f.startLineNumber,a=f.endLineNumber,u=f.indent}const{indentSize:d}=this._context.model.getTextModelOptions(),h=[];for(let f=e;f<=t;f++){const p=new Array;h.push(p);const m=r?r[f-e]:[],v=new cy(m),b=s?s[f-e]:[];for(let L=1;L<=b;L++){const S=(L-1)*d+1,y=m.length===0&&o<=f&&f<=a&&L===u;p.push(...v.takeWhile(A=>A.visibleColumn<S)||[]);const E=v.peek();(!E||E.visibleColumn!==S||E.horizontalLine)&&p.push(new Mw(S,y?"core-guide-indent-active":"core-guide-indent",null))}p.push(...v.takeWhile(L=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function $R(i){if(!(i&&i.isTransparent()))return i}hr((i,e)=>{const t=i.getColor(U8);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=i.getColor(j8)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const r=[{bracketColor:ade,guideColor:R2e,guideColorActive:H2e},{bracketColor:lde,guideColor:P2e,guideColorActive:$2e},{bracketColor:ude,guideColor:F2e,guideColorActive:z2e},{bracketColor:cde,guideColor:B2e,guideColorActive:U2e},{bracketColor:dde,guideColor:W2e,guideColorActive:j2e},{bracketColor:hde,guideColor:V2e,guideColorActive:K2e}],s=new gde;let o=r.map(a=>{var u,d;const h=i.getColor(a.bracketColor),f=i.getColor(a.guideColor),p=i.getColor(a.guideColorActive),m=$R((u=$R(f))!==null&&u!==void 0?u:h==null?void 0:h.transparent(.3)),v=$R((d=$R(p))!==null&&d!==void 0?d:h);if(!(!m||!v))return{guideColor:m,guideColorActive:v}}).filter(HEe);if(o.length>0){for(let a=0;a<30;a++){const u=o[a%o.length];e.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${u.guideColor}; --guide-color-active: ${u.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${s.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${s.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${s.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class tOe{constructor(){this._currentVisibleRange=new Q(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class nOe{constructor(e,t,n,r,s,o){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=r,this.stopScrollTop=s,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class iOe{constructor(e,t,n,r){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=r,this.type="selections";let s=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,u=e.length;a<u;a++){const d=e[a];s=Math.min(s,d.startLineNumber),o=Math.max(o,d.endLineNumber)}this.minLineNumber=s,this.maxLineNumber=o}}class Z8 extends vc{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new bde(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,r=this._context.configuration.options,s=r.get(43),o=r.get(131);this._lineHeight=r.get(58),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=r.get(88),this._cursorSurroundingLines=r.get(25),this._cursorSurroundingLinesStyle=r.get(26),this._canUseLayerHinting=!r.get(28),this._viewLineOptions=new xJ(n,this._context.theme.type),ag.write(this.domNode,7),this.domNode.setClassName(`view-lines ${rb}`),Aa.applyFontInfo(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new er(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new er(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new tOe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Pf(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(131)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),r=t.get(131);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Aa.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(130)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new xJ(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=n;s<=r;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=!1;for(let s=t;s<=n;s++)r=this._visibleLines.getVisibleLine(s).onSelectionChanged()||r;return r}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new nOe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new iOe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const r=this._getLineNumberFor(n);if(r===-1||r<1||r>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(r)===1)return new Le(r,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(r<s||r>o)return null;let a=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(r,e,t);const u=this._context.model.getLineMinColumn(r);return a<u&&(a=u),new Le(r,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Pf.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++){const s=this._visibleLines.getVisibleLine(r);if(e===s.getDomNode())return r}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,r=Q.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;let s=[],o=0;const a=new EJ(this.domNode.domNode,this._textRangeRestingSpot);let u=0;t&&(u=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Le(r.startLineNumber,1)).lineNumber);const d=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let f=r.startLineNumber;f<=r.endLineNumber;f++){if(f<d||f>h)continue;const p=f===r.startLineNumber?r.startColumn:1,m=f===r.endLineNumber?r.endColumn:this._context.model.getLineMaxColumn(f),v=this._visibleLines.getVisibleLine(f).getVisibleRangesForRange(f,p,m,a);if(v){if(t&&f<n){const b=u;u=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Le(f+1,1)).lineNumber,b!==u&&(v.ranges[v.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new yTe(v.outsideRenderedLine,f,A8.from(v.ranges))}}return o===0?null:s}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new EJ(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new STe(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=1,s=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}r=Math.max(r,a.getWidth())}return s&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=n;s<=r;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=r;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const r=this._computeScrollLeftToReveal(n);r&&(this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:r.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Xa&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=n;s<=r;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,r,s){const o=e.top,a=e.height,u=o+a;let d,h,f;if(r&&r.length>0){let v=r[0].startLineNumber,b=r[0].endLineNumber;for(let L=1,S=r.length;L<S;L++){const y=r[L];v=Math.min(v,y.startLineNumber),b=Math.max(b,y.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(v),f=this._context.viewLayout.getVerticalOffsetForLineNumber(b)+this._lineHeight}else if(n)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),f=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const v=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=v*this._lineHeight,f+=Math.max(0,v-1)*this._lineHeight}(s===0||s===4)&&(f+=this._lineHeight);let m;if(f-h>a){if(!d)return-1;m=h}else if(s===5||s===6)if(s===6&&o<=h&&f<=u)m=o;else{const v=Math.max(5*this._lineHeight,a*.2),b=h-v,L=f-a;m=Math.max(L,b)}else if(s===1||s===2)if(s===2&&o<=h&&f<=u)m=o;else{const v=(h+f)/2;m=Math.max(0,v-a/2)}else m=this._computeMinimumScrolling(o,u,h,f,s===3,s===4);return m}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,r=n+t.width;let s=1073741824,o=0;if(e.type==="range"){const u=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!u)return null;for(const d of u.ranges)s=Math.min(s,Math.round(d.left)),o=Math.max(o,Math.round(d.left+d.width))}else for(const u of e.selections){if(u.startLineNumber!==u.endLineNumber)return null;const d=this._visibleRangesForLineRange(u.startLineNumber,u.startColumn,u.endColumn);if(!d)return null;for(const h of d.ranges)s=Math.min(s,Math.round(h.left)),o=Math.max(o,Math.round(h.left+h.width))}return s=Math.max(0,s-Z8.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,r,s,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,r,s,o){e=e|0,t=t|0,n=n|0,r=r|0,s=!!s,o=!!o;const a=t-e;if(r-n<a){if(s)return n;if(o)return Math.max(0,r-a);if(n<e)return n;if(r>t)return Math.max(0,r-a)}else return n;return e}}Z8.HORIZONTAL_EXTRA_PX=30;class rOe extends fG{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(130);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.options.linesDecorationsClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u));const d=a.options.firstLineDecorationClassName;d&&(n[r++]=new h3(a.range.startLineNumber,a.range.startLineNumber,d))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',u=[];for(let d=t;d<=n;d++){const h=d-t,f=r[h];let p="";for(let m=0,v=f.length;m<v;m++)p+='<div class="cldr '+f[m]+a;u[h]=p}this._renderResult=u}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class sOe extends fG{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],u=a.options.marginClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),s=[];for(let o=t;o<=n;o++){const a=o-t,u=r[a];let d="";for(let h=0,f=u.length;h<f;h++)d+='<div class="cmdr '+u[h]+'" style=""></div>';s[a]=d}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class ec{constructor(e,t,n,r){this._rgba8Brand=void 0,this.r=ec._clamp(e),this.g=ec._clamp(t),this.b=ec._clamp(n),this.a=ec._clamp(r)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}ec.Empty=new ec(0,0,0,0);class mM extends Oe{constructor(){super(),this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Wr.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new mM),this._INSTANCE}_updateColorMap(){const e=Wr.getColorMap();if(!e){this._colors=[ec.Empty],this._backgroundIsLight=!0;return}this._colors=[ec.Empty];for(let n=1;n<e.length;n++){const r=e[n].rgba;this._colors[n]=new ec(r.r,r.g,r.b,Math.round(r.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}mM._INSTANCE=null;class wee{constructor(e,t,n,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=r|0}}class oOe{constructor(e,t){this.tabSize=e,this.data=t}}class gG{constructor(e,t,n,r,s,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=r,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=a}}class Pu{constructor(e,t,n,r,s,o,a,u,d,h){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=r,this.isBasicASCII=Pu.isBasicASCII(n,o),this.containsRTL=Pu.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=u,this.tabSize=d,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?wq(e):!0}static containsRTL(e,t,n){return!t&&n?p8(e):!1}}class R2{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class aOe{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new R2(new Q(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Lde{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class Ede{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}const lOe=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),uOe=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class VA{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=VA.soften(e,12/15),this.charDataLight=VA.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let r=0,s=e.length;r<s;r++)n[r]=zF(e[r]*t);return n}renderChar(e,t,n,r,s,o,a,u,d,h,f){const p=1*this.scale,m=2*this.scale,v=f?1:m;if(t+p>e.width||n+v>e.height){console.warn("bad render request outside image data");return}const b=h?this.charDataLight:this.charDataNormal,L=uOe(r,d),S=e.width*4,y=a.r,E=a.g,A=a.b,N=s.r-y,V=s.g-E,M=s.b-A,R=Math.max(o,u),Y=e.data;let X=L*p*m,$=n*S+t*4;for(let T=0;T<v;T++){let O=$;for(let B=0;B<p;B++){const W=b[X++]/255*(o/255);Y[O++]=y+N*W,Y[O++]=E+V*W,Y[O++]=A+M*W,Y[O++]=R}$+=S}}blockRenderChar(e,t,n,r,s,o,a,u){const d=1*this.scale,h=2*this.scale,f=u?1:h;if(t+d>e.width||n+f>e.height){console.warn("bad render request outside image data");return}const p=e.width*4,m=.5*(s/255),v=o.r,b=o.g,L=o.b,S=r.r-v,y=r.g-b,E=r.b-L,A=v+S*m,N=b+y*m,V=L+E*m,M=Math.max(s,a),R=e.data;let Y=n*p+t*4;for(let X=0;X<f;X++){let $=Y;for(let T=0;T<d;T++)R[$++]=A,R[$++]=N,R[$++]=V,R[$++]=M;Y+=p}}}const yee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},See=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=yee[i[t]]<<4|yee[i[t+1]]&15;return e},Lee={1:kp(()=>See("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:kp(()=>See("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class P2{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return Lee[e]?n=new VA(Lee[e](),e):n=P2.createFromSampleData(P2.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let r=0;for(const s of lOe)n.fillText(String.fromCharCode(s),r,16/2),r+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let r=P2._downsample(e,t);return new VA(r,t)}static _downsampleChar(e,t,n,r,s){const o=1*s,a=2*s;let u=r,d=0;for(let h=0;h<a;h++){const f=h/a*16,p=(h+1)/a*16;for(let m=0;m<o;m++){const v=m/o*10,b=(m+1)/o*10;let L=0,S=0;for(let E=f;E<p;E++){const A=t+Math.floor(E)*3840,N=1-(E-Math.floor(E));for(let V=v;V<b;V++){const M=1-(V-Math.floor(V)),R=A+Math.floor(V)*4,Y=M*N;S+=Y,L+=e[R]*e[R+3]/255*Y}}const y=L/S;d=Math.max(d,y),n[u++]=zF(y)}}return d}static _downsample(e,t){const n=2*t*1*t,r=n*96,s=new Uint8ClampedArray(r);let o=0,a=0,u=0;for(let d=0;d<96;d++)u=Math.max(u,this._downsampleChar(e,a,s,o,t)),o+=n,a+=10*4;if(u>0){const d=255/u;for(let h=0;h<r;h++)s[h]*=d}return s}}const cOe=140,dOe=2;class HA{constructor(e,t,n){const r=e.options,s=r.get(128),o=r.get(130),a=o.minimap,u=r.get(43),d=r.get(64);this.renderMinimap=a.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=r.get(93),this.showSlider=d.showSlider,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=u.typicalHalfwidthCharacterWidth,this.lineHeight=r.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=kp(()=>P2.create(this.fontScale,u.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=HA._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=HA._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(rTe);return n?new ec(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(sTe);return t?ec._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class F2{constructor(e,t,n,r,s,o,a,u){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=s,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=u}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,r,s,o,a,u,d,h,f){const p=e.pixelRatio,m=e.minimapLineHeight,v=Math.floor(e.canvasInnerHeight/m),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){const N=u*e.lineHeight+(e.scrollBeyondLastLine?s-e.lineHeight:0),V=Math.max(1,Math.floor(s*s/N)),M=Math.max(0,e.minimapHeight-V),R=M/(h-s),Y=d*R,X=M>0,$=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new F2(d,h,X,R,Y,V,1,Math.min(a,$))}let L;if(o&&n!==a){const N=n-t+1;L=Math.floor(N*m/p)}else{const N=s/b;L=Math.floor(N*m/p)}let S;e.scrollBeyondLastLine?S=(a-1)*m/p:S=Math.max(0,a*m/p-L),S=Math.min(e.minimapHeight-L,S);const y=S/(h-s),E=d*y;let A=0;if(e.scrollBeyondLastLine&&(A=s/b-1),v>=a+A){const V=a,M=S>0;return new F2(d,h,M,y,E,L,1,V)}else{let N=Math.max(1,Math.floor(t-E*p/m));f&&f.scrollHeight===h&&(f.scrollTop>d&&(N=Math.min(N,f.startLineNumber)),f.scrollTop<d&&(N=Math.max(N,f.startLineNumber)));const V=Math.min(a,N+v-1),M=(d-r)/b,R=(t-N+M)*m/p;return new F2(d,h,!0,y,R,L,N,V)}}}class f3{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}f3.INVALID=new f3(-1);class Eee{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new vde(()=>f3.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let r=0,s=n.length;r<s;r++)if(n[r].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class pG{constructor(e,t,n,r){this._backgroundFillData=pG._createBackgroundFillData(t,n,r),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const r=n.r,s=n.g,o=n.b,a=n.a,u=new Uint8ClampedArray(e*t*4);let d=0;for(let h=0;h<t;h++)for(let f=0;f<e;f++)u[d]=r,u[d+1]=s,u[d+2]=o,u[d+3]=a,d+=4;return u}}class $A{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const r=e.pixelRatio,s=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=dy.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:s,pixelRatio:r}),u=t/a,d=u/2;if(!n||n.minimapLines.length===0){let E=[];if(E[0]=1,a>1){for(let A=0,N=a-1;A<N;A++)E[A]=Math.round(A*u+d);E[a-1]=t}return[new $A(u,E),[]]}const h=n.minimapLines,f=h.length;let p=[],m=0,v=0,b=1;const L=10;let S=[],y=null;for(let E=0;E<a;E++){const A=Math.max(b,Math.round(E*u)),N=Math.max(A,Math.round((E+1)*u));for(;m<f&&h[m]<A;){if(S.length<L){const M=m+1+v;y&&y.type==="deleted"&&y._oldIndex===m-1?y.deleteToLineNumber++:(y={type:"deleted",_oldIndex:m,deleteFromLineNumber:M,deleteToLineNumber:M},S.push(y)),v--}m++}let V;if(m<f&&h[m]<=N)V=h[m],m++;else if(E===0?V=1:E+1===a?V=t:V=Math.round(E*u+d),S.length<L){const M=m+1+v;y&&y.type==="inserted"&&y._i===E-1?y.insertToLineNumber++:(y={type:"inserted",_i:E,insertFromLineNumber:M,insertToLineNumber:M},S.push(y)),v++}p[E]=V,b=V}if(S.length<L)for(;m<f;){const E=m+1+v;y&&y.type==="deleted"&&y._oldIndex===m-1?y.deleteToLineNumber++:(y={type:"deleted",_oldIndex:m,deleteFromLineNumber:E,deleteToLineNumber:E},S.push(y)),v--,m++}else S=[{type:"flush"}];return[new $A(u,p),S]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(n===r){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===n&&(r===this.minimapLines.length?n>1&&n--:r++),[n,r]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,r=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),r=Math.max(r,s)):this.minimapLines[s]-=t;return[n,r]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class hOe extends vc{constructor(e){super(e),this.tokensColorTracker=mM.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new HA(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=$A.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new g3(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new HA(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const r=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);r&&t.push({fromLineNumber:r[0],toLineNumber:r[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=$A.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const r of n)switch(r.type){case"deleted":this._actual.onLinesDeleted(r.deleteFromLineNumber,r.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(r.insertFromLineNumber,r.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let r=[];for(let s=0,o=t-e+1;s<o;s++)n[s]?r[s]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+s-1]):r[s]=null;return r}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new yt(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new Q(s,1,o,this._context.model.getLineMaxColumn(o))}else n=new Q(e,1,t,this._context.model.getLineMaxColumn(t));const r=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let s=[];for(const o of r){if(!o.options.minimap)continue;const a=o.range,u=this._samplingState.modelLineToMinimapLine(a.startLineNumber),d=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new Lde(new Q(u,a.startColumn,d,a.endColumn),o.options))}return s}return r}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new Q(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class g3 extends Oe{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(vJ),this._domNode=ii(document.createElement("div")),ag.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ii(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ii(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ii(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ii(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ii(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=eo(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const d=Uo(this._slider.domNode),h=d.top+d.height/2;this._startSliderDragging(n.buttons,n.posx,h,n.posy,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let u=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber;u=Math.min(u,this._model.getLineCount()),this._model.revealLineNumber(u)}),this._sliderMouseMoveMonitor=new SC,this._sliderMouseDownListener=eo(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Hi.addTarget(this._domNode.domNode),this._sliderTouchStartListener=Ge(this._domNode.domNode,lr.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=Ge(this._domNode.domNode,lr.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=eo(this._domNode.domNode,lr.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,r,s){this._slider.toggleClassName("active",!0);const o=(a,u)=>{const d=Math.abs(u-t);if(Ao&&d>cOe){this._model.setScrollTop(s.scrollTop);return}const h=a-n;this._model.setScrollTop(s.getDesiredScrollTopFromDelta(h))};r!==n&&o(r,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,WS,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new pG(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(vJ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=F2.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(Q.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((p,m)=>(p.options.zIndex||0)-(m.options.zIndex||0));const{canvasInnerWidth:r,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,u=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,r,s);const h=new xee(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,h,e,o),this._renderDecorationsLineHighlights(d,n,h,e,o);const f=new xee(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,f,e,o,u,a,r),this._renderDecorationsHighlights(d,n,f,e,o,u,a,r)}}_renderSelectionLineHighlights(e,t,n,r,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const u of t){const d=Math.max(r.startLineNumber,u.startLineNumber),h=Math.min(r.endLineNumber,u.endLineNumber);if(d>h)continue;for(let m=d;m<=h;m++)n.set(m,!0);const f=(d-r.startLineNumber)*s,p=(h-r.startLineNumber)*s+s;a>=f||(a>o&&e.fillRect(yv,o,e.canvas.width,a-o),o=f),a=p}a>o&&e.fillRect(yv,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,r,s){const o=new Map;for(let a=t.length-1;a>=0;a--){const u=t[a],d=u.options.minimap;if(!d||d.position!==bl.Inline)continue;const h=Math.max(r.startLineNumber,u.range.startLineNumber),f=Math.min(r.endLineNumber,u.range.endLineNumber);if(h>f)continue;const p=d.getColor(this._theme);if(!p||p.isTransparent())continue;let m=o.get(p.toString());m||(m=p.transparent(.5).toString(),o.set(p.toString(),m)),e.fillStyle=m;for(let v=h;v<=f;v++){if(n.has(v))continue;n.set(v,!0);const b=(h-r.startLineNumber)*s;e.fillRect(yv,b,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,r,s,o,a,u){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const d of t){const h=Math.max(r.startLineNumber,d.startLineNumber),f=Math.min(r.endLineNumber,d.endLineNumber);if(!(h>f))for(let p=h;p<=f;p++)this.renderDecorationOnLine(e,n,d,this._selectionColor,r,p,s,s,o,a,u)}}_renderDecorationsHighlights(e,t,n,r,s,o,a,u){for(const d of t){const h=d.options.minimap;if(!h)continue;const f=Math.max(r.startLineNumber,d.range.startLineNumber),p=Math.min(r.endLineNumber,d.range.endLineNumber);if(f>p)continue;const m=h.getColor(this._theme);if(!(!m||m.isTransparent()))for(let v=f;v<=p;v++)switch(h.position){case bl.Inline:this.renderDecorationOnLine(e,n,d.range,m,r,v,s,s,o,a,u);continue;case bl.Gutter:const b=(v-r.startLineNumber)*s,L=2;this.renderDecoration(e,m,L,b,dOe,s);continue}}}renderDecorationOnLine(e,t,n,r,s,o,a,u,d,h,f){const p=(o-s.startLineNumber)*u;if(p+a<0||p>this._model.options.canvasInnerHeight)return;const{startLineNumber:m,endLineNumber:v}=n,b=m===o?n.startColumn:1,L=v===o?n.endColumn:this._model.getLineMaxColumn(o),S=this.getXOffsetForPosition(t,o,b,d,h,f),y=this.getXOffsetForPosition(t,o,L,d,h,f);this.renderDecoration(e,r,S,p,y-S,a)}getXOffsetForPosition(e,t,n,r,s,o){if(n===1)return yv;if((n-1)*s>=o)return o;let u=e.get(t);if(!u){const d=this._model.getLineContent(t);u=[yv];let h=yv;for(let f=1;f<d.length+1;f++){const p=d.charCodeAt(f-1),m=p===9?r*s:og(p)?2*s:s,v=h+m;if(v>=o){u[f]=o;break}u[f]=v,h=v}e.set(t,u)}return n-1<u.length?u[n-1]:o}renderDecoration(e,t,n,r,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,r,s,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const W=this._lastRenderData._get();return new Eee(e,W.imageData,W.lines)}const s=this._getBuffer();if(!s)return null;let[o,a,u]=g3._renderUntouchedLines(s,t,n,r,this._lastRenderData);const d=this._model.getMinimapLinesRenderingData(t,n,u),h=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,p=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,v=this._model.tokensColorTracker,b=v.backgroundIsLight(),L=this._model.options.renderMinimap,S=this._model.options.charRenderer(),y=this._model.options.fontScale,E=this._model.options.minimapCharWidth,N=(L===1?2:2+1)*y,V=r>N?Math.floor((r-N)/2):0,M=p.a/255,R=new ec(Math.round((p.r-f.r)*M+f.r),Math.round((p.g-f.g)*M+f.g),Math.round((p.b-f.b)*M+f.b),255);let Y=0;const X=[];for(let W=0,j=n-t+1;W<j;W++)u[W]&&g3._renderLine(s,R,p.a,b,L,E,v,m,S,Y,V,h,d[W],y,r),X[W]=new f3(Y),Y+=r;const $=o===-1?0:o,O=(a===-1?s.height:a)-$;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,$,s.width,O),new Eee(e,s,X)}static _renderUntouchedLines(e,t,n,r,s){const o=[];if(!s){for(let R=0,Y=n-t+1;R<Y;R++)o[R]=!0;return[-1,-1,o]}const a=s._get(),u=a.imageData.data,d=a.rendLineNumberStart,h=a.lines,f=h.length,p=e.width,m=e.data,v=(n-t+1)*r*p*4;let b=-1,L=-1,S=-1,y=-1,E=-1,A=-1,N=0;for(let R=t;R<=n;R++){const Y=R-t,X=R-d,$=X>=0&&X<f?h[X].dy:-1;if($===-1){o[Y]=!0,N+=r;continue}const T=$*p*4,O=($+r)*p*4,B=N*p*4,W=(N+r)*p*4;y===T&&A===B?(y=O,A=W):(S!==-1&&(m.set(u.subarray(S,y),E),b===-1&&S===0&&S===E&&(b=y),L===-1&&y===v&&S===E&&(L=S)),S=T,y=O,E=B,A=W),o[Y]=!1,N+=r}S!==-1&&(m.set(u.subarray(S,y),E),b===-1&&S===0&&S===E&&(b=y),L===-1&&y===v&&S===E&&(L=S));const V=b===-1?-1:b/(p*4),M=L===-1?-1:L/(p*4);return[V,M,o]}static _renderLine(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b){const L=m.content,S=m.tokens,y=e.width-o,E=b===1;let A=yv,N=0,V=0;for(let M=0,R=S.getCount();M<R;M++){const Y=S.getEndOffset(M),X=S.getForeground(M),$=a.getColor(X);for(;N<Y;N++){if(A>y)return;const T=L.charCodeAt(N);if(T===9){const O=p-(N+V)%p;V+=O-1,A+=O*o}else if(T===32)A+=o;else{const O=og(T)?2:1;for(let B=0;B<O;B++)if(s===2?d.blockRenderChar(e,A,h+f,$,u,t,n,E):d.renderChar(e,A,h+f,T,$,u,t,n,v,r,E),A+=o,A>y)return}}}}}class xee{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let r=0,s=this._endLineNumber-this._startLineNumber+1;r<s;r++)this._values[r]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}hr((i,e)=>{const t=i.getColor(aTe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=i.getColor(lTe);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const r=i.getColor(uTe);r&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${r}; }`);const s=i.getColor(VS);s&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${s} -6px 0 6px -6px inset; }`)});class fOe extends vc{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=ii(document.createElement("div")),ag.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=ii(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.parentNode.removeChild(r),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,r=t.length;n<r;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}class gOe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(128),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const r=t.getColor(y2e);this.borderColor=r?r.toString():null,this.hideCursor=n.get(51);const s=t.getColor(rde);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(64),a=o.enabled,u=o.side,d=a?t.getColor(S2e)||Wr.getDefaultBackground():null;d===null||u==="left"?this.backgroundColor=null:this.backgroundColor=ye.Format.CSS.formatHex(d);const f=n.get(130).overviewRuler;this.top=f.top,this.right=f.right,this.domWidth=f.width,this.domHeight=f.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,m]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=m}_initLanes(e,t,n){const r=t-e;if(n>=3){const s=Math.floor(r/3),o=Math.floor(r/3),a=r-s-o,u=e,d=u+s,h=u+s+a;return[[0,u,d,u,h,u,d,u],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(n===2){const s=Math.floor(r/2),o=r-s,a=e,u=a+s;return[[0,a,a,a,u,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=r;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class pOe extends vc{constructor(e){super(e),this._domNode=ii(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Wr.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new gOe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Le.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,r=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),o=t/s,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),u=6*this._settings.pixelRatio|0,d=u/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const f=this._settings.x,p=this._settings.w;a.sort(Ede.cmp);for(const m of a){const v=m.color,b=m.data;h.fillStyle=v;let L=0,S=0,y=0;for(let E=0,A=b.length/3;E<A;E++){const N=b[3*E],V=b[3*E+1],M=b[3*E+2];let R=r.getVerticalOffsetForLineNumber(V)*o|0,Y=(r.getVerticalOffsetForLineNumber(M)+n)*o|0;if(Y-R<u){let $=(R+Y)/2|0;$<d?$=d:$+d>t&&($=t-d),R=$-d,Y=$+d}R>y+1||N!==L?(E!==0&&h.fillRect(f[L],S,p[L],y-S),L=N,S=R,y=Y):Y>y&&(y=Y)}h.fillRect(f[L],S,p[L],y-S)}if(!this._settings.hideCursor&&this._settings.cursorColor){const m=2*this._settings.pixelRatio|0,v=m/2|0,b=this._settings.x[7],L=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let S=-100,y=-100;for(let E=0,A=this._cursorPositions.length;E<A;E++){const N=this._cursorPositions[E];let V=r.getVerticalOffsetForLineNumber(N.lineNumber)*o|0;V<v?V=v:V+v>t&&(V=t-v);const M=V-v,R=M+m;M>y+1?(E!==0&&h.fillRect(b,S,L,y-S),S=M,y=R):R>y&&(y=R)}h.fillRect(b,S,L,y-S)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class Dee{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class zA{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class mOe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(zA.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),r=Math.floor(this._outerHeight),s=n/r,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let u=0,d=this._zones.length;u<d;u++){const h=this._zones[u];if(!e){const y=h.getColorZones();if(y){a.push(y);continue}}const f=Math.floor(s*this._getVerticalOffsetForLine(h.startLineNumber)),p=Math.floor(s*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let m=Math.floor((f+p)/2),v=p-m;v<o&&(v=o),m-v<0&&(m=v),m+v>n&&(m=n-v);const b=h.color;let L=this._color2Id[b];L||(L=++this._lastAssignedId,this._color2Id[b]=L,this._id2Color[L]=b);const S=new Dee(m-v,m+v,L);h.setColorZone(S),a.push(S)}return this._colorZonesInvalid=!1,a.sort(Dee.compare),a}}class _Oe extends cM{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=ii(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new mOe(r=>this._context.viewLayout.getVerticalOffsetForLineNumber(r)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(128)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(128)&&(this._zoneManager.setPixelRatio(t.get(128)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,r,e),!0}_renderOneLane(e,t,n,r){let s=0,o=0,a=0;for(const u of t){const d=u.colorId,h=u.from,f=u.to;d!==s?(e.fillRect(0,o,r,a-o),s=d,e.fillStyle=n[s],o=h,a=f):a>=h?a=Math.max(a,f):(e.fillRect(0,o,r,a-o),o=h,a=f)}e.fillRect(0,o,r,a-o)}}class vOe extends vc{constructor(e){super(e),this.domNode=ii(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:r}=this._context.model.getTextModelOptions(),s=r;let o=t-e;for(;o>0;){const a=ii(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const r=this._renderedRulers.pop();this.domNode.removeChild(r),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const r=this._renderedRulers[t],s=this._rulers[t];r.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),r.setHeight(Math.min(e.scrollHeight,1e6)),r.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}hr((i,e)=>{const t=i.getColor(C2e);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class bOe extends vc{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=ii(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(130);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}hr((i,e)=>{const t=i.getColor(VS);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class COe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class wOe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function yOe(i){return new COe(i)}function SOe(i){return new wOe(i.lineNumber,i.ranges.map(yOe))}class $r extends $S{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const r=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let d=0;!s&&d<n.length;d++)n[d].lineNumber===a&&(s=n[d].ranges[0]);const u=t[t.length-1].lineNumber;if(u===e.endLineNumber)for(let d=n.length-1;!o&&d>=0;d--)n[d].lineNumber===u&&(o=n[d].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,u=t.length;a<u;a++){const d=t[a].ranges[0],h=d.left,f=d.left+d.width,p={top:0,bottom:0},m={top:0,bottom:0};if(a>0){const v=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;zR(h-v)<r?p.top=2:h>v&&(p.top=1),zR(f-b)<r?m.top=2:v<f&&f<b&&(m.top=1)}else s&&(p.top=s.startStyle.top,m.top=s.endStyle.top);if(a+1<u){const v=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;zR(h-v)<r?p.bottom=2:v<h&&h<b&&(p.bottom=1),zR(f-b)<r?m.bottom=2:f<b&&(m.bottom=1)}else o&&(p.bottom=o.startStyle.bottom,m.bottom=o.endStyle.bottom);d.startStyle=p,d.endStyle=m}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(SOe);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,r,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+r.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,r){if(r.length===0)return;const s=!!r[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),u=r[0].lineNumber,d=r[r.length-1].lineNumber;for(let h=0,f=r.length;h<f;h++){const p=r[h],m=p.lineNumber,v=m-t,b=n&&(m===d||m===u)?a:o,L=n&&m===u?1:0;let S="",y="";for(let E=0,A=p.ranges.length;E<A;E++){const N=p.ranges[E];if(s){const M=N.startStyle,R=N.endStyle;if(M.top===1||M.bottom===1){S+=this._createSelectionPiece(L,b,$r.SELECTION_CLASS_NAME,N.left-$r.ROUNDED_PIECE_WIDTH,$r.ROUNDED_PIECE_WIDTH);let Y=$r.EDITOR_BACKGROUND_CLASS_NAME;M.top===1&&(Y+=" "+$r.SELECTION_TOP_RIGHT),M.bottom===1&&(Y+=" "+$r.SELECTION_BOTTOM_RIGHT),S+=this._createSelectionPiece(L,b,Y,N.left-$r.ROUNDED_PIECE_WIDTH,$r.ROUNDED_PIECE_WIDTH)}if(R.top===1||R.bottom===1){S+=this._createSelectionPiece(L,b,$r.SELECTION_CLASS_NAME,N.left+N.width,$r.ROUNDED_PIECE_WIDTH);let Y=$r.EDITOR_BACKGROUND_CLASS_NAME;R.top===1&&(Y+=" "+$r.SELECTION_TOP_LEFT),R.bottom===1&&(Y+=" "+$r.SELECTION_BOTTOM_LEFT),S+=this._createSelectionPiece(L,b,Y,N.left+N.width,$r.ROUNDED_PIECE_WIDTH)}}let V=$r.SELECTION_CLASS_NAME;if(s){const M=N.startStyle,R=N.endStyle;M.top===0&&(V+=" "+$r.SELECTION_TOP_LEFT),M.bottom===0&&(V+=" "+$r.SELECTION_BOTTOM_LEFT),R.top===0&&(V+=" "+$r.SELECTION_TOP_RIGHT),R.bottom===0&&(V+=" "+$r.SELECTION_BOTTOM_RIGHT)}y+=this._createSelectionPiece(L,b,V,N.left,N.width)}e[v][0]+=S,e[v][1]+=y}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=n;o<=r;o++){const a=o-n;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const u=this._selections[o];if(u.isEmpty()){s[o]=null;continue}const d=this._getVisibleRangesWithStyle(u,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=d,this._actualRenderOneSelection(t,n,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}$r.SELECTION_CLASS_NAME="selected-text";$r.SELECTION_TOP_LEFT="top-left-radius";$r.SELECTION_BOTTOM_LEFT="bottom-left-radius";$r.SELECTION_TOP_RIGHT="top-right-radius";$r.SELECTION_BOTTOM_RIGHT="bottom-right-radius";$r.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";$r.ROUNDED_PIECE_WIDTH=10;hr((i,e)=>{const t=i.getColor(s0);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=i.getColor(Pq);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const r=i.getColor(uIe);r&&!r.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${r}; }`)});function zR(i){return i<0?-i:i}class Iee{constructor(e,t,n,r,s,o){this.top=e,this.left=t,this.width=n,this.height=r,this.textContent=s,this.textContentClassName=o}}class Tee{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ii(document.createElement("div")),this._domNode.setClassName(`cursor ${rb}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Aa.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new Le(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Aa.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===ao.Line||this._cursorStyle===ao.LineThin){const p=e.visibleRangeForPosition(this._position);if(!p||p.outsideRenderedLine)return null;let m;if(this._cursorStyle===ao.Line){if(m=rJ(this._lineCursorWidth>0?this._lineCursorWidth:2),m>2){const L=this._context.model.getLineContent(this._position.lineNumber),S=NF(L,this._position.column-1);t=L.substr(this._position.column-1,S)}}else m=rJ(1);let v=p.left;m>=2&&v>=1&&(v-=1);const b=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new Iee(b,v,m,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),r=NF(n,this._position.column-1),s=e.linesVisibleRangesForRange(new Q(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+r),!1);if(!s||s.length===0)return null;const o=s[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],u=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let d="";if(this._cursorStyle===ao.Block){const p=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,r);const m=p.tokens.findTokenIndexAtOffset(this._position.column-1);d=p.tokens.getClassName(m)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,f=this._lineHeight;return(this._cursorStyle===ao.Underline||this._cursorStyle===ao.UnderlineThin)&&(h+=this._lineHeight-2,f=2),new Iee(h,a.left,u,f,t,d)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${rb} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class UA extends vc{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Tee(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=ii(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Ma,this._cursorFlatBlinkInterval=new oM,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,r=this._secondaryCursors.length;n<r;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let r=0;r<n;r++){const s=new Tee(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let r=0;r<n;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let r=0,s=e.selections.length;r<s;r++)t[r]=e.selections[r].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let r=0,s=e.ranges.length;r<s;r++)if(e.ranges[r].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[r].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},UA.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},UA.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ao.Line:e+=" cursor-line-style";break;case ao.Block:e+=" cursor-block-style";break;case ao.Underline:e+=" cursor-underline-style";break;case ao.LineThin:e+=" cursor-line-thin-style";break;case ao.BlockOutline:e+=" cursor-block-outline-style";break;case ao.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const r=this._primaryCursor.render(e);r&&(t[n++]=r);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}UA.BLINK_INTERVAL=500;hr((i,e)=>{const t=i.getColor(rde);if(t){let n=i.getColor(v2e);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),i.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const i6=()=>{throw new Error("Invalid change accessor")};class LOe extends vc{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=ii(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ii(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const r of e)t.set(r.id,r);let n=!1;return this._context.model.changeWhitespace(r=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const u=s[o],d=this._zones[u],h=this._computeWhitespaceProps(d.delegate);d.isInHiddenArea=h.isInHiddenArea;const f=t.get(u);f&&(f.afterLineNumber!==h.afterViewLineNumber||f.height!==h.heightInPx)&&(r.changeOneWhitespace(u,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(d.delegate,h.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Le(o,this._context.model.getModelLineMaxColumn(o))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),s=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:r.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const r={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};EOe(e,r),r.addZone=i6,r.removeZone=i6,r.layoutZone=i6}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:ii(t.domNode),marginDomNode:t.marginDomNode?ii(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],r=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(n.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){gn(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){gn(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let r=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,r=!0);const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const u=s[o],d=this._zones[u];let h=0,f=0,p="none";n.hasOwnProperty(u)?(h=n[u].verticalOffset-e.bigNumbersDelta,f=n[u].height,p="block",d.isVisible||(d.domNode.setAttribute("monaco-visible-view-zone","true"),d.isVisible=!0),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(n[u].verticalOffset))):(d.isVisible&&(d.domNode.removeAttribute("monaco-visible-view-zone"),d.isVisible=!1),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),d.domNode.setTop(h),d.domNode.setHeight(f),d.domNode.setDisplay(p),d.marginDomNode&&(d.marginDomNode.setTop(h),d.marginDomNode.setHeight(f),d.marginDomNode.setDisplay(p))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function EOe(i,e){try{return i(e)}catch(t){gn(t)}}class xOe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class DOe{constructor(e,t,n){this.configuration=e,this.theme=new xOe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class IOe{constructor(e,t,n,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=r,this.visibleRange=new Q(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class TOe extends cM{constructor(e,t,n,r,s,o){super(),this._selections=[new yt(1,1,1,1)],this._renderAnimationFrame=null;const a=new kAe(t,r,s,e);this._context=new DOe(t,n.getColorTheme(),r),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(b=>{this._context.theme.update(b),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new SAe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ii(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ii(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ii(document.createElement("div")),ag.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new QAe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Z8(this._context,this._linesContent),this._viewZones=new LOe(this._context),this._viewParts.push(this._viewZones);const u=new pOe(this._context);this._viewParts.push(u);const d=new bOe(this._context);this._viewParts.push(d);const h=new OAe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new FAe(this._context)),h.addDynamicOverlay(new $r(this._context)),h.addDynamicOverlay(new eOe(this._context)),h.addDynamicOverlay(new WAe(this._context));const f=new MAe(this._context);this._viewParts.push(f),f.addDynamicOverlay(new BAe(this._context)),f.addDynamicOverlay(new JAe(this._context)),f.addDynamicOverlay(new sOe(this._context)),f.addDynamicOverlay(new rOe(this._context)),f.addDynamicOverlay(new Xy(this._context));const p=new Ob(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(f.getDomNode()),this._viewParts.push(p),this._contentWidgets=new RAe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new UA(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new fOe(this._context),this._viewParts.push(this._overlayWidgets);const m=new vOe(this._context);this._viewParts.push(m);const v=new hOe(this._context);if(this._viewParts.push(v),u){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(u.getDomNode(),b.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(m.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(v.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new yAe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new uAe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Le(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Le(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(130);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+PF(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=oue(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){kOe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!uq(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new IOe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const r=new wTe(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(r);for(const s of e)s.render(r),s.onDidRender();Math.abs(vA()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new Le(r.lineNumber,r.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?G8.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new _Oe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const r=e.position?e.position.position:null;r!==null&&(t=new Q(r.lineNumber,r.column,r.lineNumber,r.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function kOe(i){try{return i()}catch(e){gn(e)}}class p3{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new so(new Q(1,1,1,1),0,new Le(1,1),0),new so(new Q(1,1,1,1),0,new Le(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Rn(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return yt.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,r){return t.equals(n)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,r=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,r,n,o),u=this._validatePositionWithCache(e,s,r,a);return n.equals(o)&&r.equals(a)&&s.equals(u)?t:new so(Q.fromPositions(a,u),t.selectionStartLeftoverVisibleColumns+r.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=p3._validateViewState(e.viewModel,n)),t){const r=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(r)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new so(r,s,o,a)}else{if(!n)return;const r=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new so(r,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const r=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new so(r,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const r=e.coordinatesConverter.convertModelPositionToViewPosition(new Le(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new Le(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new Q(r.lineNumber,r.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new so(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class kee{constructor(e){this.context=e,this.primaryCursor=new p3(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const r=this.secondaryCursors[t].viewState.position;r.isBefore(e)&&(e=r)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const r=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(r)&&(e=r)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Rn.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let r=n-t;for(let s=0;s<r;s++)this._addSecondaryCursor()}else if(t>n){let r=t-n;for(let s=0;s<r;s++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let r=0;r<n;r++)this.secondaryCursors[r].setState(this.context,e[r].modelState,e[r].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new p3(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,r=e.length;n<r;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,r)=>n.selection.startLineNumber===r.selection.startLineNumber?n.selection.startColumn-r.selection.startColumn:n.selection.startLineNumber-r.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const r=t[n],s=t[n+1],o=r.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let u;if(a.isEmpty()||o.isEmpty()?u=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):u=a.getStartPosition().isBefore(o.getEndPosition()),u){const d=r.index<s.index?n:n+1,h=r.index<s.index?n+1:n,f=t[h].index,p=t[d].index,m=t[h].selection,v=t[d].selection;if(!m.equalsSelection(v)){const b=m.plusRange(v),L=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,S=v.selectionStartLineNumber===v.startLineNumber&&v.selectionStartColumn===v.startColumn;let y;f===this.lastAddedCursorIndex?(y=L,this.lastAddedCursorIndex=p):y=S;let E;y?E=new yt(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):E=new yt(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[d].selection=E;const A=Rn.fromModelSelection(E);e[p].setState(this.context,A.modelState,A.viewState)}for(const b of t)b.index>f&&b.index--;e.splice(f,1),t.splice(h,1),this._removeSecondaryCursor(f-1),n--}}}}class NOe{constructor(){this.type=0}}class AOe{constructor(){this.type=1}}class OOe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class MOe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class ZC{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class UR{constructor(){this.type=5}}class ROe{constructor(e){this.type=6,this.isFocused=e}}class POe{constructor(){this.type=7}}class jR{constructor(){this.type=8}}class xde{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class YH{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class ZH{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class u4{constructor(e,t,n,r,s,o){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=r,this.revealHorizontal=s,this.scrollType=o}}class FOe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class BOe{constructor(){this.type=14}}class WOe{constructor(e){this.type=15,this.ranges=e}}class VOe{constructor(){this.type=16}}let HOe=class{constructor(){this.type=17}};class $Oe extends Oe{constructor(){super(),this._onEvent=this._register(new Ce),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new zOe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class zOe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class mG{constructor(e,t,n,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new mG(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class _G{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new _G(this.oldHasFocus,e.hasFocus)}}class vG{constructor(e,t,n,r,s,o,a,u){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=r,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=u,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new vG(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Nee{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class m3{constructor(e,t,n,r,s,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=r,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,r=t.length;if(n!==r)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return m3._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new m3(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class UOe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class r6{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Aee{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(r&&(t.push(r),r.startLineNumber!==r.endLineNumber))return!1}t.sort(Q.compareRangesUsingStarts),e.sort(Q.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class Jy extends Oe{constructor(e,t,n,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new hee(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new kee(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=ri(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new hee(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,r){let s=!1;r!==null&&r.length>Jy.MAX_CURSOR_COUNT&&(r=r.slice(0,Jy.MAX_CURSOR_COUNT),s=!0);const o=new r6(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,r){const s=this._cursors.getViewPositions();if(s.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,r);return}else{const o=s[0],a=new Q(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,n,r)}}_revealPrimaryCursor(e,t,n,r,s){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,r,s);else{const a=o[0],u=new Q(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,u,null,n,r,s)}}_emitCursorRevealRange(e,t,n,r,s,o,a){e.emitViewEvent(new u4(t,n,r,s,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){let n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];let a=1,u=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(u=o.position.column);let d=a,h=u;o.selectionStart&&o.selectionStart.lineNumber&&(d=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),n.push({selectionStartLineNumber:d,selectionStartColumn:h,positionLineNumber:a,positionColumn:u})}this.setStates(e,"restoreState",0,Rn.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof qce){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new kee(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const r=Rn.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,r)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Rn.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:ur.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:ur.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,r){this.setStates(e,t,r,Rn.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],r=[];for(let a=0,u=e.length;a<u;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],r);this._autoClosedActions.push(new Aee(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=jOe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],r=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof _de&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),r.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,r,s){const o=new r6(this._model,this);if(o.equals(r))return!1;const a=this._cursors.getSelections(),u=this._cursors.getViewSelections();if(e.emitViewEvent(new MOe(u,a)),!r||r.cursorState.length!==o.cursorState.length||o.cursorState.some((d,h)=>!d.modelState.equals(r.cursorState[h].modelState))){const d=r?r.cursorState.map(f=>f.modelState.selection):null,h=r?r.modelVersionId:0;e.emitOutgoingEvent(new m3(d,a,h,o.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],u=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!u||u.length!==1)return null;const d=u[0].open,h=s.text.length-o[2].length-1,f=s.text.lastIndexOf(d,h-1);if(f===-1)return null;t.push([f,h])}return t}executeEdits(e,t,n,r){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);let o=[],a=[];const u=this._model.pushEditOperations(this.getSelections(),n,d=>{if(s)for(let f=0,p=s.length;f<p;f++){const[m,v]=s[f],b=d[f],L=b.range.startLineNumber,S=b.range.startColumn-1+m,y=b.range.startColumn-1+v;o.push(new Q(L,y+1,L,y+2)),a.push(new Q(L,S+1,L,y+2))}const h=r(d);return h&&(this._isHandling=!0),h});u&&(this._isHandling=!1,this.setSelections(e,t,u,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,r=0){if(this.context.cursorConfig.readOnly)return;const s=new r6(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){gn(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,r,s,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return Aee.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(xr.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const r=t.length;let s=0;for(;s<r;){const o=NF(t,s),a=t.substr(s,o);this._executeEditOperation(xr.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation(xr.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,r,s,o){if(t.length===0&&n===0&&r===0){if(s!==0){const a=this.getSelections().map(u=>{const d=u.getPosition();return new yt(d.lineNumber,d.column+s,d.lineNumber,d.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(xr.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,r,s))},e,o)}paste(e,t,n,r,s){this._executeEdit(()=>{this._executeEditOperation(xr.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,r||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Mb.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ll(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new ll(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}Jy.MAX_CURSOR_COUNT=1e4;class jOe{static executeCommands(e,t,n){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(r,n);for(let o=0,a=r.trackedRanges.length;o<a;o++)r.model._setTrackedRange(r.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const r=n.operations,s=this._getLoserCursorMap(r);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let d=0,h=r.length;d<h;d++)s.hasOwnProperty(r[d].identifier.major.toString())||o.push(r[d]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,d=>{let h=[];for(let m=0;m<e.selectionsBefore.length;m++)h[m]=[];for(const m of d)m.identifier&&h[m.identifier.major].push(m);const f=(m,v)=>m.identifier.minor-v.identifier.minor;let p=[];for(let m=0;m<e.selectionsBefore.length;m++)h[m].length>0?(h[m].sort(f),p[m]=t[m].computeCursorState(e.model,{getInverseEditOperations:()=>h[m],getTrackedSelection:v=>{const b=parseInt(v,10),L=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new yt(L.startLineNumber,L.startColumn,L.endLineNumber,L.endColumn):new yt(L.endLineNumber,L.endColumn,L.startLineNumber,L.startColumn)}})):p[m]=e.selectionsBefore[m];return p});a||(a=e.selectionsBefore);let u=[];for(let d in s)s.hasOwnProperty(d)&&u.push(parseInt(d,10));u.sort((d,h)=>h-d);for(const d of u)a.splice(d,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],r=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const u=this._getEditOperationsFromCommand(e,s,a);n=n.concat(u.operations),r=r||u.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,n){let r=[],s=0;const o=(f,p,m=!1)=>{Q.isEmpty(f)&&p===""||r.push({identifier:{major:t,minor:s++},range:f,text:p,forceMoveMarkers:m,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(f,p,m)=>{a=!0,o(f,p,m)},trackSelection:(f,p)=>{const m=yt.liftSelection(f);let v;if(m.isEmpty())if(typeof p=="boolean")p?v=2:v=3;else{const S=e.model.getLineMaxColumn(m.startLineNumber);m.startColumn===S?v=2:v=3}else v=1;const b=e.trackedRanges.length,L=e.model._setTrackedRange(null,m,v);return e.trackedRanges[b]=L,e.trackedRangesDirection[b]=m.getDirection(),b.toString()}};try{n.getEditOperations(e.model,h)}catch(f){return gn(f),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,r)=>-Q.compareRangesUsingEnds(n.range,r.range));let t={};for(let n=1;n<e.length;n++){const r=e[n-1],s=e[n];if(Q.getStartPosition(r.range).isBefore(Q.getEndPosition(s.range))){let o;r.identifier.major>s.identifier.major?o=r.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class Dde{constructor(e,t,n,r,s,o){this.id=e,this.label=t,this.alias=n,this._precondition=r,this._run=s,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const _M={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Oee={getInitialState:()=>dM,tokenize2:(i,e,t,n)=>tG(0,i,t,n)};function Ide(i,e,t=Oee){return qOe(i,e,t||Oee)}function KOe(i,e,t,n,r,s,o){let a="<div>",u=n,d=0,h=!0;for(let f=0,p=e.getCount();f<p;f++){const m=e.getEndOffset(f);if(m<=n)continue;let v="";for(;u<m&&u<r;u++){const b=i.charCodeAt(u);switch(b){case 9:let L=s-(u+d)%s;for(d+=L-1;L>0;)o&&h?(v+="&#160;",h=!1):(v+=" ",h=!0),L--;break;case 60:v+="&lt;",h=!1;break;case 62:v+="&gt;",h=!1;break;case 38:v+="&amp;",h=!1;break;case 0:v+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:v+="",h=!1;break;case 13:v+="&#8203",h=!1;break;case 32:o&&h?(v+="&#160;",h=!1):(v+=" ",h=!0);break;default:v+=String.fromCharCode(b),h=!1}}if(a+=`<span style="${e.getInlineStyle(f,t)}">${v}</span>`,m>r||u>=r)break}return a+="</div>",a}function qOe(i,e,t){let n='<div class="monaco-tokenized-source">';const r=sg(i);let s=t.getInitialState();for(let o=0,a=r.length;o<a;o++){const u=r[o];o>0&&(n+="<br/>");const d=t.tokenize2(u,!0,s,0);Js.convertToEndOffset(d.tokens,u.length);const f=new Js(d.tokens,u,e).inflate();let p=0;for(let m=0,v=f.getCount();m<v;m++){const b=f.getClassName(m),L=f.getEndOffset(m);n+=`<span class="${b}">${mq(u.substring(p,L))}</span>`,p=L}s=d.endState}return n+="</div>",n}class GOe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,r)}}class YOe{constructor(e,t,n,r,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=r,this.minWidth=s,this.prefixSum=0}}class jA{constructor(e,t,n,r){this._instanceId=Sue(++jA.INSTANCE_COUNT),this._pendingChanges=new GOe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=r}static findInsertionIndex(e,t,n){let r=0,s=e.length;for(;r<s;){const o=r+s>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?s=o:r=o+1:t<e[o].afterLineNumber?s=o:r=o+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(r,s,o,a)=>{t=!0,r=r|0,s=s|0,o=o|0,a=a|0;const u=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new YOe(u,r,s,o,a)),u},changeOneWhitespace:(r,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:r,newAfterLineNumber:s,newHeight:o})},removeWhitespace:r=>{t=!0,this._pendingChanges.remove({id:r})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const u of e)this._insertWhitespace(u);for(const u of t)this._changeOneWhitespace(u.id,u.newAfterLineNumber,u.newHeight);for(const u of n){const d=this._findWhitespaceIndex(u.id);d!==-1&&this._removeWhitespace(d)}return}const r=new Set;for(const u of n)r.add(u.id);const s=new Map;for(const u of t)s.set(u.id,u);const o=u=>{let d=[];for(const h of u)if(!r.has(h.id)){if(s.has(h.id)){const f=s.get(h.id);h.afterLineNumber=f.newAfterLineNumber,h.height=f.newHeight}d.push(h)}return d},a=o(this._arr).concat(o(e));a.sort((u,d)=>u.afterLineNumber===d.afterLineNumber?u.ordinal-d.ordinal:u.afterLineNumber-d.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=jA.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,r=t.length;n<r;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==n&&(this._arr[r].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){const s=this._arr[r];this._removeWhitespace(r),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,r=t.length-1;for(;n<=r;){const o=(r-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let r=1,s=t;for(;r<s;){const o=(r+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)r=o+1;else{if(e>=a)return o;s=o}}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(r)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(r)|0;const u=this.getWhitespacesCount()|0;let d,h;a===-1?(a=u,h=o+1,d=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);let f=s,p=f;const m=5e5;let v=0;s>=m&&(v=Math.floor(s/m)*m,v=Math.floor(v/n)*n,p-=v);const b=[],L=e+(t-e)/2;let S=-1;for(let N=r;N<=o;N++){if(S===-1){const V=f,M=f+n;(V<=L&&L<M||V>L)&&(S=N)}for(f+=n,b[N-r]=p,p+=n;h===N;)p+=d,f+=d,a++,a>=u?h=o+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);if(f>=t){o=N;break}}S===-1&&(S=o);const y=this.getVerticalOffsetForLineNumber(o)|0;let E=r,A=o;return E<A&&s<e&&E++,E<A&&y+n>t&&A--,{bigNumbersDelta:v,startLineNumber:r,endLineNumber:o,relativeVerticalOffset:b,centeredLineNumber:S,completelyVisibleStartLineNumber:E,completelyVisibleEndLineNumber:A}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let r;return e>0?r=this.getWhitespacesAccumulatedHeight(e-1):r=0,n+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const r=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=r+s)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),u=this.getHeightForWhitespaceIndex(o);if(e>=a+u)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const r=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:n,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(n<0)return[];let s=[];for(let o=n;o<=r;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),u=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:u})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}jA.INSTANCE_COUNT=0;const ZOe=125;class n2{constructor(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=r,this.scrollHeight=Math.max(n,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class XOe extends Oe{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Ce),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new n2(0,0,0,0),this._scrollable=this._register(new Y8(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(n||r)&&this._onDidContentSizeChange.fire(new mG(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class QOe extends Oe{constructor(e,t,n){super(),this._configuration=e;const r=this._configuration.options,s=r.get(130),o=r.get(74);this._linesLayout=new jA(t,r.get(58),o.top,o.bottom),this._scrollable=this._register(new XOe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new n2(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?ZOe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(130)){const n=t.get(130),r=n.contentWidth,s=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new n2(r,o.contentWidth,s,this._getContentHeight(r,s,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const r=this._configuration.options.get(91);return r.horizontal===2||e>=t?0:r.horizontalScrollbarSize}_getContentHeight(e,t,n){const r=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return r.get(93)?s+=Math.max(0,t-r.get(58)-r.get(74).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new n2(t,e.contentWidth,n,this._getContentHeight(t,n,r)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new wee(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new wee(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(131),r=t.get(43);if(n.isViewportWrapping){const s=t.get(130),o=t.get(64);return e>s.contentWidth+r.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+s.verticalScrollbarWidth:e}else{const s=t.get(92)*r.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new n2(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),r=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-r,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}function s6(i,e){return i===null?e?_3.INSTANCE:v3.INSTANCE:new JOe(i,e)}class JOe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.getOutputLineCount():0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,0)}getInputEndOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,this._lineBreakData.getMaxOutputOffset(e))}getViewLineContent(e,t,n){this.assertVisible();const r=n>0?this._lineBreakData.breakOffsets[n-1]:0,s=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let o;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((u,d)=>new tf(0,0,u+1,this._lineBreakData.injectionOptions[d],0));o=tf.applyInjectedText(e.getLineContent(t),a).substring(r,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=Mee(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this.assertVisible(),this._lineBreakData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){this.assertVisible();const r=this._lineBreakData,s=n>0?r.wrappedTextIndentLength:0,o=r.injectionOffsets,a=r.injectionOptions;let u,d;if(o){const b=e.getLineTokens(t).withInserted(o.map((E,A)=>({offset:E,text:a[A].content,tokenMetadata:Js.defaultTokenMetadata}))),L=n>0?r.breakOffsets[n-1]:0,S=r.breakOffsets[n];u=b.sliceAndInflate(L,S,s),d=new Array;let y=0;for(let E=0;E<o.length;E++){const A=a[E].content.length,N=o[E]+y,V=o[E]+y+A;if(N>S)break;if(L<V){const M=a[E];if(M.inlineClassName){const R=n>0?r.wrappedTextIndentLength:0,Y=R+Math.max(N-L,0),X=R+Math.min(V-L,S);Y!==X&&d.push(new aOe(Y,X,M.inlineClassName,M.inlineClassNameAffectsLetterSpacing))}}y+=A}}else{const b=this.getInputStartOffsetOfOutputLineIndex(n),L=this.getInputEndOffsetOfOutputLineIndex(n);u=e.getLineTokens(t).sliceAndInflate(b,L,s),d=null}let h=u.getLineContent();n>0&&(h=Mee(r.wrappedTextIndentLength)+h);const f=this._lineBreakData.getMinOutputOffset(n)+1,p=h.length+1,m=n+1<this.getViewLineCount(),v=n===0?0:r.breakOffsetsVisibleColumn[n-1];return new gG(h,m,f,p,v,u,d)}getViewLinesData(e,t,n,r,s,o,a){this.assertVisible();for(let u=n;u<r;u++){let d=s+u-n;if(!o[d]){a[d]=null;continue}a[d]=this.getViewLineData(e,t,u)}}getModelColumnOfViewPosition(e,t){return this.assertVisible(),this._lineBreakData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this.assertVisible(),this._lineBreakData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this.assertVisible();const n=this._lineBreakData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const r=t.lineNumber-e;return this._lineBreakData.normalizeOutputPosition(e,t.column-1,n).toPosition(r)}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class _3{constructor(){}isVisible(){return!0}setVisible(e){return e?this:v3.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let r=e.getLineTokens(t),s=r.getLineContent();return new gG(s,!1,1,s.length+1,0,r.inflate(),null)}getViewLinesData(e,t,n,r,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Le(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}_3.INSTANCE=new _3;class v3{constructor(){}isVisible(){return!1}setVisible(e){return e?_3.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,r,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}v3.INSTANCE=new v3;let o6=[""];function Mee(i){if(i>=o6.length)for(let e=1;e<=i;e++)o6[e]=eMe(e);return o6[i]}function eMe(i){return new Array(i+1).join(" ")}class tMe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=YC(e);const n=this.values,r=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=YC(e),t=YC(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=YC(e),t=YC(t);const n=this.values,r=this.prefixSum;if(e>=n.length)return!1;let s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=YC(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,r=0,s=0,o=0;for(;t<=n;)if(r=t+(n-t)/2|0,s=this.prefixSum[r],o=s-this.values[r],e<o)n=r-1;else if(e>=s)t=r+1;else break;return new Tde(r,e-o)}}class nMe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new Tde(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=LA(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],r=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=r+n;for(let s=0;s<n;s++)this._indexBySum[r+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class Tde{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class iMe{constructor(e,t,n,r,s,o,a,u,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=u,this.wrappingIndent=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new sMe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),s=n.length,o=this.createLineBreaksComputer(),a=new cy(tf.fromDecorations(r));for(let b=0;b<s;b++){const L=a.takeWhile(S=>S.lineNumber===b+1);o.addRequest(n[b],L,t?t[b]:null)}const u=o.finalize();let d=[],h=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(Q.compareRangesUsingStarts),f=1,p=0,m=-1,v=m+1<h.length?p+1:s+2;for(let b=0;b<s;b++){let L=b+1;L===v&&(m++,f=h[m].startLineNumber,p=h[m].endLineNumber,v=m+1<h.length?p+1:s+2);let S=L>=f&&L<=p,y=s6(u[b],!S);d[b]=y.getViewLineCount(),this.modelLineProjections[b]=y}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new nMe(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(p=>this.model.validateRange(p));let n=rMe(t),r=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(Q.compareRangesUsingStarts);if(n.length===r.length){let p=!1;for(let m=0;m<n.length;m++)if(!n[m].equalsRange(r[m])){p=!0;break}if(!p)return!1}const s=n.map(p=>({range:p,options:En.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);let o=n,a=1,u=0,d=-1,h=d+1<o.length?u+1:this.modelLineProjections.length+2,f=!1;for(let p=0;p<this.modelLineProjections.length;p++){let m=p+1;m===h&&(d++,a=o[d].startLineNumber,u=o[d].endLineNumber,h=d+1<o.length?u+1:this.modelLineProjections.length+2);let v=!1;if(m>=a&&m<=u?this.modelLineProjections[p].isVisible()&&(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!1),v=!0):(f=!0,this.modelLineProjections[p].isVisible()||(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!0),v=!0)),v){let b=this.modelLineProjections[p].getViewLineCount();this.projectedModelLineLineCounts.setValue(p,b)}}return f||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,r){const s=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,u=this.wrappingIndent===r;if(s&&o&&a&&u)return!1;const d=s&&o&&!a&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=r;let h=null;if(d){h=[];for(let f=0,p=this.modelLineProjections.length;f<p;f++)h[f]=this.modelLineProjections[f].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new YH(r,s)}onModelLinesInserted(e,t,n,r){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible();let o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,u=[],d=[];for(let h=0,f=r.length;h<f;h++){let p=s6(r[h],!s);u.push(p);let m=p.getViewLineCount();a+=m,d[h]=m}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(u).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new ZH(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let r=t-1,s=this.modelLineProjections[r].getViewLineCount(),o=this.modelLineProjections[r].isVisible(),a=s6(n,o);this.modelLineProjections[r]=a;let u=this.modelLineProjections[r].getViewLineCount(),d=!1,h=0,f=-1,p=0,m=-1,v=0,b=-1;s>u?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+u-1,v=f+1,b=v+(s-u)-1,d=!0):s<u?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+s-1,p=f+1,m=p+(u-s)-1,d=!0):(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+u-1),this.projectedModelLineLineCounts.setValue(r,u);const L=h<=f?new xde(h,f):null,S=p<=m?new ZH(p,m):null,y=v<=b?new YH(v,b):null;return[d,L,S,y]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(r.lineNumber,s.lineNumber,o.lineNumber),u=this.convertModelPositionToViewPosition(a.startLineNumber,1),d=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:u.lineNumber,endLineNumber:d.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,r=t.remainder;return new Ree(n+1,r)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Le(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Le(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),r=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let u=n.modelLineNumber;u<=r.modelLineNumber;u++){const d=this.modelLineProjections[u-1];if(d.isVisible()){let h=u===n.modelLineNumber?n.modelLineWrappedLineIdx:0,f=u===r.modelLineNumber?r.modelLineWrappedLineIdx+1:d.getViewLineCount();for(let p=h;p<f;p++)a.push(new Ree(u,p))}if(!d.isVisible()&&o){const h=new Le(u-1,this.model.getLineMaxColumn(u-1)+1),f=Q.fromPositions(o,h);s.push(new Pee(f,a)),a=[],o=null}else d.isVisible()&&!o&&(o=new Le(u,1))}if(o){const u=Q.fromPositions(o,this.getModelEndPositionOfViewLine(r));s.push(new Pee(u,a))}return s}getViewLinesBracketGuides(e,t,n,r){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const u=a.modelRange.startLineNumber,d=this.model.getLinesBracketGuides(u,a.modelRange.endLineNumber,s,r);for(const h of a.viewLines)if(h.isWrappedLineContinuation&&this.getMinColumnOfViewLine(h)===1)o.push([]);else{let f=d[h.modelLineNumber-u];f=f.map(p=>p.horizontalLine?new Mw(p.visibleColumn,p.className,new BH(p.horizontalLine.top,this.convertModelPositionToViewPosition(h.modelLineNumber,p.horizontalLine.endColumn).column)):p),o.push(f)}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[],o=[],a=[];const u=n.lineNumber-1,d=r.lineNumber-1;let h=null;for(let v=u;v<=d;v++){const b=this.modelLineProjections[v];if(b.isVisible()){let L=b.getViewLineNumberOfModelPosition(0,v===u?n.column:1),S=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(v+1)),y=S-L+1,E=0;y>1&&b.getViewLineMinColumn(this.model,v+1,S)===1&&(E=L===0?1:2),o.push(y),a.push(E),h===null&&(h=new Le(v+1,0))}else h!==null&&(s=s.concat(this.model.getLinesIndentGuides(h.lineNumber,v)),h=null)}h!==null&&(s=s.concat(this.model.getLinesIndentGuides(h.lineNumber,r.lineNumber)),h=null);const f=t-e+1;let p=new Array(f),m=0;for(let v=0,b=s.length;v<b;v++){let L=s[v],S=Math.min(f-m,o[v]),y=a[v],E;y===2?E=0:y===1?E=1:E=S;for(let A=0;A<S;A++)A===E&&(L=0),p[m++]=L}return p}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let r=this.projectedModelLineLineCounts.getIndexOf(e-1),s=e,o=r.index,a=r.remainder,u=[];for(let d=o,h=this.model.getLineCount();d<h;d++){let f=this.modelLineProjections[d];if(!f.isVisible())continue;let p=d===o?a:0,m=f.getViewLineCount()-p,v=!1;s+m>t&&(v=!0,m=t-s+1);let b=p+m;if(f.getViewLinesData(this.model,d+1,p,b,s-e,n,u),s+=m,v)break}return u}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let r=this.projectedModelLineLineCounts.getIndexOf(e-1),s=r.index,o=r.remainder,a=this.modelLineProjections[s],u=a.getViewLineMinColumn(this.model,s+1,o),d=a.getViewLineMaxColumn(this.model,s+1,o);t<u&&(t=u),t>d&&(t=d);let h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new Le(s+1,h)).equals(n)?new Le(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e);let r=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Le(n.modelLineNumber,r))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Q(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const r=this.model.validatePosition(new Le(e,t)),s=r.lineNumber,o=r.column;let a=s-1,u=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,u=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new Le(1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(a);let h;return u?h=this.modelLineProjections[a].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(a+1),n):h=this.modelLineProjections[s-1].getViewPositionOfModelPosition(d,o,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return Q.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(s.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Q(r.lineNumber,1,s.lineNumber,s.column),t,n);let o=[];const a=r.lineNumber-1,u=s.lineNumber-1;let d=null;for(let m=a;m<=u;m++)if(this.modelLineProjections[m].isVisible())d===null&&(d=new Le(m+1,m===a?r.column:1));else if(d!==null){const b=this.model.getLineMaxColumn(m);o=o.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,m,b),t,n)),d=null}d!==null&&(o=o.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,s.lineNumber,s.column),t,n)),d=null),o.sort((m,v)=>{const b=Q.compareRangesUsingStarts(m.range,v.range);return b===0?m.id<v.id?-1:m.id>v.id?1:0:b});let h=[],f=0,p=null;for(const m of o){const v=m.id;p!==v&&(p=v,h[f++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function rMe(i){if(i.length===0)return[];const e=i.slice();e.sort(Q.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,r=e[0].endLineNumber;for(let s=1,o=e.length;s<o;s++){let a=e[s];a.startLineNumber>r+1?(t.push(new Q(n,1,r,1)),n=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return t.push(new Q(n,1,r,1)),t}class Ree{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class Pee{constructor(e,t){this.modelRange=e,this.viewLines=t}}class sMe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class oMe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new aMe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,r){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new YH(t,n)}onModelLinesInserted(e,t,n,r){return new ZH(t,n)}onModelLineChanged(e,t,n){return[!1,new xde(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let r=new Array(n);for(let s=0;s<n;s++)r[s]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new gG(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);let s=[];for(let o=e;o<=t;o++){let a=o-e;n[a]||(s[a]=null),s[a]=this.getViewLineData(o)}return s}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class aMe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class lMe{constructor(e,t,n,r,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=r,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const r=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Le(r.startLineNumber,1),0),u=this._coordinatesConverter.convertModelPositionToViewPosition(new Le(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);o=new Q(a.lineNumber,a.column,u.lineNumber,u.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new Lde(o,s),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,Tq(this.configuration.options)),n=e.startLineNumber,r=e.endLineNumber;let s=[],o=0,a=[];for(let u=n;u<=r;u++)a[u-n]=[];for(let u=0,d=t.length;u<d;u++){let h=t[u],f=h.options;if(!bG(this.model,h))continue;let p=this._getOrCreateViewModelDecoration(h),m=p.range;if(s[o++]=p,f.inlineClassName){let v=new R2(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(n,m.startLineNumber),L=Math.min(r,m.endLineNumber);for(let S=b;S<=L;S++)a[S-n].push(v)}if(f.beforeContentClassName&&n<=m.startLineNumber&&m.startLineNumber<=r){let v=new R2(new Q(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);a[m.startLineNumber-n].push(v)}if(f.afterContentClassName&&n<=m.endLineNumber&&m.endLineNumber<=r){let v=new R2(new Q(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);a[m.endLineNumber-n].push(v)}}return{decorations:s,inlineDecorations:a}}}function bG(i,e){return!(e.options.hideInCommentTokens&&uMe(i,e.range,n=>n===1))}function uMe(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const r=i.getLineTokens(n),s=n===e.startLineNumber,o=n===e.endLineNumber;let a=s?r.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<r.getCount()&&!(o&&r.getStartOffset(a)>e.endColumn-1);){if(!t(r.getStandardTokenType(a)))return!1;a++}}return!0}const cMe={ModesRegistry:"editor.modesRegistry"};class dMe{constructor(){this._onDidChangeLanguages=new Ce,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const sb=new dMe;Xr.add(cMe.ModesRegistry,sb);const US="plaintext",hMe=".txt";sb.registerLanguage({id:US,extensions:[hMe],aliases:[C("plainText.alias","Plain Text"),"text"],mimetypes:[Vc.text]});_i.register(US,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);Xr.as(yC.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1}}}]);class fMe extends Oe{constructor(e,t,n,r,s,o){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new $Oe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new er(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new er(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new oMe(this.model);else{const a=this._configuration.options,u=a.get(43),d=a.get(124),h=a.get(131),f=a.get(123);this._lines=new iMe(this._editorId,this.model,r,s,u,this.model.getOptions().tabSize,d,h.wrappingColumn,f)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Jy(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new QOe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new FOe(a)),this._eventDispatcher.emitOutgoingEvent(new vG(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new lMe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(mM.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new VOe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new Q(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const r of n)this.model.tokenizeViewport(r.startLineNumber,r.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new ROe(e)),this._eventDispatcher.emitOutgoingEvent(new _G(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new NOe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new AOe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new BOe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let h=new Le(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let r=!1;const s=this._configuration.options,o=s.get(43),a=s.get(124),u=s.get(131),d=s.get(123);if(this._lines.setWrappingSettings(o,a,u.wrappingColumn,d)&&(e.emitViewEvent(new UR),e.emitViewEvent(new jR),e.emitViewEvent(new ZC(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(r=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new ZC(null))),e.emitViewEvent(new OOe(t)),this.viewLayout.onConfigurationChanged(t),r&&n){const h=this.coordinatesConverter.convertModelPositionToViewPosition(n),f=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:f+this._viewportStartLineDelta},1)}Bc.shouldRecreate(t)&&(this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,r=!1;const s=e.changes,o=e instanceof eb?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of s)switch(h.changeType){case 4:{for(let f=0;f<h.detail.length;f++){const p=h.detail[f];let m=h.injectedTexts[f];m&&(m=m.filter(v=>!v.ownerId||v.ownerId===this._editorId)),a.addRequest(p,m,null)}break}case 2:{let f=null;h.injectedText&&(f=h.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),a.addRequest(h.detail,f,null);break}}const u=a.finalize(),d=new cy(u);for(const h of s)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new UR),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const f=this._lines.onModelLinesDeleted(o,h.fromLineNumber,h.toLineNumber);f!==null&&(t.emitViewEvent(f),this.viewLayout.onLinesDeleted(f.fromLineNumber,f.toLineNumber)),n=!0;break}case 4:{const f=d.takeCount(h.detail.length),p=this._lines.onModelLinesInserted(o,h.fromLineNumber,h.toLineNumber,f);p!==null&&(t.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const f=d.dequeue(),[p,m,v,b]=this._lines.onModelLineChanged(o,h.lineNumber,f);r=p,m&&t.emitViewEvent(m),v&&(t.emitViewEvent(v),this.viewLayout.onLinesInserted(v.fromLineNumber,v.toLineNumber)),b&&(t.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!n&&r&&(t.emitViewEvent(new jR),t.emitViewEvent(new ZC(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,r=e.ranges.length;n<r;n++){const s=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new Le(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Le(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new WOe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new POe),this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new UR),t.emitViewEvent(new jR),t.emitViewEvent(new ZC(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new ZC(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new UR),n.emitViewEvent(new jR),n.emitViewEvent(new ZC(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new Nee)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(130),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),s=Math.max(1,r.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new Q(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let r=[],s=0,o=t.startLineNumber,a=t.startColumn,u=t.endLineNumber,d=t.endColumn;for(let h=0,f=n.length;h<f;h++){const p=n[h].startLineNumber,m=n[h].endLineNumber;m<o||p>u||(o<p&&(r[s++]=new Q(o,a,p-1,this.model.getLineMaxColumn(p-1))),o=m+1,a=1)}return(o<u||o===u&&a<d)&&(r[s++]=new Q(o,a,u,d)),r}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new Q(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new Q(n,this.getLineMinColumn(n),r,this.getLineMaxColumn(r))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new Le(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let r=this.coordinatesConverter.convertViewPositionToModelPosition(new Le(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new Q(r.lineNumber,r.column,r.lineNumber,r.column),1);const s=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-s}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,r){return this._lines.getViewLinesBracketGuides(e,t,n,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Ta(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Qf(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(t),u=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return o.inlineDecorations&&(u=[...u,...o.inlineDecorations.map(d=>d.toInlineDecoration(t))]),new Pu(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,r,o.tokens,u,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let r=this._lines.getViewLinesData(e,t,n);return new oOe(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,Tq(this._configuration.options)),n=new gMe;for(const r of t){const s=r.options,o=s.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const u=o.getColor(e),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);n.accept(u,s.zIndex,d,h,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const r=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(Q.compareRangesUsingStarts);let s=!1,o=!1;for(const u of e)u.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const u=e.map(h=>h.startLineNumber);let d="";for(let h=0;h<u.length;h++)h>0&&u[h-1]===u[h]||(d+=this.model.getLineContent(u[h])+r);return d}if(s&&t){let u=[],d=0;for(const h of e){const f=h.startLineNumber;h.isEmpty()?f!==d&&u.push(this.model.getLineContent(f)):u.push(this.model.getValueInRange(h,n?2:0)),d=f}return u.length===1?u[0]:u}let a=[];for(const u of e)u.isEmpty()||a.push(this.model.getValueInRange(u,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===US||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;const h=r.startLineNumber;r=new Q(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const s=this._configuration.options.get(43),o=this._getColorMap(),u=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===jo.fontFamily;let d;return u?d=jo.fontFamily:(d=s.fontFamily,d=d.replace(/"/g,"'"),/[,']/.test(d)||/[+ ]/.test(d)&&(d=`'${d}'`),d=`${d}, ${jo.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${d};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let u="";for(let d=n;d<=s;d++){const h=this.model.getLineTokens(d),f=h.getLineContent(),p=d===n?r-1:0,m=d===s?o-1:f.length;f===""?u+="<br>":u+=KOe(f,h.inflate(),t,p,m,a,Ao)}return u}_getColorMap(){let e=Wr.getColorMap(),t=["#000000"];if(e)for(let n=1,r=e.length;n<r;n++)t[n]=ye.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new UOe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,r,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,r,s))}paste(e,t,n,r){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new u4(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new u4(e,n,null,0,!0,0)))}revealRange(e,t,n,r,s){this._withViewEventsCollector(o=>o.emitViewEvent(new u4(e,n,null,r,t,s)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new HOe),this._eventDispatcher.emitOutgoingEvent(new Nee))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class gMe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,r,s){const o=this._asMap[e];if(o){const a=o.data,u=a[a.length-3],d=a[a.length-1];if(u===s&&d+1>=n){r>d&&(a[a.length-1]=r);return}a.push(s,n,r)}else{const a=new Ede(e,t,[s,n,r]);this._asMap[e]=a,this.asArray.push(a)}}}class KA{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}var qA;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(qA||(qA={}));(function(i){const e="error",t="warning",n="warn",r="info",s="ignore";function o(u){return u?QN(e,u)?i.Error:QN(t,u)||QN(n,u)?i.Warning:QN(r,u)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(u){switch(u){case i.Error:return e;case i.Warning:return t;case i.Info:return r;default:return s}}i.toString=a})(qA||(qA={}));const Ur=qA,gs=gi("notificationService");class pMe{}const il=gi("accessibilityService"),vM=new Dt("accessibilityModeEnabled",!1);class B2{constructor(e,t,n,r,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let r=this.breakOffsets[e]-t;return e>0&&(r+=this.wrappedTextIndentLength),r}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let r=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&r>this.injectionOffsets[s];s++)r<this.injectionOffsets[s]+this.injectionOptions[s].content.length?r=this.injectionOffsets[s]:r-=this.injectionOptions[s].content.length;return r}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)n+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,r=this.breakOffsets.length-1,s=0,o=0;for(;n<=r;){s=n+(r-n)/2|0;const u=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=o)r=s-1;else if(e>u)n=s+1;else break;else if(e<o)r=s-1;else if(e>=u)n=s+1;else break}let a=e-o;return s>0&&(a+=this.wrappedTextIndentLength),new KR(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const r=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,n);if(s!==r)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new KR(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const r=this.getOutputLineCount()-1;if(e<r&&t===this.getMaxOutputOffset(e))return new KR(e+1,this.getMinOutputOffset(e+1))}return new KR(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInInputWithInjections+n.length?n.offsetInInputWithInjections+n.length:n.offsetInInputWithInjections;if(t===1){let o=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}let r=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)r-=this.injectionOptions[s-1].content.length,s++;return r}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.getInjectedTextAtOffset(n);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let r=0;for(let s=0;s<t.length;s++){const o=n[s].content.length,a=t[s]+r,u=t[s]+r+o;if(a>e)break;if(e<=u)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:o};r+=o}}}}class KR{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Le(e+this.outputLineIndex,this.outputOffset+1)}}class CG{constructor(e,t){this.classifier=new mMe(e,t)}static create(e){return new CG(e.get(119),e.get(118))}createLineBreaksComputer(e,t,n,r){const s=[],o=[],a=[];return{addRequest:(u,d,h)=>{s.push(u),o.push(d),a.push(h)},finalize:()=>{const u=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let d=[];for(let h=0,f=s.length;h<f;h++){const p=o[h],m=a[h];m&&!m.injectionOptions&&!p?d[h]=_Me(this.classifier,m,s[h],t,n,u,r):d[h]=vMe(this.classifier,s[h],p,t,n,u,r)}return XH.length=0,QH.length=0,d}}}}class mMe extends HS{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let XH=[],QH=[];function _Me(i,e,t,n,r,s,o){if(r===-1)return null;const a=t.length;if(a<=1)return null;const u=e.breakOffsets,d=e.breakOffsetsVisibleColumn,h=kde(t,n,r,s,o),f=r-h;let p=XH,m=QH,v=0,b=0,L=0,S=r;const y=u.length;let E=0;if(E>=0){let A=Math.abs(d[E]-S);for(;E+1<y;){const N=Math.abs(d[E+1]-S);if(N>=A)break;A=N,E++}}for(;E<y;){let A=E<0?0:u[E],N=E<0?0:d[E];b>A&&(A=b,N=L);let V=0,M=0,R=0,Y=0;if(N<=S){let $=N,T=A===0?0:t.charCodeAt(A-1),O=A===0?0:i.get(T),B=!0;for(let W=A;W<a;W++){const j=W,U=t.charCodeAt(W);let q,z;if(Ws(U)?(W++,q=0,z=2):(q=i.get(U),z=W2(U,$,n,s)),j>b&&JH(T,O,U,q)&&(V=j,M=$),$+=z,$>S){j>b?(R=j,Y=$-z):(R=W+1,Y=$),$-M>f&&(V=0),B=!1;break}T=U,O=q}if(B){v>0&&(p[v]=u[u.length-1],m[v]=d[u.length-1],v++);break}}if(V===0){let $=N,T=t.charCodeAt(A),O=i.get(T),B=!1;for(let W=A-1;W>=b;W--){const j=W+1,U=t.charCodeAt(W);if(U===9){B=!0;break}let q,z;if(Uy(U)?(W--,q=0,z=2):(q=i.get(U),z=og(U)?s:1),$<=S){if(R===0&&(R=j,Y=$),$<=S-f)break;if(JH(U,q,T,O)){V=j,M=$;break}}$-=z,T=U,O=q}if(V!==0){const W=f-(Y-M);if(W<=n){const j=t.charCodeAt(R);let U;Ws(j)?U=2:U=W2(j,Y,n,s),W-U<0&&(V=0)}}if(B){E--;continue}}if(V===0&&(V=R,M=Y),V<=b){const $=t.charCodeAt(b);Ws($)?(V=b+2,M=L+2):(V=b+1,M=L+W2($,L,n,s))}for(b=V,p[v]=V,L=M,m[v]=M,v++,S=M+f;E<0||E<y&&d[E]<M;)E++;let X=Math.abs(d[E]-S);for(;E+1<y;){const $=Math.abs(d[E+1]-S);if($>=X)break;X=$,E++}}return v===0?null:(p.length=v,m.length=v,XH=e.breakOffsets,QH=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function vMe(i,e,t,n,r,s,o){const a=tf.applyInjectedText(e,t);let u,d;if(t&&t.length>0?(u=t.map(M=>M.options),d=t.map(M=>M.column-1)):(u=null,d=null),r===-1)return u?new B2(d,u,[a.length],[],0):null;const h=a.length;if(h<=1)return u?new B2(d,u,[a.length],[],0):null;const f=kde(a,n,r,s,o),p=r-f;let m=[],v=[],b=0,L=0,S=0,y=r,E=a.charCodeAt(0),A=i.get(E),N=W2(E,0,n,s),V=1;Ws(E)&&(N+=1,E=a.charCodeAt(1),A=i.get(E),V++);for(let M=V;M<h;M++){const R=M,Y=a.charCodeAt(M);let X,$;Ws(Y)?(M++,X=0,$=2):(X=i.get(Y),$=W2(Y,N,n,s)),JH(E,A,Y,X)&&(L=R,S=N),N+=$,N>y&&((L===0||N-S>p)&&(L=R,S=N-$),m[b]=L,v[b]=S,b++,y=S+p,L=0),E=Y,A=X}return b===0&&(!t||t.length===0)?null:(m[b]=h,v[b]=N,new B2(d,u,m,v,f))}function W2(i,e,t,n){return i===9?t-e%t:og(i)||i<32?n:1}function Fee(i,e){return e-i%e}function JH(i,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function kde(i,e,t,n,r){let s=0;if(r!==0){const o=Ta(i);if(o!==-1){for(let u=0;u<o;u++){const d=i.charCodeAt(u)===9?Fee(s,e):1;s+=d}const a=r===3?2:r===2?1:0;for(let u=0;u<a;u++){const d=Fee(s,e);s+=d}s+n>t&&(s=0)}}return s}var a6;const l6=(a6=window.trustedTypes)===null||a6===void 0?void 0:a6.createPolicy("domLineBreaksComputer",{createHTML:i=>i});class wG{static create(){return new wG}constructor(){}createLineBreaksComputer(e,t,n,r){let s=[],o=[];return{addRequest:(a,u,d)=>{s.push(a),o.push(u)},finalize:()=>bMe(s,e,t,n,r,o)}}}function bMe(i,e,t,n,r,s){var o;function a(R){const Y=s[R];if(Y){const X=tf.applyInjectedText(i[R],Y),$=Y.map(O=>O.options),T=Y.map(O=>O.column-1);return new B2(T,$,[X.length],[],0)}else return null}if(n===-1){const R=[];for(let Y=0,X=i.length;Y<X;Y++)R[Y]=a(Y);return R}const u=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(r===3?2:r===2?1:0)),f=Math.ceil(e.spaceWidth*h),p=document.createElement("div");Aa.applyFontInfoSlow(p,e);const m=kb(1e4),v=[],b=[],L=[],S=[],y=[];for(let R=0;R<i.length;R++){const Y=tf.applyInjectedText(i[R],s[R]);let X=0,$=0,T=u;if(r!==0)if(X=Ta(Y),X===-1)X=0;else{for(let j=0;j<X;j++){const U=Y.charCodeAt(j)===9?t-$%t:1;$+=U}const W=Math.ceil(e.spaceWidth*$);W+e.typicalFullwidthCharacterWidth>u?(X=0,$=0):T=u-W}const O=Y.substr(X),B=CMe(O,$,t,T,m,f);v[R]=X,b[R]=$,L[R]=O,S[R]=B[0],y[R]=B[1]}const E=m.build(),A=(o=l6==null?void 0:l6.createHTML(E))!==null&&o!==void 0?o:E;p.innerHTML=A,p.style.position="absolute",p.style.top="10000",p.style.wordWrap="break-word",document.body.appendChild(p);let N=document.createRange();const V=Array.prototype.slice.call(p.children,0);let M=[];for(let R=0;R<i.length;R++){const Y=V[R],X=wMe(N,Y,L[R],S[R]);if(X===null){M[R]=a(R);continue}const $=v[R],T=b[R]+h,O=y[R],B=[];for(let q=0,z=X.length;q<z;q++)B[q]=O[X[q]];if($!==0)for(let q=0,z=X.length;q<z;q++)X[q]+=$;let W,j;const U=s[R];U?(W=U.map(q=>q.options),j=U.map(q=>q.column-1)):(W=null,j=null),M[R]=new B2(j,W,X,B,T)}return document.body.removeChild(p),M}function CMe(i,e,t,n,r,s){if(s!==0){let p=String(s);r.appendASCIIString('<div style="text-indent: -'),r.appendASCIIString(p),r.appendASCIIString("px; padding-left: "),r.appendASCIIString(p),r.appendASCIIString("px; box-sizing: border-box; width:")}else r.appendASCIIString('<div style="width:');r.appendASCIIString(String(n)),r.appendASCIIString('px;">');const o=i.length;let a=e,u=0,d=[],h=[],f=0<o?i.charCodeAt(0):0;r.appendASCIIString("<span>");for(let p=0;p<o;p++){p!==0&&p%16384===0&&r.appendASCIIString("</span><span>"),d[p]=u,h[p]=a;const m=f;f=p+1<o?i.charCodeAt(p+1):0;let v=1,b=1;switch(m){case 9:v=t-a%t,b=v;for(let L=1;L<=v;L++)L<v?r.write1(160):r.appendASCII(32);break;case 32:f===32?r.write1(160):r.appendASCII(32);break;case 60:r.appendASCIIString("&lt;");break;case 62:r.appendASCIIString("&gt;");break;case 38:r.appendASCIIString("&amp;");break;case 0:r.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.write1(65533);break;default:og(m)&&b++,m<32?r.write1(9216+m):r.write1(m)}u+=v,a+=b}return r.appendASCIIString("</span>"),d[i.length]=u,h[i.length]=a,r.appendASCIIString("</div>"),[d,h]}function wMe(i,e,t,n){if(t.length<=1)return null;const r=Array.prototype.slice.call(e.children,0),s=[];try{e$(i,r,n,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function e$(i,e,t,n,r,s,o,a){if(n===s||(r=r||u6(i,e,t[n],t[n+1]),o=o||u6(i,e,t[s],t[s+1]),Math.abs(r[0].top-o[0].top)<=.1))return;if(n+1===s){a.push(s);return}const u=n+(s-n)/2|0,d=u6(i,e,t[u],t[u+1]);e$(i,e,t,n,r,u,d,a),e$(i,e,t,u,d,s,o,a)}function u6(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var yMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},t1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SMe=0,LMe=class{constructor(e,t,n,r,s){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=r,this.listenersToRemove=s}dispose(){ri(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},GA=class c4 extends Oe{constructor(e,t,n,r,s,o,a,u,d,h){super(),this._onDidDispose=this._register(new Ce),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Ce),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Ce),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Ce),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Ce),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Ce),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new Ce),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new Ce),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Ce),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Ce),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Ce),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Ce),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Bee),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Bee),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Ce),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Ce),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Ce),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Ce),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Ce),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Ce),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Ce),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Ce),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Ce),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Ce),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new Ce),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Ce),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Ce),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Ce),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Ce),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Ce),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Ce),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Ce),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Ce),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const f=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++SMe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(f,h)),this._register(this._configuration.onDidChange(m=>{this._onDidChangeConfiguration.fire(m);const v=this._configuration.options;if(m.hasChanged(130)){const b=v.get(130);this._onDidLayoutChange.fire(b)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=d,this._codeEditorService=s,this._commandService=o,this._themeService=u,this._register(new EMe(this,this._contextKeyService)),this._register(new xMe(this,this._contextKeyService)),this._instantiationService=r.createChild(new KA([cn,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new DMe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=uy.getEditorContributions();for(const m of p){if(this._contributions[m.id]){gn(new Error(`Cannot have two contributions with the same id ${m.id}`));continue}try{const v=this._instantiationService.createInstance(m.ctor,this);this._contributions[m.id]=v}catch(v){gn(v)}}uy.getEditorActions().forEach(m=>{if(this._actions[m.id]){gn(new Error(`Cannot have two actions with the same id ${m.id}`));return}const v=new Dde(m.id,m.label,m.alias,ml(m.precondition),()=>this._instantiationService.invokeFunction(b=>Promise.resolve(m.runEditorCommand(b,this,null))),this._contextKeyService);this._actions[v.id]=v}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Aa(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _M.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const r=e[t];this._contributions[r].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?ni.getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:r?r.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(r)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const r=e.model.validatePosition({lineNumber:t,column:n}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)}getTopForLineNumber(e){return this._modelData?c4._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?c4._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>Q.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return ur.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!Le.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,r){if(!this._modelData)return;if(!Q.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,o,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,r){if(!Le.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Q(e.lineNumber,e.column,e.lineNumber,e.column),t,n,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=yt.isISelection(e),n=Q.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new yt(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,r){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,t,1),n,!1,r)}revealRange(e,t=0,n=!1,r=!0){this._revealRange(e,n?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,r){if(!Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Q.lift(e),t,n,r)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let r=0,s=e.length;r<s;r++)if(!yt.isISelection(e[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const s of t){const o=this._contributions[s];typeof o.saveViewState=="function"&&(e[s]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),r=this._modelData.viewModel.saveState();return{cursorState:n,viewState:r,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const r=t.contributionsState||{},s=Object.keys(this._contributions);for(let a=0,u=s.length;a<u;a++){const d=s[a],h=this._contributions[d];typeof h.restoreViewState=="function"&&h.restoreViewState(r[d])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(this._actions[s])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const r=this.getAction(t);if(r){Promise.resolve(r.run()).then(void 0,gn);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,r,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,r,s,e)}_paste(e,t,n,r,s){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,r,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new Q(o.lineNumber,o.column,a.lineNumber,a.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const r=uy.getEditorCommand(t);return r?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(r.runEditorCommand(s,this,n)).then(void 0,gn)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let r;return n?Array.isArray(n)?r=()=>n:r=n:r=()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Tq(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(130)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,r=n.get(130),s=c4._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Aa.applyFontInfoSlow(e,this._configuration.options.get(43))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.reserveHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new fMe(this._id,this._configuration,e,wG.create(),CG.create(this._configuration.options),o=>rg(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(C("cursors.maximum","The number of cursors has been limited to {0}.",Jy.MAX_CURSOR_COUNT));const a=[];for(let h=0,f=o.selections.length;h<f;h++)a[h]=o.selections[h].getPosition();const u={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(u);const d={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(d);break}}}));const[r,s]=this._createView(n);if(s){this._domElement.appendChild(r.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,u=o.length;a<u;a++){const d=o[a];r.addContentWidget(this._contentWidgets[d])}o=Object.keys(this._overlayWidgets);for(let a=0,u=o.length;a<u;a++){const d=o[a];r.addOverlayWidget(this._overlayWidgets[d])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new LMe(e,n,r,s,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,u)=>{this._paste("keyboard",s,o,a,u)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,u)=>{this._compositionType("keyboard",s,o,a,u)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,u)=>{const d={text:s,pasteOnNewLine:o,multicursorText:a,mode:u};this._commandService.executeCommand("paste",d)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,u)=>{if(a||u){const d={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:u};this._commandService.executeCommand("compositionType",d)}else{const d={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",d)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new G8(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new TOe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};GA=yMe([t1(3,Nn),t1(4,Ti),t1(5,Tr),t1(6,cn),t1(7,Er),t1(8,gs),t1(9,il)],GA);class Bee extends Oe{constructor(){super(),this._onDidChangeToTrue=this._register(new Ce),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Ce),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class EMe extends Oe{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=de.editorSimpleInput.bindTo(t),this._editorFocus=de.focus.bindTo(t),this._textInputFocus=de.textInputFocus.bindTo(t),this._editorTextFocus=de.editorTextFocus.bindTo(t),this._editorTabMovesFocus=de.tabMovesFocus.bindTo(t),this._editorReadonly=de.readOnly.bindTo(t),this._inDiffEditor=de.inDiffEditor.bindTo(t),this._editorColumnSelection=de.columnSelection.bindTo(t),this._hasMultipleSelections=de.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=de.hasNonEmptySelection.bindTo(t),this._canUndo=de.canUndo.bindTo(t),this._canRedo=de.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class xMe extends Oe{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=de.languageId.bindTo(t),this._hasCompletionItemProvider=de.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=de.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=de.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=de.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=de.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=de.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=de.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=de.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=de.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=de.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=de.hasReferenceProvider.bindTo(t),this._hasRenameProvider=de.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=de.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=de.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=de.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=de.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=de.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=de.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=de.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(Ah.onDidChange(n)),this._register(tg.onDidChange(n)),this._register(ip.onDidChange(n)),this._register(kA.onDidChange(n)),this._register(YF.onDidChange(n)),this._register(ZF.onDidChange(n)),this._register(XF.onDidChange(n)),this._register(TA.onDidChange(n)),this._register(Ky.onDidChange(n)),this._register(qc.onDidChange(n)),this._register(KF.onDidChange(n)),this._register(qF.onDidChange(n)),this._register(O2.onDidChange(n)),this._register(Oh.onDidChange(n)),this._register(J1.onDidChange(n)),this._register(Hv.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(Ah.has(e)),this._hasCodeActionsProvider.set(tg.has(e)),this._hasCodeLensProvider.set(ip.has(e)),this._hasDefinitionProvider.set(kA.has(e)),this._hasDeclarationProvider.set(YF.has(e)),this._hasImplementationProvider.set(ZF.has(e)),this._hasTypeDefinitionProvider.set(XF.has(e)),this._hasHoverProvider.set(TA.has(e)),this._hasDocumentHighlightProvider.set(Ky.has(e)),this._hasDocumentSymbolProvider.set(qc.has(e)),this._hasReferenceProvider.set(KF.has(e)),this._hasRenameProvider.set(qF.has(e)),this._hasSignatureHelpProvider.set(J1.has(e)),this._hasInlayHintsProvider.set(Hv.has(e)),this._hasDocumentFormattingProvider.set(O2.has(e)||Oh.has(e)),this._hasDocumentSelectionFormattingProvider.set(Oh.has(e)),this._hasMultipleDocumentFormattingProvider.set(O2.all(e).length+Oh.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Oh.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Tn.walkThroughSnippet)})}}class DMe extends Oe{constructor(e){super(),this._onChange=this._register(new Ce),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Hy(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const IMe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),TMe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function c6(i){return IMe+encodeURIComponent(i.toString())+TMe}const kMe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),NMe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function AMe(i){return kMe+encodeURIComponent(i.toString())+NMe}hr((i,e)=>{const t=i.getColor(hce);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=i.getColor(I2);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${c6(n)}") repeat-x bottom left; }`);const r=i.getColor(YDe);r&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${r}; }`);const s=i.getColor(T8);s&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const o=i.getColor(vp);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${c6(o)}") repeat-x bottom left; }`);const a=i.getColor(ZDe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const u=i.getColor(Rq);u&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${u}; }`);const d=i.getColor(qh);d&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${c6(d)}") repeat-x bottom left; }`);const h=i.getColor(XDe);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const f=i.getColor(JDe);f&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${f}; }`);const p=i.getColor(QDe);p&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${AMe(p)}") no-repeat bottom left; }`);const m=i.getColor(x2e);m&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${m.rgba.a}; }`);const v=i.getColor(E2e);v&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${v}; }`);const b=i.getColor(uM)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${b}}`)});class Ui{constructor(e,t,n){const r=s=>this.emitter.fire(s);this.emitter=new Ce({onFirstListenerAdd:()=>e.addEventListener(t,r,n),onLastListenerRemove:()=>e.removeEventListener(t,r,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function Wee(i){return i.preventDefault(),i.stopPropagation(),i}var jS=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};let OMe=!1;var b3;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(b3||(b3={}));let MMe=4;const RMe=new Ce;let PMe=300;const FMe=new Ce;class yG{constructor(){this.disposables=new Je}get onPointerMove(){return this.disposables.add(new Ui(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Ui(window,"mouseup")).event}dispose(){this.disposables.dispose()}}jS([Is],yG.prototype,"onPointerMove",null);jS([Is],yG.prototype,"onPointerUp",null);class SG{constructor(e){this.el=e,this.disposables=new Je}get onPointerMove(){return this.disposables.add(new Ui(this.el,lr.Change)).event}get onPointerUp(){return this.disposables.add(new Ui(this.el,lr.End)).event}dispose(){this.disposables.dispose()}}jS([Is],SG.prototype,"onPointerMove",null);jS([Is],SG.prototype,"onPointerUp",null);class C3{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}jS([Is],C3.prototype,"onPointerMove",null);jS([Is],C3.prototype,"onPointerUp",null);class Ho extends Oe{constructor(e,t,n){super(),this.hoverDelay=PMe,this.hoverDelayer=this._register(new Np(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Ce),this._onDidStart=this._register(new Ce),this._onDidChange=this._register(new Ce),this._onDidReset=this._register(new Ce),this._onDidEnd=this._register(new Ce),this.orthogonalStartSashDisposables=this._register(new Je),this.orthogonalStartDragHandleDisposables=this._register(new Je),this.orthogonalEndSashDisposables=this._register(new Je),this.orthogonalEndDragHandleDisposables=this._register(new Je),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Be(e,qe(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),qn&&this.el.classList.add("mac");const r=this._register(new Ui(this.el,"mousedown")).event;this._register(r(f=>this.onPointerStart(f,new yG),this));const s=this._register(new Ui(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new Ui(this.el,"mouseenter")).event;this._register(o(()=>Ho.onMouseEnter(this)));const a=this._register(new Ui(this.el,"mouseleave")).event;this._register(a(()=>Ho.onMouseLeave(this))),this._register(Hi.addTarget(this.el));const u=Rt.map(this._register(new Ui(this.el,lr.Start)).event,f=>{var p;return Object.assign(Object.assign({},f),{target:(p=f.initialTarget)!==null&&p!==void 0?p:null})});this._register(u(f=>this.onPointerStart(f,new SG(this.el)),this));const d=this._register(new Ui(this.el,lr.Tap)).event,h=Rt.map(Rt.filter(Rt.debounce(d,(f,p)=>{var m;return{event:p,count:((m=f==null?void 0:f.count)!==null&&m!==void 0?m:0)+1}},250),({count:f})=>f===2),({event:f})=>{var p;return Object.assign(Object.assign({},f),{target:(p=f.initialTarget)!==null&&p!==void 0?p:null})});this._register(h(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=MMe,this._register(RMe.event(f=>{this.size=f,this.layout()}))),this._register(FMe.event(f=>this.hoverDelay=f)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",OMe),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Be(this.el,qe(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Un(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Ui(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Ho.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Ui(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Ho.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Be(this.el,qe(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Un(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Ui(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Ho.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ui(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Ho.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Ni.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const v=this.getOrthogonalSash(e);v&&(n=!0,e.__orthogonalSashEvent=!0,v.onPointerStart(e,new C3(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new C3(t))),!this.state)return;const r=AEe("iframe");for(const v of r)v.style.pointerEvents="none";const s=e.pageX,o=e.pageY,a=e.altKey,u={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(u);const d=uc(this.el),h=()=>{let v="";n?v="all-scroll":this.orientation===1?this.state===1?v="s-resize":this.state===2?v="n-resize":v=qn?"row-resize":"ns-resize":this.state===1?v="e-resize":this.state===2?v="w-resize":v=qn?"col-resize":"ew-resize",d.textContent=`* { cursor: ${v} !important; }`},f=new Je;h(),n||this.onDidEnablementChange.event(h,null,f);const p=v=>{Ni.stop(v,!1);const b={startX:s,currentX:v.pageX,startY:o,currentY:v.pageY,altKey:a};this._onDidChange.fire(b)},m=v=>{Ni.stop(v,!1),this.el.removeChild(d),this.el.classList.remove("active"),this._onDidEnd.fire(),f.dispose();for(const b of r)b.style.pointerEvents="auto"};t.onPointerMove(p,null,f),t.onPointerUp(m,null,f),f.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Ho.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Ho.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Ho.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const LG=gi("IEditorCancelService"),Nde=new Dt("cancellableOperation",!1,C("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));U0(LG,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(r=>{const s=Nde.bindTo(r.get(cn)),o=new Tu;return{key:s,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class BMe extends oa{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(LG).add(e,this))}dispose(){this._unregister(),super.dispose()}}nt(new class extends Po{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Nde})}runEditorCommand(i,e){i.get(LG).cancel(e)}});let Ade=class t${constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?Ju("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof t$))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new t$(e,this.flags))}};class YA extends BMe{constructor(e,t,n,r){super(e,r),this._listener=new Je,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!Q.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!Q.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class EG extends oa{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class E0{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}}return new E0(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const Ode={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Vc.text,TERMINALS:"Terminals"};class WMe{constructor(e){this.data=e}update(){}getData(){return this.data}}const Kg={CurrentDragAndDropData:void 0};class kf extends Oe{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof ic&&this._register(t.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new $y)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Hi.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,wl&&this._register(Ge(e,Ht.DRAG_START,r=>{var s;return(s=r.dataTransfer)===null||s===void 0?void 0:s.setData(Ode.TEXT,this._action.label)}))),this._register(Ge(t,lr.Tap,r=>this.onClick(r,!0))),this._register(Ge(t,Ht.MOUSE_DOWN,r=>{n||Ni.stop(r,!0),this._action.enabled&&r.button===0&&t.classList.add("active")})),qn&&this._register(Ge(t,Ht.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(Ge(t,Ht.CLICK,r=>{Ni.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(Ge(t,Ht.DBLCLICK,r=>{Ni.stop(r,!0)})),[Ht.MOUSE_UP,Ht.MOUSE_OUT].forEach(r=>{this._register(Ge(t,r,s=>{Ni.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Ni.stop(e,!0);const r=Eu(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,r)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class ZA extends kf{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Be(this.element,qe("a.action-label"))),this.label&&(this._action.id===Zc.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(Be(this.element,qe("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var VMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class ug extends Oe{constructor(e,t={}){var n,r,s,o,a,u;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Ce),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Ce({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Ce),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new Ce),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(r=this.options.orientation)!==null&&r!==void 0?r:0,this._triggerKeys={keyDown:(o=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&o!==void 0?o:!1,keys:(u=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&u!==void 0?u:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new $y,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(f=>this._onDidRun.fire(f))),this._register(this._actionRunner.onBeforeRun(f=>this._onBeforeRun.fire(f))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let d,h;switch(this._orientation){case 0:d=[15],h=[17];break;case 1:d=[16],h=[18],this.domNode.className+=" vertical";break}this._register(Ge(this.domNode,Ht.KEY_DOWN,f=>{const p=new yr(f);let m=!0;const v=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;d&&(p.equals(d[0])||p.equals(d[1]))?m=this.focusPrevious():h&&(p.equals(h[0])||p.equals(h[1]))?m=this.focusNext():p.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():p.equals(14)?m=this.focusFirst():p.equals(13)?m=this.focusLast():p.equals(2)&&v instanceof kf&&v.trapsArrowNavigation?m=this.focusNext():this.isTriggerKeyEvent(p)?this._triggerKeys.keyDown?this.doTrigger(p):this.triggerKeyDown=!0:m=!1,m&&(p.preventDefault(),p.stopPropagation())})),this._register(Ge(this.domNode,Ht.KEY_UP,f=>{const p=new yr(f);this.isTriggerKeyEvent(p)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(p)),p.preventDefault(),p.stopPropagation()):(p.equals(2)||p.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Hy(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(oy()===this.domNode||!mp(oy(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof kf&&n.isEnabled());t instanceof kf&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof kf&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(mp(oy(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let r=Sb(t.index)?t.index:null;n.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(Ge(o,Ht.CONTEXT_MENU,u=>{Ni.stop(u,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s)),a||(a=new ZA(this.context,s,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof kf&&this.viewItems.length===0&&a.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(s.id)):(this.actionsList.insertBefore(o,this.actionsList.children[r]),this.viewItems.splice(r,0,a),this._actionIds.splice(r,0,s.id),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){ri(this.viewItems),this.viewItems=[],this._actionIds=[],Hs(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const r=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])===null||r===void 0||r.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let o=!0;TF(s.focus)||(o=!1),this.options.focusOnlyEnabledItems&&TF(s.isEnabled)&&!s.isEnabled()&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof kf){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return VMe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){ri(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const HMe={IconContribution:"base.contributions.icons"};class $Me{constructor(){this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:C("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:C("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Ka.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,r){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const u=this.iconReferenceSchema.enum.indexOf(e);u!==-1&&(this.iconReferenceSchema.enumDescriptions[u]=n),this._onDidChange.fire()}return s}let o={id:e,description:n,defaults:t,deprecationMessage:r};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return r&&(a.deprecationMessage=r),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;pr.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of r.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${pr.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of r.filter(o=>!pr.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}const Rb=new $Me;Xr.add(HMe.IconContribution,Rb);function co(i,e,t,n){return Rb.registerIcon(i,e,t,n)}function zMe(){return Rb}function UMe(){for(const i of IF.all)Rb.registerIcon(i.id,i.definition,i.description);IF.onDidRegister(i=>Rb.registerIcon(i.id,i.definition,i.description))}UMe();const Mde="vscode://schemas/icons";let Rde=Xr.as(E8.JSONContribution);Rde.registerSchema(Mde,Rb.getIconSchema());const Vee=new er(()=>Rde.notifySchemaChanged(Mde),200);Rb.onDidChange(()=>{Vee.isScheduled()||Vee.schedule()});const Pde=co("widget-close",_e.close,C("widgetClose","Icon for the close action in widgets."));var jMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},KMe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},d6;const qR=3;class NN{constructor(e,t,n,r){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=r}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class h6{constructor(e){this.entries=e}}const GMe=co("diff-review-insert",_e.add,C("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),YMe=co("diff-review-remove",_e.remove,C("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),ZMe=co("diff-review-close",_e.close,C("diffReviewCloseIcon","Icon for 'Close' in diff review."));let w3=class f1 extends Oe{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=ii(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=ii(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new ug(this.actionBarContainer.domNode)),this._actionBar.push(new ic("diffreview.close",C("label.close","Close"),"close-diff-review "+pr.asClassName(ZMe),!0,()=>qMe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=ii(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=ii(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new pM(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(eo(this.domNode.domNode,"click",n=>{n.preventDefault();let r=lue(n.target,"diff-review-row");r&&this._goToRow(r)})),this._register(eo(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let r=0,s=this._diffs.length;r<s;r++)if(this._diffs[r]===this._currentDiff){n=r;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Le(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let r=0,s=this._diffs.length;r<s;r++)if(this._diffs[r]===this._currentDiff){n=r;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Le(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new Le(e,1)),this._diffEditor.revealPosition(new Le(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:f1._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let r=[],s=0;for(let d=0,h=e.length;d<h;d++){const f=e[d],p=f.originalStartLineNumber,m=f.originalEndLineNumber,v=f.modifiedStartLineNumber,b=f.modifiedEndLineNumber;let L=[],S=0;{const y=m===0?p:p-1,E=b===0?v:v-1;let A=1,N=1;if(d>0){const R=e[d-1];R.originalEndLineNumber===0?A=R.originalStartLineNumber+1:A=R.originalEndLineNumber+1,R.modifiedEndLineNumber===0?N=R.modifiedStartLineNumber+1:N=R.modifiedEndLineNumber+1}let V=y-qR+1,M=E-qR+1;if(V<A){const R=A-V;V=V+R,M=M+R}if(M<N){const R=N-M;V=V+R,M=M+R}L[S++]=new NN(V,y,M,E)}m!==0&&(L[S++]=new NN(p,m,0,0)),b!==0&&(L[S++]=new NN(0,0,v,b));{const y=m===0?p+1:m+1,E=b===0?v+1:b+1;let A=t,N=n;if(d+1<h){const R=e[d+1];R.originalEndLineNumber===0?A=R.originalStartLineNumber:A=R.originalStartLineNumber-1,R.modifiedEndLineNumber===0?N=R.modifiedStartLineNumber:N=R.modifiedStartLineNumber-1}let V=y+qR-1,M=E+qR-1;if(V>A){const R=A-V;V=V+R,M=M+R}if(M>N){const R=N-M;V=V+R,M=M+R}L[S++]=new NN(y,V,E,M)}r[s++]=new h6(L)}let o=r[0].entries,a=[],u=0;for(let d=1,h=r.length;d<h;d++){const f=r[d].entries,p=o[o.length-1],m=f[0];if(p.getType()===0&&m.getType()===0&&m.originalLineStart<=p.originalLineEnd){o[o.length-1]=new NN(p.originalLineStart,m.originalLineEnd,p.modifiedLineStart,m.modifiedLineEnd),o=o.concat(f.slice(1));continue}a[u++]=new h6(o),o=f}return a[u++]=new h6(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,r=this._diffs.length;n<r;n++){const s=this._diffs[n].entries,o=s[s.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),r=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),o=r.getOptions();if(!this._isVisible||!n||!r){Hs(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const u=this._diffs[a].entries;let d=document.createElement("div");d.className="diff-review-table",d.setAttribute("role","list"),d.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Aa.applyFontInfoSlow(d,t.get(43));let h=0,f=0,p=0,m=0;for(let M=0,R=u.length;M<R;M++){const Y=u[M],X=Y.originalLineStart,$=Y.originalLineEnd,T=Y.modifiedLineStart,O=Y.modifiedLineEnd;X!==0&&(h===0||X<h)&&(h=X),$!==0&&(f===0||$>f)&&(f=$),T!==0&&(p===0||T<p)&&(p=T),O!==0&&(m===0||O>m)&&(m=O)}let v=document.createElement("div");v.className="diff-review-row";let b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const L=f-h+1,S=m-p+1;b.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${L} +${p},${S} @@`)),v.setAttribute("data-line",String(p));const y=M=>M===0?C("no_lines_changed","no lines changed"):M===1?C("one_line_changed","1 line changed"):C("more_lines_changed","{0} lines changed",M),E=y(L),A=y(S);v.setAttribute("aria-label",C({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,E,p,A)),v.appendChild(b),v.setAttribute("role","listitem"),d.appendChild(v);const N=t.get(58);let V=p;for(let M=0,R=u.length;M<R;M++){const Y=u[M];f1._renderSection(d,Y,V,N,this._width,e,n,s,t,r,o,this._modeService.languageIdCodec),Y.modifiedLineStart!==0&&(V=Y.modifiedLineEnd)}Hs(this._content.domNode),this._content.domNode.appendChild(d),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,r,s,o,a,u,d,h,f,p){const m=t.getType();let v="diff-review-row",b="";const L="diff-review-spacer";let S=null;switch(m){case 1:v="diff-review-row line-insert",b=" char-insert",S=GMe;break;case 2:v="diff-review-row line-delete",b=" char-delete",S=YMe;break}const y=t.originalLineStart,E=t.originalLineEnd,A=t.modifiedLineStart,N=t.modifiedLineEnd,V=Math.max(N-A,E-y),M=o.get(130),R=M.glyphMarginWidth+M.lineNumbersWidth,Y=d.get(130),X=10+Y.glyphMarginWidth+Y.lineNumbersWidth;for(let $=0;$<=V;$++){const T=y===0?0:y+$,O=A===0?0:A+$,B=document.createElement("div");B.style.minWidth=s+"px",B.className=v,B.setAttribute("role","listitem"),O!==0&&(n=O),B.setAttribute("data-line",String(n));let W=document.createElement("div");W.className="diff-review-cell",W.style.height=`${r}px`,B.appendChild(W);const j=document.createElement("span");j.style.width=R+"px",j.style.minWidth=R+"px",j.className="diff-review-line-number"+b,T!==0?j.appendChild(document.createTextNode(String(T))):j.innerText="",W.appendChild(j);const U=document.createElement("span");U.style.width=X+"px",U.style.minWidth=X+"px",U.style.paddingRight="10px",U.className="diff-review-line-number"+b,O!==0?U.appendChild(document.createTextNode(String(O))):U.innerText="",W.appendChild(U);const q=document.createElement("span");if(q.className=L,S){const K=document.createElement("span");K.className=pr.asClassName(S),K.innerText="",q.appendChild(K)}else q.innerText="";W.appendChild(q);let z;if(O!==0){let K=this._renderLine(h,d,f.tabSize,O,p);f1._ttPolicy&&(K=f1._ttPolicy.createHTML(K)),W.insertAdjacentHTML("beforeend",K),z=h.getLineContent(O)}else{let K=this._renderLine(a,o,u.tabSize,T,p);f1._ttPolicy&&(K=f1._ttPolicy.createHTML(K)),W.insertAdjacentHTML("beforeend",K),z=a.getLineContent(T)}z.length===0&&(z=C("blankLine","blank"));let k="";switch(m){case 0:T===O?k=C({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",z,T):k=C("equalLine","{0} original line {1} modified line {2}",z,T,O);break;case 1:k=C("insertLine","+ {0} modified line {1}",z,O);break;case 2:k=C("deleteLine","- {0} original line {1}",z,T);break}B.setAttribute("aria-label",k),e.appendChild(B)}}static _renderLine(e,t,n,r,s){const o=e.getLineContent(r),a=t.get(43),u=Js.createEmpty(o,s),d=Pu.isBasicASCII(o,e.mightContainNonBasicASCII()),h=Pu.containsRTL(o,d,e.mightContainRTL());return R8(new LC(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,d,h,0,u,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==xu.OFF,null)).html}};w3._ttPolicy=(d6=window.trustedTypes)===null||d6===void 0?void 0:d6.createPolicy("diffReview",{createHTML:i=>i});w3=jMe([KMe(1,Fo)],w3);hr((i,e)=>{const t=i.getColor(sde);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=i.getColor(VS);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class XMe extends Et{constructor(){super({id:"editor.action.diffReview.next",label:C("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:_t.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Fde(e);n&&n.diffReviewNext()}}class QMe extends Et{constructor(){super({id:"editor.action.diffReview.prev",label:C("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:_t.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Fde(e);n&&n.diffReviewPrev()}}function Fde(i){const e=i.get(Ti),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let r=0,s=t.length;r<s;r++){const o=t[r];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}it(XMe);it(QMe);const JMe="editorWorkerService",Vu=gi(JMe),Hp=gi("contextViewService"),j0=gi("contextMenuService");var f6=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class eRe extends Oe{constructor(e,t,n,r,s,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=r,this._contextMenuService=s,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=_e.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),u=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const d=[],h=r.modifiedEndLineNumber===0;d.push(new ic("diff.clipboard.copyDeletedContent",h?r.originalEndLineNumber>r.modifiedStartLineNumber?C("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):C("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.originalEndLineNumber>r.modifiedStartLineNumber?C("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):C("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>f6(this,void 0,void 0,function*(){const b=new Q(r.originalStartLineNumber,1,r.originalEndLineNumber+1,1),L=r.originalModel.getValueInRange(b);yield this._clipboardService.writeText(L)})));let f=0,p;r.originalEndLineNumber>r.modifiedStartLineNumber&&(p=new ic("diff.clipboard.copyDeletedLineContent",h?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber),void 0,!0,()=>f6(this,void 0,void 0,function*(){const b=r.originalModel.getLineContent(r.originalStartLineNumber+f);if(b===""){const L=r.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(L===0?`
`:`\r
`)}else yield this._clipboardService.writeText(b)})),d.push(p)),n.getOption(80)||d.push(new ic("diff.inline.revertChange",C("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>f6(this,void 0,void 0,function*(){const b=new Q(r.originalStartLineNumber,1,r.originalEndLineNumber,r.originalModel.getLineMaxColumn(r.originalEndLineNumber)),L=r.originalModel.getValueInRange(b);if(r.modifiedEndLineNumber===0){const S=n.getModel().getLineMaxColumn(r.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new Q(r.modifiedStartLineNumber,S,r.modifiedStartLineNumber,S),text:u+L}])}else{const S=n.getModel().getLineMaxColumn(r.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new Q(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,S),text:L}])}})));const v=(b,L)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:b,y:L}),getActions:()=>(p&&(p.label=h?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber+f):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber+f)),d),autoSelectFirstItem:!0})};this._register(eo(this._diffActions,"mousedown",b=>{const{top:L,height:S}=Uo(this._diffActions);let y=Math.floor(a/3);b.preventDefault(),v(b.posx,L+S+y)})),this._register(n.onMouseMove(b=>{b.target.type===8||b.target.type===5?b.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,f=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(b=>{b.event.rightButton&&(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._viewZoneId&&(b.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a),v(b.event.posx,b.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:r}=Uo(e),s=t-r,o=Math.floor(s/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let u=0;for(let d=0;d<this.diff.viewLineCounts.length;d++)if(u+=this.diff.viewLineCounts[d],o<u)return d}return o}}const K0=gi("clipboardService");class xC{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}xC.None=Object.freeze({report(){}});const $p=gi("editorProgressService");var tRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Fg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},g6;class Hee{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,r){const s=r?E0.capture(e):null;e.changeViewZones(o=>{var a;for(const u of this._zones)o.removeZone(u);for(const u of this._inlineDiffMargins)u.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let u=0,d=n.zones.length;u<d;u++){const h=n.zones[u];h.suppressMouseDown=!0;const f=o.addZone(h);this._zones.push(f),this._zonesMap[String(f)]=!0,n.zones[u].diff&&h.marginDomNode&&(h.suppressMouseDown=!1,((a=n.zones[u].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new eRe(f,h.marginDomNode,e,n.zones[u].diff,this._contextMenuService,this._clipboardService)))}}),s&&s.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let nRe=0;const iRe=co("diff-insert",_e.add,C("diffInsertIcon","Line decoration for inserts in the diff editor.")),Bde=co("diff-remove",_e.remove,C("diffRemoveIcon","Line decoration for removals in the diff editor.")),$ee=(g6=window.trustedTypes)===null||g6===void 0?void 0:g6.createPolicy("diffEditorWidget",{createHTML:i=>i});let x0=class Bo extends Oe{constructor(e,t,n,r,s,o,a,u,d,h,f,p){super(),this._editorProgressService=p,this._onDidDispose=this._register(new Ce),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new Ce),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new Ce),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=u,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new KA([cn,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=d,this._notificationService=h,this._id=++nRe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=jee(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new er(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Bo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=ii(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(eo(this._overviewDomElement,"mousedown",v=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(v)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new Hee(f,r),this._modifiedEditorState=new Hee(f,r),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new que(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(w3,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new sp(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Uee(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(d.onDidColorThemeChange(v=>{this._strategy&&this._strategy.applyColors(v)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Bo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const m=uy.getDiffEditorContributions();for(const v of m)try{this._register(a.createInstance(v.ctor,this))}catch(b){gn(b)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=PF(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(43)&&this._updateDecorationsRunner.schedule(),s.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const r=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bo.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(43)&&this._updateDecorationsRunner.schedule(),s.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const r=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bo.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createInnerEditor(e,t,n,r){return e.createInstance(GA,t,n,r)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _M.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=jee(e,this._options),n=aRe(this._options,t);this._options=t;const r=n.ignoreTrimWhitespace||n.renderIndicators,s=this._isVisible&&(n.maxComputationTime||n.maxFileSize);r?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new sp(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Uee(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Bo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,r=!0){this._modifiedEditor.revealRange(e,t,n,r)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=Bo.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Bo.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Bo.ONE_OVERVIEW_WIDTH,right:n+Bo.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Bo.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Bo.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,r=this._options.maxFileSize*1024*1024,s=o=>{const a=o.getValueLength();return r===0||a<=r};if(!s(e)||!s(t)){(!Bo._equals(e.uri,this._lastOriginalWarning)||!Bo._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(C("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),r=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,r.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,r.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=af.revealHorizontalRightPadding.defaultValue+Bo.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),r=this._strategy.layout();this._originalDomNode.style.width=r+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-r+"px",this._modifiedDomNode.style.left=r+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=Bo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Bo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Bo.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:r,height:t-n}),this._modifiedEditor.layout({width:e-r-(this._options.renderOverviewRuler?Bo.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),r=Math.max(0,e.height),s=Math.max(0,r-2*0),o=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*o)),u=Math.floor(t*o);return{height:a,top:u}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let r=0,s=n.length-1;for(;r<s;){const o=Math.floor((r+s)/2),a=t(n[o]),u=o+1<=s?t(n[o+1]):1073741824;e<a?s=o-1:e>=u?r=o+1:(r=o,s=o)}return n[r]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,u=>u.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?r+Math.min(a,o):r+o-s+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,u=>u.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-r;return a<=o?n+Math.min(a,s):n+s-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};x0.ONE_OVERVIEW_WIDTH=15;x0.ENTIRE_DIFF_OVERVIEW_WIDTH=30;x0.UPDATE_DIFF_DECORATIONS_DELAY=200;x0=tRe([Fg(3,K0),Fg(4,Vu),Fg(5,cn),Fg(6,Nn),Fg(7,Ti),Fg(8,Er),Fg(9,gs),Fg(10,j0),Fg(11,$p)],x0);class Wde extends Oe{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(gce)||OH).transparent(2),n=(e.getColor(pce)||MH).transparent(2),r=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,r}getEditorsDiffDecorations(e,t,n,r,s){s=s.sort((d,h)=>d.afterLineNumber-h.afterLineNumber),r=r.sort((d,h)=>d.afterLineNumber-h.afterLineNumber);const o=this._getViewZones(e,r,s,n),a=this._getOriginalEditorDecorations(e,t,n),u=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:u.decorations,overviewZones:u.overviewZones,zones:o.modified}}}}class zee{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class W1{constructor(e,t,n,r,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=r,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const r=e.getModel(),s=e._getViewModel();if(r&&s){const o=XA(r,s,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(131).wrappingColumn!==-1,r=this._modifiedEditor.getOption(131).wrappingColumn!==-1,s=n||r,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,u=this._modifiedEditor._getViewModel().coordinatesConverter,d={original:[],modified:[]};let h=0,f=0,p=0,m=0,v=0,b=0;const L=(V,M)=>V.afterLineNumber-M.afterLineNumber,S=(V,M)=>{if(M.domNode===null&&V.length>0){const R=V[V.length-1];if(R.afterLineNumber===M.afterLineNumber&&R.domNode===null){R.heightInLines+=M.heightInLines;return}}V.push(M)},y=new zee(this._modifiedForeignVZ),E=new zee(this._originalForeignVZ);let A=1,N=1;for(let V=0,M=this._lineChanges.length;V<=M;V++){const R=V<M?this._lineChanges[V]:null;R!==null?(p=R.originalStartLineNumber+(R.originalEndLineNumber>0?-1:0),m=R.modifiedStartLineNumber+(R.modifiedEndLineNumber>0?-1:0),f=R.originalEndLineNumber>0?W1._getViewLineCount(this._originalEditor,R.originalStartLineNumber,R.originalEndLineNumber):0,h=R.modifiedEndLineNumber>0?W1._getViewLineCount(this._modifiedEditor,R.modifiedStartLineNumber,R.modifiedEndLineNumber):0,v=Math.max(R.originalStartLineNumber,R.originalEndLineNumber),b=Math.max(R.modifiedStartLineNumber,R.modifiedEndLineNumber)):(p+=1e7+f,m+=1e7+h,v=p,b=m);let Y=[],X=[];if(s){let O;R?R.originalEndLineNumber>0?O=R.originalStartLineNumber-A:O=R.modifiedStartLineNumber-N:O=o.getLineCount()-A;for(let B=0;B<O;B++){const W=A+B,j=N+B,U=a.getModelLineViewLineCount(W),q=u.getModelLineViewLineCount(j);U<q?Y.push({afterLineNumber:W,heightInLines:q-U,domNode:null,marginDomNode:null}):U>q&&X.push({afterLineNumber:j,heightInLines:U-q,domNode:null,marginDomNode:null})}R&&(A=(R.originalEndLineNumber>0?R.originalEndLineNumber:R.originalStartLineNumber)+1,N=(R.modifiedEndLineNumber>0?R.modifiedEndLineNumber:R.modifiedStartLineNumber)+1)}for(;y.current&&y.current.afterLineNumber<=b;){let O;y.current.afterLineNumber<=m?O=p-m+y.current.afterLineNumber:O=v;let B=null;R&&R.modifiedStartLineNumber<=y.current.afterLineNumber&&y.current.afterLineNumber<=R.modifiedEndLineNumber&&(B=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),Y.push({afterLineNumber:O,heightInLines:y.current.height/t,domNode:null,marginDomNode:B}),y.advance()}for(;E.current&&E.current.afterLineNumber<=v;){let O;E.current.afterLineNumber<=p?O=m-p+E.current.afterLineNumber:O=b,X.push({afterLineNumber:O,heightInLines:E.current.height/e,domNode:null}),E.advance()}if(R!==null&&Cy(R)){const O=this._produceOriginalFromDiff(R,f,h);O&&Y.push(O)}if(R!==null&&wy(R)){const O=this._produceModifiedFromDiff(R,f,h);O&&X.push(O)}let $=0,T=0;for(Y=Y.sort(L),X=X.sort(L);$<Y.length&&T<X.length;){const O=Y[$],B=X[T],W=O.afterLineNumber-p,j=B.afterLineNumber-m;W<j?(S(d.original,O),$++):j<W?(S(d.modified,B),T++):O.shouldNotShrink?(S(d.original,O),$++):B.shouldNotShrink?(S(d.modified,B),T++):O.heightInLines>=B.heightInLines?(O.heightInLines-=B.heightInLines,T++):(B.heightInLines-=O.heightInLines,$++)}for(;$<Y.length;)S(d.original,Y[$]),$++;for(;T<X.length;)S(d.modified,X[T]),T++}return{original:W1._ensureDomNodes(d.original),modified:W1._ensureDomNodes(d.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Vde()),t))}}function ep(i,e,t,n,r){return{range:new Q(i,e,t,n),options:r}}const $a={charDelete:En.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:En.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:En.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:En.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:En.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:En.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+pr.asClassName(iRe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:En.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:En.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+pr.asClassName(Bde),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:En.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class sp extends Wde{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Ho(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?x0.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let r=Math.floor((e||.5)*n);const s=Math.floor(.5*n);return r=this._disableSash?s:r||s,n>sp.MINIMUM_EDITOR_WIDTH*2?(r<sp.MINIMUM_EDITOR_WIDTH&&(r=sp.MINIMUM_EDITOR_WIDTH),r>n-sp.MINIMUM_EDITOR_WIDTH&&(r=n-sp.MINIMUM_EDITOR_WIDTH)):r=s,this._sashPosition!==r&&(this._sashPosition=r,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?x0.ENTIRE_DIFF_OVERVIEW_WIDTH:0),r=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=r/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const r=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new rRe(e,t,n,r,s).getViewZones()}_getOriginalEditorDecorations(e,t,n){const r=this._dataSource.getOriginalEditor(),s=String(this._removeColor),o={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(wy(d)){o.decorations.push({range:new Q(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:n?$a.lineDeleteWithSign:$a.lineDelete}),(!Cy(d)||!d.charChanges)&&o.decorations.push(ep(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,$a.charDeleteWholeLine));const h=XA(a,u,d.originalStartLineNumber,d.originalEndLineNumber);if(o.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,s)),d.charChanges){for(const f of d.charChanges)if(wy(f))if(t)for(let p=f.originalStartLineNumber;p<=f.originalEndLineNumber;p++){let m,v;p===f.originalStartLineNumber?m=f.originalStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.originalEndLineNumber?v=f.originalEndColumn:v=a.getLineLastNonWhitespaceColumn(p),o.decorations.push(ep(p,m,p,v,$a.charDelete))}else o.decorations.push(ep(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn,$a.charDelete))}}return o}_getModifiedEditorDecorations(e,t,n){const r=this._dataSource.getModifiedEditor(),s=String(this._insertColor),o={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(Cy(d)){o.decorations.push({range:new Q(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:n?$a.lineInsertWithSign:$a.lineInsert}),(!wy(d)||!d.charChanges)&&o.decorations.push(ep(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,$a.charInsertWholeLine));const h=XA(a,u,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(o.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,s)),d.charChanges){for(const f of d.charChanges)if(Cy(f))if(t)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let m,v;p===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=a.getLineLastNonWhitespaceColumn(p),o.decorations.push(ep(p,m,p,v,$a.charInsert))}else o.decorations.push(ep(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,$a.charInsert))}}return o}}sp.MINIMUM_EDITOR_WIDTH=100;class rRe extends W1{constructor(e,t,n,r,s){super(e,t,n,r,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class Uee extends Wde{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,r){const s=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new sRe(e,t,n,s,o,r).getViewZones()}_getOriginalEditorDecorations(e,t,n){const r=String(this._removeColor),s={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),u=o._getViewModel();for(const d of e)if(wy(d)){s.decorations.push({range:new Q(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:$a.lineDeleteMargin});const h=XA(a,u,d.originalStartLineNumber,d.originalEndLineNumber);s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,r))}return s}_getModifiedEditorDecorations(e,t,n){const r=this._dataSource.getModifiedEditor(),s=String(this._insertColor),o={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(Cy(d)){o.decorations.push({range:new Q(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:n?$a.lineInsertWithSign:$a.lineInsert});const h=XA(a,u,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(o.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,s)),d.charChanges){for(const f of d.charChanges)if(Cy(f))if(t)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let m,v;p===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=a.getLineLastNonWhitespaceColumn(p),o.decorations.push(ep(p,m,p,v,$a.charInsert))}else o.decorations.push(ep(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,$a.charInsert))}else o.decorations.push(ep(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,$a.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class sRe extends W1{constructor(e,t,n,r,s,o){super(e,t,n,r,s),this._originalModel=r.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const r=document.createElement("div");return r.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:r}}_produceModifiedFromDiff(e,t,n){const r=document.createElement("div");r.className=`view-lines line-delete ${rb}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:r,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,r=t.get(43),s=t.get(29),o=r.typicalHalfwidthCharacterWidth,a=t.get(92),u=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),h=t.get(58),p=t.get(130).decorationsWidth,m=t.get(104),v=t.get(87),b=t.get(82),L=t.get(44),S=this._lineBreaksComputer.finalize();let y=0;for(let E=0;E<this._pendingLineChange.length;E++){const A=this._pendingLineChange[E],N=this._pendingViewZones[E],V=N.domNode;Aa.applyFontInfoSlow(V,r);const M=N.marginDomNode;Aa.applyFontInfoSlow(M,r);const R=[];if(A.charChanges)for(const j of A.charChanges)wy(j)&&R.push(new R2(new Q(j.originalStartLineNumber,j.originalStartColumn,j.originalEndLineNumber,j.originalEndColumn),"char-delete",0));const Y=R.length>0,X=kb(1e4);let $=0,T=0,O=null;for(let j=A.originalStartLineNumber;j<=A.originalEndLineNumber;j++){const U=j-A.originalStartLineNumber,q=this._originalModel.getLineTokens(j),z=q.getLineContent(),k=S[y++],K=ku.filter(R,j,1,z.length+1);if(k){let fe=0;for(const be of k.breakOffsets){const De=q.sliceAndInflate(fe,be,0),Ve=z.substring(fe,be);$=Math.max($,this._renderOriginalLine(T++,Ve,De,ku.extractWrapped(K,fe,be),Y,u,d,r,s,h,p,m,v,b,L,n,X,M)),fe=be}for(O||(O=[]);O.length<U;)O[O.length]=1;O[U]=k.breakOffsets.length,N.heightInLines+=k.breakOffsets.length-1;const ne=document.createElement("div");ne.className="line-delete",e.original.push({afterLineNumber:j,afterColumn:0,heightInLines:k.breakOffsets.length-1,domNode:Vde(),marginDomNode:ne})}else $=Math.max($,this._renderOriginalLine(T++,z,q,K,Y,u,d,r,s,h,p,m,v,b,L,n,X,M))}$+=a;const B=X.build(),W=$ee?$ee.createHTML(B):B;if(V.innerHTML=W,N.minWidthInPx=$*o,O){const j=A.originalEndLineNumber-A.originalStartLineNumber;for(;O.length<=j;)O[O.length]=1}N.diff.viewLineCounts=O}e.original.sort((E,A)=>E.afterLineNumber-A.afterLineNumber)}_renderOriginalLine(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b,L,S,y){S.appendASCIIString('<div class="view-line'),s||S.appendASCIIString(" char-delete"),S.appendASCIIString('" style="top:'),S.appendASCIIString(String(e*h)),S.appendASCIIString('px;width:1000000px;">');const E=Pu.isBasicASCII(t,o),A=Pu.containsRTL(t,E,a),N=M8(new LC(u.isMonospace&&!d,u.canUseHalfwidthRightwardsArrow,t,!1,E,A,0,n,r,L,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,p,m,v,b!==xu.OFF,null),S);if(S.appendASCIIString("</div>"),this._renderIndicators){const V=document.createElement("div");V.className=`delete-sign ${pr.asClassName(Bde)}`,V.setAttribute("style",`position:absolute;top:${e*h}px;width:${f}px;height:${h}px;right:0;`),y.appendChild(V)}return N.characterMapping.getAbsoluteOffset(N.characterMapping.length)}}function oRe(i,e){return ja(i,e,["off","on","inherit"])}function Cy(i){return i.modifiedEndLineNumber>0}function wy(i){return i.originalEndLineNumber>0}function Vde(){const i=document.createElement("div");return i.className="diagonal-fill",i}function XA(i,e,t,n){const r=i.getLineCount();return t=Math.min(r,Math.max(1,t)),n=Math.min(r,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new Q(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function jee(i,e){return{enableSplitViewResizing:Zt(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Zt(i.renderSideBySide,e.renderSideBySide),maxComputationTime:xH(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:xH(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Zt(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Zt(i.renderIndicators,e.renderIndicators),originalEditable:Zt(i.originalEditable,e.originalEditable),diffCodeLens:Zt(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Zt(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:oRe(i.diffWordWrap,e.diffWordWrap)}}function aRe(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}hr((i,e)=>{const t=i.getColor(gce);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=i.getColor(pce);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const r=i.getColor(LIe);r&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${i.type==="hc"?"dashed":"solid"} ${r}; }`);const s=i.getColor(EIe);s&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${i.type==="hc"?"dashed":"solid"} ${s}; }`);const o=i.getColor(VS);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=i.getColor(xIe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const u=i.getColor(hy);u&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${u};
			}
		`);const d=i.getColor(fy);d&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${d};
			}
		`);const h=i.getColor(gy);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const f=i.getColor(DIe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${f} 12.5%,
			#0000 12.5%, #0000 50%,
			${f} 50%, ${f} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});function cg(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===_M.ICodeEditor:!1}function Hde(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===_M.IDiffEditor:!1}function $de(i){return cg(i)?i:Hde(i)?i.getModifiedEditor():null}const xG=gi("IWorkspaceEditService");function lRe(i){return Ga(i)&&(!!i.newUri||!!i.oldUri)}function uRe(i){return Ga(i)&&rn.isUri(i.resource)&&Ga(i.edit)}class X8{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(uRe(t))return new zde(t.resource,t.edit,t.modelVersionId,t.metadata);if(lRe(t))return new cRe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class zde extends X8{constructor(e,t,n,r){super(r),this.resource=e,this.textEdit=t,this.versionId=n}}class cRe extends X8{constructor(e,t,n,r){super(r),this.oldResource=e,this.newResource=t,this.options=n}}class jr{static insert(e,t){return{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Ku{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?ANe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Xg(this.contents),n=Xg(this.overrides),r=[...this.keys];for(const s of e){this.mergeContents(t,s.contents);for(const o of s.overrides){const[a]=n.filter(u=>rc(u.identifiers,o.identifiers));a?(this.mergeContents(a.contents,o.contents),a.keys.push(...o.keys),a.keys=Eb(a.keys)):n.push(Xg(o))}for(const o of s.keys)r.indexOf(o)===-1&&r.push(o)}return new Ku(t,r,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const r of Eb([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[r],o=t[r];o&&(typeof s=="object"&&typeof o=="object"?(s=Xg(s),this.mergeContents(s,o)):s=o),n[r]=s}return new Ku(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Ga(e[n])&&Ga(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Xg(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Mxe(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const r=s=>{s&&(n?this.mergeContents(n,s):n=Xg(s))};for(const s of this.overrides)rc(s.identifiers,[e])?t=s.contents:s.identifiers.includes(e)&&r(s.contents);return r(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),iG(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&NNe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class dRe extends Ku{constructor(e={}){const t=Xr.as(yC.Configuration).getConfigurationProperties(),n=Object.keys(t),r=Object.create(null),s=[];for(const o in t){const a=e[o],u=a!==void 0?a:t[o].default;iG(r,o,u,d=>console.error(`Conflict in default settings: ${d}`))}for(const o of Object.keys(r))EA.test(o)&&s.push({identifiers:Yue(o),keys:Object.keys(r[o]),contents:Xce(r[o],a=>console.error(`Conflict in default settings file: ${a}`))});super(r,n,s)}}class Q8{constructor(e,t,n=new Ku,r=new Ku,s=new na,o=new Ku,a=new na,u=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=r,this._folderConfigurations=s,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new na,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=new Ku,this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:r,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),s=e.folders.reduce((o,a)=>(o.set(rn.revive(a[0]),this.parseConfigurationModel(a[1])),o),new na);return new Q8(t,n,new Ku,r,s,new Ku,new na,!1)}static parseConfigurationModel(e){return new Ku(e.contents,e.keys,e.overrides).freeze()}}class hRe{constructor(e,t,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=r,this._previousConfiguration=void 0;const s=new Set;e.keys.forEach(a=>s.add(a)),e.overrides.forEach(([,a])=>a.forEach(u=>s.add(u))),this.affectedKeys=[...s.values()];const o=new Ku;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Q8.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const r=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,s=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Qc(r,s)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=Xce({[t]:!0},()=>{}),r;for(;typeof n=="object"&&(r=Object.keys(n)[0]);){if(e=e[r],!e)return!1;n=n[r]}return!0}}const fRe=/^(cursor|delete)/;class gRe extends Oe{constructor(e,t,n,r,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=r,this._logService=s,this._onDidUpdateKeybindings=this._register(new Ce),this._currentChord=null,this._currentChordChecker=new oM,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Vw.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ma,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Rt.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[r]=n.getDispatchParts();if(r===null)return null;const s=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,o,r)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(C("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[r]=n.getSingleModifierDispatchParts();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Vw.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Vw.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getParts();return this._ignoreSingleModifiers=new Vw(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let r=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let s=null,o=null;if(n){const[h]=e.getSingleModifierDispatchParts();s=h,o=h}else[s]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;const a=this._contextKeyService.getContext(t),u=e.getLabel(),d=this._getResolver().resolve(a,o,s);return this._logService.trace("KeybindingService#dispatch",u,d==null?void 0:d.commandId),d&&d.enterChord?(r=!0,this._enterChordMode(s,u),r):(this._currentChord&&(!d||!d.commandId)&&(this._notificationService.status(C("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,u),{hideAfter:10*1e3}),r=!0),this._leaveChordMode(),d&&d.commandId&&(d.bubble||(r=!0),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,h=>this._notificationService.warn(h)),fRe.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding"})),r)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Vw{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Vw.EMPTY=new Vw(null);class yy{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let r=0,s=e.length;r<s;r++){const o=e[r].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=yy.combine(e,t);for(let r=0,s=this._keybindings.length;r<s;r++){let o=this._keybindings[r];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,r,s){return!(e.command!==r||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||s&&(!e.when||!dxe(s,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const r of t){if(!r.command||r.command.length===0||r.command.charAt(0)!=="-"){n.push(r);continue}const s=r.command.substr(1),o=r.keypressParts[0],a=r.keypressParts[1],u=r.when;for(let d=e.length-1;d>=0;d--)this._isTargetedForRemoval(e[d],o,a,s,u)&&e.splice(d,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let r=n.length-1;r>=0;r--){let s=n[r];if(s.command===t.command)continue;const o=s.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&s.keypressParts[1]!==t.keypressParts[1]||yy.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:xue(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let r=n.length-1;r>=0;r--){const s=n[r];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let r=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;r=[];for(let a=0,u=o.length;a<u;a++){let d=o[a];d.keypressParts[1]===n&&r.push(d)}}else{const o=this._map.get(n);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;r=o}let s=this._findCommand(e,r);return s?t===null&&s.keypressParts.length>1&&s.keypressParts[1]!==null?(this._log(`\\ From ${r.length} keybinding entries, matched chord, when: ${Kee(s.when)}, source: ${qee(s)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${r.length} keybinding entries, matched ${s.command}, when: ${Kee(s.when)}, source: ${qee(s)}.`),{enterChord:!1,leaveChord:s.keypressParts.length>1,commandId:s.command,commandArgs:s.commandArgs,bubble:s.bubble}):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let r=t[n];if(yy.contextMatchesRules(e,r.when))return r}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function Kee(i){return i?`${i.serialize()}`:"no when condition"}function qee(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}class Gee{constructor(e,t,n,r,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?n$(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=n$(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=r,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function n$(i){let e=[];for(let t=0,n=i.length;t<n;t++){const r=i[t];if(!r)return e;e.push(r)}return e}class DG{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],u=n(a);if(u===null)return null;r[s]=_Re(a,u,this.modifierLabels[e])}return r.join(" ")}}const IG=new DG({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),pRe=new DG({ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:C({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),mRe=new DG({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function _Re(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class vRe extends zLe{constructor(e,t){if(super(),t.length===0)throw jh("parts");this._os=e,this._parts=t}getLabel(){return IG.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return pRe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:mRe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new $Le(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class QA extends vRe{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return M1.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":M1.toString(e.keyCode)}_getElectronAccelerator(e){return M1.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return QA.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=M1.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=oq[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Cb)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Cb(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=n$(e.map(r=>this._resolveSimpleUserBinding(r)));return n.length>0?[new QA(new wF(n),t)]:[]}}const Ude=gi("contextService");class bRe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var vs;(function(i){i.noSelection=C("noSelection","No selection"),i.singleSelectionRange=C("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=C("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=C("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=C("multiSelection","{0} selections"),i.emergencyConfOn=C("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=C("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=C("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=C("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=C("readonlyEditor"," in a read-only code editor"),i.editableEditor=C("editableEditor"," in a code editor"),i.changeConfigToOnMac=C("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=C("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=C("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=C("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=C("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=C("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=C("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=C("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=C("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=C("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=C("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=C("showAccessibilityHelpAction","Show Accessibility Help")})(vs||(vs={}));var i$;(function(i){i.inspectTokensAction=C("inspectTokens","Developer: Inspect Tokens")})(i$||(i$={}));var y3;(function(i){i.gotoLineActionLabel=C("gotoLineActionLabel","Go to Line/Column...")})(y3||(y3={}));var r$;(function(i){i.helpQuickAccessActionLabel=C("helpQuickAccess","Show all Quick Access Providers")})(r$||(r$={}));var JA;(function(i){i.quickCommandActionLabel=C("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=C("quickCommandActionHelp","Show And Run Commands")})(JA||(JA={}));var eO;(function(i){i.quickOutlineActionLabel=C("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=C("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(eO||(eO={}));var S3;(function(i){i.editorViewAccessibleLabel=C("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=C("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(S3||(S3={}));var s$;(function(i){i.toggleHighContrast=C("toggleHighContrast","Toggle High Contrast Theme")})(s$||(s$={}));var o$;(function(i){i.bulkEditServiceSummary=C("bulkEditServiceSummary","Made {0} edits in {1} files")})(o$||(o$={}));var jde=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Kde=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qde=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class CRe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Ce}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function wRe(i,e,t){return cg(i)?e(i):t(i)}let L3=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=wRe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new TLe(new CRe(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};L3=jde([Kde(0,Ds)],L3);class J8{show(){return J8.NULL_PROGRESS_RUNNER}showWhile(e,t){return qde(this,void 0,void 0,function*(){yield e})}}J8.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class yRe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,r){return Promise.resolve({choice:0})}}class eB{info(e){return this.notify({severity:Ur.Info,message:e})}warn(e){return this.notify({severity:Ur.Warning,message:e})}error(e){return this.notify({severity:Ur.Error,message:e})}notify(e){switch(e.severity){case Ur.Error:console.error(e.message);break;case Ur.Warning:console.warn(e.message);break;default:console.log(e.message);break}return eB.NO_OP}status(e,t){return Oe.None}}eB.NO_OP=new pMe;class SRe{constructor(e){this._onWillExecuteCommand=new Ce,this._onDidExecuteCommand=new Ce,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Xn.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}}class Gde extends gRe{constructor(e,t,n,r,s,o){super(e,t,n,r,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(Ge(o,Ht.KEY_DOWN,a=>{const u=new yr(a);this._dispatch(u,u.target)&&(u.preventDefault(),u.stopPropagation())})),this._register(Ge(window,Ht.KEY_UP,a=>{const u=new yr(a);this._singleModifierDispatch(u,u.target)&&u.preventDefault()}))}addDynamicKeybinding(e,t,n,r){const s=cH(t,qu),o=new Je;return s&&(this._dynamicKeybindings.push({keybinding:s.parts,command:e,when:r,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(Un(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(Xn.registerCommand(e,n)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Oo.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new yy(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],r=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)n[r++]=new Gee(void 0,s.command,s.commandArgs,o,t,null,!1);else{const u=QA.resolveUserBinding(a,qu);for(const d of u)n[r++]=new Gee(d,s.command,s.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new Cb(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new QA(t,qu)}}function Yee(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof rn)}class Yde{constructor(){this._onDidChangeConfiguration=new Ce,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new Q8(new dRe,new Ku)}getValue(e,t){const n=typeof e=="string"?e:void 0,r=Yee(e)?e:Yee(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const r of e){const[s,o]=r;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),n.push(s))}if(n.length>0){const r=new hRe({keys:n,overrides:[]},t,this._configuration);r.source=7,r.sourceConfig=null,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,n,r){return this.updateValues([[e,t]])}}class LRe{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new Ce,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,r)=>t.affectsConfiguration(r)})})}getValue(e,t,n){const s=(Le.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof s>"u"?this.configurationService.getValue():this.configurationService.getValue(s)}}let a$=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Xa||qn?`
`:`\r
`}};a$=jde([Kde(0,nr)],a$);class ERe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class tB{constructor(){const e=rn.from({scheme:tB.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new bRe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}tB.SCHEME="inmemory";function E3(i,e,t){if(!e||!(i instanceof Yde))return;let n=[];Object.keys(e).forEach(r=>{VDe(r)&&n.push([`editor.${r}`,e[r]]),t&&HDe(r)&&n.push([`diffEditor.${r}`,e[r]])}),n.length>0&&i.updateValues(n)}class xRe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return qde(this,void 0,void 0,function*(){const n=new Map;for(let o of e){if(!(o instanceof zde))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let u=n.get(a);u||(u=[],n.set(a,u)),u.push(jr.replaceMove(Q.lift(o.textEdit.range),o.textEdit.text))}let r=0,s=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),s+=1,r+=a.length;return{ariaSummary:Ju(o$.bulkEditServiceSummary,r,s)}})}}class DRe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class Zde{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=Rt.None}get dimension(){return this._dimension||(this._dimension=d8(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}class IRe{constructor(){this._neverEmitter=new Ce,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}const q0=gi("themeService"),Sr=gi("keybindingService");class TRe extends Oe{constructor(){super(),this._onCodeEditorAdd=this._register(new Ce),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Ce),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Ce),this._onDiffEditorRemove=this._register(new Ce),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const r=e.toString();let s;this._modelProperties.has(r)?s=this._modelProperties.get(r):(s=new Map,this._modelProperties.set(r,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var kRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},NRe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let l$=class extends TRe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._globalStyleSheet=e||null,this._themeService=t}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}};l$=kRe([NRe(1,Er)],l$);var ARe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Zee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let x3=class extends l${constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Tn.http||s===Tn.https)return fue(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")e.setSelection(r),e.revealRangeInCenter(r,1);else{const s={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};x3=ARe([Zee(1,cn),Zee(2,Er)],x3);var TG=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Cr=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let ORe=0,Xee=!1;function MRe(i){if(!i){if(Xee)return;Xee=!0}REe(i||document.body)}let D3=class extends GA{constructor(e,t,n,r,s,o,a,u,d,h){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||S3.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+S3.accessibilityHelpMessage,super(e,f,{},n,r,s,o,u,d,h),a instanceof Gde?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,MRe(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let r="DYNAMIC_"+ ++ORe,s=_t.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,s),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Oe.None;const t=e.id,n=e.label,r=_t.and(_t.equals("editorId",this.getId()),_t.deserialize(e.precondition)),s=e.keybindings,o=_t.and(r,_t.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,u=e.contextMenuOrder||0,d=(m,...v)=>Promise.resolve(e.run(this,...v)),h=new Je,f=this.getId()+":"+t;if(h.add(Xn.registerCommand(f,d)),a){let m={command:{id:f,title:n},when:r,group:a,order:u};h.add(ra.appendMenuItem(Mt.EditorContext,m))}if(Array.isArray(s))for(const m of s)h.add(this._standaloneKeybindingService.addDynamicKeybinding(f,m,d,o));let p=new Dde(f,n,n,r,d,this._contextKeyService);return this._actions[t]=p,h.add(Un(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof x3)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};D3=TG([Cr(2,Nn),Cr(3,Ti),Cr(4,Tr),Cr(5,cn),Cr(6,Sr),Cr(7,Er),Cr(8,gs),Cr(9,il)],D3);let tO=class extends D3{constructor(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b){const L=Object.assign({},t);E3(p,L,!1);const S=h.registerEditorContainer(e);typeof L.theme=="string"&&h.setTheme(L.theme),typeof L.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!L.autoDetectHighContrast);let y=L.model;delete L.model,super(e,L,r,s,o,a,u,h,f,m),this._contextViewService=d,this._configurationService=p,this._standaloneThemeService=h,this._register(n),this._register(S);let E;if(typeof y>"u"?(E=Xde(v,b,L.value||"",L.language||Vc.text,void 0),this._ownsModel=!0):(E=y,this._ownsModel=!1),this._attachModel(E),E){let A={oldModelUrl:null,newModelUrl:E.uri};this._onDidChangeModel.fire(A)}}dispose(){super.dispose()}updateOptions(e){E3(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};tO=TG([Cr(3,Nn),Cr(4,Ti),Cr(5,Tr),Cr(6,cn),Cr(7,Sr),Cr(8,Hp),Cr(9,q0),Cr(10,gs),Cr(11,nr),Cr(12,il),Cr(13,Ds),Cr(14,Fo)],tO);let u$=class extends x0{constructor(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b){const L=Object.assign({},t);E3(p,L,!0);const S=h.registerEditorContainer(e);typeof L.theme=="string"&&h.setTheme(L.theme),typeof L.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!L.autoDetectHighContrast),super(e,L,{},b,u,s,r,d,h,f,m,v),this._contextViewService=a,this._configurationService=p,this._standaloneThemeService=h,this._register(n),this._register(S),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){E3(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(D3,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};u$=TG([Cr(3,Nn),Cr(4,cn),Cr(5,Sr),Cr(6,Hp),Cr(7,Vu),Cr(8,Ti),Cr(9,q0),Cr(10,gs),Cr(11,nr),Cr(12,j0),Cr(13,$p),Cr(14,K0)],u$);function Xde(i,e,t,n,r){if(t=t||"",!n){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),Qee(i,t,e.createByFilepathOrFirstLine(r||null,o),r)}return Qee(i,t,e.create(n),r)}function Qee(i,e,t,n){return i.createModel(e,t,n)}const RRe="$initialize";let Jee=!1;function c$(i){RS&&(Jee||(Jee=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class PRe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.method=n,this.args=r,this.type=0}}class ete{constructor(e,t,n,r){this.vsWorker=e,this.seq=t,this.res=n,this.err=r,this.type=1}}class FRe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=r,this.type=2}}class BRe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class WRe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class VRe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((r,s)=>{this._pendingReplies[n]={resolve:r,reject:s},this._send(new PRe(this._workerId,n,e,t))})}listen(e,t){let n=null;const r=new Ce({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new FRe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new WRe(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(r=>{this._send(new ete(this._workerId,t,r,void 0))},r=>{r.detail instanceof Error&&(r.detail=YQ(r.detail)),this._send(new ete(this._workerId,t,void 0,YQ(r)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(r=>{this._send(new BRe(this._workerId,t,r))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class HRe extends Oe{constructor(e,t,n){super();let r=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{r&&r(d)})),this._protocol=new VRe({sendMessage:(d,h)=>{this._worker.postMessage(d,h)},handleMessage:(d,h)=>{if(typeof n[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(n[d].apply(n,h))}catch(f){return Promise.reject(f)}},handleEvent:(d,h)=>{if(Jde(d)){const f=n[d].call(n,h);if(typeof f!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return f}if(Qde(d)){const f=n[d];if(typeof f!="function")throw new Error(`Missing event ${d} on main thread host.`);return f}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;typeof Yr.require<"u"&&typeof Yr.require.getConfig=="function"?s=Yr.require.getConfig():typeof Yr.requirejs<"u"&&(s=Yr.requirejs.s.contexts._.config);const o=pq(n);this._onModuleLoaded=this._protocol.sendMessage(RRe,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,o]);const a=(d,h)=>this._request(d,h),u=(d,h)=>this._protocol.listen(d,h);this._lazyProxy=new Promise((d,h)=>{r=h,this._onModuleLoaded.then(f=>{d($Re(f,a,u))},f=>{h(f),this._onError("Worker failed to load "+t,f)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,r)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,r)},r)})}_onError(e,t){console.error(e),console.info(t)}}function Qde(i){return i[0]==="o"&&i[1]==="n"&&If(i.charCodeAt(2))}function Jde(i){return/^onDynamic/.test(i)&&If(i.charCodeAt(9))}function $Re(i,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},r=o=>function(a){return t(o,a)};let s={};for(const o of i){if(Jde(o)){s[o]=r(o);continue}if(Qde(o)){s[o]=t(o,void 0);continue}s[o]=n(o)}return s}var p6;const tte=(p6=window.trustedTypes)===null||p6===void 0?void 0:p6.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function zRe(i,e){if(Yr.MonacoEnvironment){if(typeof Yr.MonacoEnvironment.getWorker=="function")return Yr.MonacoEnvironment.getWorker(i,e);if(typeof Yr.MonacoEnvironment.getWorkerUrl=="function"){const t=Yr.MonacoEnvironment.getWorkerUrl(i,e);return new Worker(tte?tte.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function URe(i){return typeof i.then=="function"}class jRe{constructor(e,t,n,r,s){this.id=t;const o=zRe("workerMain.js",n);URe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(u){r(u.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class nB{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let r=++nB.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new jRe(e,r,this._label||"anonymous"+r,t,s=>{c$(s),this._webWorkerFailedBeforeError=s,n(s)})}}nB.LAST_WORKER_ID=0;class Ev{constructor(e,t,n,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class nte{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}}function KRe(i,e,t){return new Bf(new nte(i),new nte(e)).ComputeDiff(t).changes}class XC{static Assert(e,t){if(!e)throw new Error(t)}}class QC{static Copy(e,t,n,r,s){for(let o=0;o<s;o++)n[r+o]=e[t+o]}static Copy2(e,t,n,r,s){for(let o=0;o<s;o++)n[r+o]=e[t+o]}}class ite{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ev(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Bf{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[r,s,o]=Bf._getElements(e),[a,u,d]=Bf._getElements(t);this._hasStrings=o&&d,this._originalStringElements=r,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Bf._isStringArray(t)){const n=new Int32Array(t.length);for(let r=0,s=t.length;r<s;r++)n[r]=Yq(t[r],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Bf._getStrictElement(this._originalSequence,e),r=Bf._getStrictElement(this._modifiedSequence,t);return n===r}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,r,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,r,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,r,s){for(s[0]=!1;e<=t&&n<=r&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&r>=n&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||n>r){let f;return n<=r?(XC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),f=[new Ev(e,0,n,r-n+1)]):e<=t?(XC.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),f=[new Ev(e,t-e+1,n,0)]):(XC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),XC.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const o=[0],a=[0],u=this.ComputeRecursionPoint(e,t,n,r,o,a,s),d=o[0],h=a[0];if(u!==null)return u;if(!s[0]){const f=this.ComputeDiffRecursive(e,d,n,h,s);let p=[];return s[0]?p=[new Ev(d+1,t-(d+1)+1,h+1,r-(h+1)+1)]:p=this.ComputeDiffRecursive(d+1,t,h+1,r,s),this.ConcatenateChanges(f,p)}return[new Ev(e,t-e+1,n,r-n+1)]}WALKTRACE(e,t,n,r,s,o,a,u,d,h,f,p,m,v,b,L,S,y){let E=null,A=null,N=new ite,V=t,M=n,R=m[0]-L[0]-r,Y=-1073741824,X=this.m_forwardHistory.length-1;do{const $=R+e;$===V||$<M&&d[$-1]<d[$+1]?(f=d[$+1],v=f-R-r,f<Y&&N.MarkNextChange(),Y=f,N.AddModifiedElement(f+1,v),R=$+1-e):(f=d[$-1]+1,v=f-R-r,f<Y&&N.MarkNextChange(),Y=f-1,N.AddOriginalElement(f,v+1),R=$-1-e),X>=0&&(d=this.m_forwardHistory[X],e=d[0],V=1,M=d.length-1)}while(--X>=-1);if(E=N.getReverseChanges(),y[0]){let $=m[0]+1,T=L[0]+1;if(E!==null&&E.length>0){const O=E[E.length-1];$=Math.max($,O.getOriginalEnd()),T=Math.max(T,O.getModifiedEnd())}A=[new Ev($,p-$+1,T,b-T+1)]}else{N=new ite,V=o,M=a,R=m[0]-L[0]-u,Y=1073741824,X=S?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const $=R+s;$===V||$<M&&h[$-1]>=h[$+1]?(f=h[$+1]-1,v=f-R-u,f>Y&&N.MarkNextChange(),Y=f+1,N.AddOriginalElement(f+1,v+1),R=$+1-s):(f=h[$-1],v=f-R-u,f>Y&&N.MarkNextChange(),Y=f,N.AddModifiedElement(f+1,v+1),R=$-1-s),X>=0&&(h=this.m_reverseHistory[X],s=h[0],V=1,M=h.length-1)}while(--X>=-1);A=N.getChanges()}return this.ConcatenateChanges(E,A)}ComputeRecursionPoint(e,t,n,r,s,o,a){let u=0,d=0,h=0,f=0,p=0,m=0;e--,n--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const v=t-e+(r-n),b=v+1,L=new Int32Array(b),S=new Int32Array(b),y=r-n,E=t-e,A=e-n,N=t-r,M=(E-y)%2===0;L[y]=e,S[E]=t,a[0]=!1;for(let R=1;R<=v/2+1;R++){let Y=0,X=0;h=this.ClipDiagonalBound(y-R,R,y,b),f=this.ClipDiagonalBound(y+R,R,y,b);for(let T=h;T<=f;T+=2){T===h||T<f&&L[T-1]<L[T+1]?u=L[T+1]:u=L[T-1]+1,d=u-(T-y)-A;const O=u;for(;u<t&&d<r&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(L[T]=u,u+d>Y+X&&(Y=u,X=d),!M&&Math.abs(T-E)<=R-1&&u>=S[T])return s[0]=u,o[0]=d,O<=S[T]&&1447>0&&R<=1447+1?this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,s,d,r,o,M,a):null}const $=(Y-e+(X-n)-R)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Y,$))return a[0]=!0,s[0]=Y,o[0]=X,$>0&&1447>0&&R<=1447+1?this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,s,d,r,o,M,a):(e++,n++,[new Ev(e,t-e+1,n,r-n+1)]);p=this.ClipDiagonalBound(E-R,R,E,b),m=this.ClipDiagonalBound(E+R,R,E,b);for(let T=p;T<=m;T+=2){T===p||T<m&&S[T-1]>=S[T+1]?u=S[T+1]-1:u=S[T-1],d=u-(T-E)-N;const O=u;for(;u>e&&d>n&&this.ElementsAreEqual(u,d);)u--,d--;if(S[T]=u,M&&Math.abs(T-y)<=R&&u<=L[T])return s[0]=u,o[0]=d,O>=L[T]&&1447>0&&R<=1447+1?this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,s,d,r,o,M,a):null}if(R<=1447){let T=new Int32Array(f-h+2);T[0]=y-h+1,QC.Copy2(L,h,T,1,f-h+1),this.m_forwardHistory.push(T),T=new Int32Array(m-p+2),T[0]=E-p+1,QC.Copy2(S,p,T,1,m-p+1),this.m_reverseHistory.push(T)}}return this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,s,d,r,o,M,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<r&&n.modifiedStart+n.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let u=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],u)){e[t]=u[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let r=0,s=0;if(t>0){const f=e[t-1];r=f.originalStart+f.originalLength,s=f.modifiedStart+f.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let u=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let f=1;;f++){const p=n.originalStart-f,m=n.modifiedStart-f;if(p<r||m<s||o&&!this.OriginalElementsAreEqual(p,p+n.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+n.modifiedLength))break;const b=(p===r&&m===s?5:0)+this._boundaryScore(p,n.originalLength,m,n.modifiedLength);b>d&&(d=b,u=f)}n.originalStart-=u,n.modifiedStart-=u;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const r=e[t-1],s=e[t],o=s.originalStart-r.originalStart-r.originalLength,a=r.originalStart,u=s.originalStart+s.originalLength,d=u-a,h=r.modifiedStart,f=s.modifiedStart+s.modifiedLength,p=f-h;if(o<5&&d<20&&p<20){const m=this._findBetterContiguousSequence(a,d,h,p,o);if(m){const[v,b]=m;(v!==r.originalStart+r.originalLength||b!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=v-r.originalStart,r.modifiedLength=b-r.modifiedStart,s.originalStart=v+o,s.modifiedStart=b+o,s.originalLength=u-s.originalStart,s.modifiedLength=f-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,r,s){if(t<s||r<s)return null;const o=e+t-s+1,a=n+r-s+1;let u=0,d=0,h=0;for(let f=e;f<o;f++)for(let p=n;p<a;p++){const m=this._contiguousSequenceScore(f,p,s);m>0&&m>u&&(u=m,d=f,h=p)}return u>0?[d,h]:null}_contiguousSequenceScore(e,t,n){let r=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;r+=this._originalStringElements[e+s].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,r){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,r)?1:0;return s+o}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const r=new Array(e.length+t.length-1);return QC.Copy(e,0,r,0,e.length-1),r[e.length-1]=n[0],QC.Copy(t,1,r,e.length,t.length-1),r}else{const r=new Array(e.length+t.length);return QC.Copy(e,0,r,0,e.length),QC.Copy(t,0,r,e.length,t.length),r}}ChangesOverlap(e,t,n){if(XC.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),XC.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const r=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Ev(r,s,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,r){if(e>=0&&e<r)return e;const s=n,o=r-n-1,a=t%2===0;if(e<0){const u=s%2===0;return a===u?0:1}else{const u=o%2===0;return a===u?r-1:r-2}}}const qRe=3;function ehe(i,e,t,n){return new Bf(i,e,t).ComputeDiff(n)}class rte{constructor(e){const t=[],n=[];for(let r=0,s=e.length;r<s;r++)t[r]=d$(e[r],1),n[r]=h$(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const r=[],s=[],o=[];let a=0;for(let u=t;u<=n;u++){const d=this.lines[u],h=e?this._startColumns[u]:1,f=e?this._endColumns[u]:d.length+1;for(let p=h;p<f;p++)r[a]=d.charCodeAt(p-1),s[a]=u+1,o[a]=p,a++}return new GRe(r,s,o)}}class GRe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class nO{constructor(e,t,n,r,s,o,a,u){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=r,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=u}static createFromDiffChange(e,t,n){let r,s,o,a,u,d,h,f;return e.originalLength===0?(r=0,s=0,o=0,a=0):(r=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(u=0,d=0,h=0,f=0):(u=n.getStartLineNumber(e.modifiedStart),d=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),f=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new nO(r,s,o,a,u,d,h,f)}}function YRe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,r=i.length;n<r;n++){const s=i[n],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<qRe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class V2{constructor(e,t,n,r,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=r,this.charChanges=s}static createFromDiffResult(e,t,n,r,s,o,a){let u,d,h,f,p;if(t.originalLength===0?(u=n.getStartLineNumber(t.originalStart)-1,d=0):(u=n.getStartLineNumber(t.originalStart),d=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=r.getStartLineNumber(t.modifiedStart)-1,f=0):(h=r.getStartLineNumber(t.modifiedStart),f=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const m=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),v=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let b=ehe(m,v,s,!0).changes;a&&(b=YRe(b)),p=[];for(let L=0,S=b.length;L<S;L++)p.push(nO.createFromDiffChange(b[L],m,v))}return new V2(u,d,h,f,p)}}class ZRe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new rte(e),this.modified=new rte(t),this.continueLineDiff=ste(n.maxComputationTime),this.continueCharDiff=ste(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=ehe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let u=0,d=t.length;u<d;u++)a.push(V2.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[u],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const r=[];let s=0,o=0;for(let a=-1,u=t.length;a<u;a++){const d=a+1<u?t[a+1]:null,h=d?d.originalStart:this.originalLines.length,f=d?d.modifiedStart:this.modifiedLines.length;for(;s<h&&o<f;){const p=this.originalLines[s],m=this.modifiedLines[o];if(p!==m){{let v=d$(p,1),b=d$(m,1);for(;v>1&&b>1;){const L=p.charCodeAt(v-2),S=m.charCodeAt(b-2);if(L!==S)break;v--,b--}(v>1||b>1)&&this._pushTrimWhitespaceCharChange(r,s+1,1,v,o+1,1,b)}{let v=h$(p,1),b=h$(m,1);const L=p.length+1,S=m.length+1;for(;v<L&&b<S;){const y=p.charCodeAt(v-1),E=p.charCodeAt(b-1);if(y!==E)break;v++,b++}(v<L||b<S)&&this._pushTrimWhitespaceCharChange(r,s+1,v,L,o+1,b,S)}}s++,o++}d&&(r.push(V2.createFromDiffResult(this.shouldIgnoreTrimWhitespace,d,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=d.originalLength,o+=d.modifiedLength)}return{quitEarly:n,changes:r}}_pushTrimWhitespaceCharChange(e,t,n,r,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,r,s,o,a))return;let u;this.shouldComputeCharChanges&&(u=[new nO(t,n,t,r,s,o,s,a)]),e.push(new V2(t,t,s,s,u))}_mergeTrimWhitespaceCharChange(e,t,n,r,s,o,a){const u=e.length;if(u===0)return!1;const d=e[u-1];return d.originalEndLineNumber===0||d.modifiedEndLineNumber===0?!1:d.originalEndLineNumber+1===t&&d.modifiedEndLineNumber+1===s?(d.originalEndLineNumber=t,d.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new nO(t,n,t,r,s,o,s,a)),!0):!1}}function d$(i,e){const t=Ta(i);return t===-1?e:t+1}function h$(i,e){const t=Qf(i);return t===-1?e:t+2}function ste(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class XRe{constructor(e,t,n,r){this._uri=e,this._lines=t,this._eol=n,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new Le(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=this._lines[r].length+e;this._lineStarts=new tMe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=sg(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let r=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),r[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}class QRe{constructor(e,t,n){const r=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)r[s]=n;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class JRe{constructor(e){let t=0,n=0;for(let s=0,o=e.length;s<o;s++){let[a,u,d]=e[s];u>t&&(t=u),a>n&&(n=a),d>n&&(n=d)}t++,n++;let r=new QRe(n,t,0);for(let s=0,o=e.length;s<o;s++){let[a,u,d]=e[s];r.set(a,u,d)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let m6=null;function ePe(){return m6===null&&(m6=new JRe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),m6}let AN=null;function tPe(){if(AN===null){AN=new HS(0);const i=` 	<>'"`;for(let t=0;t<i.length;t++)AN.set(i.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)AN.set(e.charCodeAt(t),2)}return AN}class I3{static _createLink(e,t,n,r,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>r);if(r>0){const a=t.charCodeAt(r-1),u=t.charCodeAt(o);(a===40&&u===41||a===91&&u===93||a===123&&u===125)&&o--}return{range:{startLineNumber:n,startColumn:r+1,endLineNumber:n,endColumn:o+2},url:t.substring(r,o+1)}}static computeLinks(e,t=ePe()){const n=tPe();let r=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),u=a.length;let d=0,h=0,f=0,p=1,m=!1,v=!1,b=!1,L=!1;for(;d<u;){let S=!1;const y=a.charCodeAt(d);if(p===13){let E;switch(y){case 40:m=!0,E=0;break;case 41:E=m?0:1;break;case 91:b=!0,v=!0,E=0;break;case 93:b=!1,E=v?0:1;break;case 123:L=!0,E=0;break;case 125:E=L?0:1;break;case 39:E=f===34||f===96?0:1;break;case 34:E=f===39||f===96?0:1;break;case 96:E=f===39||f===34?0:1;break;case 42:E=f===42?1:0;break;case 124:E=f===124?1:0;break;case 32:E=b?0:1;break;default:E=n.get(y)}E===1&&(r.push(I3._createLink(n,a,s,h,d)),S=!0)}else if(p===12){let E;y===91?(v=!0,E=0):E=n.get(y),E===1?S=!0:p=13}else p=t.nextState(p,y),p===0&&(S=!0);S&&(p=1,m=!1,v=!1,L=!1,h=d+1,f=y),d++}p===13&&r.push(I3._createLink(n,a,s,h,u))}return r}}function nPe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:I3.computeLinks(i)}class f${constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,r,s){if(e&&t){let o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(n&&r){let o=this.doNavigateValueSet(r,s);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),r=Number(e),s=parseFloat(e);return!isNaN(r)&&!isNaN(s)&&r===s?r===0&&!t?null:(r=Math.floor(r*n),r+=t?n:-n,String(r/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let r=null;for(let s=0,o=e.length;r===null&&s<o;s++)r=this.valueSetReplace(e[s],t,n);return r}valueSetReplace(e,t,n){let r=e.indexOf(t);return r>=0?(r+=n?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}}f$.INSTANCE=new f$;var g$;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(g$||(g$={}));var p$;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(p$||(p$={}));var m$;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(m$||(m$={}));var _$;(function(i){i[i.Deprecated=1]="Deprecated"})(_$||(_$={}));var v$;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(v$||(v$={}));var b$;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(b$||(b$={}));var C$;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(C$||(C$={}));var w$;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(w$||(w$={}));var y$;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(y$||(y$={}));var S$;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(S$||(S$={}));var L$;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.emptySelectionClipboard=32]="emptySelectionClipboard",i[i.extraEditorClassName=33]="extraEditorClassName",i[i.fastScrollSensitivity=34]="fastScrollSensitivity",i[i.find=35]="find",i[i.fixedOverflowWidgets=36]="fixedOverflowWidgets",i[i.folding=37]="folding",i[i.foldingStrategy=38]="foldingStrategy",i[i.foldingHighlight=39]="foldingHighlight",i[i.foldingImportsByDefault=40]="foldingImportsByDefault",i[i.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=42]="fontFamily",i[i.fontInfo=43]="fontInfo",i[i.fontLigatures=44]="fontLigatures",i[i.fontSize=45]="fontSize",i[i.fontWeight=46]="fontWeight",i[i.formatOnPaste=47]="formatOnPaste",i[i.formatOnType=48]="formatOnType",i[i.glyphMargin=49]="glyphMargin",i[i.gotoLocation=50]="gotoLocation",i[i.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",i[i.hover=52]="hover",i[i.inDiffEditor=53]="inDiffEditor",i[i.inlineSuggest=54]="inlineSuggest",i[i.letterSpacing=55]="letterSpacing",i[i.lightbulb=56]="lightbulb",i[i.lineDecorationsWidth=57]="lineDecorationsWidth",i[i.lineHeight=58]="lineHeight",i[i.lineNumbers=59]="lineNumbers",i[i.lineNumbersMinChars=60]="lineNumbersMinChars",i[i.linkedEditing=61]="linkedEditing",i[i.links=62]="links",i[i.matchBrackets=63]="matchBrackets",i[i.minimap=64]="minimap",i[i.mouseStyle=65]="mouseStyle",i[i.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=67]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",i[i.multiCursorModifier=69]="multiCursorModifier",i[i.multiCursorPaste=70]="multiCursorPaste",i[i.occurrencesHighlight=71]="occurrencesHighlight",i[i.overviewRulerBorder=72]="overviewRulerBorder",i[i.overviewRulerLanes=73]="overviewRulerLanes",i[i.padding=74]="padding",i[i.parameterHints=75]="parameterHints",i[i.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",i[i.quickSuggestions=78]="quickSuggestions",i[i.quickSuggestionsDelay=79]="quickSuggestionsDelay",i[i.readOnly=80]="readOnly",i[i.renameOnType=81]="renameOnType",i[i.renderControlCharacters=82]="renderControlCharacters",i[i.renderFinalNewline=83]="renderFinalNewline",i[i.renderLineHighlight=84]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=86]="renderValidationDecorations",i[i.renderWhitespace=87]="renderWhitespace",i[i.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",i[i.roundedSelection=89]="roundedSelection",i[i.rulers=90]="rulers",i[i.scrollbar=91]="scrollbar",i[i.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=93]="scrollBeyondLastLine",i[i.scrollPredominantAxis=94]="scrollPredominantAxis",i[i.selectionClipboard=95]="selectionClipboard",i[i.selectionHighlight=96]="selectionHighlight",i[i.selectOnLineNumbers=97]="selectOnLineNumbers",i[i.showFoldingControls=98]="showFoldingControls",i[i.showUnused=99]="showUnused",i[i.snippetSuggestions=100]="snippetSuggestions",i[i.smartSelect=101]="smartSelect",i[i.smoothScrolling=102]="smoothScrolling",i[i.stickyTabStops=103]="stickyTabStops",i[i.stopRenderingLineAfter=104]="stopRenderingLineAfter",i[i.suggest=105]="suggest",i[i.suggestFontSize=106]="suggestFontSize",i[i.suggestLineHeight=107]="suggestLineHeight",i[i.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",i[i.suggestSelection=109]="suggestSelection",i[i.tabCompletion=110]="tabCompletion",i[i.tabIndex=111]="tabIndex",i[i.unicodeHighlighting=112]="unicodeHighlighting",i[i.unusualLineTerminators=113]="unusualLineTerminators",i[i.useShadowDOM=114]="useShadowDOM",i[i.useTabStops=115]="useTabStops",i[i.wordSeparators=116]="wordSeparators",i[i.wordWrap=117]="wordWrap",i[i.wordWrapBreakAfterCharacters=118]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=119]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=120]="wordWrapColumn",i[i.wordWrapOverride1=121]="wordWrapOverride1",i[i.wordWrapOverride2=122]="wordWrapOverride2",i[i.wrappingIndent=123]="wrappingIndent",i[i.wrappingStrategy=124]="wrappingStrategy",i[i.showDeprecated=125]="showDeprecated",i[i.inlayHints=126]="inlayHints",i[i.editorClassName=127]="editorClassName",i[i.pixelRatio=128]="pixelRatio",i[i.tabFocusMode=129]="tabFocusMode",i[i.layoutInfo=130]="layoutInfo",i[i.wrappingInfo=131]="wrappingInfo"})(L$||(L$={}));var E$;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(E$||(E$={}));var x$;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(x$||(x$={}));var D$;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(D$||(D$={}));var I$;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(I$||(I$={}));var T$;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(T$||(T$={}));var k$;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.MAX_VALUE=126]="MAX_VALUE"})(k$||(k$={}));var N$;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(N$||(N$={}));var A$;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(A$||(A$={}));var O$;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(O$||(O$={}));var M$;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(M$||(M$={}));var R$;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(R$||(R$={}));var P$;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(P$||(P$={}));var F$;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(F$||(F$={}));var B$;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(B$||(B$={}));var W$;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(W$||(W$={}));var V$;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(V$||(V$={}));var H$;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(H$||(H$={}));var $$;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})($$||($$={}));var z$;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(z$||(z$={}));var U$;(function(i){i[i.Deprecated=1]="Deprecated"})(U$||(U$={}));var j$;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(j$||(j$={}));var K$;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(K$||(K$={}));var q$;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(q$||(q$={}));var G$;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(G$||(G$={}));let bM=class{static chord(e,t){return Zr(e,t)}};bM.CtrlCmd=2048;bM.Shift=1024;bM.Alt=512;bM.WinCtrl=256;function the(){return{editor:void 0,languages:void 0,CancellationTokenSource:oa,Emitter:Ce,KeyCode:k$,KeyMod:bM,Position:Le,Range:Q,Selection:yt,SelectionDirection:H$,MarkerSeverity:N$,MarkerTag:A$,Uri:rn,Token:V8}}class kG{static computeUnicodeHighlights(e,t,n){const r=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),o=new ote(t),a=o.getCandidateCodePoints();let u;a==="allNonBasicAscii"?u=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):u=new RegExp(`${iPe(Array.from(a))}`,"g");const d=new Pw(null,u),h=[];let f=!1,p,m=0,v=0,b=0;e:for(let L=r,S=s;L<=S;L++){const y=e.getLineContent(L),E=y.length;d.reset(0);do if(p=d.next(y),p){let A=p.index,N=p.index+p[0].length;if(A>0){const R=y.charCodeAt(A-1);Ws(R)&&A--}if(N+1<E){const R=y.charCodeAt(N-1);Ws(R)&&N++}const V=y.substring(A,N),M=o.shouldHighlightNonBasicASCII(V);if(M!==0){M===3?m++:M===2?v++:M===1?b++:_ue();const R=1e3;if(h.length>=R){f=!0;break e}h.push(new Q(L,A+1,L,N+1))}}while(p)}return{ranges:h,hasMore:f,ambiguousCharacterCount:m,invisibleCharacterCount:v,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){switch(new ote(t).shouldHighlightNonBasicASCII(e)){case 0:return null;case 2:return{kind:1};case 3:const s=Eh.getPrimaryConfusable(e.codePointAt(0));return{kind:0,confusableWith:String.fromCodePoint(s)};case 1:return{kind:2}}}}function iPe(i,e){return`[${dc(i.map(n=>String.fromCodePoint(n)).join(""))}]`}class ote{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints)}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of _p.codePoints)e.add(t);if(this.options.ambiguousCharacters)for(const t of Eh.getPrimaryConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e){const t=e.codePointAt(0);return this.allowedCodePoints.has(t)?0:this.options.nonBasicASCII?1:this.options.invisibleCharacters&&!(e===" "||e===`
`||e==="	")&&_p.isInvisibleCharacter(t)?2:this.options.ambiguousCharacters&&Eh.isAmbiguous(t)?3:0}}var n1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class rPe extends XRe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=WF(e.column,BF(t),this._lines[e.lineNumber-1],0);return n?new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let r=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const u=s.substring(a[o].start,a[o].end);o+=1,yield u}else if(r<t.length)s=t[r],a=n(s,e),o=0,r+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],r=this._wordenize(n,t),s=[];for(const o of r)s.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const n=[];let r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)n.push({start:r.index,end:r.index+r[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,r=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<r;o++)s.push(this._lines[o]);return s.push(this._lines[r].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!Le.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,r=!1;if(t<1)t=1,n=1,r=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,r=!0;else{let s=this._lines[t-1].length+1;n<1?(n=1,r=!0):n>s&&(n=s,r=!0)}return r?{lineNumber:t,column:n}:e}}class Pb{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new rPe(rn.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return n1(this,void 0,void 0,function*(){const r=this._getModel(e);return r?kG.computeUnicodeHighlights(r,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,r){return n1(this,void 0,void 0,function*(){const s=this._getModel(e),o=this._getModel(t);if(!s||!o)return null;const a=s.getLinesContent(),u=o.getLinesContent(),h=new ZRe(a,u,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:r}).computeDiff(),f=h.changes.length>0?!1:this._modelsAreIdentical(s,o);return{quitEarly:h.quitEarly,identical:f,changes:h.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),r=t.getLineCount();if(n!==r)return!1;for(let s=1;s<=n;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return n1(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const r=[];let s;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return Q.compareRangesUsingStarts(o.range,a.range);let u=o.range?0:1,d=a.range?0:1;return u-d});for(let{range:o,text:a,eol:u}of t){if(typeof u=="number"&&(s=u),Q.isEmpty(o)&&!a)continue;const d=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),d===a)continue;if(Math.max(a.length,d.length)>Pb._diffLimit){r.push({range:o,text:a});continue}const h=KRe(d,a,!1),f=n.offsetAt(Q.lift(o).getStartPosition());for(const p of h){const m=n.positionAt(f+p.originalStart),v=n.positionAt(f+p.originalStart+p.originalLength),b={text:a.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:v.lineNumber,endColumn:v.column}};n.getValueInRange(b.range)!==b.text&&r.push(b)}}return typeof s=="number"&&r.push({eol:s,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r})}computeLinks(e){return n1(this,void 0,void 0,function*(){let t=this._getModel(e);return t?nPe(t):null})}textualSuggest(e,t,n,r){return n1(this,void 0,void 0,function*(){const s=new ig(!0),o=new RegExp(n,r),a=new Set;e:for(let u of e){const d=this._getModel(u);if(d){for(let h of d.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>Pb._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,r){return n1(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(n,r),a=Object.create(null);for(let u=t.startLineNumber;u<t.endLineNumber;u++){let d=s.getLineWords(u,o);for(const h of d){if(!isNaN(Number(h.word)))continue;let f=a[h.word];f||(f=[],a[h.word]=f),f.push({startLineNumber:u,startColumn:h.startColumn,endLineNumber:u,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,n,r,s){return n1(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(r,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let u=o.getValueInRange(t),d=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!d)return null;let h=o.getValueInRange(d);return f$.INSTANCE.navigateValueSet(t,u,d,h,n)})}loadForeignModule(e,t,n){let o={host:jEe(n,(a,u)=>this._host.fhr(a,u)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(pq(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}Pb._diffLimit=1e5;Pb._suggestionsLimit=1e4;typeof importScripts=="function"&&(Yr.monaco=the());const NG=gi("textResourceConfigurationService"),nhe=gi("textResourcePropertiesService");var sPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Y$=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const ate=60*1e3,lte=5*60*1e3;function S1(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let Z$=class extends Oe{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new aPe(this._modelService)),this._logService=n,this._register(NA.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,s)=>S1(this._modelService,r.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(r.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(Ah.register("*",new oPe(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return S1(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(r=>r.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,r){return this._workerManager.withWorker().then(s=>s.computeDiff(e,t,n,r))}computeMoreMinimalEdits(e,t){if(vl(t)){if(!S1(this._modelService,e))return Promise.resolve(t);const n=ig.create(!0),r=this._workerManager.withWorker().then(s=>s.computeMoreMinimalEdits(e,t));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([r,m0(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return S1(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(r=>r.navigateValueSet(e,t,n))}canComputeWordRanges(e){return S1(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};Z$=sPe([_6(0,Ds),_6(1,NG),_6(2,yg)],Z$);class oPe{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return Y$(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const r=[];if(n.wordBasedSuggestionsMode==="currentDocument")S1(this._modelService,e.uri)&&r.push(e.uri);else for(const f of this._modelService.getModels())S1(this._modelService,f.uri)&&(f===e?r.unshift(f.uri):(n.wordBasedSuggestionsMode==="allDocuments"||f.getLanguageId()===e.getLanguageId())&&r.push(f.uri));if(r.length===0)return;const s=_i.getWordDefinition(e.getLanguageId()),o=e.getWordAtPosition(t),a=o?new Q(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):Q.fromPositions(t),u=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(r,o==null?void 0:o.word,s);if(h)return{duration:h.duration,suggestions:h.words.map(f=>({kind:18,label:f,insertText:f,range:{insert:u,replace:a}}))}})}}let aPe=class extends Oe{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new oM).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(lte/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>lte&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new ihe(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}};class lPe extends Oe{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let r=new oM;r.cancelAndSet(()=>this._checkStopModelSync(),Math.round(ate/2)),this._register(r)}}dispose(){for(let e in this._syncedModels)ri(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let r=n.toString();this._syncedModels[r]||this._beginModelSync(n,t),this._syncedModels[r]&&(this._syncedModelsLastUsedTime[r]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>ate&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let r=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new Je;s.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(r.toString(),o)})),s.add(n.onWillDispose(()=>{this._stopModelSync(r)})),s.add(Un(()=>{this._proxy.acceptRemovedModel(r)})),this._syncedModels[r]=s}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ri(t)}}class ute{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class v6{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class ihe extends Oe{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new nB(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new HRe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new v6(this)))}catch(e){c$(e),this._worker=new ute(new Pb(new v6(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(c$(e),this._worker=new ute(new Pb(new v6(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new lPe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return Y$(this,void 0,void 0,function*(){return this._disposed?Promise.reject(_C()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(r=>r.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,r){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,r))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return Y$(this,void 0,void 0,function*(){const r=yield this._withSyncedResources(e),s=n.source,o=y9(n);return r.textualSuggest(e.map(a=>a.toString()),t,s,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let r=this._modelService.getModel(e);if(!r)return Promise.resolve(null);let s=_i.getWordDefinition(r.getLanguageId()),o=s.source,a=y9(s);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(r=>{let s=this._modelService.getModel(e);if(!s)return null;let o=_i.getWordDefinition(s.getLanguageId()),a=o.source,u=y9(o);return r.navigateValueSet(e.toString(),t,n,a,u)})}dispose(){super.dispose(),this._disposed=!0}}const i1=Object.prototype.hasOwnProperty;class uPe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(L0,0),this._register(US,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||L0}}class iO extends Oe{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,iO.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new uPe,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(sb.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){iO.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},gAe();const e=sb.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=n.identifier}),n.mimetypes.forEach(r=>{this._mimeTypesMap[r]=n.identifier})}),Xr.as(yC.Configuration).registerOverrideIdentifiers(sb.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;i1.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)BR({id:n,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)BR({id:n,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)BR({id:n,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let u=new RegExp(a);ZEe(u)||BR({id:n,mime:r,firstline:u},this._warnOnOverwrite)}catch(u){gn(u)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);let o=s!==null&&s.length>0;if(!(o&&s[0]===null)){let a=(o?s[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return i1.call(this._mimeTypesMap,e)?!0:i1.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return i1.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>i1.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>i1.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===L0?L0:i1.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=pAe(e,t);return this.extractModeIds(n.join(","))}}iO.instanceCount=0;class cte{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new Ce({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class rO extends Oe{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new Ce),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new Ce({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,rO.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new iO(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){rO.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return LH(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return LH(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new cte(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new cte(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||L0;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||L0;this._onDidEncounterLanguage.fire(t)}}}rO.instanceCount=0;var cPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},b6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let X$=class{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._modeService=n,this._logService=r,this._hashTable=new tp,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const r=this._modeService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,r);let o;if(s)o=s.metadata,this._logService.getLevel()===Ph.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${ia.getForeground(o)}, fontStyle ${ia.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const u=[];if(a){let d=t;for(let f=0;d>0&&f<this._legend.tokenModifiers.length;f++)d&1&&u.push(this._legend.tokenModifiers[f]),d=d>>1;d>0&&this._logService.getLevel()===Ph.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),u.push("not-in-legend"));const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,u,n);if(typeof h>"u")o=2147483647;else{if(o=0,typeof h.italic<"u"){const f=(h.italic?1:0)<<11;o|=f|1}if(typeof h.bold<"u"){const f=(h.bold?2:0)<<11;o|=f|2}if(typeof h.underline<"u"){const f=(h.underline?4:0)<<11;o|=f|4}if(h.foreground){const f=h.foreground<<14;o|=f|8}o===0&&(o=2147483647)}}else this._logService.getLevel()===Ph.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,o),this._logService.getLevel()===Ph.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${u.join(" ")}): foreground ${ia.getForeground(o)}, fontStyle ${ia.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};X$=cPe([b6(1,Er),b6(2,Fo),b6(3,yg)],X$);function rhe(i,e,t){const n=i.data,r=i.data.length/5|0,s=Math.max(Math.ceil(r/1024),400),o=[];let a=0,u=1,d=0;for(;a<r;){const h=a;let f=Math.min(h+s,r);if(f<r){let E=f;for(;E-1>h&&n[5*E]===0;)E--;if(E-1===h){let A=f;for(;A+1<r&&n[5*A]===0;)A++;f=A}else f=E}let p=new Uint32Array((f-h)*4),m=0,v=0,b=0,L=0,S=0;for(;a<f;){const E=5*a,A=n[E],N=n[E+1],V=u+A|0,M=A===0?d+N|0:N,R=n[E+2],Y=n[E+3],X=n[E+4],$=e.getMetadata(Y,X,t);$!==2147483647&&(v===0&&(v=V),b===V&&S>M&&(e.warnOverlappingSemanticTokens(V,M+1),L<M?p[m-4+2]=M:m-=4),p[m]=V-v,p[m+1]=M,p[m+2]=M+R,p[m+3]=$,m+=4,b=V,L=M,S=M+R),u=V,d=M,a++}m!==p.length&&(p=p.subarray(0,m));const y=new e3(v,new JF(p));o.push(y)}return o}class dPe{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}}class tp{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=tp._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<tp._SIZES.length?2/3*this._currentLength:0),this._elements=[],tp._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const r=this._hashFunc(e,t,n);let s=this._elements[r];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,r){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=tp._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<tp._SIZES.length?2/3*this._currentLength:0),this._elements=[],tp._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const u=a.next;a.next=null,this._add(a),a=u}}}this._add(new dPe(e,t,n,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}tp._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function hPe(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],r=i[e+1],s=i[e+2],o=i[e+3];i[e+0]=o,i[e+1]=s,i[e+2]=r,i[e+3]=n}}function fPe(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return Vle()||hPe(e),O8.wrap(e)}function she(i){const e=new Uint32Array(gPe(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return fPe(e)}function gPe(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var D0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function iB(i){return i&&!!i.data}function ohe(i){return i&&Array.isArray(i.edits)}class pPe{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function ahe(i){return Gy.has(i)}function mPe(i){const e=Gy.orderedGroups(i);return e.length>0?e[0]:[]}function lhe(i,e,t,n){return D0(this,void 0,void 0,function*(){const r=mPe(i),s=yield Promise.all(r.map(o=>D0(this,void 0,void 0,function*(){let a,u=null;try{a=yield o.provideDocumentSemanticTokens(i,o===e?t:null,n)}catch(d){u=d,a=null}return(!a||!iB(a)&&!ohe(a))&&(a=null),new pPe(o,a,u)})));for(const o of s){if(o.error)throw o.error;if(o.tokens)return o}return s.length>0?s[0]:null})}function _Pe(i){const e=Gy.orderedGroups(i);return e.length>0?e[0]:null}class vPe{constructor(e,t){this.provider=e,this.tokens=t}}function bPe(i){return W8.has(i)}function uhe(i){const e=W8.orderedGroups(i);return e.length>0?e[0]:[]}function AG(i,e,t){return D0(this,void 0,void 0,function*(){const n=uhe(i),r=yield Promise.all(n.map(s=>D0(this,void 0,void 0,function*(){let o;try{o=yield s.provideDocumentRangeSemanticTokens(i,e,t)}catch(a){Ro(a),o=null}return(!o||!iB(o))&&(o=null),new vPe(s,o)})));for(const s of r)if(s.tokens)return s;return r.length>0?r[0]:null})}Xn.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t]=e;Gi(t instanceof rn);const n=i.get(Ds).getModel(t);if(!n)return;const r=_Pe(n);return r?r[0].getLegend():i.get(Tr).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Xn.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t]=e;Gi(t instanceof rn);const n=i.get(Ds).getModel(t);if(!n)return;if(!ahe(n))return i.get(Tr).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const r=yield lhe(n,null,null,Fn.None);if(!r)return;const{provider:s,tokens:o}=r;if(!o||!iB(o))return;const a=she({id:0,type:"full",data:o.data});return o.resultId&&s.releaseDocumentSemanticTokens(o.resultId),a}));Xn.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t,n]=e;Gi(t instanceof rn);const r=i.get(Ds).getModel(t);if(!r)return;const s=uhe(r);if(s.length===0)return;if(s.length===1)return s[0].getLegend();if(!n||!Q.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),s[0].getLegend();const o=yield AG(r,Q.lift(n),Fn.None);if(o)return o.provider.getLegend()}));Xn.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t,n]=e;Gi(t instanceof rn),Gi(Q.isIRange(n));const r=i.get(Ds).getModel(t);if(!r)return;const s=yield AG(r,Q.lift(n),Fn.None);if(!(!s||!s.tokens))return she({id:0,type:"full",data:s.tokens.data})}));var CPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},r1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function _v(i){return i.toString()}function dte(i){const e=new F8,t=i.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class wPe{constructor(e,t,n){this._modelEventListeners=new Je,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(r=>n(e,r)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const yPe=Xa||qn?1:2;class SPe{constructor(e,t,n,r,s,o,a,u){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=u}}let T3=class i2 extends Oe{constructor(e,t,n,r,s,o,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=r,this._undoRedoService=s,this._modeService=o,this._languageConfigurationService=a,this._onModelAdded=this._register(new Ce),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Ce),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Ce),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new EPe(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new LPe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let r=Jo.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const m=parseInt(e.editor.tabSize,10);isNaN(m)||(r=m),r<1&&(r=1)}let s=r;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const m=parseInt(e.editor.indentSize,10);isNaN(m)||(s=m),s<1&&(s=1)}let o=Jo.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=yPe;const u=e.eol;u===`\r
`?a=2:u===`
`&&(a=1);let d=Jo.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(d=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let h=Jo.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(h=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let f=Jo.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(f=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let p=Jo.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(p={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:r,indentSize:s,insertSpaces:o,detectIndentation:h,defaultEOL:a,trimAutoWhitespace:d,largeFileOptimizations:f,bracketPairColorizationOptions:p}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:qu===3||qu===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let r=this._modelCreationOptionsByLanguageAndResource[e+t];if(!r){const s=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);r=i2._readModelOptions({editor:s,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=r}return r}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const s=t[n],o=this._models[s],a=o.model.getLanguageId(),u=o.model.uri,d=e[a+u],h=this.getCreationOptions(a,u,o.model.isForSimpleWidget);i2._setModelOptionsForModel(o.model,h,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Qc(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(_v(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(_v(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(_v(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,r)=>n.time-r.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){const s=this.getCreationOptions(t,n,r),o=new Sl(e,s,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(_v(n))){const d=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),f=dte(o)===d.sha1;if(f||d.sharesUndoRedoStack){for(const p of h.past)Qg(p)&&p.matchesResource(n)&&p.setModel(o);for(const p of h.future)Qg(p)&&p.matchesResource(n)&&p.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,p=>Qg(p)&&p.matchesResource(n)),f&&(o._overwriteVersionId(d.versionId),o._overwriteAlternativeVersionId(d.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(d.initialUndoRedoSnapshot))}else d.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(d.initialUndoRedoSnapshot)}const a=_v(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const u=new wPe(o,d=>this._onWillDispose(d),(d,h)=>this._onDidChangeLanguage(d,h));return this._models[a]=u,u}createModel(e,t,n,r=!1){let s;return t?(s=this._createModelData(e,t.languageId,n,r),this.setMode(s.model,t)):s=this._createModelData(e,US,n,r),this._onModelAdded.fire(s.model),s.model}setMode(e,t){if(!t)return;const n=this._models[_v(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=_v(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Tn.file||e.scheme===Tn.vscodeRemote||e.scheme===Tn.userData||e.scheme===Tn.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=_v(e.uri),n=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const u=this._undoRedoService.getElements(e.uri);if(u.past.length>0||u.future.length>0){for(const d of u.past)Qg(d)&&d.matchesResource(e.uri)&&(s=!0,o+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of u.future)Qg(d)&&d.matchesResource(e.uri)&&(s=!0,o+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=i2.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!r&&o>a){const u=n.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,u=>Qg(u)&&u.matchesResource(e.uri)),this._insertDisposedModel(new SPe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,o,dte(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){const u=n.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,r=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);i2._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldModeId:n})}};T3.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;T3=CPe([r1(0,nr),r1(1,nhe),r1(2,Er),r1(3,yg),r1(4,gM),r1(5,Fo),r1(6,fM)],T3);const OG="editor.semanticHighlighting";function Q$(i,e,t){var n;const r=(n=t.getValue(OG,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof r=="boolean"?r:e.getColorTheme().semanticHighlighting}class LPe extends Oe{constructor(e,t,n,r){super(),this._watchers=Object.create(null),this._semanticStyling=r;const s=u=>{this._watchers[u.uri.toString()]=new V1(u,t,this._semanticStyling)},o=(u,d)=>{d.dispose(),delete this._watchers[u.uri.toString()]},a=()=>{for(let u of e.getModels()){const d=this._watchers[u.uri.toString()];Q$(u,t,n)?d||s(u):d&&o(u,d)}};this._register(e.onModelAdded(u=>{Q$(u,t,n)&&s(u)})),this._register(e.onModelRemoved(u=>{const d=this._watchers[u.uri.toString()];d&&o(u,d)})),this._register(n.onDidChangeConfiguration(u=>{u.affectsConfiguration(OG)&&a()})),this._register(t.onDidColorThemeChange(a))}}class EPe extends Oe{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new X$(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class xPe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class V1 extends Oe{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new er(()=>this._fetchDocumentSemanticTokensNow(),V1.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{ri(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const s of Gy.all(e))typeof s.onDidChange=="function"&&this._documentProvidersChangeListeners.push(s.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};r(),this._register(Gy.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(s=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!ahe(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new oa,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=lhe(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const s=[],o=this._model.onDidChangeContent(a=>{s.push(a)});r.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:u,tokens:d}=a,h=this._semanticStyling.get(u);this._setDocumentSemanticTokens(u,d||null,h,s)}},a=>{a&&(Cg(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||gn(a),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),s.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,r,s){for(let o=0;o<s;o++)n[r+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,r){const s=this._currentDocumentResponse,o=()=>{r.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(ohe(t)){if(!s){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const p of t.edits)a+=(p.data?p.data.length:0)-p.deleteCount;const u=s.data,d=new Uint32Array(u.length+a);let h=u.length,f=d.length;for(let p=t.edits.length-1;p>=0;p--){const m=t.edits[p],v=h-(m.start+m.deleteCount);v>0&&(V1._copy(u,h-v,d,f-v,v),f-=v),m.data&&(V1._copy(m.data,0,d,f-m.data.length,m.data.length),f-=m.data.length),h=m.start}h>0&&V1._copy(u,0,d,0,h),t={resultId:t.resultId,data:d}}}if(iB(t)){this._currentDocumentResponse=new xPe(e,t.resultId,t.data);const a=rhe(t,n,this._model.getLanguageId());if(r.length>0)for(const u of r)for(const d of a)for(const h of u.changes)d.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}V1.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class DPe{constructor(e,t,n,r,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=r,this.background=s}}function IPe(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,r=i.length;n<r;n++){let s=i[n],o=-1;if(typeof s.fontStyle=="string"){o=0;let d=s.fontStyle.split(" ");for(let h=0,f=d.length;h<f;h++)switch(d[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let u=null;typeof s.background=="string"&&(u=s.background),e[t++]=new DPe(s.token||"",n,o,a,u)}return e}function TPe(i,e){i.sort((h,f)=>{let p=MPe(h.token,f.token);return p!==0?p:h.index-f.index});let t=0,n="000000",r="ffffff";for(;i.length>=1&&i[0].token==="";){let h=i.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(r=h.background)}let s=new NPe;for(let h of e)s.getId(h);let o=s.getId(n),a=s.getId(r),u=new MG(t,o,a),d=new RG(u);for(let h=0,f=i.length;h<f;h++){let p=i[h];d.insert(p.token,p.fontStyle,s.getId(p.foreground),s.getId(p.background))}return new che(s,d)}const kPe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class NPe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(kPe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=ye.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class che{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(IPe(e),t)}static createFromParsedTokenTheme(e,t){return TPe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let r=this._match(t),s=OPe(t);n=(r.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const APe=/\b(comment|string|regex|regexp)\b/;function OPe(i){let e=i.match(APe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function MPe(i,e){return i<e?-1:i>e?1:0}class MG{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new MG(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class RG{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,r;t===-1?(n=e,r=""):(n=e.substring(0,t),r=e.substring(t+1));let s=this._children.get(n);return typeof s<"u"?s.match(r):this._mainRule}insert(e,t,n,r){if(e===""){this._mainRule.acceptOverwrite(t,n,r);return}let s=e.indexOf("."),o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let u=this._children.get(o);typeof u>"u"&&(u=new RG(this._mainRule.clone()),this._children.set(o,u)),u.insert(a,t,n,r)}}function RPe(i){let e=[];for(let t=1,n=i.length;t<n;t++){let r=i[t];e[t]=`.mtk${t} { color: ${r}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const PPe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[sc]:"#FFFFFE",[uM]:"#000000",[Pq]:"#E5EBF1",[U8]:"#D3D3D3",[j8]:"#939393",[Fq]:"#ADD6FF4D"}},FPe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[sc]:"#1E1E1E",[uM]:"#D4D4D4",[Pq]:"#3A3D41",[U8]:"#404040",[j8]:"#707070",[Fq]:"#ADD6FF26"}},BPe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[sc]:"#000000",[uM]:"#FFFFFF",[U8]:"#FFFFFF",[j8]:"#FFFFFF"}};function WPe(){const i=new Ce,e=zMe();return e.onDidChange(()=>i.fire()),{onDidChange:i.event,getCSS(){const t={},n=s=>{let o=s.defaults;for(;pr.isThemeIcon(o);){const u=e.getIcon(o.id);if(!u)return;o=u.defaults}const a=o.fontId;if(a){const u=e.getIconFont(a);if(u)return t[a]=u,`.codicon-${s.id}:before { content: '${o.fontCharacter}'; font-family: ${sJ(a)}; }`}return`.codicon-${s.id}:before { content: '${o.fontCharacter}'; }`},r=[];for(let s of e.getIcons()){const o=n(s);o&&r.push(o)}for(let s in t){const a=t[s].definition.src.map(u=>`${yb(u.location)} format('${u.format}')`).join(", ");r.push(`@font-face { src: ${a}; font-family: ${sJ(s)}; font-display: block; }`)}return r.join(`
`)}}}const H1="vs",k3="vs-dark",Sy="hc-black",dhe=Xr.as(tce.ColorContribution),VPe=Xr.as(Due.ThemingContribution);class hhe{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(d4(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,ye.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=J$(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,ye.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=dhe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case H1:return Xc.LIGHT;case Sy:return Xc.HIGH_CONTRAST;default:return Xc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let s=J$(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(n||r){const s={token:""};n&&(s.foreground=n),r&&(s.background=r),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=che.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=ia.getForeground(s),a=ia.getFontStyle(s);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function d4(i){return i===H1||i===k3||i===Sy}function J$(i){switch(i){case H1:return PPe;case k3:return FPe;case Sy:return BPe}}function C6(i){let e=J$(i);return new hhe(i,e)}class HPe extends Oe{constructor(){super(),this._onColorThemeChange=this._register(new Ce),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(H1,C6(H1)),this._knownThemes.set(k3,C6(k3)),this._knownThemes.set(Sy,C6(Sy));const e=WPe();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(H1),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),MEe("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return h8(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=uc(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Oe.None}_registerShadowDomContainer(e){const t=uc(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!d4(t.base)&&!d4(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new hhe(e,t)),d4(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(H1),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(Sy):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};VPe.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const r=[];for(const o of dhe.getColors()){const a=this._theme.getColor(o.id,!0);a&&r.push(`${ece(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${r.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(RPe(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Wr.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var $Pe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zPe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const H2="data-keybinding-context";let PG=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class eS extends PG{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}eS.INSTANCE=new eS;class sO extends PG{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=_y.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===6){const s=Array.from(Qn.map(this._values,([o])=>o));this._values.clear(),n.fire(new fte(s))}else{const s=[];for(const o of r.affectedKeys){const a=`config.${o}`,u=this._values.findSuperstr(a);u!==void 0&&(s.push(...Qn.map(u,([d])=>d)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new fte(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(sO._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(sO._keyPrefix.length),n=this._configurationService.getValue(t);let r;switch(typeof n){case"number":case"boolean":case"string":r=n;break;default:Array.isArray(n)?r=JSON.stringify(n):r=n}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}sO._keyPrefix="config.";class UPe{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class hte{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class fte{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class jPe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class fhe{constructor(e){this._onDidChangeContext=new bF({merge:t=>new jPe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new UPe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new KPe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return yy.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new hte(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new hte(e))}getContext(e){return this._isDisposed?eS.INSTANCE:this.getContextValuesContainer(qPe(e))}}let ez=class extends fhe{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Je,this._lastContextId=0;const t=new sO(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?eS.INSTANCE:this._contexts.get(e)||eS.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new PG(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};ez=$Pe([zPe(0,nr)],ez);class KPe extends fhe{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Oa,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(H2)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(H2,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(H2),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?eS.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function qPe(i){for(;i;){if(i.hasAttribute(H2)){const e=i.getAttribute(H2);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}Xn.registerCommand(hxe,function(i,e,t){i.get(cn).createKey(String(e),t)});Xn.registerCommand({id:"getContextKeyInfo",handler(){return[...Dt.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:C("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Xn.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(let t of Dt.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});function gte(i){let e=i.definition;for(;e instanceof _e;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var Vo;(function(i){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),u=Math.min(s.end,o.end);return u-a<=0?{start:0,end:0}:{start:a,end:u}}i.intersect=e;function t(s){return s.end-s.start<=0}i.isEmpty=t;function n(s,o){return!t(e(s,o))}i.intersects=n;function r(s,o){const a=[],u={start:s.start,end:Math.min(o.start,s.end)},d={start:Math.max(o.end,s.start),end:s.end};return t(u)||a.push(u),t(d)||a.push(d),a}i.relativeComplement=r})(Vo||(Vo={}));var $v;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})($v||($v={}));function Hw(i,e,t){const n=t.mode===$v.ALIGN?t.offset:t.offset+t.size,r=t.mode===$v.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=r?r-e:Math.max(i-e,0):e<=r?r-e:e<=i-n?n:0}class tS extends Oe{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=Oe.None,this.toDisposeOnSetContainer=Oe.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=qe(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Ua(this.view),this.setContainer(e,t),this._register(Un(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=qe(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=GPe,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(qe("slot"))}else this.container.appendChild(this.view);const r=new Je;tS.BUBBLE_UP_EVENTS.forEach(s=>{r.add(eo(this.container,s,o=>{this.onDOMEvent(o,!1)}))}),tS.BUBBLE_DOWN_EVENTS.forEach(s=>{r.add(eo(this.container,s,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){this.isVisible()&&this.hide(),Hs(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Lu(this.view),this.toDisposeOnClean=e.render(this.view)||Oe.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ng&&c8.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(due(e)){let f=Uo(e);t={top:f.top,left:f.left,width:f.width,height:f.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Nc(this.view),r=_H(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let u,d;if(a===0){const f={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},p={offset:t.left,size:t.width,position:o===0?0:1,mode:$v.ALIGN};u=Hw(window.innerHeight,r,f)+window.pageYOffset,Vo.intersects({start:u,end:u+r},{start:f.offset,end:f.offset+f.size})&&(p.mode=$v.AVOID),d=Hw(window.innerWidth,n,p)}else{const f={offset:t.left,size:t.width,position:o===0?0:1},p={offset:t.top,size:t.height,position:s===0?0:1,mode:$v.ALIGN};d=Hw(window.innerWidth,n,f),Vo.intersects({start:d,end:d+n},{start:f.offset,end:f.offset+f.size})&&(p.mode=$v.AVOID),u=Hw(window.innerHeight,r,p)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Uo(this.container);this.view.style.top=`${u-(this.useFixedPosition?Uo(this.view).top:h.top)}px`,this.view.style.left=`${d-(this.useFixedPosition?Uo(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Ua(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!mp(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}tS.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];tS.BUBBLE_DOWN_EVENTS=["click"];let GPe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function FG(...i){return function(e,t){for(let n=0,r=i.length;n<r;n++){const s=i[n](e,t);if(s)return s}return null}}const rB=YPe.bind(void 0,!0);function YPe(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=bq(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function ghe(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function ZPe(i,e){return tz(i.toLowerCase(),e.toLowerCase(),0,0)}function tz(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let r=null;return(r=tz(i,e,t+1,n+1))?VG({start:n,end:n+1},r):null}return tz(i,e,t,n+1)}function BG(i){return 97<=i&&i<=122}function sB(i){return 65<=i&&i<=90}function WG(i){return 48<=i&&i<=57}function phe(i){return i===32||i===9||i===10||i===13}const mhe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>mhe.add(i.charCodeAt(0)));function N3(i){return phe(i)||mhe.has(i)}function XPe(i,e){return i===e||N3(i)&&N3(e)}function _he(i){return BG(i)||sB(i)||WG(i)}function VG(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function vhe(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(sB(n)||WG(n)||t>0&&!_he(i.charCodeAt(t-1)))return t}return i.length}function nz(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let r=null,s=n+1;for(r=nz(i,e,t+1,n+1);!r&&(s=vhe(e,s))<e.length;)r=nz(i,e,t+1,s),s++;return r===null?null:VG({start:n,end:n+1},r)}}function QPe(i){let e=0,t=0,n=0,r=0,s=0;for(let h=0;h<i.length;h++)s=i.charCodeAt(h),sB(s)&&e++,BG(s)&&t++,_he(s)&&n++,WG(s)&&r++;const o=e/i.length,a=t/i.length,u=n/i.length,d=r/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:u,numericPercent:d}}function JPe(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function e4e(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:r}=i;return t>.2&&e<.8&&n>.6&&r<.2}function t4e(i){let e=0,t=0,n=0,r=0;for(let s=0;s<i.length;s++)n=i.charCodeAt(s),sB(n)&&e++,BG(n)&&t++,phe(n)&&r++;return(e===0||t===0)&&r===0?i.length<=30:e<=5}function bhe(i,e){if(!e||(e=e.trim(),e.length===0)||!t4e(i)||e.length>60)return null;const t=QPe(e);if(!e4e(t)){if(!JPe(t))return null;e=e.toLowerCase()}let n=null,r=0;for(i=i.toLowerCase();r<e.length&&(n=nz(i,e,0,r))===null;)r=vhe(e,r+1);return n}function n4e(i,e,t=!1){if(!e||e.length===0)return null;let n=null,r=0;for(i=i.toLowerCase(),e=e.toLowerCase();r<e.length&&(n=iz(i,e,0,r,t))===null;)r=Che(e,r+1);return n}function iz(i,e,t,n,r){if(t===i.length)return[];if(n===e.length)return null;if(XPe(i.charCodeAt(t),e.charCodeAt(n))){let s=null,o=n+1;if(s=iz(i,e,t+1,n+1,r),!r)for(;!s&&(o=Che(e,o))<e.length;)s=iz(i,e,t+1,o,r),o++;return s===null?null:VG({start:n,end:n+1},s)}else return null}function Che(i,e){for(let t=e;t<i.length;t++)if(N3(i.charCodeAt(t))||t>0&&N3(i.charCodeAt(t-1)))return t;return i.length}const i4e=FG(rB,bhe,ghe),r4e=FG(rB,bhe,ZPe),pte=new z0(1e4);function mte(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=pte.get(i);n||(n=new RegExp(GEe(i),"i"),pte.set(i,n));const r=n.exec(e);return r?[{start:r.index,end:r.index+r[0].length}]:t?r4e(i,e):i4e(i,e)}function s4e(i,e,t,n,r,s){const o=Math.min(13,i.length);for(;t<o;t++){const a=nS(i,e,t,n,r,s,!1);if(a)return a}return[0,s]}function oB(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const r=i[n]+t,s=e[e.length-1];s&&s.end===r?s.end=r+1:e.push({start:r,end:r+1})}return e}const zv=128;function HG(){const i=[],e=[];for(let t=0;t<=zv;t++)e[t]=0;for(let t=0;t<=zv;t++)i.push(e.slice(0));return i}function whe(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const yhe=whe(2*zv),rz=whe(2*zv),Bg=HG(),s1=HG(),GR=HG();function YR(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!AF(t)}}function _te(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function h4(i,e,t){return e[i]!==t[i]}function o4e(i,e,t,n,r,s,o=!1){for(;e<t&&r<s;)i[e]===n[r]&&(o&&(yhe[e]=r),e+=1),r+=1;return e===t}var Yh;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(Yh||(Yh={}));function nS(i,e,t,n,r,s,o){const a=i.length>zv?zv:i.length,u=n.length>zv?zv:n.length;if(t>=a||s>=u||a-t>u-s||!o4e(e,t,a,r,s,u,!0))return;a4e(a,u,t,s,e,r);let d=1,h=1,f=t,p=s;const m=[!1];for(d=1,f=t;f<a;d++,f++){const y=yhe[f],E=rz[f],A=f+1<a?rz[f+1]:u;for(h=y-s+1,p=y;p<A;h++,p++){let N=Number.MIN_SAFE_INTEGER,V=!1;p<=E&&(N=l4e(i,e,f,t,n,r,p,u,s,Bg[d-1][h-1]===0,m));let M=0;N!==Number.MAX_SAFE_INTEGER&&(V=!0,M=N+s1[d-1][h-1]);const R=p>y,Y=R?s1[d][h-1]+(Bg[d][h-1]>0?-5:0):0,X=p>y+1&&Bg[d][h-1]>0,$=X?s1[d][h-2]+(Bg[d][h-2]>0?-5:0):0;if(X&&(!R||$>=Y)&&(!V||$>=M))s1[d][h]=$,GR[d][h]=3,Bg[d][h]=0;else if(R&&(!V||Y>=M))s1[d][h]=Y,GR[d][h]=2,Bg[d][h]=0;else if(V)s1[d][h]=M,GR[d][h]=1,Bg[d][h]=Bg[d-1][h-1]+1;else throw new Error("not possible")}}if(!m[0]&&!o)return;d--,h--;const v=[s1[d][h],s];let b=0,L=0;for(;d>=1;){let y=h;do{const E=GR[d][y];if(E===3)y=y-2;else if(E===2)y=y-1;else break}while(y>=1);b>1&&e[t+d-1]===r[s+h-1]&&!h4(y+s-1,n,r)&&b+1>Bg[d][y]&&(y=h),y===h?b++:b=1,L||(L=y),d--,h=y-1,v.push(h)}u===a&&(v[0]+=2);const S=L-a;return v[0]-=S,v}function a4e(i,e,t,n,r,s){let o=i-1,a=e-1;for(;o>=t&&a>=n;)r[o]===s[a]&&(rz[o]=a,o--),a--}function l4e(i,e,t,n,r,s,o,a,u,d,h){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let f=1,p=!1;return o===t-n?f=i[t]===r[o]?7:5:h4(o,r,s)&&(o===0||!h4(o-1,r,s))?(f=i[t]===r[o]?7:5,p=!0):YR(s,o)&&(o===0||!YR(s,o-1))?f=5:(YR(s,o-1)||_te(s,o-1))&&(f=5,p=!0),f>1&&t===n&&(h[0]=!0),p||(p=h4(o,r,s)||YR(s,o-1)||_te(s,o-1)),t===n?o>u&&(f-=p?3:5):d?f+=p?2:0:f+=p?0:1,o+1===a&&(f-=p?3:5),f}function u4e(i,e,t,n,r,s,o){return c4e(i,e,t,n,r,s,!0,o)}function c4e(i,e,t,n,r,s,o,a){let u=nS(i,e,t,n,r,s,a);if(u&&!o)return u;if(i.length>=3){const d=Math.min(7,i.length-1);for(let h=t+1;h<d;h++){const f=d4e(i,h);if(f){const p=nS(f,f.toLowerCase(),t,n,r,s,a);p&&(p[0]-=3,(!u||p[0]>u[0])&&(u=p))}}}return u}function d4e(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const $2="$(",$G=new RegExp(`\\$\\(${Ka.iconNameExpression}(?:${Ka.iconModifierExpression})?\\)`,"g"),h4e=new RegExp(Ka.iconNameCharacter),f4e=new RegExp(`(\\\\)?${$G.source}`,"g");function g4e(i){return i.replace(f4e,(e,t)=>t?e:`\\${e}`)}const p4e=new RegExp(`\\\\${$G.source}`,"g");function m4e(i){return i.replace(p4e,e=>`\\${e}`)}const _4e=new RegExp(`(\\s)?(\\\\)?${$G.source}(\\s)?`,"g");function zG(i){return i.indexOf($2)===-1?i:i.replace(_4e,(e,t,n,r)=>n?e:t||r||"")}function ZR(i){const e=i.indexOf($2);return e===-1?{text:i}:v4e(i,e)}function v4e(i,e){const t=[];let n="";function r(p){if(p){n+=p;for(const m of p)t.push(a)}}let s=-1,o="",a=0,u,d,h=e;const f=i.length;for(r(i.substr(0,e));h<f;){if(u=i[h],d=i[h+1],u===$2[0]&&d===$2[1])s=h,r(o),o=$2,h++;else if(u===")"&&s!==-1){const p=h-s+1;a+=p,s=-1,o=""}else s!==-1?h4e.test(u)?o+=u:(r(o),s=-1,o=""):r(u);h++}return r(o),{text:n,iconOffsets:t}}function XR(i,e,t=!1){const{text:n,iconOffsets:r}=e;if(!r||r.length===0)return mte(i,n,t);const s=_q(n," "),o=n.length-s.length,a=mte(i,s,t);if(a)for(const u of a){const d=r[u.start+o]+o;u.start+=d,u.end+=d}return a}const sz=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,w6=/(&amp;)?(&amp;)([^\s&])/g;var A3;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(A3||(A3={}));let She=class f4 extends ug{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,s),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...qn||Xa?[10]:[]],keyDown:!0}}),this.menuElement=r,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Je),this._register(Hi.addTarget(r)),Ge(r,Ht.KEY_DOWN,a=>{new yr(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(Ge(r,Ht.KEY_DOWN,a=>{const u=a.key.toLocaleLowerCase();if(this.mnemonics.has(u)){Ni.stop(a,!0);const d=this.mnemonics.get(u);if(d.length===1&&(d[0]instanceof vte&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(a)),d.length>1){const h=d.shift();h&&h.container&&(this.focusItemByElement(h.container),d.push(h)),this.mnemonics.set(u,d)}}})),Xa&&this._register(Ge(r,Ht.KEY_DOWN,a=>{const u=new yr(a);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ni.stop(a,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ni.stop(a,!0))})),this._register(Ge(this.domNode,Ht.MOUSE_OUT,a=>{let u=a.relatedTarget;mp(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(Ge(this.actionsList,Ht.MOUSE_OVER,a=>{let u=a.target;if(!(!u||!mp(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}})),this._register(Hi.addTarget(this.actionsList)),this._register(Ge(this.actionsList,lr.Tap,a=>{let u=a.initialTarget;if(!(!u||!mp(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}}));let s={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new pM(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(Ge(r,lr.Change,a=>{Ni.stop(a,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-a.translationY})})),this._register(Ge(o,Ht.MOUSE_UP,a=>{a.preventDefault()})),r.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var u;return!((u=n.submenuIds)===null||u===void 0)&&u.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof y6)).forEach((a,u,d)=>{a.updatePositionInSet(u+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(h8(e)?this.styleSheet=uc(e):(f4.globalStyleSheet||(f4.globalStyleSheet=uc()),this.styleSheet=f4.globalStyleSheet)),this.styleSheet.textContent=C4e(t)}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",r=e.backgroundColor?`${e.backgroundColor}`:"",s=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=s,this.domNode.style.color=n,this.domNode.style.backgroundColor=r,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof oz||a instanceof y6)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Zc)return new y6(t.context,e,{icon:!0});if(e instanceof f8){const r=new vte(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const s=r.getMnemonic();if(s&&r.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(r),this.mnemonics.set(s,o)}}return r}else{const r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(r.keybinding=a)}}const s=new oz(t.context,e,r);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}};class oz extends kf{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let r=this.getAction().label;if(r){let s=sz.exec(r);s&&(this.mnemonic=(s[1]?s[1]:s[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new er(()=>{this.element&&(this._register(Ge(this.element,Ht.MOUSE_UP,r=>{if(Ni.stop(r,!0),wl){if(new Qu(r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(Ge(this.element,Ht.CONTEXT_MENU,r=>{Ni.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Be(this.element,qe("a.action-menu-item")),this._action.id===Zc.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Be(this.item,qe("span.menu-item-check"+_e.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=Be(this.item,qe("span.action-label")),this.options.label&&this.options.keybinding&&(Be(this.item,qe("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){Hs(this.label);let e=zG(this.getAction().label);if(e){const t=b4e(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=sz.exec(e);if(n){e=mq(e),w6.lastIndex=0;let r=w6.exec(e);for(;r&&r[1];)r=w6.exec(e);const s=o=>o.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(_q(s(e.substr(0,r.index))," "),qe("u",{"aria-hidden":"true"},r[3]),bue(s(e.substr(r.index+r[0].length))," ")):this.label.innerText=s(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=r)}style(e){this.menuStyle=e,this.applyStyle()}}class vte extends oz{constructor(e,t,n,r){super(e,e,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new Je),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:A3.Right,this.showScheduler=new er(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new er(()=>{this.element&&!mp(oy(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Be(this.item,qe("span.submenu-indicator"+_e.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(Ge(this.element,Ht.KEY_UP,t=>{let n=new yr(t);(n.equals(17)||n.equals(3))&&(Ni.stop(t,!0),this.createSubmenu(!0))})),this._register(Ge(this.element,Ht.KEY_DOWN,t=>{let n=new yr(t);oy()===this.item&&(n.equals(17)||n.equals(3))&&Ni.stop(t,!0)})),this._register(Ge(this.element,Ht.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(Ge(this.element,Ht.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(Ge(this.element,Ht.FOCUS_OUT,t=>{this.element&&!mp(oy(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Ni.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,r){const s={top:0,left:0};return s.left=Hw(e.width,t.width,{position:r===A3.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=Hw(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Be(this.element,qe("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new She(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new g8],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const r=this.element.getBoundingClientRect(),s={top:r.top-n,left:r.left,height:r.height+2*n,width:r.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:u}=this.calculateSubmenuMenuLayout(new cr(window.innerWidth,window.innerHeight),cr.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${u-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(Ge(this.submenuContainer,Ht.KEY_UP,d=>{new yr(d).equals(15)&&(Ni.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(Ge(this.submenuContainer,Ht.KEY_DOWN,d=>{new yr(d).equals(15)&&Ni.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class y6 extends ZA{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function b4e(i){const e=sz,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function C4e(i){let e=`
.monaco-menu {
	font-size: 13px;

}

${gte(_e.menuSelection)}
${gte(_e.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
`;const t=i.scrollbarShadow;t&&(e+=`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.scrollbarSliderBackground;n&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const r=i.scrollbarSliderHoverBackground;r&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${r};
			}
		`);const s=i.scrollbarSliderActiveBackground;return s&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${s};
			}
		`),e}function Dh(i,e){const t=Object.create(null);for(let n in e){const r=e[n];r&&(t[n]=Ug(r,i))}return t}function UG(i,e,t){function n(){const r=Dh(i.getColorTheme(),e);typeof t=="function"?t(r):t.style(r)}return n(),i.onDidColorThemeChange(n)}function w4e(i,e,t){return UG(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||x2,badgeForeground:(t==null?void 0:t.badgeForeground)||D2,badgeBorder:fs},i)}function Fb(i,e,t){return UG(e,Object.assign(Object.assign({},aB),t||{}),i)}const aB={listFocusBackground:IIe,listFocusForeground:TIe,listFocusOutline:kIe,listActiveSelectionBackground:X1,listActiveSelectionForeground:o0,listActiveSelectionIconForeground:JP,listFocusAndSelectionBackground:X1,listFocusAndSelectionForeground:o0,listInactiveSelectionBackground:NIe,listInactiveSelectionIconForeground:OIe,listInactiveSelectionForeground:AIe,listInactiveFocusBackground:MIe,listInactiveFocusOutline:RIe,listHoverBackground:PIe,listHoverForeground:FIe,listDropBackground:BIe,listSelectionOutline:Ja,listHoverOutline:Ja,listFilterWidgetBackground:WIe,listFilterWidgetOutline:VIe,listFilterWidgetNoMatchesOutline:HIe,listMatchesShadow:w0,treeIndentGuidesStroke:$Ie,tableColumnsBorder:zIe,tableOddRowsBackgroundColor:UIe},y4e={shadowColor:w0,borderColor:qIe,foregroundColor:GIe,backgroundColor:YIe,selectionForegroundColor:ZIe,selectionBackgroundColor:XIe,selectionBorderColor:QIe,separatorColor:JIe,scrollbarShadow:VS,scrollbarSliderBackground:hy,scrollbarSliderHoverBackground:fy,scrollbarSliderActiveBackground:gy};function S4e(i,e,t){return UG(e,Object.assign(Object.assign({},y4e),t),i)}class L4e{constructor(e,t,n,r,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=r,this.themeService=s,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,r=due(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(qe(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",Ge(this.block,Ht.MOUSE_DOWN,d=>d.stopPropagation()));const a=new Je,u=e.actionRunner||new $y;return u.onBeforeRun(this.onActionRun,this,a),u.onDidRun(this.onDidActionRun,this,a),n=new She(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:u,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)}),a.add(S4e(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(Ge(window,Ht.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(Ge(window,Ht.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;let h=new Qu(d),f=h.target;if(!h.rightButton){for(;f;){if(f===s)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),t0(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:s=>{e.onHide&&e.onHide(!!s),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},r,!!r)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Cg(e.error)&&this.notificationService.error(e.error)}}var E4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ON=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let az=class extends Oe{constructor(e,t,n,r,s){super(),this._onDidShowContextMenu=new Ce,this._onDidHideContextMenu=new Ce,this.contextMenuHandler=new L4e(n,e,t,r,s)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{e.onHide&&e.onHide(t),this._onDidHideContextMenu.fire()}})),R1.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};az=E4e([ON(0,wg),ON(1,gs),ON(2,Hp),ON(3,Sr),ON(4,Er)],az);const CM=gi("layoutService");var x4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},D4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let lz=class extends Oe{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=Oe.None,this.container=e.container,this.contextView=this._register(new tS(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const r=Un(()=>{this.currentViewDisposable===r&&this.hideContextView()});return this.currentViewDisposable=r,r}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};lz=x4e([D4e(0,CM)],lz);const wM=gi("dialogService");let I4e=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class T4e{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),r),r.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new I4e(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),r=this._findCycle(t,n);if(r)return r}}_findCycle(e,t){for(let[n,r]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(r,t);if(s)return s;t.delete(n)}}}class bte extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class O3{constructor(e=new KA,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Nn,this)}createChild(e){return new O3(e,this._strict,this)}invokeFunction(e,...t){let n=Hc.traceInvocation(e),r=!1;try{return e({get:o=>{if(r)throw xLe("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{r=!0,n.stop()}}createInstance(e,...t){let n,r;return e instanceof Tv?(n=Hc.traceCreation(e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Hc.traceCreation(e),r=this._createInstance(e,t,n)),n.stop(),r}_createInstance(e,t=[],n){let r=Rh.getServiceDependencies(e).sort((a,u)=>a.index-u.index),s=[];for(const a of r){let u=this._getOrCreateServiceInstance(a.id,n);if(!u&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);s.push(u)}let o=r.length>0?r[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...s)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Tv)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Tv?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const r=new T4e(a=>a.id.toString());let s=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(r.lookupOrInsertNode(a),s++>1e3)throw new bte(r);for(let u of Rh.getServiceDependencies(a.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(!d&&!u.optional&&console.warn(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`),d instanceof Tv){const h={id:u.id,desc:d,_trace:a._trace.branch(u.id,!0)};r.insertEdge(a,h),o.push(h)}}}for(;;){const a=r.roots();if(a.length===0){if(!r.isEmpty())throw new bte(r);break}for(const{data:u}of a){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Tv){const h=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setServiceInstance(u.id,h)}r.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],r,s){if(this._services.get(e)instanceof Tv)return this._createServiceInstance(t,n,r,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,r,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,r){if(n){const s=new ry(()=>this._createInstance(e,t,r));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let u=s.value,d=u[a];return typeof d!="function"||(d=d.bind(u),o[a]=d),d},set(o,a,u){return s.value[a]=u,!0}})}else return this._createInstance(e,t,r)}}class Hc{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Hc._None}static traceCreation(e){return Hc._None}branch(e,t){let n=new Hc(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;Hc._totals+=e;let t=!1;function n(s,o){let a=[],u=new Array(s+1).join("	");for(const[d,h,f]of o._dep)if(h&&f){t=!0,a.push(`${u}CREATES -> ${d}`);let p=n(s+1,f);p&&a.push(p)}else a.push(`${u}uses -> ${d}`);return a.join(`
`)}let r=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Hc._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(r.join(`
`))}}Hc._None=new class extends Hc{constructor(){super(-1,null)}stop(){}branch(){return this}};Hc._totals=0;const yM=gi("labelService");class k4e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(r=>r.splice(e,t,n))}}class o1 extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function Cte(i,e){const t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const r=Vo.intersect(i,n.range);Vo.isEmpty(r)||t.push({range:r,size:n.size})}return t}function uz({start:i,end:e},t){return{start:i+t,end:e+t}}function N4e(i){const e=[];let t=null;for(let n of i){const r=n.range.start,s=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:r,end:s},size:o},e.push(t)}return e}function A4e(...i){return N4e(i.reduce((e,t)=>e.concat(t),[]))}class wte{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const r=n.length-t,s=Cte({start:0,end:e},this.groups),o=Cte({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(u=>({range:uz(u.range,r),size:u.size})),a=n.map((u,d)=>({range:{start:e+d,end:e+d+1},size:u.size}));this.groups=A4e(s,a,o),this._size=this.groups.reduce((u,d)=>u+d.size*(d.range.end-d.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){const s=r.range.end-r.range.start,o=n+s*r.size;if(e<o)return t+Math.floor((e-n)/r.size);t+=s,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){const s=r.range.end-r.range.start,o=n+s;if(e<o)return t+(e-n)*r.size;t+=s*r.size,n=o}return-1}}function O4e(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class M4e{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=qe(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:s}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),O4e(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var DC=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const gf={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class SM{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class R4e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class P4e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function F4e(i,e){return Array.isArray(i)&&Array.isArray(e)?rc(i,e):i===e}class B4e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,r)=>r,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class lf{constructor(e,t,n,r=gf){if(this.virtualDelegate=t,this.domId=`list_id_${++lf.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Np(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Oe.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Oe.None,this.onDragLeaveTimeout=Oe.None,this.disposables=new Je,this._onDidChangeContentHeight=new Ce,this._horizontalScrolling=!1,r.horizontalScrolling&&r.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new wte;for(const o of n)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new M4e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof r.mouseSupport=="boolean"?r.mouseSupport:!0),this._horizontalScrolling=ff(r,o=>o.horizontalScrolling,gf.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof r.additionalScrollHeight>"u"?0:r.additionalScrollHeight,this.accessibilityProvider=new B4e(r.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",ff(r,o=>o.transformOptimization,gf.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Hi.addTarget(this.rowsContainer)),this.scrollable=new Y8(ff(r,o=>o.smoothScrolling,!1)?125:0,o=>rg(o)),this.scrollableElement=this.disposables.add(new hG(this.rowsContainer,{alwaysConsumeMouseWheel:ff(r,o=>o.alwaysConsumeMouseWheel,gf.alwaysConsumeMouseWheel),horizontal:1,vertical:ff(r,o=>o.verticalScrollMode,gf.verticalScrollMode),useShadows:ff(r,o=>o.useShadows,gf.useShadows),mouseWheelScrollSensitivity:r.mouseWheelScrollSensitivity,fastScrollSensitivity:r.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Ge(this.rowsContainer,lr.Change,o=>this.onTouchChange(o))),this.disposables.add(Ge(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(Ge(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(Ge(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(Ge(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(Ge(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=ff(r,o=>o.setRowLineHeight,gf.setRowLineHeight),this.setRowHeight=ff(r,o=>o.setRowHeight,gf.setRowHeight),this.supportDynamicHeights=ff(r,o=>o.supportDynamicHeights,gf.supportDynamicHeights),this.dnd=ff(r,o=>o.dnd,gf.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:C9(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=Vo.intersect(r,s),a=new Map;for(let V=o.start;V<o.end;V++){const M=this.items[V];if(M.dragStartDisposable.dispose(),M.row){let R=a.get(M.templateId);R||(R=[],a.set(M.templateId,R));const Y=this.renderers.get(M.templateId);Y&&Y.disposeElement&&Y.disposeElement(M.element,V,M.row.templateData,M.size),R.push(M.row)}M.row=null}const u={start:e+t,end:this.items.length},d=Vo.intersect(u,r),h=Vo.relativeComplement(u,r),f=n.map(V=>({id:String(this.itemId++),element:V,templateId:this.virtualDelegate.getTemplateId(V),size:this.virtualDelegate.getHeight(V),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(V),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Oe.None}));let p;e===0&&t>=this.items.length?(this.rangeMap=new wte,this.rangeMap.splice(0,0,f),p=this.items,this.items=f):(this.rangeMap.splice(e,t,f),p=this.items.splice(e,t,...f));const m=n.length-t,v=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=uz(d,m),L=Vo.intersect(v,b);for(let V=L.start;V<L.end;V++)this.updateItemInDOM(this.items[V],V);const S=Vo.relativeComplement(b,v);for(const V of S)for(let M=V.start;M<V.end;M++)this.removeItemFromDOM(M);const y=h.map(V=>uz(V,m)),A=[{start:e,end:e+n.length},...y].map(V=>Vo.intersect(v,V)),N=this.getNextToLastElement(A);for(const V of A)for(let M=V.start;M<V.end;M++){const R=this.items[M],Y=a.get(R.templateId),X=Y==null?void 0:Y.pop();this.insertItemInDOM(M,N,X)}for(const V of a.values())for(const M of V)this.cache.release(M);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),p.map(V=>V.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=rg(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:xEe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:C9(this.domNode)})}render(e,t,n,r,s,o=!1){const a=this.getRenderRange(t,n),u=Vo.relativeComplement(a,e),d=Vo.relativeComplement(e,a),h=this.getNextToLastElement(u);if(o){const f=Vo.intersect(e,a);for(let p=f.start;p<f.end;p++)this.updateItemInDOM(this.items[p],p)}for(const f of u)for(let p=f.start;p<f.end;p++)this.insertItemInDOM(p,h);for(const f of d)for(let p=f.start;p<f.end;p++)this.removeItemFromDOM(p);r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const r=this.items[e];r.row||(r.row=n??this.cache.alloc(r.templateId));const s=this.accessibilityProvider.getRole(r.element)||"listitem";r.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(r.element);typeof o<"u"&&r.row.domNode.setAttribute("aria-checked",String(!!o)),r.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(r.row.domNode,t):this.rowsContainer.appendChild(r.row.domNode)),this.updateItemInDOM(r,e);const a=this.renderers.get(r.templateId);if(!a)throw new Error(`No renderer found for template id ${r.templateId}`);a&&a.renderElement(r.element,e,r.row.templateData,r.size);const u=this.dnd.getDragURI(r.element);r.dragStartDisposable.dispose(),r.row.domNode.draggable=!!u,u&&(r.dragStartDisposable=Ge(r.row.domNode,"dragstart",d=>this.onDragStart(r.element,u,d))),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=wl?"-moz-fit-content":"fit-content",e.width=C9(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Rt.map(this.disposables.add(new Ui(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return Rt.map(this.disposables.add(new Ui(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Rt.filter(Rt.map(this.disposables.add(new Ui(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return Rt.map(this.disposables.add(new Ui(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return Rt.any(Rt.map(this.disposables.add(new Ui(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),Rt.map(this.disposables.add(new Ui(this.domNode,lr.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return Rt.map(this.disposables.add(new Ui(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return Rt.map(this.disposables.add(new Ui(this.rowsContainer,lr.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(Ode.TEXT,t),n.dataTransfer.setDragImage){let s;this.dnd.getDragLabel&&(s=this.dnd.getDragLabel(r,n)),typeof s>"u"&&(s=String(r.length));const o=qe(".monaco-drag-image");o.textContent=s,document.body.appendChild(o),n.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new SM(r),Kg.CurrentDragAndDropData=new R4e(r),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Kg.CurrentDragAndDropData&&Kg.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Kg.CurrentDragAndDropData)this.currentDragData=Kg.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new P4e}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Eb(n).filter(r=>r>=-1&&r<this.length).sort((r,s)=>r-s),n=n[0]===-1?[-1]:n,F4e(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Un(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const r of n){const s=this.items[r];s.dropTarget=!0,s.row&&s.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Un(()=>{for(const r of n){const s=this.items[r];s.dropTarget=!1,s.row&&s.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=wb(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Kg.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Kg.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Oe.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=aue(this.domNode).top;this.dragOverAnimationDisposable=OEe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=wb(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const r=n.getAttribute("data-index");if(r){const s=Number(r);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const r=this.getRenderRange(e,t);let s,o;e===this.elementTop(r.start)?(s=r.start,o=0):r.end-r.start>1&&(s=r.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const u=this.getRenderRange(e,t);let d=!1;for(let h=u.start;h<u.end;h++){const f=this.probeDynamicHeight(h);f!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=f,d=d||f!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();const h=Vo.relativeComplement(r,u);for(const p of h)for(let m=p.start;m<p.end;m++)this.items[m].row&&this.removeItemFromDOM(m);const f=Vo.relativeComplement(u,r);for(const p of f)for(let m=p.start;m<p.end;m++){const v=m+1,b=v<this.items.length?this.items[v].row:null,L=b?b.domNode:null;this.insertItemInDOM(m,L)}for(let p=u.start;p<u.end;p++)this.items[p].row&&this.updateItemInDOM(this.items[p],p);if(typeof s=="number"){const p=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(s)-o+p;this.setScrollTop(m,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-n}const r=this.cache.alloc(t.templateId);r.domNode.style.height="",this.rowsContainer.appendChild(r.domNode);const s=this.renderers.get(t.templateId);return s&&(s.renderElement(t.element,e,r.templateData,void 0),s.disposeElement&&s.disposeElement(t.element,e,r.templateData,void 0)),t.size=r.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(r.domNode),this.cache.release(r),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),ri(this.disposables)}}lf.InstanceCount=0;DC([Is],lf.prototype,"onMouseClick",null);DC([Is],lf.prototype,"onMouseDblClick",null);DC([Is],lf.prototype,"onMouseMiddleClick",null);DC([Is],lf.prototype,"onMouseDown",null);DC([Is],lf.prototype,"onContextMenu",null);DC([Is],lf.prototype,"onTouchStart",null);DC([Is],lf.prototype,"onTap",null);var IC=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class W4e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const r=this.renderedElements.findIndex(s=>s.templateData===n);if(r>=0){const s=this.renderedElements[r];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const r=[];for(const s of this.renderedElements)s.index<e?r.push(s):s.index>=e+t&&r.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let M3=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new Ce,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new W4e(this)}splice(e,t,n){var r;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(d=>d<e),...n.map((d,h)=>d?h+e:-1).filter(d=>d!==-1),...this.sortedIndexes.filter(d=>d>=o).map(d=>d+s)],u=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&u>0){const d=(r=this.sortedIndexes.find(h=>h>=e))!==null&&r!==void 0?r:u-1;a.push(Math.min(d,u-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=u}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Lte),t)}_set(e,t,n){const r=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=cz(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return Dq(this.sortedIndexes,e,Lte)>=0}dispose(){ri(this._onChange)}};IC([Is],M3.prototype,"renderer",null);class V4e extends M3{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class S6{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const r=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),s=n.map(o=>r.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,s)}}function I0(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function $w(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:$w(i.parentElement)}class Lhe{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Je,this.multipleSelectionDisposables=new Je,this.onKeyDown.filter(r=>r.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(r=>(qn?r.metaKey:r.ctrlKey)&&r.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return Rt.chain(this.disposables.add(new Ui(this.view.domNode,"keydown")).event).filter(e=>!I0(e.target)).map(e=>new yr(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(qn?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(xa(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}IC([Is],Lhe.prototype,"onKeyDown",null);var zw;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(zw||(zw={}));const Ehe=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class H4e{constructor(e,t,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=r,this.enabled=!1,this.state=zw.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Je,this.disposables=new Je,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=Rt.chain(this.enabledDisposables.add(new Ui(this.view.domNode,"keydown")).event).filter(r=>!I0(r.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(r=>new yr(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>r.preventDefault()).map(r=>r.browserEvent.key).event,t=Rt.debounce(e,()=>null,800);Rt.reduce(Rt.any(e,t),(r,s)=>s===null?null:(r||"")+s)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&To(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=zw.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===zw.Idle?1:0;this.state=zw.Typing;for(let s=0;s<this.list.length;s++){const o=(n+s+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),u=a&&a.toString();if(typeof u>"u"||rB(e,u)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class $4e{constructor(e,t){this.list=e,this.view=t,this.disposables=new Je,Rt.chain(this.disposables.add(new Ui(t.domNode,"keydown")).event).filter(r=>!I0(r.target)).map(r=>new yr(r)).filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const r=n.querySelector("[tabIndex]");if(!r||!(r instanceof HTMLElement)||r.tabIndex===-1)return;const s=window.getComputedStyle(r);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function xhe(i){return qn?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function Dhe(i){return i.browserEvent.shiftKey}function z4e(i){return i instanceof MouseEvent&&i.button===2}const Ste={isSelectionSingleChangeEvent:xhe,isSelectionRangeChangeEvent:Dhe};class Ihe{constructor(e){this.list=e,this.disposables=new Je,this._onPointer=new Ce,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Ste),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Hi.addTarget(e.getHTMLElement()))),Rt.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Ste))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){$w(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if($w(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||I0(e.browserEvent.target)||$w(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),z4e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(I0(e.browserEvent.target)||$w(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const h=this.list.getFocus()[0];n=h??t,this.list.setAnchor(n)}const r=Math.min(n,t),s=Math.max(n,t),o=xa(r,s+1),a=this.list.getSelection(),u=K4e(cz(a,[n]),n);if(u.length===0)return;const d=cz(o,q4e(a,u));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),s=r.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class The{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):qn||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const U4e={listFocusBackground:ye.fromHex("#7FB0D0"),listActiveSelectionBackground:ye.fromHex("#0E639C"),listActiveSelectionForeground:ye.fromHex("#FFFFFF"),listActiveSelectionIconForeground:ye.fromHex("#FFFFFF"),listFocusAndSelectionBackground:ye.fromHex("#094771"),listFocusAndSelectionForeground:ye.fromHex("#FFFFFF"),listInactiveSelectionBackground:ye.fromHex("#3F3F46"),listInactiveSelectionIconForeground:ye.fromHex("#FFFFFF"),listHoverBackground:ye.fromHex("#2A2D2E"),listDropBackground:ye.fromHex("#383B3D"),treeIndentGuidesStroke:ye.fromHex("#a9a9a9"),tableColumnsBorder:ye.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:ye.fromHex("#cccccc").transparent(.04)},j4e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function K4e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let r=t-1;for(;r>=0&&i[r]===e-(t-r);)n.push(i[r--]);for(n.reverse(),r=t;r<i.length&&i[r]===e+(r-t);)n.push(i[r++]);return n}function cz(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){t.push(i[n]),n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):t.push(e[r++]);return t}function q4e(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):r++;return t}const Lte=(i,e)=>i-e;class G4e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let s=0;for(const o of this.renderers)o.renderElement(e,t,n[s++],r)}disposeElement(e,t,n,r){let s=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,n[s],r),s+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class Y4e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const r=this.accessibilityProvider.getAriaLabel(e);r?n.setAttribute("aria-label",r):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class Z4e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,r){return this.dnd.onDragOver(e,t,n,r)}onDragLeave(e,t,n,r){var s,o;(o=(s=this.dnd).onDragLeave)===null||o===void 0||o.call(s,e,t,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,r){this.dnd.drop(e,t,n,r)}}class Eg{constructor(e,t,n,r,s=j4e){var o;this.user=e,this._options=s,this.focus=new M3("focused"),this.anchor=new M3("anchor"),this.eventBufferer=new tq,this._ariaLabel="",this.disposables=new Je,this._onDidDispose=new Ce,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new V4e(a!=="listbox"),Lg(s,U4e,!1);const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(u.push(new Y4e(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(h=>new G4e(h.templateId,[...u,h]));const d=Object.assign(Object.assign({},s),{dnd:s.dnd&&new Z4e(this,s.dnd)});if(this.view=new lf(t,n,r,d),this.view.domNode.setAttribute("role",a),s.styleController)this.styleController=s.styleController(this.view.domId);else{const h=uc(this.view.domNode);this.styleController=new The(h,this.view.domId)}if(this.spliceable=new k4e([new S6(this.focus,this.view,s.identityProvider),new S6(this.selection,this.view,s.identityProvider),new S6(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new $4e(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new Lhe(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const h=s.keyboardNavigationDelegate||Ehe;this.typeLabelController=new H4e(this,this.view,s.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Rt.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return Rt.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Rt.chain(this.disposables.add(new Ui(this.view.domNode,"keydown")).event).map(s=>new yr(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(Wee).filter(()=>!1).event,n=Rt.chain(this.disposables.add(new Ui(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(s=>new yr(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(Wee).map(({browserEvent:s})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,u=typeof a<"u"?this.view.element(a):void 0,d=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:u,anchor:d,browserEvent:s}}).event,r=Rt.chain(this.view.onContextMenu).filter(s=>!e).map(({element:s,index:o,browserEvent:a})=>({element:s,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Rt.any(t,n,r)}get onKeyDown(){return this.disposables.add(new Ui(this.view.domNode,"keydown")).event}get onDidFocus(){return Rt.signal(this.disposables.add(new Ui(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new Ihe(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new o1(this.user,`Invalid start index: ${e}`);if(t<0)throw new o1(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new o1(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new o1(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return LH(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new o1(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,r);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,r);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return yte(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const r=this.view.element(n),s=this.getFocusedElements()[0];if(s!==r){const o=this.findPreviousIndex(n,!1,t);o>-1&&s!==this.view.element(o)?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield m0(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return yte(this,void 0,void 0,function*(){let n;const r=this.view.getScrollTop();r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const s=this.view.element(n),o=this.getFocusedElements()[0];if(o!==s){const a=this.findNextIndex(n,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=r;this.view.setScrollTop(r-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield m0(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new o1(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(Sb(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*Mc(t,0,1)+r)}else{const o=r+s,a=n+this.view.renderHeight;r<n&&o>=a||(r<n||o>=a&&s>=this.view.renderHeight?this.view.setScrollTop(r):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new o1(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<t||n+r>t+this.view.renderHeight)return null;const s=r-this.view.renderHeight;return Math.abs((t-n)/s)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}IC([Is],Eg.prototype,"onDidChangeFocus",null);IC([Is],Eg.prototype,"onDidChangeSelection",null);IC([Is],Eg.prototype,"onContextMenu",null);IC([Is],Eg.prototype,"onKeyDown",null);IC([Is],Eg.prototype,"onDidFocus",null);class X4e{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Oe.None}}renderElement(e,t,n,r){if(n.disposable&&n.disposable.dispose(),!n.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,n.data,r);const o=new oa,a=s.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(u=>this.renderer.renderElement(u,e,n.data,r))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class Q4e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function J4e(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new Q4e(i,e.accessibilityProvider)})}class eFe{constructor(e,t,n,r,s={}){const o=()=>this.model,a=r.map(u=>new X4e(u,o));this.list=new Eg(e,t,n,a,J4e(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Rt.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Rt.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Rt.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(r=>this._model.get(r)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,xa(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const tFe={separatorBorder:ye.transparent};class khe{constructor(e,t,n,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=Mc(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class nFe extends khe{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class iFe extends khe{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var qg;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(qg||(qg={}));var R3;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(R3||(R3={}));class Nhe extends Oe{constructor(e,t={}){var n,r,s,o,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=qg.Idle,this._onDidSashChange=this._register(new Ce),this._onDidSashReset=this._register(new Ce),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(r=t.inverseAltBehavior)!==null&&r!==void 0?r:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Be(this.el,qe(".sash-container")),this.viewContainer=qe(".split-view-container"),this.scrollable=new Y8(125,rg),this.scrollableElement=this._register(new hG(this.viewContainer,{vertical:this.orientation===0?(o=t.scrollbarVisibility)!==null&&o!==void 0?o:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(u=>{this.viewContainer.scrollTop=u.scrollTop,this.viewContainer.scrollLeft=u.scrollLeft})),Be(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||tFe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((u,d)=>{const h=pl(u.visible)||u.visible?u.size:{type:"invisible",cachedVisibleSize:u.size},f=u.view;this.doAddView(f,h,d,!0)}),this.contentSize=this.viewItems.reduce((u,d)=>u+d.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,r){this.doAddView(e,t,n,r)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let r=0;r<this.viewItems.length;r++){const s=this.viewItems[r];s.size=Mc(Math.round(this.proportions[r]*e),s.minimumSize,s.maximumSize)}else{const r=xa(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const r=this.sashItems.findIndex(a=>a.sash===e),s=t0(Ge(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),Ge(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,u)=>{const d=this.viewItems.map(v=>v.size);let h=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(u=!u),u)if(r===this.sashItems.length-1){const b=this.viewItems[r];h=(b.minimumSize-b.size)/2,f=(b.maximumSize-b.size)/2}else{const b=this.viewItems[r+1];h=(b.size-b.maximumSize)/2,f=(b.size-b.minimumSize)/2}let p,m;if(!u){const v=xa(r,-1),b=xa(r+1,this.viewItems.length),L=v.reduce((R,Y)=>R+(this.viewItems[Y].minimumSize-d[Y]),0),S=v.reduce((R,Y)=>R+(this.viewItems[Y].viewMaximumSize-d[Y]),0),y=b.length===0?Number.POSITIVE_INFINITY:b.reduce((R,Y)=>R+(d[Y]-this.viewItems[Y].minimumSize),0),E=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((R,Y)=>R+(d[Y]-this.viewItems[Y].viewMaximumSize),0),A=Math.max(L,E),N=Math.min(y,S),V=this.findFirstSnapIndex(v),M=this.findFirstSnapIndex(b);if(typeof V=="number"){const R=this.viewItems[V],Y=Math.floor(R.viewMinimumSize/2);p={index:V,limitDelta:R.visible?A-Y:A+Y,size:R.size}}if(typeof M=="number"){const R=this.viewItems[M],Y=Math.floor(R.viewMinimumSize/2);m={index:M,limitDelta:R.visible?N+Y:N-Y,size:R.size}}}this.sashDragState={start:a,current:a,index:r,sizes:d,minDelta:h,maxDelta:f,alt:u,snapBefore:p,snapAfter:m,disposable:s}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:r,alt:s,minDelta:o,maxDelta:a,snapBefore:u,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const h=e-n,f=this.resize(t,h,r,void 0,void 0,o,a,u,d);if(s){const p=t===this.sashItems.length-1,m=this.viewItems.map(E=>E.size),v=p?t:t+1,b=this.viewItems[v],L=b.size-b.maximumSize,S=b.size-b.minimumSize,y=p?t-1:t+1;this.resize(y,-f,m,void 0,void 0,L,S)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Mc(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==qg.Idle)throw new Error("Cant modify splitview");if(this.state=qg.Busy,e<0||e>=this.viewItems.length)return;const n=xa(this.viewItems.length).filter(a=>a!==e),r=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=Mc(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(r,s),this.state=qg.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Mc(n,a.minimumSize,a.maximumSize);const r=xa(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,r){if(this.state!==qg.Idle)throw new Error("Cant modify splitview");this.state=qg.Busy;const s=qe(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const o=e.onDidChange(p=>this.onViewChange(h,p)),a=Un(()=>this.viewContainer.removeChild(s)),u=t0(o,a);let d;typeof t=="number"?d=t:t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize;const h=this.orientation===0?new nFe(s,e,d,u):new iFe(s,e,d,u);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){let p={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const m=this.orientation===0?new Ho(this.sashContainer,{getHorizontalSashTop:R=>this.getSashPosition(R),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:1})):new Ho(this.sashContainer,{getVerticalSashLeft:R=>this.getSashPosition(R),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:0})),v=this.orientation===0?R=>({sash:m,start:R.startY,current:R.currentY,alt:R.altKey}):R=>({sash:m,start:R.startX,current:R.currentX,alt:R.altKey}),L=Rt.map(m.onDidStart,v)(this.onSashStart,this),y=Rt.map(m.onDidChange,v)(this.onSashChange,this),A=Rt.map(m.onDidEnd,()=>this.sashItems.findIndex(R=>R.sash===m))(this.onSashEnd,this),N=m.onDidReset(()=>{const R=this.sashItems.findIndex(O=>O.sash===m),Y=xa(R,-1),X=xa(R+1,this.viewItems.length),$=this.findFirstSnapIndex(Y),T=this.findFirstSnapIndex(X);typeof $=="number"&&!this.viewItems[$].visible||typeof T=="number"&&!this.viewItems[T].visible||this._onDidSashReset.fire(R)}),V=t0(L,y,A,N,m),M={sash:m,disposable:V};this.sashItems.splice(n-1,0,M)}s.appendChild(e.element);let f;typeof t!="number"&&t.type==="split"&&(f=[t.index]),r||this.relayout([n],f),this.state=qg.Idle,!r&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((r,s)=>r+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),r,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u,d){if(e<0||e>=this.viewItems.length)return 0;const h=xa(e,-1),f=xa(e+1,this.viewItems.length);if(s)for(const M of s)S9(h,M),S9(f,M);if(r)for(const M of r)ER(h,M),ER(f,M);const p=h.map(M=>this.viewItems[M]),m=h.map(M=>n[M]),v=f.map(M=>this.viewItems[M]),b=f.map(M=>n[M]),L=h.reduce((M,R)=>M+(this.viewItems[R].minimumSize-n[R]),0),S=h.reduce((M,R)=>M+(this.viewItems[R].maximumSize-n[R]),0),y=f.length===0?Number.POSITIVE_INFINITY:f.reduce((M,R)=>M+(n[R]-this.viewItems[R].minimumSize),0),E=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((M,R)=>M+(n[R]-this.viewItems[R].maximumSize),0),A=Math.max(L,E,o),N=Math.min(y,S,a);let V=!1;if(u){const M=this.viewItems[u.index],R=t>=u.limitDelta;V=R!==M.visible,M.setVisible(R,u.size)}if(!V&&d){const M=this.viewItems[d.index],R=t<d.limitDelta;V=R!==M.visible,M.setVisible(R,d.size)}if(V)return this.resize(e,t,n,r,s,o,a);t=Mc(t,A,N);for(let M=0,R=t;M<p.length;M++){const Y=p[M],X=Mc(m[M]+R,Y.minimumSize,Y.maximumSize),$=X-m[M];R-=$,Y.size=X}for(let M=0,R=t;M<v.length;M++){const Y=v[M],X=Mc(b[M]-R,Y.minimumSize,Y.maximumSize),$=X-b[M];R+=$,Y.size=X}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,u)=>a+u.size,0);let n=this.size-t;const r=xa(this.viewItems.length-1,-1),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);for(const a of o)S9(r,a);for(const a of s)ER(r,a);typeof e=="number"&&ER(r,e);for(let a=0;n!==0&&a<r.length;a++){const u=this.viewItems[r[a]],d=Mc(u.size+n,u.minimumSize,u.maximumSize),h=d-u.size;n-=h,u.size=d}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(u=>e=u.size-u.minimumSize>0||e);e=!1;const n=this.viewItems.map(u=>e=u.maximumSize-u.size>0||e),r=[...this.viewItems].reverse();e=!1;const s=r.map(u=>e=u.size-u.minimumSize>0||e).reverse();e=!1;const o=r.map(u=>e=u.maximumSize-u.size>0||e).reverse();let a=0;for(let u=0;u<this.sashItems.length;u++){const{sash:d}=this.sashItems[u],h=this.viewItems[u];a+=h.size;const f=!(t[u]&&o[u+1]),p=!(n[u]&&s[u+1]);if(f&&p){const m=xa(u,-1),v=xa(u+1,this.viewItems.length),b=this.findFirstSnapIndex(m),L=this.findFirstSnapIndex(v),S=typeof b=="number"&&!this.viewItems[b].visible,y=typeof L=="number"&&!this.viewItems[L].visible;S&&s[u]&&(a>0||this.startSnappingEnabled)?d.state=1:y&&t[u]&&(a<this.contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else f&&!p?d.state=1:!f&&p?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class LM{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=LM.TemplateId,this.renderedTemplates=new Set;const r=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=r.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=Be(e,qe(".monaco-table-tr")),n=[],r=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],u=Be(t,qe(".monaco-table-td",{"data-col-index":o}));u.style.width=`${this.getColumnSize(o)}px`,n.push(u),r.push(a.renderTemplate(u))}const s={container:e,cellContainers:n,cellTemplateData:r};return this.renderedTemplates.add(s),s}renderElement(e,t,n,r){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],r)}}disposeElement(e,t,n,r){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const u=this.columns[s].project(e);o.disposeElement(u,t,n.cellTemplateData[s],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Hs(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}LM.TemplateId="row";function rFe(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return LM.TemplateId}}}class sFe{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new Ce,this.onDidLayout=this._onDidLayout.event,this.element=qe(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Rt.None}layout(e){this._onDidLayout.fire([this.index,e])}}class lB{constructor(e,t,n,r,s,o){this.virtualDelegate=n,this.domId=`table_id_${++lB.InstanceCount}`,this.disposables=new Je,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Be(t,qe(`.monaco-table.${this.domId}`));const a=r.map((h,f)=>new sFe(h,f)),u={size:a.reduce((h,f)=>h+f.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new Nhe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:u})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const d=new LM(r,s,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new Eg(e,this.domNode,rFe(n),[d],o)),Rt.any(...a.map(h=>h.onDidLayout))(([h,f])=>d.layoutColumn(h,f),null,this.disposables),this.splitview.onDidSashReset(h=>{const f=r.reduce((m,v)=>m+v.weight,0),p=r[h].weight/f*this.cachedWidth;this.splitview.resizeView(h,p)},null,this.disposables),this.styleElement=uc(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}lB.InstanceCount=0;var z2;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element"})(z2||(z2={}));class Zu extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class jG{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function KG(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function oO(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function L6(i){return typeof i.collapsible=="boolean"}class oFe{constructor(e,t,n,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new tq,this._onDidChangeCollapseState=new Ce,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Ce,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Ce,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Qn.empty(),r={}){if(e.length===0)throw new Zu(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,n,r):this.spliceSimple(e,t,n,r)}spliceSmart(e,t,n,r,s,o){var a;r===void 0&&(r=Qn.empty()),o===void 0&&(o=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:u}=this.getParentNodeWithListIndex(t);if(!u.lastDiffIds)return this.spliceSimple(t,n,r,s);const d=[...r],h=t[t.length-1],f=new Bf({getElements:()=>u.lastDiffIds},{getElements:()=>[...u.children.slice(0,h),...d,...u.children.slice(h+n)].map(L=>e.getId(L.element).toString())}).ComputeDiff(!1);if(f.quitEarly)return u.lastDiffIds=void 0,this.spliceSimple(t,n,d,s);const p=t.slice(0,-1),m=(L,S,y)=>{if(o>0)for(let E=0;E<y;E++)L--,S--,this.spliceSmart(e,[...p,L,0],Number.MAX_SAFE_INTEGER,d[S].children,s,o-1)};let v=Math.min(u.children.length,h+n),b=d.length;for(const L of f.changes.sort((S,y)=>y.originalStart-S.originalStart))m(v,b,v-(L.originalStart+L.originalLength)),v=L.originalStart,b=L.modifiedStart-h,this.spliceSimple([...p,v],L.originalLength,Qn.slice(d,b,b+L.modifiedLength),s);m(v,b,v)}spliceSimple(e,t,n=Qn.empty(),{onDidCreateNode:r,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:a,listIndex:u,revealed:d,visible:h}=this.getParentNodeWithListIndex(e),f=[],p=Qn.map(n,M=>this.createTreeNode(M,a,a.visible?1:0,d,f,r)),m=e[e.length-1],v=a.children.length>0;let b=0;for(let M=m;M>=0&&M<a.children.length;M--){const R=a.children[M];if(R.visible){b=R.visibleChildIndex;break}}const L=[];let S=0,y=0;for(const M of p)L.push(M),y+=M.renderNodeCount,M.visible&&(M.visibleChildIndex=b+S++);const E=uJ(a.children,m,t,L);o?a.lastDiffIds?uJ(a.lastDiffIds,m,t,L.map(M=>o.getId(M.element).toString())):a.lastDiffIds=a.children.map(M=>o.getId(M.element).toString()):a.lastDiffIds=void 0;let A=0;for(const M of E)M.visible&&A++;if(A!==0)for(let M=m+L.length;M<a.children.length;M++){const R=a.children[M];R.visible&&(R.visibleChildIndex-=A)}if(a.visibleChildrenCount+=S-A,d&&h){const M=E.reduce((R,Y)=>R+(Y.visible?Y.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,y-M),this.list.splice(u,M,f)}if(E.length>0&&s){const M=R=>{s(R),R.children.forEach(M)};E.forEach(M)}const N=a.children.length>0;v!==N&&this.setCollapsible(e.slice(0,-1),N),this._onDidSplice.fire({insertedNodes:L,deletedNodes:E});let V=a;for(;V;){if(V.visibility===2){this.refilter();break}V=V.parent}}rerender(e){if(e.length===0)throw new Zu(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:r}=this.getTreeNodeWithListIndex(e);return n&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const r=this.getTreeNode(e);typeof t>"u"&&(t=!r.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:r,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,r,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!L6(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let u=0;u<n.children.length;u++)if(n.children[u].visible)if(a>-1){a=-1;break}else a=u;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,r){const s=this._setNodeCollapseState(e,r,!1);if(!n||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),u=o-(t===-1?0:1);return this.list.splice(t+1,u,a.slice(1)),s}_setNodeCollapseState(e,t,n){let r;if(e===this.root?r=!1:(L6(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!L6(t)&&t.recursive)for(const s of e.children)r=this._setNodeCollapseState(s,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,r,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},u=this._filterNode(a,n);a.visibility=u,r&&s.push(a);const d=e.children||Qn.empty(),h=r&&u!==0&&!a.collapsed,f=Qn.map(d,v=>this.createTreeNode(v,a,u,h,s,o));let p=0,m=1;for(const v of f)a.children.push(v),m+=v.renderNodeCount,v.visible&&(v.visibleChildIndex=p++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=p,a.visible=u===2?p>0:u===1,a.visible?a.collapsed||(a.renderNodeCount=m):(a.renderNodeCount=0,r&&s.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,r=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let u=0;for(const d of e.children)a=this._updateNodeAfterFilterChange(d,s,n,r&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=u++);e.visibleChildrenCount=u}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):KG(n)?(e.filterData=n.data,oO(n.visibility)):(e.filterData=void 0,oO(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...r]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(r,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...r]=e;if(n<0||n>t.children.length)throw new Zu(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:r,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Zu(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:r,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,r=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Zu(this.user,"Invalid tree location");for(let u=0;u<o;u++)n+=t.children[u].renderNodeCount;return r=r&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:r,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],n+1,r,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:kxe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class aFe extends SM{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function E6(i){return i instanceof SM?new aFe(i):i}class lFe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Oe.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(E6(e),t)}onDragOver(e,t,n,r,s=!0){const o=this.dnd.onDragOver(E6(e),t&&t.element,n,r),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=wb(()=>{const p=this.modelProvider(),m=p.getNodeLocation(t);p.isCollapsed(m)&&p.setCollapsed(m,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!s){const p=typeof o=="boolean"?o:o.accept,m=typeof o=="boolean"?void 0:o.effect;return{accept:p,effect:m,feedback:[n]}}return o}if(o.bubble===1){const p=this.modelProvider(),m=p.getNodeLocation(t),v=p.getParentNodeLocation(m),b=p.getNode(v),L=v&&p.getListIndex(v);return this.onDragOver(e,b,L,r,!1)}const u=this.modelProvider(),d=u.getNodeLocation(t),h=u.getListIndex(d),f=u.getListRenderCount(d);return Object.assign(Object.assign({},o),{feedback:xa(h,h+f)})}drop(e,t,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(E6(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function uFe(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new lFe(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),r=n.getNodeLocation(t),s=n.getParentNodeLocation(r);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class qG{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var aO;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(aO||(aO={}));class cFe{constructor(e,t=[]){this._elements=t,this.onDidChange=Rt.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class lO{constructor(e,t,n,r,s={}){this.renderer=e,this.modelProvider=t,this.activeNodes=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=lO.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new ADe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Oe.None,this.disposables=new Je,this.templateId=e.templateId,this.updateOptions(s),Rt.map(n,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=Mc(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==aO.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Je;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Be(e,qe(".monaco-tl-row")),n=Be(t,qe(".monaco-tl-indent")),r=Be(t,qe(".monaco-tl-twistie")),s=Be(t,qe(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:r,indentGuidesDisposable:Oe.None,templateData:o}}renderElement(e,t,n,r){typeof r=="number"&&(this.renderedNodes.set(e,{templateData:n,height:r}),this.renderedElements.set(e.element,e));const s=lO.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${s}px`,n.indent.style.width=`${s+this.indent-16}px`,this.renderTwistie(e,n),typeof r=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,r)}disposeElement(e,t,n,r){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(..._e.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(..._e.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Hs(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Je,r=this.modelProvider();let s=e;for(;;){const o=r.getNodeLocation(s),a=r.getParentNodeLocation(o);if(!a)break;const u=r.getNode(a),d=qe(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(u)&&d.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(d):t.indent.insertBefore(d,t.indent.firstElementChild),this.renderedIndentGuides.add(u,d),n.add(Un(()=>this.renderedIndentGuides.delete(u,d))),s=u}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(r=>{const s=n.getNodeLocation(r);try{const o=n.getParentNodeLocation(s);r.collapsible&&r.children.length>0&&!r.collapsed?t.add(r):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(r=>{t.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.remove("active"))}),t.forEach(r=>{this.activeIndentNodes.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ri(this.disposables)}}lO.DefaultIndent=8;class dFe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Je,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const s=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return s;let o;if(typeof s=="boolean"?o=s?1:0:KG(s)?o=oO(s.visibility):o=s,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Yh.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(n)?n:[n];for(const s of r){const o=s&&s.toString();if(typeof o>"u")return{data:Yh.Default,visibility:!0};const a=nS(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,r.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Yh.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ri(this.disposables)}}class hFe{constructor(e,t,n,r,s){this.tree=e,this.view=n,this.filter=r,this.keyboardNavigationDelegate=s,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new Ce,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new Ce,this.enabledDisposables=new Je,this.disposables=new Je,this.domNode=qe(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(Ge(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=Be(n.getHTMLElement(),qe(".monaco-list-type-filter-message")),this.labelDomNode=Be(this.domNode,qe("span.label"));const o=Be(this.domNode,qe(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=Be(o,qe("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(Ge(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=Be(o,qe("button.clear"+_e.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=C("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Ui(this.view.getHTMLElement(),"keydown")),t=Rt.chain(e.event).filter(r=>!I0(r.target)||r.target===this.filterOnTypeDomNode).filter(r=>r.key!=="Dead"&&!/^Media/.test(r.key)).map(r=>new yr(r)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(r=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(r)&&!(r.keyCode===18||r.keyCode===16||r.keyCode===15||r.keyCode===17)||(this.pattern.length>0||this.triggered)&&(r.keyCode===9||r.keyCode===1)&&!r.altKey&&!r.ctrlKey&&!r.metaKey||r.keyCode===1&&(qn?r.altKey&&!r.metaKey:r.ctrlKey)&&!r.shiftKey).forEach(r=>{r.stopPropagation(),r.preventDefault()}).event,n=this.enabledDisposables.add(new Ui(this.clearDomNode,"click"));Rt.chain(Rt.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(qn?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,r=>!Yh.isDefault(r.filterData));const n=this.tree.getFocus();if(n.length>0){const r=n[0];this.tree.getRelativeTop(r)===null&&this.tree.reveal(r,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Uo(e),n=e.clientWidth,r=n/2,s=this.domNode.clientWidth,o=new Je;let a=this.positionClassName;const u=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-s-6}px`;break}},d=f=>{f.preventDefault();const p=f.clientX-t;f.dataTransfer&&(f.dataTransfer.dropEffect="none"),p<r?a="nw":a="ne",u()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",ri(o)};u(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(Un(()=>this.domNode.classList.remove("dragging"))),o.add(Ge(document,"dragover",f=>d(f))),o.add(Ge(this.domNode,"dragend",()=>h())),Kg.CurrentDragAndDropData=new WMe("vscode-ui"),o.add(Un(()=>Kg.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(..._e.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(..._e.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=C("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(..._e.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(..._e.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=C("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=C("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=C("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?""+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Yh.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),ri(this.disposables)}}function Ete(i){let e=z2.Unknown;return nJ(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=z2.Twistie:nJ(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=z2.Element),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function g4(i,e){e(i),i.children.forEach(t=>g4(t,e))}class x6{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&rc(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const u=this.createNodeSet(),d=h=>u.delete(h);t.forEach(h=>g4(h,d)),this.set([...u.values()]);return}const n=new Set,r=u=>n.add(this.identityProvider.getId(u.element).toString());t.forEach(u=>g4(u,r));const s=new Map,o=u=>s.set(this.identityProvider.getId(u.element).toString(),u);e.forEach(u=>g4(u,o));const a=[];for(const u of this.nodes){const d=this.identityProvider.getId(u.element).toString();if(!n.has(d))a.push(u);else{const f=s.get(d);f&&a.push(f)}}if(this.nodes.length>0&&a.length===0){const u=this.getFirstViewElementWithTrait();u&&a.push(u)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class fFe extends Ihe{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(I0(e.browserEvent.target)||$w(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,r=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!r&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),u=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,u),s&&r)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class gFe extends Eg{constructor(e,t,n,r,s,o,a,u){super(e,t,n,r,u),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new fFe(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const r=[],s=[];let o;n.forEach((a,u)=>{this.focusTrait.has(a)&&r.push(e+u),this.selectionTrait.has(a)&&s.push(e+u),this.anchorTrait.has(a)&&(o=e+u)}),r.length>0&&super.setFocus(Eb([...super.getFocus(),...r])),s.length>0&&super.setSelection(Eb([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(r=>this.element(r)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(r=>this.element(r)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Ahe{constructor(e,t,n,r,s={}){this._options=s,this.eventBufferer=new tq,this.disposables=new Je,this._onWillRefilter=new Ce,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Ce;const o=new qG(n),a=new QQ,u=new QQ,d=new cFe(u.event);this.renderers=r.map(p=>new lO(p,()=>this.model,a.event,d,s));for(let p of this.renderers)this.disposables.add(p);let h;s.keyboardNavigationLabelProvider&&(h=new dFe(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:h}),this.disposables.add(h)),this.focus=new x6(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new x6(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new x6(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new gFe(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},uFe(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),a.input=this.model.onDidChangeCollapseState;const f=Rt.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})});if(f(()=>null,null,this.disposables),u.input=Rt.chain(Rt.any(f,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const p=new Set;for(const m of this.focus.getNodes())p.add(m);for(const m of this.selection.getNodes())p.add(m);return[...p.values()]}).event,s.keyboardSupport!==!1){const p=Rt.chain(this.view.onKeyDown).filter(m=>!I0(m.target)).map(m=>new yr(m));p.filter(m=>m.keyCode===15).on(this.onLeftArrow,this,this.disposables),p.filter(m=>m.keyCode===17).on(this.onRightArrow,this,this.disposables),p.filter(m=>m.keyCode===10).on(this.onSpace,this,this.disposables)}if(s.keyboardNavigationLabelProvider){const p=s.keyboardNavigationDelegate||Ehe;this.typeFilterController=new hFe(this,this.model,this.view,h,p),this.focusNavigationFilter=m=>this.typeFilterController.shouldAllowFocus(m),this.disposables.add(this.typeFilterController)}this.styleElement=uc(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aO.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Rt.map(this.view.onMouseDblClick,Ete)}get onPointer(){return Rt.map(this.view.onPointer,Ete)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Rt.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aO.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(r,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(r,t,!0)}focusNext(e=1,t=!1,n,r=this.focusNavigationFilter){this.view.focusNext(e,t,n,r)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!0)){const o=this.model.getParentNodeLocation(r);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!1)){if(!n.children.some(u=>u.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,s)}dispose(){ri(this.disposables),this.view.dispose()}}class GG{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new oFe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(r,s){return n.sorter.compare(r.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Qn.empty(),n={}){const r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),n)}_setChildren(e,t=Qn.empty(),n){const r=new Set,s=new Set,o=u=>{var d;if(u.element===null)return;const h=u;if(r.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const f=this.identityProvider.getId(h.element).toString();s.add(f),this.nodesByIdentity.set(f,h)}(d=n.onDidCreateNode)===null||d===void 0||d.call(n,h)},a=u=>{var d;if(u.element===null)return;const h=u;if(r.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const f=this.identityProvider.getId(h.element).toString();s.has(f)||this.nodesByIdentity.delete(f)}(d=n.onDidDeleteNode)===null||d===void 0||d.call(n,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=Qn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Qn.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const r=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,s=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:r,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getElementLocation(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Zu(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Zu(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Zu(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(n);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Zu(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function p4(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:Qn.map(Qn.from(i.children),p4),collapsible:i.collapsible,collapsed:i.collapsed}}function m4(i){const e=[i.element],t=i.incompressible||!1;let n,r;for(;[r,n]=Qn.consume(Qn.from(i.children),2),!(r.length!==1||r[0].incompressible);)i=r[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:Qn.map(Qn.concat(r,n),m4),collapsible:i.collapsible,collapsed:i.collapsed}}function dz(i,e=0){let t;return e<i.element.elements.length-1?t=[dz(i,e+1)]:t=Qn.map(Qn.from(i.children),n=>dz(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function xte(i){return dz(i,0)}function Ohe(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:Qn.map(Qn.from(i.children),n=>Ohe(n,e,t))})}const pFe=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class mFe{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new GG(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Qn.empty(),n){const r=n.diffIdentityProvider&&pFe(n.diffIdentityProvider);if(e===null){const m=Qn.map(t,this.enabled?m4:p4);this._setChildren(null,m,{diffIdentityProvider:r,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Error("Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),u=this.model.getNode(a),d=xte(o),h=Ohe(d,e,t),f=(this.enabled?m4:p4)(h),p=u.children.map(m=>m===o?f:m);this._setChildren(u.element,p,{diffIdentityProvider:r,diffDepth:o.depth-u.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,r=Qn.map(n,xte),s=Qn.map(r,e?m4:p4);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const r=new Set,s=a=>{for(const u of a.element.elements)r.add(u),this.nodes.set(u,a.element)},o=a=>{for(const u of a.element.elements)r.has(u)||this.nodes.delete(u)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Zu(this.user,`Tree element not found: ${e}`);return t}}const _Fe=i=>i[i.length-1];class YG{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new YG(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function vFe(i,e){return{splice(t,n,r){e.splice(t,n,r.map(s=>i.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function bFe(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class CFe{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||_Fe;const r=s=>this.elementMapper(s.elements);this.nodeMapper=new jG(s=>new YG(r,s)),this.model=new mFe(e,vFe(this.nodeMapper,t),bFe(r,n))}get onDidSplice(){return Rt.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Rt.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Rt.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Qn.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var wFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class ZG extends Ahe{constructor(e,t,n,r,s={}){super(e,t,n,r,s)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Qn.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new GG(e,t,n)}}class Mhe{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,r)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,r))}disposeElement(e,t,n,r){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,r):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}wFe([Is],Mhe.prototype,"compressedTreeNodeProvider",null);function yFe(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class Rhe extends ZG{constructor(e,t,n,r,s={}){const o=()=>this,a=r.map(u=>new Mhe(o,u));super(e,t,n,a,yFe(o,s))}setChildren(e,t=Qn.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new CFe(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var vv=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function D6(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function hz(i,e){return e.parent?e.parent===i?!0:hz(i,e.parent):!1}function SFe(i,e){return i===e||hz(i,e)||hz(e,i)}class XG{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new XG(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class LFe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(..._e.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._e.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function Dte(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function Ite(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class EFe extends SM{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function I6(i){return i instanceof SM?new EFe(i):i}class xFe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(I6(e),t)}onDragOver(e,t,n,r,s=!0){return this.dnd.onDragOver(I6(e),t&&t.element,n,r)}drop(e,t,n,r){this.dnd.drop(I6(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function Phe(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new xFe(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function fz(i,e){e(i),i.children.forEach(t=>fz(t,e))}class Fhe{constructor(e,t,n,r,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Ce,this._onDidChangeNodeSlowState=new Ce,this.nodeMapper=new jG(a=>new XG(a)),this.disposables=new Je,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,r,o),this.root=D6({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Rt.map(this.tree.onDidChangeFocus,Dte)}get onDidChangeSelection(){return Rt.map(this.tree.onDidChangeSelection,Dte)}get onMouseDblClick(){return Rt.map(this.tree.onMouseDblClick,Ite)}get onPointer(){return Rt.map(this.tree.onPointer,Ite)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,r,s){const o=new qG(n),a=r.map(d=>new LFe(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),u=Phe(s)||{};return new ZG(e,t,o,a,u)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return vv(this,void 0,void 0,function*(){this.refreshPromises.forEach(r=>r.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,r,s){return vv(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Zu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,r,s),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return vv(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Zu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const r=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event)),r})}setSelection(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Zu(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,r){return vv(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,r)})}refreshNode(e,t,n){return vv(this,void 0,void 0,function*(){let r;return this.subTreeRefreshPromises.forEach((s,o)=>{!r&&SFe(o,e)&&(r=s.then(()=>this.refreshNode(e,t,n)))}),r||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return vv(this,void 0,void 0,function*(){let r;e.refreshPromise=new Promise(s=>r=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield fH.settled(s.map(o=>this.doRefreshSubTree(o,t,n)))}finally{r()}})}doRefreshNode(e,t,n){return vv(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(Qn.empty());else{const s=m0(800);s.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),r=this.doGetChildren(e).finally(()=>s.cancel())}try{const s=yield r;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Cg(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=uo(()=>vv(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(gn))}setChildren(e,t,n,r){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)if(o.set(h.element,h),this.identityProvider){const f=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:f})}const u=[],d=s.map(h=>{const f=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const b=D6({element:h,parent:e,hasChildren:f});return f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(b.collapsedByDefault=!1,u.push(b)),b}const p=this.identityProvider.getId(h).toString(),m=a.get(p);if(m){const b=m.node;return o.delete(b.element),this.nodes.delete(b.element),this.nodes.set(h,b),b.element=h,b.hasChildren=f,n?m.collapsed?(b.children.forEach(L=>fz(L,S=>this.nodes.delete(S.element))),b.children.splice(0,b.children.length),b.stale=!0):u.push(b):f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(b.collapsedByDefault=!1,u.push(b)),b}const v=D6({element:h,parent:e,id:p,hasChildren:f});return r&&r.viewState.focus&&r.viewState.focus.indexOf(p)>-1&&r.focus.push(v),r&&r.viewState.selection&&r.viewState.selection.indexOf(p)>-1&&r.selection.push(v),r&&r.viewState.expanded&&r.viewState.expanded.indexOf(p)>-1?u.push(v):f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(v.collapsedByDefault=!1,u.push(v)),v});for(const h of o.values())fz(h,f=>this.nodes.delete(f.element));for(const h of d)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&u.length===0&&(d[0].collapsedByDefault=!1,u.push(d[0])),u}render(e,t,n){const r=e.children.map(o=>this.asTreeElement(o,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,r,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Qn.map(e.children,r=>this.asTreeElement(r,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class QG{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new QG(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class DFe{constructor(e,t,n,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderCompressedElements(e,t,n,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(..._e.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._e.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeCompressedElements(e,t,n,r){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ri(this.disposables)}}function IFe(i){const e=i&&Phe(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class TFe extends Fhe{constructor(e,t,n,r,s,o,a={}){super(e,t,n,s,o,a),this.compressionDelegate=r,this.compressibleNodeMapper=new jG(u=>new QG(u)),this.filter=a.filter}createTree(e,t,n,r,s){const o=new qG(n),a=r.map(d=>new DFe(d,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),u=IFe(s)||{};return new Rhe(e,t,o,a,u)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),r=p=>{const m=new Set;for(const v of p){const b=this.tree.getCompressedTreeNode(v===this.root?null:v);if(b.element)for(const L of b.element.elements)m.add(n(L.element))}return m},s=r(this.tree.getSelection()),o=r(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let u=!1;const d=this.getFocus();let h=!1;const f=p=>{const m=p.element;if(m)for(let v=0;v<m.elements.length;v++){const b=n(m.elements[v].element),L=m.elements[m.elements.length-1].element;s.has(b)&&a.indexOf(L)===-1&&(a.push(L),u=!0),o.has(b)&&d.indexOf(L)===-1&&(d.push(L),h=!0)}p.children.forEach(f)};f(this.tree.getCompressedTreeNode(e===this.root?null:e)),u&&this.setSelection(a),h&&this.setFocus(d)}processChildren(e){return this.filter&&(e=Qn.filter(e,t=>{const n=this.filter.filter(t,1),r=kFe(n);if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1})),super.processChildren(e)}}function kFe(i){return typeof i=="boolean"?i?1:0:KG(i)?oO(i.visibility):oO(i)}class NFe extends Ahe{constructor(e,t,n,r,s,o={}){super(e,t,n,r,o),this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,n){return new GG(e,t,n)}}const uB=new Dt("isWindows",Ao,C("isWindows","Whether the operating system is Windows")),AFe="inputFocus";var xg=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},kn=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const bc=gi("listService");let gz=class{constructor(e){this._themeService=e,this.disposables=new Je,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const r=new The(uc(),"");this.disposables.add(Fb(r,this._themeService))}if(this.lists.some(r=>r.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),t0(e.onDidFocus(()=>this.setLastFocusedList(e)),Un(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(r=>r!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};gz=xg([kn(0,Er)],gz);const Bhe=new Dt("listFocus",!0),cB=new Dt("listSupportsMultiselect",!0),Whe=_t.and(Bhe,_t.not(AFe)),JG=new Dt("listHasSelectionOrFocus",!1),eY=new Dt("listDoubleSelection",!1),tY=new Dt("listMultiSelection",!1),dB=new Dt("listSelectionNavigation",!1),OFe=new Dt("treeElementCanCollapse",!1),MFe=new Dt("treeElementHasParent",!1),RFe=new Dt("treeElementCanExpand",!1),PFe=new Dt("treeElementHasChild",!1),Vhe="listAutomaticKeyboardNavigation";function hB(i,e){const t=i.createScoped(e.getHTMLElement());return Bhe.bindTo(t),t}const TC="workbench.list.multiSelectModifier",pz="workbench.list.openMode",oc="workbench.list.horizontalScrolling",P3="workbench.list.keyboardNavigation",nY="workbench.list.automaticKeyboardNavigation",uO="workbench.tree.indent",F3="workbench.tree.renderIndentGuides",nf="workbench.list.smoothScrolling",dg="workbench.list.mouseWheelScrollSensitivity",hg="workbench.list.fastScrollSensitivity",B3="workbench.tree.expandMode";function fg(i){return i.getValue(TC)==="alt"}class FFe extends Oe{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=fg(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(TC)&&(this.useAltAsMultipleSelectionModifier=fg(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:xhe(e)}isSelectionRangeChangeEvent(e){return Dhe(e)}}function fB(i,e,t){var n;const r=new Je;return[Object.assign(Object.assign({},i),{keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return t.mightProducePrintableCharacter(o)}},smoothScrolling:!!e.getValue(nf),mouseWheelScrollSensitivity:e.getValue(dg),fastScrollSensitivity:e.getValue(hg),multipleSelectionController:(n=i.multipleSelectionController)!==null&&n!==void 0?n:r.add(new FFe(e))}),r]}let mz=class extends Eg{constructor(e,t,n,r,s,o,a,u,d,h){const f=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!d.getValue(oc),[p,m]=fB(s,d,h);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Dh(u.getColorTheme(),aB)),p),{horizontalScrolling:f})),this.disposables.add(m),this.contextKeyService=hB(o,this),this.themeService=u,this.listSupportsMultiSelect=cB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),dB.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=JG.bindTo(this.contextKeyService),this.listDoubleSelection=eY.bindTo(this.contextKeyService),this.listMultiSelection=tY.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=fg(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),L=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||L.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),L=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||L.length>0)})),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(TC)&&(this._useAltAsMultipleSelectionModifier=fg(d));let L={};if(b.affectsConfiguration(oc)&&this.horizontalScrolling===void 0){const S=!!d.getValue(oc);L=Object.assign(Object.assign({},L),{horizontalScrolling:S})}if(b.affectsConfiguration(nf)){const S=!!d.getValue(nf);L=Object.assign(Object.assign({},L),{smoothScrolling:S})}if(b.affectsConfiguration(dg)){const S=d.getValue(dg);L=Object.assign(Object.assign({},L),{mouseWheelScrollSensitivity:S})}if(b.affectsConfiguration(hg)){const S=d.getValue(hg);L=Object.assign(Object.assign({},L),{fastScrollSensitivity:S})}Object.keys(L).length>0&&this.updateOptions(L)})),this.navigator=new Hhe(this,Object.assign({configurationService:d},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Fb(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};mz=xg([kn(5,cn),kn(6,bc),kn(7,Er),kn(8,nr),kn(9,Sr)],mz);let Tte=class extends eFe{constructor(e,t,n,r,s,o,a,u,d,h){const f=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!d.getValue(oc),[p,m]=fB(s,d,h);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Dh(u.getColorTheme(),aB)),p),{horizontalScrolling:f})),this.disposables=new Je,this.disposables.add(m),this.contextKeyService=hB(o,this),this.themeService=u,this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=cB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),dB.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=fg(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),s.overrideStyles&&this.disposables.add(Fb(this,u,s.overrideStyles)),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(TC)&&(this._useAltAsMultipleSelectionModifier=fg(d));let L={};if(b.affectsConfiguration(oc)&&this.horizontalScrolling===void 0){const S=!!d.getValue(oc);L=Object.assign(Object.assign({},L),{horizontalScrolling:S})}if(b.affectsConfiguration(nf)){const S=!!d.getValue(nf);L=Object.assign(Object.assign({},L),{smoothScrolling:S})}if(b.affectsConfiguration(dg)){const S=d.getValue(dg);L=Object.assign(Object.assign({},L),{mouseWheelScrollSensitivity:S})}if(b.affectsConfiguration(hg)){const S=d.getValue(hg);L=Object.assign(Object.assign({},L),{fastScrollSensitivity:S})}Object.keys(L).length>0&&this.updateOptions(L)})),this.navigator=new Hhe(this,Object.assign({configurationService:d},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Fb(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};Tte=xg([kn(5,cn),kn(6,bc),kn(7,Er),kn(8,nr),kn(9,Sr)],Tte);let kte=class extends lB{constructor(e,t,n,r,s,o,a,u,d,h,f){const p=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!h.getValue(oc),[m,v]=fB(o,h,f);super(e,t,n,r,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Dh(d.getColorTheme(),aB)),m),{horizontalScrolling:p})),this.disposables.add(v),this.contextKeyService=hB(a,this),this.themeService=d,this.listSupportsMultiSelect=cB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),dB.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=JG.bindTo(this.contextKeyService),this.listDoubleSelection=eY.bindTo(this.contextKeyService),this.listMultiSelection=tY.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=fg(h),this.disposables.add(this.contextKeyService),this.disposables.add(u.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const L=this.getSelection(),S=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(L.length>0||S.length>0),this.listMultiSelection.set(L.length>1),this.listDoubleSelection.set(L.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const L=this.getSelection(),S=this.getFocus();this.listHasSelectionOrFocus.set(L.length>0||S.length>0)})),this.disposables.add(h.onDidChangeConfiguration(L=>{L.affectsConfiguration(TC)&&(this._useAltAsMultipleSelectionModifier=fg(h));let S={};if(L.affectsConfiguration(oc)&&this.horizontalScrolling===void 0){const y=!!h.getValue(oc);S=Object.assign(Object.assign({},S),{horizontalScrolling:y})}if(L.affectsConfiguration(nf)){const y=!!h.getValue(nf);S=Object.assign(Object.assign({},S),{smoothScrolling:y})}if(L.affectsConfiguration(dg)){const y=h.getValue(dg);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:y})}if(L.affectsConfiguration(hg)){const y=h.getValue(hg);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:y})}Object.keys(S).length>0&&this.updateOptions(S)})),this.navigator=new BFe(this,Object.assign({configurationService:h},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Fb(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};kte=xg([kn(6,cn),kn(7,bc),kn(8,Er),kn(9,nr),kn(10,Sr)],kte);class iY extends Oe{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new Ce),this.onDidOpen=this._onDidOpen.event,this._register(Rt.filter(this.widget.onDidChangeSelection,r=>r.browserEvent instanceof KeyboardEvent)(r=>this.onSelectionFromKeyboard(r))),this._register(this.widget.onPointer(r=>this.onPointer(r.element,r.browserEvent))),this._register(this.widget.onMouseDblClick(r=>this.onMouseDblClick(r.element,r.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(pz))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(pz))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,r=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,r,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const r=t.button===1,s=!0,o=r,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,n,r,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:s})}}class Hhe extends iY{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class BFe extends iY{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class WFe extends iY{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function VFe(i,e){let t=!1;return n=>{if(t)return t=!1,!1;const r=e.softDispatch(n,i);return r&&r.enterChord?(t=!0,!1):(t=!1,!0)}}let Nte=class extends ZG{constructor(e,t,n,r,s,o,a,u,d,h,f){const{options:p,getAutomaticKeyboardNavigation:m,disposable:v}=EM(t,s,o,d,h,f);super(e,t,n,r,p),this.disposables.add(v),this.internals=new Bb(this,s,m,s.overrideStyles,o,a,u,d,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Nte=xg([kn(5,cn),kn(6,bc),kn(7,Er),kn(8,nr),kn(9,Sr),kn(10,il)],Nte);let Ate=class extends Rhe{constructor(e,t,n,r,s,o,a,u,d,h,f){const{options:p,getAutomaticKeyboardNavigation:m,disposable:v}=EM(t,s,o,d,h,f);super(e,t,n,r,p),this.disposables.add(v),this.internals=new Bb(this,s,m,s.overrideStyles,o,a,u,d,f),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ate=xg([kn(5,cn),kn(6,bc),kn(7,Er),kn(8,nr),kn(9,Sr),kn(10,il)],Ate);let Ote=class extends NFe{constructor(e,t,n,r,s,o,a,u,d,h,f,p){const{options:m,getAutomaticKeyboardNavigation:v,disposable:b}=EM(t,o,a,h,f,p);super(e,t,n,r,s,m),this.disposables.add(b),this.internals=new Bb(this,o,v,o.overrideStyles,a,u,d,h,p),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ote=xg([kn(6,cn),kn(7,bc),kn(8,Er),kn(9,nr),kn(10,Sr),kn(11,il)],Ote);let _z=class extends Fhe{constructor(e,t,n,r,s,o,a,u,d,h,f,p){const{options:m,getAutomaticKeyboardNavigation:v,disposable:b}=EM(t,o,a,h,f,p);super(e,t,n,r,s,m),this.disposables.add(b),this.internals=new Bb(this,o,v,o.overrideStyles,a,u,d,h,p),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};_z=xg([kn(6,cn),kn(7,bc),kn(8,Er),kn(9,nr),kn(10,Sr),kn(11,il)],_z);let Mte=class extends TFe{constructor(e,t,n,r,s,o,a,u,d,h,f,p,m){const{options:v,getAutomaticKeyboardNavigation:b,disposable:L}=EM(t,a,u,f,p,m);super(e,t,n,r,s,o,v),this.disposables.add(L),this.internals=new Bb(this,a,b,a.overrideStyles,u,d,h,f,m),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Mte=xg([kn(7,cn),kn(8,bc),kn(9,Er),kn(10,nr),kn(11,Sr),kn(12,il)],Mte);function EM(i,e,t,n,r,s){var o;const a=()=>{let v=!!t.getContextKeyValue(Vhe);return v&&(v=!!n.getValue(nY)),v},u=s.isScreenReaderOptimized(),d=e.simpleKeyboardNavigation||u?"simple":n.getValue(P3),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(oc),[f,p]=fB(e,n,r),m=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:p,options:Object.assign(Object.assign({keyboardSupport:!1},f),{indent:typeof n.getValue(uO)=="number"?n.getValue(uO):void 0,renderIndentGuides:n.getValue(F3),smoothScrolling:!!n.getValue(nf),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:d==="simple",filterOnType:d==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:VFe(i,r),additionalScrollHeight:m,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:n.getValue(B3)==="doubleClick"})}}let Bb=class{constructor(e,t,n,r,s,o,a,u,d){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=hB(s,e),this.listSupportsMultiSelect=cB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),dB.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=JG.bindTo(this.contextKeyService),this.hasDoubleSelection=eY.bindTo(this.contextKeyService),this.hasMultiSelection=tY.bindTo(this.contextKeyService),this.treeElementCanCollapse=OFe.bindTo(this.contextKeyService),this.treeElementHasParent=MFe.bindTo(this.contextKeyService),this.treeElementCanExpand=RFe.bindTo(this.contextKeyService),this.treeElementHasChild=PFe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=fg(u);const f=new Set;f.add(Vhe);const p=()=>{const b=d.isScreenReaderOptimized()?"simple":u.getValue(P3);e.updateOptions({simpleKeyboardNavigation:b==="simple",filterOnType:b==="filter"})};this.updateStyleOverrides(r);const m=()=>{const v=e.getFocus()[0];if(!v)return;const b=e.getNode(v);this.treeElementCanCollapse.set(b.collapsible&&!b.collapsed),this.treeElementHasParent.set(!!e.getParentElement(v)),this.treeElementCanExpand.set(b.collapsible&&b.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(v))};this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const v=e.getSelection(),b=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(v.length>0||b.length>0),this.hasMultiSelection.set(v.length>1),this.hasDoubleSelection.set(v.length===2)})}),e.onDidChangeFocus(()=>{const v=e.getSelection(),b=e.getFocus();this.hasSelectionOrFocus.set(v.length>0||b.length>0),m()}),e.onDidChangeCollapseState(m),e.onDidChangeModel(m),u.onDidChangeConfiguration(v=>{let b={};if(v.affectsConfiguration(TC)&&(this._useAltAsMultipleSelectionModifier=fg(u)),v.affectsConfiguration(uO)){const L=u.getValue(uO);b=Object.assign(Object.assign({},b),{indent:L})}if(v.affectsConfiguration(F3)){const L=u.getValue(F3);b=Object.assign(Object.assign({},b),{renderIndentGuides:L})}if(v.affectsConfiguration(nf)){const L=!!u.getValue(nf);b=Object.assign(Object.assign({},b),{smoothScrolling:L})}if(v.affectsConfiguration(P3)&&p(),v.affectsConfiguration(nY)&&(b=Object.assign(Object.assign({},b),{automaticKeyboardNavigation:n()})),v.affectsConfiguration(oc)&&t.horizontalScrolling===void 0){const L=!!u.getValue(oc);b=Object.assign(Object.assign({},b),{horizontalScrolling:L})}if(v.affectsConfiguration(B3)&&t.expandOnlyOnTwistieClick===void 0&&(b=Object.assign(Object.assign({},b),{expandOnlyOnTwistieClick:u.getValue(B3)==="doubleClick"})),v.affectsConfiguration(dg)){const L=u.getValue(dg);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:L})}if(v.affectsConfiguration(hg)){const L=u.getValue(hg);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:L})}Object.keys(b).length>0&&e.updateOptions(b)}),this.contextKeyService.onDidChangeContext(v=>{v.affectsSome(f)&&e.updateOptions({automaticKeyboardNavigation:n()})}),d.onDidChangeScreenReaderOptimized(()=>p())),this.navigator=new WFe(e,Object.assign({configurationService:u},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){ri(this.styler),this.styler=e?Fb(this.tree,this.themeService,e):Oe.None}dispose(){this.disposables=ri(this.disposables),ri(this.styler),this.styler=void 0}};Bb=xg([kn(4,cn),kn(5,bc),kn(6,Er),kn(7,nr),kn(8,il)],Bb);const HFe=Xr.as(yC.Configuration);HFe.registerConfiguration({id:"workbench",order:7,title:C("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[TC]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[C("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:C({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[pz]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[oc]:{type:"boolean",default:!1,description:C("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[uO]:{type:"number",default:8,minimum:0,maximum:40,description:C("tree indent setting","Controls tree indentation in pixels.")},[F3]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:C("render tree indent guides","Controls whether the tree should render indent guides.")},[nf]:{type:"boolean",default:!1,description:C("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[dg]:{type:"number",default:1,description:C("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[hg]:{type:"number",default:5,description:C("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[P3]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[C("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),C("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),C("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:C("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[nY]:{type:"boolean",default:!0,markdownDescription:C("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[B3]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Ir;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Ir||(Ir={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=C("sev.error","Error"),t[i.Warning]=C("sev.warning","Warning"),t[i.Info]=C("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function r(o){switch(o){case Ur.Error:return i.Error;case Ur.Warning:return i.Warning;case Ur.Info:return i.Info;case Ur.Ignore:return i.Hint}}i.fromSeverity=r;function s(o){switch(o){case i.Error:return Ur.Error;case i.Warning:return Ur.Warning;case i.Info:return Ur.Info;case i.Hint:return Ur.Ignore}}i.toSeverity=s})(Ir||(Ir={}));var W3;(function(i){const e="";function t(r){return n(r,!0)}i.makeKey=t;function n(r,s){let o=[e];return r.source?o.push(r.source.replace("","\\")):o.push(e),r.code?typeof r.code=="string"?o.push(r.code.replace("","\\")):o.push(r.code.value.replace("","\\")):o.push(e),r.severity!==void 0&&r.severity!==null?o.push(Ir.toString(r.severity)):o.push(e),r.message&&s?o.push(r.message.replace("","\\")):o.push(e),r.startLineNumber!==void 0&&r.startLineNumber!==null?o.push(r.startLineNumber.toString()):o.push(e),r.startColumn!==void 0&&r.startColumn!==null?o.push(r.startColumn.toString()):o.push(e),r.endLineNumber!==void 0&&r.endLineNumber!==null?o.push(r.endLineNumber.toString()):o.push(e),r.endColumn!==void 0&&r.endColumn!==null?o.push(r.endColumn.toString()):o.push(e),o.push(e),o.join("")}i.makeKeyOptionalMessage=n})(W3||(W3={}));const xM=gi("markerService");class $Fe{constructor(){this._byResource=new na,this._byOwner=new Map}set(e,t,n){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,n);let s=this._byOwner.get(t);s||(s=new na,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,r=!1,s=this._byResource.get(e);s&&(n=s.delete(t));let o=this._byOwner.get(t);if(o&&(r=o.delete(e)),n!==r)throw new Error("illegal state");return n&&r}values(e){var t,n,r,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Qn.empty():rn.isUri(e)?(s=(r=this._byResource.get(e))===null||r===void 0?void 0:r.values())!==null&&s!==void 0?s:Qn.empty():Qn.map(Qn.concat(...this._byOwner.values()),o=>o[1])}}class zFe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new na,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const r=this._resourceStats(t);this._add(r),this._data.set(t,r)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Tn.inMemory||e.scheme===Tn.walkThrough||e.scheme===Tn.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===Ir.Error?t.errors+=1:n===Ir.Warning?t.warnings+=1:n===Ir.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class L1{constructor(){this._onMarkerChanged=new BLe({delay:0,merge:L1._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new $Fe,this._stats=new zFe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(Hue(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const r=[];for(const s of n){const o=L1._toMarker(e,t,s);o&&r.push(o)}this._data.set(t,e,r),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:r,severity:s,message:o,source:a,startLineNumber:u,startColumn:d,endLineNumber:h,endColumn:f,relatedInformation:p,tags:m}=n;if(o)return u=u>0?u:1,d=d>0?d:1,h=h>=u?h:u,f=f>0?f:d,{resource:t,owner:e,code:r,severity:s,message:o,source:a,startLineNumber:u,startColumn:d,endLineNumber:h,endColumn:f,relatedInformation:p,tags:m}}read(e=Object.create(null)){let{owner:t,resource:n,severities:r,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const u of o)if(L1._accept(u,r)){const d=a.push(u);if(s>0&&d===s)break}return a}else return[]}else if(!t&&!n){const o=[];for(let a of this._data.values())for(let u of a)if(L1._accept(u,r)){const d=o.push(u);if(s>0&&d===s)return o}return o}else{const o=this._data.values(n??t),a=[];for(const u of o)for(const d of u)if(L1._accept(d,r)){const h=a.push(d);if(s>0&&h===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new na;for(let n of e)for(let r of n)t.set(r,!0);return Array.from(t.keys())}}var r2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},Uw;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(Uw||(Uw={}));class cO extends Oe{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Ce),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Uw.None,this.cache=new Map,this.flushDelayer=new QLe(cO.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((r,s)=>this.accept(s,r)),(n=e.deleted)===null||n===void 0||n.forEach(r=>this.accept(r,void 0))}accept(e,t){if(this.state===Uw.Closed)return;let n=!1;Eu(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return Eu(n)?t:n}getBoolean(e,t){const n=this.get(e);return Eu(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Eu(n)?t:parseInt(n,10)}set(e,t){return r2(this,void 0,void 0,function*(){if(this.state===Uw.Closed)return;if(Eu(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return r2(this,void 0,void 0,function*(){if(!(this.state===Uw.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return r2(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return r2(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}cO.DEFAULT_FLUSH_DELAY=100;class Rte{constructor(){this.onDidChangeItemsExternal=Rt.None,this.items=new Map}updateItems(e){return r2(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const QR="__$__targetStorageMarker",Dg=gi("storageService");var V3;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(V3||(V3={}));class gB extends Oe{constructor(e={flushInterval:gB.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new bF),this._onDidChangeTarget=this._register(new bF),this._onWillSaveState=this._register(new Ce),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===QR?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.get(e,n)}getBoolean(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getBoolean(e,n)}getNumber(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getNumber(e,n)}store(e,t,n,r){if(Eu(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,n,r),(s=this.getStorage(n))===null||s===void 0||s.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var r,s;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(r=this.getStorage(t))===null||r===void 0||r.set(QR,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(s=this.getStorage(t))===null||s===void 0||s.set(QR,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(QR,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}gB.DEFAULT_FLUSH_INTERVAL=60*1e3;class UFe extends gB{constructor(){super(),this.globalStorage=this._register(new cO(new Rte)),this.workspaceStorage=this._register(new cO(new Rte)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var $he=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let vz=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new bz(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};vz=$he([_4(0,Tr)],vz);let bz=class mw{constructor(e,t,n,r,s){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=r,this._menuService=s,this._disposables=new Je,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new er(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(o),this._disposables.add(ra.onDidChangeMenu(d=>{d.has(e)&&o.schedule()}));const a=this._disposables.add(new Je),u=()=>{const d=new er(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(d),a.add(r.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&d.schedule()}))};this._onDidChange=new Ce({onFirstListenerAdd:u,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=ra.getMenuItems(this._id);let t;e.sort(mw._compareMenuItems);for(const n of e){const r=n.group||"";(!t||t[0]!==r)&&(t=[r,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(mw._fillInKbExprKeys(e.when,this._contextKeys),JN(e)){if(e.command.precondition&&mw._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;mw._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&ra.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[r,s]=n,o=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const u=JN(a)?new C0(a.command,a.alt,e,this._contextKeyService,this._commandService):new xq(a,this._menuService,this._contextKeyService,e);o.push(u)}o.length>0&&t.push([r,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,r=t.group;if(n!==r){if(n){if(!r)return-1}else return 1;if(n==="navigation")return-1;if(r==="navigation")return 1;let a=n.localeCompare(r);if(a!==0)return a}let s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:mw._compareTitles(JN(e)?e.command.title:e.title,JN(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,r=typeof t=="string"?t:t.original;return n.localeCompare(r)}};bz=$he([_4(2,Tr),_4(3,cn),_4(4,CC)],bz);var jFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Pte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class KFe extends Oe{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Un(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const r=this.model.deltaDecorations(n,t);for(let s=0;s<r.length;s++)this._markersData.set(r[s],e[s]);return n.length!==0||r.length!==0}getMarker(e){return this._markersData.get(e.id)}}let Cz=class extends Oe{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Ce),this._markerDecorations=new na,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new KFe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Tn.inMemory||e.uri.scheme===Tn.internal||e.uri.scheme===Tn.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(r=>({range:this._createDecorationRange(e.model,r),options:this._createDecorationOption(r)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=Q.lift(t);return t.severity===Ir.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,r,s,o;switch(e.severity){case Ir.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",r=0;break;case Ir.Warning:t="squiggly-warning",n=Lr(A2e),r=20,o={color:Lr(iTe),position:bl.Inline};break;case Ir.Info:t="squiggly-info",n=Lr(O2e),r=10;break;case Ir.Error:default:t="squiggly-error",n=Lr(N2e),r=30,o={color:Lr(nTe),position:bl.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:yl.Right},minimap:o,zIndex:r,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};Cz=jFe([Pte(0,Ds),Pte(1,xM)],Cz);var qFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Fte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let wz=class extends Oe{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Ce,this._accessibilityModeEnabledContext=vM.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};wz=qFe([Fte(0,cn),Fte(1,nr)],wz);var JR=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class GFe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return JR(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,r=document.body.appendChild(qe("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=e,r.focus(),r.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(r)})}readText(e){return JR(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return JR(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return JR(this,void 0,void 0,function*(){this.findText=e})}}var YFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Bte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},eP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function tP(i){return i.scheme===Tn.file?i.fsPath:i.path}let zhe=0;class nP{constructor(e,t,n,r,s,o,a){this.id=++zhe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Wte{constructor(e,t){this.resourceLabel=e,this.reason=t}}class Vte{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,r]of this.elements)(r.reason===0?e:t).push(r.resourceLabel);let n=[];return e.length>0&&n.push(C({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(C({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class ZFe{constructor(e,t,n,r,s,o,a){this.id=++zhe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new Vte),this.removedResources.has(t)||this.removedResources.set(t,new Wte(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Vte),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Wte(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Uhe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,r=this._past.length;n<r;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new tde(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,r=0,s=-1;for(let a=0,u=this._past.length;a<u;a++,r++){const d=this._past[a];n&&(r>=t||d.id!==e.elements[r])&&(n=!1,s=0),!n&&d.type===1&&d.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,r++){const u=this._future[a];n&&(r>=t||u.id!==e.elements[r])&&(n=!1,o=a),!n&&u.type===1&&u.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class T6{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const jhe=new Uhe("","");jhe.locked=!0;let H3=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Yy.None,n=Ff.None){if(e.type===0){const r=tP(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new nP(e,r,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const r=new Set,s=[],o=[];for(const a of e.resources){const u=tP(a),d=this.getUriComparisonKey(a);r.has(d)||(r.add(d),s.push(u),o.push(d))}s.length===1?this._pushElement(new nP(e,s[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new ZFe(e,s,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const r=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new Uhe(r,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const r=n.getClosestPastElement();return r?r.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const s of n){const o=tP(s.resource),a=this.getUriComparisonKey(s.resource),u=new nP(s,o,a,0,0,0,0);r.set(u.strResource,u)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,r)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const s of n){const o=tP(s.resource),a=this.getUriComparisonKey(s.resource),u=new nP(s,o,a,0,0,0,0);r.set(u.strResource,u)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,r)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new tde(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=r)}return[t,n]}canUndo(e){if(e instanceof Ff){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){gn(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,r,s){const o=this._acquireLocks(n);let a;try{a=t()}catch(u){return o(),r.dispose(),this._onError(u,e)}return a?a.then(()=>(o(),r.dispose(),s()),u=>(o(),r.dispose(),this._onError(u,e))):(o(),r.dispose(),s())}_invokeWorkspacePrepare(e){return eP(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return Oe.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?Oe.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(Oe.None);const n=e.actual.prepareUndoRedo();return n?JK(n)?t(n):n.then(r=>t(r)):t(Oe.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||jhe);return new T6(t)}_tryToSplitAndUndo(e,t,n,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(r),new iP(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new iP}_checkWorkspaceUndo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const r=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,r,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const r=t.getSecondClosestPastElement();if(r&&r.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,r){return eP(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Ur.Info,C("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[C({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),C("nok","Undo this File"),C("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const u=this._checkWorkspaceUndo(e,t,n,!1);if(u)return u.returnValue;r=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return s.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,r))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const r=C({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new T6([e]),r,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=r)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Ff){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const r=this._editStacks.get(e),s=r.getClosestPastElement();if(!s)return;if(s.groupId){const[a,u]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&u)return this._undo(u,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(r,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return eP(this,void 0,void 0,function*(){if((yield this._dialogService.show(Ur.Info,C("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[C("confirmDifferentSource.yes","Yes"),C("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=r)}return[t,n]}canRedo(e){if(e instanceof Ff){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(r),new iP(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new iP}_checkWorkspaceRedo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,n,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return eP(this,void 0,void 0,function*(){let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return r.dispose(),s.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,r,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=C({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new T6([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=r)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Ff){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[r,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==r&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};H3=YFe([Bte(0,wM),Bte(1,gs)],H3);class iP{constructor(e){this.returnValue=e}}U0(gM,H3);const XFe=new RegExp(`(\\\\)?\\$\\((${Ka.iconNameExpression}(?:${Ka.iconModifierExpression})?)\\)`,"g");function ob(i){const e=new Array;let t,n=0,r=0;for(;(t=XFe.exec(i))!==null;){r=t.index||0,e.push(i.substring(n,r)),n=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:QFe({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function QFe(i){const e=qe("span");return e.classList.add(...Ka.asClassNameArray(i)),e}const JFe={buttonBackground:ye.fromHex("#0E639C"),buttonHoverBackground:ye.fromHex("#006BB3"),buttonForeground:ye.white};class Hte extends Oe{constructor(e,t){super(),this._onDidClick=this._register(new Ce),this.options=t||Object.create(null),Lg(this.options,JFe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Hi.addTarget(this._element)),[Ht.CLICK,lr.Tap].forEach(n=>{this._register(Ge(this._element,n,r=>{if(!this.enabled){Ni.stop(r);return}this._onDidClick.fire(r)}))}),this._register(Ge(this._element,Ht.KEY_DOWN,n=>{const r=new yr(n);let s=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(n),s=!0):r.equals(9)&&(this._element.blur(),s=!0),s&&Ni.stop(r,!0)})),this._register(Ge(this._element,Ht.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(Ge(this._element,Ht.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(Hy(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?v0(this._element,...ob(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const e3e={badgeBackground:ye.fromHex("#4D4D4D"),badgeForeground:ye.fromHex("#FFFFFF")};class yz{constructor(e,t){this.count=0,this.options=t||Object.create(null),Lg(this.options,e3e,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=Be(e,qe(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=Ju(this.countFormat,this.count),this.element.title=Ju(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const $te="done",zte="active",k6="infinite",Ute="discrete",t3e={progressBarBackground:ye.fromHex("#0E70C0")};class n3e extends Oe{constructor(e,t){super(),this.options=t||Object.create(null),Lg(this.options,t3e,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new er(()=>Lu(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(zte,k6,Ute),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add($te),this.element.classList.contains(k6)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(Ute,$te),this.element.classList.add(zte,k6),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class rY{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Khe=new rY("id#");const N6={},i3e=new rY("quick-input-button-icon-");function Sz(i){if(!i)return;let e;const t=i.dark.toString();return N6[t]?e=N6[t]:(e=i3e.nextId(),vH(`.${e}`,`background-image: ${yb(i.light||i.dark)}`),vH(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${yb(i.dark)}`),N6[t]=e),e}const r3e={ctrlCmd:!1,alt:!1};var dO;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(dO||(dO={}));var yh;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(yh||(yh={}));function s3e(i,e={}){const t=sY(e);return t.textContent=i,t}function qhe(i,e={}){const t=sY(e);return Ghe(t,a3e(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function sY(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class o3e{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Ghe(i,e,t,n){let r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===7&&n)r=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");s.href="#",t.disposables.add(eo(s,"click",o=>{t.callback(String(e.index),o)})),r=s}else e.type===8?r=document.createElement("br"):e.type===1&&(r=i);r&&i!==r&&i.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(s=>{Ghe(r,s,t,n)})}function a3e(i,e){const t={type:1,children:[]};let n=0,r=t;const s=[],o=new o3e(i);for(;!o.eos();){let a=o.next();const u=a==="\\"&&Lz(o.peek(),e)!==0;if(u&&(a=o.next()),!u&&l3e(a,e)&&a===o.peek()){o.advance(),r.type===2&&(r=s.pop());const d=Lz(a,e);if(r.type===d||r.type===5&&d===6)r=s.pop();else{const h={type:d,children:[]};d===5&&(h.index=n,n++),r.children.push(h),s.push(r),r=h}}else if(a===`
`)r.type===2&&(r=s.pop()),r.children.push({type:8});else if(r.type!==2){const d={type:2,content:a};r.children.push(d),s.push(r),r=d}else r.content+=a}return r.type===2&&(r=s.pop()),t}function l3e(i,e){return Lz(i,e)!==0}function Lz(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class u3e{constructor(e,t=0,n=e.length,r=t-1){this.items=e,this.start=t,this.end=n,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class c3e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new u3e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const MN=qe,d3e={inputBackground:ye.fromHex("#3C3C3C"),inputForeground:ye.fromHex("#CCCCCC"),inputValidationInfoBorder:ye.fromHex("#55AAFF"),inputValidationInfoBackground:ye.fromHex("#063B49"),inputValidationWarningBorder:ye.fromHex("#B89500"),inputValidationWarningBackground:ye.fromHex("#352A05"),inputValidationErrorBorder:ye.fromHex("#BE1100"),inputValidationErrorBackground:ye.fromHex("#5A1D1D")};class Yhe extends Wu{constructor(e,t,n){var r;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Ce),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Lg(this.options,d3e,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(r=this.options.tooltip)!==null&&r!==void 0?r:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Be(e,MN(".monaco-inputbox.idle"));let s=this.options.flexibleHeight?"textarea":"input",o=Be(this.element,MN(".ibwrapper"));if(this.input=Be(o,MN(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Be(o,MN("div.mirror")),this.mirror.innerText="",this.scrollableElement=new dG(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Be(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(d=>this.input.scrollTop=d.scrollTop));const a=this._register(new Ui(document,"selectionchange")),u=Rt.filter(a.event,()=>{const d=document.getSelection();return(d==null?void 0:d.anchorNode)===o});this._register(u(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new ug(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:_H(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Nc(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,r=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+r}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Nc(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:r=>{if(!this.message)return null;e=Be(r,MN(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?qhe(this.message.content,s):s3e(this.message.content,s);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",Be(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=C("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=C("alertWarningMessage","Warning: {0}",this.message.content):n=C("alertInfoMessage","Info: {0}",this.message.content),To(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=_H(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,r=t.selectionEnd,s=t.value;n!==null&&r!==null&&(this.value=s.substr(0,n)+e+s.substr(r),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class Zhe extends Yhe{constructor(e,t,n){const r=C({key:"history.inputbox.hint",comment:["Text will be prefixed with  plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or  ${r}`,o=` ( ${r})`;super(e,t,n),this.history=new c3e(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const u=this.placeholder.endsWith(")")?s:o,d=this.placeholder+u;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=d:this.setPlaceHolder(d)}};this.observer=new MutationObserver((u,d)=>{u.forEach(h=>{h.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const u=d=>{if(this.placeholder.endsWith(d)){const h=this.placeholder.slice(0,this.placeholder.length-d.length);return n.showPlaceholderOnFocus?this.placeholder=h:this.setPlaceHolder(h),!0}else return!1};u(o)||u(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,EF(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,EF(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const h3e=qe;class f3e extends Oe{constructor(e){super(),this.parent=e,this.onKeyDown=t=>Ge(this.inputBox.inputElement,Ht.KEY_DOWN,n=>{t(new yr(n))}),this.onMouseDown=t=>Ge(this.inputBox.inputElement,Ht.MOUSE_DOWN,n=>{t(new Qu(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=Be(this.parent,h3e(".quick-input-box")),this.inputBox=this._register(new Yhe(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Ur.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Ur.Info?1:e===Ur.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Ur.Info?1:e===Ur.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class Wb{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t==null?void 0:t.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=Be(e,qe("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",r){e||(e=""),r&&(e=Wb.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Qc(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(qe("span",void 0,...this.supportIcons?ob(o):[o])),t=n.end}const r=this.text.substring(n.start,n.end),s=qe("span.highlight",void 0,...this.supportIcons?ob(r):[r]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(qe("span",void 0,...this.supportIcons?ob(n):[n]))}v0(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,r=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{r=s===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=r),a.end>=o&&(a.end+=r));return n+=r,""})}}class Mp{constructor(e="",t=!1){var n,r,s;if(this.value=e,typeof this.value!="string")throw jh("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(r=t.supportThemeIcons)!==null&&r!==void 0?r:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=g3e(this.supportThemeIcons?g4e(e):e).replace(/([ \t]+)/g,(n,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function hO(i){return Xhe(i)?!i.value:Array.isArray(i)?i.every(hO):!0}function Xhe(i){return i instanceof Mp?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function g3e(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function A6(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function p3e(i){const e=[],t=i.split("|").map(r=>r.trim());i=t[0];const n=t[1];if(n){const r=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),o=r?r[1]:"",a=s?s[1]:"",u=isFinite(parseInt(a)),d=isFinite(parseInt(o));u&&e.push(`width="${a}"`),d&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}var Ez=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function m3e(i,e){cc(e)?i.title=e:e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class _3e{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return Ez(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||cc(e)||e instanceof HTMLElement)r=e;else if(!TF(e.markdown))r=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(C("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new oa;const s=this._cancellationTokenSource.token;if(r=yield e.markdown(s),this.isDisposed||s.isCancellationRequested)return}this.show(r,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n==null||n.dispose()}hasContent(e){return e?Xhe(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function v3e(i,e,t){let n,r;const s=(h,f)=>{var p;h&&(r==null||r.dispose(),r=void 0),f&&(n==null||n.dispose(),n=void 0),(p=i.onDidHideHover)===null||p===void 0||p.call(i)},o=(h,f,p)=>new Ma(()=>Ez(this,void 0,void 0,function*(){(!r||r.isDisposed)&&(r=new _3e(i,p||e,h>0),yield r.update(t,f))}),h),a=()=>{if(n)return;const h=new Je,f=v=>s(!1,v.fromElement===e);h.add(Ge(e,Ht.MOUSE_LEAVE,f,!0));const p=()=>s(!0,!0);h.add(Ge(e,Ht.MOUSE_DOWN,p,!0));const m={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const v=b=>m.x=b.x+10;h.add(Ge(e,Ht.MOUSE_MOVE,v,!0))}h.add(o(i.delay,!1,m)),n=h},u=Ge(e,Ht.MOUSE_OVER,a,!0);return{show:h=>{s(!1,!0),o(0,h)},hide:()=>{s(!0,!0)},update:h=>Ez(this,void 0,void 0,function*(){t=h,yield r==null?void 0:r.update(t)}),dispose:()=>{u.dispose(),s(!0,!0)}}}class O6{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class $3 extends Oe{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new O6(Be(e,qe(".monaco-icon-label")))),this.labelContainer=Be(this.domNode.element,qe(".monaco-icon-label-container"));const n=Be(this.labelContainer,qe("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new O6(Be(this.labelContainer,qe("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new w3e(n,!!t.supportIcons):this.nameNode=new b3e(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Wb(Be(this.descriptionContainer.element,qe("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new O6(Be(this.descriptionContainer.element,qe("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const r=["monaco-icon-label"];n&&(n.extraClasses&&r.push(...n.extraClasses),n.italic&&r.push("italic"),n.strikethrough&&r.push("strikethrough")),this.domNode.className=r.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Wb?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)m3e(e,t);else{const r=v3e(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class b3e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Qc(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Be(this.container,qe("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const r=e[n],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;Be(this.container,qe("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},r)),n<e.length-1&&Be(this.container,qe("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function C3e(i,e,t){if(!t)return;let n=0;return i.map(r=>{const s={start:n,end:n+r.length},o=t.map(a=>Vo.intersect(s,a)).filter(a=>!Vo.isEmpty(a)).map(({start:a,end:u})=>({start:a-n,end:u-n}));return n=s.end+e.length,o})}class w3e{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Qc(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Wb(Be(this.container,qe("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",r=C3e(e,n,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const o=e[s],a=r?r[s]:void 0,u=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,d=qe("a.label-name",{id:u,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new Wb(Be(this.container,d),{supportIcons:this.supportIcons}).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&Be(d,qe("span.label-separator",void 0,n))}}}}const rP=qe;class oY{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=Be(e,rP(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&oY.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(Be(this.domNode,rP("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Hs(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const r=IG.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!(n!=null&&n.ctrlKey),r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!(n!=null&&n.shiftKey),r.separator),t.altKey&&this.renderKey(e,r.altKey,!!(n!=null&&n.altKey),r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!(n!=null&&n.metaKey),r.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,r){Be(e,this.createKeyElement(t,n?".highlight":"")),r&&Be(e,rP("span.monaco-keybinding-key-separator",void 0,r))}renderUnbound(e){Be(e,this.createKeyElement(C("unbound","Unbound")))}createKeyElement(e,t=""){const n=rP("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Qc(e.firstPart,t.firstPart)&&Qc(e.chordPart,t.chordPart)}}const jte=new ry(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function y3e(i,e,t=!1){const n=i||"",r=e||"",s=jte.value.collator.compare(n,r);return jte.value.collatorIsNumeric&&s===0&&n!==r?n<r?-1:1:s}function S3e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),s=L3e(i,e,t);if(s)return s;const o=n.endsWith(t),a=r.endsWith(t);if(o!==a)return o?-1:1;const u=y3e(n,r);return u!==0?u:n.localeCompare(r)}function L3e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),s=n.startsWith(t),o=r.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(n.length<r.length)return-1;if(n.length>r.length)return 1}return 0}var Qhe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},E3e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const wf=qe;class x3e{constructor(e){this.hidden=!1,this._onChecked=new Ce,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class DM{get templateId(){return DM.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Be(e,wf(".quick-input-list-entry"));const n=Be(t.entry,wf("label.quick-input-list-label"));t.toDisposeTemplate.push(eo(n,Ht.CLICK,d=>{t.checkbox.offsetParent||d.preventDefault()})),t.checkbox=Be(n,wf("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(eo(t.checkbox,Ht.CHANGE,d=>{t.element.checked=t.checkbox.checked}));const r=Be(n,wf(".quick-input-list-rows")),s=Be(r,wf(".quick-input-list-row")),o=Be(r,wf(".quick-input-list-row"));t.label=new $3(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=Be(s,wf(".quick-input-list-entry-keybinding"));t.keybinding=new oY(a,qu);const u=Be(o,wf(".quick-input-list-label-meta"));return t.detail=new $3(u,{supportHighlights:!0,supportIcons:!0}),t.separator=Be(t.entry,wf(".quick-input-list-separator")),t.actionBar=new ug(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=ri(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(d=>n.checkbox.checked=d));const{labelHighlights:r,descriptionHighlights:s,detailHighlights:o}=e,a=Object.create(null);a.matches=r||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=s||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:o,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const u=e.item.buttons;u&&u.length?(n.actionBar.push(u.map((d,h)=>{let f=d.iconClass||(d.iconPath?Sz(d.iconPath):void 0);d.alwaysVisible&&(f=f?`${f} always-visible`:"always-visible");const p=new ic(`id-${h}`,"",f,!0,()=>E3e(this,void 0,void 0,function*(){e.fireButtonTriggered({button:d,item:e.item})}));return p.tooltip=d.tooltip||"",p}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=ri(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=ri(e.toDisposeElement),e.toDisposeTemplate=ri(e.toDisposeTemplate)}}DM.ID="listelement";class D3e{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return DM.ID}}var us;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(us||(us={}));class aY{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Ce,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Ce,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Ce,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Ce,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Ce,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Ce,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Ce,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Be(this.parent,wf(".quick-input-list"));const r=new D3e,s=new T3e;this.list=n.createList("QuickInput",this.container,r,[new DM],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:s}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new yr(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(qn?o.metaKey:o.ctrlKey)&&this.list.setFocus(xa(this.list.length));break;case 16:const u=this.list.getFocus();u.length===1&&u[0]===0&&this._onLeave.fire();break;case 18:const d=this.list.getFocus();d.length===1&&d[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(Ge(this.container,Ht.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Rt.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Rt.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,r=e.length;n<r;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=ri(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,r,s)=>{var o,a,u;if(r.type!=="separator"){const d=s&&e[s-1],h=r.label&&r.label.replace(/\r?\n/g," "),f=r.meta&&r.meta.replace(/\r?\n/g," "),p=r.description&&r.description.replace(/\r?\n/g," "),m=r.detail&&r.detail.replace(/\r?\n/g," "),v=r.ariaLabel||[h,p,m].map(b=>VEe(b)).filter(b=>!!b).join(", ");n.push(new x3e({index:s,item:r,saneLabel:h,saneMeta:f,saneAriaLabel:v,saneDescription:p,saneDetail:m,labelHighlights:(o=r.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=r.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(u=r.highlights)===null||u===void 0?void 0:u.detail,checked:!1,separator:d&&d.type==="separator"?d:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,r,s)=>(n.set(r.item,s),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===us.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=us.First),e===us.Previous&&this.list.getFocus()[0]===0&&(e=us.Last),e===us.Second&&this.list.length<2&&(e=us.First),e){case us.First:this.list.focusFirst();break;case us.Second:this.list.focusNth(1);break;case us.Last:this.list.focusLast();break;case us.Next:this.list.focusNext();break;case us.Previous:this.list.focusPrevious();break;case us.NextPage:this.list.focusNextPage();break;case us.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const r=n.index&&this.inputElements[n.index-1];n.separator=r&&r.type==="separator"?r:void 0});else{let n;this.elements.forEach(r=>{const s=this.matchOnLabel?ml(XR(e,ZR(r.saneLabel))):void 0,o=this.matchOnDescription?ml(XR(e,ZR(r.saneDescription||""))):void 0,a=this.matchOnDetail?ml(XR(e,ZR(r.saneDetail||""))):void 0,u=this.matchOnMeta?ml(XR(e,ZR(r.saneMeta||""))):void 0;if(s||o||a||u?(r.labelHighlights=s,r.descriptionHighlights=o,r.detailHighlights=a,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=!r.item.alwaysShow),r.separator=void 0,!this.sortByLabel){const d=r.index&&this.inputElements[r.index-1];n=d&&d.type==="separator"?d:n,n&&!r.hidden&&(r.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((r,s)=>I3e(r,s,n))}return this.elementsToIndexes=t.reduce((n,r,s)=>(n.set(r.item,s),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=ri(this.elementDisposables),this.disposables=ri(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}Qhe([Is],aY.prototype,"onDidChangeFocus",null);Qhe([Is],aY.prototype,"onDidChangeSelection",null);function I3e(i,e,t){const n=i.labelHighlights||[],r=e.labelHighlights||[];return n.length&&!r.length?-1:!n.length&&r.length?1:n.length===0&&r.length===0?0:S3e(i.saneLabel,e.saneLabel,t)}class T3e{getWidgetAriaLabel(){return C("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var Kte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const bu=qe,xz={iconClass:_e.quickInputBack.classNames,tooltip:C("quickInput.back","Back"),handle:-1};class pB extends Oe{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=pB.noPromptMessage,this._severity=Ur.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Ce),this.onDidHideEmitter=this._register(new Ce),this.onDisposeEmitter=this._register(new Ce),this.visibleDisposables=this._register(new Je),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ng;this._ignoreFocusOut=e&&!ng,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=dO.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Ma,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(o=>o===xz);this.ui.leftActionBar.push(r.map((o,a)=>{const u=new ic(`id-${a}`,"",o.iconClass||Sz(o.iconPath),!0,()=>Kte(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return u.tooltip=o.tooltip||"",u}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const s=this.buttons.filter(o=>o!==xz);this.ui.rightActionBar.push(s.map((o,a)=>{const u=new ic(`id-${a}`,"",o.iconClass||Sz(o.iconPath),!0,()=>Kte(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return u.tooltip=o.tooltip||"",u}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,v0(this.ui.message,...ob(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?C("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ur.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}pB.noPromptMessage=C("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class fO extends pB{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Ce),this.onWillAcceptEmitter=this._register(new Ce),this.onDidAcceptEmitter=this._register(new Ce),this.onDidCustomEmitter=this._register(new Ce),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?yh.NONE:yh.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Ce),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Ce),this.onDidTriggerItemButtonEmitter=this._register(new Ce),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?r3e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(us.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(us.Next),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(us.Previous):this.ui.list.focus(us.Last),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 12:this.ui.list.focus(us.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 11:this.ui.list.focus(us.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(us.First),Ni.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(us.Last),Ni.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&rc(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&rc(e,this._selectedItems,(n,r)=>n===r)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&rc(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Ge(this.ui.container,Ht.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new yr(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,u]=o.getParts();return u?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const r=this.ariaLabel||this.placeholder||fO.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==r&&(this.ui.inputBox.ariaLabel=r),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case yh.NONE:this._itemActivation=yh.FIRST;break;case yh.SECOND:this.ui.list.focus(us.Second),this._itemActivation=yh.FIRST;break;case yh.LAST:this.ui.list.focus(us.Last),this._itemActivation=yh.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(us.First)),this.keepScrollPosition&&(this.scrollTop=e)}}fO.DEFAULT_ARIA_LABEL=C("quickInputBox.ariaLabel","Type to narrow down results.");class mB extends Oe{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Ce),this.onDidCustomEmitter=this._register(new Ce),this.onDidTriggerButtonEmitter=this._register(new Ce),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Ce),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Ce),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(Ge(window,Ht.KEY_DOWN,e,!0)),this._register(Ge(window,Ht.KEY_UP,e,!0)),this._register(Ge(window,Ht.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=Be(this.parentElement,bu(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=uc(e),n=Be(e,bu(".quick-input-titlebar")),r=this._register(new ug(n));r.domNode.classList.add("quick-input-left-action-bar");const s=Be(n,bu(".quick-input-title")),o=this._register(new ug(n));o.domNode.classList.add("quick-input-right-action-bar");const a=Be(e,bu(".quick-input-description")),u=Be(e,bu(".quick-input-header")),d=Be(u,bu("input.quick-input-check-all"));d.type="checkbox",this._register(eo(d,Ht.CHANGE,X=>{const $=d.checked;M.setAllVisibleChecked($)})),this._register(Ge(d,Ht.CLICK,X=>{(X.x||X.y)&&m.setFocus()}));const h=Be(u,bu(".quick-input-description")),f=Be(u,bu(".quick-input-and-message")),p=Be(f,bu(".quick-input-filter")),m=this._register(new f3e(p));m.setAttribute("aria-describedby",`${this.idPrefix}message`);const v=Be(p,bu(".quick-input-visible-count"));v.setAttribute("aria-live","polite"),v.setAttribute("aria-atomic","true");const b=new yz(v,{countFormat:C({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),L=Be(p,bu(".quick-input-count"));L.setAttribute("aria-live","polite");const S=new yz(L,{countFormat:C({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),y=Be(u,bu(".quick-input-action")),E=new Hte(y);E.label=C("ok","OK"),this._register(E.onDidClick(X=>{this.onDidAcceptEmitter.fire()}));const A=Be(u,bu(".quick-input-action")),N=new Hte(A);N.label=C("custom","Custom"),this._register(N.onDidClick(X=>{this.onDidCustomEmitter.fire()}));const V=Be(f,bu(`#${this.idPrefix}message.quick-input-message`)),M=this._register(new aY(e,this.idPrefix+"list",this.options));this._register(M.onChangedAllVisibleChecked(X=>{d.checked=X})),this._register(M.onChangedVisibleCount(X=>{b.setCount(X)})),this._register(M.onChangedCheckedCount(X=>{S.setCount(X)})),this._register(M.onLeave(()=>{setTimeout(()=>{m.setFocus(),this.controller instanceof fO&&this.controller.canSelectMany&&M.clearFocus()},0)})),this._register(M.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const R=new n3e(e);R.getContainer().classList.add("quick-input-progress");const Y=Hy(e);return this._register(Y),this._register(Ge(e,Ht.FOCUS,X=>{this.previousFocusElement=X.relatedTarget instanceof HTMLElement?X.relatedTarget:void 0},!0)),this._register(Y.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(dO.Blur),this.previousFocusElement=void 0})),this._register(Ge(e,Ht.FOCUS,X=>{m.setFocus()})),this._register(Ge(e,Ht.KEY_DOWN,X=>{const $=new yr(X);switch($.keyCode){case 3:Ni.stop(X,!0),this.onDidAcceptEmitter.fire();break;case 9:Ni.stop(X,!0),this.hide(dO.Gesture);break;case 2:if(!$.altKey&&!$.ctrlKey&&!$.metaKey){const T=[".action-label.codicon"];e.classList.contains("show-checkboxes")?T.push("input"):T.push("input[type=text]"),this.getUI().list.isDisplayed()&&T.push(".monaco-list");const O=e.querySelectorAll(T.join(", "));$.shiftKey&&$.target===O[0]?(Ni.stop(X,!0),O[O.length-1].focus()):!$.shiftKey&&$.target===O[O.length-1]&&(Ni.stop(X,!0),O[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:r,titleBar:n,title:s,description1:a,description2:h,rightActionBar:o,checkAll:d,filterContainer:p,inputBox:m,visibleCountContainer:v,visibleCount:b,countContainer:L,count:S,okContainer:y,ok:E,message:V,customButtonContainer:A,customButton:N,list:M,progressBar:R,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:X=>this.show(X),hide:()=>this.hide(),setVisibilities:X=>this.setVisibilities(X),setComboboxAccessibility:X=>this.setComboboxAccessibility(X),setEnabled:X=>this.setEnabled(X),setContextKey:X=>this.options.setContextKey(X)},this.updateStyles(),this.ui}pick(e,t={},n=Fn.None){return new Promise((r,s)=>{let o=h=>{o=r,t.onKeyMods&&t.onKeyMods(a.keyMods),r(h)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let u;const d=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const f=h[0];f&&t.onDidFocus&&t.onDidFocus(f)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const f=h[0];f&&(o(f),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const f=a.items.indexOf(h.item);if(f!==-1){const p=a.items.slice(),m=p.splice(f,1),v=a.activeItems.filter(L=>L!==m[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=p,v&&(a.activeItems=v),a.keepScrollPosition=b}}}))),a.onDidChangeValue(h=>{u&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==u)&&(a.activeItems=[u])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{ri(d),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,f])=>{u=f,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(p=>p.type!=="separator"&&p.picked)),u&&(a.activeItems=[u])}),a.show(),Promise.resolve(e).then(void 0,h=>{s(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new fO(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ur.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),v0(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const r=this.options.backKeybindingLabel();xz.tooltip=r?C("quickInput.backWithKeybinding","Back ({0})",r):C("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const r=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!r){let s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=ml(s.parentElement);s!=null&&s.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,mB.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:r,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=r?`1px solid ${r}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}mB.MAX_WIDTH=600;var Dz;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(Dz||(Dz={}));const G0={Quickaccess:"workbench.contributions.quickaccess"};let k3e=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Un(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return FS([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}};Xr.add(G0.Quickaccess,new k3e);const Cc=gi("quickInputService");var N3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},qte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Iz=class extends Oe{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Xr.as(G0.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var r;const[s,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,u=a==null?void 0:a.descriptor;if(a&&o&&u===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let m;if(a&&u&&u!==o){const v=a.value.substr(u.prefix.length);v&&(m=`${o.prefix}${v}`)}if(!m){const v=s==null?void 0:s.defaultFilterValue;v===Dz.LAST?m=this.lastAcceptedPickerValues.get(o):typeof v=="string"&&(m=`${o.prefix}${v}`)}typeof m=="string"&&(e=m)}const d=new Je,h=d.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,o,n),h.placeholder=o==null?void 0:o.placeholder,h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(r=n==null?void 0:n.itemActivation)!==null&&r!==void 0?r:yh.SECOND),h.contextKey=o==null?void 0:o.contextKey,h.filterValue=m=>m.substring(o?o.prefix.length:0),o!=null&&o.placeholder&&(h.ariaLabel=o==null?void 0:o.placeholder);let f;t&&(f=new Gle,d.add(kp(h.onWillAccept)(m=>{m.veto(),h.hide()}))),d.add(this.registerPickerListeners(h,s,o,e));const p=d.add(new oa);if(s&&d.add(s.provide(h,p.token)),kp(h.onDidHide)(()=>{h.selectedItems.length===0&&p.cancel(),d.dispose(),f==null||f.complete(h.selectedItems.slice(0))}),h.show(),t)return f==null?void 0:f.p}adjustValueSelection(e,t,n){var r;let s;n!=null&&n.preserveValue?s=[e.value.length,e.value.length]:s=[(r=t==null?void 0:t.prefix.length)!==null&&r!==void 0?r:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,r){const s=new Je,o=this.visibleQuickAccess={picker:e,descriptor:n,value:r};return s.add(Un(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),s.add(e.onDidChangeValue(a=>{const[u]=this.getOrInstantiateProvider(a);u!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&s.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),s}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};Iz=N3e([qte(0,Cc),qte(1,Nn)],Iz);var A3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},RN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let z3=class extends pxe{constructor(e,t,n,r,s){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=r,this.layoutService=s,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Iz))),this._quickAccess}createController(e=this.layoutService,t){var n,r;const s={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,u,d,h,f)=>this.instantiationService.createInstance(mz,a,u,d,h,f),styles:this.computeStyles()},o=this._register(new mB(Object.assign(Object.assign({},s),t)));return o.layout(e.dimension,(r=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&r!==void 0?r:0),this._register(e.onDidLayout(a=>{var u,d;return o.layout(a,(d=(u=e.offset)===null||u===void 0?void 0:u.top)!==null&&d!==void 0?d:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Dt(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Fn.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Dh(this.theme,{quickInputBackground:mJ,quickInputForeground:tIe,quickInputTitleBackground:nIe,contrastBorder:fs,widgetShadow:w0})),inputBox:Dh(this.theme,{inputForeground:Oq,inputBackground:Aq,inputBorder:Mq,inputValidationInfoBackground:ice,inputValidationInfoForeground:rce,inputValidationInfoBorder:sce,inputValidationWarningBackground:oce,inputValidationWarningForeground:ace,inputValidationWarningBorder:lce,inputValidationErrorBackground:uce,inputValidationErrorForeground:cce,inputValidationErrorBorder:dce}),countBadge:Dh(this.theme,{badgeBackground:x2,badgeForeground:D2,badgeBorder:fs}),button:Dh(this.theme,{buttonForeground:KDe,buttonBackground:NH,buttonHoverBackground:qDe,buttonBorder:fs}),progressBar:Dh(this.theme,{progressBarBackground:GDe}),keybindingLabel:Dh(this.theme,{keybindingLabelBackground:sIe,keybindingLabelForeground:oIe,keybindingLabelBorder:aIe,keybindingLabelBottomBorder:lIe,keybindingLabelShadow:w0}),list:Dh(this.theme,{listBackground:mJ,listInactiveFocusForeground:jIe,listInactiveSelectionIconForeground:KIe,listInactiveFocusBackground:e4,listFocusOutline:Ja,listInactiveFocusOutline:Ja,pickerGroupBorder:rIe,pickerGroupForeground:iIe})}}};z3=A3e([RN(0,Nn),RN(1,cn),RN(2,Er),RN(3,il),RN(4,CM)],z3);var Jhe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},E1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Tz=class extends z3{constructor(e,t,n,r,s,o){super(t,n,r,s,o),this.host=void 0;const a=iS.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};Tz=Jhe([E1(1,Nn),E1(2,cn),E1(3,Er),E1(4,il),E1(5,CM)],Tz);let kz=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(Tz,e);this.mapEditorToService.set(e,t),kp(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Fn.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};kz=Jhe([E1(0,Nn),E1(1,Ti)],kz);class iS{constructor(e){this.editor=e,this.widget=new _B(this.editor)}static get(e){return e.getContribution(iS.ID)}dispose(){this.widget.dispose()}}iS.ID="editor.controller.quickInput";class _B{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return _B.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}_B.ID="editor.contrib.quickInputWidget";ki(iS.ID,iS);const efe=gi("workspaceTrustManagementService");var bi;(function(i){const e=new KA;class t{constructor(u,d){this._serviceId=u,this._factory=d,this._value=null}get id(){return this._serviceId}get(u){if(!this._value){if(u&&(this._value=u[this._serviceId.toString()]),this._value||(this._value=this._factory(u)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}i.LazyStaticService=t;let n=[];function r(a,u){let d=new t(a,u);return n.push(d),d}function s(a){let u=new KA;for(const[h,f]of ONe())u.set(h,f);for(let h in a)a.hasOwnProperty(h)&&u.set(gi(h),a[h]);n.forEach(h=>u.set(h.id,h.get(a)));let d=new O3(u,!0);return u.set(Nn,d),[u,d]}i.init=s,i.instantiationService=r(Nn,()=>new O3(e,!0));const o=new Yde;i.configurationService=r(nr,()=>o),i.resourceConfigurationService=r(NG,()=>new LRe(o)),i.resourcePropertiesService=r(nhe,()=>new a$(o)),i.contextService=r(Ude,()=>new tB),i.labelService=r(yM,()=>new DRe),i.telemetryService=r(wg,()=>new ERe),i.dialogService=r(wM,()=>new yRe),i.notificationService=r(gs,()=>new eB),i.markerService=r(xM,()=>new L1),i.modeService=r(Fo,a=>new rO),i.standaloneThemeService=r(q0,()=>new HPe),i.logService=r(yg,()=>new wxe(new Cxe)),i.undoRedoService=r(gM,a=>new H3(i.dialogService.get(a),i.notificationService.get(a))),i.languageConfigurationService=r(fM,a=>new i3(i.configurationService.get(a),i.modeService.get(a))),i.modelService=r(Ds,a=>new T3(i.configurationService.get(a),i.resourcePropertiesService.get(a),i.standaloneThemeService.get(a),i.logService.get(a),i.undoRedoService.get(a),i.modeService.get(a),i.languageConfigurationService.get(a))),i.markerDecorationsService=r(gq,a=>new Cz(i.modelService.get(a),i.markerService.get(a))),i.contextKeyService=r(cn,a=>new ez(i.configurationService.get(a))),i.codeEditorService=r(Ti,a=>new x3(null,i.contextKeyService.get(a),i.standaloneThemeService.get(a))),i.editorProgressService=r($p,()=>new J8),i.storageService=r(Dg,()=>new UFe),i.editorWorkerService=r(Vu,a=>new Z$(i.modelService.get(a),i.resourceConfigurationService.get(a),i.logService.get(a)))})(bi||(bi={}));class tfe extends Oe{constructor(e,t){super();const[n,r]=bi.init(t);this._serviceCollection=n,this._instantiationService=r;const s=this.get(nr),o=this.get(gs),a=this.get(wg),u=this.get(Er),d=this.get(yg),h=this.get(cn);let f=(L,S)=>{let y=null;return t&&(y=t[L.toString()]),y||(y=S()),this._serviceCollection.set(L,y),y};f(il,()=>new wz(h,s)),f(bc,()=>new gz(u));let p=f(Tr,()=>new SRe(this._instantiationService)),m=f(Sr,()=>this._register(new Gde(h,p,a,o,d,e))),v=f(CM,()=>new Zde(bi.codeEditorService.get(Ti),e));f(Cc,()=>new kz(r,bi.codeEditorService.get(Ti)));let b=f(Hp,()=>this._register(new lz(v)));f(K0,()=>new GFe),f(j0,()=>{const L=new az(a,o,b,m,u);return L.configure({blockMouse:!1}),this._register(L)}),f(CC,()=>new vz(p)),f(xG,()=>new xRe(bi.modelService.get(Ds))),f(efe,()=>new IRe)}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}var Gte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Ll=gi("openerService"),O3e=Object.freeze({_serviceBrand:void 0,registerOpener(){return Oe.None},registerValidator(){return Oe.None},registerExternalUriResolver(){return Oe.None},setDefaultExternalOpener(){},registerExternalOpener(){return Oe.None},open(){return Gte(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return Gte(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function nfe(i,e){return rn.isUri(i)?QN(i.scheme,e):bq(i,e+":")}function Yte(i,...e){return e.some(t=>nfe(i,t))}function Nz(i){let e=JSON.parse(i);return e=Az(e),e}function Az(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return rn.revive(i);case 2:return new RegExp(i.source,i.flags)}if(i instanceof O8||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=Az(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=Az(i[t],e+1))}return i}var U3;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(U3||(U3={}));var lY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},j3=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},x1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let Oz=class{constructor(e){this._commandService=e}open(e,t){return x1(this,void 0,void 0,function*(){if(!nfe(e,Tn.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=rn.parse(e));let n=[];try{n=Nz(decodeURIComponent(e.query))}catch{try{n=Nz(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};Oz=lY([j3(0,Tr)],Oz);let Mz=class{constructor(e){this._editorService=e}open(e,t){return x1(this,void 0,void 0,function*(){typeof e=="string"&&(e=rn.parse(e));let n;const r=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return r&&(n={startLineNumber:parseInt(r[1]),startColumn:r[2]?parseInt(r[2]):1},e=e.with({fragment:""})),e.scheme===Tn.file&&(e=rke(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?U3.USER:U3.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};Mz=lY([j3(0,Ti)],Mz);let K3=class{constructor(e,t){this._openers=new Tu,this._validators=new Tu,this._resolvers=new Tu,this._resolvedUriTargets=new na(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Tu,this._defaultExternalOpener={openExternal:n=>x1(this,void 0,void 0,function*(){return Yte(n,Tn.http,Tn.https)?fue(n):window.location.href=n,!0})},this._openers.push({open:(n,r)=>x1(this,void 0,void 0,function*(){return r!=null&&r.openExternal||Yte(n,Tn.mailto,Tn.http,Tn.https,Tn.vsls)?(yield this._doOpenExternal(n,r),!0):!1})}),this._openers.push(new Oz(t)),this._openers.push(new Mz(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return x1(this,void 0,void 0,function*(){const r=typeof e=="string"?rn.parse(e):e,s=(n=this._resolvedUriTargets.get(r))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(s)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return x1(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const r=yield n.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return x1(this,void 0,void 0,function*(){const n=typeof e=="string"?rn.parse(e):e;let r;try{r=(yield this.resolveExternalUri(n,t)).resolved}catch{r=n}let s;if(typeof e=="string"&&n.toString()===r.toString()?s=e:s=encodeURI(r.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:o},Fn.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},Fn.None)})}dispose(){this._validators.clear()}};K3=lY([j3(0,Ti),j3(1,Tr)],K3);var M3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},R3e=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let gg=class{constructor(){this.simpleEditorModelResolverService=null}initWorkspace(e){this._container=e,this._services=this.createStandaloneServices()}get container(){return this._container}get services(){return this._services}get commandService(){return this.services.get(Tr)}mergeEditorServices(e){if(e){const t=this.services;for(const n in e)n&&t.get(n)&&e[n]&&t.set(n,e[n])}}create(e,t,n){const r=this.services;this.mergeEditorServices(n),r.has(Qa)||(this.simpleEditorModelResolverService=new L3(bi.modelService.get()),r.set(Qa,this.simpleEditorModelResolverService));const s=new tO(e,t,r,r.get(Nn),r.get(Ti),r.get(Tr),r.get(cn),r.get(Sr),r.get(Hp),r.get(q0),r.get(gs),r.get(nr),r.get(il),r.get(Ds),r.get(Fo));return this.simpleEditorModelResolverService&&this.simpleEditorModelResolverService.setEditor(s),s}createStandaloneServices(){const e=new tfe(this.container),t=e.get(Nn);e.has(Ll)||e.set(Ll,new K3(e.get(Ti),e.get(Tr)));const n=t.createInstance(z3),r=new Zde(bi.codeEditorService.get(Ti),this.container);return e.set(CM,r),e.set(Cc,n),e}};gg=M3e([Ki(),R3e("design:paramtypes",[])],gg);const P3e=`${j5}-monaco-editor`;class uY extends he.PureComponent{constructor(e){super(e),this.monacoService=je.resolve(gg)}componentDidMount(){var e;const{options:t={},override:n,editorInstanceRef:r}=this.props;this.monacoInstance||(this.monacoInstance=(e=this.monacoService)===null||e===void 0?void 0:e.create(this.monacoDom,t,n),r==null||r(this.monacoInstance))}componentDidUpdate(e){const{onChangeEditorProps:t}=this.props;!wr.isEqual(e,this.props)&&(t==null||t(e,this.props))}render(){const{style:e}=this.props;let t={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return t=e?Object.assign(t,e):t,re.createElement("div",{style:t,className:P3e,ref:n=>{this.monacoDom=n}})}}const IM=Bn("scrollBar"),F3e=gt(IM,"wrapper"),cY=gt(IM,"container"),ife=gt(IM,"shadow"),vB=gt(IM,"track"),B3e=gt(IM,"thumb"),W3e=_n(cY,"horizontal"),V3e=_n(cY,"vertical"),H3e=_n(vB,"hidden"),$3e=_n(vB,"vertical"),z3e=_n(vB,"horizontal"),U3e=_n(ife,"hidden");var rS;(function(i){i.vertical="vertical",i.horizontal="horizontal"})(rS||(rS={}));function vh(i){return i===rS.vertical}function JC(i,e){const t=vh(i)?"height":"width";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}function sP(i,e){const t=vh(i)?"top":"left";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}const KS=he.forwardRef(function({children:i,style:e,trackStyle:t,className:n,isShowShadow:r=!1,inactiveHidden:s=!0,direction:o=rS.vertical,onScroll:a,onScrollStart:u,onScrollEnd:d},h){const[f,p]=he.useState(.1),[m,v]=he.useState(!0),[b,L]=he.useState(!1),[S,y]=he.useState(!1),E=he.useRef(null),A=he.useRef(null),N=he.useRef(null),V=he.useRef(null),M=he.useRef({y:0,startOffset:0}),R=()=>{var K;return((K=A.current)===null||K===void 0?void 0:K[JC(o,"scroll")])||0},Y=()=>{var K;return((K=E.current)===null||K===void 0?void 0:K[JC(o,"client")])||0},X=()=>{var K;return((K=E.current)===null||K===void 0?void 0:K[sP(o,"scroll")])||0},$=()=>{var K;return((K=N.current)===null||K===void 0?void 0:K.getBoundingClientRect()[JC(o)])||0},T=()=>{var K;return((K=V.current)===null||K===void 0?void 0:K.getBoundingClientRect()[JC(o)])||0},O=()=>{var K;return((K=V.current)===null||K===void 0?void 0:K[sP(o,"offset")])||0};he.useImperativeHandle(h,()=>{var K;return{scrollTo:fe=>{if(B()&&typeof fe=="number"){const ne=fe/R()*$();j(fe),W(ne)}},scrollHeight:((K=E.current)===null||K===void 0?void 0:K.scrollHeight)||0}}),he.useEffect(()=>{const K=new ResizeObserver(fe=>{for(const ne of fe){const De=ne.contentRect[JC(o)],Ve=R();let rt=De/Ve;Number.isNaN(rt)&&(rt=1);const At=X(),Me=At/Ve*$();j(At),W(Me),p(rt>1?1:rt)}});return K.observe(E.current),()=>{K.disconnect()}},[]),he.useEffect(()=>{const K=new ResizeObserver(fe=>{for(const ne of fe){const be=R(),Ve=Y()/be;p(Ve>1?1:Ve)}});return K.observe(A.current),()=>{K.disconnect()}},[]),he.useEffect(()=>{var K;let fe=0;function ne(be){if(!B())return;be.preventDefault();const De=X();fe?window.clearTimeout(fe):(u==null||u({scrollTop:De},be),L(!0)),fe=window.setTimeout(()=>{d==null||d({scrollTop:De},be),fe=0,L(!1)},150);const rt=5*(be[vh(o)?"deltaY":"deltaX"]/10),At=De/this[vh(o)?"scrollHeight":"scrollWidth"]*$();W(At),j(De+rt),a==null||a({scrollTop:De},be)}return(K=E.current)===null||K===void 0||K.addEventListener("wheel",ne),()=>{var be;(be=E.current)===null||be===void 0||be.removeEventListener("wheel",ne)}},[]);const B=()=>R()>Y(),W=K=>{const fe=$(),ne=T();requestAnimationFrame(()=>{const be=sP(o);K<=0?V.current.style[be]="0px":K>=fe-ne?V.current.style[be]=`${fe-ne}px`:V.current.style[be]=`${K}px`})},j=K=>{requestAnimationFrame(()=>{var fe,ne,be;const De=sP(o);K<=0?((fe=E.current)===null||fe===void 0||fe.scrollTo({[De]:0}),v(!0)):K>=R()-$()?((ne=E.current)===null||ne===void 0||ne.scrollTo({[De]:R()}),v(!1)):((be=E.current)===null||be===void 0||be.scrollTo({[De]:K}),v(!1))})},U=K=>{if(K.stopPropagation(),!B())return;const{y:fe,height:ne,x:be,width:De}=K.target.getBoundingClientRect(),rt=T()/2,At=R(),ut=K[vh(o)?"clientY":"clientX"]-(vh(o)?fe:be)-rt,Ct=ut/(vh(o)?ne:De);u==null||u({scrollTop:X()},K),j(At*Ct),W(ut),a==null||a({scrollTop:X()},K),d==null||d({scrollTop:X()},K)},q=he.useCallback(K=>{const ne=K[vh(o)?"clientY":"clientX"]-M.current.y,be=M.current.startOffset,De=$(),Ve=be+ne,rt=Ve/De,At=R();j(At*rt),W(Ve),a==null||a({scrollTop:X()},K)},[]),z=K=>{B()&&(L(!0),u==null||u({scrollTop:X()},K),M.current={y:K[vh(o)?"clientY":"clientX"],startOffset:O()},document.body.style.userSelect="none",window.addEventListener("mouseup",fe=>{fe.stopPropagation(),fe.preventDefault(),L(!1),d==null||d({scrollTop:X()},fe),document.body.style.removeProperty("user-select"),window.removeEventListener("mousemove",q)},{once:!0}),window.addEventListener("mousemove",q,{passive:!1}))},k=he.useMemo(()=>{const K=R(),fe=Y();return K<=fe?!0:!b&&!S},[b,S]);return re.createElement("div",{className:mn(F3e,n),ref:E,style:e,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},r&&re.createElement("div",{className:mn(ife,m&&U3e)}),re.createElement("div",{className:mn(cY,vh(o)?V3e:W3e),ref:A},i),re.createElement("div",{className:mn(vB,vh(o)?$3e:z3e,s&&k&&H3e),ref:N,onClick:U,style:t},re.createElement("div",{className:B3e,style:{[JC(o)]:`calc(100% * ${f})`},ref:V,onClick:K=>K.stopPropagation(),onMouseDown:z})))}),Ig=Bn("search"),Zte=gt(Ig,"input"),j3e=gt(Ig,"group"),K3e=gt(Ig,"toolbar"),rfe=gt(Ig,"replace"),q3e=gt(Ig,"target"),G3e=gt(rfe,"button"),Y3e=gt(Ig,"base"),Z3e=gt(Ig,"info"),X3e=gt(Ig,"warning"),Q3e=gt(Ig,"error");var Ly;(function(i){i.info="info",i.warning="warning",i.error="error"})(Ly||(Ly={}));function v4(i){const{className:e,placeholder:t,toolbarData:n=[],onChange:r,value:s,info:o}=i,[a,u]=he.useState(!1),d=he.useRef(null),h=(L,S)=>{var y,E;(y=d.current)===null||y===void 0||y.focus(),(E=i.onToolbarClick)===null||E===void 0||E.call(i,S)},f=L=>{switch(L){case Ly.info:return Z3e;case Ly.warning:return X3e;case Ly.error:return Q3e;default:return""}},p=()=>{u(!0)},m=()=>{u(!1)},v=L=>{if(d.current){d.current.style.height="24px";const y=d.current.scrollHeight/24,E=5;y>E?d.current.style.height=`${24*E}px`:d.current.style.height=`${d.current.scrollHeight}px`}r==null||r(L.target.value||"")},b=L=>{L.keyCode===13&&(r==null||r(L.target.value||""),L.preventDefault())};return re.createElement("div",{className:e},re.createElement("textarea",{ref:d,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",className:mn((o==null?void 0:o.text)&&f((o==null?void 0:o.type)||"")),value:s||"",placeholder:t,title:t,onKeyDown:b,onFocus:p,onBlur:m,onChange:v}),(o==null?void 0:o.text)&&a&&re.createElement("div",{className:mn(Y3e,f(o.type))},o.text),re.createElement(eM,{className:K3e,data:n,onClick:h}))}function J3e({children:i}){return re.createElement("div",{className:j3e},i)}v4.Group=J3e;function sfe(i){const{className:e="",style:t,placeholders:n=[],validationInfo:r,addons:s=[],values:o=[],onAddonClick:a,onButtonClick:u,onChange:d,onSearch:h}=i,[f="Search",p="Replace"]=n,[m,v]=s,[b,L]=o,[S,y]=he.useState(!1),E=()=>{y(!S),u==null||u(!S),h==null||h([b,L])},A=(R,Y)=>{if(d){const X=Y==="search"?[R,L]:[b,R];d(X),h==null||h(X)}},N=R=>{a==null||a(R),h==null||h([b,L])},M=(()=>{if(r)return typeof r=="string"?{type:Ly.info,text:r}:r})();return re.createElement("div",{style:t,className:mn(Ig,e)},re.createElement(dr,{className:G3e,type:S?"chevron-down":"chevron-right",onClick:E}),re.createElement(v4.Group,null,re.createElement(v4,{value:b,className:mn(Zte,q3e),info:M,placeholder:f,onChange:R=>A(R,"search"),toolbarData:m,onToolbarClick:N}),S&&re.createElement(v4,{value:L,className:mn(Zte,rfe),placeholder:p,onChange:R=>A(R,"replace"),toolbarData:v,onToolbarClick:N})))}var e5e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const t5e={isOpen:!1,option:{name:"",value:"",description:""}},Y0=Bn("select"),n5e=gt(Y0,"container"),i5e=gt(Y0,"options"),Xte=gt(Y0,"descriptor"),r5e=gt(Y0,"input"),Qte=_n(Y0,"active"),s5e=gt(Y0,"arrow");class gO extends he.PureComponent{constructor(e){super(e),this.handleOnClickOption=t=>{const n=t.target,r=hR(n,"data-value"),s=hR(n,"data-name"),o=hR(n,"data-desc");if(s){const a={value:r,name:s,description:o};this.setState({option:a},()=>{var u,d;(d=(u=this.props).onSelect)===null||d===void 0||d.call(u,t,a),this.contextView.hide()})}},this.handleOnHoverOption=t=>{const n=t.target,r=hR(n,"data-desc"),s=this.contextView.view.querySelector("."+Xte);if(s){const o=r||"None";s.innerHTML=o,s.setAttribute("title",o)}},this.handleOnClickSelect=t=>{const n=this.selectElm.current,{children:r}=this.props;if(n){const s=n==null?void 0:n.getBoundingClientRect();s.y=s.y+s.height,this.setState({isOpen:!0}),this.contextView.show(s,()=>re.createElement("div",{style:{width:s.width},className:mn(n5e,Qte),onMouseOver:this.handleOnHoverOption},re.createElement("div",{className:i5e},ZO(r,{onClick:this.handleOnClickOption})),re.createElement("div",{className:Xte},"None")))}},this.contextView=NS({shadowOutline:!1}),this.state=this.getDefaultState(this.props),this.selectElm=re.createRef(),this.selectInput=re.createRef()}static getDerivedStateFromProps(e,t){return e.value!==t.value?{option:gO.getSelectOption(e)}:null}componentDidMount(){this.contextView.onHide(()=>{this.state.isOpen&&this.setState({isOpen:!1})})}componentWillUnmount(){this.contextView.dispose()}static getSelectOption(e){let t={};const n=e.value||e.defaultValue,r=he.Children.toArray(e.children);for(const s of r)if(he.isValidElement(s)){const o=s.props;if(o.value&&o.value===n){t=Object.assign(Object.assign({},o),{name:o.name||o.children});break}}return t}getDefaultState(e){return Object.assign(Object.assign({},t5e),{option:Object.assign({},gO.getSelectOption(e))})}render(){const{option:e,isOpen:t}=this.state,n=this.props,{className:r,placeholder:s,onSelect:o}=n,a=e5e(n,["className","placeholder","onSelect"]),d=mn(Y0,r,t?Qte:"");return re.createElement("div",Object.assign({ref:this.selectElm,className:d},a),re.createElement("input",{onClick:this.handleOnClickSelect,ref:this.selectInput,autoComplete:"off",placeholder:s,className:r5e,value:e.name,readOnly:!0}),re.createElement("span",{className:s5e},re.createElement(dr,{type:"chevron-down"})))}}var o5e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const ofe=gt(Y0,"option"),a5e=_n(ofe,"disabled");function afe(i){const{className:e,value:t,title:n,name:r,description:s,disabled:o,children:a,onClick:u}=i,d=o5e(i,["className","value","title","name","description","disabled","children","onClick"]),h=mn(ofe,e,o?a5e:""),f=p=>{o||u==null||u(p)};return re.createElement("div",Object.assign({className:h,title:n,"data-name":r||a,"data-value":t,"data-desc":s,onClick:f},d),a)}var Rz={exports:{}};(function(i,e){Object.defineProperty(e,"__esModule",{value:!0});function t(M){return typeof M=="object"&&!("toString"in M)?Object.prototype.toString.call(M).slice(8,-1):M}var n=typeof process=="object"&&!0;function r(M,R){if(!M)throw n?new Error("Invariant failed"):new Error(R())}e.invariant=r;var s=Object.prototype.hasOwnProperty,o=Array.prototype.splice,a=Object.prototype.toString;function u(M){return a.call(M).slice(8,-1)}var d=Object.assign||function(M,R){return h(R).forEach(function(Y){s.call(R,Y)&&(M[Y]=R[Y])}),M},h=typeof Object.getOwnPropertySymbols=="function"?function(M){return Object.keys(M).concat(Object.getOwnPropertySymbols(M))}:function(M){return Object.keys(M)};function f(M){return Array.isArray(M)?d(M.constructor(M.length),M):u(M)==="Map"?new Map(M):u(M)==="Set"?new Set(M):M&&typeof M=="object"?d(Object.create(Object.getPrototypeOf(M)),M):M}var p=function(){function M(){this.commands=d({},m),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(R,Y){return R===Y},this.update.newContext=function(){return new M().update}}return Object.defineProperty(M.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(R){this.update.isEquals=R},enumerable:!0,configurable:!0}),M.prototype.extend=function(R,Y){this.commands[R]=Y},M.prototype.update=function(R,Y){var X=this,$=typeof Y=="function"?{$apply:Y}:Y;Array.isArray(R)&&Array.isArray($)||r(!Array.isArray($),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),r(typeof $=="object"&&$!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(X.commands).join(", ")+".")});var T=R;return h($).forEach(function(O){if(s.call(X.commands,O)){var B=R===T;T=X.commands[O]($[O],T,$,R),B&&X.isEquals(T,R)&&(T=R)}else{var W=u(R)==="Map"?X.update(R.get(O),$[O]):X.update(R[O],$[O]),j=u(T)==="Map"?T.get(O):T[O];(!X.isEquals(W,j)||typeof W>"u"&&!s.call(R,O))&&(T===R&&(T=f(R)),u(T)==="Map"?T.set(O,W):T[O]=W)}}),T},M}();e.Context=p;var m={$push:function(M,R,Y){return b(R,Y,"$push"),M.length?R.concat(M):R},$unshift:function(M,R,Y){return b(R,Y,"$unshift"),M.length?M.concat(R):R},$splice:function(M,R,Y,X){return S(R,Y),M.forEach(function($){y($),R===X&&$.length&&(R=f(X)),o.apply(R,$)}),R},$set:function(M,R,Y){return A(Y),M},$toggle:function(M,R){L(M,"$toggle");var Y=M.length?f(R):R;return M.forEach(function(X){Y[X]=!R[X]}),Y},$unset:function(M,R,Y,X){return L(M,"$unset"),M.forEach(function($){Object.hasOwnProperty.call(R,$)&&(R===X&&(R=f(X)),delete R[$])}),R},$add:function(M,R,Y,X){return V(R,"$add"),L(M,"$add"),u(R)==="Map"?M.forEach(function($){var T=$[0],O=$[1];R===X&&R.get(T)!==O&&(R=f(X)),R.set(T,O)}):M.forEach(function($){R===X&&!R.has($)&&(R=f(X)),R.add($)}),R},$remove:function(M,R,Y,X){return V(R,"$remove"),L(M,"$remove"),M.forEach(function($){R===X&&R.has($)&&(R=f(X)),R.delete($)}),R},$merge:function(M,R,Y,X){return N(R,M),h(M).forEach(function($){M[$]!==R[$]&&(R===X&&(R=f(X)),R[$]=M[$])}),R},$apply:function(M,R){return E(M),M(R)}},v=new p;e.isEquals=v.update.isEquals,e.extend=v.extend,e.default=v.update,e.default.default=i.exports=d(e.default,e);function b(M,R,Y){r(Array.isArray(M),function(){return"update(): expected target of "+t(Y)+" to be an array; got "+t(M)+"."}),L(R[Y],Y)}function L(M,R){r(Array.isArray(M),function(){return"update(): expected spec of "+t(R)+" to be an array; got "+t(M)+". Did you forget to wrap your parameter in an array?"})}function S(M,R){r(Array.isArray(M),function(){return"Expected $splice target to be an array; got "+t(M)}),y(R.$splice)}function y(M){r(Array.isArray(M),function(){return"update(): expected spec of $splice to be an array of arrays; got "+t(M)+". Did you forget to wrap your parameters in an array?"})}function E(M){r(typeof M=="function",function(){return"update(): expected spec of $apply to be a function; got "+t(M)+"."})}function A(M){r(Object.keys(M).length===1,function(){return"Cannot have more than one key in an object with $set"})}function N(M,R){r(R&&typeof R=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+t(R)}),r(M&&typeof M=="object",function(){return"update(): $merge expects a target of type 'object'; got "+t(M)})}function V(M,R){var Y=u(M);r(Y==="Map"||Y==="Set",function(){return"update(): "+t(R)+" expects a target of type Set or Map; got "+t(Y)})}})(Rz,Rz.exports);var l5e=Rz.exports;const u5e=Wp(l5e),lfe=he.createContext({dragDropManager:void 0});function Dc(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var Jte=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),M6=function(){return Math.random().toString(36).substring(7).split("").join(".")},ene={INIT:"@@redux/INIT"+M6(),REPLACE:"@@redux/REPLACE"+M6(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+M6()}};function c5e(i){if(typeof i!="object"||i===null)return!1;for(var e=i;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function ufe(i,e,t){var n;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Dc(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Dc(1));return t(ufe)(i,e)}if(typeof i!="function")throw new Error(Dc(2));var r=i,s=e,o=[],a=o,u=!1;function d(){a===o&&(a=o.slice())}function h(){if(u)throw new Error(Dc(3));return s}function f(b){if(typeof b!="function")throw new Error(Dc(4));if(u)throw new Error(Dc(5));var L=!0;return d(),a.push(b),function(){if(L){if(u)throw new Error(Dc(6));L=!1,d();var y=a.indexOf(b);a.splice(y,1),o=null}}}function p(b){if(!c5e(b))throw new Error(Dc(7));if(typeof b.type>"u")throw new Error(Dc(8));if(u)throw new Error(Dc(9));try{u=!0,s=r(s,b)}finally{u=!1}for(var L=o=a,S=0;S<L.length;S++){var y=L[S];y()}return b}function m(b){if(typeof b!="function")throw new Error(Dc(10));r=b,p({type:ene.REPLACE})}function v(){var b,L=f;return b={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Dc(11));function E(){y.next&&y.next(h())}E();var A=L(E);return{unsubscribe:A}}},b[Jte]=function(){return this},b}return p({type:ene.INIT}),n={dispatch:p,subscribe:f,getState:h,replaceReducer:m},n[Jte]=v,n}function vi(i,e,...t){if(d5e()&&e===void 0)throw new Error("invariant requires an error message argument");if(!i){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(e.replace(/%s/g,function(){return t[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function d5e(){return typeof process<"u"&&process.env.NODE_ENV==="production"}function h5e(i,e,t){return e.split(".").reduce((n,r)=>n&&n[r]?n[r]:t||null,i)}function f5e(i,e){return i.filter(t=>t!==e)}function cfe(i){return typeof i=="object"}function g5e(i,e){const t=new Map,n=s=>{t.set(s,t.has(s)?t.get(s)+1:1)};i.forEach(n),e.forEach(n);const r=[];return t.forEach((s,o)=>{s===1&&r.push(o)}),r}function p5e(i,e){return i.filter(t=>e.indexOf(t)>-1)}const dY="dnd-core/INIT_COORDS",bB="dnd-core/BEGIN_DRAG",hY="dnd-core/PUBLISH_DRAG_SOURCE",CB="dnd-core/HOVER",wB="dnd-core/DROP",yB="dnd-core/END_DRAG";function tne(i,e){return{type:dY,payload:{sourceClientOffset:e||null,clientOffset:i||null}}}const m5e={type:dY,payload:{clientOffset:null,sourceClientOffset:null}};function _5e(i){return function(t=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:s,getSourceClientOffset:o}=n,a=i.getMonitor(),u=i.getRegistry();i.dispatch(tne(s)),v5e(t,a,u);const d=w5e(t,a);if(d==null){i.dispatch(m5e);return}let h=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");b5e(o),h=o(d)}i.dispatch(tne(s,h));const p=u.getSource(d).beginDrag(a,d);if(p==null)return;C5e(p),u.pinSource(d);const m=u.getSourceType(d);return{type:bB,payload:{itemType:m,item:p,sourceId:d,clientOffset:s||null,sourceClientOffset:h||null,isSourcePublic:!!r}}}}function v5e(i,e,t){vi(!e.isDragging(),"Cannot call beginDrag while dragging."),i.forEach(function(n){vi(t.getSource(n),"Expected sourceIds to be registered.")})}function b5e(i){vi(typeof i=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function C5e(i){vi(cfe(i),"Item must be an object.")}function w5e(i,e){let t=null;for(let n=i.length-1;n>=0;n--)if(e.canDragSource(i[n])){t=i[n];break}return t}function y5e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function S5e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){y5e(i,r,t[r])})}return i}function L5e(i){return function(t={}){const n=i.getMonitor(),r=i.getRegistry();E5e(n),I5e(n).forEach((o,a)=>{const u=x5e(o,a,r,n),d={type:wB,payload:{dropResult:S5e({},t,u)}};i.dispatch(d)})}}function E5e(i){vi(i.isDragging(),"Cannot call drop while not dragging."),vi(!i.didDrop(),"Cannot call drop twice during one drag operation.")}function x5e(i,e,t,n){const r=t.getTarget(i);let s=r?r.drop(n,i):void 0;return D5e(s),typeof s>"u"&&(s=e===0?{}:n.getDropResult()),s}function D5e(i){vi(typeof i>"u"||cfe(i),"Drop result must either be an object or undefined.")}function I5e(i){const e=i.getTargetIds().filter(i.canDropOnTarget,i);return e.reverse(),e}function T5e(i){return function(){const t=i.getMonitor(),n=i.getRegistry();k5e(t);const r=t.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource()),{type:yB}}}function k5e(i){vi(i.isDragging(),"Cannot call endDrag while not dragging.")}function Pz(i,e){return e===null?i===null:Array.isArray(i)?i.some(t=>t===e):i===e}function N5e(i){return function(t,{clientOffset:n}={}){A5e(t);const r=t.slice(0),s=i.getMonitor(),o=i.getRegistry(),a=s.getItemType();return M5e(r,o,a),O5e(r,s,o),R5e(r,s,o),{type:CB,payload:{targetIds:r,clientOffset:n||null}}}}function A5e(i){vi(Array.isArray(i),"Expected targetIds to be an array.")}function O5e(i,e,t){vi(e.isDragging(),"Cannot call hover while not dragging."),vi(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<i.length;n++){const r=i[n];vi(i.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");const s=t.getTarget(r);vi(s,"Expected targetIds to be registered.")}}function M5e(i,e,t){for(let n=i.length-1;n>=0;n--){const r=i[n],s=e.getTargetType(r);Pz(s,t)||i.splice(n,1)}}function R5e(i,e,t){i.forEach(function(n){t.getTarget(n).hover(e,n)})}function P5e(i){return function(){if(i.getMonitor().isDragging())return{type:hY}}}function F5e(i){return{beginDrag:_5e(i),publishDragSource:P5e(i),hover:N5e(i),drop:L5e(i),endDrag:T5e(i)}}class B5e{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function n(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&t(a)}}const r=F5e(this);return Object.keys(r).reduce((s,o)=>{const a=r[o];return s[o]=n(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function W5e(i,e){return{x:i.x+e.x,y:i.y+e.y}}function dfe(i,e){return{x:i.x-e.x,y:i.y-e.y}}function V5e(i){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:n}=i;return!e||!t||!n?null:dfe(W5e(e,n),t)}function H5e(i){const{clientOffset:e,initialClientOffset:t}=i;return!e||!t?null:dfe(e,t)}const U2=[],fY=[];U2.__IS_NONE__=!0;fY.__IS_ALL__=!0;function $5e(i,e){return i===U2?!1:i===fY||typeof e>"u"?!0:p5e(e,i).length>0}class z5e{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;vi(typeof e=="function","listener must be a function."),vi(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===r||a===r+1&&!$5e(o.dirtyHandlerIds,n)||e()}finally{r=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){vi(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const n=()=>{const r=this.store.getState().dragOffset;r!==t&&(t=r,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return vi(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(vi(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),r=this.getItemType();return Pz(n,r)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(vi(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),r=this.getItemType();return n!==r?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),s=this.getItemType();if(s&&!Pz(r,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return n?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return V5e(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return H5e(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const nne=typeof global<"u"?global:self,hfe=nne.MutationObserver||nne.WebKitMutationObserver;function ffe(i){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),i()}}}function U5e(i){let e=1;const t=new hfe(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const j5e=typeof hfe=="function"?U5e:ffe;class K5e{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let n=0,r=e.length-this.index;n<r;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=j5e(this.flush),this.requestErrorThrow=ffe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class q5e{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class G5e{create(e){const t=this.freeTasks,n=t.length?t.pop():new q5e(this.onError,r=>t[t.length]=r);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const gfe=new K5e,Y5e=new G5e(gfe.registerPendingError);function Z5e(i){gfe.enqueueTask(Y5e.create(i))}const gY="dnd-core/ADD_SOURCE",pY="dnd-core/ADD_TARGET",mY="dnd-core/REMOVE_SOURCE",SB="dnd-core/REMOVE_TARGET";function X5e(i){return{type:gY,payload:{sourceId:i}}}function Q5e(i){return{type:pY,payload:{targetId:i}}}function J5e(i){return{type:mY,payload:{sourceId:i}}}function e8e(i){return{type:SB,payload:{targetId:i}}}function t8e(i){vi(typeof i.canDrag=="function","Expected canDrag to be a function."),vi(typeof i.beginDrag=="function","Expected beginDrag to be a function."),vi(typeof i.endDrag=="function","Expected endDrag to be a function.")}function n8e(i){vi(typeof i.canDrop=="function","Expected canDrop to be a function."),vi(typeof i.hover=="function","Expected hover to be a function."),vi(typeof i.drop=="function","Expected beginDrag to be a function.")}function Fz(i,e){if(e&&Array.isArray(i)){i.forEach(t=>Fz(t,!1));return}vi(typeof i=="string"||typeof i=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Wc;(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(Wc||(Wc={}));let i8e=0;function r8e(){return i8e++}function s8e(i){const e=r8e().toString();switch(i){case Wc.SOURCE:return`S${e}`;case Wc.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${i}`)}}function ine(i){switch(i[0]){case"S":return Wc.SOURCE;case"T":return Wc.TARGET;default:throw new Error(`Cannot parse handler ID: ${i}`)}}function rne(i,e){const t=i.entries();let n=!1;do{const{done:r,value:[,s]}=t.next();if(s===e)return!0;n=!!r}while(!n);return!1}class o8e{addSource(e,t){Fz(e),t8e(t);const n=this.addHandler(Wc.SOURCE,e,t);return this.store.dispatch(X5e(n)),n}addTarget(e,t){Fz(e,!0),n8e(t);const n=this.addHandler(Wc.TARGET,e,t);return this.store.dispatch(Q5e(n)),n}containsHandler(e){return rne(this.dragSources,e)||rne(this.dropTargets,e)}getSource(e,t=!1){return vi(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return vi(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return vi(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return vi(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ine(e)===Wc.SOURCE}isTargetId(e){return ine(e)===Wc.TARGET}removeSource(e){vi(this.getSource(e),"Expected an existing source."),this.store.dispatch(J5e(e)),Z5e(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){vi(this.getTarget(e),"Expected an existing target."),this.store.dispatch(e8e(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);vi(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){vi(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=s8e(e);return this.types.set(r,t),e===Wc.SOURCE?this.dragSources.set(r,n):e===Wc.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const a8e=(i,e)=>i===e;function l8e(i,e){return!i&&!e?!0:!i||!e?!1:i.x===e.x&&i.y===e.y}function u8e(i,e,t=a8e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;++n)if(!t(i[n],e[n]))return!1;return!0}function c8e(i=U2,e){switch(e.type){case CB:break;case gY:case pY:case SB:case mY:return U2;case bB:case hY:case yB:case wB:default:return fY}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=g5e(t,n);if(!(r.length>0||!u8e(t,n)))return U2;const o=n[n.length-1],a=t[t.length-1];return o!==a&&(o&&r.push(o),a&&r.push(a)),r}function d8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function h8e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){d8e(i,r,t[r])})}return i}const sne={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function f8e(i=sne,e){const{payload:t}=e;switch(e.type){case dY:case bB:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case CB:return l8e(i.clientOffset,t.clientOffset)?i:h8e({},i,{clientOffset:t.clientOffset});case yB:case wB:return sne;default:return i}}function g8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ew(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){g8e(i,r,t[r])})}return i}const p8e={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function m8e(i=p8e,e){const{payload:t}=e;switch(e.type){case bB:return ew({},i,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case hY:return ew({},i,{isSourcePublic:!0});case CB:return ew({},i,{targetIds:t.targetIds});case SB:return i.targetIds.indexOf(t.targetId)===-1?i:ew({},i,{targetIds:f5e(i.targetIds,t.targetId)});case wB:return ew({},i,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case yB:return ew({},i,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return i}}function _8e(i=0,e){switch(e.type){case gY:case pY:return i+1;case mY:case SB:return i-1;default:return i}}function v8e(i=0){return i+1}function b8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function C8e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){b8e(i,r,t[r])})}return i}function w8e(i={},e){return{dirtyHandlerIds:c8e(i.dirtyHandlerIds,{type:e.type,payload:C8e({},e.payload,{prevTargetIds:h5e(i,"dragOperation.targetIds",[])})}),dragOffset:f8e(i.dragOffset,e),refCount:_8e(i.refCount,e),dragOperation:m8e(i.dragOperation,e),stateId:v8e(i.stateId)}}function y8e(i,e=void 0,t={},n=!1){const r=S8e(n),s=new z5e(r,new o8e(r)),o=new B5e(r,s),a=i(o,e,t);return o.receiveBackend(a),o}function S8e(i){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return ufe(w8e,i&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function L8e(i,e){if(i==null)return{};var t=E8e(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function E8e(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}let one=0;const b4=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var x8e=he.memo(function(e){var{children:t}=e,n=L8e(e,["children"]);const[r,s]=D8e(n);return he.useEffect(()=>{if(s){const o=pfe();return++one,()=>{--one===0&&(o[b4]=null)}}},[]),Rc.jsx(lfe.Provider,{value:r,children:t})});function D8e(i){if("manager"in i)return[{dragDropManager:i.manager},!1];const e=I8e(i.backend,i.context,i.options,i.debugMode),t=!i.context;return[e,t]}function I8e(i,e=pfe(),t,n){const r=e;return r[b4]||(r[b4]={dragDropManager:y8e(i,e,t,n)}),r[b4]}function pfe(){return typeof global<"u"?global:window}var T8e=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!i(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){var o=s[r];if(!i(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const k8e=Wp(T8e),Vb=typeof window<"u"?he.useLayoutEffect:he.useEffect;function N8e(i,e,t){const[n,r]=he.useState(()=>e(i)),s=he.useCallback(()=>{const o=e(i);k8e(n,o)||(r(o),t&&t())},[n,i,t]);return Vb(s),[n,s]}function A8e(i,e,t){const[n,r]=N8e(i,e,t);return Vb(function(){const o=i.getHandlerId();if(o!=null)return i.subscribeToStateChange(r,{handlerIds:[o]})},[i,r]),n}function mfe(i,e,t){return A8e(e,i||(()=>({})),()=>t.reconnect())}function _fe(i,e){const t=[...e||[]];return e==null&&typeof i!="function"&&t.push(i),he.useMemo(()=>typeof i=="function"?i():i,t)}function O8e(i){return he.useMemo(()=>i.hooks.dragSource(),[i])}function M8e(i){return he.useMemo(()=>i.hooks.dragPreview(),[i])}let R6=!1,P6=!1;class R8e{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){vi(!R6,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return R6=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{R6=!1}}isDragging(){if(!this.sourceId)return!1;vi(!P6,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return P6=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{P6=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let F6=!1;class P8e{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;vi(!F6,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return F6=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{F6=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function F8e(i,e,t){const n=t.getRegistry(),r=n.addTarget(i,e);return[r,()=>n.removeTarget(r)]}function B8e(i,e,t){const n=t.getRegistry(),r=n.addSource(i,e);return[r,()=>n.removeSource(r)]}function Bz(i,e,t,n){let r=t?t.call(n,i,e):void 0;if(r!==void 0)return!!r;if(i===e)return!0;if(typeof i!="object"||!i||typeof e!="object"||!e)return!1;const s=Object.keys(i),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<s.length;u++){const d=s[u];if(!a(d))return!1;const h=i[d],f=e[d];if(r=t?t.call(n,h,f,d):void 0,r===!1||r===void 0&&h!==f)return!1}return!0}function Wz(i){return i!==null&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function W8e(i){if(typeof i.type=="string")return;const e=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function V8e(i){return(e=null,t=null)=>{if(!he.isValidElement(e)){const s=e;return i(s,t),s}const n=e;return W8e(n),H8e(n,t?s=>i(s,t):i)}}function vfe(i){const e={};return Object.keys(i).forEach(t=>{const n=i[t];if(t.endsWith("Ref"))e[t]=i[t];else{const r=V8e(n);e[t]=()=>r}}),e}function ane(i,e){typeof i=="function"?i(e):i.current=e}function H8e(i,e){const t=i.ref;return vi(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?he.cloneElement(i,{ref:n=>{ane(t,n),ane(e,n)}}):he.cloneElement(i,{ref:e})}class $8e{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Bz(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Bz(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=vfe({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Wz(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Wz(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class z8e{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Bz(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=vfe({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Wz(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function qS(){const{dragDropManager:i}=he.useContext(lfe);return vi(i!=null,"Expected drag drop context"),i}function U8e(i,e){const t=qS(),n=he.useMemo(()=>new $8e(t.getBackend()),[t]);return Vb(()=>(n.dragSourceOptions=i||null,n.reconnect(),()=>n.disconnectDragSource()),[n,i]),Vb(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function j8e(){const i=qS();return he.useMemo(()=>new R8e(i),[i])}class K8e{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:s}=n;return s?s(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function q8e(i,e,t){const n=he.useMemo(()=>new K8e(i,e,t),[e,t]);return he.useEffect(()=>{n.spec=i},[i]),n}function G8e(i){return he.useMemo(()=>{const e=i.type;return vi(e!=null,"spec.type must be defined"),e},[i])}function Y8e(i,e,t){const n=qS(),r=q8e(i,e,t),s=G8e(i);Vb(function(){if(s!=null){const[a,u]=B8e(s,r,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),u}},[n,e,t,r,s])}function Z8e(i,e){const t=_fe(i,e);vi(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=j8e(),r=U8e(t.options,t.previewOptions);return Y8e(t,n,r),[mfe(t.collect,n,r),O8e(r),M8e(r)]}function X8e(i){return he.useMemo(()=>i.hooks.dropTarget(),[i])}function Q8e(i){const e=qS(),t=he.useMemo(()=>new z8e(e.getBackend()),[e]);return Vb(()=>(t.dropTargetOptions=i||null,t.reconnect(),()=>t.disconnectDropTarget()),[i]),t}function J8e(){const i=qS();return he.useMemo(()=>new P8e(i),[i])}function eBe(i){const{accept:e}=i;return he.useMemo(()=>(vi(i.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class tBe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function nBe(i,e){const t=he.useMemo(()=>new tBe(i,e),[e]);return he.useEffect(()=>{t.spec=i},[i]),t}function iBe(i,e,t){const n=qS(),r=nBe(i,e),s=eBe(i);Vb(function(){const[a,u]=F8e(s,r,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),u},[n,e,r,t,s.map(o=>o.toString()).join("|")])}function rBe(i,e){const t=_fe(i,e),n=J8e(),r=Q8e(t.options);return iBe(t,n,r),[mfe(t.collect,n,r),X8e(r)]}function bfe(i){let e=null;return()=>(e==null&&(e=i()),e)}function sBe(i,e){return i.filter(t=>t!==e)}function oBe(i,e){const t=new Set,n=s=>t.add(s);i.forEach(n),e.forEach(n);const r=[];return t.forEach(s=>r.push(s)),r}class aBe{enter(e){const t=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(e));return this.entered=oBe(this.entered.filter(n),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=sBe(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class lBe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const r=this.config.exposeProperties[n];r!=null&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Cfe="__NATIVE_FILE__",wfe="__NATIVE_URL__",yfe="__NATIVE_TEXT__",Sfe="__NATIVE_HTML__",lne=Object.freeze(Object.defineProperty({__proto__:null,FILE:Cfe,HTML:Sfe,TEXT:yfe,URL:wfe},Symbol.toStringTag,{value:"Module"}));function B6(i,e,t){const n=e.reduce((r,s)=>r||i.getData(s),"");return n??t}const Vz={[Cfe]:{exposeProperties:{files:i=>Array.prototype.slice.call(i.files),items:i=>i.items,dataTransfer:i=>i},matchesTypes:["Files"]},[Sfe]:{exposeProperties:{html:(i,e)=>B6(i,e,""),dataTransfer:i=>i},matchesTypes:["Html","text/html"]},[wfe]:{exposeProperties:{urls:(i,e)=>B6(i,e,"").split(`
`),dataTransfer:i=>i},matchesTypes:["Url","text/uri-list"]},[yfe]:{exposeProperties:{text:(i,e)=>B6(i,e,""),dataTransfer:i=>i},matchesTypes:["Text","text/plain"]}};function uBe(i,e){const t=Vz[i];if(!t)throw new Error(`native type ${i} has no configuration`);const n=new lBe(t);return n.loadDataTransfer(e),n}function W6(i){if(!i)return null;const e=Array.prototype.slice.call(i.types||[]);return Object.keys(Vz).filter(t=>{const n=Vz[t];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>e.indexOf(r)>-1):!1})[0]||null}const cBe=bfe(()=>/firefox/i.test(navigator.userAgent)),Lfe=bfe(()=>!!window.safari);class une{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:s,c3s:o}=this;let a=t.length-1;if(e===t[a])return n[a];let u=0,d=o.length-1,h;for(;u<=d;){h=Math.floor(.5*(u+d));const m=t[h];if(m<e)u=h+1;else if(m>e)d=h-1;else return n[h]}a=Math.max(0,d);const f=e-t[a],p=f*f;return n[a]+r[a]*f+s[a]*p+o[a]*f*p}constructor(e,t){const{length:n}=e,r=[];for(let m=0;m<n;m++)r.push(m);r.sort((m,v)=>e[m]<e[v]?-1:1);const s=[],o=[];let a,u;for(let m=0;m<n-1;m++)a=e[m+1]-e[m],u=t[m+1]-t[m],s.push(a),o.push(u/a);const d=[o[0]];for(let m=0;m<s.length-1;m++){const v=o[m],b=o[m+1];if(v*b<=0)d.push(0);else{a=s[m];const L=s[m+1],S=a+L;d.push(3*S/((S+L)/v+(S+a)/b))}}d.push(o[o.length-1]);const h=[],f=[];let p;for(let m=0;m<d.length-1;m++){p=o[m];const v=d[m],b=1/s[m],L=v+d[m+1]-p-p;h.push((p-v-L)*b),f.push(L*b*b)}this.xs=e,this.ys=t,this.c1s=d,this.c2s=h,this.c3s=f}}const dBe=1;function Efe(i){const e=i.nodeType===dBe?i:i.parentElement;if(!e)return null;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function oP(i){return{x:i.clientX,y:i.clientY}}function hBe(i){var e;return i.nodeName==="IMG"&&(cBe()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(i)))}function fBe(i,e,t,n){let r=i?e.width:t,s=i?e.height:n;return Lfe()&&i&&(s/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:s}}function gBe(i,e,t,n,r){const s=hBe(e),a=Efe(s?i:e),u={x:t.x-a.x,y:t.y-a.y},{offsetWidth:d,offsetHeight:h}=i,{anchorX:f,anchorY:p}=n,{dragPreviewWidth:m,dragPreviewHeight:v}=fBe(s,e,d,h),b=()=>{let V=new une([0,.5,1],[u.y,u.y/h*v,u.y+v-h]).interpolate(p);return Lfe()&&s&&(V+=(window.devicePixelRatio-1)*v),V},L=()=>new une([0,.5,1],[u.x,u.x/d*m,u.x+m-d]).interpolate(f),{offsetX:S,offsetY:y}=r,E=S===0||S,A=y===0||y;return{x:E?S:L(),y:A?y:b()}}class pBe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function mBe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function cne(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){mBe(i,r,t[r])})}return i}class _Be{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",s),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=o=>this.handleDragEnter(o,e),r=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",s),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return cne({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return cne({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(lne).some(t=>lne[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=uBe(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{const s=this.sourceNodes.get(r);return s&&Efe(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{const r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=oP(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=r,u=W6(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const h=this.monitor.getSourceId(),f=this.sourceNodes.get(h),p=this.sourcePreviewNodes.get(h)||f;if(p){const{anchorX:m,anchorY:v,offsetX:b,offsetY:L}=this.getCurrentSourcePreviewNodeOptions(),E=gBe(f,p,o,{anchorX:m,anchorY:v},{offsetX:b,offsetY:L});a.setDragImage(p,E.x,E.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(r.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(a&&!a.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;const{dataTransfer:a}=r,u=W6(a);u&&this.beginDragNativeItem(u,a)},this.handleTopDragEnter=r=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,s.length>0&&this.actions.hover(s,{clientOffset:oP(r)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=oP(r),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;r.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(r.dataTransfer)}else W6(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:oP(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{const s=r.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(r.preventDefault(),s.dragDrop()))},this.options=new pBe(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new aBe(this.isNodeInDocument)}}const vBe=function(e,t,n){return new _Be(e,t,n)},bBe=({onClick:i,classNames:e="",renderStatus:t})=>{const[n,r]=he.useState(!1),s=()=>{r(!0)},o=()=>{r(!1)};return re.createElement("div",{role:"button",className:e,onClick:i,onMouseOver:s,onMouseOut:o},t==null?void 0:t(n))};var CBe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const wBe=Bn("tab"),LB=gt(wBe,"item"),Hz=_n(LB,"active"),yBe=gt(LB,"label"),SBe=gt(LB,"extra");function xfe(i){var{tab:e,active:t}=i,n=CBe(i,["tab","active"]);const{name:r,closable:s,id:o,icon:a,status:u}=e,{onCloseTab:d,onSelectTab:h,onContextMenu:f,onDrag:p}=n,m=he.useRef(null),v=E=>{E.preventDefault(),f==null||f(E,e)},[,b]=Z8e({collect:E=>({isDragging:E.isDragging()}),type:"DND_NODE",item:e}),[,L]=rBe({accept:"DND_NODE",hover(E,A){if(!m.current)return;const N=m.current,V=N==null?void 0:N.getBoundingClientRect(),M=(V.right-V.left)/2,Y=A.getClientOffset().x-V.left,X={hoverMiddleX:M,hoverClientX:Y};p==null||p(E,e,X)}});b(L(m));const S=E=>typeof E=="string"?re.createElement(dr,{type:E}):E,y=(E,A)=>{if(E&&!A){if(typeof E=="function")return E(e);switch(E){case"edited":return re.createElement(dr,{type:"primitive-dot"});default:return re.createElement(dr,{type:"close"})}}return re.createElement(dr,{type:"close"})};return re.createElement("div",{ref:m,className:mn(LB,{[Hz]:t}),onClick:E=>h==null?void 0:h(o),onContextMenu:v},a&&re.createElement("span",{className:yBe},S(a)),r,(typeof s>"u"||s)&&re.createElement(bBe,{classNames:SBe,onClick:E=>{E.stopPropagation(),d==null||d(o)},renderStatus:E=>y(u,E)}))}const $z=Bn("tabs"),LBe=gt($z,"header");function _Y(i){var e;const{role:t,activeTab:n,className:r,data:s=[],type:o="line",style:a,onMoveTab:u,onCloseTab:d,onSelectTab:h,onContextMenu:f}=i,p=he.useRef(null),m=he.useRef(null),v=he.useCallback((L,S)=>{const y=s[L];u==null||u(u5e(s,{$splice:[[L,1],[S,0,y]]}))},[s]),b=(L,S,y)=>{const E=s.indexOf(L),A=s.indexOf(S),{hoverClientX:N,hoverMiddleX:V}=y;E!==A&&(E<A&&N<V||E>A&&N>V||v==null||v(E,A))};return he.useEffect(()=>{var L,S;const y=(L=p.current)===null||L===void 0?void 0:L.querySelector(`.${Hz}`);if(y){const E=((S=p.current)===null||S===void 0?void 0:S.clientWidth)||0,A=y.offsetLeft;A>E&&setTimeout(()=>{var N;(N=m.current)===null||N===void 0||N.scrollTo(A+y.clientWidth)},0)}},[(e=p.current)===null||e===void 0?void 0:e.querySelector(`.${Hz}`)]),re.createElement(x8e,{backend:vBe,context:window},re.createElement("div",{style:a,className:mn($z,_n($z,o),r),role:t,ref:p},re.createElement(KS,{className:LBe,direction:rS.horizontal,ref:m,trackStyle:{height:3}},s.map((L,S)=>re.createElement(xfe,{key:L.id,active:n===L.id,tab:L,onDrag:b,onCloseTab:d,onContextMenu:f,onSelectTab:h})))))}const vY=Bn("tree"),TM=gt(vY,"treenode"),EBe=_n(TM,"active"),xBe=_n(TM,"open"),DBe=_n(TM,"close"),Dfe=gt(vY,"indent"),IBe=gt(Dfe,"guide"),TBe=gt(TM,"title"),kBe=8,NBe=({data:i,indent:e,className:t,name:n,renderIcon:r,renderTitle:s,draggable:o,onContextMenu:a,onClick:u,onNodeDragStart:d,onNodeDragEnter:h,onNodeDragOver:f,onNodeDrop:p,onNodeDragEnd:m})=>{const v=i.id,b=he.useRef(null),L=V=>{V.stopPropagation(),d==null||d(V,i);try{V.dataTransfer.setData("text/plain","")}catch{}},S=V=>{V.preventDefault(),V.stopPropagation(),h==null||h(V,i)},y=V=>{V.preventDefault(),V.stopPropagation(),f==null||f(V,i)},E=V=>{V.preventDefault(),V.stopPropagation(),p==null||p(V,i)},A=V=>{V.stopPropagation(),m==null||m(V,i)},N=`${e?e+"_":""}${i.id}`;return re.createElement("div",{ref:b,key:`${v}-${e}`,tabIndex:0,"data-indent":e,"data-key":v,"data-id":`mo_treeNode_${N}`,className:t,title:n,draggable:o,onContextMenu:a,onClick:u,onDragStart:L,onDragOver:y,onDragEnter:S,onDragEnd:A,onDrop:E},re.createElement("div",{className:Dfe,style:{width:kBe*e}},new Array(e).fill("").map((V,M)=>re.createElement("div",{key:M,className:IBe}))),r(),re.createElement("span",{className:TBe},s()))};function ABe(){this.__data__=[],this.size=0}var OBe=ABe;function MBe(i,e){return i===e||i!==i&&e!==e}var bY=MBe,RBe=bY;function PBe(i,e){for(var t=i.length;t--;)if(RBe(i[t][0],e))return t;return-1}var EB=PBe,FBe=EB,BBe=Array.prototype,WBe=BBe.splice;function VBe(i){var e=this.__data__,t=FBe(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():WBe.call(e,t,1),--this.size,!0}var HBe=VBe,$Be=EB;function zBe(i){var e=this.__data__,t=$Be(e,i);return t<0?void 0:e[t][1]}var UBe=zBe,jBe=EB;function KBe(i){return jBe(this.__data__,i)>-1}var qBe=KBe,GBe=EB;function YBe(i,e){var t=this.__data__,n=GBe(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var ZBe=YBe,XBe=OBe,QBe=HBe,JBe=UBe,e7e=qBe,t7e=ZBe;function GS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}GS.prototype.clear=XBe;GS.prototype.delete=QBe;GS.prototype.get=JBe;GS.prototype.has=e7e;GS.prototype.set=t7e;var xB=GS,n7e=xB;function i7e(){this.__data__=new n7e,this.size=0}var r7e=i7e;function s7e(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var o7e=s7e;function a7e(i){return this.__data__.get(i)}var l7e=a7e;function u7e(i){return this.__data__.has(i)}var c7e=u7e,d7e=typeof ta=="object"&&ta&&ta.Object===Object&&ta,Ife=d7e,h7e=Ife,f7e=typeof self=="object"&&self&&self.Object===Object&&self,g7e=h7e||f7e||Function("return this")(),Tg=g7e,p7e=Tg,m7e=p7e.Symbol,kM=m7e,dne=kM,Tfe=Object.prototype,_7e=Tfe.hasOwnProperty,v7e=Tfe.toString,PN=dne?dne.toStringTag:void 0;function b7e(i){var e=_7e.call(i,PN),t=i[PN];try{i[PN]=void 0;var n=!0}catch{}var r=v7e.call(i);return n&&(e?i[PN]=t:delete i[PN]),r}var C7e=b7e,w7e=Object.prototype,y7e=w7e.toString;function S7e(i){return y7e.call(i)}var L7e=S7e,hne=kM,E7e=C7e,x7e=L7e,D7e="[object Null]",I7e="[object Undefined]",fne=hne?hne.toStringTag:void 0;function T7e(i){return i==null?i===void 0?I7e:D7e:fne&&fne in Object(i)?E7e(i):x7e(i)}var NM=T7e;function k7e(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var kC=k7e,N7e=NM,A7e=kC,O7e="[object AsyncFunction]",M7e="[object Function]",R7e="[object GeneratorFunction]",P7e="[object Proxy]";function F7e(i){if(!A7e(i))return!1;var e=N7e(i);return e==M7e||e==R7e||e==O7e||e==P7e}var kfe=F7e,B7e=Tg,W7e=B7e["__core-js_shared__"],V7e=W7e,V6=V7e,gne=function(){var i=/[^.]+$/.exec(V6&&V6.keys&&V6.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function H7e(i){return!!gne&&gne in i}var $7e=H7e,z7e=Function.prototype,U7e=z7e.toString;function j7e(i){if(i!=null){try{return U7e.call(i)}catch{}try{return i+""}catch{}}return""}var Nfe=j7e,K7e=kfe,q7e=$7e,G7e=kC,Y7e=Nfe,Z7e=/[\\^$.*+?()[\]{}|]/g,X7e=/^\[object .+?Constructor\]$/,Q7e=Function.prototype,J7e=Object.prototype,e9e=Q7e.toString,t9e=J7e.hasOwnProperty,n9e=RegExp("^"+e9e.call(t9e).replace(Z7e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function i9e(i){if(!G7e(i)||q7e(i))return!1;var e=K7e(i)?n9e:X7e;return e.test(Y7e(i))}var r9e=i9e;function s9e(i,e){return i==null?void 0:i[e]}var o9e=s9e,a9e=r9e,l9e=o9e;function u9e(i,e){var t=l9e(i,e);return a9e(t)?t:void 0}var NC=u9e,c9e=NC,d9e=Tg,h9e=c9e(d9e,"Map"),CY=h9e,f9e=NC,g9e=f9e(Object,"create"),DB=g9e,pne=DB;function p9e(){this.__data__=pne?pne(null):{},this.size=0}var m9e=p9e;function _9e(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var v9e=_9e,b9e=DB,C9e="__lodash_hash_undefined__",w9e=Object.prototype,y9e=w9e.hasOwnProperty;function S9e(i){var e=this.__data__;if(b9e){var t=e[i];return t===C9e?void 0:t}return y9e.call(e,i)?e[i]:void 0}var L9e=S9e,E9e=DB,x9e=Object.prototype,D9e=x9e.hasOwnProperty;function I9e(i){var e=this.__data__;return E9e?e[i]!==void 0:D9e.call(e,i)}var T9e=I9e,k9e=DB,N9e="__lodash_hash_undefined__";function A9e(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=k9e&&e===void 0?N9e:e,this}var O9e=A9e,M9e=m9e,R9e=v9e,P9e=L9e,F9e=T9e,B9e=O9e;function YS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}YS.prototype.clear=M9e;YS.prototype.delete=R9e;YS.prototype.get=P9e;YS.prototype.has=F9e;YS.prototype.set=B9e;var W9e=YS,mne=W9e,V9e=xB,H9e=CY;function $9e(){this.size=0,this.__data__={hash:new mne,map:new(H9e||V9e),string:new mne}}var z9e=$9e;function U9e(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var j9e=U9e,K9e=j9e;function q9e(i,e){var t=i.__data__;return K9e(e)?t[typeof e=="string"?"string":"hash"]:t.map}var IB=q9e,G9e=IB;function Y9e(i){var e=G9e(this,i).delete(i);return this.size-=e?1:0,e}var Z9e=Y9e,X9e=IB;function Q9e(i){return X9e(this,i).get(i)}var J9e=Q9e,e6e=IB;function t6e(i){return e6e(this,i).has(i)}var n6e=t6e,i6e=IB;function r6e(i,e){var t=i6e(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var s6e=r6e,o6e=z9e,a6e=Z9e,l6e=J9e,u6e=n6e,c6e=s6e;function ZS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}ZS.prototype.clear=o6e;ZS.prototype.delete=a6e;ZS.prototype.get=l6e;ZS.prototype.has=u6e;ZS.prototype.set=c6e;var wY=ZS,d6e=xB,h6e=CY,f6e=wY,g6e=200;function p6e(i,e){var t=this.__data__;if(t instanceof d6e){var n=t.__data__;if(!h6e||n.length<g6e-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new f6e(n)}return t.set(i,e),this.size=t.size,this}var m6e=p6e,_6e=xB,v6e=r7e,b6e=o7e,C6e=l7e,w6e=c7e,y6e=m6e;function XS(i){var e=this.__data__=new _6e(i);this.size=e.size}XS.prototype.clear=v6e;XS.prototype.delete=b6e;XS.prototype.get=C6e;XS.prototype.has=w6e;XS.prototype.set=y6e;var yY=XS;function S6e(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var L6e=S6e,E6e=NC,x6e=function(){try{var i=E6e(Object,"defineProperty");return i({},"",{}),i}catch{}}(),D6e=x6e,_ne=D6e;function I6e(i,e,t){e=="__proto__"&&_ne?_ne(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var Afe=I6e,T6e=Afe,k6e=bY,N6e=Object.prototype,A6e=N6e.hasOwnProperty;function O6e(i,e,t){var n=i[e];(!(A6e.call(i,e)&&k6e(n,t))||t===void 0&&!(e in i))&&T6e(i,e,t)}var SY=O6e,M6e=SY,R6e=Afe;function P6e(i,e,t,n){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],u=n?n(t[a],i[a],a,t,i):void 0;u===void 0&&(u=i[a]),r?R6e(t,a,u):M6e(t,a,u)}return t}var TB=P6e;function F6e(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var B6e=F6e;function W6e(i){return i!=null&&typeof i=="object"}var AC=W6e,V6e=NM,H6e=AC,$6e="[object Arguments]";function z6e(i){return H6e(i)&&V6e(i)==$6e}var U6e=z6e,vne=U6e,j6e=AC,Ofe=Object.prototype,K6e=Ofe.hasOwnProperty,q6e=Ofe.propertyIsEnumerable,G6e=vne(function(){return arguments}())?vne:function(i){return j6e(i)&&K6e.call(i,"callee")&&!q6e.call(i,"callee")},Mfe=G6e,Y6e=Array.isArray,zp=Y6e,q3={exports:{}};function Z6e(){return!1}var X6e=Z6e;q3.exports;(function(i,e){var t=Tg,n=X6e,r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,o=s&&s.exports===r,a=o?t.Buffer:void 0,u=a?a.isBuffer:void 0,d=u||n;i.exports=d})(q3,q3.exports);var LY=q3.exports,Q6e=9007199254740991,J6e=/^(?:0|[1-9]\d*)$/;function eWe(i,e){var t=typeof i;return e=e??Q6e,!!e&&(t=="number"||t!="symbol"&&J6e.test(i))&&i>-1&&i%1==0&&i<e}var EY=eWe,tWe=9007199254740991;function nWe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=tWe}var xY=nWe,iWe=NM,rWe=xY,sWe=AC,oWe="[object Arguments]",aWe="[object Array]",lWe="[object Boolean]",uWe="[object Date]",cWe="[object Error]",dWe="[object Function]",hWe="[object Map]",fWe="[object Number]",gWe="[object Object]",pWe="[object RegExp]",mWe="[object Set]",_We="[object String]",vWe="[object WeakMap]",bWe="[object ArrayBuffer]",CWe="[object DataView]",wWe="[object Float32Array]",yWe="[object Float64Array]",SWe="[object Int8Array]",LWe="[object Int16Array]",EWe="[object Int32Array]",xWe="[object Uint8Array]",DWe="[object Uint8ClampedArray]",IWe="[object Uint16Array]",TWe="[object Uint32Array]",bs={};bs[wWe]=bs[yWe]=bs[SWe]=bs[LWe]=bs[EWe]=bs[xWe]=bs[DWe]=bs[IWe]=bs[TWe]=!0;bs[oWe]=bs[aWe]=bs[bWe]=bs[lWe]=bs[CWe]=bs[uWe]=bs[cWe]=bs[dWe]=bs[hWe]=bs[fWe]=bs[gWe]=bs[pWe]=bs[mWe]=bs[_We]=bs[vWe]=!1;function kWe(i){return sWe(i)&&rWe(i.length)&&!!bs[iWe(i)]}var NWe=kWe;function AWe(i){return function(e){return i(e)}}var DY=AWe,G3={exports:{}};G3.exports;(function(i,e){var t=Ife,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,o=s&&t.process,a=function(){try{var u=r&&r.require&&r.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();i.exports=a})(G3,G3.exports);var IY=G3.exports,OWe=NWe,MWe=DY,bne=IY,Cne=bne&&bne.isTypedArray,RWe=Cne?MWe(Cne):OWe,Rfe=RWe,PWe=B6e,FWe=Mfe,BWe=zp,WWe=LY,VWe=EY,HWe=Rfe,$We=Object.prototype,zWe=$We.hasOwnProperty;function UWe(i,e){var t=BWe(i),n=!t&&FWe(i),r=!t&&!n&&WWe(i),s=!t&&!n&&!r&&HWe(i),o=t||n||r||s,a=o?PWe(i.length,String):[],u=a.length;for(var d in i)(e||zWe.call(i,d))&&!(o&&(d=="length"||r&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||VWe(d,u)))&&a.push(d);return a}var Pfe=UWe,jWe=Object.prototype;function KWe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||jWe;return i===t}var TY=KWe;function qWe(i,e){return function(t){return i(e(t))}}var Ffe=qWe,GWe=Ffe,YWe=GWe(Object.keys,Object),ZWe=YWe,XWe=TY,QWe=ZWe,JWe=Object.prototype,eVe=JWe.hasOwnProperty;function tVe(i){if(!XWe(i))return QWe(i);var e=[];for(var t in Object(i))eVe.call(i,t)&&t!="constructor"&&e.push(t);return e}var nVe=tVe,iVe=kfe,rVe=xY;function sVe(i){return i!=null&&rVe(i.length)&&!iVe(i)}var Bfe=sVe,oVe=Pfe,aVe=nVe,lVe=Bfe;function uVe(i){return lVe(i)?oVe(i):aVe(i)}var kB=uVe,cVe=TB,dVe=kB;function hVe(i,e){return i&&cVe(e,dVe(e),i)}var fVe=hVe;function gVe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var pVe=gVe,mVe=kC,_Ve=TY,vVe=pVe,bVe=Object.prototype,CVe=bVe.hasOwnProperty;function wVe(i){if(!mVe(i))return vVe(i);var e=_Ve(i),t=[];for(var n in i)n=="constructor"&&(e||!CVe.call(i,n))||t.push(n);return t}var yVe=wVe,SVe=Pfe,LVe=yVe,EVe=Bfe;function xVe(i){return EVe(i)?SVe(i,!0):LVe(i)}var kY=xVe,DVe=TB,IVe=kY;function TVe(i,e){return i&&DVe(e,IVe(e),i)}var kVe=TVe,Y3={exports:{}};Y3.exports;(function(i,e){var t=Tg,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var f=d.length,p=a?a(f):new d.constructor(f);return d.copy(p),p}i.exports=u})(Y3,Y3.exports);var NVe=Y3.exports;function AVe(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var OVe=AVe;function MVe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var o=i[t];e(o,t,i)&&(s[r++]=o)}return s}var RVe=MVe;function PVe(){return[]}var Wfe=PVe,FVe=RVe,BVe=Wfe,WVe=Object.prototype,VVe=WVe.propertyIsEnumerable,wne=Object.getOwnPropertySymbols,HVe=wne?function(i){return i==null?[]:(i=Object(i),FVe(wne(i),function(e){return VVe.call(i,e)}))}:BVe,NY=HVe,$Ve=TB,zVe=NY;function UVe(i,e){return $Ve(i,zVe(i),e)}var jVe=UVe;function KVe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var Vfe=KVe,qVe=Ffe,GVe=qVe(Object.getPrototypeOf,Object),Hfe=GVe,YVe=Vfe,ZVe=Hfe,XVe=NY,QVe=Wfe,JVe=Object.getOwnPropertySymbols,eHe=JVe?function(i){for(var e=[];i;)YVe(e,XVe(i)),i=ZVe(i);return e}:QVe,$fe=eHe,tHe=TB,nHe=$fe;function iHe(i,e){return tHe(i,nHe(i),e)}var rHe=iHe,sHe=Vfe,oHe=zp;function aHe(i,e,t){var n=e(i);return oHe(i)?n:sHe(n,t(i))}var zfe=aHe,lHe=zfe,uHe=NY,cHe=kB;function dHe(i){return lHe(i,cHe,uHe)}var Ufe=dHe,hHe=zfe,fHe=$fe,gHe=kY;function pHe(i){return hHe(i,gHe,fHe)}var jfe=pHe,mHe=NC,_He=Tg,vHe=mHe(_He,"DataView"),bHe=vHe,CHe=NC,wHe=Tg,yHe=CHe(wHe,"Promise"),SHe=yHe,LHe=NC,EHe=Tg,xHe=LHe(EHe,"Set"),DHe=xHe,IHe=NC,THe=Tg,kHe=IHe(THe,"WeakMap"),NHe=kHe,zz=bHe,Uz=CY,jz=SHe,Kz=DHe,qz=NHe,Kfe=NM,QS=Nfe,yne="[object Map]",AHe="[object Object]",Sne="[object Promise]",Lne="[object Set]",Ene="[object WeakMap]",xne="[object DataView]",OHe=QS(zz),MHe=QS(Uz),RHe=QS(jz),PHe=QS(Kz),FHe=QS(qz),g1=Kfe;(zz&&g1(new zz(new ArrayBuffer(1)))!=xne||Uz&&g1(new Uz)!=yne||jz&&g1(jz.resolve())!=Sne||Kz&&g1(new Kz)!=Lne||qz&&g1(new qz)!=Ene)&&(g1=function(i){var e=Kfe(i),t=e==AHe?i.constructor:void 0,n=t?QS(t):"";if(n)switch(n){case OHe:return xne;case MHe:return yne;case RHe:return Sne;case PHe:return Lne;case FHe:return Ene}return e});var NB=g1,BHe=Object.prototype,WHe=BHe.hasOwnProperty;function VHe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&WHe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var HHe=VHe,$He=Tg,zHe=$He.Uint8Array,qfe=zHe,Dne=qfe;function UHe(i){var e=new i.constructor(i.byteLength);return new Dne(e).set(new Dne(i)),e}var AY=UHe,jHe=AY;function KHe(i,e){var t=e?jHe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var qHe=KHe,GHe=/\w*$/;function YHe(i){var e=new i.constructor(i.source,GHe.exec(i));return e.lastIndex=i.lastIndex,e}var ZHe=YHe,Ine=kM,Tne=Ine?Ine.prototype:void 0,kne=Tne?Tne.valueOf:void 0;function XHe(i){return kne?Object(kne.call(i)):{}}var QHe=XHe,JHe=AY;function e$e(i,e){var t=e?JHe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var t$e=e$e,n$e=AY,i$e=qHe,r$e=ZHe,s$e=QHe,o$e=t$e,a$e="[object Boolean]",l$e="[object Date]",u$e="[object Map]",c$e="[object Number]",d$e="[object RegExp]",h$e="[object Set]",f$e="[object String]",g$e="[object Symbol]",p$e="[object ArrayBuffer]",m$e="[object DataView]",_$e="[object Float32Array]",v$e="[object Float64Array]",b$e="[object Int8Array]",C$e="[object Int16Array]",w$e="[object Int32Array]",y$e="[object Uint8Array]",S$e="[object Uint8ClampedArray]",L$e="[object Uint16Array]",E$e="[object Uint32Array]";function x$e(i,e,t){var n=i.constructor;switch(e){case p$e:return n$e(i);case a$e:case l$e:return new n(+i);case m$e:return i$e(i,t);case _$e:case v$e:case b$e:case C$e:case w$e:case y$e:case S$e:case L$e:case E$e:return o$e(i,t);case u$e:return new n;case c$e:case f$e:return new n(i);case d$e:return r$e(i);case h$e:return new n;case g$e:return s$e(i)}}var D$e=x$e,I$e=kC,Nne=Object.create,T$e=function(){function i(){}return function(e){if(!I$e(e))return{};if(Nne)return Nne(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),k$e=T$e,N$e=k$e,A$e=Hfe,O$e=TY;function M$e(i){return typeof i.constructor=="function"&&!O$e(i)?N$e(A$e(i)):{}}var R$e=M$e,P$e=NB,F$e=AC,B$e="[object Map]";function W$e(i){return F$e(i)&&P$e(i)==B$e}var V$e=W$e,H$e=V$e,$$e=DY,Ane=IY,One=Ane&&Ane.isMap,z$e=One?$$e(One):H$e,U$e=z$e,j$e=NB,K$e=AC,q$e="[object Set]";function G$e(i){return K$e(i)&&j$e(i)==q$e}var Y$e=G$e,Z$e=Y$e,X$e=DY,Mne=IY,Rne=Mne&&Mne.isSet,Q$e=Rne?X$e(Rne):Z$e,J$e=Q$e,eze=yY,tze=L6e,nze=SY,ize=fVe,rze=kVe,sze=NVe,oze=OVe,aze=jVe,lze=rHe,uze=Ufe,cze=jfe,dze=NB,hze=HHe,fze=D$e,gze=R$e,pze=zp,mze=LY,_ze=U$e,vze=kC,bze=J$e,Cze=kB,wze=kY,yze=1,Sze=2,Lze=4,Gfe="[object Arguments]",Eze="[object Array]",xze="[object Boolean]",Dze="[object Date]",Ize="[object Error]",Yfe="[object Function]",Tze="[object GeneratorFunction]",kze="[object Map]",Nze="[object Number]",Zfe="[object Object]",Aze="[object RegExp]",Oze="[object Set]",Mze="[object String]",Rze="[object Symbol]",Pze="[object WeakMap]",Fze="[object ArrayBuffer]",Bze="[object DataView]",Wze="[object Float32Array]",Vze="[object Float64Array]",Hze="[object Int8Array]",$ze="[object Int16Array]",zze="[object Int32Array]",Uze="[object Uint8Array]",jze="[object Uint8ClampedArray]",Kze="[object Uint16Array]",qze="[object Uint32Array]",ls={};ls[Gfe]=ls[Eze]=ls[Fze]=ls[Bze]=ls[xze]=ls[Dze]=ls[Wze]=ls[Vze]=ls[Hze]=ls[$ze]=ls[zze]=ls[kze]=ls[Nze]=ls[Zfe]=ls[Aze]=ls[Oze]=ls[Mze]=ls[Rze]=ls[Uze]=ls[jze]=ls[Kze]=ls[qze]=!0;ls[Ize]=ls[Yfe]=ls[Pze]=!1;function C4(i,e,t,n,r,s){var o,a=e&yze,u=e&Sze,d=e&Lze;if(t&&(o=r?t(i,n,r,s):t(i)),o!==void 0)return o;if(!vze(i))return i;var h=pze(i);if(h){if(o=hze(i),!a)return oze(i,o)}else{var f=dze(i),p=f==Yfe||f==Tze;if(mze(i))return sze(i,a);if(f==Zfe||f==Gfe||p&&!r){if(o=u||p?{}:gze(i),!a)return u?lze(i,rze(o,i)):aze(i,ize(o,i))}else{if(!ls[f])return r?i:{};o=fze(i,f,a)}}s||(s=new eze);var m=s.get(i);if(m)return m;s.set(i,o),bze(i)?i.forEach(function(L){o.add(C4(L,e,t,L,i,s))}):_ze(i)&&i.forEach(function(L,S){o.set(S,C4(L,e,t,S,i,s))});var v=d?u?cze:uze:u?wze:Cze,b=h?void 0:v(i);return tze(b||i,function(L,S){b&&(S=L,L=i[S]),nze(o,S,C4(L,e,t,S,i,s))}),o}var Gze=C4,Yze=Gze,Zze=1,Xze=4;function Qze(i){return Yze(i,Zze|Xze)}var Jze=Qze;const Zh=Wp(Jze);class w4{constructor(e){this.hashMap=new Map,this.count=0,this.getHashMap=t=>this.hashMap.get(t.toString())||null,this.removeHashMap=t=>{var n;const r=this.hashMap.get(t.toString());r&&(this.hashMap.delete(t.toString()),!((n=r.children)===null||n===void 0)&&n.length&&r.children.forEach(s=>{this.removeHashMap(s)}))},this.getNode=t=>{const n=this.getHashMap(t);return(n==null?void 0:n.node)||null},this.removeNode=t=>{var n,r;const s=this.getHashMap(t);if(s){const{node:o,parent:a}=s;if(!a)return Pn.error("You're going to remove a root node"),null;const u=this.getHashMap(a),d=u==null?void 0:u.node;if(d)return(n=d.children)===null||n===void 0||n.splice(d.children.indexOf(o),1),(r=u.children)===null||r===void 0||r.splice(u.children.indexOf(t.toString()),1),this.removeHashMap(t),this.updateChildren(u.children),o}return null},this.updateNode=(t,n)=>{const r=this.getNode(t);return r?(Object.assign(r,n),r):null},this.insertNode=(t,n,r)=>{const s=this.getHashMap(n);if(s){const o=s.node,a=this.generate(t);if(a.parent=n.toString(),o.children=o.children||[],s.children=s.children||[],o.children.splice(r,0,t),s.children.splice(r,0,a.id),this.updateChildren(s.children),s.parent){const u=this.getHashMap(s.parent);u&&this.updateChildren(u.children)}return a}return null},this.insertBefore=(t,n)=>{const r=this.getHashMap(n);if(r){const s=r.parent;if(!s)return Pn.error("You're going to insert a obj before the root node"),null;const o=this.getHashMap(s);if(o){const a=(o.children||[]).indexOf(n.toString());return this.insertNode(t,s,a)}}return null},this.insertAfter=(t,n)=>{const r=this.getHashMap(n);if(r){const s=r.parent;if(!s)return Pn.error("You're going to insert a obj after the root node"),null;const o=this.getHashMap(s);if(o){const a=(o.children||[]).indexOf(n.toString());return this.insertNode(t,s,a+1)}}return null},this.prepend=(t,n)=>this.insertNode(t,n,0),this.append=(t,n)=>{const r=this.getHashMap(n);return r?(r.children=r.children||[],this.insertNode(t,n,r.children.length)):null},this.obj=Zh(e),this.count=1,this.generate(this.obj)}addMap(e,t){if(this.hashMap.has(e)){Pn.error(`There is already a data whose key is ${e} in hashMap`);return}else this.hashMap.set(e,t),this.count+=1}generateChildren(e,t){const n=[];e.forEach(r=>{var s;const o={id:r.id.toString(),node:r};t.id&&(o.parent=t.id),this.addMap(r.id.toString(),o),n.push(r.id.toString()),!((s=r.children)===null||s===void 0)&&s.length&&this.generateChildren(r.children,o)}),t.children=n,n.forEach((r,s)=>{const o=this.hashMap.get(r);s>0&&(o.prev=n[s-1]),s<n.length-1&&(o.next=n[s+1])})}generate(e){var t;const n=e.id.toString(),r={id:n,node:e};return this.addMap(n,r),!((t=e.children)===null||t===void 0)&&t.length&&this.generateChildren(e.children,r),r}updateChildren(e=[]){e.forEach((t,n)=>{const r=this.getHashMap(t);r&&(r.prev=r.next=void 0,n>0&&(r.prev=e[n-1]),n<e.length-1&&(r.next=e[n+1]))})}}const AB=({className:i,data:e=[],draggable:t=!1,loadedKeys:n,expandKeys:r,activeKey:s,onExpand:o,onDropTree:a,onRightClick:u,renderTitle:d,onSelect:h,onLoadData:f,onTreeClick:p})=>{const[m,v]=he.useState([]),[b,L]=he.useState(null),[S,y]=he.useState([]),E=he.useRef(),A=he.useRef({x:0,y:0,dragNode:null,flattenTree:null}),N=he.useRef(null),V=ne=>!(!f||n!=null&&n.includes(ne)),M=ne=>{const be=ne.id.toString();V(be)&&(y(De=>{const Ve=De.concat();return Ve.push(be),Ve}),f(ne).finally(()=>{y(De=>{const Ve=De.concat(),rt=Ve.indexOf(be);return Ve.splice(rt,1),Ve})}))},R=(ne,be)=>{const De=(r||m).concat(),Ve=De.findIndex(rt=>rt===ne);Ve>-1?De.splice(Ve,1):De.push(ne),o?o(De.concat(),be):v(De.concat())},Y=(ne,be)=>{be.stopPropagation();const De=ne.id.toString();L(De),ne.isLeaf||(M(ne),R(De,ne)),h==null||h(ne)},X=(ne,be,De,Ve)=>be?ne||null:Ve?re.createElement(dr,{type:"loading~spin"}):re.createElement(dr,{type:De?"chevron-down":"chevron-right"}),$=(ne,be)=>{ne.stopPropagation(),u==null||u(ne,be)},T=he.useCallback(ne=>{z(ne,null,!0),window.removeEventListener("dragend",T)},[]),O=(ne,be)=>{A.current={x:ne.clientX,y:ne.clientY,dragNode:be,flattenTree:new w4({id:Number.MAX_SAFE_INTEGER,children:e})};const De=be.id.toString(),Ve=(r||m).indexOf(De);if(Ve>-1){const rt=m.concat();rt.splice(Ve,1),o?o(rt,be):v(rt)}window.addEventListener("dragend",T)},B=wr.debounce((ne,be)=>{const De=be.id.toString(),Ve=(r||m).includes(De),At=A.current.dragNode.id.toString(),Me=De===At;!be.isLeaf&&!Me&&!Ve&&!V(De)&&R(De,be)},300),W=ne=>{const be=ne.id.toString(),De=document.querySelector(`div[data-key="${be}"]`);let Ve=De;for(;Ve;){Ve.classList.contains("drag-over")||Ve.classList.add("drag-over");const rt=Ve.nextElementSibling;(rt==null?void 0:rt.dataset.indent)===De.dataset.indent?Ve=null:Ve=rt}},j=()=>{var ne;(ne=N.current)===null||ne===void 0||ne.querySelectorAll(".drag-over").forEach(be=>{be.classList.remove("drag-over")})},U=ne=>{var be,De;const Ve=A.current.flattenTree,rt=(be=Ve.getHashMap(ne.id))===null||be===void 0?void 0:be.parent;return(De=Ve.getHashMap(rt))===null||De===void 0?void 0:De.node},q=(ne,be)=>{const De=be.isLeaf?U(be):be;De!==E.current&&(j(),E.current=De,W(De))},z=(ne,be,De=!1)=>{j(),E.current=void 0,A.current={x:0,y:0,dragNode:null,flattenTree:null}},k=(ne,be)=>{if(be.isLeaf){const De=U(be),Ve=U(A.current.dragNode),rt=(De.key||De.id).toString(),At=(Ve.key||Ve.id).toString();if(rt===At){A.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(A.current.dragNode,De)}else{const De=U(A.current.dragNode),Ve=(De.key||De.id).toString(),rt=be.id.toString(),Me=A.current.dragNode.id.toString();if(Ve===rt||Me===rt){A.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(A.current.dragNode,be)}A.current={x:0,y:0,dragNode:null,flattenTree:null}},K=(ne,be)=>ne.map((De,Ve)=>{const rt=De.id.toString(),At=(r||m).includes(rt),Me=S.includes(rt),ut=b===rt,Ct=(d==null?void 0:d(De,Ve,!!De.isLeaf))||De.name,Xe=typeof De.icon=="string"?re.createElement(dr,{type:De.icon}):De.icon,sn=re.createElement(NBe,{key:`${rt}-${be}`,draggable:t,data:De,name:typeof Ct=="string"?Ct:void 0,indent:be,className:mn(TM,ut&&EBe,At?xBe:DBe),renderIcon:()=>X(Xe,!!De.isLeaf,At,Me),renderTitle:()=>Ct,onContextMenu:dn=>$(dn,De),onClick:dn=>Y(De,dn),onNodeDragStart:t?O:void 0,onNodeDragEnter:t?B:void 0,onNodeDragOver:t?q:void 0,onNodeDragEnd:t?z:void 0,onNodeDrop:t?k:void 0}),Kt=At&&!Me&&K(De.children||[],be+1);return[sn,Kt]}),fe=()=>{L(null),p==null||p()};return he.useLayoutEffect(()=>{var ne,be;const De=[];for(e.forEach(Ve=>{De.push({paths:[Ve],data:Ve})});De.length;){const{paths:Ve,data:rt}=De.pop();if((ne=rt.children)===null||ne===void 0?void 0:ne.find(Me=>Me.isEditable)){const Me=Ve.map(Ct=>(M(Ct),Ct.id.toString())),ut=Array.from(new Set([...Me,...r||m]));o?o(ut,rt):v(ut);break}else{const Me=((be=rt.children)===null||be===void 0?void 0:be.map(ut=>({paths:[...Ve,ut],data:ut})))||[];De.push(...Me)}}},[e]),he.useEffect(()=>{s&&L(s.toString())},[s]),re.createElement("div",{role:"tree",ref:N,draggable:t,onClick:fe,className:mn(vY,i)},K(e,0))};var eUe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const s2=i=>{const{visible:e=!0,children:t,className:n,style:r={}}=i,s=eUe(i,["visible","children","className","style"]);return re.createElement("div",Object.assign({className:n,style:Object.assign({display:e?void 0:"none"},r)},s),t)},tUe=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:eM,Breadcrumb:ale,Button:vb,Checkbox:bye,Collapse:cle,get DirectionKind(){return rS},Display:s2,DropDown:UK,Icon:dr,Input:jK,Item:LLe,List:CLe,Menu:Za,MenuItem:_ae,get MenuMode(){return p0},Modal:iM,MonacoEditor:uY,Option:afe,Pane:gp,Scrollbar:KS,Search:sfe,Select:gO,SplitPane:_A,SubMenu:bae,Tab:xfe,Tabs:_Y,Toolbar:tM,Tooltip:PK,TreeView:AB,useContextMenu:q5,useContextView:NS,useContextViewEle:XO},Symbol.toStringTag,{value:"Module"}));var pc;(function(i){i[i.EditorCore=0]="EditorCore",i[i.EditorContrib=100]="EditorContrib",i[i.WorkbenchContrib=200]="WorkbenchContrib",i[i.BuiltinExtension=300]="BuiltinExtension",i[i.ExternalExtension=400]="ExternalExtension"})(pc||(pc={}));const Xfe={View:{value:C("view","View"),original:"View"},Help:{value:C("help","Help"),original:"Help"},Preferences:{value:C("preferences","Preferences"),original:"Preferences"},Developer:{value:C({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}};var nUe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};class rd{constructor(e){this.desc=e}}function iUe(i){const e=new Je,t=new i,n=t.desc,{f1:r,menu:s,keybinding:o,description:a}=n,u=nUe(n,["f1","menu","keybinding","description"]);if(e.add(Xn.registerCommand({id:u.id,handler:(d,...h)=>t.run(d,...h),description:a})),Array.isArray(s)?e.add(ra.appendMenuItems(s.map(d=>({id:d.id,item:Object.assign({command:u},d)})))):s&&e.add(ra.appendMenuItem(s.id,Object.assign({command:u},s))),r&&(e.add(ra.appendMenuItem(Mt.CommandPalette,{command:u,when:u.precondition})),e.add(ra.addCommand(u))),Array.isArray(o))for(const d of o)Oo.registerKeybindingRule(Object.assign(Object.assign({},d),{id:u.id,when:u.precondition?_t.and(u.precondition,d.when):d.when}));else o&&Oo.registerKeybindingRule(Object.assign(Object.assign({},o),{id:u.id,when:u.precondition?_t.and(u.precondition,o.when):o.when}));return e}const rUe=Object.freeze(Object.defineProperty({__proto__:null,Action2:rd,KeyChord:Zr,get KeybindingWeight(){return pc}},Symbol.toStringTag,{value:"Module"})),sUe="ko-KR",oUe="",aUe={"molecule.welcome":"Molecule   ",menubar:" ","menu.file":"","menu.settings":"","menu.account":"","menu.colorTheme":" ","menu.newFile":" ","menu.newFolder":" ","menu.open":"","menu.edit":"","menu.undo":"","menu.redo":" ","menu.selection":"","menu.selectAll":" ","menu.copyLineUp":"  ","menu.view":"","menu.commandPalette":" ","menu.openView":" ","menu.appearance":"","menu.showMenuBar":"  ","menu.showSideBar":"  ","menu.showSideBar.label":"    ","menu.showStatusBar":"  ","menu.showActivityBar":"  ","menu.hideActivityBar":"  ","menu.showPanel":" ","menu.showPanel.title":" ","menu.defaultProjectName":"  ","menu.run":"","menu.runTask":" ","menu.help":"","menu.about":"","menu.menuBarHorizontal":"   ","menu.menuBarVertical":"   ","sidebar.explore.folders":"","sidebar.explore.title":"","sidebar.explore.openEditor":" ","sidebar.explore.openEditor.group":"${i} ","sidebar.explore.outline":"","sidebar.search.title":"","sidebar.replace.placement":"","sidebar.explore.refresh":"  ","sidebar.explore.collapseFolders":"   ","sidebar.explore.toggleVertical":" ","sidebar.explore.saveAll":" ","sidebar.explore.actionDesc":"    ...","sidebar.explore.outlineMore":"  ...","toolbar.refresh":" ","toolbar.clearAll":" ","toolbar.collapseAll":" ","search.matchCase":"/ ","search.matchWholeWord":"  ","search.useRegularExpression":" ","search.preserveCase":"/ ","search.replaceAll":" ","panel.output.title":"","panel.toolbox.closePanel":" ","panel.toolbox.maximize":"  ","panel.toolbox.restoreSize":"  ","panel.problems.title":"","panel.problems.empty":"    .","notification.title":"","notification.title.no":"  .","editor.closeToRight":"   ","editor.closeToLeft":"   ","editor.closeAll":" ","editor.closeSaved":"  ","editor.closeOthers":"  ","editor.close":"","editor.actions.splitRight":" ","editor.showOpenEditors":"   ","contextmenu.rename":" ","contextmenu.delete":"","contextmenu.newFile":" ","contextmenu.newFolder":" ","contextmenu.removeFolder":" ","contextmenu.openToTheSide":" ","contextmenu.addFolderToSpace":"   ...","contextmenu.findInSpace":"  ...","contextmenu.download":"..."},lUe={id:sUe,name:oUe,source:aUe},uUe="zh-CN",cUe="",dUe={"molecule.welcome":"!",menubar:"","menu.file":"","menu.settings":"","menu.account":"","menu.colorTheme":"","menu.newFile":"","menu.newFolder":"","menu.open":"","menu.edit":"","menu.undo":"","menu.redo":"","menu.selection":"","menu.selectAll":"","menu.copyLineUp":"","menu.view":"","menu.commandPalette":"","menu.openView":"","menu.appearance":"","menu.showMenuBar":"","menu.showAuxiliaryBar":"","menu.showSideBar":"","menu.showSideBar.label":"","menu.showStatusBar":"","menu.showActivityBar":"","menu.hideActivityBar":"","menu.showPanel":"","menu.showPanel.title":"","menu.defaultProjectName":"","menu.run":"","menu.runTask":"","menu.help":"","menu.about":"","menu.menuBarHorizontal":"","menu.menuBarVertical":"","sidebar.explore.folders":"","sidebar.explore.title":"","sidebar.explore.openEditor":"","sidebar.explore.openEditor.group":" ${i} ","sidebar.explore.outline":"","sidebar.search.title":"","sidebar.replace.placement":"","sidebar.explore.refresh":"","sidebar.explore.collapseFolders":"","sidebar.explore.toggleVertical":"","sidebar.explore.saveAll":"","sidebar.explore.actionDesc":"...","sidebar.explore.outlineMore":"...","toolbar.refresh":"","toolbar.clearAll":"","toolbar.collapseAll":"","search.matchCase":"","search.matchWholeWord":"","search.useRegularExpression":"","search.preserveCase":"","search.replaceAll":"","panel.output.title":"","panel.problems.title":"","panel.problems.empty":"","panel.toolbox.closePanel":"","panel.toolbox.maximize":"","panel.toolbox.restoreSize":"","notification.title":"","notification.title.no":"","notification.locale.title":", ","notification.locale.description":"","notification.locale.button":"","editor.closeToRight":"","editor.closeToLeft":"","editor.closeAll":"","editor.closeOthers":"","editor.closeSaved":"","editor.close":"","editor.actions.splitRight":"","editor.showOpenEditors":"","contextmenu.rename":"","contextmenu.delete":"","contextmenu.newFile":"","contextmenu.newFolder":"","contextmenu.removeFolder":"","contextmenu.openToTheSide":"","contextmenu.addFolderToSpace":"...","contextmenu.findInSpace":"...","contextmenu.download":"..."},hUe={id:uUe,name:cUe,source:dUe},fUe="en",gUe="English",pUe={"molecule.welcome":"Welcome to Molecule",menubar:"Menu Bar","menu.file":"File","menu.settings":"Settings","menu.account":"Account","menu.colorTheme":"Color Theme","menu.newFile":"New File","menu.newFolder":"New Folder","menu.open":"Open","menu.edit":"Edit","menu.undo":"Undo","menu.redo":"Redo","menu.selection":"Selection","menu.selectAll":"Select All","menu.copyLineUp":"Copy Line Up","menu.view":"View","menu.commandPalette":"Command Palette","menu.openView":"Open View","menu.appearance":"Appearance","menu.showMenuBar":"Show Menu Bar","menu.showAuxiliaryBar":"Show Auxiliary Bar","menu.showSideBar":"Show Side Bar","menu.showSideBar.label":"Toggle Side Bar Visibility","menu.showStatusBar":"Show Status Bar","menu.showActivityBar":"Show Activity Bar","menu.hideActivityBar":"Hide Activity Bar","menu.showPanel":"Show Panel","menu.showPanel.title":"Toggle Panel","menu.defaultProjectName":"Default Project Name","menu.run":"Run","menu.runTask":"Run Task","menu.help":"Help","menu.about":"About","menu.menuBarHorizontal":"Menu Bar Horizontal Mode","menu.menuBarVertical":"Menu Bar Vertical Mode","sidebar.explore.folders":"Folders","sidebar.explore.title":"Explorer","sidebar.explore.openEditor":"Open Editors","sidebar.explore.openEditor.group":"Group ${i}","sidebar.explore.outline":"Outline","sidebar.search.title":"Search","sidebar.replace.placement":"Replace","sidebar.explore.refresh":"Refresh Explorer","sidebar.explore.collapseFolders":"Collapse Folders in Explorer","sidebar.explore.toggleVertical":"Toggle Vertical","sidebar.explore.saveAll":"Save All","sidebar.explore.actionDesc":"View and More Actions...","sidebar.explore.outlineMore":"More Actions...","toolbar.refresh":"Refresh","toolbar.clearAll":"Clear all","toolbar.collapseAll":"Collapse all","search.matchCase":"Match Case","search.matchWholeWord":"Match Whole Word","search.useRegularExpression":"Use Regular Expression","search.preserveCase":"Preserve Case","search.replaceAll":"Replace All","panel.output.title":"output","panel.toolbox.closePanel":"Close Panel","panel.toolbox.maximize":"Maximize Panel Size","panel.toolbox.restoreSize":"Restore Panel Size","panel.problems.title":"Problems","panel.problems.empty":"No problems have been detected in the workspace.","notification.title":"Notifications","notification.title.no":"No new notifications","notification.locale.title":"A reload is required for the change in display language to take effect.","notification.locale.description":"Press the confirm button to reload and change the display language.","notification.locale.button":"Confirm Reload","editor.closeToRight":"Close To Right","editor.closeToLeft":"Close To Left","editor.closeAll":"Close All","editor.closeSaved":"Close Saved","editor.closeOthers":"Close Others","editor.close":"Close","editor.actions.splitRight":"Split Editor Right","editor.showOpenEditors":"Show Opened Editors","contextmenu.rename":"Rename","contextmenu.delete":"Delete","contextmenu.newFile":"New File","contextmenu.newFolder":"New Folder","contextmenu.removeFolder":"Remove Folder","contextmenu.openToTheSide":"Open to the Side","contextmenu.addFolderToSpace":"Add Folder to Workspace...","contextmenu.findInSpace":"Find in Workspace...","contextmenu.download":"Download..."},mUe={id:fUe,name:gUe,source:pUe};var Gz;(function(i){i.Theme="Themes",i.Normal="normal",i.Settings="settings",i.Locals="locales",i.Menus="menus",i.Workbench="workbench"})(Gz||(Gz={}));var sS;(function(i){i.Languages="languages",i.Commands="commands",i.Configuration="configuration",i.Grammar="grammars",i.Themes="themes",i.IconTheme="iconThemes"})(sS||(sS={}));const _Ue=lUe,vUe=hUe,Qfe=mUe,Jfe=[vUe,Qfe,_Ue],bUe={id:"ExtendsLocales",name:"Extends locales",contributes:{[sS.Languages]:Jfe},activate(){},dispose(){}},CUe=Qfe.id;Jfe.find(i=>i.id===CUe);var Z3;(function(i){i.OnChange="localization.onchange"})(Z3||(Z3={}));var wUe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yUe=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Yz;const Zz=`${j5}.localeId`;let rf=Yz=class extends tl{constructor(){super(),this.state={},this._locales=new Map}reset(){localStorage.removeItem(Zz),this._current=void 0,this._locales.clear()}getLocales(){return Array.from(this._locales.values())}initialize(e,t){this.addLocales(e),this._locales.get(t)?this._current=this._locales.get(t):Pn.error(`Cannot initialize the locale with ${t}`)}getCurrentLocale(){return this._current&&Object.assign({},this._current)}getLocale(e){if(e)return this._locales.get(e)}removeLocale(e){const t=this._locales.get(e);if(t!==void 0){if(this._locales.size===1){Pn.error("You can't remove this Locale because there must have one locale at least");return}return this._current&&this._current.id===t.id&&(this._current=this._locales.values().next().value),this._locales.delete(e),t}}setCurrentLocale(e){if(this._current&&this._current.id===e)return!0;const t=this._locales.get(e);return t?(this.emit(Z3.OnChange,this._current,t),this._current=t,localStorage.setItem(Zz,t.id),!0):!1}transformLocaleData(e){const t=Object.assign({},e);if(e.source instanceof Map||(t.source=new Map(Object.entries(e.source))),t.inherit){const n=this._locales.get(t.inherit);n&&(t.source=new Map([...n.source,...t.source]))}return t}addLocales(e){if(e.length>0){const t=this._locales;e.forEach(n=>{const r=n.id;t.has(r)||t.set(r,this.transformLocaleData(n))})}}onChange(e){this.subscribe(Z3.OnChange,e)}localize(e,t="",...n){let r=t;return this._current&&(r=this._current.source.get(e)||t),n.length&&n.forEach(s=>{r=r.replace(Yz.LOCALIZE_REPLACED_WORD,s)}),r}};rf.LOCALIZE_REPLACED_WORD="${i}";rf=Yz=wUe([Ki(),yUe("design:paramtypes",[])],rf);function ft(i,e,...t){return je.resolve(rf).localize(i,e,...t)}class jgt extends re.PureComponent{constructor(e){super(e),this.state={localeId:""},this.getValue=()=>{const{sourceKey:t,defaultValue:n=""}=this.props;return this.localeService?this.localeService.localize(t,n):n}}componentDidMount(){var e;this.update((e=this.localeService.getCurrentLocale())===null||e===void 0?void 0:e.id),this.localeService.onChange((t,n)=>{this.update(n.id)})}update(e){this.setState({localeId:e})}get localeService(){return je.resolve(rf)}render(){return this.getValue()}}var qr;(function(i){i.OnCloseTab="editor.closeTab",i.OnCloseAll="editor.closeAll",i.OnCloseOther="editor.closeOther",i.OnCloseToLeft="editor.closeToLeft",i.OnCloseToRight="editor.closeToRight",i.OnMoveTab="editor.moveTab",i.OpenTab="editor.openTab",i.OnSelectTab="editor.selectTab",i.OnUpdateTab="editor.updateTab",i.onActionsClick="editor.actionsClick",i.OnSplitEditorRight="editor.splitEditorRight",i.onEditorInstanceMount="editor.onEditorInstanceMount"})(qr||(qr={}));class ege{constructor(e,t,n,r,s=[],o=[],a){this.id=e,this.data=r,this.menu=o,this.actions=s,this.tab=t,this.activeTab=n,this.editorInstance=a}}class tge{constructor(e=null,t=[],n,r={}){this.current=e,this.groups=t,this.entry=n,this.editorOptions=r}}const SUe="modulepreload",LUe=function(i){return"/monaco-sql-languages/"+i},Pne={},It=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=LUe(s),s in Pne)return;Pne[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const f=r[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":SUe,o||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),o)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};const EUe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class xUe extends Oe{constructor(e,t={}){super(),this._onDidUpdate=this._register(new Ce),this._editor=e,this._options=Lg(t,EUe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new Q(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new Q(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new Q(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>Q.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let r=0,s=this.ranges.length;r<s&&!t;r++){let o=this.ranges[r].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=r+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(XP(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let r=n.range.getStartPosition();this._editor.setPosition(r),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}function DUe(i,e){return new IUe(i,e)}class IUe extends ihe{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?pq(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const r=(a,u)=>e.fmr(a,u),s=(a,u)=>function(){const d=Array.prototype.slice.call(arguments,0);return u(a,d)};let o={};for(const a of n)o[a]=s(a,r);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}function TUe(i){return Array.isArray(i)}function kUe(i){return!TUe(i)}function nge(i){return typeof i=="string"}function Fne(i){return!nge(i)}function _w(i){return!i}function l0(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function Bne(i){return i.replace(/[&<>'"_]/g,"-")}function NUe(i,e){console.log(`${i.languageId}: ${e}`)}function or(i,e){return new Error(`${i.languageId}: ${e}`)}function Mv(i,e,t,n,r){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,u,d,h,f,p,m,v,b){return _w(d)?_w(h)?!_w(f)&&f<n.length?l0(i,n[f]):!_w(m)&&i&&typeof i[m]=="string"?i[m]:(o===null&&(o=r.split("."),o.unshift(r)),!_w(p)&&p<o.length?l0(i,o[p]):""):l0(i,t):"$"})}function aP(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return null}function AUe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return!1}const ige=5;class pO{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Ey(e,t);let n=Ey.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let r=this._entries[n];return r||(r=new Ey(e,t),this._entries[n]=r,r)}}pO._INSTANCE=new pO(ige);class Ey{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Ey._equals(this,e)}push(e){return pO.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return pO.create(this.parent,e)}}class j2{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new j2(this.languageId,this.state)}}class Rv{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new K2(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new K2(e,t);let n=Ey.getStackElementId(e),r=this._entries[n];return r||(r=new K2(e,null),this._entries[n]=r,r)}}Rv._INSTANCE=new Rv(ige);class K2{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Rv.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof K2)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class OUe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new V8(e,t,this._languageId)))}nestedModeTokenize(e,t,n,r){const s=n.languageId,o=n.state,a=Wr.get(s);if(!a)return this.enterMode(r,s),this.emit(r,""),o;let u=a.tokenize(e,t,o,r);return this._tokens=this._tokens.concat(u.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,u.endState}finalize(e){return new eG(this._tokens,e)}}class X3{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let r=e!==null?e.length:0,s=t.length,o=n!==null?n.length:0;if(r===0&&s===0&&o===0)return new Uint32Array(0);if(r===0&&s===0)return n;if(s===0&&o===0)return e;let a=new Uint32Array(r+s+o);e!==null&&a.set(e);for(let u=0;u<s;u++)a[r+u]=t[u];return n!==null&&a.set(n,r+s),a}nestedModeTokenize(e,t,n,r){const s=n.languageId,o=n.state,a=Wr.get(s);if(!a)return this.enterMode(r,s),this.emit(r,""),o;let u=a.tokenize2(e,t,o,r);return this._prependTokens=X3._merge(this._prependTokens,this._tokens,u.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,u.endState}finalize(e){return new H8(X3._merge(this._prependTokens,this._tokens,null),e)}}class OB{constructor(e,t,n,r){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=r,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let s=!1;this._tokenizationRegistryListener=Wr.onDidChange(o=>{if(s)return;let a=!1;for(let u=0,d=o.changedLanguages.length;u<d;u++){let h=o.changedLanguages[u];if(this._embeddedModes[h]){a=!0;break}}a&&(s=!0,Wr.fire([this._languageId]),s=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=Wr.get(t);if(n){if(n instanceof OB){const s=n.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}const r=Wr.getPromise(t);r&&e.push(r)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=pO.create(null,this._lexer.start);return Rv.create(e,null)}tokenize(e,t,n,r){let s=new OUe,o=this._tokenize(e,t,n,r,s);return s.finalize(o)}tokenize2(e,t,n,r){let s=new X3(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,r,s);return s.finalize(o)}_tokenize(e,t,n,r,s){return n.embeddedModeData?this._nestedTokenize(e,t,n,r,s):this._myTokenize(e,t,n,r,s)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=aP(this._lexer,t.stack.state),!n))throw or(this._lexer,"tokenizer state is not defined: "+t.stack.state);let r=-1,s=!1;for(const o of n){if(!Fne(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.regex,u=o.regex.source;if(u.substr(0,4)==="^(?:"&&u.substr(u.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(u.substr(4,u.length-5),h)}let d=e.search(a);d===-1||d!==0&&o.matchOnlyAtLineStart||(r===-1||d<r)&&(r=d)}if(!s)throw or(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return r}_nestedTokenize(e,t,n,r,s){let o=this._findLeavingNestedModeOffset(e,n);if(o===-1){let d=s.nestedModeTokenize(e,t,n.embeddedModeData,r);return Rv.create(n.stack,new j2(n.embeddedModeData.languageId,d))}let a=e.substring(0,o);a.length>0&&s.nestedModeTokenize(a,!1,n.embeddedModeData,r);let u=e.substring(o);return this._myTokenize(u,t,n,r+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,r,s){s.enterMode(r,this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,u=a.length;let d=n.embeddedModeData,h=n.stack,f=0,p=null,m=!0;for(;m||f<u;){const v=f,b=h.depth,L=p?p.groups.length:0,S=h.state;let y=null,E=null,A=null,N=null,V=null;if(p){y=p.matches;const Y=p.groups.shift();E=Y.matched,A=Y.action,N=p.rule,p.groups.length===0&&(p=null)}else{if(!m&&f>=u)break;m=!1;let Y=this._lexer.tokenizer[S];if(!Y&&(Y=aP(this._lexer,S),!Y))throw or(this._lexer,"tokenizer state is not defined: "+S);let X=a.substr(f);for(const $ of Y)if((f===0||!$.matchOnlyAtLineStart)&&(y=X.match($.regex),y)){E=y[0],A=$.action;break}}if(y||(y=[""],E=""),A||(f<u&&(y=[a.charAt(f)],E=y[0]),A=this._lexer.defaultToken),E===null)break;for(f+=E.length;kUe(A)&&Fne(A)&&A.test;)A=A.test(E,y,S,f===u);let M=null;if(typeof A=="string"||Array.isArray(A))M=A;else if(A.group)M=A.group;else if(A.token!==null&&A.token!==void 0){if(A.tokenSubst?M=Mv(this._lexer,A.token,E,y,S):M=A.token,A.nextEmbedded)if(A.nextEmbedded==="@pop"){if(!d)throw or(this._lexer,"cannot pop embedded mode if not inside one");d=null}else{if(d)throw or(this._lexer,"cannot enter embedded mode from within an embedded mode");V=Mv(this._lexer,A.nextEmbedded,E,y,S)}if(A.goBack&&(f=Math.max(0,f-A.goBack)),A.switchTo&&typeof A.switchTo=="string"){let Y=Mv(this._lexer,A.switchTo,E,y,S);if(Y[0]==="@"&&(Y=Y.substr(1)),aP(this._lexer,Y))h=h.switchTo(Y);else throw or(this._lexer,"trying to switch to a state '"+Y+"' that is undefined in rule: "+this._safeRuleName(N))}else{if(A.transform&&typeof A.transform=="function")throw or(this._lexer,"action.transform not supported");if(A.next)if(A.next==="@push"){if(h.depth>=this._lexer.maxStack)throw or(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(S)}else if(A.next==="@pop"){if(h.depth<=1)throw or(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(N));h=h.pop()}else if(A.next==="@popall")h=h.popall();else{let Y=Mv(this._lexer,A.next,E,y,S);if(Y[0]==="@"&&(Y=Y.substr(1)),aP(this._lexer,Y))h=h.push(Y);else throw or(this._lexer,"trying to set a next state '"+Y+"' that is undefined in rule: "+this._safeRuleName(N))}}A.log&&typeof A.log=="string"&&NUe(this._lexer,this._lexer.languageId+": "+Mv(this._lexer,A.log,E,y,S))}if(M===null)throw or(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(N));const R=Y=>{let X=this._modeService.getModeIdForLanguageName(Y);X&&(Y=X);const $=this._getNestedEmbeddedModeData(Y);if(f<u){const T=e.substr(f);return this._nestedTokenize(T,t,Rv.create(h,$),r+f,s)}else return Rv.create(h,$)};if(Array.isArray(M)){if(p&&p.groups.length>0)throw or(this._lexer,"groups cannot be nested: "+this._safeRuleName(N));if(y.length!==M.length+1)throw or(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(N));let Y=0;for(let X=1;X<y.length;X++)Y+=y[X].length;if(Y!==E.length)throw or(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(N));p={rule:N,matches:y,groups:[]};for(let X=0;X<M.length;X++)p.groups[X]={action:M[X],matched:y[X+1]};f-=E.length;continue}else{if(M==="@rematch"&&(f-=E.length,E="",y=null,M="",V!==null))return R(V);if(E.length===0){if(u===0||b!==h.depth||S!==h.state||(p?p.groups.length:0)!==L)continue;throw or(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(N))}let Y=null;if(nge(M)&&M.indexOf("@brackets")===0){let X=M.substr(9),$=MUe(this._lexer,E);if(!$)throw or(this._lexer,"@brackets token returned but no bracket defined as: "+E);Y=Bne($.token+X)}else{let X=M===""?"":M+this._lexer.tokenPostfix;Y=Bne(X)}v<o&&s.emit(v+r,Y)}if(V!==null)return R(V)}return Rv.create(h,d)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=Wr.get(t);if(n)return new j2(t,n.getInitialState())}return new j2(t||L0,dM)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function MUe(i,e){if(!e)return null;e=l0(i,e);let t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function RUe(i,e,t,n){return new OB(i,e,t,n)}var H6;const $6=(H6=window.trustedTypes)===null||H6===void 0?void 0:H6.createPolicy("standaloneColorizer",{createHTML:i=>i});class OY{static colorizeElement(e,t,n,r){r=r||{};let s=r.theme||"vs",o=r.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(s);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;let u=d=>{var h;const f=(h=$6==null?void 0:$6.createHTML(d))!==null&&h!==void 0?h:d;n.innerHTML=f};return this.colorize(t,a||"",o,r).then(u,d=>console.error(d))}static colorize(e,t,n,r){const s=e.languageIdCodec;let o=4;r&&typeof r.tabSize=="number"&&(o=r.tabSize),yq(t)&&(t=t.substr(1));let a=sg(t),u=e.getModeId(n);if(!u)return Promise.resolve(Wne(a,o,s));e.triggerMode(u);const d=Wr.get(u);if(d)return z6(a,o,d,s);const h=Wr.getPromise(u);return h?new Promise((f,p)=>{h.then(m=>{z6(a,o,m,s).then(f,p)},p)}):new Promise((f,p)=>{let m=null,v=null;const b=()=>{m&&(m.dispose(),m=null),v&&(v.dispose(),v=null);const L=Wr.get(u);if(L){z6(a,o,L,s).then(f,p);return}f(Wne(a,o,s))};v=new Ma,v.cancelAndSet(b,500),m=Wr.onDidChange(L=>{L.changedLanguages.indexOf(u)>=0&&b()})})}static colorizeLine(e,t,n,r,s=4){const o=Pu.isBasicASCII(e,t),a=Pu.containsRTL(e,o,n);return R8(new LC(!1,!0,e,!1,o,a,0,r,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let r=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function z6(i,e,t,n){return new Promise((r,s)=>{const o=()=>{const a=PUe(i,e,t,n);if(t instanceof OB){const u=t.getLoadStatus();if(u.loaded===!1){u.promise.then(o,s);return}}r(a)};o()})}function Wne(i,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=16793600;for(let o=0,a=i.length;o<a;o++){let u=i[o];s[0]=u.length;const d=new Js(s,u,t),h=Pu.isBasicASCII(u,!0),f=Pu.containsRTL(u,h,!0);let p=R8(new LC(!1,!0,u,!1,h,f,0,d,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>")}return n.join("")}function PUe(i,e,t,n){let r=[],s=t.getInitialState();for(let o=0,a=i.length;o<a;o++){let u=i[o],d=t.tokenize2(u,!0,s,0);Js.convertToEndOffset(d.tokens,u.length);let h=new Js(d.tokens,u,n);const f=Pu.isBasicASCII(u,!0),p=Pu.containsRTL(u,f,!0);let m=R8(new LC(!1,!0,u,!1,f,p,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(m.html),r.push("<br/>"),s=d.endState}return r.join("")}function rge(i,e,t){let n=new tfe(i,e),r=null;n.has(Qa)||(r=new L3(bi.modelService.get()),n.set(Qa,r)),n.has(Ll)||n.set(Ll,new K3(n.get(Ti),n.get(Tr)));let s=t(n);return r&&r.setEditor(s),s}function FUe(i,e,t){return rge(i,t||{},n=>new tO(i,e,n,n.get(Nn),n.get(Ti),n.get(Tr),n.get(cn),n.get(Sr),n.get(Hp),n.get(q0),n.get(gs),n.get(nr),n.get(il),n.get(Ds),n.get(Fo)))}function BUe(i){return bi.codeEditorService.get().onCodeEditorAdd(e=>{i(e)})}function WUe(i,e,t){return rge(i,t||{},n=>new u$(i,e,n,n.get(Nn),n.get(cn),n.get(Sr),n.get(Hp),n.get(Vu),n.get(Ti),n.get(q0),n.get(gs),n.get(nr),n.get(j0),n.get($p),n.get(K0)))}function VUe(i,e){return new xUe(i,e)}function HUe(i,e,t){return Xde(bi.modelService.get(),bi.modeService.get(),i,e,t)}function $Ue(i,e){bi.modelService.get().setMode(i,bi.modeService.get().create(e))}function zUe(i,e,t){i&&bi.markerService.get().changeOne(e,i.uri,t)}function UUe(i){return bi.markerService.get().read(i)}function jUe(i){return bi.markerService.get().onMarkerChanged(i)}function KUe(i){return bi.modelService.get().getModel(i)}function qUe(){return bi.modelService.get().getModels()}function GUe(i){return bi.modelService.get().onModelAdded(i)}function YUe(i){return bi.modelService.get().onModelRemoved(i)}function ZUe(i){return bi.modelService.get().onModelModeChanged(e=>{i({model:e.model,oldLanguage:e.oldModeId})})}function XUe(i){return DUe(bi.modelService.get(),i)}function QUe(i,e){const t=bi.standaloneThemeService.get();return t.registerEditorContainer(i),OY.colorizeElement(t,bi.modeService.get(),i,e)}function JUe(i,e,t){return bi.standaloneThemeService.get().registerEditorContainer(document.body),OY.colorize(bi.modeService.get(),i,e,t)}function eje(i,e,t=4){return bi.standaloneThemeService.get().registerEditorContainer(document.body),OY.colorizeModelLine(i,e,t)}function tje(i){let e=Wr.get(i);return e||{getInitialState:()=>dM,tokenize:(t,n,r,s)=>Gce(i,t,r,s)}}function nje(i,e){bi.modeService.get().triggerMode(e);let n=tje(e),r=sg(i),s=[],o=n.getInitialState();for(let a=0,u=r.length;a<u;a++){let d=r[a],h=n.tokenize(d,!0,o,0);s[a]=h.tokens,o=h.endState}return s}function ije(i,e){bi.standaloneThemeService.get().defineTheme(i,e)}function rje(i){bi.standaloneThemeService.get().setTheme(i)}function sje(){$De()}function oje(i,e){return Xn.registerCommand({id:i,handler:e})}function aje(){return{create:FUe,onDidCreateEditor:BUe,createDiffEditor:WUe,createDiffNavigator:VUe,createModel:HUe,setModelLanguage:$Ue,setModelMarkers:zUe,getModelMarkers:UUe,onDidChangeMarkers:jUe,getModels:qUe,getModel:KUe,onDidCreateModel:GUe,onWillDisposeModel:YUe,onDidChangeModelLanguage:ZUe,createWebWorker:XUe,colorizeElement:QUe,colorize:JUe,colorizeModelLine:eje,tokenize:nje,defineTheme:ije,setTheme:rje,remeasureFonts:sje,registerCommand:oje,AccessibilitySupport:g$,ContentWidgetPositionPreference:b$,CursorChangeReason:C$,DefaultEndOfLine:w$,EditorAutoIndentStrategy:S$,EditorOption:L$,EndOfLinePreference:E$,EndOfLineSequence:x$,MinimapPosition:O$,MouseTargetType:M$,OverlayWidgetPositionPreference:R$,OverviewRulerLane:P$,RenderLineNumbersType:F$,RenderMinimap:B$,ScrollbarVisibility:V$,ScrollType:W$,TextEditorCursorBlinkingStyle:j$,TextEditorCursorStyle:K$,TrackedRangeStickiness:q$,WrappingIndent:G$,ConfigurationChangedEvent:jue,BareFontInfo:G1,FontInfo:DH,TextModelResolvedOptions:t4,FindMatch:DA,ApplyUpdateResult:E2,EditorType:_M,EditorOptions:af}}function lje(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function lP(i,e){return typeof i=="boolean"?i:e}function Vne(i,e){return typeof i=="string"?i:e}function uje(i){const e={};for(const t of i)e[t]=!0;return e}function Hne(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=uje(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function Xz(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,o){n=!0;let a="";if(typeof i[o]=="string")a=i[o];else if(i[o]&&i[o]instanceof RegExp)a=i[o].source;else throw i[o]===void 0?or(i,"language definition does not contain attribute '"+o+"', used at: "+e):or(i,"attribute reference '"+o+"' must be a string, used at: "+e);return _w(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let r=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,r)}function cje(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let r=t.split(".");if(r.unshift(t),n<r.length)return r[n]}return null}function dje(i,e,t,n){let r=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(r=parseInt(o[3]),o[2]&&(r=r+100)),s=o[4]);let a="~",u=s;!s||s.length===0?(a="!=",u=""):/^\w*$/.test(u)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],u=o[2]));let d;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(u)){let h=Hne(u.split("|"),i.ignoreCase);d=function(f){return a==="~"?h(f):!h(f)}}else if(a==="@"||a==="!@"){let h=i[u];if(!h)throw or(i,"the @ match target '"+u+"' is not defined, in rule: "+e);if(!lje(function(p){return typeof p=="string"},h))throw or(i,"the @ match target '"+u+"' must be an array of strings, in rule: "+e);let f=Hne(h,i.ignoreCase);d=function(p){return a==="@"?f(p):!f(p)}}else if(a==="~"||a==="!~")if(u.indexOf("$")<0){let h=Xz(i,"^"+u+"$");d=function(f){return a==="~"?h.test(f):!h.test(f)}}else d=function(h,f,p,m){return Xz(i,"^"+Mv(i,u,f,p,m)+"$").test(h)};else if(u.indexOf("$")<0){let h=l0(i,u);d=function(f){return a==="=="?f===h:f!==h}}else{let h=l0(i,u);d=function(f,p,m,v,b){let L=Mv(i,h,p,m,v);return a==="=="?f===L:f!==L}}return r===-1?{name:t,value:n,test:function(h,f,p,m){return d(h,h,f,p,m)}}:{name:t,value:n,test:function(h,f,p,m){let v=cje(h,f,p,r);return d(v||"",h,f,p,m)}}}function Qz(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw or(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw or(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw or(i,"the next state must be a string value in rule: "+e);{let r=t.next;if(!/^(@pop|@push|@popall)$/.test(r)&&(r[0]==="@"&&(r=r.substr(1)),r.indexOf("$")<0&&!AUe(i,Mv(i,r,"",[],""))))throw or(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=r}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let r=0,s=t.length;r<s;r++)n[r]=Qz(i,e,t[r]);return{group:n}}else if(t.cases){let n=[];for(let s in t.cases)if(t.cases.hasOwnProperty(s)){const o=Qz(i,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:o,name:s}):s==="@eos"?n.push({test:function(a,u,d,h){return h},value:o,name:s}):n.push(dje(i,e,s,o))}const r=i.defaultToken;return{test:function(s,o,a,u){for(const d of n)if(!d.test||d.test(s,o,a,u))return d.value;return r}}}else throw or(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class hje{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw or(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=Xz(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=Qz(e,this.name,t)}}function fje(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=lP(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=lP(e.ignoreCase,!1),t.unicode=lP(e.unicode,!1),t.tokenPostfix=Vne(e.tokenPostfix,"."+t.languageId),t.defaultToken=Vne(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function r(o,a,u){for(const d of u){let h=d.include;if(h){if(typeof h!="string")throw or(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw or(t,"include target '"+h+"' is not defined at: "+o);r(o+"."+h,a,e.tokenizer[h])}else{const f=new hje(o);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(f.setRegex(n,d[0]),d.length>=3)if(typeof d[1]=="string")f.setAction(n,{token:d[1],next:d[2]});else if(typeof d[1]=="object"){const p=d[1];p.next=d[2],f.setAction(n,p)}else throw or(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else f.setAction(n,d[1]);else{if(!d.regex)throw or(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);d.name&&typeof d.name=="string"&&(f.name=d.name),d.matchOnlyAtStart&&(f.matchOnlyAtLineStart=lP(d.matchOnlyAtLineStart,!1)),f.setRegex(n,d.regex),f.setAction(n,d.action)}a.push(f)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw or(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,r("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw or(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let s=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw or(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:l0(t,a.open),close:l0(t,a.close)});else throw or(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function gje(i){sb.registerLanguage(i)}function pje(){let i=[];return i=i.concat(sb.getLanguages()),i}function mje(i){return bi.modeService.get().languageIdCodec.encodeLanguageId(i)}function _je(i,e){let t=bi.modeService.get().onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function vje(i,e){const t=bi.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set configuration for unknown language ${i}`);return _i.register(t,e,100)}class bje{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,r){if(typeof this._actual.tokenize=="function")return mO.adaptTokenize(this._languageId,this._actual,e,n,r);throw new Error("Not supported!")}tokenize2(e,t,n){let r=this._actual.tokenizeEncoded(e,n);return new H8(r.tokens,r.endState)}}class mO{constructor(e,t,n,r){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=r}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let r=[],s=0;for(let o=0,a=e.length;o<a;o++){const u=e[o];let d=u.startIndex;o===0?d=0:d<s&&(d=s),r[o]=new V8(d+n,u.scopes,t),s=d}return r}static adaptTokenize(e,t,n,r,s){let o=t.tokenize(n,r),a=mO._toClassicTokens(o.tokens,e,s),u;return o.endState.equals(r)?u=r:u=o.endState,new eG(a,u)}tokenize(e,t,n,r){return mO.adaptTokenize(this._languageId,this._actual,e,n,r)}_toBinaryTokens(e,t,n){const r=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme;let o=[],a=0,u=0;for(let h=0,f=t.length;h<f;h++){const p=t[h],m=s.match(r,p.scopes);if(a>0&&o[a-1]===m)continue;let v=p.startIndex;h===0?v=0:v<u&&(v=u),o[a++]=v+n,o[a++]=m,u=v}let d=new Uint32Array(a);for(let h=0;h<a;h++)d[h]=o[h];return d}tokenize2(e,t,n,r){let s=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._modeService.languageIdCodec,s.tokens,r),a;return s.endState.equals(n)?a=n:a=s.endState,new H8(o,a)}}function Cje(i){return"tokenizeEncoded"in i}function sge(i){return i&&typeof i.then=="function"}function wje(i){if(i){const e=[null];for(let t=1,n=i.length;t<n;t++)e[t]=ye.fromHex(i[t]);bi.standaloneThemeService.get().setColorMapOverride(e)}else bi.standaloneThemeService.get().setColorMapOverride(null)}function yje(i,e){const t=bi.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${i}`);const n=r=>Cje(r)?new bje(t,r):new mO(t,r,bi.modeService.get(),bi.standaloneThemeService.get());return sge(e)?Wr.registerPromise(i,e.then(r=>n(r))):Wr.register(i,n(e))}function Sje(i,e){const t=n=>RUe(bi.modeService.get(),bi.standaloneThemeService.get(),i,fje(i,n));return sge(e)?Wr.registerPromise(i,e.then(n=>t(n))):Wr.register(i,t(e))}function Lje(i,e){return KF.register(i,e)}function Eje(i,e){return qF.register(i,e)}function xje(i,e){return J1.register(i,e)}function Dje(i,e){return TA.register(i,{provideHover:(t,n,r)=>{let s=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,r)).then(o=>{if(o)return!o.range&&s&&(o.range=new Q(n.lineNumber,s.startColumn,n.lineNumber,s.endColumn)),o.range||(o.range=new Q(n.lineNumber,n.column,n.lineNumber,n.column)),o})}})}function Ije(i,e){return qc.register(i,e)}function Tje(i,e){return Ky.register(i,e)}function kje(i,e){return GF.register(i,e)}function Nje(i,e){return kA.register(i,e)}function Aje(i,e){return ZF.register(i,e)}function Oje(i,e){return XF.register(i,e)}function Mje(i,e){return ip.register(i,e)}function Rje(i,e,t){return tg.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,r,s,o)=>{let a=bi.markerService.get().read({resource:n.uri}).filter(u=>Q.areIntersectingOrTouching(u,r));return e.provideCodeActions(n,r,{markers:a,only:s.only},o)},resolveCodeAction:e.resolveCodeAction})}function Pje(i,e){return O2.register(i,e)}function Fje(i,e){return Oh.register(i,e)}function Bje(i,e){return QF.register(i,e)}function Wje(i,e){return NA.register(i,e)}function Vje(i,e){return Ah.register(i,e)}function Hje(i,e){return qy.register(i,e)}function $je(i,e){return $H.register(i,e)}function zje(i,e){return YF.register(i,e)}function Uje(i,e){return B8.register(i,e)}function jje(i,e){return Gy.register(i,e)}function Kje(i,e){return W8.register(i,e)}function qje(i,e){return Xq.register(i,e)}function Gje(i,e){return Hv.register(i,e)}function Yje(){return{register:gje,getLanguages:pje,onLanguage:_je,getEncodedLanguageId:mje,setLanguageConfiguration:vje,setColorMap:wje,setTokensProvider:yje,setMonarchTokensProvider:Sje,registerReferenceProvider:Lje,registerRenameProvider:Eje,registerCompletionItemProvider:Vje,registerSignatureHelpProvider:xje,registerHoverProvider:Dje,registerDocumentSymbolProvider:Ije,registerDocumentHighlightProvider:Tje,registerLinkedEditingRangeProvider:kje,registerDefinitionProvider:Nje,registerImplementationProvider:Aje,registerTypeDefinitionProvider:Oje,registerCodeLensProvider:Mje,registerCodeActionProvider:Rje,registerDocumentFormattingEditProvider:Pje,registerDocumentRangeFormattingEditProvider:Fje,registerOnTypeFormattingEditProvider:Bje,registerLinkProvider:Wje,registerColorProvider:Hje,registerFoldingRangeProvider:$je,registerDeclarationProvider:zje,registerSelectionRangeProvider:Uje,registerDocumentSemanticTokensProvider:jje,registerDocumentRangeSemanticTokensProvider:Kje,registerInlineCompletionsProvider:qje,registerInlayHintsProvider:Gje,DocumentHighlightKind:y$,CompletionItemKind:m$,CompletionItemTag:_$,CompletionItemInsertTextRule:p$,SymbolKind:z$,SymbolTag:U$,IndentAction:D$,CompletionTriggerKind:v$,SignatureHelpTriggerKind:$$,InlayHintKind:I$,InlineCompletionTriggerKind:T$,FoldingRangeKind:ef}}class oS{static _handleEolEdits(e,t){let n,r=[];for(let s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&r.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),r}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),r=n.validateRange(t.range);return n.getFullModelRange().equalsRange(r)}static execute(e,t,n){n&&e.pushUndoStop();const r=oS._handleEolEdits(e,t);r.length===1&&oS._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(s=>jr.replace(Q.lift(s.range),s.text))):e.executeEdits("formatEditsCommand",r.map(s=>jr.replaceMove(Q.lift(s.range),s.text))),n&&e.pushUndoStop()}}class U6{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var sf=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function MY(i){if(i=i.filter(r=>r.range),!i.length)return;let{range:e}=i[0];for(let r=1;r<i.length;r++)e=Q.plusRange(e,i[r].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?i.length===1?To(C("hint11","Made 1 formatting edit on line {0}",t)):To(C("hintn1","Made {0} formatting edits on line {1}",i.length,t)):i.length===1?To(C("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):To(C("hintnn","Made {0} formatting edits between lines {1} and {2}",i.length,t,n))}function oge(i){const e=[],t=new Set,n=O2.ordered(i);for(const s of n)e.push(s),s.extensionId&&t.add(U6.toKey(s.extensionId));const r=Oh.ordered(i);for(const s of r){if(s.extensionId){if(t.has(U6.toKey(s.extensionId)))continue;t.add(U6.toKey(s.extensionId))}e.push({displayName:s.displayName,extensionId:s.extensionId,provideDocumentFormattingEdits(o,a,u){return s.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,u)}})}return e}class Hb{static setFormatterSelector(e){return{dispose:Hb._selectors.unshift(e)}}static select(e,t,n){return sf(this,void 0,void 0,function*(){if(e.length===0)return;const r=Qn.first(Hb._selectors);if(r)return yield r(e,t,n)})}}Hb._selectors=new Tu;function age(i,e,t,n,r,s){return sf(this,void 0,void 0,function*(){const o=i.get(Nn),a=cg(e)?e.getModel():e,u=Oh.ordered(a),d=yield Hb.select(u,a,n);d&&(r.report(d),yield o.invokeFunction(Zje,d,e,t,s))})}function Zje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const s=i.get(Vu);let o,a;cg(t)?(o=t.getModel(),a=new YA(t,5,void 0,r)):(o=t,a=new EG(t,r));let u=[],d=0;for(let v of Iq(n).sort(Q.compareRangesUsingStarts))d>0&&Q.areIntersectingOrTouching(u[d-1],v)?u[d-1]=Q.fromPositions(u[d-1].getStartPosition(),v.getEndPosition()):d=u.push(v);const h=v=>sf(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(o,v,o.getFormattingOptions(),a.token))||[]}),f=(v,b)=>{if(!v.length||!b.length)return!1;const L=v.reduce((S,y)=>Q.plusRange(S,y.range),v[0].range);if(!b.some(S=>Q.intersectRanges(L,S.range)))return!1;for(let S of v)for(let y of b)if(Q.intersectRanges(S.range,y.range))return!0;return!1},p=[],m=[];try{for(let v of u){if(a.token.isCancellationRequested)return!0;m.push(yield h(v))}for(let v=0;v<u.length;++v)for(let b=v+1;b<u.length;++b){if(a.token.isCancellationRequested)return!0;if(f(m[v],m[b])){const L=Q.plusRange(u[v],u[b]),S=yield h(L);u.splice(b,1),u.splice(v,1),u.push(L),m.splice(b,1),m.splice(v,1),m.push(S),v=0,b=0}}for(let v of m){if(a.token.isCancellationRequested)return!0;const b=yield s.computeMoreMinimalEdits(o.uri,v);b&&p.push(...b)}}finally{a.dispose()}if(p.length===0)return!1;if(cg(t))oS.execute(t,p,!0),MY(p),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:v}]=p,b=new yt(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn);o.pushEditOperations([b],p.map(L=>({text:L.text,range:Q.lift(L.range),forceMoveMarkers:!0})),L=>{for(const{range:S}of L)if(Q.areIntersectingOrTouching(S,b))return[new yt(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn)];return null})}return!0})}function Xje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const s=i.get(Nn),o=cg(e)?e.getModel():e,a=oge(o),u=yield Hb.select(a,o,t);u&&(n.report(u),yield s.invokeFunction(Qje,u,e,t,r))})}function Qje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const s=i.get(Vu);let o,a;cg(t)?(o=t.getModel(),a=new YA(t,5,void 0,r)):(o=t,a=new EG(t,r));let u;try{const d=yield e.provideDocumentFormattingEdits(o,o.getFormattingOptions(),a.token);if(u=yield s.computeMoreMinimalEdits(o.uri,d),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!u||u.length===0)return!1;if(cg(t))oS.execute(t,u,n!==2),n!==2&&(MY(u),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:d}]=u,h=new yt(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn);o.pushEditOperations([h],u.map(f=>({text:f.text,range:Q.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:p}of f)if(Q.areIntersectingOrTouching(p,h))return[new yt(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn)];return null})}return!0})}function Jje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const s=Oh.ordered(e);for(const o of s){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,n,r)).catch(Ro);if(vl(a))return yield i.computeMoreMinimalEdits(e.uri,a)}})}function eKe(i,e,t,n){return sf(this,void 0,void 0,function*(){const r=oge(e);for(const s of r){let o=yield Promise.resolve(s.provideDocumentFormattingEdits(e,t,n)).catch(Ro);if(vl(o))return yield i.computeMoreMinimalEdits(e.uri,o)}})}function lge(i,e,t,n,r){const s=QF.ordered(e);return s.length===0||s[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(s[0].provideOnTypeFormattingEdits(e,t,n,r,Fn.None)).catch(Ro).then(o=>i.computeMoreMinimalEdits(e.uri,o))}Xn.registerCommand("_executeFormatRangeProvider",function(i,...e){return sf(this,void 0,void 0,function*(){const[t,n,r]=e;Gi(rn.isUri(t)),Gi(Q.isIRange(n));const s=i.get(Qa),o=i.get(Vu),a=yield s.createModelReference(t);try{return Jje(o,a.object.textEditorModel,Q.lift(n),r,Fn.None)}finally{a.dispose()}})});Xn.registerCommand("_executeFormatDocumentProvider",function(i,...e){return sf(this,void 0,void 0,function*(){const[t,n]=e;Gi(rn.isUri(t));const r=i.get(Qa),s=i.get(Vu),o=yield r.createModelReference(t);try{return eKe(s,o.object.textEditorModel,n,Fn.None)}finally{o.dispose()}})});Xn.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return sf(this,void 0,void 0,function*(){const[t,n,r,s]=e;Gi(rn.isUri(t)),Gi(Le.isIPosition(n)),Gi(typeof r=="string");const o=i.get(Qa),a=i.get(Vu),u=yield o.createModelReference(t);try{return lge(a,u.object.textEditorModel,Le.lift(n),r,s)}finally{u.dispose()}})});var j6;af.wrappingIndent.defaultValue=0;af.glyphMargin.defaultValue=!1;af.autoIndent.defaultValue=3;af.overviewRulerLanes.defaultValue=2;Hb.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const Ra=the();Ra.editor=aje();Ra.languages=Yje();const tKe=Ra.CancellationTokenSource,uge=Ra.Emitter,an=Ra.KeyCode,el=Ra.KeyMod,nKe=Ra.Position,iKe=Ra.Range,rKe=Ra.Selection,sKe=Ra.SelectionDirection,oKe=Ra.MarkerSeverity,aKe=Ra.MarkerTag,u0=Ra.Uri,lKe=Ra.Token,ka=Ra.editor,tc=Ra.languages;(!((j6=Yr.MonacoEnvironment)===null||j6===void 0)&&j6.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=Ra);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const AM=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:tKe,Emitter:uge,KeyCode:an,KeyMod:el,MarkerSeverity:oKe,MarkerTag:aKe,Position:nKe,Range:iKe,Selection:rKe,SelectionDirection:sKe,Token:lKe,Uri:u0,editor:ka,languages:tc},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var cge=Object.defineProperty,uKe=Object.getOwnPropertyDescriptor,cKe=Object.getOwnPropertyNames,dKe=Object.prototype.hasOwnProperty,hKe=i=>cge(i,"__esModule",{value:!0}),fKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of cKe(e))!dKe.call(i,n)&&n!=="default"&&cge(i,n,{get:()=>e[n],enumerable:!(t=uKe(e,n))||t.enumerable});return i},gKe="4.4.4",$b={};hKe($b);fKe($b,AM);var Jz;(function(i){i[i.None=0]="None",i[i.CommonJS=1]="CommonJS",i[i.AMD=2]="AMD",i[i.UMD=3]="UMD",i[i.System=4]="System",i[i.ES2015=5]="ES2015",i[i.ESNext=99]="ESNext"})(Jz||(Jz={}));var eU;(function(i){i[i.None=0]="None",i[i.Preserve=1]="Preserve",i[i.React=2]="React",i[i.ReactNative=3]="ReactNative",i[i.ReactJSX=4]="ReactJSX",i[i.ReactJSXDev=5]="ReactJSXDev"})(eU||(eU={}));var tU;(function(i){i[i.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",i[i.LineFeed=1]="LineFeed"})(tU||(tU={}));var nU;(function(i){i[i.ES3=0]="ES3",i[i.ES5=1]="ES5",i[i.ES2015=2]="ES2015",i[i.ES2016=3]="ES2016",i[i.ES2017=4]="ES2017",i[i.ES2018=5]="ES2018",i[i.ES2019=6]="ES2019",i[i.ES2020=7]="ES2020",i[i.ESNext=99]="ESNext",i[i.JSON=100]="JSON",i[i.Latest=99]="Latest"})(nU||(nU={}));var iU;(function(i){i[i.Classic=1]="Classic",i[i.NodeJs=2]="NodeJs"})(iU||(iU={}));var dge=class{constructor(e,t,n,r){this._onDidChange=new $b.Emitter,this._onDidExtraLibsChange=new $b.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(n),this.setInlayHintsOptions(r),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let n;if(typeof t>"u"?n=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:n=t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:()=>{}};let r=1;return this._removedExtraLibs[n]&&(r=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(r=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:r},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let s=this._extraLibs[n];s&&s.version===r&&(delete this._extraLibs[n],this._removedExtraLibs[n]=r,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const t of e){const n=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,r=t.content;let s=1;this._removedExtraLibs[n]&&(s=this._removedExtraLibs[n]+1),this._extraLibs[n]={content:r,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}},pKe=gKe,hge=new dge({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),fge=new dge({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),mKe=()=>MB().then(i=>i.getTypeScriptWorker()),_Ke=()=>MB().then(i=>i.getJavaScriptWorker());$b.languages.typescript={ModuleKind:Jz,JsxEmit:eU,NewLineKind:tU,ScriptTarget:nU,ModuleResolutionKind:iU,typescriptVersion:pKe,typescriptDefaults:hge,javascriptDefaults:fge,getTypeScriptWorker:mKe,getJavaScriptWorker:_Ke};function MB(){return It(()=>import("./tsMode-b91aed43.js"),[])}$b.languages.onLanguage("typescript",()=>MB().then(i=>i.setupTypeScript(hge)));$b.languages.onLanguage("javascript",()=>MB().then(i=>i.setupJavaScript(fge)));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var gge=Object.defineProperty,vKe=Object.getOwnPropertyDescriptor,bKe=Object.getOwnPropertyNames,CKe=Object.prototype.hasOwnProperty,wKe=i=>gge(i,"__esModule",{value:!0}),yKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of bKe(e))!CKe.call(i,n)&&n!=="default"&&gge(i,n,{get:()=>e[n],enumerable:!(t=vKe(e,n))||t.enumerable});return i},OC={};wKe(OC);yKe(OC,AM);var RY=class{constructor(e,t,n){this._onDidChange=new OC.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},PY={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},FY={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},pge=new RY("css",PY,FY),mge=new RY("scss",PY,FY),_ge=new RY("less",PY,FY);OC.languages.css={cssDefaults:pge,lessDefaults:_ge,scssDefaults:mge};function BY(){return It(()=>import("./cssMode-5b60e482.js"),[])}OC.languages.onLanguage("less",()=>{BY().then(i=>i.setupMode(_ge))});OC.languages.onLanguage("scss",()=>{BY().then(i=>i.setupMode(mge))});OC.languages.onLanguage("css",()=>{BY().then(i=>i.setupMode(pge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var vge=Object.defineProperty,SKe=Object.getOwnPropertyDescriptor,LKe=Object.getOwnPropertyNames,EKe=Object.prototype.hasOwnProperty,xKe=i=>vge(i,"__esModule",{value:!0}),DKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of LKe(e))!EKe.call(i,n)&&n!=="default"&&vge(i,n,{get:()=>e[n],enumerable:!(t=SKe(e,n))||t.enumerable});return i},JS={};xKe(JS);DKe(JS,AM);var IKe=class{constructor(e,t,n){this._onDidChange=new JS.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},TKe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},kKe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},bge=new IKe("json",TKe,kKe);JS.languages.json={jsonDefaults:bge};function NKe(){return It(()=>import("./jsonMode-287a769a.js"),[])}JS.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});JS.languages.onLanguage("json",()=>{NKe().then(i=>i.setupMode(bge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Cge=Object.defineProperty,AKe=Object.getOwnPropertyDescriptor,OKe=Object.getOwnPropertyNames,MKe=Object.prototype.hasOwnProperty,RKe=i=>Cge(i,"__esModule",{value:!0}),PKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of OKe(e))!MKe.call(i,n)&&n!=="default"&&Cge(i,n,{get:()=>e[n],enumerable:!(t=AKe(e,n))||t.enumerable});return i},OM={};RKe(OM);PKe(OM,AM);var FKe=class{constructor(e,t,n){this._onDidChange=new OM.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},BKe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},RB={format:BKe,suggest:{},data:{useDefaultDataProvider:!0}};function PB(i){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:i===q2,documentFormattingEdits:i===q2,documentRangeFormattingEdits:i===q2}}var q2="html",$ne="handlebars",zne="razor",wge=FB(q2,RB,PB(q2)),WKe=wge.defaults,yge=FB($ne,RB,PB($ne)),VKe=yge.defaults,Sge=FB(zne,RB,PB(zne)),HKe=Sge.defaults;OM.languages.html={htmlDefaults:WKe,razorDefaults:HKe,handlebarDefaults:VKe,htmlLanguageService:wge,handlebarLanguageService:yge,razorLanguageService:Sge,registerHTMLLanguageService:FB};function $Ke(){return It(()=>import("./htmlMode-1c79fa8e.js"),[])}function FB(i,e=RB,t=PB(i)){const n=new FKe(i,e,t);let r;const s=OM.languages.onLanguage(i,async()=>{r=(await $Ke()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),r==null||r.dispose(),r=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Lge=Object.defineProperty,zKe=Object.getOwnPropertyDescriptor,UKe=Object.getOwnPropertyNames,jKe=Object.prototype.hasOwnProperty,KKe=i=>Lge(i,"__esModule",{value:!0}),qKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of UKe(e))!jKe.call(i,n)&&n!=="default"&&Lge(i,n,{get:()=>e[n],enumerable:!(t=zKe(e,n))||t.enumerable});return i},jw={};KKe(jw);qKe(jw,AM);var Ege={},K6={},xge=class{static getOrCreate(e){return K6[e]||(K6[e]=new xge(e)),K6[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,Ege[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function Ut(i){const e=i.id;Ege[e]=i,jw.languages.register(i);const t=xge.getOrCreate(e);jw.languages.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),jw.languages.onLanguage(e,()=>{t.load().then(n=>{jw.languages.setLanguageConfiguration(e,n.conf)})})}Ut({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>It(()=>import("./abap-c25c4b29.js"),[])});Ut({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>It(()=>import("./apex-90b58cb1.js"),[])});Ut({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>It(()=>import("./azcli-c8384527.js"),[])});Ut({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>It(()=>import("./bat-dd03db3a.js"),[])});Ut({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>It(()=>import("./bicep-b5110554.js"),[])});Ut({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>It(()=>import("./cameligo-3323522b.js"),[])});Ut({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>It(()=>import("./clojure-d45fb7b6.js"),[])});Ut({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>It(()=>import("./coffee-912c6d0d.js"),[])});Ut({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>It(()=>import("./cpp-30cc099a.js"),[])});Ut({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>It(()=>import("./cpp-30cc099a.js"),[])});Ut({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>It(()=>import("./csharp-0553c8db.js"),[])});Ut({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>It(()=>import("./csp-dbe8a1fa.js"),[])});Ut({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>It(()=>import("./css-64c40e4a.js"),[])});Ut({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>It(()=>import("./dart-4b7e6961.js"),[])});Ut({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>It(()=>import("./dockerfile-1b41f08d.js"),[])});Ut({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>It(()=>import("./ecl-eaf29bcc.js"),[])});Ut({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>It(()=>import("./elixir-4f68332f.js"),[])});Ut({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>It(()=>import("./flow9-6536bbb8.js"),[])});Ut({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>It(()=>import("./fsharp-d4a13be8.js"),[])});Ut({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>It(()=>import("./go-514c6bed.js"),[])});Ut({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>It(()=>import("./graphql-dcd71327.js"),[])});Ut({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>It(()=>import("./handlebars-e15b1ca7.js"),[])});Ut({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>It(()=>import("./hcl-69c09a16.js"),[])});Ut({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>It(()=>import("./html-1fcc3bd7.js"),[])});Ut({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>It(()=>import("./ini-ddcf22bb.js"),[])});Ut({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>It(()=>import("./java-7b3bef9f.js"),[])});Ut({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>It(()=>import("./javascript-9f0a829c.js"),["assets/javascript-9f0a829c.js","assets/typescript-57bb8e8c.js"])});Ut({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>It(()=>import("./julia-d49177e7.js"),[])});Ut({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>It(()=>import("./kotlin-12177a5b.js"),[])});Ut({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>It(()=>import("./less-dd974dd5.js"),[])});Ut({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>It(()=>import("./lexon-7236519e.js"),[])});Ut({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>It(()=>import("./lua-de05fd08.js"),[])});Ut({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>It(()=>import("./liquid-f90a79d3.js"),[])});Ut({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>It(()=>import("./m3-ceb8ffc4.js"),[])});Ut({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>It(()=>import("./markdown-6a6346da.js"),[])});Ut({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>It(()=>import("./mips-6fb0802a.js"),[])});Ut({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>It(()=>import("./msdax-bf1578ea.js"),[])});Ut({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>It(()=>import("./mysql-4cfd205e.js"),[])});Ut({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>It(()=>import("./objective-c-fadd4d71.js"),[])});Ut({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>It(()=>import("./pascal-4479a90f.js"),[])});Ut({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>It(()=>import("./pascaligo-7d1a5852.js"),[])});Ut({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>It(()=>import("./perl-4a4b182f.js"),[])});Ut({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>It(()=>import("./pgsql-e04cad37.js"),[])});Ut({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>It(()=>import("./php-f332f715.js"),[])});Ut({id:"pla",extensions:[".pla"],loader:()=>It(()=>import("./pla-649d56b2.js"),[])});Ut({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>It(()=>import("./postiats-52f8c4e6.js"),[])});Ut({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>It(()=>import("./powerquery-ee00e87c.js"),[])});Ut({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>It(()=>import("./powershell-d33e9d1b.js"),[])});Ut({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>It(()=>import("./protobuf-16b10ef3.js"),[])});Ut({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>It(()=>import("./pug-768921d2.js"),[])});Ut({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>It(()=>import("./python-4be49007.js"),[])});Ut({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>It(()=>import("./qsharp-c7533acc.js"),[])});Ut({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>It(()=>import("./r-d1be5f1d.js"),[])});Ut({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>It(()=>import("./razor-c533600f.js"),[])});Ut({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>It(()=>import("./redis-bd6165ff.js"),[])});Ut({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>It(()=>import("./redshift-c705624d.js"),[])});Ut({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>It(()=>import("./restructuredtext-947094fa.js"),[])});Ut({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>It(()=>import("./ruby-1816fcd8.js"),[])});Ut({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>It(()=>import("./rust-c4db2e19.js"),[])});Ut({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>It(()=>import("./sb-adba4cc1.js"),[])});Ut({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>It(()=>import("./scala-af9b4756.js"),[])});Ut({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>It(()=>import("./scheme-812b9ffd.js"),[])});Ut({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>It(()=>import("./scss-b21c6880.js"),[])});Ut({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>It(()=>import("./shell-a62a83b7.js"),[])});Ut({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>It(()=>import("./solidity-9a528bff.js"),[])});Ut({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>It(()=>import("./sophia-dc39a193.js"),[])});Ut({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>It(()=>import("./sparql-658eb489.js"),[])});Ut({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>It(()=>import("./sql-233b53ac.js"),[])});Ut({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>It(()=>import("./st-27efd63b.js"),[])});Ut({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>It(()=>import("./swift-a2a125fe.js"),[])});Ut({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>It(()=>import("./systemverilog-8bcc1c37.js"),[])});Ut({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>It(()=>import("./systemverilog-8bcc1c37.js"),[])});Ut({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>It(()=>import("./tcl-5c798828.js"),[])});Ut({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>It(()=>import("./twig-5245532a.js"),[])});Ut({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>It(()=>import("./typescript-57bb8e8c.js"),[])});Ut({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>It(()=>import("./vb-818b3fb1.js"),[])});Ut({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>It(()=>import("./xml-1563b54a.js"),[])});Ut({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>It(()=>import("./yaml-eee3d8e3.js"),[])});var GKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},YKe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},BB=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const WB=new Dt("selectionAnchorSet",!1);let Rp=class Dge{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=WB.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(Dge.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:yt.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Mp().appendText(C("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),To(C("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(yt.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Rp.ID="editor.contrib.selectionAnchorController";Rp=GKe([YKe(1,cn)],Rp);class ZKe extends Et{constructor(){super({id:"editor.action.setSelectionAnchor",label:C("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2080),weight:100}})}run(e,t){return BB(this,void 0,void 0,function*(){Rp.get(t).setSelectionAnchor()})}}class XKe extends Et{constructor(){super({id:"editor.action.goToSelectionAnchor",label:C("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:WB})}run(e,t){return BB(this,void 0,void 0,function*(){Rp.get(t).goToSelectionAnchor()})}}class QKe extends Et{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:C("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:WB,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2089),weight:100}})}run(e,t){return BB(this,void 0,void 0,function*(){Rp.get(t).selectFromAnchorToCursor()})}}class JKe extends Et{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:C("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:WB,kbOpts:{kbExpr:de.editorTextFocus,primary:9,weight:100}})}run(e,t){return BB(this,void 0,void 0,function*(){Rp.get(t).cancelSelectionAnchor()})}}ki(Rp.ID,Rp);it(ZKe);it(XKe);it(QKe);it(JKe);const eqe=we("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},C("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class tqe extends Et{constructor(){super({id:"editor.action.jumpToBracket",label:C("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=Xh.get(t);n&&n.jumpToBracket()}}class nqe extends Et{constructor(){super({id:"editor.action.selectToBracket",label:C("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const r=Xh.get(t);if(!r)return;let s=!0;n&&n.selectBrackets===!1&&(s=!1),r.selectToBracket(s)}}class iqe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class Xh extends Oe{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new er(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(Xh.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const r=n.getStartPosition(),s=e.bracketPairs.matchBracket(r);let o=null;if(s)s[0].containsPosition(r)?o=s[1].getStartPosition():s[1].containsPosition(r)&&(o=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(r);if(a)o=a[0].getStartPosition();else{const u=e.bracketPairs.findNextBracket(r);u&&u.range&&(o=u.range.getStartPosition())}}return o?new yt(o.lineNumber,o.column,o.lineNumber,o.column):new yt(r.lineNumber,r.column,r.lineNumber,r.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(r=>{const s=r.getStartPosition();let o=t.bracketPairs.matchBracket(s);if(!o&&(o=t.bracketPairs.findEnclosingBrackets(s),!o)){const d=t.bracketPairs.findNextBracket(s);d&&d.range&&(o=t.bracketPairs.matchBracket(d.range.getStartPosition()))}let a=null,u=null;if(o){o.sort(Q.compareRangesUsingStarts);const[d,h]=o;if(a=e?d.getStartPosition():d.getEndPosition(),u=e?h.getEndPosition():h.getStartPosition(),h.containsPosition(s)){const f=a;a=u,u=f}}a&&u&&n.push(new yt(a.lineNumber,a.column,u.lineNumber,u.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let r=n.brackets;r&&(e[t++]={range:r[0],options:n.options},e[t++]={range:r[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let r=[];this._lastVersionId===n&&(r=this._lastBracketsData);let s=[],o=0;for(let f=0,p=e.length;f<p;f++){let m=e[f];m.isEmpty()&&(s[o++]=m.getStartPosition())}s.length>1&&s.sort(Le.compare);let a=[],u=0,d=0,h=r.length;for(let f=0,p=s.length;f<p;f++){let m=s[f];for(;d<h&&r[d].position.isBefore(m);)d++;if(d<h&&r[d].position.equals(m))a[u++]=r[d];else{let v=t.bracketPairs.matchBracket(m),b=Xh._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!v&&this._matchBrackets==="always"&&(v=t.bracketPairs.findEnclosingBrackets(m,20),b=Xh._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[u++]=new iqe(m,v,b)}}this._lastBracketsData=a,this._lastVersionId=n}}Xh.ID="editor.contrib.bracketMatchingController";Xh._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=En.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Lr(eqe),position:yl.Center}});Xh._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=En.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});ki(Xh.ID,Xh);it(nqe);it(tqe);hr((i,e)=>{const t=i.getColor(w2e);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=i.getColor(ode);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});ra.appendMenuItem(Mt.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:C({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class rqe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,r=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&r===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const o=new Q(n,r-1,n,r),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new Q(n,s,n,s),a)}else{const o=new Q(n,s,n,s+1),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new Q(n,r,n,r),a)}}computeCursorState(e,t){return this._isMovingLeft?new yt(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new yt(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class Ige extends Et{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],r=t.getSelections();for(const s of r)n.push(new rqe(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class sqe extends Ige{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:C("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:de.writable})}}class oqe extends Ige{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:C("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:de.writable})}}it(sqe);it(oqe);class aqe extends Et{constructor(){super({id:"editor.action.transposeLetters",label:C("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=[],s=t.getSelections();for(let o of s){if(!o.isEmpty())continue;let a=o.startLineNumber,u=o.startColumn,d=n.getLineMaxColumn(a);if(a===1&&(u===1||u===2&&d===2))continue;let h=u===d?o.getPosition():pi.rightPosition(n,o.getPosition().lineNumber,o.getPosition().column),f=pi.leftPosition(n,h),p=pi.leftPosition(n,f),m=n.getValueInRange(Q.fromPositions(p,f)),v=n.getValueInRange(Q.fromPositions(f,h)),b=Q.fromPositions(p,h);r.push(new xo(b,v+m))}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}}it(aqe);var lqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const zb="9_cutcopypaste",uqe=Kh||document.queryCommandSupported("cut"),Tge=Kh||document.queryCommandSupported("copy"),cqe=typeof navigator.clipboard>"u"||wl?document.queryCommandSupported("paste"):!0;function WY(i){return i.register(),i}const dqe=uqe?WY(new PS({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Kh?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:Mt.MenubarEditMenu,group:"2_ccp",title:C({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Mt.EditorContext,group:zb,title:C("actions.clipboard.cutLabel","Cut"),when:de.writable,order:1},{menuId:Mt.CommandPalette,group:"",title:C("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Mt.SimpleEditorContext,group:zb,title:C("actions.clipboard.cutLabel","Cut"),when:de.writable,order:1}]})):void 0,hqe=Tge?WY(new PS({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Kh?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:Mt.MenubarEditMenu,group:"2_ccp",title:C({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Mt.EditorContext,group:zb,title:C("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Mt.CommandPalette,group:"",title:C("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Mt.SimpleEditorContext,group:zb,title:C("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;ra.appendMenuItem(Mt.MenubarEditMenu,{submenu:Mt.MenubarCopy,title:{value:C("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});ra.appendMenuItem(Mt.EditorContext,{submenu:Mt.EditorContextCopy,title:{value:C("copy as","Copy As"),original:"Copy As"},group:zb,order:3});const q6=cqe?WY(new PS({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Kh?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:Mt.MenubarEditMenu,group:"2_ccp",title:C({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Mt.EditorContext,group:zb,title:C("actions.clipboard.pasteLabel","Paste"),when:de.writable,order:4},{menuId:Mt.CommandPalette,group:"",title:C("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Mt.SimpleEditorContext,group:zb,title:C("actions.clipboard.pasteLabel","Paste"),when:de.writable,order:4}]})):void 0;class fqe extends Et{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:C("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||(jH.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),jH.forceCopyWithSyntaxHighlighting=!1)}}function kge(i,e){i&&(i.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(Ti).getFocusedCodeEditor();if(r&&r.hasTextFocus()){const s=r.getOption(32),o=r.getSelection();return o&&o.isEmpty()&&!s||document.execCommand(e),!0}return!1}),i.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}kge(dqe,"cut");kge(hqe,"copy");q6&&(q6.addImplementation(1e4,"code-editor",(i,e)=>{const t=i.get(Ti),n=i.get(K0),r=t.getFocusedCodeEditor();return r&&r.hasTextFocus()?!document.execCommand("paste")&&RS?(()=>lqe(void 0,void 0,void 0,function*(){const o=yield n.readText();if(o!==""){const a=FA.INSTANCE.get(o);let u=!1,d=null,h=null;a&&(u=r.getOption(32)&&!!a.isFromEmptySelection,d=typeof a.multicursorText<"u"?a.multicursorText:null,h=a.mode),r.trigger("keyboard","paste",{text:o,pasteOnNewLine:u,multicursorText:d,mode:h})}}))():!0:!1}),q6.addImplementation(0,"generic-dom",(i,e)=>(document.execCommand("paste"),!0)));Tge&&it(fqe);class Q3{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}class zn{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+zn.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new zn(this.value+zn.sep+e)}}zn.sep=".";zn.None=new zn("@@none@@");zn.Empty=new zn("");zn.QuickFix=new zn("quickfix");zn.Refactor=new zn("refactor");zn.Source=new zn("source");zn.SourceOrganizeImports=zn.Source.append("organizeImports");zn.SourceFixAll=zn.Source.append("fixAll");function gqe(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>Nge(e,t,i.include))||!i.includeSourceActions&&zn.Source.contains(e))}function pqe(i,e){const t=e.kind?new zn(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>Nge(t,n,i.include))||!i.includeSourceActions&&t&&zn.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function Nge(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class Wf{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Wf(t.kind,t.apply,!1):new Wf(Wf.getKindFromUser(e,t.kind),Wf.getApplyFromUser(e,t.apply),Wf.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new zn(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var VY=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Age="editor.action.codeAction",Oge="editor.action.refactor",Mge="editor.action.sourceAction",HY="editor.action.organizeImports",$Y="editor.action.fixAll";class Rge{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return VY(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(r){Ro(r)}n&&(this.action.edit=n.edit)}return this})}}class zY extends Oe{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(zY.codeActionsComparator),this.validActions=this.allActions.filter(({action:r})=>!r.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:vl(e.diagnostics)?vl(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:vl(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&zn.QuickFix.contains(new zn(e.kind))&&!!e.isPreferred)}}const Une={actions:[],documentation:void 0};function UY(i,e,t,n,r){var s;const o=t.filter||{},a={only:(s=o.include)===null||s===void 0?void 0:s.value,trigger:t.type},u=new EG(i,r),d=mqe(i,o),h=new Je,f=d.map(m=>VY(this,void 0,void 0,function*(){try{n.report(m);const v=yield m.provideCodeActions(i,e,a,u.token);if(v&&h.add(v),u.token.isCancellationRequested)return Une;const b=((v==null?void 0:v.actions)||[]).filter(S=>S&&pqe(o,S)),L=_qe(m,b,o.include);return{actions:b.map(S=>new Rge(S,m)),documentation:L}}catch(v){if(Cg(v))throw v;return Ro(v),Une}})),p=tg.onDidChange(()=>{const m=tg.all(i);rc(m,d)||u.cancel()});return Promise.all(f).then(m=>{const v=$ue(m.map(L=>L.actions)),b=FS(m.map(L=>L.documentation));return new zY(v,b,h)}).finally(()=>{p.dispose(),u.dispose()})}function mqe(i,e){return tg.all(i).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>gqe(e,new zn(n))):!0)}function _qe(i,e,t){if(!i.documentation)return;const n=i.documentation.map(r=>({kind:new zn(r.kind),command:r.command}));if(t){let r;for(const s of n)s.kind.contains(t)&&(r?r.kind.contains(s.kind)&&(r=s):r=s);if(r)return r==null?void 0:r.command}for(const r of e)if(r.kind){for(const s of n)if(s.kind.contains(new zn(r.kind)))return s.command}}Xn.registerCommand("_executeCodeActionProvider",function(i,e,t,n,r){return VY(this,void 0,void 0,function*(){if(!(e instanceof rn))throw jh();const s=i.get(Ds).getModel(e);if(!s)throw jh();const o=yt.isISelection(t)?yt.liftSelection(t):Q.isIRange(t)?s.validateRange(t):void 0;if(!o)throw jh();const a=typeof n=="string"?new zn(n):void 0,u=yield UY(s,o,{type:1,filter:{includeSourceActions:!0,include:a}},xC.None,Fn.None),d=[],h=Math.min(u.validActions.length,typeof r=="number"?r:0);for(let f=0;f<h;f++)d.push(u.validActions[f].resolve(Fn.None));try{return yield Promise.all(d),u.validActions.map(f=>f.action)}finally{setTimeout(()=>u.dispose(),100)}})});var vqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Fu=class rU{constructor(e,t){this._messageWidget=new Oa,this._messageListeners=new Je,this._editor=e,this._visible=rU.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(rU.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){To(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new jne(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Ma(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(r=>{r.target.position&&(n?n.containsPosition(r.target.position)||this.closeMessage():n=new Q(t.lineNumber-3,1,r.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(jne.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(C("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Fu.ID="editor.contrib.messageController";Fu.MESSAGE_VISIBLE=new Dt("messageVisible",!1,C("messageVisible","Whether the editor is currently showing an inline message"));Fu=vqe([bqe(1,cn)],Fu);const Cqe=Po.bindToContribution(Fu.get);nt(new Cqe({id:"leaveEditorMessage",precondition:Fu.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let jne=class{constructor(e,{lineNumber:t,column:n},r){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const o=document.createElement("div");o.classList.add("message"),o.textContent=r,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};ki(Fu.ID,Fu);var wqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Kne=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},yqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class qne extends ic{constructor(e,t){super(e.command?e.command.id:e.title,Sqe(e.title),void 0,!e.disabled,t),this.action=e}}function Sqe(i){return i.replace(/\r\n|\r|\n/g," ")}let sU=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new Oa),this._keybindingResolver=new VB({getKeybindings:()=>r.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,r){return yqe(this,void 0,void 0,function*(){const s=r.includeDisabledActions?t.allActions:t.validActions;if(!s.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,_C();this._visible=!0,this._showingActions.value=t;const o=this.getMenuActions(e,s,t.documentation),a=Le.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},u=this._keybindingResolver.getResolver(),d=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>o,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof qne?u(h.action):void 0})})}getMenuActions(e,t,n){var r,s;const o=h=>new qne(h.action,()=>this._delegate.onSelectCodeAction(h)),a=t.map(o),u=[...n],d=this._editor.getModel();if(d&&a.length)for(const h of tg.all(d))h._getAdditionalMenuItems&&u.push(...h._getAdditionalMenuItems({trigger:e.type,only:(s=(r=e.filter)===null||r===void 0?void 0:r.include)===null||s===void 0?void 0:s.value},t.map(f=>f.action)));return u.length&&a.push(new Zc,...u.map(h=>o(new Rge({title:h.title,command:h},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Uo(this._editor.getDomNode()),r=n.left+t.left,s=n.top+t.top+t.height;return{x:r,y:s}}};sU=wqe([Kne(2,j0),Kne(3,Sr)],sU);class VB{constructor(e){this._keybindingProvider=e}getResolver(){const e=new Q3(()=>this._keybindingProvider.getKeybindings().filter(t=>VB.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===HY?n={kind:zn.SourceOrganizeImports.value}:t.command===$Y&&(n={kind:zn.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Wf.fromUser(n,{kind:zn.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new zn(e.kind);return t.filter(r=>r.kind.contains(n)).filter(r=>r.preferred?e.isPreferred:!0).reduceRight((r,s)=>r?r.kind.contains(s.kind)?s:r:s,void 0)}}VB.codeActionCommands=[Oge,Age,Mge,HY,$Y];var Lqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Eqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},G2;(function(i){i.Hidden={type:0};class e{constructor(n,r,s,o){this.actions=n,this.trigger=r,this.editorPosition=s,this.widgetPosition=o,this.type=1}}i.Showing=e})(G2||(G2={}));let J3=class Pge extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=r,this._onClick=this._register(new Ce),this.onClick=this._onClick.event,this._state=G2.Hidden,this._domNode=document.createElement("div"),this._domNode.className=_e.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(s=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),Hi.ignoreTarget(this._domNode),this._register(bEe(this._domNode,s=>{if(this.state.type!==1)return;this._editor.focus(),s.preventDefault();const{top:o,height:a}=Uo(this._domNode),u=this._editor.getOption(58);let d=Math.floor(u/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(d+=u),this._onClick.fire({x:s.posx,y:o+a+d,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Ge(this._domNode,"mouseenter",s=>{if((s.buttons&1)!==1)return;this.hide();const o=new SC;o.startMonitoring(s.target,s.buttons,WS,()=>{},()=>{o.dispose()})})),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const r=this._editor.getOptions();if(!r.get(56).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:o,column:a}=s.validatePosition(n),u=s.getOptions().tabSize,d=r.get(43),h=s.getLineContent(o),f=Sl.computeIndentLevel(h,u),p=d.spaceWidth*f>22,m=b=>b>2&&this._editor.getTopForLineNumber(b)===this._editor.getTopForLineNumber(b-1);let v=o;if(!p){if(o>1&&!m(o-1))v-=1;else if(!m(o+1))v+=1;else if(a*d.spaceWidth<22)return this.hide()}this.state=new G2.Showing(e,t,n,{position:{lineNumber:v,column:1},preference:Pge._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=G2.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(..._e.lightBulb.classNamesArray),this._domNode.classList.add(..._e.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=C("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(..._e.lightbulbAutofix.classNamesArray),this._domNode.classList.add(..._e.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=C("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=C("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};J3._posPref=[0];J3=Lqe([Eqe(3,Sr)],J3);hr((i,e)=>{var t;const n=(t=i.getColor(sc))===null||t===void 0?void 0:t.transparent(.7),r=i.getColor(yIe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${_e.lightBulb.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`);const s=i.getColor(SIe);s&&e.addRule(`
		.monaco-editor .contentWidgets ${_e.lightbulbAutofix.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`)});var xqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Dqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},G6=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},Iqe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},Tqe=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},y4;let oU=class extends Oe{constructor(e,t,n,r,s){super(),this._editor=e,this.delegate=r,this._activeCodeActions=this._register(new Oa),y4.set(this,!1),this._codeActionWidget=new Q3(()=>this._register(s.createInstance(sU,this._editor,{onSelectCodeAction:o=>G6(this,void 0,void 0,function*(){this.delegate.applyCodeAction(o,!0)})}))),this._lightBulbWidget=new Q3(()=>{const o=this._register(s.createInstance(J3,this._editor,t,n));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),o})}dispose(){Iqe(this,y4,!0,"f"),super.dispose()}update(e){var t,n,r;return G6(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let s;try{s=yield e.actions}catch(o){gn(o);return}if(!Tqe(this,y4,"f"))if(this._lightBulbWidget.getValue().update(s,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,s);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{s.dispose()}return}if(e.trigger.context){const u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,s);if(u&&u.action.disabled){Fu.get(this._editor).showMessage(u.action.disabled,e.trigger.context.position),s.dispose();return}}}const o=!!(!((r=e.trigger.filter)===null||r===void 0)&&r.include);if(e.trigger.context&&(!s.allActions.length||!o&&!s.validActions.length)){Fu.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=s,s.dispose();return}this._activeCodeActions.value=s,this._codeActionWidget.getValue().show(e.trigger,s,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?s.dispose():this._activeCodeActions.value=s})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,r){return G6(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,r)})}};y4=new WeakMap;oU=xqe([Dqe(4,Nn)],oU);var Y6=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},kqe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},vw;const Fge=new Dt("supportedCodeAction","");class Nqe extends Oe{constructor(e,t,n,r=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=r,this._autoTriggerTimer=this._register(new Ma),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>Ace(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const r=t.validateRange(n);if(Q.intersectRanges(r,e))return Q.lift(r)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:r,column:s}=n.getPosition(),o=t.getLineContent(r);if(o.length===0)return;if(s===1){if(/\s/.test(o[0]))return}else if(s===t.getLineMaxColumn(r)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[s-2])&&/\s/.test(o[s-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const r=this._getRangeOfMarker(t),s=r?r.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:s};return this._signalChange(o),o}}var D1;(function(i){i.Empty={type:0};class e{constructor(n,r,s,o){this.trigger=n,this.rangeOrSelection=r,this.position=s,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(Cg(a))return Aqe;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(D1||(D1={}));const Aqe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class Oqe extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._markerService=t,this._progressService=r,this._codeActionOracle=this._register(new Oa),this._state=D1.Empty,this._onDidChangeState=this._register(new Ce),this.onDidChangeState=this._onDidChangeState.event,vw.set(this,!1),this._supportedCodeActions=Fge.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(tg.onDidChange(()=>this._update())),this._update()}dispose(){Y6(this,vw,"f")||(kqe(this,vw,!0,"f"),super.dispose(),this.setState(D1.Empty,!0))}_update(){if(Y6(this,vw,"f"))return;this._codeActionOracle.value=void 0,this.setState(D1.Empty);const e=this._editor.getModel();if(e&&tg.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of tg.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new Nqe(this._editor,this._markerService,n=>{var r;if(!n){this.setState(D1.Empty);return}const s=uo(o=>UY(e,n.selection,n.trigger,xC.None,o));n.trigger.type===1&&((r=this._progressService)===null||r===void 0||r.showWhile(s,250)),this.setState(new D1.Triggered(n.trigger,n.selection,n.position,s))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!Y6(this,vw,"f")&&this._onDidChangeState.fire(e))}}vw=new WeakMap;var Mqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},uP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Bge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function MM(i){return _t.regex(Fge.keys()[0],new RegExp("(\\s|^)"+dc(i.value)+"\\b"))}const jY={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:C("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:C("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[C("args.schema.apply.first","Always apply the first returned code action."),C("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),C("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:C("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let Ub=class Wge extends Oe{constructor(e,t,n,r,s){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new Oqe(this._editor,t,n,r)),this._register(this._model.onDidChangeState(o=>this.update(o))),this._ui=new Q3(()=>this._register(new oU(e,eL.Id,RM.Id,{applyCodeAction:(o,a)=>Bge(this,void 0,void 0,function*(){try{yield this._applyCodeAction(o)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(Wge.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Fu.get(this._editor).closeMessage();const r=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(Rqe,e,this._editor)}};Ub.ID="editor.contrib.quickFixController";Ub=Mqe([uP(1,xM),uP(2,cn),uP(3,$p),uP(4,Nn)],Ub);function Rqe(i,e,t){return Bge(this,void 0,void 0,function*(){const n=i.get(xG),r=i.get(Tr),s=i.get(wg),o=i.get(gs);if(s.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Fn.None),e.action.edit&&(yield n.apply(X8.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const u=Pqe(a);o.error(typeof u=="string"?u:C("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function Pqe(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function MC(i,e,t,n){if(i.hasModel()){const r=Ub.get(i);r&&r.manualTriggerAtCurrentPosition(e,t,n)}}class eL extends Et{constructor(){super({id:eL.Id,label:C("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:2132,weight:100}})}run(e,t){return MC(t,C("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}eL.Id="editor.action.quickFix";class Fqe extends Po{constructor(){super({id:Age,precondition:_t.and(de.writable,de.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:jY}]}})}runEditorCommand(e,t,n){const r=Wf.fromUser(n,{kind:zn.Empty,apply:"ifSingle"});return MC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):C("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):r.preferred?C("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):C("editor.action.codeAction.noneMessage","No code actions available"),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class Bqe extends Et{constructor(){super({id:Oge,label:C("refactor.label","Refactor..."),alias:"Refactor...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:_t.and(de.writable,MM(zn.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:jY}]}})}run(e,t,n){const r=Wf.fromUser(n,{kind:zn.Refactor,apply:"never"});return MC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):C("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):r.preferred?C("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):C("editor.action.refactor.noneMessage","No refactorings available"),{include:zn.Refactor.contains(r.kind)?r.kind:zn.None,onlyIncludePreferredActions:r.preferred},r.apply)}}class Wqe extends Et{constructor(){super({id:Mge,label:C("source.label","Source Action..."),alias:"Source Action...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:_t.and(de.writable,MM(zn.Source))},description:{description:"Source Action...",args:[{name:"args",schema:jY}]}})}run(e,t,n){const r=Wf.fromUser(n,{kind:zn.Source,apply:"never"});return MC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):C("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):r.preferred?C("editor.action.source.noneMessage.preferred","No preferred source actions available"):C("editor.action.source.noneMessage","No source actions available"),{include:zn.Source.contains(r.kind)?r.kind:zn.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class Vqe extends Et{constructor(){super({id:HY,label:C("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:_t.and(de.writable,MM(zn.SourceOrganizeImports)),kbOpts:{kbExpr:de.editorTextFocus,primary:1581,weight:100}})}run(e,t){return MC(t,C("editor.action.organize.noneMessage","No organize imports action available"),{include:zn.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class Hqe extends Et{constructor(){super({id:$Y,label:C("fixAll.label","Fix All"),alias:"Fix All",precondition:_t.and(de.writable,MM(zn.SourceFixAll))})}run(e,t){return MC(t,C("fixAll.noneMessage","No fix all action available"),{include:zn.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class RM extends Et{constructor(){super({id:RM.Id,label:C("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:_t.and(de.writable,MM(zn.QuickFix)),kbOpts:{kbExpr:de.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return MC(t,C("editor.action.autoFix.noneMessage","No auto fixes available"),{include:zn.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}RM.Id="editor.action.autoFix";ki(Ub.ID,Ub);it(eL);it(Bqe);it(Wqe);it(Vqe);it(RM);it(Hqe);nt(new Fqe);var Gne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class aU{constructor(){this.lenses=[],this._disposables=new Je}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function Vge(i,e){return Gne(this,void 0,void 0,function*(){const t=ip.ordered(i),n=new Map,r=new aU,s=t.map((o,a)=>Gne(this,void 0,void 0,function*(){n.set(o,a);try{const u=yield Promise.resolve(o.provideCodeLenses(i,e));u&&r.add(u,o)}catch(u){Ro(u)}}));return yield Promise.all(s),r.lenses=r.lenses.sort((o,a)=>o.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:o.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:n.get(o.provider)<n.get(a.provider)?-1:n.get(o.provider)>n.get(a.provider)?1:o.symbol.range.startColumn<a.symbol.range.startColumn?-1:o.symbol.range.startColumn>a.symbol.range.startColumn?1:0),r})}Xn.registerCommand("_executeCodeLensProvider",function(i,...e){let[t,n]=e;Gi(rn.isUri(t)),Gi(typeof n=="number"||!n);const r=i.get(Ds).getModel(t);if(!r)throw jh();const s=[],o=new Je;return Vge(r,Fn.None).then(a=>{o.add(a);let u=[];for(const d of a.lenses)n==null||d.symbol.command?s.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&u.push(Promise.resolve(d.provider.resolveCodeLens(r,d.symbol,Fn.None)).then(h=>s.push(h||d.symbol)));return Promise.all(u)}).then(()=>s).finally(()=>{setTimeout(()=>o.dispose(),100)})});var $qe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Hge=gi("ICodeLensCache");class Yne{constructor(e,t){this.lineCount=e,this.data=t}}let lU=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new z0(20,.75);const t="codelens/cache";bA(()=>e.remove(t,1));const n="codelens/cache2",r=e.get(n,1,"{}");this._deserialize(r),kp(e.onWillSaveState)(s=>{s.reason===V3.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(o=>{var a;return{range:o.symbol.range,command:o.symbol.command&&{id:"",title:(a=o.symbol.command)===null||a===void 0?void 0:a.title}}}),r=new aU;r.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new Yne(e.getLineCount(),r);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const r=new Set;for(const s of n.data.lenses)r.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...r.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const r=t[n],s=[];for(const a of r.lines)s.push({range:new Q(a,1,a,11)});const o=new aU;o.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new Yne(r.lineCount,o))}}catch{}}};lU=$qe([zqe(0,Dg)],lU);U0(Hge,lU);class Uqe{constructor(e,t,n){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class HB{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${HB._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],r=!1;for(let s=0;s<e.length;s++){const o=e[s];if(o&&(r=!0,o.command)){const a=ob(o.command.title.trim());o.command.id?(n.push(qe("a",{id:String(s),title:o.command.tooltip},...a)),this._commands.set(String(s),o.command)):n.push(qe("span",{title:o.command.tooltip},...a)),s+1<e.length&&n.push(qe("span",void 0,"|"))}}r?(v0(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):v0(this._domNode,qe("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}HB._idPool=0;class Z6{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,r=t.length;n<r;n++)this._addDecorationsCallbacks[n](t[n])}}class Zne{constructor(e,t,n,r,s,o,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let u,d=[];this._data.forEach((h,f)=>{h.symbol.command&&d.push(h.symbol),r.addDecoration({range:h.symbol.range,options:En.EMPTY},p=>this._decorationIds[f]=p),u?u=Q.plusRange(u,h.symbol.range):u=Q.lift(h.symbol.range)}),this._viewZone=new Uqe(u.startLineNumber-1,o,a),this._viewZoneId=s.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new HB(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),r=this._data[t].symbol;return!!(n&&Q.isEmpty(r.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,r)=>{t.addDecoration({range:n.symbol.range,options:En.EMPTY},s=>this._decorationIds[r]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:r}=this._data[t];r.command=n.command||r.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}var jqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},X6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Kqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let aS=class{constructor(e,t,n,r){this._editor=e,this._commandService=t,this._notificationService=n,this._codeLensCache=r,this._disposables=new Je,this._localToDispose=new Je,this._lenses=[],this._getCodeLensModelDelays=new UF(ip,250,2500),this._oldCodeLensModels=new Je,this._resolveCodeLensesDelays=new UF(ip,250,2500),this._resolveCodeLensesScheduler=new er(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(43)||s.hasChanged(16)||s.hasChanged(15))&&this._updateLensStyle(),s.hasChanged(14)&&this._onModelChange()})),this._disposables.add(ip.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+Vce(this._editor.getId()).toString(16),this._styleElement=uc(h8(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(45)*.9|0,t=this._editor.getOption(58)):t=e*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),r=this._editor.getOption(43),s=`--codelens-font-family${this._styleClassName}`,o=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${o}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${s}), ${jo.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(s,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(o,r.fontFeatureSettings),this._editor.changeViewZones(u=>{for(let d of this._lenses)d.updateHeight(e,u)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!ip.has(e)){t&&this._localToDispose.add(wb(()=>{const r=this._codeLensCache.get(e);t===r&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const r of ip.all(e))if(typeof r.onDidChange=="function"){let s=r.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new er(()=>{var r;const s=Date.now();(r=this._getCodeLensModelPromise)===null||r===void 0||r.cancel(),this._getCodeLensModelPromise=uo(o=>Vge(e,o)),this._getCodeLensModelPromise.then(o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const a=this._getCodeLensModelDelays.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()},gn)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(n),this._localToDispose.add(Un(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(r=>{this._editor.changeViewZones(s=>{let o=[],a=-1;this._lenses.forEach(d=>{!d.isValid()||a===d.getLineNumber()?o.push(d):(d.update(s),a=d.getLineNumber())});let u=new Z6;o.forEach(d=>{d.dispose(u,s),this._lenses.splice(this._lenses.indexOf(d),1)}),u.commit(r)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(r=>{r.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Un(()=>{if(this._editor.getModel()){const r=E0.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(o=>{this._disposeAllLenses(s,o)})}),r.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(r=>{if(r.target.type!==9)return;let s=r.target.element;if((s==null?void 0:s.tagName)==="SPAN"&&(s=s.parentElement),(s==null?void 0:s.tagName)==="A")for(const o of this._lenses){let a=o.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(u=>this._notificationService.error(u));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new Z6;for(const r of this._lenses)r.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],r;for(let a of e.lenses){let u=a.symbol.range.startLineNumber;u<1||u>t||(r&&r[r.length-1].symbol.range.startLineNumber===u?r.push(a):(r=[a],n.push(r)))}const s=E0.capture(this._editor),o=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(u=>{const d=new Z6;let h=0,f=0;for(;f<n.length&&h<this._lenses.length;){let p=n[f][0].symbol.range.startLineNumber,m=this._lenses[h].getLineNumber();m<p?(this._lenses[h].dispose(d,u),this._lenses.splice(h,1)):m===p?(this._lenses[h].updateCodeLensSymbols(n[f],d),f++,h++):(this._lenses.splice(h,0,new Zne(n[f],this._editor,this._styleClassName,d,u,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++,f++)}for(;h<this._lenses.length;)this._lenses[h].dispose(d,u),this._lenses.splice(h,1);for(;f<n.length;)this._lenses.push(new Zne(n[f],this._editor,this._styleClassName,d,u,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),f++;d.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],r=[];if(this._lenses.forEach(a=>{const u=a.computeIfNecessary(t);u&&(n.push(u),r.push(a))}),n.length===0)return;const s=Date.now(),o=uo(a=>{const u=n.map((d,h)=>{const f=new Array(d.length),p=d.map((m,v)=>!m.symbol.command&&typeof m.provider.resolveCodeLens=="function"?Promise.resolve(m.provider.resolveCodeLens(t,m.symbol,a)).then(b=>{f[v]=b},Ro):(f[v]=m.symbol,Promise.resolve(void 0)));return Promise.all(p).then(()=>{!a.isCancellationRequested&&!r[h].isDisposed()&&r[h].updateCommands(f)})});return Promise.all(u)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDelays.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{gn(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};aS.ID="css.editor.codeLens";aS=jqe([X6(1,Tr),X6(2,gs),X6(3,Hge)],aS);ki(aS.ID,aS);it(class extends Et{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:de.hasCodeLensProvider,label:C("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return Kqe(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Cc),r=e.get(Tr),s=e.get(gs),o=t.getSelection().positionLineNumber,a=t.getContribution(aS.ID),u=[];for(let h of a.getLenses())if(h.getLineNumber()===o)for(let f of h.getItems()){const{command:p}=f.symbol;p&&u.push({label:p.title,command:p})}if(u.length===0)return;const d=yield n.pick(u,{canPickMany:!1});if(d)try{yield r.executeCommand(d.command.id,...d.command.arguments||[])}catch(h){s.error(h)}})}});function qqe(i,e){const t=[],r=qy.ordered(i).reverse().map(s=>Promise.resolve(s.provideDocumentColors(i,e)).then(o=>{if(Array.isArray(o))for(let a of o)t.push({colorInfo:a,provider:s})}));return Promise.all(r).then(()=>t)}function Xne(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}Xn.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof rn))throw jh();const n=i.get(Ds).getModel(t);if(!n)throw jh();const r=[],o=qy.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,Fn.None)).then(u=>{if(Array.isArray(u))for(let d of u)r.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(o).then(()=>r)});Xn.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:r,range:s}=n;if(!(r instanceof rn)||!Array.isArray(t)||t.length!==4||!Q.isIRange(s))throw jh();const[o,a,u,d]=t,h=i.get(Ds).getModel(r);if(!h)throw jh();const f={range:s,color:{red:o,green:a,blue:u,alpha:d}},p=[],v=qy.ordered(h).reverse().map(b=>Promise.resolve(b.provideColorPresentations(h,f,Fn.None)).then(L=>{Array.isArray(L)&&p.push(...L)}));return Promise.all(v).then(()=>p)});var Gqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Yqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Zqe=500;let jb=class $ge extends Oe{constructor(e,t){super(),this._editor=e,this._configurationService=t,this._localToDispose=this._register(new Je),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new Sce(this._editor),this._colorDecorationClassRefs=this._register(new Je),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(qy.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let n=this._isEnabled;this._isEnabled=this.isEnabled(),n!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const r=n.colorDecorators;if(r&&r.enable!==void 0&&!r.enable)return r.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!qy.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Ma,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},$ge.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=uo(e=>{const t=this._editor.getModel();return t?qqe(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},gn)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:En.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,r)=>this._colorDatas.set(n,e[r]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<Zqe;n++){const{red:r,green:s,blue:o,alpha:a}=e[n].colorInfo.color,u=new fi(Math.round(r*255),Math.round(s*255),Math.round(o*255),a);let d=`rgba(${u.r}, ${u.g}, ${u.b}, ${u.a})`;const h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:uxe,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(Q.fromPositions(e,e)).filter(r=>this._colorDatas.has(r.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};jb.ID="editor.contrib.colorDetector";jb.RECOMPUTE_TIME=1e3;jb=Gqe([Yqe(1,nr)],jb);ki(jb.ID,jb);function uU(i,e){return!!i[e]}class Q6{constructor(e,t){this.target=e.target,this.hasTriggerModifier=uU(e.event,t.triggerModifier),this.hasSideBySideModifier=uU(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Qne{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=uU(e,t.triggerModifier)}}class cP{constructor(e,t,n,r){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=r}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function Jne(i){return i==="altKey"?qn?new cP(57,"metaKey",6,"altKey"):new cP(5,"ctrlKey",6,"altKey"):qn?new cP(6,"altKey",57,"metaKey"):new cP(6,"altKey",5,"ctrlKey")}class zge extends Oe{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Ce),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Ce),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Ce),this.onCancel=this._onCancel.event,this._editor=e,this._opts=Jne(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=Jne(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new Q6(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new Q6(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new Q6(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new Qne(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new Qne(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var Xqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},a1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Kb=class extends GA{constructor(e,t,n,r,s,o,a,u,d,h){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},r,s,o,a,u,d,h),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(f=>this._onParentConfigurationChanged(f)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Lg(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Kb=Xqe([a1(3,Nn),a1(4,Ti),a1(5,Tr),a1(6,cn),a1(7,Er),a1(8,gs),a1(9,il)],Kb);const eie=new ye(new fi(0,122,204)),Qqe={showArrow:!0,showFrame:!0,className:"",frameColor:eie,arrowColor:eie,keepEditorSelection:!1},Jqe="vs.editor.contrib.zoneWidget";class eGe{constructor(e,t,n,r,s,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=r,this._onDomNodeTop=s,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class tGe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class $B{constructor(e){this._editor=e,this._ruleName=$B._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),iJ(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){iJ(this._ruleName),vH(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:Q.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}$B._IdGenerator=new rY(".arrow-decoration-");class nGe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new Je,this.container=null,this._isShowing=!1,this.editor=e,this.options=Xg(t),Lg(this.options,Qqe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const r=this._getWidth(n);this.domNode.style.width=r+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(r)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new $B(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=Q.isIRange(e)?Q.lift(e):Q.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:En.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),r=this.editor.getLayoutInfo(),s=this._getWidth(r);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(r)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(58),u=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,u);let d=0,h=0;if(this._arrow&&this.options.showArrow&&(d=Math.round(a/3),this._arrow.height=d,this._arrow.show(n)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(m=>{this._viewZone&&m.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new eGe(o,n.lineNumber,n.column,t,v=>this._onViewZoneTop(v),v=>this._onViewZoneHeight(v)),this._viewZone.id=m.addZone(this._viewZone),this._overlayWidget=new tGe(Jqe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const m=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=m+"px",this.container.style.borderBottomWidth=m+"px"}let f=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=d+"px",this.container.style.height=f+"px",this.container.style.overflow="hidden"),this._doLayout(f,s),this.options.keepEditorSelection||this.editor.setSelection(e);const p=this.editor.getModel();if(p){const m=e.endLineNumber+1;m<=p.getLineCount()?this.revealLine(m,!1):this.revealLine(p.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Ho(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),r=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+r;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class iGe extends $y{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Ce),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Be(e,qe(".monaco-dropdown")),this._label=Be(this._element,qe(".dropdown-label"));let n=t.labelRenderer;n||(n=s=>(s.textContent=t.label||"",null));for(const s of[Ht.CLICK,Ht.MOUSE_DOWN,lr.Tap])this._register(Ge(this.element,s,o=>Ni.stop(o,!0)));for(const s of[Ht.MOUSE_DOWN,lr.Tap])this._register(Ge(this._label,s,o=>{o instanceof MouseEvent&&o.detail>1||(this.visible?this.hide():this.show())}));this._register(Ge(this._label,Ht.KEY_UP,s=>{const o=new yr(s);(o.equals(3)||o.equals(10))&&(Ni.stop(s,!0),this.visible?this.hide():this.show())}));const r=n(this._label);r&&this._register(r),this._register(Hi.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class rGe extends iGe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class Uge extends kf{constructor(e,t,n,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new Ce),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=Be(s,qe("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new rGe(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var KY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Nf=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},jge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function sGe(i,e,t,n,r,s,o){const a=i.getActions(e);return aGe(a,t,!1,typeof n=="string"?d=>d===n:n,r,s,o),oGe(a)}function oGe(i){const e=new Je;for(const[,t]of i)for(const n of t)e.add(n);return e}function aGe(i,e,t,n=a=>a==="navigation",r=Number.MAX_SAFE_INTEGER,s=()=>!1,o=!1){let a,u;Array.isArray(e)?(a=e,u=e):(a=e.primary,u=e.secondary);const d=new Set;for(const[h,f]of i){let p;n(h)?(p=a,p.length>0&&o&&p.push(new Zc)):(p=u,p.length>0&&p.push(new Zc));for(let m of f){t&&(m=m instanceof C0&&m.alt?m.alt:m);const v=p.push(m);m instanceof f8&&d.add({group:h,action:m,index:v-1})}}for(const{group:h,action:f,index:p}of d){const m=n(h)?a:u,v=f.actions;(v.length<=1||m.length+v.length-2<=r)&&s(f,h,m.length)&&m.splice(p,1,...v)}if(a!==u&&a.length>r){const h=a.splice(r,a.length-r);u.unshift(...h,new Zc)}}let lS=class extends ZA{constructor(e,t,n,r,s){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=r,this._contextKeyService=s,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Oa),this._altKey=R1.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return jge(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(Ao||Xa)&&this._altKey.keyStatus.shiftKey;const r=()=>{const s=t&&n;s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(s=>{n=s.altKey||(Ao||Xa)&&s.shiftKey,r()})),this._register(Ge(e,"mouseleave",s=>{t=!1,r()})),this._register(Ge(e,"mouseenter",s=>{t=!0,r()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let r=t?C("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),u=a?C("titleAndKb","{0} ({1})",s,a):s;r+=`
[${IG.modifierLabels[qu].altKey}] ${u}`}this.label.title=r}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:r}=this;if(!n||!r)return;const s=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(s)if(pr.isThemeIcon(s)){const o=pr.asClassNameArray(s);r.classList.add(...o),this._itemClassDispose.value=Un(()=>{r.classList.remove(...o)})}else s.light&&r.style.setProperty("--menu-entry-icon-light",yb(s.light)),s.dark&&r.style.setProperty("--menu-entry-icon-dark",yb(s.dark)),r.classList.add("icon"),this._itemClassDispose.value=Un(()=>{r.classList.remove("icon"),r.style.removeProperty("--menu-entry-icon-light"),r.style.removeProperty("--menu-entry-icon-dark")})}};lS=KY([Nf(2,Sr),Nf(3,gs),Nf(4,cn)],lS);let cU=class extends Uge{constructor(e,t,n){var r,s;const o=Object.assign({},t??Object.create(null),{menuAsChild:(r=t==null?void 0:t.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(s=t==null?void 0:t.classNames)!==null&&s!==void 0?s:pr.isThemeIcon(e.item.icon)?pr.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,o)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!pr.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",yb(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",yb(t.dark)))}}};cU=KY([Nf(2,j0)],cU);let dU=class extends kf{constructor(e,t,n,r,s,o,a,u){var d,h,f;super(null,e),this._keybindingService=n,this._notificationService=r,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=u,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let p,m=u.get(this._storageKey,1);m&&(p=e.actions.find(b=>m===b.id)),p||(p=e.actions[0]),this._defaultAction=this._instaService.createInstance(lS,p,void 0);const v=Object.assign({},t??Object.create(null),{menuAsChild:(d=t==null?void 0:t.menuAsChild)!==null&&d!==void 0?d:!0,classNames:(h=t==null?void 0:t.classNames)!==null&&h!==void 0?h:["codicon","codicon-chevron-down"],actionRunner:(f=t==null?void 0:t.actionRunner)!==null&&f!==void 0?f:new $y});this._dropdown=new Uge(e,e.actions,this._contextMenuService,v),this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof C0&&this.update(b.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(lS,e,void 0),this._defaultAction.actionRunner=new class extends $y{runAction(t,n){return jge(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(kEe(this._container,qe(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=qe(".action-container");this._defaultAction.render(Be(this._container,t)),this._register(Ge(t,Ht.KEY_DOWN,r=>{const s=new yr(r);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=qe(".dropdown-action-container");this._dropdown.render(Be(this._container,n)),this._register(Ge(n,Ht.KEY_DOWN,r=>{var s;const o=new yr(r);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};dU=KY([Nf(2,Sr),Nf(3,gs),Nf(4,j0),Nf(5,CC),Nf(6,Nn),Nf(7,Dg)],dU);function lGe(i,e,t){return e instanceof C0?i.createInstance(lS,e,void 0):e instanceof xq?e.item.rememberDefaultAction?i.createInstance(dU,e,t):i.createInstance(cU,e,t):void 0}var Kge=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},qge=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Gge=gi("IPeekViewService");U0(Gge,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const r=this._widgets.get(i);r&&r.widget===e&&(r.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var El;(function(i){i.inPeekEditor=new Dt("inReferenceSearchEditor",!0,C("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(El||(El={}));let _O=class{constructor(e,t){e instanceof Kb&&El.inPeekEditor.bindTo(t)}dispose(){}};_O.ID="editor.contrib.referenceController";_O=Kge([qge(1,cn)],_O);ki(_O.ID,_O);function uGe(i){let e=i.get(Ti).getFocusedCodeEditor();return e instanceof Kb?e.getParentEditor():e}const cGe={headerBackgroundColor:ye.white,primaryHeadingColor:ye.fromHex("#333333"),secondaryHeadingColor:ye.fromHex("#6c6c6cb3")};let e5=class extends nGe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new Ce,this.onDidClose=this._onDidClose.event,Lg(this.options,cGe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=qe(".head"),this._bodyElement=qe(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=qe(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),eo(n,"click",o=>this._onTitleClick(o))),Be(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=qe("span.filename"),this._secondaryHeading=qe("span.dirname"),this._metaHeading=qe("span.meta"),Be(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const r=qe(".peekview-actions");Be(this._headElement,r);const s=this._getActionBarOptions();this._actionbarWidget=new ug(r,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new ic("peekview.close",C("label.close","Close"),_e.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:lGe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Hs(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Lu(this._metaHeading)):Ua(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),r=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(r,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};e5=Kge([qge(2,Nn)],e5);const dGe=we("peekViewTitle.background",{dark:tr(qh,.1),light:tr(qh,.1),hc:null},C("peekViewTitleBackground","Background color of the peek view title area.")),Yge=we("peekViewTitleLabel.foreground",{dark:ye.white,light:ye.black,hc:ye.white},C("peekViewTitleForeground","Color of the peek view title.")),Zge=we("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},C("peekViewTitleInfoForeground","Color of the peek view title info.")),hGe=we("peekView.border",{dark:qh,light:qh,hc:fs},C("peekViewBorder","Color of the peek view borders and arrow.")),fGe=we("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:ye.black},C("peekViewResultsBackground","Background color of the peek view result list."));var gGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class T0{constructor(e,t,n,r){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=r,this.id=Khe.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?C({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",fc(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):C("aria.oneReference","symbol in {0} on line {1} at column {2}",fc(this.uri),this.range.startLineNumber,this.range.startColumn)}}class pGe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:r,startColumn:s,endLineNumber:o,endColumn:a}=e,u=n.getWordUntilPosition({lineNumber:r,column:s-t}),d=new Q(r,u.startColumn,r,s),h=new Q(o,a,o,1073741824),f=n.getValueInRange(d).replace(/^\s+/,""),p=n.getValueInRange(e),m=n.getValueInRange(h).replace(/\s+$/,"");return{value:f+p+m,highlight:{start:f.length,end:f.length+p.length}}}}class vO{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new na}dispose(){ri(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?C("aria.fileReferences.1","1 symbol in {0}, full path {1}",fc(this.uri),this.uri.fsPath):C("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,fc(this.uri),this.uri.fsPath)}resolve(e){return gGe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new pGe(n))}catch(n){gn(n)}return this})}}class Cl{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Ce,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Cl._compareReferences);let r;for(let s of e)if((!r||!aa.isEqual(r.uri,s.uri,!0))&&(r=new vO(this,s.uri),this.groups.push(r)),r.children.length===0||Cl._compareReferences(s,r.children[r.children.length-1])!==0){const o=new T0(n===s,r,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),r.children.push(o)}}dispose(){ri(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Cl(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?C("aria.result.0","No results found"):this.references.length===1?C("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?C("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):C("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,r=n.children.indexOf(e),s=n.children.length,o=n.parent.groups.length;return o===1||t&&r+1<s||!t&&r>0?(t?r=(r+1)%s:r=(r+s-1)%s,n.children[r]):(r=n.parent.groups.indexOf(n),t?(r=(r+1)%o,n.parent.groups[r].children[0]):(r=(r+o-1)%o,n.parent.groups[r].children[n.parent.groups[r].children.length-1]))}nearestReference(e,t){const n=this.references.map((r,s)=>({idx:s,prefixLen:zy(r.uri.toString(),e.toString()),offsetDist:Math.abs(r.range.startLineNumber-t.lineNumber)*100+Math.abs(r.range.startColumn-t.column)})).sort((r,s)=>r.prefixLen>s.prefixLen?-1:r.prefixLen<s.prefixLen?1:r.offsetDist<s.offsetDist?-1:r.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&Q.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return aa.compare(e.uri,t.uri)||Q.compareRangesUsingStarts(e.range,t.range)}}function Xge(i){if(!i)return;typeof i=="string"&&(i=rn.file(i));const e=fc(i)||(i.scheme===Tn.file?i.fsPath:i.path);return Ao&&eke(e)?hU(e):e}function hU(i,e){return Nce(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}var zB=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bO=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let fU=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Cl||e instanceof vO}getChildren(e){if(e instanceof Cl)return e.groups;if(e instanceof vO)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};fU=zB([bO(0,Qa)],fU);class mGe{getHeight(){return 23}getTemplateId(e){return e instanceof vO?CO.id:PM.id}}let gU=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof T0){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return fc(e.uri)}};gU=zB([bO(0,Sr)],gU);class _Ge{getId(e){return e instanceof T0?e.id:e.uri}}let pU=class extends Oe{constructor(e,t,n){super(),this._uriLabel=t;const r=document.createElement("div");r.classList.add("reference-file"),this.file=this._register(new $3(r,{supportHighlights:!0})),this.badge=new yz(Be(r,qe(".count"))),this._register(w4e(this.badge,n)),e.appendChild(r)}set(e,t){let n=zq(e.uri);this.file.setLabel(Xge(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const r=e.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(C("referencesCount","{0} references",r)):this.badge.setTitleFormat(C("referenceCount","{0} reference",r))}};pU=zB([bO(1,yM),bO(2,Er)],pU);let CO=class Qge{constructor(e){this._instantiationService=e,this.templateId=Qge.id}renderTemplate(e){return this._instantiationService.createInstance(pU,e)}renderElement(e,t,n){n.set(e.element,oB(e.filterData))}disposeTemplate(e){e.dispose()}};CO.id="FileReferencesRenderer";CO=zB([bO(0,Nn)],CO);class vGe{constructor(e){this.label=new Wb(e)}set(e,t){var n;const r=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!r||!r.value)this.label.set(`${fc(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:o}=r;t&&!Yh.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,oB(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[o]))}}}class PM{constructor(){this.templateId=PM.id}renderTemplate(e){return new vGe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}PM.id="OneReferenceRenderer";class bGe{getWidgetAriaLabel(){return C("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var CGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Wg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},tie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class UB{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Je,this._callOnModelChange=new Je,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let s=0,o=e.children.length;s<o;s++){let a=e.children[s];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:UB.DecorationOptions}),n.push(s))}const r=this._editor.deltaDecorations([],t);for(let s=0;s<r.length;s++)this._decorations.set(r[s],e.children[n[s]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,r]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let o=!1;if(!Q.equalsRange(s,r.range)){if(Q.spansMultipleLines(s))o=!0;else{const a=r.range.endColumn-r.range.startColumn,u=s.endColumn-s.startColumn;a!==u&&(o=!0)}o?(this._decorationIgnoreSet.add(r.id),e.push(n)):r.range=s}}for(let n=0,r=e.length;n<r;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}UB.DecorationOptions=En.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class wGe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const r=JSON.parse(e);t=r.ratio,n=r.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class yGe extends _z{}let mU=class extends e5{constructor(e,t,n,r,s,o,a,u,d,h,f,p){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=o,this._peekViewService=a,this._uriLabel=u,this._undoRedoService=d,this._keybindingService=h,this._modeService=f,this._languageConfigurationService=p,this._disposeOnNewModel=new Je,this._callOnDispose=new Je,this._onDidSelectReference=new Ce,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new cr(0,0),this._applyTheme(r.getColorTheme()),this._callOnDispose.add(r.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),ri(this._preview),ri(this._previewNotAvailableMessage),ri(this._tree),ri(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(hGe)||ye.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(dGe)||ye.transparent,primaryHeadingColor:e.getColor(Yge),secondaryHeadingColor:e.getColor(Zge)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Be(e,qe("div.messages")),Ua(this._messageContainer),this._splitView=new Nhe(e,{orientation:1}),this._previewContainer=Be(e,qe("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Kb,this._previewContainer,t,this.editor),Ua(this._previewContainer),this._previewNotAvailableMessage=new Sl(C("missingPreviewMessage","no preview available"),Sl.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=Be(e,qe("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new bGe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(gU),identityProvider:new _Ge,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:fGe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(eo(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(yGe,"ReferencesWidget",this._treeContainer,new mGe,[this._instantiationService.createInstance(CO),this._instantiationService.createInstance(PM)],this._instantiationService.createInstance(fU),n),this._splitView.addView({onDidChange:Rt.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},R3.Distribute),this._splitView.addView({onDidChange:Rt.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},R3.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let r=(s,o)=>{s instanceof T0&&(o==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:o,source:"tree"}))};this._tree.onDidOpen(s=>{s.sideBySide?r(s.element,"side"):s.editorOptions.pinned?r(s.element,"goto"):r(s.element,"show")}),Ua(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new cr(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=C("noResults","No results"),Lu(this._messageContainer),Promise.resolve(void 0)):(Ua(this._messageContainer),this._decorationsManager=new UB(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const r=this._getFocusedReference();r&&this._onDidSelectReference.fire({element:{uri:r.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Lu(this._treeContainer),Lu(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof T0)return e;if(e instanceof vO&&e.children.length>0)return e.children[0]}revealReference(e){return tie(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return tie(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Tn.inMemory?this.setTitle(Oce(e.uri),this._uriLabel.getUriLabel(zq(e.uri))):this.setTitle(C("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const r=yield n;if(!this._model){r.dispose();return}ri(this._previewModelReference);const s=r.object;if(s){const o=this._preview.getModel()===s.textEditorModel?0:1,a=Q.lift(e.range).collapseToStart();this._previewModelReference=r,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),r.dispose()})}};mU=CGe([Wg(3,Er),Wg(4,Qa),Wg(5,Nn),Wg(6,Gge),Wg(7,yM),Wg(8,gM),Wg(9,Sr),Wg(10,Fo),Wg(11,fM)],mU);var SGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},nie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const RC=new Dt("referenceSearchVisible",!1,C("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let k0=class _U{constructor(e,t,n,r,s,o,a,u){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=r,this._notificationService=s,this._instantiationService=o,this._storageService=a,this._configurationService=u,this._disposables=new Je,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=RC.bindTo(n)}static get(e){return e.getContribution(_U.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let r;if(this._widget&&(r=this._widget.position),this.closeWidget(),r&&e.containsPosition(r))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",o=wGe.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(mU,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(C("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(u=>{let{element:d,kind:h}=u;if(d)switch(h){case"open":(u.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(d,!1,!1);break;case"side":this.openReference(d,!0,!1);break;case"goto":n?this._gotoReference(d):this.openReference(d,!1,!0);break}}));const a=++this._requestIdPool;t.then(u=>{var d;if(a!==this._requestIdPool||!this._widget){u.dispose();return}return(d=this._model)===null||d===void 0||d.dispose(),this._model=u,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(C("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let h=this._editor.getModel().uri,f=new Le(e.startLineNumber,e.startColumn),p=this._model.nearestReference(h,f);if(p)return this._widget.setSelection(p).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},u=>{this._notificationService.error(u)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return nie(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const r=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(r),yield this._gotoReference(r),s?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return nie(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=Q.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var r;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const s=_U.get(n),o=this._model.clone();this.closeWidget(),n.focus(),s.toggleWidget(t,uo(a=>Promise.resolve(o)),(r=this._peekMode)!==null&&r!==void 0?r:!1)}},n=>{this._ignoreModelChangeEvent=!1,gn(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:r,range:s}=e;this._editorService.openCodeEditor({resource:r,options:{selection:s,pinned:n}},this._editor,t)}};k0.ID="editor.contrib.referencesController";k0=SGe([tw(2,cn),tw(3,Ti),tw(4,gs),tw(5,Nn),tw(6,Dg),tw(7,nr)],k0);function PC(i,e){const t=uGe(i);if(!t)return;let n=k0.get(t);n&&e(n)}Oo.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Zr(2089,60),when:_t.or(RC,El.inPeekEditor),handler(i){PC(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Oo.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:_t.or(RC,El.inPeekEditor),handler(i){PC(i,e=>{e.goToNextOrPreviousReference(!0)})}});Oo.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:_t.or(RC,El.inPeekEditor),handler(i){PC(i,e=>{e.goToNextOrPreviousReference(!1)})}});Xn.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Xn.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Xn.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Xn.registerCommand("closeReferenceSearch",i=>PC(i,e=>e.closeWidget()));Oo.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:_t.and(El.inPeekEditor,_t.not("config.editor.stablePeek"))});Oo.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:_t.and(RC,_t.not("config.editor.stablePeek"))});Oo.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:_t.and(RC,Whe),handler(i){var e;const n=(e=i.get(bc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof T0&&PC(i,r=>r.revealReference(n[0]))}});Oo.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:_t.and(RC,Whe),handler(i){var e;const n=(e=i.get(bc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof T0&&PC(i,r=>r.openReference(n[0],!0,!0))}});Xn.registerCommand("openReference",i=>{var e;const n=(e=i.get(bc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof T0&&PC(i,r=>r.openReference(n[0],!1,!0))});var Jge=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},o2=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const qY=new Dt("hasSymbols",!1,C("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),jB=gi("ISymbolNavigationService");let vU=class{constructor(e,t,n,r){this._editorService=t,this._notificationService=n,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=qY.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new bU(this._editorService),r=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),u=o.getPosition();if(!a||!u)return;let d=!1,h=!1;for(const f of t.references)if(Ace(f.uri,a.uri))d=!0,h=h||Q.containsPosition(f.range,u);else if(d)break;(!d||!h)&&this.reset()});this._currentState=t0(n,r)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:Q.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?C("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):C("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};vU=Jge([o2(0,cn),o2(1,Ti),o2(2,gs),o2(3,Sr)],vU);U0(jB,vU,!0);nt(new class extends Po{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:qY,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(jB).revealNext(e)}});Oo.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:qY,primary:9,handler(i){i.get(jB).reset()}});let bU=class{constructor(e){this._listener=new Map,this._disposables=new Je,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),ri(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,t0(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};bU=Jge([o2(0,Ti)],bU);var epe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function FM(i,e,t,n){const s=t.ordered(i).map(o=>Promise.resolve(n(o,i,e)).then(void 0,a=>{Ro(a)}));return Promise.all(s).then(o=>{const a=[];for(let u of o)Array.isArray(u)?a.push(...u):u&&a.push(u);return a})}function GY(i,e,t){return FM(i,e,kA,(n,r,s)=>n.provideDefinition(r,s,t))}function tpe(i,e,t){return FM(i,e,YF,(n,r,s)=>n.provideDeclaration(r,s,t))}function npe(i,e,t){return FM(i,e,ZF,(n,r,s)=>n.provideImplementation(r,s,t))}function ipe(i,e,t){return FM(i,e,XF,(n,r,s)=>n.provideTypeDefinition(r,s,t))}function KB(i,e,t,n){return FM(i,e,KF,(r,s,o)=>epe(this,void 0,void 0,function*(){const a=yield r.provideReferences(s,o,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const u=yield r.provideReferences(s,o,{includeDeclaration:!1},n);return u&&u.length===1?u:a}))}function BM(i){return epe(this,void 0,void 0,function*(){const e=yield i(),t=new Cl(e,""),n=t.references.map(r=>r.link);return t.dispose(),n})}Sg("_executeDefinitionProvider",(i,e)=>BM(()=>GY(i,e,Fn.None)));Sg("_executeDeclarationProvider",(i,e)=>BM(()=>tpe(i,e,Fn.None)));Sg("_executeImplementationProvider",(i,e)=>BM(()=>npe(i,e,Fn.None)));Sg("_executeTypeDefinitionProvider",(i,e)=>BM(()=>ipe(i,e,Fn.None)));Sg("_executeReferenceProvider",(i,e)=>BM(()=>KB(i,e,!1,Fn.None)));var Jc=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},J6,eW,tW,nW,iW,rW,sW,oW;ra.appendMenuItem(Mt.EditorContext,{submenu:Mt.EditorContextPeek,title:C("peek.submenu","Peek"),group:"navigation",order:100});const rpe=new Set;function uf(i){const e=new i;return Rue(e),rpe.add(e.id),e}class tL extends Et{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(gs),r=e.get(Ti),s=e.get($p),o=e.get(jB),a=t.getModel(),u=t.getPosition(),d=new YA(t,5),h=aq(this._getLocationModel(a,u,d.token),d.token).then(f=>Jc(this,void 0,void 0,function*(){if(!f||d.token.isCancellationRequested)return;To(f.ariaMessage);let p;if(f.referenceAt(a.uri,u)){const v=this._getAlternativeCommand(t);v!==this.id&&rpe.has(v)&&(p=t.getAction(v))}const m=f.references.length;if(m===0){if(!this._configuration.muteMessage){const v=a.getWordAtPosition(u);Fu.get(t).showMessage(this._getNoResultFoundMessage(v),u)}}else if(m===1&&p)p.run();else return this._onResult(r,o,t,f)}),f=>{n.error(f)}).finally(()=>{d.dispose()});return s.showWhile(h,250),h}_onResult(e,t,n,r){return Jc(this,void 0,void 0,function*(){const s=this._getGoToPreference(n);if(!(n instanceof Kb)&&(this._configuration.openInPeek||s==="peek"&&r.references.length>1))this._openInPeek(n,r);else{const o=r.firstReference(),a=r.references.length>1&&s==="gotoAndPeek",u=yield this._openReference(n,e,o,this._configuration.openToSide,!a);a&&u?this._openInPeek(u,r):r.dispose(),s==="goto"&&t.put(o)}})}_openReference(e,t,n,r,s){return Jc(this,void 0,void 0,function*(){let o;if(lNe(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:Q.collapseToStart(o),selectionRevealType:3}},e,r);if(a){if(s){const u=a.getModel(),d=a.deltaDecorations([],[{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===u&&a.deltaDecorations(d,[])},350)}return a}})}_openInPeek(e,t){let n=k0.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),uo(r=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class qB extends tL{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(yield GY(e,t,n),C("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?C("noResultWord","No definition found for '{0}'",e.word):C("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const spe=RS&&!rq?2118:70;uf((J6=class CU extends qB{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:CU.id,label:C("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:_t.and(de.hasDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:spe,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Xn.registerCommandAlias("editor.action.goToDeclaration",CU.id)}},J6.id="editor.action.revealDefinition",J6));uf((eW=class wU extends qB{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:wU.id,label:C("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:_t.and(de.hasDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,spe),weight:100}}),Xn.registerCommandAlias("editor.action.openDeclarationToTheSide",wU.id)}},eW.id="editor.action.revealDefinitionAside",eW));uf((tW=class yU extends qB{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:yU.id,label:C("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:_t.and(de.hasDefinitionProvider,El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:2}}),Xn.registerCommandAlias("editor.action.previewDeclaration",yU.id)}},tW.id="editor.action.peekDefinition",tW));class ope extends tL{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(yield tpe(e,t,n),C("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?C("decl.noResultWord","No declaration found for '{0}'",e.word):C("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}uf((nW=class ape extends ope{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ape.id,label:C("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:_t.and(de.hasDeclarationProvider,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?C("decl.noResultWord","No declaration found for '{0}'",e.word):C("decl.generic.noResults","No declaration found")}},nW.id="editor.action.revealDeclaration",nW));uf(class extends ope{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:C("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:_t.and(de.hasDeclarationProvider,El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:3}})}});class lpe extends tL{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(yield ipe(e,t,n),C("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?C("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):C("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}uf((iW=class upe extends lpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:upe.ID,label:C("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:_t.and(de.hasTypeDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},iW.ID="editor.action.goToTypeDefinition",iW));uf((rW=class cpe extends lpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:cpe.ID,label:C("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:_t.and(de.hasTypeDefinitionProvider,El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:4}})}},rW.ID="editor.action.peekTypeDefinition",rW));class dpe extends tL{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(yield npe(e,t,n),C("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?C("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):C("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}uf((sW=class hpe extends dpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:hpe.ID,label:C("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:_t.and(de.hasImplementationProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},sW.ID="editor.action.goToImplementation",sW));uf((oW=class fpe extends dpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:fpe.ID,label:C("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:_t.and(de.hasImplementationProvider,El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:5}})}},oW.ID="editor.action.peekImplementation",oW));class gpe extends tL{_getNoResultFoundMessage(e){return e?C("references.no","No references found for '{0}'",e.word):C("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}uf(class extends gpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:C("goToReferences.label","Go to References"),alias:"Go to References",precondition:_t.and(de.hasReferenceProvider,El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(yield KB(e,t,!0,n),C("ref.title","References"))})}});uf(class extends gpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:C("references.action.label","Peek References"),alias:"Peek References",precondition:_t.and(de.hasReferenceProvider,El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(yield KB(e,t,!1,n),C("ref.title","References"))})}});class LGe extends tL{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:C("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:_t.and(El.notInPeekEditor,de.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new Cl(this._references,C("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&C("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Xn.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:rn},{name:"position",description:"The position at which to start",constraint:Le.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,r,s,o)=>Jc(void 0,void 0,void 0,function*(){Gi(rn.isUri(e)),Gi(Le.isIPosition(t)),Gi(Array.isArray(n)),Gi(typeof r>"u"||typeof r=="string"),Gi(typeof o>"u"||typeof o=="boolean");const a=i.get(Ti),u=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(cg(u))return u.setPosition(t),u.revealPositionInCenterIfOutsideViewport(t,0),u.invokeWithinContext(d=>{const h=new class extends LGe{_getNoResultFoundMessage(f){return s||super._getNoResultFoundMessage(f)}}({muteMessage:!s,openInPeek:!!o,openToSide:!1},n,r);d.get(Nn).invokeFunction(h.run.bind(h),u)})})});Xn.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:rn},{name:"position",description:"The position at which to start",constraint:Le.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,r)=>Jc(void 0,void 0,void 0,function*(){i.get(Tr).executeCommand("editor.action.goToLocations",e,t,n,r,void 0,!0)})});Xn.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{Gi(rn.isUri(e)),Gi(Le.isIPosition(t));const n=i.get(Ti);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(r=>{if(!cg(r)||!r.hasModel())return;const s=k0.get(r);if(!s)return;const o=uo(u=>KB(r.getModel(),Le.lift(t),!1,u).then(d=>new Cl(d,C("ref.title","References")))),a=new Q(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(s.toggleWidget(a,o,!1))})}});Xn.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");ra.appendMenuItems([{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:C({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:C({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:C({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:C({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:C({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var EGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},iie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let qb=class a2{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new Je,this.toUnhookForKeyboard=new Je,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let r=new zge(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown(([s,o])=>{this.startFindDefinitionFromMouse(s,ml(o))})),this.toUnhook.add(r.onExecute(s=>{this.isEnabled(s)&&this.gotoDefinition(s.target.position,s.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},o=>{this.removeLinkDecorations(),gn(o)})})),this.toUnhook.add(r.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(a2.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let r=new Ade(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=uo(s=>this.findDefinition(e,s)),this.previousPromise.then(s=>{if(!s||!s.length||!r.validate(this.editor)){this.removeLinkDecorations();return}if(s.length>1)this.addDecoration(new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Mp().appendText(C("multipleResults","Click to show {0} definitions.",s.length)));else{let o=s[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:u}}=a,{startLineNumber:d}=o.range;if(d<1||d>u.getLineCount()){a.dispose();return}const h=this.getPreviewValue(u,d,o);let f;o.originSelectionRange?f=Q.lift(o.originSelectionRange):f=new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const p=this.modeService.getModeIdByFilepathOrFirstLine(u.uri);this.addDecoration(f,new Mp().appendCodeblock(p||"",h)),a.dispose()})}}).then(void 0,gn)}getPreviewValue(e,t,n){let r=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return r.endLineNumber-r.startLineNumber>=a2.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,r)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const u=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,u)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),r=Math.min(e.getLineCount(),t+a2.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<r;s++){let o=e.getLineFirstNonWhitespaceColumn(s);if(n===o)break}return new Q(t,1,s+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+a2.MAX_SOURCE_PREVIEW_LINES),r=[];let s=!0,o=e.bracketPairs.findNextBracket(new Le(t,1));for(;o!==null;){if(r.length===0)r.push(o);else{const h=r[r.length-1];if(h.open[0]===o.open[0]&&h.isOpen&&!o.isOpen?r.pop():r.push(o),r.length===0)if(s)s=!1;else return new Q(t,1,o.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let u=o.range.endLineNumber,d=o.range.endColumn;if(a===o.range.endColumn&&(u++,d=1),u>n)return new Q(t,1,n+1,1);o=e.bracketPairs.findNextBracket(new Le(u,d))}return new Q(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&kA.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?GY(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const r=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new qB({openToSide:t,openInPeek:r,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(cn);return El.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};qb.ID="editor.contrib.gotodefinitionatposition";qb.MAX_SOURCE_PREVIEW_LINES=8;qb=EGe([iie(1,Qa),iie(2,Fo)],qb);ki(qb.ID,qb);hr((i,e)=>{const t=i.getColor(fce);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const dP=qe;class ppe extends Oe{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new pM(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class YY extends Oe{constructor(e,t,n){super(),this.actionContainer=Be(e,dP("div.action-container")),this.action=Be(this.actionContainer,dP("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Be(this.action,dP(`span.icon.${t.iconClass}`));const r=Be(this.action,dP("span"));r.textContent=n?`${t.label} (${n})`:t.label,this._register(Ge(this.actionContainer,Ht.MOUSE_DOWN,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new YY(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}class xGe{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new Ce,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Ce,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Ce,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const Fh=qe;class DGe extends Oe{constructor(e,t,n){super(),this.model=t,this.domNode=Fh(".colorpicker-header"),Be(e,this.domNode),this.pickedColorNode=Be(this.domNode,Fh(".picked-color"));const r=C("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",r);const s=Be(this.domNode,Fh(".original-color"));s.style.backgroundColor=ye.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(Ib)||ye.white,this._register(hr((o,a)=>{this.backgroundColor=o.getColor(Ib)||ye.white})),this._register(Ge(this.pickedColorNode,Ht.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Ge(s,Ht.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=ye.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=ye.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Fh(".codicon.codicon-color-mode"))}}class IGe extends Oe{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=Fh(".colorpicker-body"),Be(e,this.domNode),this.saturationBox=new TGe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new kGe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new NGe(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new ye(new Gf(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new ye(new Gf(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new ye(new Gf(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class TGe extends Oe{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Ce,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Fh(".saturation-wrap"),Be(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",Be(this.domNode,this.canvas),this.selection=Fh(".saturation-selection"),Be(this.domNode,this.selection),this.layout(),this._register(cq(this.domNode,r=>this.onMouseDown(r))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new SC);const t=Uo(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,WS,r=>this.onDidChangePosition(r.posx-t.left,r.posy-t.top),()=>null);const n=sue(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),r=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,r),this._onDidChange.fire({s:n,v:r})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new ye(new Gf(e.h,1,1,1)),n=this.canvas.getContext("2d"),r=n.createLinearGradient(0,0,this.canvas.width,0);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=ye.Format.CSS.format(t),n.fill(),n.fillStyle=r,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class mpe extends Oe{constructor(e,t){super(),this.model=t,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Ce,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Be(e,Fh(".strip")),this.overlay=Be(this.domNode,Fh(".overlay")),this.slider=Be(this.domNode,Fh(".slider")),this.slider.style.top="0px",this._register(cq(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new SC),n=Uo(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,WS,s=>this.onDidChangeTop(s.posy-n.top),()=>null);const r=sue(document,()=>{this._onColorFlushed.fire(),r.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class kGe extends mpe{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:r}=e.rgba,s=new ye(new fi(t,n,r,1)),o=new ye(new fi(t,n,r,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class NGe extends mpe{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class AGe extends Wu{constructor(e,t,n,r){super(),this.model=t,this.pixelRatio=n,this._register(nq(()=>this.layout()));const s=Fh(".colorpicker-widget");e.appendChild(s);const o=new DGe(s,this.model,r);this.body=new IGe(s,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var OGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},MGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class RGe{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let SU=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return Gs.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return rie(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const r=jb.get(this._editor);for(const s of t){if(!r.isColorDecorationId(s.id))continue;const o=r.getColorData(s.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,n){return rie(this,void 0,void 0,function*(){const r=e.getValueInRange(t.range),{red:s,green:o,blue:a,alpha:u}=t.color,d=new fi(Math.round(s*255),Math.round(o*255),Math.round(a*255),u),h=new ye(d),f=yield Xne(e,t,n,Fn.None),p=new xGe(h,[],0);return p.colorPresentations=f||[],p.guessColorPresentation(h,r),new RGe(this,Q.lift(t.range),p,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return Oe.None;const r=new Je,s=e[0],o=this._editor.getModel(),a=s.model,u=r.add(new AGe(t,a,this._editor.getOption(128),this._themeService));let d=new Q(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn);const h=()=>{let p,m;if(a.presentation.textEdit){p=[a.presentation.textEdit],m=new Q(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const v=this._editor.getModel()._setTrackedRange(null,m,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p),m=this._editor.getModel()._getTrackedRange(v)||m}else p=[{identifier:null,range:d,text:a.presentation.label,forceMoveMarkers:!1}],m=d.setEndPosition(d.endLineNumber,d.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p);a.presentation.additionalTextEdits&&(p=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",p),this._hover.hide()),this._editor.pushUndoStop(),d=m},f=p=>Xne(o,{range:d,color:{red:p.rgba.r/255,green:p.rgba.g/255,blue:p.rgba.b/255,alpha:p.rgba.a}},s.provider,Fn.None).then(m=>{a.colorPresentations=m||[]});return r.add(a.onColorFlushed(p=>{f(p).then(h)})),r.add(a.onDidChangeColor(f)),this._hover.setColorPicker(u),r}};SU=OGe([MGe(2,Er)],SU);var PGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},FGe=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,u){o=i[s](o),r(a,u,o.done,o.value)})}}function r(s,o,a,u){Promise.resolve(u).then(function(d){s({value:d,done:a})},o)}};class _pe{constructor(e,t,n,r,s){this._computer=e,this._state=0,this._hoverTime=s,this._firstWaitScheduler=new er(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new er(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new er(()=>this._showLoadingMessage(),0),this._asyncIterable=null,this._asyncIterableDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=r}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=eEe(e=>this._computer.computeAsync(e)),PGe(this,void 0,void 0,function*(){var e,t;try{try{for(var n=FGe(this._asyncIterable),r;r=yield n.next(),!r.done;){const s=r.value;s&&(this._computer.onResult([s],!1),this._onProgress())}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,this._withAsyncResult()}catch(s){this._onError(s)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncIterableDone?(this._state=0,this._onComplete()):(this._state=3,this._onProgress())}_showLoadingMessage(){this._state===3&&(this._state=4,this._onProgress())}_withAsyncResult(){(this._state===3||this._state===4)&&(this._state=0,this._onComplete())}_onComplete(){this._completeCallback(this._computer.getResult())}_onError(e){this._errorCallback?this._errorCallback(e):gn(e)}_onProgress(){this._state===4?this._progressCallback(this._computer.getResultWithLoadingMessage()):this._progressCallback(this._computer.getResult())}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._state=0}}class sie{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class aW{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function BGe(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var WGe=Object.hasOwnProperty,oie=Object.setPrototypeOf,VGe=Object.isFrozen,HGe=Object.getPrototypeOf,$Ge=Object.getOwnPropertyDescriptor,xl=Object.freeze,Pp=Object.seal,zGe=Object.create,vpe=typeof Reflect<"u"&&Reflect,t5=vpe.apply,LU=vpe.construct;t5||(t5=function(e,t,n){return e.apply(t,n)});xl||(xl=function(e){return e});Pp||(Pp=function(e){return e});LU||(LU=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(BGe(t))))});var UGe=of(Array.prototype.forEach),aie=of(Array.prototype.pop),FN=of(Array.prototype.push),p1=of(String.prototype.toLowerCase),lie=of(String.prototype.match),bv=of(String.prototype.replace),jGe=of(String.prototype.indexOf),KGe=of(String.prototype.trim),Vg=of(RegExp.prototype.test),uie=qGe(TypeError);function of(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return t5(i,e,n)}}function qGe(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return LU(i,t)}}function Vi(i,e){oie&&oie(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var r=p1(n);r!==n&&(VGe(e)||(e[t]=r),n=r)}i[n]=!0}return i}function l1(i){var e=zGe(null),t=void 0;for(t in i)t5(WGe,i,[t])&&(e[t]=i[t]);return e}function hP(i,e){for(;i!==null;){var t=$Ge(i,e);if(t){if(t.get)return of(t.get);if(typeof t.value=="function")return of(t.value)}i=HGe(i)}function n(r){return console.warn("fallback value for",r),null}return n}var cie=xl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lW=xl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),uW=xl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),GGe=xl(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cW=xl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),YGe=xl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),die=xl(["#text"]),hie=xl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),dW=xl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fie=xl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fP=xl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZGe=Pp(/\{\{[\s\S]*|[\s\S]*\}\}/gm),XGe=Pp(/<%[\s\S]*|[\s\S]*%>/gm),QGe=Pp(/^data-[\-\w.\u00B7-\uFFFF]/),JGe=Pp(/^aria-[\-\w]+$/),eYe=Pp(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tYe=Pp(/^(?:\w+script|data):/i),nYe=Pp(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),l2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function pf(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var iYe=function(){return typeof window>"u"?null:window},rYe=function(e,t){if((typeof e>"u"?"undefined":l2(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function bpe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iYe(),e=function(J){return bpe(J)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,r=i.DocumentFragment,s=i.HTMLTemplateElement,o=i.Node,a=i.Element,u=i.NodeFilter,d=i.NamedNodeMap,h=d===void 0?i.NamedNodeMap||i.MozNamedAttrMap:d,f=i.Text,p=i.Comment,m=i.DOMParser,v=i.trustedTypes,b=a.prototype,L=hP(b,"cloneNode"),S=hP(b,"nextSibling"),y=hP(b,"childNodes"),E=hP(b,"parentNode");if(typeof s=="function"){var A=n.createElement("template");A.content&&A.content.ownerDocument&&(n=A.content.ownerDocument)}var N=rYe(v,t),V=N&&Jn?N.createHTML(""):"",M=n,R=M.implementation,Y=M.createNodeIterator,X=M.createDocumentFragment,$=M.getElementsByTagName,T=t.importNode,O={};try{O=l1(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof E=="function"&&R&&typeof R.createHTMLDocument<"u"&&O!==9;var W=ZGe,j=XGe,U=QGe,q=JGe,z=tYe,k=nYe,K=eYe,fe=null,ne=Vi({},[].concat(pf(cie),pf(lW),pf(uW),pf(cW),pf(die))),be=null,De=Vi({},[].concat(pf(hie),pf(dW),pf(fie),pf(fP))),Ve=null,rt=null,At=!0,Me=!0,ut=!1,Ct=!1,Xe=!1,sn=!1,Kt=!1,dn=!1,Sn=!1,Wn=!0,Jn=!1,si=!0,jn=!0,Pt=!1,pn={},Ci=null,Te=Vi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Fe=null,pt=Vi({},["audio","video","img","source","image","track"]),at=null,bt=Vi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wi="http://www.w3.org/1998/Math/MathML",Vt="http://www.w3.org/2000/svg",Tt="http://www.w3.org/1999/xhtml",qt=Tt,Gt=!1,Bt=null,fr=n.createElement("form"),ei=function(J){Bt&&Bt===J||((!J||(typeof J>"u"?"undefined":l2(J))!=="object")&&(J={}),J=l1(J),fe="ALLOWED_TAGS"in J?Vi({},J.ALLOWED_TAGS):ne,be="ALLOWED_ATTR"in J?Vi({},J.ALLOWED_ATTR):De,at="ADD_URI_SAFE_ATTR"in J?Vi(l1(bt),J.ADD_URI_SAFE_ATTR):bt,Fe="ADD_DATA_URI_TAGS"in J?Vi(l1(pt),J.ADD_DATA_URI_TAGS):pt,Ci="FORBID_CONTENTS"in J?Vi({},J.FORBID_CONTENTS):Te,Ve="FORBID_TAGS"in J?Vi({},J.FORBID_TAGS):{},rt="FORBID_ATTR"in J?Vi({},J.FORBID_ATTR):{},pn="USE_PROFILES"in J?J.USE_PROFILES:!1,At=J.ALLOW_ARIA_ATTR!==!1,Me=J.ALLOW_DATA_ATTR!==!1,ut=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=J.SAFE_FOR_TEMPLATES||!1,Xe=J.WHOLE_DOCUMENT||!1,dn=J.RETURN_DOM||!1,Sn=J.RETURN_DOM_FRAGMENT||!1,Wn=J.RETURN_DOM_IMPORT!==!1,Jn=J.RETURN_TRUSTED_TYPE||!1,Kt=J.FORCE_BODY||!1,si=J.SANITIZE_DOM!==!1,jn=J.KEEP_CONTENT!==!1,Pt=J.IN_PLACE||!1,K=J.ALLOWED_URI_REGEXP||K,qt=J.NAMESPACE||Tt,Ct&&(Me=!1),Sn&&(dn=!0),pn&&(fe=Vi({},[].concat(pf(die))),be=[],pn.html===!0&&(Vi(fe,cie),Vi(be,hie)),pn.svg===!0&&(Vi(fe,lW),Vi(be,dW),Vi(be,fP)),pn.svgFilters===!0&&(Vi(fe,uW),Vi(be,dW),Vi(be,fP)),pn.mathMl===!0&&(Vi(fe,cW),Vi(be,fie),Vi(be,fP))),J.ADD_TAGS&&(fe===ne&&(fe=l1(fe)),Vi(fe,J.ADD_TAGS)),J.ADD_ATTR&&(be===De&&(be=l1(be)),Vi(be,J.ADD_ATTR)),J.ADD_URI_SAFE_ATTR&&Vi(at,J.ADD_URI_SAFE_ATTR),J.FORBID_CONTENTS&&(Ci===Te&&(Ci=l1(Ci)),Vi(Ci,J.FORBID_CONTENTS)),jn&&(fe["#text"]=!0),Xe&&Vi(fe,["html","head","body"]),fe.table&&(Vi(fe,["tbody"]),delete Ve.tbody),xl&&xl(J),Bt=J)},He=Vi({},["mi","mo","mn","ms","mtext"]),Fa=Vi({},["foreignobject","desc","title","annotation-xml"]),Vn=Vi({},lW);Vi(Vn,uW),Vi(Vn,GGe);var ti=Vi({},cW);Vi(ti,YGe);var Go=function(J){var ve=E(J);(!ve||!ve.tagName)&&(ve={namespaceURI:Tt,tagName:"template"});var $e=p1(J.tagName),Re=p1(ve.tagName);if(J.namespaceURI===Vt)return ve.namespaceURI===Tt?$e==="svg":ve.namespaceURI===wi?$e==="svg"&&(Re==="annotation-xml"||He[Re]):!!Vn[$e];if(J.namespaceURI===wi)return ve.namespaceURI===Tt?$e==="math":ve.namespaceURI===Vt?$e==="math"&&Fa[Re]:!!ti[$e];if(J.namespaceURI===Tt){if(ve.namespaceURI===Vt&&!Fa[Re]||ve.namespaceURI===wi&&!He[Re])return!1;var dt=Vi({},["title","style","font","a","script"]);return!ti[$e]&&(dt[$e]||!Vn[$e])}return!1},vn=function(J){FN(e.removed,{element:J});try{J.parentNode.removeChild(J)}catch{try{J.outerHTML=V}catch{J.remove()}}},ir=function(J,ve){try{FN(e.removed,{attribute:ve.getAttributeNode(J),from:ve})}catch{FN(e.removed,{attribute:null,from:ve})}if(ve.removeAttribute(J),J==="is"&&!be[J])if(dn||Sn)try{vn(ve)}catch{}else try{ve.setAttribute(J,"")}catch{}},sl=function(J){var ve=void 0,$e=void 0;if(Kt)J="<remove></remove>"+J;else{var Re=lie(J,/^[\r\n\t ]+/);$e=Re&&Re[0]}var dt=N?N.createHTML(J):J;if(qt===Tt)try{ve=new m().parseFromString(dt,"text/html")}catch{}if(!ve||!ve.documentElement){ve=R.createDocument(qt,"template",null);try{ve.documentElement.innerHTML=Gt?"":dt}catch{}}var Yt=ve.body||ve.documentElement;return J&&$e&&Yt.insertBefore(n.createTextNode($e),Yt.childNodes[0]||null),qt===Tt?$.call(ve,Xe?"html":"body")[0]:Xe?ve.documentElement:Yt},qi=function(J){return Y.call(J.ownerDocument||J,J,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Ye=function(J){return J instanceof f||J instanceof p?!1:typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof h)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"},no=function(J){return(typeof o>"u"?"undefined":l2(o))==="object"?J instanceof o:J&&(typeof J>"u"?"undefined":l2(J))==="object"&&typeof J.nodeType=="number"&&typeof J.nodeName=="string"},ke=function(J,ve,$e){B[J]&&UGe(B[J],function(Re){Re.call(e,ve,$e,Bt)})},Ee=function(J){var ve=void 0;if(ke("beforeSanitizeElements",J,null),Ye(J)||lie(J.nodeName,/[\u0080-\uFFFF]/))return vn(J),!0;var $e=p1(J.nodeName);if(ke("uponSanitizeElement",J,{tagName:$e,allowedTags:fe}),!no(J.firstElementChild)&&(!no(J.content)||!no(J.content.firstElementChild))&&Vg(/<[/\w]/g,J.innerHTML)&&Vg(/<[/\w]/g,J.textContent)||$e==="select"&&Vg(/<template/i,J.innerHTML))return vn(J),!0;if(!fe[$e]||Ve[$e]){if(jn&&!Ci[$e]){var Re=E(J)||J.parentNode,dt=y(J)||J.childNodes;if(dt&&Re)for(var Yt=dt.length,I=Yt-1;I>=0;--I)Re.insertBefore(L(dt[I],!0),S(J))}return vn(J),!0}return J instanceof a&&!Go(J)||($e==="noscript"||$e==="noembed")&&Vg(/<\/no(script|embed)/i,J.innerHTML)?(vn(J),!0):(Ct&&J.nodeType===3&&(ve=J.textContent,ve=bv(ve,W," "),ve=bv(ve,j," "),J.textContent!==ve&&(FN(e.removed,{element:J.cloneNode()}),J.textContent=ve)),ke("afterSanitizeElements",J,null),!1)},Ae=function(J,ve,$e){if(si&&(ve==="id"||ve==="name")&&($e in n||$e in fr))return!1;if(!(Me&&!rt[ve]&&Vg(U,ve))){if(!(At&&Vg(q,ve))){if(!be[ve]||rt[ve])return!1;if(!at[ve]){if(!Vg(K,bv($e,k,""))){if(!((ve==="src"||ve==="xlink:href"||ve==="href")&&J!=="script"&&jGe($e,"data:")===0&&Fe[J])){if(!(ut&&!Vg(z,bv($e,k,"")))){if($e)return!1}}}}}}return!0},oe=function(J){var ve=void 0,$e=void 0,Re=void 0,dt=void 0;ke("beforeSanitizeAttributes",J,null);var Yt=J.attributes;if(Yt){var I={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(dt=Yt.length;dt--;){ve=Yt[dt];var F=ve,te=F.name,ie=F.namespaceURI;if($e=KGe(ve.value),Re=p1(te),I.attrName=Re,I.attrValue=$e,I.keepAttr=!0,I.forceKeepAttr=void 0,ke("uponSanitizeAttribute",J,I),$e=I.attrValue,!I.forceKeepAttr&&(ir(te,J),!!I.keepAttr)){if(Vg(/\/>/i,$e)){ir(te,J);continue}Ct&&($e=bv($e,W," "),$e=bv($e,j," "));var me=J.nodeName.toLowerCase();if(Ae(me,Re,$e))try{ie?J.setAttributeNS(ie,te,$e):J.setAttribute(te,$e),aie(e.removed)}catch{}}}ke("afterSanitizeAttributes",J,null)}},ae=function pe(J){var ve=void 0,$e=qi(J);for(ke("beforeSanitizeShadowDOM",J,null);ve=$e.nextNode();)ke("uponSanitizeShadowNode",ve,null),!Ee(ve)&&(ve.content instanceof r&&pe(ve.content),oe(ve));ke("afterSanitizeShadowDOM",J,null)};return e.sanitize=function(pe,J){var ve=void 0,$e=void 0,Re=void 0,dt=void 0,Yt=void 0;if(Gt=!pe,Gt&&(pe="<!-->"),typeof pe!="string"&&!no(pe)){if(typeof pe.toString!="function")throw uie("toString is not a function");if(pe=pe.toString(),typeof pe!="string")throw uie("dirty is not a string, aborting")}if(!e.isSupported){if(l2(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof pe=="string")return i.toStaticHTML(pe);if(no(pe))return i.toStaticHTML(pe.outerHTML)}return pe}if(sn||ei(J),e.removed=[],typeof pe=="string"&&(Pt=!1),!Pt)if(pe instanceof o)ve=sl("<!---->"),$e=ve.ownerDocument.importNode(pe,!0),$e.nodeType===1&&$e.nodeName==="BODY"||$e.nodeName==="HTML"?ve=$e:ve.appendChild($e);else{if(!dn&&!Ct&&!Xe&&pe.indexOf("<")===-1)return N&&Jn?N.createHTML(pe):pe;if(ve=sl(pe),!ve)return dn?null:V}ve&&Kt&&vn(ve.firstChild);for(var I=qi(Pt?pe:ve);Re=I.nextNode();)Re.nodeType===3&&Re===dt||Ee(Re)||(Re.content instanceof r&&ae(Re.content),oe(Re),dt=Re);if(dt=null,Pt)return pe;if(dn){if(Sn)for(Yt=X.call(ve.ownerDocument);ve.firstChild;)Yt.appendChild(ve.firstChild);else Yt=ve;return Wn&&(Yt=T.call(t,Yt,!0)),Yt}var F=Xe?ve.outerHTML:ve.innerHTML;return Ct&&(F=bv(F,W," "),F=bv(F,j," ")),N&&Jn?N.createHTML(F):F},e.setConfig=function(pe){ei(pe),sn=!0},e.clearConfig=function(){Bt=null,sn=!1},e.isValidAttribute=function(pe,J,ve){Bt||ei({});var $e=p1(pe),Re=p1(J);return Ae($e,Re,ve)},e.addHook=function(pe,J){typeof J=="function"&&(B[pe]=B[pe]||[],FN(B[pe],J))},e.removeHook=function(pe){B[pe]&&aie(B[pe])},e.removeHooks=function(pe){B[pe]&&(B[pe]=[])},e.removeAllHooks=function(){B={}},e}var kg=bpe();kg.version;kg.isSupported;const sYe=kg.sanitize;kg.setConfig;kg.clearConfig;kg.isValidAttribute;const gie=kg.addHook,pie=kg.removeHook;kg.removeHooks;kg.removeAllHooks;let cf;(function(){function i(e){cf=e()}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof i=="function"&&i.amd?i(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(ke,Ee){for(var Ae=0;Ae<Ee.length;Ae++){var oe=Ee[Ae];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ke,oe.key,oe)}}function t(ke,Ee,Ae){return Ee&&e(ke.prototype,Ee),Ae&&e(ke,Ae),ke}function n(ke,Ee){if(ke){if(typeof ke=="string")return r(ke,Ee);var Ae=Object.prototype.toString.call(ke).slice(8,-1);if(Ae==="Object"&&ke.constructor&&(Ae=ke.constructor.name),Ae==="Map"||Ae==="Set")return Array.from(ke);if(Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae))return r(ke,Ee)}}function r(ke,Ee){(Ee==null||Ee>ke.length)&&(Ee=ke.length);for(var Ae=0,oe=new Array(Ee);Ae<Ee;Ae++)oe[Ae]=ke[Ae];return oe}function s(ke,Ee){var Ae=typeof Symbol<"u"&&ke[Symbol.iterator]||ke["@@iterator"];if(Ae)return(Ae=Ae.call(ke)).next.bind(Ae);if(Array.isArray(ke)||(Ae=n(ke))||Ee&&ke&&typeof ke.length=="number"){Ae&&(ke=Ae);var oe=0;return function(){return oe>=ke.length?{done:!0}:{done:!1,value:ke[oe++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function u(ke){o.exports.defaults=ke}o.exports={defaults:a(),getDefaults:a,changeDefaults:u};var d=/[&<>"']/,h=/[&<>"']/g,f=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v=function(Ee){return m[Ee]};function b(ke,Ee){if(Ee){if(d.test(ke))return ke.replace(h,v)}else if(f.test(ke))return ke.replace(p,v);return ke}var L=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function S(ke){return ke.replace(L,function(Ee,Ae){return Ae=Ae.toLowerCase(),Ae==="colon"?":":Ae.charAt(0)==="#"?Ae.charAt(1)==="x"?String.fromCharCode(parseInt(Ae.substring(2),16)):String.fromCharCode(+Ae.substring(1)):""})}var y=/(^|[^\[])\^/g;function E(ke,Ee){ke=ke.source||ke,Ee=Ee||"";var Ae={replace:function(ae,pe){return pe=pe.source||pe,pe=pe.replace(y,"$1"),ke=ke.replace(ae,pe),Ae},getRegex:function(){return new RegExp(ke,Ee)}};return Ae}var A=/[^\w:]/g,N=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function V(ke,Ee,Ae){if(ke){var oe;try{oe=decodeURIComponent(S(Ae)).replace(A,"").toLowerCase()}catch{return null}if(oe.indexOf("javascript:")===0||oe.indexOf("vbscript:")===0||oe.indexOf("data:")===0)return null}Ee&&!N.test(Ae)&&(Ae=$(Ee,Ae));try{Ae=encodeURI(Ae).replace(/%25/g,"%")}catch{return null}return Ae}var M={},R=/^[^:]+:\/*[^/]*$/,Y=/^([^:]+:)[\s\S]*$/,X=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $(ke,Ee){M[" "+ke]||(R.test(ke)?M[" "+ke]=ke+"/":M[" "+ke]=W(ke,"/",!0)),ke=M[" "+ke];var Ae=ke.indexOf(":")===-1;return Ee.substring(0,2)==="//"?Ae?Ee:ke.replace(Y,"$1")+Ee:Ee.charAt(0)==="/"?Ae?Ee:ke.replace(X,"$1")+Ee:ke+Ee}var T={exec:function(){}};function O(ke){for(var Ee=1,Ae,oe;Ee<arguments.length;Ee++){Ae=arguments[Ee];for(oe in Ae)Object.prototype.hasOwnProperty.call(Ae,oe)&&(ke[oe]=Ae[oe])}return ke}function B(ke,Ee){var Ae=ke.replace(/\|/g,function(pe,J,ve){for(var $e=!1,Re=J;--Re>=0&&ve[Re]==="\\";)$e=!$e;return $e?"|":" |"}),oe=Ae.split(/ \|/),ae=0;if(oe[0].trim()||oe.shift(),oe[oe.length-1].trim()||oe.pop(),oe.length>Ee)oe.splice(Ee);else for(;oe.length<Ee;)oe.push("");for(;ae<oe.length;ae++)oe[ae]=oe[ae].trim().replace(/\\\|/g,"|");return oe}function W(ke,Ee,Ae){var oe=ke.length;if(oe===0)return"";for(var ae=0;ae<oe;){var pe=ke.charAt(oe-ae-1);if(pe===Ee&&!Ae)ae++;else if(pe!==Ee&&Ae)ae++;else break}return ke.substr(0,oe-ae)}function j(ke,Ee){if(ke.indexOf(Ee[1])===-1)return-1;for(var Ae=ke.length,oe=0,ae=0;ae<Ae;ae++)if(ke[ae]==="\\")ae++;else if(ke[ae]===Ee[0])oe++;else if(ke[ae]===Ee[1]&&(oe--,oe<0))return ae;return-1}function U(ke){ke&&ke.sanitize&&!ke.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function q(ke,Ee){if(Ee<1)return"";for(var Ae="";Ee>1;)Ee&1&&(Ae+=ke),Ee>>=1,ke+=ke;return Ae+ke}var z={escape:b,unescape:S,edit:E,cleanUrl:V,resolveUrl:$,noopTest:T,merge:O,splitCells:B,rtrim:W,findClosingBracket:j,checkSanitizeDeprecation:U,repeatString:q},k=o.exports.defaults,K=z.rtrim,fe=z.splitCells,ne=z.escape,be=z.findClosingBracket;function De(ke,Ee,Ae,oe){var ae=Ee.href,pe=Ee.title?ne(Ee.title):null,J=ke[1].replace(/\\([\[\]])/g,"$1");if(ke[0].charAt(0)!=="!"){oe.state.inLink=!0;var ve={type:"link",raw:Ae,href:ae,title:pe,text:J,tokens:oe.inlineTokens(J,[])};return oe.state.inLink=!1,ve}else return{type:"image",raw:Ae,href:ae,title:pe,text:ne(J)}}function Ve(ke,Ee){var Ae=ke.match(/^(\s+)(?:```)/);if(Ae===null)return Ee;var oe=Ae[1];return Ee.split(`
`).map(function(ae){var pe=ae.match(/^\s+/);if(pe===null)return ae;var J=pe[0];return J.length>=oe.length?ae.slice(oe.length):ae}).join(`
`)}var rt=function(){function ke(Ae){this.options=Ae||k}var Ee=ke.prototype;return Ee.space=function(oe){var ae=this.rules.block.newline.exec(oe);if(ae)return ae[0].length>1?{type:"space",raw:ae[0]}:{raw:`
`}},Ee.code=function(oe){var ae=this.rules.block.code.exec(oe);if(ae){var pe=ae[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ae[0],codeBlockStyle:"indented",text:this.options.pedantic?pe:K(pe,`
`)}}},Ee.fences=function(oe){var ae=this.rules.block.fences.exec(oe);if(ae){var pe=ae[0],J=Ve(pe,ae[3]||"");return{type:"code",raw:pe,lang:ae[2]?ae[2].trim():ae[2],text:J}}},Ee.heading=function(oe){var ae=this.rules.block.heading.exec(oe);if(ae){var pe=ae[2].trim();if(/#$/.test(pe)){var J=K(pe,"#");(this.options.pedantic||!J||/ $/.test(J))&&(pe=J.trim())}var ve={type:"heading",raw:ae[0],depth:ae[1].length,text:pe,tokens:[]};return this.lexer.inline(ve.text,ve.tokens),ve}},Ee.hr=function(oe){var ae=this.rules.block.hr.exec(oe);if(ae)return{type:"hr",raw:ae[0]}},Ee.blockquote=function(oe){var ae=this.rules.block.blockquote.exec(oe);if(ae){var pe=ae[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ae[0],tokens:this.lexer.blockTokens(pe,[]),text:pe}}},Ee.list=function(oe){var ae=this.rules.block.list.exec(oe);if(ae){var pe,J,ve,$e,Re,dt,Yt,I,F,te,ie=ae[1].trim(),me=ie.length>1,le={type:"list",raw:"",ordered:me,start:me?+ie.slice(0,-1):"",loose:!1,items:[]};ie=me?"\\d{1,9}\\"+ie.slice(-1):"\\"+ie,this.options.pedantic&&(ie=me?ie:"[*+-]");for(var Ie=new RegExp("^( {0,3}"+ie+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");oe&&!(this.rules.block.hr.test(oe)||!(ae=Ie.exec(oe)));){F=ae[2].split(`
`),this.options.pedantic?($e=2,te=F[0].trimLeft()):($e=ae[2].search(/[^ ]/),$e=ae[1].length+($e>4?1:$e),te=F[0].slice($e-ae[1].length)),dt=!1,pe=ae[0],!F[0]&&/^ *$/.test(F[1])&&(pe=ae[1]+F.slice(0,2).join(`
`)+`
`,le.loose=!0,F=[]);var Pe=new RegExp("^ {0,"+Math.min(3,$e-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(Re=1;Re<F.length;Re++){if(I=F[Re],this.options.pedantic&&(I=I.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Pe.test(I)){pe=ae[1]+F.slice(0,Re).join(`
`)+`
`;break}if(!dt){I.trim()||(dt=!0),I.search(/[^ ]/)>=$e?te+=`
`+I.slice($e):te+=`
`+I;continue}if(I.search(/[^ ]/)>=$e||!I.trim()){te+=`
`+I.slice($e);continue}else{pe=ae[1]+F.slice(0,Re).join(`
`)+`
`;break}}le.loose||(Yt?le.loose=!0:/\n *\n *$/.test(pe)&&(Yt=!0)),this.options.gfm&&(J=/^\[[ xX]\] /.exec(te),J&&(ve=J[0]!=="[ ] ",te=te.replace(/^\[[ xX]\] +/,""))),le.items.push({type:"list_item",raw:pe,task:!!J,checked:ve,loose:!1,text:te}),le.raw+=pe,oe=oe.slice(pe.length)}le.items[le.items.length-1].raw=pe.trimRight(),le.items[le.items.length-1].text=te.trimRight(),le.raw=le.raw.trimRight();var Ze=le.items.length;for(Re=0;Re<Ze;Re++)this.lexer.state.top=!1,le.items[Re].tokens=this.lexer.blockTokens(le.items[Re].text,[]),le.items[Re].tokens.some(function(ot){return ot.type==="space"})&&(le.loose=!0,le.items[Re].loose=!0);return le}},Ee.html=function(oe){var ae=this.rules.block.html.exec(oe);if(ae){var pe={type:"html",raw:ae[0],pre:!this.options.sanitizer&&(ae[1]==="pre"||ae[1]==="script"||ae[1]==="style"),text:ae[0]};return this.options.sanitize&&(pe.type="paragraph",pe.text=this.options.sanitizer?this.options.sanitizer(ae[0]):ne(ae[0]),pe.tokens=[],this.lexer.inline(pe.text,pe.tokens)),pe}},Ee.def=function(oe){var ae=this.rules.block.def.exec(oe);if(ae){ae[3]&&(ae[3]=ae[3].substring(1,ae[3].length-1));var pe=ae[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:pe,raw:ae[0],href:ae[2],title:ae[3]}}},Ee.table=function(oe){var ae=this.rules.block.table.exec(oe);if(ae){var pe={type:"table",header:fe(ae[1]).map(function(Yt){return{text:Yt}}),align:ae[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:ae[3]?ae[3].replace(/\n$/,"").split(`
`):[]};if(pe.header.length===pe.align.length){pe.raw=ae[0];var J=pe.align.length,ve,$e,Re,dt;for(ve=0;ve<J;ve++)/^ *-+: *$/.test(pe.align[ve])?pe.align[ve]="right":/^ *:-+: *$/.test(pe.align[ve])?pe.align[ve]="center":/^ *:-+ *$/.test(pe.align[ve])?pe.align[ve]="left":pe.align[ve]=null;for(J=pe.rows.length,ve=0;ve<J;ve++)pe.rows[ve]=fe(pe.rows[ve],pe.header.length).map(function(Yt){return{text:Yt}});for(J=pe.header.length,$e=0;$e<J;$e++)pe.header[$e].tokens=[],this.lexer.inlineTokens(pe.header[$e].text,pe.header[$e].tokens);for(J=pe.rows.length,$e=0;$e<J;$e++)for(dt=pe.rows[$e],Re=0;Re<dt.length;Re++)dt[Re].tokens=[],this.lexer.inlineTokens(dt[Re].text,dt[Re].tokens);return pe}}},Ee.lheading=function(oe){var ae=this.rules.block.lheading.exec(oe);if(ae){var pe={type:"heading",raw:ae[0],depth:ae[2].charAt(0)==="="?1:2,text:ae[1],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Ee.paragraph=function(oe){var ae=this.rules.block.paragraph.exec(oe);if(ae){var pe={type:"paragraph",raw:ae[0],text:ae[1].charAt(ae[1].length-1)===`
`?ae[1].slice(0,-1):ae[1],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Ee.text=function(oe){var ae=this.rules.block.text.exec(oe);if(ae){var pe={type:"text",raw:ae[0],text:ae[0],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Ee.escape=function(oe){var ae=this.rules.inline.escape.exec(oe);if(ae)return{type:"escape",raw:ae[0],text:ne(ae[1])}},Ee.tag=function(oe){var ae=this.rules.inline.tag.exec(oe);if(ae)return!this.lexer.state.inLink&&/^<a /i.test(ae[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(ae[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(ae[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ae[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:ae[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ae[0]):ne(ae[0]):ae[0]}},Ee.link=function(oe){var ae=this.rules.inline.link.exec(oe);if(ae){var pe=ae[2].trim();if(!this.options.pedantic&&/^</.test(pe)){if(!/>$/.test(pe))return;var J=K(pe.slice(0,-1),"\\");if((pe.length-J.length)%2===0)return}else{var ve=be(ae[2],"()");if(ve>-1){var $e=ae[0].indexOf("!")===0?5:4,Re=$e+ae[1].length+ve;ae[2]=ae[2].substring(0,ve),ae[0]=ae[0].substring(0,Re).trim(),ae[3]=""}}var dt=ae[2],Yt="";if(this.options.pedantic){var I=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(dt);I&&(dt=I[1],Yt=I[3])}else Yt=ae[3]?ae[3].slice(1,-1):"";return dt=dt.trim(),/^</.test(dt)&&(this.options.pedantic&&!/>$/.test(pe)?dt=dt.slice(1):dt=dt.slice(1,-1)),De(ae,{href:dt&&dt.replace(this.rules.inline._escapes,"$1"),title:Yt&&Yt.replace(this.rules.inline._escapes,"$1")},ae[0],this.lexer)}},Ee.reflink=function(oe,ae){var pe;if((pe=this.rules.inline.reflink.exec(oe))||(pe=this.rules.inline.nolink.exec(oe))){var J=(pe[2]||pe[1]).replace(/\s+/g," ");if(J=ae[J.toLowerCase()],!J||!J.href){var ve=pe[0].charAt(0);return{type:"text",raw:ve,text:ve}}return De(pe,J,pe[0],this.lexer)}},Ee.emStrong=function(oe,ae,pe){pe===void 0&&(pe="");var J=this.rules.inline.emStrong.lDelim.exec(oe);if(J&&!(J[3]&&pe.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ve=J[1]||J[2]||"";if(!ve||ve&&(pe===""||this.rules.inline.punctuation.exec(pe))){var $e=J[0].length-1,Re,dt,Yt=$e,I=0,F=J[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(F.lastIndex=0,ae=ae.slice(-1*oe.length+$e);(J=F.exec(ae))!=null;)if(Re=J[1]||J[2]||J[3]||J[4]||J[5]||J[6],!!Re){if(dt=Re.length,J[3]||J[4]){Yt+=dt;continue}else if((J[5]||J[6])&&$e%3&&!(($e+dt)%3)){I+=dt;continue}if(Yt-=dt,!(Yt>0)){if(dt=Math.min(dt,dt+Yt+I),Math.min($e,dt)%2){var te=oe.slice(1,$e+J.index+dt);return{type:"em",raw:oe.slice(0,$e+J.index+dt+1),text:te,tokens:this.lexer.inlineTokens(te,[])}}var ie=oe.slice(2,$e+J.index+dt-1);return{type:"strong",raw:oe.slice(0,$e+J.index+dt+1),text:ie,tokens:this.lexer.inlineTokens(ie,[])}}}}}},Ee.codespan=function(oe){var ae=this.rules.inline.code.exec(oe);if(ae){var pe=ae[2].replace(/\n/g," "),J=/[^ ]/.test(pe),ve=/^ /.test(pe)&&/ $/.test(pe);return J&&ve&&(pe=pe.substring(1,pe.length-1)),pe=ne(pe,!0),{type:"codespan",raw:ae[0],text:pe}}},Ee.br=function(oe){var ae=this.rules.inline.br.exec(oe);if(ae)return{type:"br",raw:ae[0]}},Ee.del=function(oe){var ae=this.rules.inline.del.exec(oe);if(ae)return{type:"del",raw:ae[0],text:ae[2],tokens:this.lexer.inlineTokens(ae[2],[])}},Ee.autolink=function(oe,ae){var pe=this.rules.inline.autolink.exec(oe);if(pe){var J,ve;return pe[2]==="@"?(J=ne(this.options.mangle?ae(pe[1]):pe[1]),ve="mailto:"+J):(J=ne(pe[1]),ve=J),{type:"link",raw:pe[0],text:J,href:ve,tokens:[{type:"text",raw:J,text:J}]}}},Ee.url=function(oe,ae){var pe;if(pe=this.rules.inline.url.exec(oe)){var J,ve;if(pe[2]==="@")J=ne(this.options.mangle?ae(pe[0]):pe[0]),ve="mailto:"+J;else{var $e;do $e=pe[0],pe[0]=this.rules.inline._backpedal.exec(pe[0])[0];while($e!==pe[0]);J=ne(pe[0]),pe[1]==="www."?ve="http://"+J:ve=J}return{type:"link",raw:pe[0],text:J,href:ve,tokens:[{type:"text",raw:J,text:J}]}}},Ee.inlineText=function(oe,ae){var pe=this.rules.inline.text.exec(oe);if(pe){var J;return this.lexer.state.inRawBlock?J=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(pe[0]):ne(pe[0]):pe[0]:J=ne(this.options.smartypants?ae(pe[0]):pe[0]),{type:"text",raw:pe[0],text:J}}},ke}(),At=z.noopTest,Me=z.edit,ut=z.merge,Ct={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:At,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ct._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,Ct._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Ct.def=Me(Ct.def).replace("label",Ct._label).replace("title",Ct._title).getRegex(),Ct.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ct.listItemStart=Me(/^( *)(bull) */).replace("bull",Ct.bullet).getRegex(),Ct.list=Me(Ct.list).replace(/bull/g,Ct.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ct.def.source+")").getRegex(),Ct._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ct._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ct.html=Me(Ct.html,"i").replace("comment",Ct._comment).replace("tag",Ct._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ct.paragraph=Me(Ct._paragraph).replace("hr",Ct.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ct._tag).getRegex(),Ct.blockquote=Me(Ct.blockquote).replace("paragraph",Ct.paragraph).getRegex(),Ct.normal=ut({},Ct),Ct.gfm=ut({},Ct.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ct.gfm.table=Me(Ct.gfm.table).replace("hr",Ct.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ct._tag).getRegex(),Ct.pedantic=ut({},Ct.normal,{html:Me(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ct._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:At,paragraph:Me(Ct.normal._paragraph).replace("hr",Ct.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ct.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Xe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:At,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:At,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Xe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Xe.punctuation=Me(Xe.punctuation).replace(/punctuation/g,Xe._punctuation).getRegex(),Xe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Xe.escapedEmSt=/\\\*|\\_/g,Xe._comment=Me(Ct._comment).replace("(?:-->|$)","-->").getRegex(),Xe.emStrong.lDelim=Me(Xe.emStrong.lDelim).replace(/punct/g,Xe._punctuation).getRegex(),Xe.emStrong.rDelimAst=Me(Xe.emStrong.rDelimAst,"g").replace(/punct/g,Xe._punctuation).getRegex(),Xe.emStrong.rDelimUnd=Me(Xe.emStrong.rDelimUnd,"g").replace(/punct/g,Xe._punctuation).getRegex(),Xe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Xe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Xe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Xe.autolink=Me(Xe.autolink).replace("scheme",Xe._scheme).replace("email",Xe._email).getRegex(),Xe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Xe.tag=Me(Xe.tag).replace("comment",Xe._comment).replace("attribute",Xe._attribute).getRegex(),Xe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Xe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Xe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Xe.link=Me(Xe.link).replace("label",Xe._label).replace("href",Xe._href).replace("title",Xe._title).getRegex(),Xe.reflink=Me(Xe.reflink).replace("label",Xe._label).getRegex(),Xe.reflinkSearch=Me(Xe.reflinkSearch,"g").replace("reflink",Xe.reflink).replace("nolink",Xe.nolink).getRegex(),Xe.normal=ut({},Xe),Xe.pedantic=ut({},Xe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Me(/^!?\[(label)\]\((.*?)\)/).replace("label",Xe._label).getRegex(),reflink:Me(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Xe._label).getRegex()}),Xe.gfm=ut({},Xe.normal,{escape:Me(Xe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Xe.gfm.url=Me(Xe.gfm.url,"i").replace("email",Xe.gfm._extended_email).getRegex(),Xe.breaks=ut({},Xe.gfm,{br:Me(Xe.br).replace("{2,}","*").getRegex(),text:Me(Xe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var sn={block:Ct,inline:Xe},Kt=rt,dn=o.exports.defaults,Sn=sn.block,Wn=sn.inline,Jn=z.repeatString;function si(ke){return ke.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function jn(ke){var Ee="",Ae,oe,ae=ke.length;for(Ae=0;Ae<ae;Ae++)oe=ke.charCodeAt(Ae),Math.random()>.5&&(oe="x"+oe.toString(16)),Ee+="&#"+oe+";";return Ee}var Pt=function(){function ke(Ae){this.tokens=[],this.tokens.links=Object.create(null),this.options=Ae||dn,this.options.tokenizer=this.options.tokenizer||new Kt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var oe={block:Sn.normal,inline:Wn.normal};this.options.pedantic?(oe.block=Sn.pedantic,oe.inline=Wn.pedantic):this.options.gfm&&(oe.block=Sn.gfm,this.options.breaks?oe.inline=Wn.breaks:oe.inline=Wn.gfm),this.tokenizer.rules=oe}ke.lex=function(oe,ae){var pe=new ke(ae);return pe.lex(oe)},ke.lexInline=function(oe,ae){var pe=new ke(ae);return pe.inlineTokens(oe)};var Ee=ke.prototype;return Ee.lex=function(oe){oe=oe.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(oe,this.tokens);for(var ae;ae=this.inlineQueue.shift();)this.inlineTokens(ae.src,ae.tokens);return this.tokens},Ee.blockTokens=function(oe,ae){var pe=this;ae===void 0&&(ae=[]),this.options.pedantic&&(oe=oe.replace(/^ +$/gm,""));for(var J,ve,$e,Re;oe;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Yt){return(J=Yt.call({lexer:pe},oe,ae))?(oe=oe.substring(J.raw.length),ae.push(J),!0):!1}))){if(J=this.tokenizer.space(oe)){oe=oe.substring(J.raw.length),J.type&&ae.push(J);continue}if(J=this.tokenizer.code(oe)){oe=oe.substring(J.raw.length),ve=ae[ae.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J);continue}if(J=this.tokenizer.fences(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.heading(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.hr(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.blockquote(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.list(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.html(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.def(oe)){oe=oe.substring(J.raw.length),ve=ae[ae.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title});continue}if(J=this.tokenizer.table(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.lheading(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if($e=oe,this.options.extensions&&this.options.extensions.startBlock&&function(){var Yt=1/0,I=oe.slice(1),F=void 0;pe.options.extensions.startBlock.forEach(function(te){F=te.call({lexer:this},I),typeof F=="number"&&F>=0&&(Yt=Math.min(Yt,F))}),Yt<1/0&&Yt>=0&&($e=oe.substring(0,Yt+1))}(),this.state.top&&(J=this.tokenizer.paragraph($e))){ve=ae[ae.length-1],Re&&ve.type==="paragraph"?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J),Re=$e.length!==oe.length,oe=oe.substring(J.raw.length);continue}if(J=this.tokenizer.text(oe)){oe=oe.substring(J.raw.length),ve=ae[ae.length-1],ve&&ve.type==="text"?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J);continue}if(oe){var dt="Infinite loop on byte: "+oe.charCodeAt(0);if(this.options.silent){console.error(dt);break}else throw new Error(dt)}}return this.state.top=!0,ae},Ee.inline=function(oe,ae){this.inlineQueue.push({src:oe,tokens:ae})},Ee.inlineTokens=function(oe,ae){var pe=this;ae===void 0&&(ae=[]);var J,ve,$e,Re=oe,dt,Yt,I;if(this.tokens.links){var F=Object.keys(this.tokens.links);if(F.length>0)for(;(dt=this.tokenizer.rules.inline.reflinkSearch.exec(Re))!=null;)F.includes(dt[0].slice(dt[0].lastIndexOf("[")+1,-1))&&(Re=Re.slice(0,dt.index)+"["+Jn("a",dt[0].length-2)+"]"+Re.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(dt=this.tokenizer.rules.inline.blockSkip.exec(Re))!=null;)Re=Re.slice(0,dt.index)+"["+Jn("a",dt[0].length-2)+"]"+Re.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(dt=this.tokenizer.rules.inline.escapedEmSt.exec(Re))!=null;)Re=Re.slice(0,dt.index)+"++"+Re.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;oe;)if(Yt||(I=""),Yt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(ie){return(J=ie.call({lexer:pe},oe,ae))?(oe=oe.substring(J.raw.length),ae.push(J),!0):!1}))){if(J=this.tokenizer.escape(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.tag(oe)){oe=oe.substring(J.raw.length),ve=ae[ae.length-1],ve&&J.type==="text"&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(J=this.tokenizer.link(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.reflink(oe,this.tokens.links)){oe=oe.substring(J.raw.length),ve=ae[ae.length-1],ve&&J.type==="text"&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(J=this.tokenizer.emStrong(oe,Re,I)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.codespan(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.br(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.del(oe)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.autolink(oe,jn)){oe=oe.substring(J.raw.length),ae.push(J);continue}if(!this.state.inLink&&(J=this.tokenizer.url(oe,jn))){oe=oe.substring(J.raw.length),ae.push(J);continue}if($e=oe,this.options.extensions&&this.options.extensions.startInline&&function(){var ie=1/0,me=oe.slice(1),le=void 0;pe.options.extensions.startInline.forEach(function(Ie){le=Ie.call({lexer:this},me),typeof le=="number"&&le>=0&&(ie=Math.min(ie,le))}),ie<1/0&&ie>=0&&($e=oe.substring(0,ie+1))}(),J=this.tokenizer.inlineText($e,si)){oe=oe.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(I=J.raw.slice(-1)),Yt=!0,ve=ae[ae.length-1],ve&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(oe){var te="Infinite loop on byte: "+oe.charCodeAt(0);if(this.options.silent){console.error(te);break}else throw new Error(te)}}return ae},t(ke,null,[{key:"rules",get:function(){return{block:Sn,inline:Wn}}}]),ke}(),pn=o.exports.defaults,Ci=z.cleanUrl,Te=z.escape,Fe=function(){function ke(Ae){this.options=Ae||pn}var Ee=ke.prototype;return Ee.code=function(oe,ae,pe){var J=(ae||"").match(/\S*/)[0];if(this.options.highlight){var ve=this.options.highlight(oe,J);ve!=null&&ve!==oe&&(pe=!0,oe=ve)}return oe=oe.replace(/\n$/,"")+`
`,J?'<pre><code class="'+this.options.langPrefix+Te(J,!0)+'">'+(pe?oe:Te(oe,!0))+`</code></pre>
`:"<pre><code>"+(pe?oe:Te(oe,!0))+`</code></pre>
`},Ee.blockquote=function(oe){return`<blockquote>
`+oe+`</blockquote>
`},Ee.html=function(oe){return oe},Ee.heading=function(oe,ae,pe,J){return this.options.headerIds?"<h"+ae+' id="'+this.options.headerPrefix+J.slug(pe)+'">'+oe+"</h"+ae+`>
`:"<h"+ae+">"+oe+"</h"+ae+`>
`},Ee.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Ee.list=function(oe,ae,pe){var J=ae?"ol":"ul",ve=ae&&pe!==1?' start="'+pe+'"':"";return"<"+J+ve+`>
`+oe+"</"+J+`>
`},Ee.listitem=function(oe){return"<li>"+oe+`</li>
`},Ee.checkbox=function(oe){return"<input "+(oe?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Ee.paragraph=function(oe){return"<p>"+oe+`</p>
`},Ee.table=function(oe,ae){return ae&&(ae="<tbody>"+ae+"</tbody>"),`<table>
<thead>
`+oe+`</thead>
`+ae+`</table>
`},Ee.tablerow=function(oe){return`<tr>
`+oe+`</tr>
`},Ee.tablecell=function(oe,ae){var pe=ae.header?"th":"td",J=ae.align?"<"+pe+' align="'+ae.align+'">':"<"+pe+">";return J+oe+"</"+pe+`>
`},Ee.strong=function(oe){return"<strong>"+oe+"</strong>"},Ee.em=function(oe){return"<em>"+oe+"</em>"},Ee.codespan=function(oe){return"<code>"+oe+"</code>"},Ee.br=function(){return this.options.xhtml?"<br/>":"<br>"},Ee.del=function(oe){return"<del>"+oe+"</del>"},Ee.link=function(oe,ae,pe){if(oe=Ci(this.options.sanitize,this.options.baseUrl,oe),oe===null)return pe;var J='<a href="'+Te(oe)+'"';return ae&&(J+=' title="'+ae+'"'),J+=">"+pe+"</a>",J},Ee.image=function(oe,ae,pe){if(oe=Ci(this.options.sanitize,this.options.baseUrl,oe),oe===null)return pe;var J='<img src="'+oe+'" alt="'+pe+'"';return ae&&(J+=' title="'+ae+'"'),J+=this.options.xhtml?"/>":">",J},Ee.text=function(oe){return oe},ke}(),pt=function(){function ke(){}var Ee=ke.prototype;return Ee.strong=function(oe){return oe},Ee.em=function(oe){return oe},Ee.codespan=function(oe){return oe},Ee.del=function(oe){return oe},Ee.html=function(oe){return oe},Ee.text=function(oe){return oe},Ee.link=function(oe,ae,pe){return""+pe},Ee.image=function(oe,ae,pe){return""+pe},Ee.br=function(){return""},ke}(),at=function(){function ke(){this.seen={}}var Ee=ke.prototype;return Ee.serialize=function(oe){return oe.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Ee.getNextSafeSlug=function(oe,ae){var pe=oe,J=0;if(this.seen.hasOwnProperty(pe)){J=this.seen[oe];do J++,pe=oe+"-"+J;while(this.seen.hasOwnProperty(pe))}return ae||(this.seen[oe]=J,this.seen[pe]=0),pe},Ee.slug=function(oe,ae){ae===void 0&&(ae={});var pe=this.serialize(oe);return this.getNextSafeSlug(pe,ae.dryrun)},ke}(),bt=Fe,wi=pt,Vt=at,Tt=o.exports.defaults,qt=z.unescape,Gt=function(){function ke(Ae){this.options=Ae||Tt,this.options.renderer=this.options.renderer||new bt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new wi,this.slugger=new Vt}ke.parse=function(oe,ae){var pe=new ke(ae);return pe.parse(oe)},ke.parseInline=function(oe,ae){var pe=new ke(ae);return pe.parseInline(oe)};var Ee=ke.prototype;return Ee.parse=function(oe,ae){ae===void 0&&(ae=!0);var pe="",J,ve,$e,Re,dt,Yt,I,F,te,ie,me,le,Ie,Pe,Ze,ot,kt,Ft,Ot,wt=oe.length;for(J=0;J<wt;J++){if(ie=oe[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]&&(Ot=this.options.extensions.renderers[ie.type].call({parser:this},ie),Ot!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ie.type))){pe+=Ot||"";continue}switch(ie.type){case"space":continue;case"hr":{pe+=this.renderer.hr();continue}case"heading":{pe+=this.renderer.heading(this.parseInline(ie.tokens),ie.depth,qt(this.parseInline(ie.tokens,this.textRenderer)),this.slugger);continue}case"code":{pe+=this.renderer.code(ie.text,ie.lang,ie.escaped);continue}case"table":{for(F="",I="",Re=ie.header.length,ve=0;ve<Re;ve++)I+=this.renderer.tablecell(this.parseInline(ie.header[ve].tokens),{header:!0,align:ie.align[ve]});for(F+=this.renderer.tablerow(I),te="",Re=ie.rows.length,ve=0;ve<Re;ve++){for(Yt=ie.rows[ve],I="",dt=Yt.length,$e=0;$e<dt;$e++)I+=this.renderer.tablecell(this.parseInline(Yt[$e].tokens),{header:!1,align:ie.align[$e]});te+=this.renderer.tablerow(I)}pe+=this.renderer.table(F,te);continue}case"blockquote":{te=this.parse(ie.tokens),pe+=this.renderer.blockquote(te);continue}case"list":{for(me=ie.ordered,le=ie.start,Ie=ie.loose,Re=ie.items.length,te="",ve=0;ve<Re;ve++)Ze=ie.items[ve],ot=Ze.checked,kt=Ze.task,Pe="",Ze.task&&(Ft=this.renderer.checkbox(ot),Ie?Ze.tokens.length>0&&Ze.tokens[0].type==="paragraph"?(Ze.tokens[0].text=Ft+" "+Ze.tokens[0].text,Ze.tokens[0].tokens&&Ze.tokens[0].tokens.length>0&&Ze.tokens[0].tokens[0].type==="text"&&(Ze.tokens[0].tokens[0].text=Ft+" "+Ze.tokens[0].tokens[0].text)):Ze.tokens.unshift({type:"text",text:Ft}):Pe+=Ft),Pe+=this.parse(Ze.tokens,Ie),te+=this.renderer.listitem(Pe,kt,ot);pe+=this.renderer.list(te,me,le);continue}case"html":{pe+=this.renderer.html(ie.text);continue}case"paragraph":{pe+=this.renderer.paragraph(this.parseInline(ie.tokens));continue}case"text":{for(te=ie.tokens?this.parseInline(ie.tokens):ie.text;J+1<wt&&oe[J+1].type==="text";)ie=oe[++J],te+=`
`+(ie.tokens?this.parseInline(ie.tokens):ie.text);pe+=ae?this.renderer.paragraph(te):te;continue}default:{var oi='Token with "'+ie.type+'" type was not found.';if(this.options.silent){console.error(oi);return}else throw new Error(oi)}}}return pe},Ee.parseInline=function(oe,ae){ae=ae||this.renderer;var pe="",J,ve,$e,Re=oe.length;for(J=0;J<Re;J++){if(ve=oe[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ve.type]&&($e=this.options.extensions.renderers[ve.type].call({parser:this},ve),$e!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ve.type))){pe+=$e||"";continue}switch(ve.type){case"escape":{pe+=ae.text(ve.text);break}case"html":{pe+=ae.html(ve.text);break}case"link":{pe+=ae.link(ve.href,ve.title,this.parseInline(ve.tokens,ae));break}case"image":{pe+=ae.image(ve.href,ve.title,ve.text);break}case"strong":{pe+=ae.strong(this.parseInline(ve.tokens,ae));break}case"em":{pe+=ae.em(this.parseInline(ve.tokens,ae));break}case"codespan":{pe+=ae.codespan(ve.text);break}case"br":{pe+=ae.br();break}case"del":{pe+=ae.del(this.parseInline(ve.tokens,ae));break}case"text":{pe+=ae.text(ve.text);break}default:{var dt='Token with "'+ve.type+'" type was not found.';if(this.options.silent){console.error(dt);return}else throw new Error(dt)}}}return pe},ke}(),Bt=Pt,fr=Gt,ei=rt,He=Fe,Fa=pt,Vn=at,ti=z.merge,Go=z.checkSanitizeDeprecation,vn=z.escape,ir=o.exports.getDefaults,sl=o.exports.changeDefaults,qi=o.exports.defaults;function Ye(ke,Ee,Ae){if(typeof ke>"u"||ke===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");if(typeof Ee=="function"&&(Ae=Ee,Ee=null),Ee=ti({},Ye.defaults,Ee||{}),Go(Ee),Ae){var oe=Ee.highlight,ae;try{ae=Bt.lex(ke,Ee)}catch($e){return Ae($e)}var pe=function(Re){var dt;if(!Re)try{Ee.walkTokens&&Ye.walkTokens(ae,Ee.walkTokens),dt=fr.parse(ae,Ee)}catch(Yt){Re=Yt}return Ee.highlight=oe,Re?Ae(Re):Ae(null,dt)};if(!oe||oe.length<3||(delete Ee.highlight,!ae.length))return pe();var J=0;Ye.walkTokens(ae,function($e){$e.type==="code"&&(J++,setTimeout(function(){oe($e.text,$e.lang,function(Re,dt){if(Re)return pe(Re);dt!=null&&dt!==$e.text&&($e.text=dt,$e.escaped=!0),J--,J===0&&pe()})},0))}),J===0&&pe();return}try{var ve=Bt.lex(ke,Ee);return Ee.walkTokens&&Ye.walkTokens(ve,Ee.walkTokens),fr.parse(ve,Ee)}catch($e){if($e.message+=`
Please report this to https://github.com/markedjs/marked.`,Ee.silent)return"<p>An error occurred:</p><pre>"+vn($e.message+"",!0)+"</pre>";throw $e}}Ye.options=Ye.setOptions=function(ke){return ti(Ye.defaults,ke),sl(Ye.defaults),Ye},Ye.getDefaults=ir,Ye.defaults=qi,Ye.use=function(){for(var ke=this,Ee=arguments.length,Ae=new Array(Ee),oe=0;oe<Ee;oe++)Ae[oe]=arguments[oe];var ae=ti.apply(void 0,[{}].concat(Ae)),pe=Ye.defaults.extensions||{renderers:{},childTokens:{}},J;Ae.forEach(function(ve){if(ve.extensions&&(J=!0,ve.extensions.forEach(function(Re){if(!Re.name)throw new Error("extension name required");if(Re.renderer){var dt=pe.renderers?pe.renderers[Re.name]:null;dt?pe.renderers[Re.name]=function(){for(var Yt=arguments.length,I=new Array(Yt),F=0;F<Yt;F++)I[F]=arguments[F];var te=Re.renderer.apply(this,I);return te===!1&&(te=dt.apply(this,I)),te}:pe.renderers[Re.name]=Re.renderer}if(Re.tokenizer){if(!Re.level||Re.level!=="block"&&Re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");pe[Re.level]?pe[Re.level].unshift(Re.tokenizer):pe[Re.level]=[Re.tokenizer],Re.start&&(Re.level==="block"?pe.startBlock?pe.startBlock.push(Re.start):pe.startBlock=[Re.start]:Re.level==="inline"&&(pe.startInline?pe.startInline.push(Re.start):pe.startInline=[Re.start]))}Re.childTokens&&(pe.childTokens[Re.name]=Re.childTokens)})),ve.renderer&&function(){var Re=Ye.defaults.renderer||new He,dt=function(F){var te=Re[F];Re[F]=function(){for(var ie=arguments.length,me=new Array(ie),le=0;le<ie;le++)me[le]=arguments[le];var Ie=ve.renderer[F].apply(Re,me);return Ie===!1&&(Ie=te.apply(Re,me)),Ie}};for(var Yt in ve.renderer)dt(Yt);ae.renderer=Re}(),ve.tokenizer&&function(){var Re=Ye.defaults.tokenizer||new ei,dt=function(F){var te=Re[F];Re[F]=function(){for(var ie=arguments.length,me=new Array(ie),le=0;le<ie;le++)me[le]=arguments[le];var Ie=ve.tokenizer[F].apply(Re,me);return Ie===!1&&(Ie=te.apply(Re,me)),Ie}};for(var Yt in ve.tokenizer)dt(Yt);ae.tokenizer=Re}(),ve.walkTokens){var $e=Ye.defaults.walkTokens;ae.walkTokens=function(Re){ve.walkTokens.call(ke,Re),$e&&$e(Re)}}J&&(ae.extensions=pe),Ye.setOptions(ae)})},Ye.walkTokens=function(ke,Ee){for(var Ae=function(){var J=ae.value;switch(Ee(J),J.type){case"table":{for(var ve=s(J.header),$e;!($e=ve()).done;){var Re=$e.value;Ye.walkTokens(Re.tokens,Ee)}for(var dt=s(J.rows),Yt;!(Yt=dt()).done;)for(var I=Yt.value,F=s(I),te;!(te=F()).done;){var ie=te.value;Ye.walkTokens(ie.tokens,Ee)}break}case"list":{Ye.walkTokens(J.items,Ee);break}default:Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[J.type]?Ye.defaults.extensions.childTokens[J.type].forEach(function(me){Ye.walkTokens(J[me],Ee)}):J.tokens&&Ye.walkTokens(J.tokens,Ee)}},oe=s(ke),ae;!(ae=oe()).done;)Ae()},Ye.parseInline=function(ke,Ee){if(typeof ke>"u"||ke===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");Ee=ti({},Ye.defaults,Ee||{}),Go(Ee);try{var Ae=Bt.lexInline(ke,Ee);return Ee.walkTokens&&Ye.walkTokens(Ae,Ee.walkTokens),fr.parseInline(Ae,Ee)}catch(oe){if(oe.message+=`
Please report this to https://github.com/markedjs/marked.`,Ee.silent)return"<p>An error occurred:</p><pre>"+vn(oe.message+"",!0)+"</pre>";throw oe}},Ye.Parser=fr,Ye.parser=fr.parse,Ye.Renderer=He,Ye.TextRenderer=Fa,Ye.Lexer=Bt,Ye.lexer=Bt.lex,Ye.Tokenizer=ei,Ye.Slugger=Vn,Ye.parse=Ye;var no=Ye;return no})})();cf||exports;(cf||exports).Parser;(cf||exports).parser;var oYe=(cf||exports).Renderer;(cf||exports).TextRenderer;(cf||exports).Lexer;(cf||exports).lexer;(cf||exports).Tokenizer;(cf||exports).Slugger;var aYe=(cf||exports).parse;function lYe(i,e={},t={}){var n;const r=new Je;let s=!1;const o=r.add(new oa),a=sY(e),u=function(S){let y;try{y=Nz(decodeURIComponent(S))}catch{}return y?(y=Rxe(y,E=>{if(i.uris&&i.uris[E])return rn.revive(i.uris[E])}),encodeURIComponent(JSON.stringify(y))):S},d=function(S,y){const E=i.uris&&i.uris[S];let A=rn.revive(E);return y?S.startsWith(Tn.data+":")?S:(A||(A=rn.parse(S)),nue.asBrowserUri(A).toString(!0)):!A||rn.parse(S).toString()===A.toString()?S:(A.query&&(A=A.with({query:u(A.query)})),A.toString())};let h;const f=new Promise(S=>h=S),p=new oYe;if(p.image=(S,y,E)=>{let A=[],N=[];return S&&({href:S,dimensions:A}=p3e(S),N.push(`src="${S}"`)),E&&N.push(`alt="${E}"`),y&&N.push(`title="${y}"`),A.length&&(N=N.concat(A)),"<img "+N.join(" ")+">"},p.link=(S,y,E)=>(S===E&&(E=A6(E)),S=d(S,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(S)||(S=DJ(e.baseUrl,S).toString())),y=A6(y),S=A6(S),!S||S.match(/^data:|javascript:/i)||S.match(/^command:/i)&&!i.isTrusted||S.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?E:(S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${S}" title="${y||S}">${E}</a>`)),p.paragraph=S=>`<p>${S}</p>`,e.codeBlockRenderer&&(p.code=(S,y)=>{const E=e.codeBlockRenderer(y,S),A=Khe.nextId();return aq(Promise.all([E,f]),o.token).then(N=>{var V;if(!s&&N){const M=a.querySelector(`div[data-code="${A}"]`);M&&v0(M,N[0]),(V=e.asyncRenderCallback)===null||V===void 0||V.call(e)}}).catch(()=>{}),`<div class="code" data-code="${A}">${mq(S)}</div>`}),e.actionHandler){const S=e.actionHandler.disposables.add(new Ui(a,"click")),y=e.actionHandler.disposables.add(new Ui(a,"auxclick"));e.actionHandler.disposables.add(Rt.any(S.event,y.event)(E=>{const A=new Qu(E);if(!A.leftButton&&!A.middleButton)return;let N=A.target;if(!(N.tagName!=="A"&&(N=N.parentElement,!N||N.tagName!=="A")))try{const V=N.dataset.href;V&&e.actionHandler.callback(V,A)}catch(V){gn(V)}finally{A.preventDefault()}}))}i.supportHtml||(t.sanitizer=S=>(i.isTrusted?S.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?S:"",t.sanitize=!0,t.silent=!0),t.renderer=p;let m=(n=i.value)!==null&&n!==void 0?n:"";m.length>1e5&&(m=`${m.substr(0,1e5)}`),i.supportThemeIcons&&(m=m4e(m));let v=aYe(m,t);i.supportThemeIcons&&(v=ob(v).map(y=>typeof y=="string"?y:y.outerHTML).join(""));const L=new DOMParser().parseFromString(mie(i,v),"text/html");if(L.body.querySelectorAll("img").forEach(S=>{if(S.src){let y=d(S.src,!0);try{const E=rn.parse(y);e.baseUrl&&E.scheme===Tn.file&&(y=DJ(e.baseUrl,y).toString())}catch{}S.src=y}}),a.innerHTML=mie(i,L.body.innerHTML),h(),e.asyncRenderCallback)for(const S of a.getElementsByTagName("img")){const y=r.add(Ge(S,"load",()=>{y.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{s=!0,o.cancel(),r.dispose()}}}function mie(i,e){const{config:t,allowedSchemes:n}=uYe(i);gie("uponSanitizeAttribute",(s,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(s.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const r=document.createElement("a");gie("afterSanitizeAttributes",s=>{for(const o of["href","src"])s.hasAttribute(o)&&(r.href=s.getAttribute(o),n.includes(r.protocol.replace(/:$/,""))||s.removeAttribute(o))});try{return sYe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{pie("uponSanitizeAttribute"),pie("afterSanitizeAttributes")}}function uYe(i){const e=[Tn.http,Tn.https,Tn.mailto,Tn.data,Tn.file,Tn.vscodeFileResource,Tn.vscodeRemote,Tn.vscodeRemoteResource];return i.isTrusted&&e.push(Tn.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var cYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_ie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},dYe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},hW;let Fp=class Cpe{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new Ce,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const r=new Je;return{element:r.add(lYe(e,Object.assign(Object.assign({},this._getRenderOptions(e,r)),t),n)).element,dispose:()=>r.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,r)=>dYe(this,void 0,void 0,function*(){var s,o,a,u;let d;n?d=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(d=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),d||(d="plaintext"),this._modeService.triggerMode(d);const h=(o=yield Wr.getPromise(d))!==null&&o!==void 0?o:void 0,f=document.createElement("span");if(f.innerHTML=(u=(a=Cpe._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(r,this._modeService.languageIdCodec,h))!==null&&u!==void 0?u:Ide(r,this._modeService.languageIdCodec,h),this._options.editor){const p=this._options.editor.getOption(43);Aa.applyFontInfoSlow(f,p)}else this._options.codeBlockFontFamily&&(f.style.fontFamily=this._options.codeBlockFontFamily);return f}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(gn),disposables:t}}}};Fp._ttpTokenizer=(hW=window.trustedTypes)===null||hW===void 0?void 0:hW.createPolicy("tokenizeToString",{createHTML(i,e,t){return Ide(i,e,t)}});Fp=cYe([_ie(1,Fo),_ie(2,Ll)],Fp);var hYe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class fYe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function gYe(i,e,t,n,r){return hYe(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(i.provideHover(t,n,r));if(s&&mYe(s))return new fYe(i,s,e)}catch(s){Ro(s)}})}function wpe(i,e,t){const r=TA.ordered(i).map((s,o)=>gYe(s,o,i,e,t));return Gs.fromPromises(r).coalesce()}function pYe(i,e,t){return wpe(i,e,t).map(n=>n.hover).toPromise()}Sg("_executeHoverProvider",(i,e)=>pYe(i,e,Fn.None));function mYe(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var _Ye=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const vie=qe;class u2{constructor(e,t,n,r){this.owner=e,this.range=t,this.contents=n,this.ordinal=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let EU=class{constructor(e,t,n,r,s){this._editor=e,this._hover=t,this._modeService=n,this._openerService=r,this._configurationService=s}createLoadingMessage(e){return new u2(this,e.range,[new Mp().appendText(C("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,s=n.getLineMaxColumn(r),o=[];let a=1e3;const u=n.getLineLength(r),d=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});typeof h=="number"&&u>=h&&o.push(new u2(this,e.range,[{value:C("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const f of t){const p=f.range.startLineNumber===r?f.range.startColumn:1,m=f.range.endLineNumber===r?f.range.endColumn:s,v=f.options.hoverMessage;if(!v||hO(v))continue;const b=new Q(e.range.startLineNumber,p,e.range.startLineNumber,m);o.push(new u2(this,b,Iq(v),a++))}return o}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Gs.EMPTY;const r=this._editor.getModel();if(!TA.has(r))return Gs.EMPTY;const s=new Le(e.range.startLineNumber,e.range.startColumn);return wpe(r,s,n).filter(o=>!hO(o.hover.contents)).map(o=>{const a=o.hover.range?Q.lift(o.hover.range):e.range;return new u2(this,a,o.hover.contents,o.ordinal)})}renderHoverParts(e,t,n){return ype(e,t,this._editor,this._hover,this._modeService,this._openerService)}};EU=_Ye([fW(2,Fo),fW(3,Ll),fW(4,nr)],EU);function ype(i,e,t,n,r,s){i.sort((a,u)=>a.ordinal-u.ordinal);const o=new Je;for(const a of i)for(const u of a.contents){if(hO(u))continue;const d=vie("div.hover-row.markdown-hover"),h=Be(d,vie("div.hover-contents")),f=o.add(new Fp({editor:t},r,s));o.add(f.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",n.onContentsChanged()}));const p=o.add(f.render(u));h.appendChild(p.element),e.appendChild(d)}return o}var Spe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},n5=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class bie{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let xU=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._dispoables=new Je,this._markers=[],this._nextIdx=-1,rn.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const r=this._configService.getValue("problems.sortOrder"),s=(a,u)=>{let d=yA(a.resource.toString(),u.resource.toString());return r==="position"?d=Q.compareRangesUsingStarts(a,u)||Ir.compare(a.severity,u.severity):d=Ir.compare(a.severity,u.severity)||Q.compareRangesUsingStarts(a,u),d},o=()=>{this._markers=this._markerService.read({resource:rn.isUri(e)?e:void 0,severities:Ir.Error|Ir.Warning|Ir.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)};o(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(u=>this._resourceFilter(u)))&&(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new bie(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let r=!1,s=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());s<0&&(s=Dq(this._markers,{resource:e.uri},(o,a)=>yA(o.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let o=s;o<this._markers.length;o++){let a=Q.lift(this._markers[o]);if(a.isEmpty()){const u=e.getWordAtPosition(a.getStartPosition());u&&(a=new Q(a.startLineNumber,u.startColumn,a.startLineNumber,u.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,r=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}r||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let r=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(e,t){let n=this._markers.findIndex(r=>r.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(Q.containsPosition(this._markers[n],t))return new bie(this._markers[n],n+1,this._markers.length)}}};xU=Spe([n5(1,xM),n5(2,nr)],xU);const Lpe=gi("IMarkerNavigationService");let DU=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Tu}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new xU(e,this._markerService,this._configService)}};DU=Spe([n5(0,xM),n5(1,nr)],DU);U0(Lpe,DU,!0);var IU;(function(i){function e(t){switch(t){case Ur.Ignore:return"severity-ignore "+_e.info.classNames;case Ur.Info:return _e.info.classNames;case Ur.Warning:return _e.warning.classNames;case Ur.Error:return _e.error.classNames;default:return""}}i.className=e})(IU||(IU={}));hr((i,e)=>{const t=i.getColor(cTe);if(t){const s=_e.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.text-search-provider-messages .providerMessage ${s},
			.extensions-viewlet > .extensions ${s} {
				color: ${t};
			}
		`)}const n=i.getColor(dTe);if(n){const s=_e.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.extension-editor ${s},
			.text-search-provider-messages .providerMessage ${s},
			.preferences-editor ${s} {
				color: ${n};
			}
		`)}const r=i.getColor(hTe);if(r){const s=_e.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.text-search-provider-messages .providerMessage ${s},
			.extension-editor ${s} {
				color: ${r};
			}
		`)}});var vYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},nw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class bYe{constructor(e,t,n,r,s){this._openerService=r,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Je,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(eo(this._relatedBlock,"click",a=>{a.preventDefault();const u=this._relatedDiagnostics.get(a.target);u&&n(u)})),this._scrollable=new dG(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){ri(this._disposables)}update(e){const{source:t,message:n,relatedInformation:r,code:s}=e;let o=((t==null?void 0:t.length)||0)+2;s&&(typeof s=="string"?o+=s.length:o+=s.value.length);const a=sg(n);this._lines=a.length,this._longestLineLength=0;for(const p of a)this._longestLineLength=Math.max(p.length+o,this._longestLineLength);Hs(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let u=this._messageBlock;for(const p of a)u=document.createElement("div"),u.innerText=p,p===""&&(u.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(u);if(t||s){const p=document.createElement("span");if(p.classList.add("details"),u.appendChild(p),t){const m=document.createElement("span");m.innerText=t,m.classList.add("source"),p.appendChild(m)}if(s)if(typeof s=="string"){const m=document.createElement("span");m.innerText=`(${s})`,m.classList.add("code"),p.appendChild(m)}else{this._codeLink=qe("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=v=>{this._openerService.open(s.target,{allowCommands:!0}),v.preventDefault(),v.stopPropagation()};const m=Be(this._codeLink,qe("span"));m.innerText=s.value,p.appendChild(this._codeLink)}}if(Hs(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),vl(r)){const p=this._relatedBlock.appendChild(document.createElement("div"));p.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const m of r){let v=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${Xge(m.resource)}(${m.startLineNumber}, ${m.startColumn}): `,b.title=this._labelService.getUriLabel(m.resource),this._relatedDiagnostics.set(b,m);let L=document.createElement("span");L.innerText=m.message,v.appendChild(b),v.appendChild(L),this._lines+=1,p.appendChild(v)}}const d=this._editor.getOption(43),h=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),f=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:h,scrollHeight:f})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Ir.Error:t=C("Error","Error");break;case Ir.Warning:t=C("Warning","Warning");break;case Ir.Info:t=C("Info","Info");break;case Ir.Hint:t=C("Hint","Hint");break}let n=C("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const r=this._editor.getModel();return r&&e.startLineNumber<=r.getLineCount()&&e.startLineNumber>=1&&(n=`${r.getLineContent(e.startLineNumber)}, ${n}`),n}}let uS=class Epe extends e5{constructor(e,t,n,r,s,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=r,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new Je,this._onDidSelectRelatedInformation=new Ce,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Ir.Warning,this._backgroundColor=ye.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(SYe);let t=TU,n=CYe;this._severity===Ir.Warning?(t=kU,n=wYe):this._severity===Ir.Info&&(t=NU,n=yYe);const r=e.getColor(t),s=e.getColor(n);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:s,primaryHeadingColor:e.getColor(Yge),secondaryHeadingColor:e.getColor(Zge)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(r=>this.editor.focus()));const t=[],n=this._menuService.createMenu(Epe.TitleMenu,this._contextKeyService);sGe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=Be(e,qe(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new bYe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let r=Q.lift(e);const s=this.editor.getPosition();let o=s&&r.containsPosition(s)?s:r.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const u=n>1?C("problems","{0} of {1} problems",t,n):C("change","{0} of {1} problem",t,n);this.setTitle(fc(a.uri),u)}this._icon.className=`codicon ${IU.className(Ir.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};uS.TitleMenu=new Mt("gotoErrorTitleMenu");uS=vYe([nw(1,Er),nw(2,Ll),nw(3,CC),nw(4,Nn),nw(5,cn),nw(6,yM)],uS);let Cie=xA(I2,hce),wie=xA(vp,T8),yie=xA(qh,Rq);const TU=we("editorMarkerNavigationError.background",{dark:Cie,light:Cie,hc:fs},C("editorMarkerNavigationError","Editor marker navigation widget error color.")),CYe=we("editorMarkerNavigationError.headerBackground",{dark:tr(TU,.1),light:tr(TU,.1),hc:null},C("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),kU=we("editorMarkerNavigationWarning.background",{dark:wie,light:wie,hc:fs},C("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),wYe=we("editorMarkerNavigationWarning.headerBackground",{dark:tr(kU,.1),light:tr(kU,.1),hc:"#0C141F"},C("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),NU=we("editorMarkerNavigationInfo.background",{dark:yie,light:yie,hc:fs},C("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),yYe=we("editorMarkerNavigationInfo.headerBackground",{dark:tr(NU,.1),light:tr(NU,.1),hc:null},C("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),SYe=we("editorMarkerNavigation.background",{dark:sc,light:sc,hc:sc},C("editorMarkerNavigationBackground","Editor marker navigation widget background."));var LYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},gP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xpe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let N0=class S4{constructor(e,t,n,r,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=r,this._instantiationService=s,this._sessionDispoables=new Je,this._editor=e,this._widgetVisible=Dpe.bindTo(this._contextKeyService)}static get(e){return e.getContribution(S4.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(uS,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var r,s,o;(!(!((r=this._model)===null||r===void 0)&&r.selected)||!Q.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:Q.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Le(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return xpe(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);r&&(S4.get(r).close(),S4.get(r).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};N0.ID="editor.contrib.markerController";N0=LYe([gP(1,Lpe),gP(2,cn),gP(3,Ti),gP(4,Nn)],N0);class GB extends Et{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return xpe(this,void 0,void 0,function*(){t.hasModel()&&N0.get(t).nagivate(this._next,this._multiFile)})}}class Cp extends GB{constructor(){super(!0,!1,{id:Cp.ID,label:Cp.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:578,weight:100},menuOpts:{menuId:uS.TitleMenu,title:Cp.LABEL,icon:co("marker-navigation-next",_e.arrowDown,C("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Cp.ID="editor.action.marker.next";Cp.LABEL=C("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class cS extends GB{constructor(){super(!1,!1,{id:cS.ID,label:cS.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:1602,weight:100},menuOpts:{menuId:uS.TitleMenu,title:Cp.LABEL,icon:co("marker-navigation-previous",_e.arrowUp,C("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}cS.ID="editor.action.marker.prev";cS.LABEL=C("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class EYe extends GB{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:C("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:66,weight:100},menuOpts:{menuId:Mt.MenubarGoMenu,title:C({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class xYe extends GB{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:C("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:1090,weight:100},menuOpts:{menuId:Mt.MenubarGoMenu,title:C({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}ki(N0.ID,N0);it(Cp);it(cS);it(EYe);it(xYe);const Dpe=new Dt("markersNavigationVisible",!1),DYe=Po.bindToContribution(N0.get);nt(new DYe({id:"closeMarkersNavigation",precondition:Dpe,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:de.focus,primary:9,secondary:[1033]}}));var IYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Sie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Ic=qe;class TYe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const Lie={type:1,filter:{include:zn.QuickFix}};let AU=class{constructor(e,t,n,r){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=r,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,s=n.getLineMaxColumn(r),o=[];for(const a of t){const u=a.range.startLineNumber===r?a.range.startColumn:1,d=a.range.endLineNumber===r?a.range.endColumn:s,h=this._markerDecorationsService.getMarker(n.uri,a);if(!h)continue;const f=new Q(e.range.startLineNumber,u,e.range.startLineNumber,d);o.push(new TYe(this,f,h))}return o}renderHoverParts(e,t,n){if(!e.length)return Oe.None;const r=new Je;e.forEach(o=>t.appendChild(this.renderMarkerHover(o,r)));const s=e.length===1?e[0]:e.sort((o,a)=>Ir.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(s,n,r),r}renderMarkerHover(e,t){const n=Ic("div.hover-row"),r=Be(n,Ic("div.marker.hover-contents")),{source:s,message:o,code:a,relatedInformation:u}=e.marker;this._editor.applyFontInfo(r);const d=Be(r,Ic("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=o,s||a)if(a&&typeof a!="string"){const h=Ic("span");if(s){const v=Be(h,Ic("span"));v.innerText=s}const f=Be(h,Ic("a.code-link"));f.setAttribute("href",a.target.toString()),t.add(Ge(f,"click",v=>{this._openerService.open(a.target,{allowCommands:!0}),v.preventDefault(),v.stopPropagation()}));const p=Be(f,Ic("span"));p.innerText=a.value;const m=Be(r,h);m.style.opacity="0.6",m.style.paddingLeft="6px"}else{const h=Be(r,Ic("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(vl(u))for(const{message:h,resource:f,startLineNumber:p,startColumn:m}of u){const v=Be(r,Ic("div"));v.style.marginTop="8px";const b=Be(v,Ic("a"));b.innerText=`${fc(f)}(${p}, ${m}): `,b.style.cursor="pointer",t.add(Ge(b,"click",S=>{S.stopPropagation(),S.preventDefault(),this._openerService&&this._openerService.open(f,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:p,startColumn:m}}}).catch(gn)}));const L=Be(v,Ic("span"));L.innerText=h,this._editor.applyFontInfo(L)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===Ir.Error||e.marker.severity===Ir.Warning||e.marker.severity===Ir.Info)&&t.addAction({label:C("view problem","View Problem"),commandId:Cp.ID,run:()=>{this._hover.hide(),N0.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const r=t.append(Ic("div"));this.recentMarkerCodeActionsInfo&&(W3.makeKey(this.recentMarkerCodeActionsInfo.marker)===W3.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=C("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?Oe.None:n.add(wb(()=>r.textContent=C("checkingForQuickFixes","Checking for quick fixes..."),200));r.textContent||(r.textContent=String.fromCharCode(160));const o=this.getCodeActions(e.marker);n.add(Un(()=>o.cancel())),o.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),r.textContent=C("noQuickFixes","No quick fixes available");return}r.style.display="none";let u=!1;n.add(Un(()=>{u||a.dispose()})),t.addAction({label:C("quick fixes","Quick Fix..."),commandId:eL.Id,run:d=>{u=!0;const h=Ub.get(this._editor),f=Uo(d);this._hover.hide(),h.showCodeActions(Lie,a,{x:f.left+6,y:f.top+f.height+6})}})},gn)}}getCodeActions(e){return uo(t=>UY(this._editor.getModel(),new Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Lie,xC.None,t))}};AU=IYe([Sie(2,gq),Sie(3,Ll)],AU);hr((i,e)=>{const t=i.getColor(D8);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=i.getColor(I8);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const Ipe="editor.action.inlineSuggest.commit";class Tpe{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return NYe(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class kYe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function NYe(i,e){const t=new kYe(i),n=e.map(r=>{const s=Q.lift(r.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:r.text}});n.sort((r,s)=>s.startOffset-r.startOffset);for(const r of n)i=i.substring(0,r.startOffset)+r.text+i.substring(r.endOffset);return i}class Eie{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class kpe extends Oe{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function AYe(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.text===e.text&&i.command===e.command}function Npe(i,e,t,n,r=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;const s=e.getLineContent(i.range.startLineNumber),o=zi(s).length;if(i.range.startColumn-1<=o){const m=zi(i.text).length,v=s.substring(i.range.startColumn-1,o),b=Q.fromPositions(i.range.getStartPosition().delta(0,v.length),i.range.getEndPosition()),L=i.text.startsWith(v)?i.text.substring(v.length):i.text.substring(m);i={range:b,text:L,command:i.command}}const u=e.getValueInRange(i.range),d=OYe(u,i.text);if(!d)return;const h=i.range.startLineNumber,f=new Array;if(t==="prefix"){const m=d.filter(v=>v.originalLength===0);if(m.length>1||m.length===1&&m[0].originalStart!==u.length)return}const p=i.text.length-r;for(const m of d){const v=i.range.startColumn+m.originalStart+m.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&v<n.column||m.originalLength>0)return;if(m.modifiedLength===0)continue;const b=m.modifiedStart+m.modifiedLength,L=Math.max(m.modifiedStart,Math.min(b,p)),S=i.text.substring(m.modifiedStart,L),y=i.text.substring(L,Math.max(m.modifiedStart,b));if(S.length>0){const E=sg(S);f.push(new Eie(v,E,!1))}if(y.length>0){const E=sg(y);f.push(new Eie(v,E,!0))}}return new Tpe(h,f,0)}let mf;function OYe(i,e){if((mf==null?void 0:mf.originalValue)===i&&(mf==null?void 0:mf.newValue)===e)return mf==null?void 0:mf.changes;{const t=MYe(i,e);return mf={originalValue:i,newValue:e,changes:t},t}}function MYe(i,e){if(i.length>5e3||e.length>5e3)return;function t(u){let d=0;for(let h=0,f=u.length;h<f;h++){const p=u.charCodeAt(h);p>d&&(d=p)}return d}const n=Math.max(t(i),t(e));function r(u){if(u<0)throw new Error("unexpected");return n+u+1}function s(u){let d=0,h=0;const f=new Int32Array(u.length);for(let p=0,m=u.length;p<m;p++){const v=h*100+d;u[p]==="("?(f[p]=r(2*v),d++):u[p]===")"?(f[p]=r(2*v+1),d===1&&h++,d=Math.max(d-1,0)):f[p]=u.charCodeAt(p)}return f}const o=s(i),a=s(e);return new Bf({getElements:()=>o},{getElements:()=>a}).ComputeDiff(!1).changes}var RYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},PYe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},np=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let OU=class extends Oe{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Oa),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(r=>{new Set([by.Tab.id,by.DeleteLeft.id,by.DeleteRight.id,Ipe,"acceptSelectedSuggestion"]).has(r.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(r=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(r=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Un(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(Yu.Automatic))}trigger(e){if(this.completionSession.value){e===Yu.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new FYe(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return np(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};OU=RYe([PYe(2,Tr)],OU);class FYe extends kpe{constructor(e,t,n,r,s,o){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=r,this.cache=s,this.initialTriggerKind=o,this.minReservedLineCount=0,this.updateOperation=this._register(new Oa),this.updateSoon=this._register(new er(()=>{let u=this.initialTriggerKind;return this.initialTriggerKind=Yu.Automatic,this.update(u)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const u=this.currentCompletion;if(u&&u.sourceInlineCompletion!==a){a=u.sourceInlineCompletion;const d=u.sourceProvider;d.handleItemDidShow&&d.handleItemDidShow(u.sourceInlineCompletions,a)}})),this._register(Un(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(u=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(u=>{this.scheduleAutomaticUpdate()})),this._register(Xq.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return np(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return np(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return np(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Yu.Explicit?yield this.updateOperation.value.promise:yield this.update(Yu.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Yu.Explicit&&(yield this.update(Yu.Explicit))})}hasMultipleInlineCompletions(){var e;return np(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?Npe(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return np(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=uo(s=>np(this,void 0,void 0,function*(){let o;try{o=yield Ope(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},s)}catch(a){gn(a);return}s.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire())})),r=new Ape(n,e);this.updateOperation.value=r,yield n,this.updateOperation.value===r&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[jr.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Ro):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class Ape{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class BYe extends Oe{constructor(e,t,n,r){super(),this.triggerKind=r;const s=e.deltaDecorations([],t.items.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._register(Un(()=>{e.deltaDecorations(s,[])})),this.completions=t.items.map((o,a)=>new WYe(o,s[a])),this._register(e.onDidChangeModelContent(()=>{let o=!1;const a=e.getModel();for(const u of this.completions){const d=a.getDecorationRange(u.decorationId);if(!d){gn(new Error("Decoration has no range"));continue}u.synchronizedRange.equalsRange(d)||(o=!0,u.synchronizedRange=d)}o&&n()})),this._register(t)}}class WYe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function VYe(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new Q(i.lineNumber,t.startColumn,i.lineNumber,n):Q.fromPositions(i,i.with(void 0,n))}function Ope(i,e,t,n=Fn.None){return np(this,void 0,void 0,function*(){const r=VYe(i,e),s=Xq.all(e),o=yield Promise.all(s.map(u=>np(this,void 0,void 0,function*(){const d=yield u.provideInlineCompletions(e,i,t,n);return{completions:d,provider:u,dispose:()=>{d&&u.freeInlineCompletions(d)}}}))),a=new Map;for(const u of o){const d=u.completions;if(d)for(const h of d.items.map(f=>({text:f.text,range:f.range?Q.lift(f.range):r,command:f.command,sourceProvider:u.provider,sourceInlineCompletions:d,sourceInlineCompletion:f})))h.range.startLineNumber===h.range.endLineNumber&&a.set(JSON.stringify({text:h.text,range:h.range}),h)}return{items:[...a.values()],dispose:()=>{for(const u of o)u.dispose()}}})}function i5(i,e){if(!e)return e;const t=i.getValueInRange(e.range),n=zy(t,e.text),r=i.getOffsetAt(e.range.getStartPosition())+n,s=i.getPositionAt(r),o=t.substr(n),a=kF(o,e.text),u=i.getPositionAt(Math.max(r,i.getOffsetAt(e.range.getEndPosition())-a));return{range:Q.fromPositions(s,u),text:e.text.substr(n,e.text.length-n-a)}}class Ac{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),r;if(r=Ac._table[n],typeof r=="number")return this.pos+=1,{type:r,pos:e,len:1};if(Ac.isDigitCharacter(n)){r=8;do t+=1,n=this.value.charCodeAt(e+t);while(Ac.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}if(Ac.isVariableCharacter(n)){r=9;do n=this.value.charCodeAt(e+ ++t);while(Ac.isVariableCharacter(n)||Ac.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}r=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Ac._table[n]>"u"&&!Ac.isDigitCharacter(n)&&!Ac.isVariableCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}}Ac._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class nL{constructor(){this._children=[]}appendChild(e){return e instanceof fl&&this._children[this._children.length-1]instanceof fl?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,r=n.children.indexOf(e),s=n.children.slice(0);s.splice(r,1,...t),n._children=s,function o(a,u){for(const d of a)d.parent=u,o(d.children,d)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof YB)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class fl extends nL{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new fl(this.value)}}class Mpe extends nL{}class $c extends Mpe{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof WM?this._children[0]:void 0}clone(){let e=new $c(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class WM extends nL{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof fl&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new WM;return this.options.forEach(e.appendChild,e),e}}class ZY extends nL{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,r=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof Ih&&!!s.elseValue)&&(r=this._replace([])),r}_replace(e){let t="";for(const n of this._children)if(n instanceof Ih){let r=e[n.index]||"";r=n.resolve(r),t+=r}else t+=n.toString();return t}toString(){return""}clone(){let e=new ZY;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Ih extends nL{constructor(e,t,n,r){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=r}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,r)=>r===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new Ih(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class wO extends Mpe{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new fl(t)],!0):!1}clone(){const e=new wO(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function xie(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class YB extends nL{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof $c&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(r=>r===e?(n=!0,!1):(t+=r.len(),!0)),n?t:-1}fullLen(e){let t=0;return xie([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof $c&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof wO&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new YB;return this._children=this.children.map(t=>t.clone()),e}walk(e){xie(this.children,e)}}class ZB{constructor(){this._scanner=new Ac,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const r=new YB;for(;this._parse(r););const s=new Map,o=[];let a=0;r.walk(u=>(u instanceof $c&&(a+=1,u.isFinalTabstop?s.set(0,void 0):!s.has(u.index)&&u.children.length>0?s.set(u.index,u.children):o.push(u)),!0));for(const u of o){const d=s.get(u.index);if(d){const h=new $c(u.index);h.transform=u.transform;for(const f of d)h.appendChild(f.clone());r.replace(u,[h])}}return n||(n=a>0&&t),!s.has(0)&&n&&r.appendChild(new $c(0)),r}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const r=this._scanner.next();if(r.type!==0&&r.type!==4&&r.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new fl(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new $c(Number(t)):new wO(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new $c(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new fl("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const o=new WM;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(o),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let r;if((r=this._accept(5,!0))?r=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:r=this._accept(void 0,!0),!r)return this._backTo(t),!1;n.push(r)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new fl(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new wO(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new fl("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){let t=new ZY,n="",r="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new fl(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let r=this._accept(8,!0);if(r)if(n){if(this._accept(4))return e.appendChild(new Ih(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Ih(Number(r))),!0;else return this._backTo(t),!1;if(this._accept(6)){let s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Ih(Number(r),s)),!0)}else if(this._accept(11)){let s=this._until(4);if(s)return e.appendChild(new Ih(Number(r),void 0,s,void 0)),!0}else if(this._accept(12)){let s=this._until(4);if(s)return e.appendChild(new Ih(Number(r),void 0,void 0,s)),!0}else if(this._accept(13)){let s=this._until(1);if(s){let o=this._until(4);if(o)return e.appendChild(new Ih(Number(r),void 0,s,o)),!0}}else{let s=this._until(4);if(s)return e.appendChild(new Ih(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new fl(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const io=new Uint8Array(16),La=[];for(let i=0;i<256;i++)La.push(i.toString(16).padStart(2,"0"));let MU;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?MU=crypto.getRandomValues.bind(crypto):MU=function(i){for(let e=0;e<i.length;e++)i[e]=Math.floor(Math.random()*256);return i};function HYe(){MU(io),io[6]=io[6]&15|64,io[8]=io[8]&63|128;let i=0,e="";return e+=La[io[i++]],e+=La[io[i++]],e+=La[io[i++]],e+=La[io[i++]],e+="-",e+=La[io[i++]],e+=La[io[i++]],e+="-",e+=La[io[i++]],e+=La[io[i++]],e+="-",e+=La[io[i++]],e+=La[io[i++]],e+="-",e+=La[io[i++]],e+=La[io[i++]],e+=La[io[i++]],e+=La[io[i++]],e+=La[io[i++]],e+=La[io[i++]],e}const Die="code-workspace";function Iie(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&rn.isUri(e.uri)}function $Ye(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}class zYe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class UYe{constructor(e,t,n,r){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=r}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,r=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,r=s.multiline)}if(n&&r&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),o=zi(s,0,this._selection.startColumn-1);let a=o;e.snippet.walk(d=>d===e?!1:(d instanceof fl&&(a=zi(sg(d.value).pop())),!0));const u=zy(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(d,h,f)=>`${h}${a.substr(u)}${f}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class jYe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return K1(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=K1(this._model.uri.fsPath),r=n.lastIndexOf(".");return r<=0?n:n.slice(0,r)}else{if(t==="TM_DIRECTORY")return Xle(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(zq(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class KYe{constructor(e,t,n,r){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=r}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(r=>!vue(r));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class qYe{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=_i.getComments(n);if(r){if(t==="LINE_COMMENT")return r.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return r.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return r.blockCommentEndToken||void 0}}}class Yf{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Yf.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Yf.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Yf.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Yf.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}Yf.dayNames=[C("Sunday","Sunday"),C("Monday","Monday"),C("Tuesday","Tuesday"),C("Wednesday","Wednesday"),C("Thursday","Thursday"),C("Friday","Friday"),C("Saturday","Saturday")];Yf.dayNamesShort=[C("SundayShort","Sun"),C("MondayShort","Mon"),C("TuesdayShort","Tue"),C("WednesdayShort","Wed"),C("ThursdayShort","Thu"),C("FridayShort","Fri"),C("SaturdayShort","Sat")];Yf.monthNames=[C("January","January"),C("February","February"),C("March","March"),C("April","April"),C("May","May"),C("June","June"),C("July","July"),C("August","August"),C("September","September"),C("October","October"),C("November","November"),C("December","December")];Yf.monthNamesShort=[C("JanuaryShort","Jan"),C("FebruaryShort","Feb"),C("MarchShort","Mar"),C("AprilShort","Apr"),C("MayShort","May"),C("JuneShort","Jun"),C("JulyShort","Jul"),C("AugustShort","Aug"),C("SeptemberShort","Sep"),C("OctoberShort","Oct"),C("NovemberShort","Nov"),C("DecemberShort","Dec")];class GYe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=$Ye(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(Iie(e))return K1(e.uri.path);let t=K1(e.configPath.path);return t.endsWith(Die)&&(t=t.substr(0,t.length-Die.length-1)),t}_resoveWorkspacePath(e){if(Iie(e))return hU(e.uri.fsPath);let t=K1(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?hU(n):"/"}}class YYe{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return HYe()}}class Oc{constructor(e,t,n,r){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=r,this._nestingLevel=1,this._placeholderGroups=lJ(t.placeholders,$c.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const r=this._snippet.offset(n),s=this._snippet.fullLen(n),o=Q.fromPositions(e.getPositionAt(this._offset+r),e.getPositionAt(this._offset+r+s)),a=n.isFinalTabstop?Oc._decor.inactiveFinal:Oc._decor.inactive,u=t.addDecoration(o,a);this._placeholderDecorations.set(n,u)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let r=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const o=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(o),u=this._editor.getModel().getValueInRange(a),d=s.transform.resolve(u).split(/\r\n|\r|\n/);for(let h=1;h<d.length;h++)d[h]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+d[h]);r.push(jr.replace(a,d.join(this._editor.getModel().getEOL())))}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(r=>{const s=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const u=this._placeholderDecorations.get(a),d=this._editor.getModel().getDecorationRange(u);o.push(new yt(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),r.changeDecorationOptions(u,a.isFinalTabstop?Oc._decor.activeFinal:Oc._decor.active),s.add(a);for(const h of this._snippet.enclosingPlaceholders(a)){const f=this._placeholderDecorations.get(h);r.changeDecorationOptions(f,h.isFinalTabstop?Oc._decor.activeFinal:Oc._decor.active),s.add(h)}}for(const[a,u]of this._placeholderDecorations)s.has(a)||r.changeDecorationOptions(u,a.isFinalTabstop?Oc._decor.inactiveFinal:Oc._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof $c){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const r of t){if(r.isFinalTabstop)break;n||(n=[],e.set(r.index,n));const s=this._placeholderDecorations.get(r),o=this._editor.getModel().getDecorationRange(s);if(!o){e.delete(r.index);break}n.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const r of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(!s._placeholderDecorations);const o=s._snippet.placeholderInfo.last.index;for(const u of s._snippet.placeholderInfo.all)u.isFinalTabstop?u.index=r.index+(o+1)/this._nestingLevel:u.index=r.index+u.index/this._nestingLevel;this._snippet.replace(r,s._snippet.children);const a=this._placeholderDecorations.get(r);n.removeDecoration(a),this._placeholderDecorations.delete(r);for(const u of s._snippet.placeholders){const d=s._snippet.offset(u),h=s._snippet.fullLen(u),f=Q.fromPositions(t.getPositionAt(s._offset+d),t.getPositionAt(s._offset+d+h)),p=n.addDecoration(f,Oc._decor.inactive);this._placeholderDecorations.set(u,p)}}this._placeholderGroups=lJ(this._snippet.placeholders,$c.compareByIndex)})}}Oc._decor={active:En.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:En.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:En.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:En.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const Tie={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class xf{constructor(e,t,n=Tie){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,r,s){const o=e.getLineContent(t.lineNumber),a=zi(o,0,t.column-1);let u;return n.walk(d=>{if(!(d instanceof fl)||d.parent instanceof WM)return!0;const h=d.value.split(/\r\n|\r|\n/);if(r){const p=n.offset(d);if(p===0)h[0]=e.normalizeIndentation(h[0]);else{u=u??n.toString();let m=u.charCodeAt(p-1);(m===10||m===13)&&(h[0]=e.normalizeIndentation(a+h[0]))}for(let m=1;m<h.length;m++)h[m]=e.normalizeIndentation(a+h[m])}const f=h.join(e.getEOL());return f!==d.value&&(d.parent.replace(d,[new fl(f)]),u=void 0),!0}),a}static adjustSelection(e,t,n,r){if(n!==0||r!==0){const{positionLineNumber:s,positionColumn:o}=t,a=o-n,u=o+r,d=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:u});t=yt.createWithDirection(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,r,s,o,a,u){const d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};const f=e.getModel(),p=e.invokeWithinContext(A=>A.get(Ude)),m=e.invokeWithinContext(A=>new jYe(A.get(yM),f)),v=()=>a;let b=0,L=f.getValueInRange(xf.adjustSelection(f,e.getSelection(),n,0)),S=f.getValueInRange(xf.adjustSelection(f,e.getSelection(),0,r)),y=f.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const E=e.getSelections().map((A,N)=>({selection:A,idx:N})).sort((A,N)=>Q.compareRangesUsingStarts(A.selection,N.selection));for(const{selection:A,idx:N}of E){let V=xf.adjustSelection(f,A,n,0),M=xf.adjustSelection(f,A,0,r);L!==f.getValueInRange(V)&&(V=A),S!==f.getValueInRange(M)&&(M=A);const R=A.setStartPosition(V.startLineNumber,V.startColumn).setEndPosition(M.endLineNumber,M.endColumn),Y=new ZB().parse(t,!0,s),X=R.getStartPosition(),$=xf.adjustWhitespace(f,X,Y,o||N>0&&y!==f.getLineFirstNonWhitespaceColumn(A.positionLineNumber),!0);Y.resolveVariables(new zYe([m,new KYe(v,N,E.length,e.getOption(70)==="spread"),new UYe(f,A,N,u),new qYe(f,A),new Yf,new GYe(p),new YYe]));const T=f.getOffsetAt(X)+b;b+=Y.toString().length-f.getValueLengthInRange(R),d[N]=jr.replace(R,Y.toString()),d[N].identifier={major:N,minor:0},h[N]=new Oc(e,Y,T,$)}return{edits:d,snippets:h}}dispose(){ri(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=xf.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(r=>!!r.identifier).map(r=>yt.fromPositions(r.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=Tie){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:r}=xf.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,s=>{for(const o of this._snippets)o.merge(r);return console.assert(r.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):s.filter(o=>!!o.identifier).map(o=>yt.fromPositions(o.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const r=n.move(e);t.push(...r)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const r=n.computePossibleSelections();if(t.size===0)for(const[s,o]of r){o.sort(Q.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,o)=>{s.push(...r.get(o))})}e.sort(Q.compareRangesUsingStarts);for(let[n,r]of t){if(r.length!==e.length){t.delete(n);continue}r.sort(Q.compareRangesUsingStarts);for(let s=0;s<r.length;s++)if(!r[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}}var Y2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const $n={Visible:new Dt("suggestWidgetVisible",!1,C("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new Dt("suggestWidgetDetailsVisible",!1,C("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Dt("suggestWidgetMultipleSuggestions",!1,C("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Dt("suggestionMakesTextEdit",!0,C("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Dt("acceptSuggestionOnEnter",!0,C("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Dt("suggestionHasInsertAndReplaceRange",!1,C("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Dt("suggestionInsertMode",void 0,{type:"string",description:C("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Dt("suggestionCanResolve",!1,C("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},A0=new Mt("suggestWidgetStatusBar");class ZYe{constructor(e,t,n,r){this.position=e,this.completion=t,this.container=n,this.provider=r,this.isInvalid=!1,this.score=Yh.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),Q.isIRange(t.range)?(this.editStart=new Le(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Le(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Le(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||Q.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Le(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Le(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Le(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||Q.spansMultipleLines(t.range.insert)||Q.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof r.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Y2(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{Cg(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class r5{constructor(e=2,t=new Set,n=new Set,r=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=r}}r5.default=new r5;let XYe;function QYe(){return XYe}class JYe{constructor(e,t,n,r){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=r}}function Rpe(i,e,t=r5.default,n={triggerKind:0},r=Fn.None){return Y2(this,void 0,void 0,function*(){const s=new ig(!0);e=e.clone();const o=i.getWordAtPosition(e),a=o?new Q(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):Q.fromPositions(e),u={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},d=[],h=new Je,f=[];let p=!1;const m=(b,L,S)=>{var y,E,A;if(L){for(let N of L.suggestions)if(!t.kindFilter.has(N.kind)){if(!t.showDeprecated&&(!((y=N==null?void 0:N.tags)===null||y===void 0)&&y.includes(1)))continue;N.range||(N.range=u),N.sortText||(N.sortText=typeof N.label=="string"?N.label:N.label.label),!p&&N.insertTextRules&&N.insertTextRules&4&&(p=ZB.guessNeedsClipboard(N.insertText)),d.push(new ZYe(e,N,L,b))}JK(L)&&h.add(L),f.push({providerName:(E=b._debugDisplayName)!==null&&E!==void 0?E:"unkown_provider",elapsedProvider:(A=L.duration)!==null&&A!==void 0?A:-1,elapsedOverall:S.elapsed()})}},v=(()=>Y2(this,void 0,void 0,function*(){}))();for(let b of Ah.orderedGroups(i)){let L=d.length;if(yield Promise.all(b.map(S=>Y2(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(S)))try{const y=new ig(!0),E=yield S.provideCompletionItems(i,e,n,r);m(S,E,y)}catch(y){Ro(y)}}))),L!==d.length||r.isCancellationRequested)break}return yield v,r.isCancellationRequested?(h.dispose(),Promise.reject(_C())):new JYe(d.sort(Ppe(t.snippetSortOrder)),p,{entries:f,elapsed:s.elapsed()},h)})}function XY(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.completion.label<e.completion.label?-1:i.completion.label>e.completion.label?1:i.completion.kind-e.completion.kind}function eZe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return XY(i,e)}function tZe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return XY(i,e)}const XB=new Map;XB.set(0,eZe);XB.set(2,tZe);XB.set(1,XY);function Ppe(i){return XB.get(i)}Xn.registerCommand("_executeCompletionItemProvider",(i,...e)=>Y2(void 0,void 0,void 0,function*(){const[t,n,r,s]=e;Gi(rn.isUri(t)),Gi(Le.isIPosition(n)),Gi(typeof r=="string"||!r),Gi(typeof s=="number"||!s);const o=yield i.get(Qa).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},u=[],d=yield Rpe(o.object.textEditorModel,Le.lift(n),void 0,{triggerCharacter:r,triggerKind:r?1:0});for(const h of d.items)u.length<(s??0)&&u.push(h.resolve(Fn.None)),a.incomplete=a.incomplete||h.container.incomplete,a.suggestions.push(h.completion);try{return yield Promise.all(u),a}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{o.dispose()}}));const RU=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};Ah.register("*",RU);function nZe(i,e){setTimeout(()=>{RU.onlyOnceSuggestions.push(...e),i.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(RU))},0)}var iZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},kie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Nie={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Mo=class c2{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new Je,this._modelVersionId=-1,this._inSnippet=c2.InSnippetMode.bindTo(n),this._hasNextTabstop=c2.HasNextTabstop.bindTo(n),this._hasPrevTabstop=c2.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(c2.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?Nie:Object.assign(Object.assign({},Nie),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new xf(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>yt.fromPositions(n.getStartPosition())));const[t]=e.options;nZe(this._editor,e.options.map((n,r)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(r+1),range:Q.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Mo.ID="snippetController2";Mo.InSnippetMode=new Dt("inSnippetMode",!1,C("inSnippetMode","Whether the editor in current in snippet mode"));Mo.HasNextTabstop=new Dt("hasNextTabstop",!1,C("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Mo.HasPrevTabstop=new Dt("hasPrevTabstop",!1,C("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Mo=iZe([kie(1,yg),kie(2,cn)],Mo);ki(Mo.ID,Mo);const QB=Po.bindToContribution(Mo.get);nt(new QB({id:"jumpToNextSnippetPlaceholder",precondition:_t.and(Mo.InSnippetMode,Mo.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:2}}));nt(new QB({id:"jumpToPrevSnippetPlaceholder",precondition:_t.and(Mo.InSnippetMode,Mo.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:1026}}));nt(new QB({id:"leaveSnippet",precondition:Mo.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:9,secondary:[1033]}}));nt(new QB({id:"acceptSnippet",precondition:Mo.InSnippetMode,handler:i=>i.finish()}));var rZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Aie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class QY{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let r=n[0].score[0];for(let s=0;s<n.length;s++){const{score:o,completion:a}=n[s];if(o[0]!==r)break;if(a.preselect)return s}return 0}}class Fpe extends QY{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class sZe extends QY{constructor(){super("recentlyUsed"),this._cache=new z0(300,.66),this._seq=0}memorize(e,t,n){const r=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(r,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return super.select(e,t,n);let s=n[0].score[0],o=-1,a=-1,u=-1;for(let d=0;d<n.length&&n[d].score[0]===s;d++){const h=`${e.getLanguageId()}/${n[d].textLabel}`,f=this._cache.peek(h);if(f&&f.touch>u&&f.type===n[d].completion.kind&&f.insertText===n[d].completion.insertText&&(u=f.touch,a=d),n[d].completion.preselect&&o===-1)return o=d}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,r]of e)r.touch=t,r.type=typeof r.type=="number"?r.type:Kce(r.type),this._cache.set(n,r);this._seq=this._cache.size}}class oZe extends QY{constructor(){super("recentlyUsedByPrefix"),this._trie=_y.forStrings(),this._seq=0}memorize(e,t,n){const{word:r}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${r}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:r}=e.getWordUntilPosition(t);if(!r)return super.select(e,t,n);let s=`${e.getLanguageId()}/${r}`,o=this._trie.get(s);if(o||(o=this._trie.findSubstr(s)),o)for(let a=0;a<n.length;a++){let{kind:u,insertText:d}=n[a].completion;if(u===o.type&&d===o.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Kce(n.type),this._trie.set(t,n)}}}let yO=class L4{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Je,this._persistSoon=new er(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===V3.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==r){this._saveState();const s=L4._strategyCtors.get(r)||Fpe;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,u=this._storageService.get(`${L4._storagePrefix}/${r}`,a);u&&this._strategy.fromJSON(JSON.parse(u))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${L4._storagePrefix}/${this._strategy.name}`,n,t,1)}}};yO._strategyCtors=new Map([["recentlyUsedByPrefix",oZe],["recentlyUsed",sZe],["first",Fpe]]);yO._storagePrefix="suggest/memories";yO=rZe([Aie(0,Dg),Aie(1,nr)],yO);const Bpe=gi("ISuggestMemories");U0(Bpe,yO,!0);var aZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},lZe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SO=class Wpe{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Wpe.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),r=this._editor.getSelection(),s=n.getWordAtPosition(r.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===r.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};SO.AtEnd=new Dt("atEndOfWord",!1);SO=aZe([lZe(1,cn)],SO);var uZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cZe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Gb=class E4{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=E4.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(E4._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let r=n;for(;r=(r+t.items.length+(e?1:-1))%t.items.length,!(r===n||!t.items[r].completion.additionalTextEdits););return r}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=E4._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Gb.OtherSuggestions=new Dt("hasOtherSuggestions",!1);Gb=uZe([cZe(1,cn)],Gb);class dZe{constructor(e,t,n){this._disposables=new Je,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(r=>{if(this._active&&!t.isFrozen()){const s=r.charCodeAt(r.length-1);this._active.acceptCharacters.has(s)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!vl(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Rw;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var hZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class yu{provideSelectionRanges(e,t){return hZe(this,void 0,void 0,function*(){const n=[];for(const r of t){const s=[];n.push(s);const o=new Map;yield new Promise(a=>yu._bracketsRightYield(a,0,e,r,o)),yield new Promise(a=>yu._bracketsLeftYield(a,0,e,r,o,s))}return n})}static _bracketsRightYield(e,t,n,r,s){const o=new Map,a=Date.now();for(;;){if(t>=yu._maxRounds){e();break}if(!r){e();break}let u=n.bracketPairs.findNextBracket(r);if(!u){e();break}if(Date.now()-a>yu._maxDuration){setTimeout(()=>yu._bracketsRightYield(e,t+1,n,r,s));break}const h=u.close[0];if(u.isOpen){let f=o.has(h)?o.get(h):0;o.set(h,f+1)}else{let f=o.has(h)?o.get(h):0;if(f-=1,o.set(h,Math.max(0,f)),f<0){let p=s.get(h);p||(p=new Tu,s.set(h,p)),p.push(u.range)}}r=u.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,r,s,o){const a=new Map,u=Date.now();for(;;){if(t>=yu._maxRounds&&s.size===0){e();break}if(!r){e();break}let d=n.bracketPairs.findPrevBracket(r);if(!d){e();break}if(Date.now()-u>yu._maxDuration){setTimeout(()=>yu._bracketsLeftYield(e,t+1,n,r,s,o));break}const f=d.close[0];if(d.isOpen){let p=a.has(f)?a.get(f):0;if(p-=1,a.set(f,Math.max(0,p)),p<0){let m=s.get(f);if(m){let v=m.shift();m.size===0&&s.delete(f);const b=Q.fromPositions(d.range.getEndPosition(),v.getStartPosition()),L=Q.fromPositions(d.range.getStartPosition(),v.getEndPosition());o.push({range:b}),o.push({range:L}),yu._addBracketLeading(n,L,o)}}}else{let p=a.has(f)?a.get(f):0;a.set(f,p+1)}r=d.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const r=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(r);s!==0&&s!==t.startColumn&&(n.push({range:Q.fromPositions(new Le(r,s),t.getEndPosition())}),n.push({range:Q.fromPositions(new Le(r,1),t.getEndPosition())}));const o=r-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:Q.fromPositions(new Le(o,a),t.getEndPosition())}),n.push({range:Q.fromPositions(new Le(o,1),t.getEndPosition())}))}}}yu._maxDuration=30;yu._maxRounds=2;var fZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Af{static create(e,t){return fZe(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return Af.None;const n=t.getModel(),r=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Af.None;const[s]=yield new yu().provideSelectionRanges(n,[r]);if(s.length===0)return Af.None;const o=yield e.computeWordRanges(n.uri,s[0].range);if(!o)return Af.None;const a=n.getWordUntilPosition(r);return delete o[a.word],new class extends Af{distance(u,d){if(!r.equals(t.getPosition()))return 0;if(d.kind===17)return 2<<20;let h=typeof d.label=="string"?d.label:d.label.label,f=o[h];if(Hue(f))return 2<<20;let p=Dq(f,Q.fromPositions(u),Q.compareRangesUsingStarts),m=p>=0?f[p]:f[Math.max(0,~p-1)],v=s.length;for(const b of s){if(!Q.containsRange(b.range,m))break;v-=1}return v}}})}}Af.None=new class extends Af{distance(){return 0}};class I1{constructor(e,t,n,r,s,o,a){this.clipboardText=a,this._snippetCompareFn=I1._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=r,this._options=s,this._refilterKind=1,this._lineContext=n,o==="top"?this._snippetCompareFn=I1._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=I1._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let r="",s="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],u=!this._options.filterGraceful||o.length>2e3?nS:u4e;for(let d=0;d<o.length;d++){const h=o[d];if(h.isInvalid)continue;this._providerInfo.set(h.provider,!!h.container.incomplete);const f=h.position.column-h.editStart.column,p=f+n-(h.position.column-this._column);if(r.length!==p&&(r=p===0?"":t.slice(-p),s=r.toLowerCase()),h.word=r,p===0)h.score=Yh.Default;else{let m=0;for(;m<f;){const v=r.charCodeAt(m);if(v===32||v===9)m+=1;else break}if(m>=p)h.score=Yh.Default;else if(typeof h.completion.filterText=="string"){let v=u(r,s,m,h.completion.filterText,h.filterTextLow,0,!1);if(!v)continue;wH(h.completion.filterText,h.textLabel)===0?h.score=v:(h.score=s4e(r,s,m,h.textLabel,h.labelLow,0),h.score[0]=v[0])}else{let v=u(r,s,m,h.textLabel,h.labelLow,0,!1);if(!v)continue;h.score=v}}h.idx=d,h.distance=this._wordDistance.distance(h.position,h.completion),a.push(h),e.push(h.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?SH(e.length-.85,e,(d,h)=>d-h):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return I1._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return I1._compareCompletionItems(e,t)}}var gZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},iw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},pZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class rw{constructor(e,t,n,r){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=r}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const r=t.getWordAtPosition(n);return!(!r||r.endColumn!==n.column||!isNaN(Number(r.word)))}}function mZe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function _Ze(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let PU=class Vpe{constructor(e,t,n,r,s,o,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=r,this._logService=s,this._contextKeyService=o,this._configurationService=a,this._toDispose=new Je,this._quickSuggestDelay=10,this._triggerCharacterListener=new Je,this._triggerQuickSuggest=new Ma,this._state=0,this._completionDisposables=new Je,this._onDidCancel=new Ce,this._onDidTrigger=new Ce,this._onDidSuggest=new Ce,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new yt(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(Ah.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{this._onCursorChange(d)}));let u=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{u=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{u=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{u||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){ri(this._triggerCharacterListener),ri([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of Ah.all(this._editor.getModel()))for(const r of n.triggerCharacters||[]){let s=e.get(r);s||(s=new Set,s.add(QYe()),e.set(r,s)),s.add(n)}const t=n=>{if(!_Ze(this._editor,this._contextKeyService,this._configurationService)||rw.shouldAutoTrigger(this._editor))return;if(!n){const o=this._editor.getPosition();n=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let r="";Uy(n.charCodeAt(n.length-1))?Ws(n.charCodeAt(n.length-2))&&(r=n.substr(n.length-2)):r=n.charAt(n.length-1);const s=e.get(r);if(s){const o=this._completionModel?{items:this._completionModel.adopt(s),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:r},!!this._completionModel,s,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!Ah.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Mo.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!rw.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const r=e.getLineTokens(t.lineNumber),s=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&s===0||n.comments&&s===1||n.strings&&s===2))return}mZe(this._editor,this._contextKeyService,this._configurationService)&&Ah.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new rw(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,r){var s;if(!this._editor.hasModel())return;const o=this._editor.getModel(),a=e.auto,u=new rw(o,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=u;let d={triggerKind:(s=e.triggerKind)!==null&&s!==void 0?s:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new oa;const h=this._editor.getOption(100);let f=1;switch(h){case"top":f=0;break;case"bottom":f=2;break}const{itemKind:p,showDeprecated:m}=Vpe._createSuggestFilter(this._editor),v=Af.create(this._editorWorkerService,this._editor),b=Rpe(o,this._editor.getPosition(),new r5(f,p,n,m),d,this._requestToken.token);Promise.all([b,v]).then(([L,S])=>pZe(this,void 0,void 0,function*(){var y;if((y=this._requestToken)===null||y===void 0||y.dispose(),!this._editor.hasModel())return;let E=r==null?void 0:r.clipboardText;if(!E&&L.needsClipboard&&(E=yield this._clipboardService.readText()),this._state===0)return;const A=this._editor.getModel();let N=L.items;if(r){const M=Ppe(f);N=N.concat(r.items).sort(M)}const V=new rw(A,this._editor.getPosition(),a,e.shy);this._completionModel=new I1(N,this._context.column,{leadingLineContent:V.leadingLineContent,characterCountDelta:V.column-this._context.column},S,this._editor.getOption(105),this._editor.getOption(100),E),this._completionDisposables.add(L.disposable),this._onNewContext(V),this._reportDurationsTelemetry(L.durations)})).catch(gn)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const r=e.getOption(105);return r.showMethods||t.add(0),r.showFunctions||t.add(1),r.showConstructors||t.add(2),r.showFields||t.add(3),r.showVariables||t.add(4),r.showClasses||t.add(5),r.showStructs||t.add(6),r.showInterfaces||t.add(7),r.showModules||t.add(8),r.showProperties||t.add(9),r.showEvents||t.add(10),r.showOperators||t.add(11),r.showUnits||t.add(12),r.showValues||t.add(13),r.showConstants||t.add(14),r.showEnums||t.add(15),r.showEnumMembers||t.add(16),r.showKeywords||t.add(17),r.showWords||t.add(18),r.showColors||t.add(19),r.showFiles||t.add(20),r.showReferences||t.add(21),r.showColors||t.add(22),r.showFolders||t.add(23),r.showTypeParameters||t.add(24),r.showSnippets||t.add(27),r.showUsers||t.add(25),r.showIssues||t.add(26),{itemKind:t,showDeprecated:r.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(zi(e.leadingLineContent)!==zi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(Ah.all(this._editor.getModel()));for(let r of this._completionModel.allProvider)t.delete(r);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(rw.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};PU=gZe([iw(1,Vu),iw(2,K0),iw(3,wg),iw(4,yg),iw(5,cn),iw(6,nr)],PU);class JB{constructor(e,t){this._disposables=new Je,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),r=n.length;let s=!1;for(let a=0;a<r;a++)if(!n[a].isEmpty()){s=!0;break}if(!s)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<r;a++){const u=n[a];if(o.getValueLengthInRange(u)>JB._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(u),multiline:u.startLineNumber!==u.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}JB._maxSelectionLength=51200;var vZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},gW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class JY extends lS{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=C("ddd","{0} ({1})",this._action.label,JY.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"")}}let FU=class{constructor(e,t,n,r){this._menuService=n,this._contextKeyService=r,this._menuDisposables=new Je,this.element=Be(e,qe(".suggest-status-bar"));const s=o=>o instanceof C0?t.createInstance(JY,o,void 0):void 0;this._leftActions=new ug(this.element,{actionViewItemProvider:s}),this._rightActions=new ug(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(A0,this._contextKeyService),t=()=>{const n=[],r=[];for(let[s,o]of e.getActions())s==="left"?n.push(...o):r.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(r)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};FU=vZe([gW(1,Nn),gW(2,CC),gW(3,cn)],FU);const bZe=we("symbolIcon.arrayForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),CZe=we("symbolIcon.booleanForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wZe=we("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yZe=we("symbolIcon.colorForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SZe=we("symbolIcon.constantForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),LZe=we("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),EZe=we("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xZe=we("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),DZe=we("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),IZe=we("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TZe=we("symbolIcon.fileForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kZe=we("symbolIcon.folderForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),NZe=we("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),AZe=we("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),OZe=we("symbolIcon.keyForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),MZe=we("symbolIcon.keywordForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),RZe=we("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),PZe=we("symbolIcon.moduleForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),FZe=we("symbolIcon.namespaceForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),BZe=we("symbolIcon.nullForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),WZe=we("symbolIcon.numberForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),VZe=we("symbolIcon.objectForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),HZe=we("symbolIcon.operatorForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$Ze=we("symbolIcon.packageForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zZe=we("symbolIcon.propertyForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),UZe=we("symbolIcon.referenceForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jZe=we("symbolIcon.snippetForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),KZe=we("symbolIcon.stringForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qZe=we("symbolIcon.structForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),GZe=we("symbolIcon.textForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),YZe=we("symbolIcon.typeParameterForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ZZe=we("symbolIcon.unitForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),XZe=we("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));hr((i,e)=>{const t=i.getColor(bZe);t&&e.addRule(`${_e.symbolArray.cssSelector} { color: ${t}; }`);const n=i.getColor(CZe);n&&e.addRule(`${_e.symbolBoolean.cssSelector} { color: ${n}; }`);const r=i.getColor(wZe);r&&e.addRule(`${_e.symbolClass.cssSelector} { color: ${r}; }`);const s=i.getColor(RZe);s&&e.addRule(`${_e.symbolMethod.cssSelector} { color: ${s}; }`);const o=i.getColor(yZe);o&&e.addRule(`${_e.symbolColor.cssSelector} { color: ${o}; }`);const a=i.getColor(SZe);a&&e.addRule(`${_e.symbolConstant.cssSelector} { color: ${a}; }`);const u=i.getColor(LZe);u&&e.addRule(`${_e.symbolConstructor.cssSelector} { color: ${u}; }`);const d=i.getColor(EZe);d&&e.addRule(`
			${_e.symbolValue.cssSelector},${_e.symbolEnum.cssSelector} { color: ${d}; }`);const h=i.getColor(xZe);h&&e.addRule(`${_e.symbolEnumMember.cssSelector} { color: ${h}; }`);const f=i.getColor(DZe);f&&e.addRule(`${_e.symbolEvent.cssSelector} { color: ${f}; }`);const p=i.getColor(IZe);p&&e.addRule(`${_e.symbolField.cssSelector} { color: ${p}; }`);const m=i.getColor(TZe);m&&e.addRule(`${_e.symbolFile.cssSelector} { color: ${m}; }`);const v=i.getColor(kZe);v&&e.addRule(`${_e.symbolFolder.cssSelector} { color: ${v}; }`);const b=i.getColor(NZe);b&&e.addRule(`${_e.symbolFunction.cssSelector} { color: ${b}; }`);const L=i.getColor(AZe);L&&e.addRule(`${_e.symbolInterface.cssSelector} { color: ${L}; }`);const S=i.getColor(OZe);S&&e.addRule(`${_e.symbolKey.cssSelector} { color: ${S}; }`);const y=i.getColor(MZe);y&&e.addRule(`${_e.symbolKeyword.cssSelector} { color: ${y}; }`);const E=i.getColor(PZe);E&&e.addRule(`${_e.symbolModule.cssSelector} { color: ${E}; }`);const A=i.getColor(FZe);A&&e.addRule(`${_e.symbolNamespace.cssSelector} { color: ${A}; }`);const N=i.getColor(BZe);N&&e.addRule(`${_e.symbolNull.cssSelector} { color: ${N}; }`);const V=i.getColor(WZe);V&&e.addRule(`${_e.symbolNumber.cssSelector} { color: ${V}; }`);const M=i.getColor(VZe);M&&e.addRule(`${_e.symbolObject.cssSelector} { color: ${M}; }`);const R=i.getColor(HZe);R&&e.addRule(`${_e.symbolOperator.cssSelector} { color: ${R}; }`);const Y=i.getColor($Ze);Y&&e.addRule(`${_e.symbolPackage.cssSelector} { color: ${Y}; }`);const X=i.getColor(zZe);X&&e.addRule(`${_e.symbolProperty.cssSelector} { color: ${X}; }`);const $=i.getColor(UZe);$&&e.addRule(`${_e.symbolReference.cssSelector} { color: ${$}; }`);const T=i.getColor(jZe);T&&e.addRule(`${_e.symbolSnippet.cssSelector} { color: ${T}; }`);const O=i.getColor(KZe);O&&e.addRule(`${_e.symbolString.cssSelector} { color: ${O}; }`);const B=i.getColor(qZe);B&&e.addRule(`${_e.symbolStruct.cssSelector} { color: ${B}; }`);const W=i.getColor(GZe);W&&e.addRule(`${_e.symbolText.cssSelector} { color: ${W}; }`);const j=i.getColor(YZe);j&&e.addRule(`${_e.symbolTypeParameter.cssSelector} { color: ${j}; }`);const U=i.getColor(ZZe);U&&e.addRule(`${_e.symbolUnit.cssSelector} { color: ${U}; }`);const q=i.getColor(XZe);q&&e.addRule(`${_e.symbolVariable.cssSelector} { color: ${q}; }`)});class Hpe{constructor(){this._onDidWillResize=new Ce,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Ce,this.onDidResize=this._onDidResize.event,this._sashListener=new Je,this._size=new cr(0,0),this._minSize=new cr(0,0),this._maxSize=new cr(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Ho(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Ho(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Ho(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:b3.North}),this._southSash=new Ho(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:b3.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Rt.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Rt.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(r=>{e&&(n=r.currentX-r.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(r=>{e&&(n=-(r.currentX-r.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(r=>{e&&(t=-(r.currentY-r.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(r=>{e&&(t=r.currentY-r.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Rt.any(this._eastSash.onDidReset,this._westSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Rt.any(this._northSash.onDidReset,this._southSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,r){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=r?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:r}=this._minSize,{height:s,width:o}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(r,Math.min(o,t));const a=new cr(t,e);cr.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var QZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},JZe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function eZ(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let BU=class{constructor(e,t){this._editor=e,this._onDidClose=new Ce,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Ce,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Je,this._renderDisposeable=new Je,this._borderWidth=1,this._size=new cr(330,0),this.domNode=qe(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Fp,{editor:e}),this._body=qe(".body"),this._scrollbar=new pM(this._body,{}),Be(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Be(this._body,qe(".header")),this._close=Be(this._header,qe("span"+_e.close.cssSelector)),this._close.title=C("details.close","Close"),this._type=Be(this._header,qe("p.type")),this._docs=Be(this._body,qe("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(Kc?jo.fontFamily:null),r=e.get(106)||t.fontSize,s=e.get(107)||t.lineHeight,o=t.fontWeight,a=`${r}px`,u=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/r}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=u,this._close.style.width=u}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=C("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,r;this._renderDisposeable.clear();let{detail:s,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(r=e.completion.commitCharacters)===null||r===void 0?void 0:r.join("")}
`,o=new Mp().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!eZ(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}`:s;this._type.textContent=a,this._type.title=a,Lu(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Hs(this._type),this._type.title="",Ua(this._type),this.domNode.classList.add("no-type");if(Hs(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),Hs(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new cr(e,t);cr.equals(n,this._size)||(this._size=n,EEe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};BU=QZe([JZe(1,Nn)],BU);class eXe{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Je,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Hpe,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,r,s=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&r){this.widget.layout(a.dimension.width,a.dimension.height);let u=!1;a.west&&(o=r.width-a.dimension.width,u=!0),a.north&&(s=r.height-a.dimension.height,u=!0),u&&this._applyTopLeft({top:n.top+s,left:n.left+o})}a.done&&(n=void 0,r=void 0,s=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const r=e.getBoundingClientRect();this._anchorBox=r,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var r;const s=d8(document.body),o=this.widget.getLayoutInfo(),a=new cr(220,2*o.lineHeight),u=e.top,d=function(){const E=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),A=-o.borderWidth+e.left+e.width,N=new cr(E,s.height-e.top-o.borderHeight-o.verticalPadding),V=N.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:u,left:A,fit:E-t.width,maxSizeTop:N,maxSizeBottom:V,minSize:a.with(Math.min(E,a.width))}}(),h=function(){const E=e.left-o.borderWidth-o.horizontalPadding,A=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),N=new cr(E,s.height-e.top-o.borderHeight-o.verticalPadding),V=N.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:u,left:A,fit:E-t.width,maxSizeTop:N,maxSizeBottom:V,minSize:a.with(Math.min(E,a.width))}}(),f=function(){const E=e.left,A=-o.borderWidth+e.top+e.height,N=new cr(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:A,left:E,fit:N.height-t.height,maxSizeBottom:N,maxSizeTop:N,minSize:a.with(N.width)}}(),p=[d,h,f],m=(r=p.find(E=>E.fit>=0))!==null&&r!==void 0?r:p.sort((E,A)=>A.fit-E.fit)[0],v=e.top+e.height-o.borderHeight;let b,L=t.height;const S=Math.max(m.maxSizeTop.height,m.maxSizeBottom.height);L>S&&(L=S);let y;n?L<=m.maxSizeTop.height?(b=!0,y=m.maxSizeTop):(b=!1,y=m.maxSizeBottom):L<=m.maxSizeBottom.height?(b=!1,y=m.maxSizeBottom):(b=!0,y=m.maxSizeTop),this._applyTopLeft({left:m.left,top:b?m.top:v-L}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!b,m===d,b,m!==d),this._resizable.minSize=m.minSize,this._resizable.maxSize=y,this._resizable.layout(L,Math.min(y.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var hp;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(hp||(hp={}));function pP(i,e,t,n){const r=n===hp.ROOT_FOLDER?["rootfolder-icon"]:n===hp.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===Tn.data?s=y0.parseMetaData(t).get(y0.META_DATA_LABEL):s=Oie(Oce(t).toLowerCase()),n===hp.FOLDER)r.push(`${s}-name-folder-icon`);else{if(s){if(r.push(`${s}-name-file-icon`),s.length<=255){const a=s.split(".");for(let u=1;u<a.length;u++)r.push(`${a.slice(u).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}const o=tXe(i,e,t);o&&r.push(`${Oie(o)}-lang-file-icon`)}}return r}function tXe(i,e,t){if(!t)return null;let n=null;if(t.scheme===Tn.data){const s=y0.parseMetaData(t).get(y0.META_DATA_MIME);s&&(n=e.getModeId(s))}else{const r=i.getModel(t);r&&(n=r.getLanguageId())}return n&&n!==US?n:e.getModeIdByFilepathOrFirstLine(t)}function Oie(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var nXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},pW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},BN;function $pe(i){return`suggest-aria-id:${i}`}const iXe=co("suggest-more-info",_e.chevronRight,C("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),rXe=new(BN=class x4{extract(e,t){if(e.textLabel.match(x4._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(x4._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=x4._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},BN._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,BN._regexStrict=new RegExp(`^${BN._regexRelaxed.source}$`,"i"),BN);let WU=class{constructor(e,t,n,r){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=r,this._onDidToggleDetails=new Ce,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Je,t.root=e,t.root.classList.add("show-file-icons"),t.icon=Be(e,qe(".icon")),t.colorspan=Be(t.icon,qe("span.colorspan"));const n=Be(e,qe(".contents")),r=Be(n,qe(".main"));t.iconContainer=Be(r,qe(".icon-label.codicon")),t.left=Be(r,qe("span.left")),t.right=Be(r,qe("span.right")),t.iconLabel=new $3(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=Be(t.left,qe("span.signature-label")),t.qualifierLabel=Be(t.left,qe("span.qualifier-label")),t.detailsLabel=Be(t.right,qe("span.details-label")),t.readMore=Be(t.right,qe("span.readMore"+pr.asCSSSelector(iXe))),t.readMore.title=C("readMore","Read More");const s=()=>{const o=this._editor.getOptions(),a=o.get(43),u=a.getMassagedFontFamily(Kc?jo.fontFamily:null),d=a.fontFeatureSettings,h=o.get(106)||a.fontSize,f=o.get(107)||a.lineHeight,p=a.fontWeight,m=`${h}px`,v=`${f}px`;t.root.style.fontSize=m,t.root.style.fontWeight=p,r.style.fontFamily=u,r.style.fontFeatureSettings=d,r.style.lineHeight=v,t.icon.style.height=v,t.icon.style.width=v,t.readMore.style.height=v,t.readMore.style.width=v};return s(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(106)||o.hasChanged(107))&&s()})),t}renderElement(e,t,n){const{completion:r}=e;n.root.id=$pe(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:oB(e.score)};let o=[];if(r.kind===19&&rXe.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(r.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:e.textLabel}),hp.FILE),u=pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:r.detail}),hp.FILE);s.extraClasses=a.length>u.length?a:u}else r.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=$ue([pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:e.textLabel}),hp.FOLDER),pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:r.detail}),hp.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...aNe(r.kind).split(" ")));r.tags&&r.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof r.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=mW(r.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=mW(r.label.detail||""),n.detailsLabel.textContent=mW(r.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?Lu(n.detailsLabel):Ua(n.detailsLabel),eZ(e)?(n.right.classList.add("can-expand-details"),Lu(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Ua(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};WU=nXe([pW(1,Ds),pW(2,Fo),pW(3,Er)],WU);function mW(i){return i.replace(/\r\n|\r|\n/g,"")}var sXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},mP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oXe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const aXe=we("editorSuggestWidget.selectedBackground",{dark:e4,light:e4,hc:e4},C("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));class lXe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Kb}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(cr.is(n))return cr.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let LO=class VU{constructor(e,t,n,r,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Ma,this._disposables=new Je,this._onDidSelect=new Ce,this._onDidFocus=new Ce,this._onDidHide=new Ce,this._onDidShow=new Ce,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Ce,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Hpe,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new uXe(this,e),this._persistedSize=new lXe(t,e);class o{constructor(m,v,b=!1,L=!1){this.persistedSize=m,this.currentSize=v,this.persistHeight=b,this.persistWidth=L}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(p=>{var m,v,b,L;if(this._resize(p.dimension.width,p.dimension.height),a&&(a.persistHeight=a.persistHeight||!!p.north||!!p.south,a.persistWidth=a.persistWidth||!!p.east||!!p.west),!!p.done){if(a){const{itemHeight:S,defaultSize:y}=this.getLayoutInfo(),E=Math.round(S/2);let{width:A,height:N}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-N)<=E)&&(N=(v=(m=a.persistedSize)===null||m===void 0?void 0:m.height)!==null&&v!==void 0?v:y.height),(!a.persistWidth||Math.abs(a.currentSize.width-A)<=E)&&(A=(L=(b=a.persistedSize)===null||b===void 0?void 0:b.width)!==null&&L!==void 0?L:y.width),this._persistedSize.store(new cr(A,N))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Be(this.element.domNode,qe(".message")),this._listElement=Be(this.element.domNode,qe(".tree"));const u=s.createInstance(BU,this.editor);u.onDidClose(this.toggleDetails,this,this._disposables),this._details=new eXe(u,this.editor);const d=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);d();const h=s.createInstance(WU,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Eg("SuggestWidget",this._listElement,{getHeight:p=>this.getLayoutInfo().itemHeight,getTemplateId:p=>"suggestion"},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:p=>{if(p.isResolved&&this._isDetailsVisible()){const{documentation:m,detail:v}=p.completion,b=Ju("{0}{1}",v||"",m?typeof m=="string"?m:m.value:"");return C("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p.textLabel,b)}else return p.textLabel},getWidgetAriaLabel:()=>C("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=s.createInstance(FU,this.element.domNode);const f=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);f(),this._disposables.add(Fb(this._list,r,{listInactiveFocusBackground:aXe,listInactiveFocusOutline:Ja})),this._disposables.add(r.onDidColorThemeChange(p=>this._onThemeChange(p))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onTap(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onDidChangeSelection(p=>this._onListSelection(p))),this._disposables.add(this._list.onDidChangeFocus(p=>this._onListFocus(p))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(p=>{p.hasChanged(105)&&(f(),d())})),this._ctxSuggestWidgetVisible=$n.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=$n.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=$n.MultipleSuggestions.bindTo(n),this._disposables.add(eo(this._details.widget.domNode,"keydown",p=>{this._onDetailsKeydown.fire(p)})),this._disposables.add(this.editor.onMouseDown(p=>this._onEditorMouseDown(p)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],r=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(r),this._currentSuggestionDetails=uo(s=>oXe(this,void 0,void 0,function*(){const o=wb(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);s.onCancellationRequested(()=>o.dispose());const a=yield n.resolve(s);return o.dispose(),a})),this._currentSuggestionDetails.then(()=>{r>=this._list.length||n!==this._list.element(r)||(this._ignoreFocusEvents=!0,this._list.splice(r,1,[n]),this._list.setFocus([r]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:$pe(r)}))}).catch(gn)),this._onDidFocus.fire({item:n,index:r,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Ua(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=VU.LOADING_MESSAGE,Ua(this._listElement,this._status.element),Lu(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=VU.NO_SUGGESTIONS_MESSAGE,Ua(this._listElement,this._status.element),Lu(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Ua(this._messageElement),Lu(this._listElement,this._status.element),this._show();break;case 4:Ua(this._messageElement),Lu(this._listElement,this._status.element),this._show();break;case 5:Ua(this._messageElement),Lu(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=wb(()=>this._setState(1),t)))}showSuggestions(e,t,n,r){var s,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(s=this._loadingTimeout)===null||s===void 0||s.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,u=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),u){this._setState(r?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(eZ(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,r;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=d8(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,u=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,u=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new cr(u,a),this._contentWidget.setPreference(2);else{const d=s.width-o.borderHeight-2*o.horizontalPadding;u>d&&(u=d);const h=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:u,f=o.statusBarHeight+this._list.contentHeight+o.borderHeight,p=o.itemHeight+o.statusBarHeight,m=Uo(this.editor.getDomNode()),v=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=m.top+v.top+v.height,L=Math.min(s.height-b-o.verticalPadding,f),S=m.top+v.top-o.verticalPadding,y=Math.min(S,f);let E=Math.min(Math.max(y,L)+o.borderHeight,f);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<p&&(a=p),a>E&&(a=E);const A=150;a>L||this._forceRenderingAbove&&S>A?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),E=y):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),E=L),this.element.preferredSize=new cr(h,o.defaultSize.height),this.element.maxSize=new cr(d,E),this.element.minSize=new cr(220,p),this._cappedHeight=a===f?{wanted:(r=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&r!==void 0?r:e.height,capped:a}:void 0}this._resize(u,a)}_resize(e,t){const{width:n,height:r}=this.element.maxSize;e=Math.min(n,e),t=Math.min(r,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(43),t=Mc(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,r=this._details.widget.borderWidth,s=2*r;return{itemHeight:t,statusBarHeight:n,borderWidth:r,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new cr(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};LO.LOADING_MESSAGE=C("suggestWidget.loading","Loading...");LO.NO_SUGGESTIONS_MESSAGE=C("suggestWidget.noSuggestions","No suggestions.");LO=sXe([mP(1,Dg),mP(2,cn),mP(3,Er),mP(4,Nn)],LO);class uXe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:r}=this._widget.getLayoutInfo();return new cr(t+2*n+r,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var cXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},sw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class dXe{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const r=e.getOffsetAt(t),s=e.getPositionAt(r+1);this._marker=e.deltaDecorations([],[{range:Q.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Gc=class zpe{constructor(e,t,n,r,s,o,a){this._memoryService=t,this._commandService=n,this._contextKeyService=r,this._instantiationService=s,this._logService=o,this._telemetryService=a,this._lineSuffix=new Oa,this._toDispose=new Je,this._selectors=new hXe(f=>f.priority),this._telemetryGate=0,this.editor=e,this.model=s.createInstance(PU,this.editor);const u=$n.InsertMode.bindTo(r);u.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>u.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new ry(()=>{const f=this._instantiationService.createInstance(LO,this.editor);this._toDispose.add(f),this._toDispose.add(f.onDidSelect(L=>this._insertSuggestion(L,0),this));const p=new dZe(this.editor,f,L=>this._insertSuggestion(L,2));this._toDispose.add(p),this._toDispose.add(this.model.onDidSuggest(L=>{L.completionModel.items.length===0&&p.reset()}));const m=$n.MakesTextEdit.bindTo(this._contextKeyService),v=$n.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=$n.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Un(()=>{m.reset(),v.reset(),b.reset()})),this._toDispose.add(f.onDidFocus(({item:L})=>{const S=this.editor.getPosition(),y=L.editStart.column,E=S.column;let A=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!L.completion.additionalTextEdits&&!(L.completion.insertTextRules&4)&&E-y===L.completion.insertText.length&&(A=this.editor.getModel().getValueInRange({startLineNumber:S.lineNumber,startColumn:y,endLineNumber:S.lineNumber,endColumn:E})!==L.completion.insertText),m.set(A),v.set(!Le.equals(L.editInsertEnd,L.editReplaceEnd)),b.set(!!L.provider.resolveCompletionItem||!!L.completion.documentation||L.completion.detail!==L.completion.label)})),this._toDispose.add(f.onDetailsKeyDown(L=>{if(L.toKeybinding().equals(new Cb(!0,!1,!1,!1,33))||qn&&L.toKeybinding().equals(new Cb(!1,!1,!1,!0,33))){L.stopPropagation();return}L.toKeybinding().isModifierKey()||this.editor.focus()})),f})),this._overtypingCapturer=this._toDispose.add(new ry(()=>this._toDispose.add(new JB(this.editor,this.model)))),this._alternatives=this._toDispose.add(new ry(()=>this._toDispose.add(new Gb(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(SO,e)),this._toDispose.add(this.model.onDidTrigger(f=>{this.widget.value.showTriggered(f.auto,f.shy?250:50),this._lineSuffix.value=new dXe(this.editor.getModel(),f.position)})),this._toDispose.add(this.model.onDidSuggest(f=>{if(!f.shy){let p=-1;for(const m of this._selectors.itemsOrderedByPriorityDesc)if(p=m.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items),p!==-1)break;p===-1&&(p=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items)),this.widget.value.showSuggestions(f.completionModel,p,f.isFrozen,f.auto)}})),this._toDispose.add(this.model.onDidCancel(f=>{f.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let d=$n.AcceptSuggestionsOnEnter.bindTo(r),h=()=>{const f=this.editor.getOption(1);d.set(f==="on"||f==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>h())),h()}static get(e){return e.getContribution(zpe.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),r=n.getAlternativeVersionId(),{item:s}=e,o=[],a=new oa;t&1||this.editor.pushUndoStop();const u=this.getOverwriteInfo(s,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),s),Array.isArray(s.completion.additionalTextEdits)){const h=E0.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",s.completion.additionalTextEdits.map(f=>jr.replace(Q.lift(f.range),f.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!s.isResolved){const h=new ig(!0);let f;const p=n.onDidChangeContent(L=>{if(L.isFlush){a.cancel(),p.dispose();return}for(let S of L.changes){const y=Q.getEndPosition(S.range);(!f||Le.isBefore(y,f))&&(f=y)}});let m=t;t|=2;let v=!1,b=this.editor.onWillType(()=>{b.dispose(),v=!0,m&2||this.editor.pushUndoStop()});o.push(s.resolve(a.token).then(()=>{if(!s.completion.additionalTextEdits||a.token.isCancellationRequested||f&&s.completion.additionalTextEdits.some(S=>Le.isBefore(f,Q.getStartPosition(S.range))))return!1;v&&this.editor.pushUndoStop();const L=E0.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",s.completion.additionalTextEdits.map(S=>jr.replace(Q.lift(S.range),S.text))),L.restoreRelativeVerticalPositionOfCursor(this.editor),(v||!(m&2))&&this.editor.pushUndoStop(),!0}).then(L=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),L),p.dispose(),b.dispose()}))}let{insertText:d}=s.completion;s.completion.insertTextRules&4||(d=ZB.escape(d)),Mo.get(this.editor).insert(d,{overwriteBefore:u.overwriteBefore,overwriteAfter:u.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(s.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),s.completion.command?s.completion.command.id===VM.id?this.model.trigger({auto:!0,shy:!1},!0):(o.push(this._commandService.executeCommand(s.completion.command.id,...s.completion.command.arguments?[...s.completion.command.arguments]:[]).catch(gn)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(a.cancel();n.canUndo();){r!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(s),Promise.all(o).finally(()=>{this._reportSuggestionAcceptedTelemetry(n,e),this.model.clear(),a.dispose()})}_reportSuggestionAcceptedTelemetry(e,t){var n;if(this._telemetryGate++%100!==0)return;const r=((n=t.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:r,basenameHash:Vce(fc(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:nke(e.uri)})}getOverwriteInfo(e,t){Gi(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const r=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:r+o,overwriteAfter:s+a}}_alertCompletionItem(e){if(vl(e.completion.additionalTextEdits)){let t=C("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);To(t)}}triggerSuggest(e,t){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},r=s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=s.editStart.column,u=o.column;return u-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:u})!==s.completion.insertText};Rt.once(this.model.onDidTrigger)(s=>{let o=[];Rt.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{ri(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(ri(o),a.items.length===0){n();return}const u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),d=a.items[u];if(!r(d)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:u,item:d,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let r=0;e&&(r|=4),t&&(r|=8),this._insertSuggestion(n,r)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Gc.ID="editor.contrib.suggestController";Gc=cXe([sw(1,Bpe),sw(2,Tr),sw(3,cn),sw(4,Nn),sw(5,yg),sw(6,wg)],Gc);class hXe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class VM extends Et{constructor(){super({id:VM.id,label:C("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:_t.and(de.writable,de.hasCompletionItemProvider),kbOpts:{kbExpr:de.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const r=Gc.get(t);if(!r)return;let s;n&&typeof n=="object"&&n.auto===!0&&(s=!0),r.triggerSuggest(void 0,s)}}VM.id="editor.action.triggerSuggest";ki(Gc.ID,Gc);it(VM);const wc=100+90,Nl=Po.bindToContribution(Gc.get);nt(new Nl({id:"acceptSelectedSuggestion",precondition:$n.Visible,handler(i){i.acceptSelectedSuggestion(!0,!1)}}));Oo.registerKeybindingRule({id:"acceptSelectedSuggestion",when:_t.and($n.Visible,de.textInputFocus),primary:2,weight:wc});Oo.registerKeybindingRule({id:"acceptSelectedSuggestion",when:_t.and($n.Visible,de.textInputFocus,$n.AcceptSuggestionsOnEnter,$n.MakesTextEdit),primary:3,weight:wc});ra.appendMenuItem(A0,{command:{id:"acceptSelectedSuggestion",title:C("accept.insert","Insert")},group:"left",order:1,when:$n.HasInsertAndReplaceRange.toNegated()});ra.appendMenuItem(A0,{command:{id:"acceptSelectedSuggestion",title:C("accept.insert","Insert")},group:"left",order:1,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("insert"))});ra.appendMenuItem(A0,{command:{id:"acceptSelectedSuggestion",title:C("accept.replace","Replace")},group:"left",order:1,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("replace"))});nt(new Nl({id:"acceptAlternativeSelectedSuggestion",precondition:_t.and($n.Visible,de.textInputFocus),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:A0,group:"left",order:2,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("insert")),title:C("accept.replace","Replace")},{menuId:A0,group:"left",order:2,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("replace")),title:C("accept.insert","Insert")}]}));Xn.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");nt(new Nl({id:"hideSuggestWidget",precondition:$n.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}}));nt(new Nl({id:"selectNextSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));nt(new Nl({id:"selectNextPageSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:12,secondary:[2060]}}));nt(new Nl({id:"selectLastSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));nt(new Nl({id:"selectPrevSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));nt(new Nl({id:"selectPrevPageSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:11,secondary:[2059]}}));nt(new Nl({id:"selectFirstSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));nt(new Nl({id:"toggleSuggestionDetails",precondition:$n.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:A0,group:"right",order:1,when:_t.and($n.DetailsVisible,$n.CanResolve),title:C("detail.more","show less")},{menuId:A0,group:"right",order:1,when:_t.and($n.DetailsVisible.toNegated(),$n.CanResolve),title:C("detail.less","show more")}]}));nt(new Nl({id:"toggleExplainMode",precondition:$n.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));nt(new Nl({id:"toggleSuggestionFocus",precondition:$n.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:2570,mac:{primary:778}}}));nt(new Nl({id:"insertBestCompletion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),SO.AtEnd,$n.Visible.toNegated(),Gb.OtherSuggestions.toNegated(),Mo.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(Ga(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:wc,primary:2}}));nt(new Nl({id:"insertNextSuggestion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),Gb.OtherSuggestions,$n.Visible.toNegated(),Mo.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:2}}));nt(new Nl({id:"insertPrevSuggestion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),Gb.OtherSuggestions,$n.Visible.toNegated(),Mo.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:wc,kbExpr:de.textInputFocus,primary:1026}}));it(class extends Et{constructor(){super({id:"editor.action.resetSuggestSize",label:C("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){Gc.get(e).resetWidgetSize()}});function fXe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function gXe(i,e){return(t,n)=>e(i(t),i(n))}function pXe(){return(i,e)=>i-e}function mXe(i,e){let t;for(const n of i)(t===void 0||e(n,t)>0)&&(t=n);return t}class _Xe extends Oe{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new er(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(r=>{r.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(r=>{r.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Gc.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(o,a,u)=>{const d=this.editor.getModel(),h=i5(d,this.suggestControllerPreselector());if(!h)return-1;const f=Le.lift(a),p=u.map((v,b)=>{const L=Mie(n,f,v,this.isShiftKeyPressed),S=i5(d,L==null?void 0:L.normalizedInlineCompletion);if(!S)return;const y=vXe(h.range,S.range)&&h.text.startsWith(S.text);return{index:b,valid:y,prefixLength:S.text.length,suggestItem:v}}).filter(v=>v&&v.valid),m=mXe(p,gXe(v=>v.prefixLength,pXe()));return m?m.index:-1}}));let r=!1;const s=()=>{r||(r=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Rt.once(n.model.onDidTrigger)(o=>{s()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;bXe(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=Gc.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return Mie(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Gc.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Gc.get(this.editor);e&&e.forceRenderingAbove()}}function vXe(i,e){return e.startLineNumber===i.startLineNumber&&e.startColumn===i.startColumn&&(e.endLineNumber<i.endLineNumber||e.endLineNumber===i.endLineNumber&&e.endColumn<=i.endColumn)}function bXe(i,e){return i===e?!0:!i||!e?!1:i.completionItemKind===e.completionItemKind&&i.isSnippetText===e.isSnippetText&&AYe(i.normalizedInlineCompletion,e.normalizedInlineCompletion)}function Mie(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:Q.fromPositions(e,e),text:""}};let{insertText:r}=t.completion,s=!1;if(t.completion.insertTextRules&4){const a=new ZB().parse(r),u=i.editor.getModel();if(a.children.length>100)return;xf.adjustWhitespace(u,e,a,!0,!0),r=a.toString(),s=!0}const o=i.getOverwriteInfo(t,n);return{isSnippetText:s,completionItemKind:t.completion.kind,normalizedInlineCompletion:{text:r,range:Q.fromPositions(e.delta(0,-o.overwriteBefore),e.delta(0,Math.max(o.overwriteAfter,0)))}}}var Rie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class CXe extends kpe{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new _Xe(this.editor,()=>{var n,r;return(r=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||r===void 0?void 0:r.toLiveInlineCompletion()})),this.updateOperation=this._register(new Oa),this.updateCacheSoon=this._register(new er(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const r=this.ghostText;r&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,wXe(r.parts.map(s=>s.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Un(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return Rie(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition(),r=uo(o=>Rie(this,void 0,void 0,function*(){let a;try{a=yield Ope(n,this.editor.getModel(),{triggerKind:Yu.Automatic,selectedSuggestionInfo:t},o)}catch(u){gn(u);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,Yu.Automatic),this.onDidChangeEmitter.fire())})),s=new Ape(r,Yu.Automatic);this.updateOperation.value=s,yield r,this.updateOperation.value===s&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const r=this.isSuggestionPreviewEnabled(),s=i5(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),o=this.suggestionInlineCompletionSource.state,a=i5(this.editor.getModel(),(n=o==null?void 0:o.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),u=s&&a&&s.text.startsWith(a.text)&&s.range.equalsRange(a.range);if(!r&&!u)return;const d=u?s:a||s,h=u?d.text.length-a.text.length:0;return this.toGhostText(d,h)}toGhostText(e,t){const n=this.editor.getOptions().get(105).previewMode;return e?Npe(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new Tpe(e.range.endLineNumber,[],this.minReservedLineCount):void 0}}function wXe(i){return i.reduce((e,t)=>e+t,0)}var yXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},SXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},LXe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class EXe extends Oe{constructor(){super(...arguments),this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Oa)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?fXe(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let HU=class extends EXe{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new xXe),this.suggestWidgetAdapterModel=this._register(new CXe(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new OU(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(r=>e.containsPosition(new Le(n.lineNumber,r.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Yu.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return LXe(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};HU=yXe([SXe(1,Tr)],HU);class xXe extends Oe{constructor(){super(...arguments),this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Oa)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new BYe(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var DXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Pie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},_W;const Fie=(_W=window.trustedTypes)===null||_W===void 0?void 0:_W.createPolicy("editorGhostText",{createHTML:i=>i});let $U=class extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=r,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(IXe,this.editor)),this.additionalLinesWidget=this._register(new TXe(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(29)||s.hasChanged(104)||s.hasChanged(87)||s.hasChanged(82)||s.hasChanged(44)||s.hasChanged(43)||s.hasChanged(58))&&this.update()})),this._register(Un(()=>{var s;this.disposed=!0,this.update(),(s=this.viewMoreContentWidget)===null||s===void 0||s.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,r=new Array;function s(d,h){if(r.length>0){const f=r[r.length-1];h&&f.decorations.push(new ku(f.content.length+1,f.content.length+1+d[0].length,h,0)),f.content+=d[0],d=d.slice(1)}for(const f of d)r.push({content:f,decorations:h?[new ku(1,f.length+1,h,0)]:[]})}const o=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,u=0;for(const d of t.parts){let h=d.lines;a===void 0?(n.push({column:d.column,text:h[0],preview:d.preview}),h=h.slice(1)):s([o.substring(u,d.column-1)],void 0),h.length>0&&(s(h,"ghost-text"),a===void 0&&d.column<=o.length&&(a=d.column)),u=d.column-1}a!==void 0&&s([o.substring(u)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,r,t.additionalReservedLineCount),t.parts.some(d=>d.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new Le(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const r=this.editor.getOption(43),s=document.createElement("div");s.className="suggest-preview-additional-widget",Aa.applyFontInfoSlow(s,r);const o=document.createElement("span");o.className="content-spacer",o.append(t),s.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("  "),s.append(a);const u=new Je,d=document.createElement("div");return d.className="button suggest-preview-text",d.append(`+${n} lines`),u.add(eo(d,"mousedown",h=>{var f;(f=this.model)===null||f===void 0||f.setExpanded(!0),h.preventDefault(),this.editor.focus()})),s.append(d),new NXe(this.editor,e,s,u)}};$U=DXe([Pie(2,Nn),Pie(3,Fo)],$U);class IXe{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new Je}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){if(this.disposableStore.clear(),!this.editor.getModel())return;const s=new Array;n&&s.push({range:Q.fromPositions(new Le(e,n.column),new Le(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(o=>({range:Q.fromPositions(new Le(e,o.column)),options:{description:"ghost-text",after:{content:o.text,inlineClassName:o.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(s))}}class TXe{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const r=this.editor.getModel();if(!r)return;const{tabSize:s}=r.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const u=document.createElement("div");kXe(u,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:u})}})}}function kXe(i,e,t,n,r){const s=n.get(29),o=n.get(104),a="none",u=n.get(82),d=n.get(44),h=n.get(43),f=n.get(58),p=kb(1e4);p.appendASCIIString('<div class="suggest-preview-text">');for(let b=0,L=t.length;b<L;b++){const S=t[b],y=S.content;p.appendASCIIString('<div class="view-line'),p.appendASCIIString('" style="top:'),p.appendASCIIString(String(b*f)),p.appendASCIIString('px;width:1000000px;">');const E=wq(y),A=p8(y),N=Js.createEmpty(y,r);M8(new LC(h.isMonospace&&!s,h.canUseHalfwidthRightwardsArrow,y,!1,E,A,0,N,S.decorations,e,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,o,a,u,d!==xu.OFF,null),p),p.appendASCIIString("</div>")}p.appendASCIIString("</div>"),Aa.applyFontInfoSlow(i,h);const m=p.build(),v=Fie?Fie.createHTML(m):m;i.innerHTML=v}class NXe extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(r),this._register(Un(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}hr((i,e)=>{const t=i.getColor(I2e);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=i.getColor(T2e);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const r=i.getColor(D2e);r&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${r}; }`))});var Upe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},e7=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let to=class jpe extends Oe{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Oa),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(jpe.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(UU,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return e7(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};to.inlineSuggestionVisible=new Dt("inlineSuggestionVisible",!1,C("inlineSuggestionVisible","Whether an inline suggestion is visible"));to.inlineSuggestionHasIndentation=new Dt("inlineSuggestionHasIndentation",!1,C("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));to.inlineSuggestionHasIndentationLessThanTabSize=new Dt("inlineSuggestionHasIndentationLessThanTabSize",!0,C("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));to.ID="editor.contrib.ghostTextController";to=Upe([zU(1,Nn)],to);class AXe{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=to.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=to.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=to.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let UU=class extends Oe{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new AXe(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(HU,this.editor)),this.widget=this._register(this.instantiationService.createInstance($U,this.editor,this.model)),this._register(Un(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const r=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&r&&r.parts.length>0){const{column:s,lines:o}=r.parts[0],a=o[0],u=this.editor.getModel().getLineIndentColumn(r.lineNumber);if(s<=u){let h=Ta(a);h===-1&&(h=a.length-1),t=h>0;const f=this.editor.getModel().getOptions().tabSize;n=ur.visibleColumnFromColumn(a,h+1,f)<f}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};UU=Upe([zU(1,Nn),zU(2,cn)],UU);const Kpe=Po.bindToContribution(to.get),EO=new Kpe({id:Ipe,precondition:to.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});nt(EO);Oo.registerKeybindingRule({primary:2,weight:200,id:EO.id,when:_t.and(EO.precondition,de.tabMovesFocus.toNegated(),to.inlineSuggestionHasIndentationLessThanTabSize)});nt(new Kpe({id:"editor.action.inlineSuggest.hide",precondition:to.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));class dS extends Et{constructor(){super({id:dS.ID,label:C("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:_t.and(de.writable,to.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return e7(this,void 0,void 0,function*(){const n=to.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}dS.ID="editor.action.inlineSuggest.showNext";class hS extends Et{constructor(){super({id:hS.ID,label:C("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:_t.and(de.writable,to.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return e7(this,void 0,void 0,function*(){const n=to.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}hS.ID="editor.action.inlineSuggest.showPrevious";class OXe extends Et{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:C("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:de.writable})}run(e,t){return e7(this,void 0,void 0,function*(){const n=to.get(t);n&&n.trigger()})}}ki(to.ID,to);it(OXe);it(dS);it(hS);var MXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ow=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class RXe{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let jU=class{constructor(e,t,n,r,s,o,a,u){this._editor=e,this._hover=t,this._commandService=n,this._menuService=r,this._contextKeyService=s,this._modeService=o,this._openerService=a,this.accessibilityService=u}suggestHoverAnchor(e){const t=to.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new aW(1e3,this,Q.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new aW(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new aW(1e3,this,e.target.range):null}computeSync(e,t){const n=to.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new RXe(this,e.range,n)]:[]}renderHoverParts(e,t,n){const r=new Je,s=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(s,t,r);const o=r.add(this._menuService.createMenu(Mt.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:C("showNextInlineSuggestion","Next"),commandId:dS.ID,run:()=>this._commandService.executeCommand(dS.ID)}),u=n.addAction({label:C("showPreviousInlineSuggestion","Previous"),commandId:hS.ID,run:()=>this._commandService.executeCommand(hS.ID)});n.addAction({label:C("acceptInlineSuggestion","Accept"),commandId:EO.id,run:()=>this._commandService.executeCommand(EO.id)});const d=[a,u];for(const h of d)h.setEnabled(!1);s.hasMultipleSuggestions().then(h=>{for(const f of d)f.setEnabled(h)});for(const[h,f]of o.getActions())for(const p of f)p instanceof C0&&n.addAction({label:p.label,commandId:p.item.id,run:()=>this._commandService.executeCommand(p.item.id)});return r}renderScreenReaderText(e,t,n){var r,s;const o=qe,a=o("div.hover-row.markdown-hover"),u=Be(a,o("div.hover-contents")),d=n.add(new Fp({editor:this._editor},this._modeService,this._openerService)),h=p=>{n.add(d.onDidRenderAsync(()=>{u.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const m=C("inlineSuggestionFollows","Suggestion:"),v=n.add(d.render(new Mp().appendText(m).appendCodeblock("text",p)));u.replaceChildren(v.element)},f=(s=(r=e.controller.activeModel)===null||r===void 0?void 0:r.inlineCompletionsModel)===null||s===void 0?void 0:s.ghostText;if(f){const p=this._editor.getModel().getLineContent(f.lineNumber);h(f.renderForScreenReader(p))}t.appendChild(a)}};jU=MXe([ow(2,Tr),ow(3,CC),ow(4,cn),ow(5,Fo),ow(6,Ll),ow(7,il)],jU);var PXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},FXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let KU=class extends Oe{constructor(e,t,n={},r){var s;super(),this._link=t,this._enabled=!0,this.el=Be(e,qe("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const o=this._register(new Ui(this.el,"click")),a=this._register(new Ui(this.el,"keypress")),u=Rt.chain(a.event).map(f=>new yr(f)).filter(f=>f.keyCode===3).event,d=this._register(new Ui(this.el,lr.Tap)).event;this._register(Hi.addTarget(this.el));const h=Rt.any(o.event,u,d);this._register(h(f=>{this.enabled&&(Ni.stop(f,!0),n!=null&&n.opener?n.opener(this._link.href):r.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};KU=PXe([FXe(3,Ll)],KU);hr((i,e)=>{const t=i.getColor(D8);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=i.getColor(I8);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var qpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Gpe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const BXe=26;let qU=class extends Oe{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(GU))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,BXe)}};qU=qpe([Gpe(1,Nn)],qU);let GU=class extends Oe{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Fp,{}),this.element=qe("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=qe("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Hs(this.element)}show(e){Hs(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=Be(this.element,qe("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(qe(`div${pr.asCSSSelector(e.icon)}`));const r=Be(this.element,qe("div.message-container"));if(r.setAttribute("aria-hidden","true"),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Be(this.element,qe("div.message-actions-container")),e.actions)for(const o of e.actions)this._register(this.instantiationService.createInstance(KU,this.messageActionsContainer,Object.assign(Object.assign({},o),{tabIndex:-1}),{}));const s=Be(this.element,qe("div.action-container"));this.actionBar=this._register(new ug(s)),this.actionBar.push(this._register(new ic("banner.close","Close Banner",pr.asClassName(Pde),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};GU=qpe([Gpe(0,Nn)],GU);var tZ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},xy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Bh=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const WXe=co("extensions-warning-message",_e.warning,C("warningIcon","Icon shown with a warning message in the extensions editor."));let fS=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const o=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=o)a={message:C("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new sL};else if(s.ambiguousCharacterCount>=o)a={message:C("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new iL};else if(s.invisibleCharacterCount>=o)a={message:C("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new rL};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:WXe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(r.createInstance(qU,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(112),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(112)&&(this._options=e.getOption(112),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=VXe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new YU(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new HXe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};fS.ID="editor.contrib.unicodeHighlighter";fS=tZ([xy(1,Vu),xy(2,efe),xy(3,Nn)],fS);function VXe(i,e){var t;return{nonBasicASCII:e.nonBasicASCII===Sf?!i:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Sf?!i:e.includeComments,allowedCharacters:(t=e.allowedCharacters)!==null&&t!==void 0?t:{}}}let YU=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=r,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new er(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const r of t.ranges)n.push({range:r,options:this._options.includeComments?o5:s5});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),n))})}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e);if(!bG(t,{range:n,options:this._options.includeComments?o5:s5,id:e,ownerId:0}))return null;const r=t.getValueInRange(n);return{reason:Ype(r,this._options)}}};YU=tZ([xy(3,Vu)],YU);class HXe extends Oe{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new er(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const r of e){const s=kG.computeUnicodeHighlights(this._model,this._options,r);for(const o of s.ranges)n.ranges.push(o);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const r of n.ranges)t.push({range:r,options:this._options.includeComments?o5:s5});this._updateState(n),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),t))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),r=t.getValueInRange(n);return bG(t,{range:n,options:this._options.includeComments?o5:s5,id:e,ownerId:0})?{reason:Ype(r,this._options)}:null}}let ZU=class{constructor(e,t,n,r){this._editor=e,this._hover=t,this._modeService=n,this._openerService=r}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=this._editor.getContribution(fS.ID),s=[];let o=300;for(const a of t){let f=function(S){let y=`\`U+${S.toString(16).padStart(4,"0")}\``;return _p.isInvisibleCharacter(S)||(y+=` "${`${$Xe(S)}`}"`),y};const u=r.getDecorationInfo(a.id);if(!u)continue;const h=n.getValueInRange(a.range).codePointAt(0),p=f(h);let m;switch(u.reason.kind){case 0:m=C("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",p,f(u.reason.confusableWith.codePointAt(0)));break;case 1:m=C("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",p);break;case 2:m=C("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",p);break}const v={codePoint:h,reason:u.reason.kind},b=C("unicodeHighlight.adjustSettings","Adjust settings"),L=[{value:`${m} [${b}](command:${HM.ID}?${encodeURIComponent(JSON.stringify(v))})`,isTrusted:!0}];s.push(new u2(this,a.range,L,o++))}return s}renderHoverParts(e,t,n){return ype(e,t,this._editor,this._hover,this._modeService,this._openerService)}};ZU=tZ([xy(2,Fo),xy(3,Ll)],ZU);function $Xe(i){return i===96?"`` ` ``":"`"+String.fromCodePoint(i)+"`"}function Ype(i,e){return kG.computeUnicodeHighlightReason(i,e)}const s5=En.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Lr(tTe),position:yl.Center},minimap:{color:Lr(oTe),position:bl.Inline},hideInCommentTokens:!0}),o5=En.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Lr(k8),position:yl.Center},minimap:{color:Lr(Vq),position:bl.Inline}});class iL extends Et{constructor(){super({id:iL.ID,label:C("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return Bh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(nr);r&&this.runAction(r)})}runAction(e){return Bh(this,void 0,void 0,function*(){yield e.updateValue(Rf.ambiguousCharacters,!1,1)})}}iL.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class rL extends Et{constructor(){super({id:rL.ID,label:C("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return Bh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(nr);r&&this.runAction(r)})}runAction(e){return Bh(this,void 0,void 0,function*(){yield e.updateValue(Rf.invisibleCharacters,!1,1)})}}rL.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class sL extends Et{constructor(){super({id:sL.ID,label:C("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return Bh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(nr);r&&this.runAction(r)})}runAction(e){return Bh(this,void 0,void 0,function*(){yield e.updateValue(Rf.nonBasicASCII,!1,1)})}}sL.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class HM extends Et{constructor(){super({id:HM.ID,label:C("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return Bh(this,void 0,void 0,function*(){const{codePoint:r,reason:s}=n,o=String.fromCodePoint(r),a=e.get(Cc),u=e.get(nr);function d(p){return _p.isInvisibleCharacter(p)?C("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",`U+${p.toString(16)}`):C("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`U+${p.toString(16)} "${o}"`)}const h=[{label:d(r),run:()=>zXe(u,[r])}];if(s===0){const p=new iL;h.push({label:p.label,run:()=>Bh(this,void 0,void 0,function*(){return p.runAction(u)})})}else if(s===1){const p=new rL;h.push({label:p.label,run:()=>Bh(this,void 0,void 0,function*(){return p.runAction(u)})})}else if(s===2){const p=new sL;h.push({label:p.label,run:()=>Bh(this,void 0,void 0,function*(){return p.runAction(u)})})}else UXe(s);const f=yield a.pick(h,{title:C("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}HM.ID="editor.action.unicodeHighlight.showExcludeOptions";function zXe(i,e){return Bh(this,void 0,void 0,function*(){const t=i.getValue(Rf.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const r of e)n[String.fromCodePoint(r)]=!0;yield i.updateValue(Rf.allowedCharacters,n,1)})}function UXe(i){throw new Error(`Unexpected value: ${i}`)}it(iL);it(rL);it(sL);it(HM);ki(fS.ID,fS);var Zpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},D4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Bie=qe;let XU=class extends Oe{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Bie("div.hover-row.status-bar"),this.actionsElement=Be(this.hoverElement,Bie("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(YY.render(this.actionsElement,e,n))}append(e){const t=Be(this.actionsElement,e);return this._hasContent=!0,t}};XU=Zpe([D4(0,Sr)],XU);class a5{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),r=t.range.startLineNumber,s=n.getLineMaxColumn(r);return e.getLineDecorations(r).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===r?o.range.startColumn:1,u=o.range.endLineNumber===r?o.range.endColumn:s;if(o.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>u)return!1}else if(a>t.range.startColumn||t.range.endColumn>u)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Gs.EMPTY;const n=a5._getLineDecorations(this._editor,t);return Gs.merge(this._participants.map(r=>this._computeAsync(r,n,t,e)))}_computeAsync(e,t,n,r){return e.computeAsync?e.computeAsync(n,t,r):Gs.EMPTY}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=a5._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return FS(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let Uv=class QU extends Wu{constructor(e,t,n,r,s){super(),this._hoverVisibleKey=t,this._keybindingService=r,this._contextKeyService=s,this.allowEditorOverflow=!0,this._participants=[n.createInstance(SU,e,this),n.createInstance(EU,e,this),n.createInstance(jU,e,this),n.createInstance(ZU,e,this),n.createInstance(AU,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new ppe),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,o=>{o.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._messagesAreComplete=!1,this._lastAnchor=null,this._computer=new a5(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new _pe(this._computer,o=>this._withResult(o,!0),null,o=>this._withResult(o,!1),this._editor.getOption(52).delay),this._register(eo(this.getDomNode(),Ht.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(eo(this.getDomNode(),Ht.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Wr.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return QU.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,r=e.target.detail;if(r&&!r.isAfterLines&&typeof r.horizontalDistanceToText=="number"&&r.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const r of this._participants)if(typeof r.suggestHoverAnchor=="function"){const s=r.suggestHoverAnchor(e);s&&n.push(s)}if(this._shouldShowAt(e)&&e.target.range){const s=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new Q(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new sie(0,s))}return n.length===0?!1:(n.sort((r,s)=>s.priority-r.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue($n.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new sie(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const r=this._messages.filter(s=>s.isValidForHoverAnchor(e));if(r.length===0)this.hide();else{if(r.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,r)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._messagesAreComplete=t,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,r=t[0].range,s=null,o=document.createDocumentFragment();const a=new Je,u=new Map;for(const h of t)n=Math.min(n,h.range.startColumn),r=Q.plusRange(r,h.range),h.forceShowAtRange&&(s=h.range),u.has(h.owner)||u.set(h.owner,[]),u.get(h.owner).push(h);const d=a.add(new XU(this._keybindingService));for(const h of this._participants)if(u.has(h)){const f=u.get(h);a.add(h.renderHoverParts(f,o,d))}d.hasContent&&o.appendChild(d.hoverElement),this._renderDisposable=a,o.hasChildNodes()&&(s?this._showAt(s.getStartPosition(),s,this._shouldFocus):this._showAt(new Le(e.range.startLineNumber,n),r,this._shouldFocus),this._updateContents(o)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:QU._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};Uv.ID="editor.contrib.modesContentHoverWidget";Uv._DECORATION_OPTIONS=En.register({description:"content-hover-highlight",className:"hoverHighlight"});Uv=Zpe([D4(2,Nn),D4(3,Sr),D4(4,cn)],Uv);const Wie=qe;class jXe{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const r of t){if(!r.options.glyphMarginClassName)continue;const s=r.options.glyphMarginHoverMessage;!s||hO(s)||n.push(...Iq(s).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class $1 extends Wu{constructor(e,t,n=O3e){super(),this._renderDisposeables=this._register(new Je),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new ppe),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Fp({editor:this._editor},t,n)),this._computer=new jXe(this._editor),this._hoverOperation=new _pe(this._computer,r=>this._withResult(r),void 0,r=>this._withResult(r),300),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return $1.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),r=this._editor.getScrollTop(),s=this._editor.getOption(58),o=this._hover.containerDomNode.clientHeight,a=n-r-(o-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const r of t){const s=Wie("div.hover-row.markdown-hover"),o=Be(s,Wie("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(r.value));o.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}}$1.ID="editor.contrib.modesGlyphHoverWidget";var KXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_P=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let O0=class Xpe{constructor(e,t,n,r,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=r,this._toUnhook=new Je,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=de.hoverVisible.bindTo(s)}static get(e){return e.getContribution(Xpe.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===Uv.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===$1.ID||(t!==12&&e.target.detail!==$1.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,r,s,o;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===Uv.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===Uv.ID&&(!((r=this._contentWidget)===null||r===void 0)&&r.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===$1.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(s=this._glyphWidget)===null||s===void 0||s.hide();return}if(a===2&&e.target.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new $1(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Uv,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};O0.ID="editor.contrib.hover";O0=KXe([_P(1,Nn),_P(2,Ll),_P(3,Fo),_P(4,cn)],O0);class qXe extends Et{constructor(){super({id:"editor.action.showHover",label:C({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=O0.get(t);if(!n)return;const r=t.getPosition(),s=new Q(r.lineNumber,r.column,r.lineNumber,r.column),o=t.getOption(2)===2;n.showContentHover(s,1,o)}}class GXe extends Et{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:C({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=O0.get(t);if(!n)return;const r=t.getPosition();if(!r)return;const s=new Q(r.lineNumber,r.column,r.lineNumber,r.column);qb.get(t).startFindDefinitionFromCursor(r).then(()=>{n.showContentHover(s,1,!0)})}}ki(O0.ID,O0);it(qXe);it(GXe);hr((i,e)=>{const t=i.getColor(mIe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=i.getColor(Ib);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const r=i.getColor(Wq);r&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${r.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${r.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${r.transparent(.5)}; }`));const s=i.getColor(D8);s&&e.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const o=i.getColor(I8);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=i.getColor(Bq);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const u=i.getColor(_Ie);u&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${u}; }`);const d=i.getColor(nce);d&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${d}; }`)});class JU extends Oe{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){var t;if(e.target.type!==6||![...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))||!e.target.range)return;const s=this._editor.getContribution(O0.ID);if(!s.isColorPickerVisible()){const o=new Q(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);s.showContentHover(o,0,!1)}}}JU.ID="editor.contrib.colorContribution";ki(JU.ID,JU);class jv{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const r=t.length,s=e.length;if(n+r>s)return!1;for(let o=0;o<r;o++){const a=e.charCodeAt(n+o),u=t.charCodeAt(o);if(a!==u&&!(a>=65&&a<=90&&a+32===u)&&!(u>=65&&u<=90&&u+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,r,s,o){const a=e.startLineNumber,u=e.startColumn,d=e.endLineNumber,h=e.endColumn,f=s.getLineContent(a),p=s.getLineContent(d);let m=f.lastIndexOf(t,u-1+t.length),v=p.indexOf(n,h-1-n.length);if(m!==-1&&v!==-1)if(a===d)f.substring(m+t.length,v).indexOf(n)>=0&&(m=-1,v=-1);else{const L=f.substring(m+t.length),S=p.substring(0,v);(L.indexOf(n)>=0||S.indexOf(n)>=0)&&(m=-1,v=-1)}let b;m!==-1&&v!==-1?(r&&m+t.length<f.length&&f.charCodeAt(m+t.length)===32&&(t=t+" "),r&&v>0&&p.charCodeAt(v-1)===32&&(n=" "+n,v-=1),b=jv._createRemoveBlockCommentOperations(new Q(a,m+t.length+1,d,v+1),t,n)):(b=jv._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=b.length===1?n:null);for(const L of b)o.addTrackedEditOperation(L.range,L.text)}static _createRemoveBlockCommentOperations(e,t,n){let r=[];return Q.isEmpty(e)?r.push(jr.delete(new Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(r.push(jr.delete(new Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(jr.delete(new Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),r}static _createAddBlockCommentOperations(e,t,n,r){let s=[];return Q.isEmpty(e)?s.push(jr.replace(new Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(jr.insert(new Le(e.startLineNumber,e.startColumn),t+(r?" ":""))),s.push(jr.insert(new Le(e.endLineNumber,e.endColumn),(r?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,r=this._selection.startColumn;e.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,r),o=_i.getComments(s);!o||!o.blockCommentStartToken||!o.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const r=n[0],s=n[1];return new yt(r.range.endLineNumber,r.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const r=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new yt(r.endLineNumber,r.endColumn+s,r.endLineNumber,r.endColumn+s)}}}class Gg{constructor(e,t,n,r,s,o){this._selection=e,this._tabSize=t,this._type=n,this._insertSpace=r,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=o||!1}static _gatherPreflightCommentStrings(e,t,n){e.tokenizeIfCheap(t);const r=e.getLanguageIdAtPosition(t,1),s=_i.getComments(r),o=s?s.lineCommentToken:null;if(!o)return null;let a=[];for(let u=0,d=n-t+1;u<d;u++)a[u]={ignore:!1,commentStr:o,commentStrOffset:0,commentStrLength:o.length};return a}static _analyzeLines(e,t,n,r,s,o,a){let u=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,f=r.length;h<f;h++){const p=r[h],m=s+h;if(m===s&&a){p.ignore=!0;continue}const v=n.getLineContent(m),b=Ta(v);if(b===-1){p.ignore=o,p.commentStrOffset=v.length;continue}if(u=!1,p.ignore=!1,p.commentStrOffset=b,d&&!jv._haystackHasNeedleAtOffset(v,p.commentStr,b)&&(e===0?d=!1:e===1||(p.ignore=!0)),d&&t){const L=b+p.commentStrLength;L<v.length&&v.charCodeAt(L)===32&&(p.commentStrLength+=1)}}if(e===0&&u){d=!1;for(let h=0,f=r.length;h<f;h++)r[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:r}}static _gatherPreflightData(e,t,n,r,s,o,a){const u=Gg._gatherPreflightCommentStrings(n,r,s);return u===null?{supported:!1}:Gg._analyzeLines(e,t,n,u,r,o,a)}_executeLineComments(e,t,n,r){let s;n.shouldRemoveComments?s=Gg._createRemoveLineCommentsOperations(n.lines,r.startLineNumber):(Gg._normalizeInsertionPoint(e,n.lines,r.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,r.startLineNumber));const o=new Le(r.positionLineNumber,r.positionColumn);for(let a=0,u=s.length;a<u;a++)t.addEditOperation(s[a].range,s[a].text),Q.isEmpty(s[a].range)&&Q.getStartPosition(s[a].range).equals(o)&&e.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(r)}_attemptRemoveBlockComment(e,t,n,r){let s=t.startLineNumber,o=t.endLineNumber,a=r.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),u=e.getLineContent(s).lastIndexOf(n,a-1),d=e.getLineContent(o).indexOf(r,t.endColumn-1-n.length);return u!==-1&&d===-1&&(d=e.getLineContent(s).indexOf(r,u+n.length),o=s),u===-1&&d!==-1&&(u=e.getLineContent(o).lastIndexOf(n,d),s=o),t.isEmpty()&&(u===-1||d===-1)&&(u=e.getLineContent(s).indexOf(n),u!==-1&&(d=e.getLineContent(s).indexOf(r,u+n.length))),u!==-1&&e.getLineContent(s).charCodeAt(u+n.length)===32&&(n+=" "),d!==-1&&e.getLineContent(o).charCodeAt(d-1)===32&&(r=" "+r,d-=1),u!==-1&&d!==-1?jv._createRemoveBlockCommentOperations(new Q(s,u+n.length+1,o,d+1),n,r):null}_executeBlockComment(e,t,n){e.tokenizeIfCheap(n.startLineNumber);let r=e.getLanguageIdAtPosition(n.startLineNumber,1),s=_i.getComments(r);if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const o=s.blockCommentStartToken,a=s.blockCommentEndToken;let u=this._attemptRemoveBlockComment(e,n,o,a);if(!u){if(n.isEmpty()){const d=e.getLineContent(n.startLineNumber);let h=Ta(d);h===-1&&(h=d.length),u=jv._createAddBlockCommentOperations(new Q(n.startLineNumber,h+1,n.startLineNumber,d.length+1),o,a,this._insertSpace)}else u=jv._createAddBlockCommentOperations(new Q(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),o,a,this._insertSpace);u.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(n);for(const d of u)t.addEditOperation(d.range,d.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new Q(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const r=Gg._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return r.supported?this._executeLineComments(e,t,r,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new yt(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];o.ignore||n.push(jr.delete(new Q(t+r,o.commentStrOffset+1,t+r,o.commentStrOffset+o.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[];const r=this._insertSpace?" ":"";for(let s=0,o=e.length;s<o;s++){const a=e[s];a.ignore||n.push(jr.insert(new Le(t+s,a.commentStrOffset+1),a.commentStr+r))}return n}static nextVisibleColumn(e,t,n,r){return n?e+(t-e%t):e+r}static _normalizeInsertionPoint(e,t,n,r){let s=1073741824,o,a;for(let u=0,d=t.length;u<d;u++){if(t[u].ignore)continue;const h=e.getLineContent(n+u);let f=0;for(let p=0,m=t[u].commentStrOffset;f<s&&p<m;p++)f=Gg.nextVisibleColumn(f,r,h.charCodeAt(p)===9,1);f<s&&(s=f)}s=Math.floor(s/r)*r;for(let u=0,d=t.length;u<d;u++){if(t[u].ignore)continue;const h=e.getLineContent(n+u);let f=0;for(o=0,a=t[u].commentStrOffset;f<s&&o<a;o++)f=Gg.nextVisibleColumn(f,r,h.charCodeAt(o)===9,1);f>s?t[u].commentStrOffset=o-1:t[u].commentStrOffset=o}}}class nZ extends Et{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=[],s=n.getOptions(),o=t.getOption(19),a=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));a.sort((d,h)=>Q.compareRangesUsingStarts(d.selection,h.selection));let u=a[0];for(let d=1;d<a.length;d++){const h=a[d];u.selection.endLineNumber===h.selection.startLineNumber&&(u.index<h.index?h.ignoreFirstLine=!0:(u.ignoreFirstLine=!0,u=h))}for(const d of a)r.push(new Gg(d.selection,s.tabSize,this._type,o.insertSpace,o.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class YXe extends nZ{constructor(){super(0,{id:"editor.action.commentLine",label:C("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"5_insert",title:C({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class ZXe extends nZ{constructor(){super(1,{id:"editor.action.addCommentLine",label:C("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2081),weight:100}})}}class XXe extends nZ{constructor(){super(2,{id:"editor.action.removeCommentLine",label:C("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2099),weight:100}})}}class QXe extends Et{constructor(){super({id:"editor.action.blockComment",label:C("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"5_insert",title:C({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const n=t.getOption(19),r=[],s=t.getSelections();for(const o of s)r.push(new jv(o,n.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}it(YXe);it(ZXe);it(XXe);it(QXe);var JXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},WN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let gS=class Qpe{constructor(e,t,n,r,s,o){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=r,this._keybindingService=s,this._menuService=o,this._toDispose=new Je,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){const u=this._contextViewService.getContextViewElement(),d=a.srcElement;d.shadowRoot&&_0(u)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(Qpe.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let n=!1;for(const r of this._editor.getSelections())if(r.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?Mt.SimpleEditorContext:Mt.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],r=this._menuService.createMenu(t,this._contextKeyService),s=r.getActions({arg:e.uri});r.dispose();for(let o of s){const[,a]=o;let u=0;for(const d of a)if(d instanceof xq){const h=this._getMenuActions(e,d.item.submenu);h.length>0&&(n.push(new f8(d.id,d.label,h)),u++)}else n.push(d),u++;u&&n.push(new Zc)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),o=Uo(this._editor.getDomNode()),a=o.left+s.left,u=o.top+s.top+s.height;t={x:a,y:u}}const r=this._editor.getOption(114)&&!ng;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:s=>{const o=this._keybindingFor(s);if(o)return new ZA(s,s,{label:!0,keybinding:o.getLabel(),isMenu:!0});const a=s;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new ZA(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};gS.ID="editor.contrib.contextmenu";gS=JXe([WN(1,j0),WN(2,Hp),WN(3,cn),WN(4,Sr),WN(5,CC)],gS);class eQe extends Et{constructor(){super({id:"editor.action.showContextMenu",label:C("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:1092,weight:100}})}run(e,t){gS.get(t).showContextMenu()}}ki(gS.ID,gS);it(eQe);class vW{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let r=0;r<t;r++)if(!this.selections[r].equalsSelection(e.selections[r]))return!1;return!0}}class bW{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}class Yb extends Oe{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new vW(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new bW(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(Yb.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new bW(new vW(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new bW(new vW(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}Yb.ID="editor.contrib.cursorUndoRedoController";class tQe extends Et{constructor(){super({id:"cursorUndo",label:C("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:2099,weight:100}})}run(e,t,n){Yb.get(t).cursorUndo()}}class nQe extends Et{constructor(){super({id:"cursorRedo",label:C("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){Yb.get(t).cursorRedo()}}ki(Yb.ID,Yb);it(tQe);it(nQe);class iQe{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new Q(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new yt(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new yt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new yt(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new yt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new yt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function aw(i){return qn?i.altKey:i.ctrlKey}class wp extends Oe{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(aw(e)&&(this._modifierPressed=!0),this._mouseDown&&aw(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(aw(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===wp.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let r=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(r.length===1)this._dragSelection=r[0];else return}aw(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new Le(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let r=this._editor.getSelection();if(r){const{selectionStartLineNumber:s,selectionStartColumn:o}=r;n=[new yt(s,o,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(r=>r.containsPosition(t)?new yt(t.lineNumber,t.column,t.lineNumber,t.column):r);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(aw(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(wp.ID,new iQe(this._dragSelection,t,aw(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),options:wp._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}wp.ID="editor.contrib.dragAndDrop";wp.TRIGGER_KEY_VALUE=qn?6:5;wp._DECORATION_OPTIONS=En.register({description:"dnd-target",className:"dnd-target"});ki(wp.ID,wp);class Xo{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const r=n.options;if(r===Xo._FIND_MATCH_DECORATION||r===Xo._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let r=0,s=this._decorations.length;r<s;r++){let o=this._editor.getModel().getDecorationRange(this._decorations[r]);if(e.equalsRange(o)){t=this._decorations[r],n=r+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(r=>{if(this._highlightedDecorationId!==null&&(r.changeDecorationOptions(this._highlightedDecorationId,Xo._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,r.changeDecorationOptions(this._highlightedDecorationId,Xo._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(r.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){let o=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);s=new Q(s.startLineNumber,s.startColumn,o,a)}this._rangeHighlightDecorationId=r.addDecoration(s,Xo._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let r=Xo._FIND_MATCH_DECORATION,s=[];if(e.length>1e3){r=Xo._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),d=this._editor.getLayoutInfo().height/a,h=Math.max(2,Math.ceil(3/d));let f=e[0].range.startLineNumber,p=e[0].range.endLineNumber;for(let m=1,v=e.length;m<v;m++){const b=e[m].range;p+h>=b.startLineNumber?b.endLineNumber>p&&(p=b.endLineNumber):(s.push({range:new Q(f,1,p,1),options:Xo._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),f=b.startLineNumber,p=b.endLineNumber)}s.push({range:new Q(f,1,p,1),options:Xo._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=new Array(e.length);for(let a=0,u=e.length;a<u;a++)o[a]={range:e[a].range,options:r};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Xo._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(!(!r||r.endLineNumber>e.lineNumber)){if(r.endLineNumber<e.lineNumber)return r;if(!(r.endColumn>e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let r=this._decorations[t],s=this._editor.getModel().getDecorationRange(r);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Xo._CURRENT_FIND_MATCH_DECORATION=En.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Lr(k8),position:yl.Center},minimap:{color:Lr(Vq),position:bl.Inline}});Xo._FIND_MATCH_DECORATION=En.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Lr(k8),position:yl.Center},minimap:{color:Lr(Vq),position:bl.Inline}});Xo._FIND_MATCH_NO_OVERVIEW_DECORATION=En.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Xo._FIND_MATCH_ONLY_OVERVIEW_DECORATION=En.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Lr(k8),position:yl.Center}});Xo._RANGE_HIGHLIGHT_DECORATION=En.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Xo._FIND_SCOPE_DECORATION=En.register({description:"find-scope",className:"findScope",isWholeLine:!0});class rQe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>Q.compareRangesUsingStarts(o.range,a.range));let r=[],s=n[0];for(let o=1;o<n.length;o++)s.range.endLineNumber===n[o].range.startLineNumber&&s.range.endColumn===n[o].range.startColumn?(s.range=s.range.plusRange(n[o].range),s.text=s.text+n[o].text):(r.push(s),s=n[o]);r.push(s);for(const o of r)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Jpe(i,e){if(i&&i[0]!==""){const t=Vie(i,e,"-"),n=Vie(i,e,"_");return t&&!n?Hie(i,e,"-"):!t&&n?Hie(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():rxe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Vie(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function Hie(i,e,t){const n=e.split(t),r=i[0].split(t);let s="";return n.forEach((o,a)=>{s+=Jpe([r[a]],o)+t}),s.slice(0,-1)}class $ie{constructor(e){this.staticValue=e,this.kind=0}}class sQe{constructor(e){this.pieces=e,this.kind=1}}class pS{constructor(e){!e||e.length===0?this._state=new $ie(""):e.length===1&&e[0].staticValue!==null?this._state=new $ie(e[0].staticValue):this._state=new sQe(e)}static fromStaticValue(e){return new pS([ab.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?Jpe(e,this._state.staticValue):this._state.staticValue;let n="";for(let r=0,s=this._state.pieces.length;r<s;r++){let o=this._state.pieces[r];if(o.staticValue!==null){n+=o.staticValue;continue}let a=pS._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){let u=[],d=o.caseOps.length,h=0;for(let f=0,p=a.length;f<p;f++){if(h>=d){u.push(a.slice(f));break}switch(o.caseOps[h]){case"U":u.push(a[f].toUpperCase());break;case"u":u.push(a[f].toUpperCase()),h++;break;case"L":u.push(a[f].toLowerCase());break;case"l":u.push(a[f].toLowerCase()),h++;break;default:u.push(a[f])}}a=u.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class ab{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new ab(e,-1,null)}static caseOps(e,t){return new ab(null,e,t)}}class oQe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=ab.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=ab.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=ab.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new pS(this._result)}}function aQe(i){if(!i||i.length===0)return new pS(null);let e=[],t=new oQe(i);for(let n=0,r=i.length;n<r;n++){let s=i.charCodeAt(n);if(s===92){if(n++,n>=r)break;let o=i.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(s===36){if(n++,n>=r)break;let o=i.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<r){let u=i.charCodeAt(n+1);if(48<=u&&u<=57){n++,a=a*10+(u-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const FC=new Dt("findWidgetVisible",!1),t7=new Dt("findInputFocussed",!1),iZ=new Dt("replaceInputFocussed",!1),vP={primary:545,mac:{primary:2593}},bP={primary:565,mac:{primary:2613}},CP={primary:560,mac:{primary:2608}},wP={primary:554,mac:{primary:2602}},yP={primary:558,mac:{primary:2606}},ar={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Kv=19999,lQe=240;class Z2{constructor(e,t){this._toDispose=new Je,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Ma,this._decorations=new Xo(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new er(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,ri(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},lQe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let u=a.endLineNumber;return a.endColumn===1&&(u=u-1),new Q(a.startLineNumber,1,u,this._editor.getModel().getLineMaxColumn(u))}return a}));let r=this._findMatches(n,!1,Kv);this._decorations.set(r,n);const s=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(s);if(o===0&&r.length>0){const a=Vue(r.map(u=>u.range),u=>Q.compareRangesUsingStarts(u,s)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:r}=e,s=this._editor.getModel();return t||r===1?(n===1?n=s.getLineCount():n--,r=s.getLineMaxColumn(n)):r--,new Le(n,r)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const h=this._decorations.matchAfterPosition(e);h&&this._setCurrentFindMatch(h);return}if(this._decorations.getCount()<Kv){let h=this._decorations.matchBeforePosition(e);h&&h.isEmpty()&&h.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),h=this._decorations.matchBeforePosition(e)),h&&this._setCurrentFindMatch(h);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),r=Z2._getSearchRange(this._editor.getModel(),n);r.getEndPosition().isBefore(e)&&(e=r.getEndPosition()),e.isBefore(r.getStartPosition())&&(e=r.getEndPosition());let{lineNumber:s,column:o}=e,a=this._editor.getModel(),u=new Le(s,o),d=a.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),d=a.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),!!d){if(!t&&!r.containsRange(d.range))return this._moveToPrevMatch(d.range.getStartPosition(),!0);this._setCurrentFindMatch(d.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:r}=e,s=this._editor.getModel();return t||r===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,r=1):r++,new Le(n,r)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Kv){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,r=!1){if(this._cannotFind())return null;let s=this._decorations.getFindScope(),o=Z2._getSearchRange(this._editor.getModel(),s);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());let{lineNumber:a,column:u}=e,d=this._editor.getModel(),h=new Le(a,u),f=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return n&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),f=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),f?!r&&!o.containsRange(f.range)?this._getNextMatch(f.range.getEndPosition(),t,n,!0):f:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?aQe(this._state.replaceString):pS.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let r=e.buildReplaceString(n.matches,this._state.preserveCase),s=new xo(t,r);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new Le(t.startLineNumber,t.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const r=(e||[null]).map(s=>Z2._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Kv?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new h1(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let f="mu";n.ignoreCase&&(f+="i"),n.global&&(f+="g"),n=new RegExp(n.source,f)}const r=this._editor.getModel(),s=r.getValue(1),o=r.getFullModelRange(),a=this._getReplacePattern();let u;const d=this._state.preserveCase;a.hasReplacementPatterns||d?u=s.replace(n,function(){return a.buildReplaceString(arguments,d)}):u=s.replace(n,a.buildReplaceString(null,d));let h=new cG(o,u,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let o=0,a=n.length;o<a;o++)r[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);let s=new rQe(this._editor.getSelection(),n.map(o=>o.range),r);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(s=>new yt(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)),r=this._editor.getSelection();for(let s=0,o=n.length;s<o;s++)if(n[s].equalsRange(r)){n=[r].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const uQe={inputActiveOptionBorder:ye.fromHex("#007ACC00"),inputActiveOptionForeground:ye.fromHex("#FFFFFF"),inputActiveOptionBackground:ye.fromHex("#0E639C50")};class $M extends Wu{constructor(e){super(),this._onChange=this._register(new Ce),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},uQe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Ka.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const cQe=C("caseDescription","Match Case"),dQe=C("wordsDescription","Match Whole Word"),hQe=C("regexDescription","Use Regular Expression");class eme extends $M{constructor(e){super({icon:_e.caseSensitive,title:cQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class tme extends $M{constructor(e){super({icon:_e.wholeWord,title:dQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class nme extends $M{constructor(e){super({icon:_e.regex,title:hQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class n7 extends Wu{constructor(e,t,n,r){super(),this._hideSoon=this._register(new er(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=r.getColorTheme().getColor(IH),o=r.getColorTheme().getColor(kH),a=r.getColorTheme().getColor(TH);this.caseSensitive=this._register(new eme({appendTitle:this._keybindingLabelFor(ar.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new tme({appendTitle:this._keybindingLabelFor(ar.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new nme({appendTitle:this._keybindingLabelFor(ar.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(u=>{let d=!1;u.isRegex&&(this.regex.checked=this._state.isRegex,d=!0),u.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,d=!0),u.matchCase&&(this.caseSensitive.checked=this._state.matchCase,d=!0),!this._state.isRevealed&&d&&this._revealTemporarily()})),this._register(dq(this._domNode,u=>this._onMouseOut())),this._register(Ge(this._domNode,"mouseover",u=>this._onMouseOver())),this._applyTheme(r.getColorTheme()),this._register(r.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return n7.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(IH),inputActiveOptionForeground:e.getColor(kH),inputActiveOptionBackground:e.getColor(TH)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}n7.ID="editor.contrib.findOptionsWidget";hr((i,e)=>{const t=i.getColor(Gh);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=i.getColor(bp);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const r=i.getColor(w0);r&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${r}; }`);const s=i.getColor(fs);s&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});function SP(i,e){return i===1?!0:i===2?!1:e}class fQe extends Oe{constructor(){super(),this._onFindReplaceStateChange=this._register(new Ce),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return SP(this._isRegexOverride,this._isRegex)}get wholeWord(){return SP(this._wholeWordOverride,this._wholeWord)}get matchCase(){return SP(this._matchCaseOverride,this._matchCase)}get preserveCase(){return SP(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,r.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,r.matchesCount=!0,s=!0),typeof n<"u"&&(Q.equalsRange(this._currentMatch,n)||(this._currentMatch=n,r.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(r)}change(e,t,n=!0){var r;let s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;const a=this.isRegex,u=this.wholeWord,d=this.matchCase,h=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((r=e.searchScope)===null||r===void 0)&&r.every(f=>{var p;return(p=this._searchScope)===null||p===void 0?void 0:p.some(m=>!Q.equalsRange(m,f))})||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,s.isRegex=!0),u!==this.wholeWord&&(o=!0,s.wholeWord=!0),d!==this.matchCase&&(o=!0,s.matchCase=!0),h!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Kv}}const gQe=C("defaultLabel","input");class pQe extends Wu{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new Ce),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Ce),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Ce),this._onKeyUp=this._register(new Ce),this._onCaseSensitiveKeyDown=this._register(new Ce),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Ce),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||gQe,this.inputActiveOptionBorder=r.inputActiveOptionBorder,this.inputActiveOptionForeground=r.inputActiveOptionForeground,this.inputActiveOptionBackground=r.inputActiveOptionBackground,this.inputBackground=r.inputBackground,this.inputForeground=r.inputForeground,this.inputBorder=r.inputBorder,this.inputValidationInfoBorder=r.inputValidationInfoBorder,this.inputValidationInfoBackground=r.inputValidationInfoBackground,this.inputValidationInfoForeground=r.inputValidationInfoForeground,this.inputValidationWarningBorder=r.inputValidationWarningBorder,this.inputValidationWarningBackground=r.inputValidationWarningBackground,this.inputValidationWarningForeground=r.inputValidationWarningForeground,this.inputValidationErrorBorder=r.inputValidationErrorBorder,this.inputValidationErrorBackground=r.inputValidationErrorBackground,this.inputValidationErrorForeground=r.inputValidationErrorForeground;const s=r.appendCaseSensitiveLabel||"",o=r.appendWholeWordsLabel||"",a=r.appendRegexLabel||"",u=r.history||[],d=!!r.flexibleHeight,h=!!r.flexibleWidth,f=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Zhe(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:u,showHistoryHint:r.showHistoryHint,flexibleHeight:d,flexibleWidth:h,flexibleMaxHeight:f})),this.regex=this._register(new nme({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(v=>{this._onRegexKeyDown.fire(v)})),this.wholeWords=this._register(new tme({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new eme({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(v=>{this._onCaseSensitiveKeyDown.fire(v)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let p=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,v=>{if(v.equals(15)||v.equals(17)||v.equals(9)){let b=p.indexOf(document.activeElement);if(b>=0){let L=-1;v.equals(17)?L=(b+1)%p.length:v.equals(15)&&(b===0?L=p.length-1:L=b-1),v.equals(9)?(p[b].blur(),this.inputBox.focus()):L>=0&&p[L].focus(),Ni.stop(v,!0)}}});let m=document.createElement("div");m.className="controls",m.style.display=this._showOptionButtons?"block":"none",m.appendChild(this.caseSensitive.domNode),m.appendChild(this.wholeWords.domNode),m.appendChild(this.regex.domNode),this.domNode.appendChild(m),e&&e.appendChild(this.domNode),this._register(Ge(this.inputBox.inputElement,"compositionstart",v=>{this.imeSessionInProgress=!0})),this._register(Ge(this.inputBox.inputElement,"compositionend",v=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,v=>this._onKeyDown.fire(v)),this.onkeyup(this.inputBox.inputElement,v=>this._onKeyUp.fire(v)),this.oninput(this.inputBox.inputElement,v=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,v=>this._onMouseDown.fire(v))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const mQe=C("defaultLabel","input"),_Qe=C("label.preserveCaseCheckbox","Preserve Case");class vQe extends $M{constructor(e){super({icon:_e.preserveCase,title:_Qe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class bQe extends Wu{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Ce),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Ce),this._onInput=this._register(new Ce),this._onKeyUp=this._register(new Ce),this._onPreserveCaseKeyDown=this._register(new Ce),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||mQe,this.inputActiveOptionBorder=r.inputActiveOptionBorder,this.inputActiveOptionForeground=r.inputActiveOptionForeground,this.inputActiveOptionBackground=r.inputActiveOptionBackground,this.inputBackground=r.inputBackground,this.inputForeground=r.inputForeground,this.inputBorder=r.inputBorder,this.inputValidationInfoBorder=r.inputValidationInfoBorder,this.inputValidationInfoBackground=r.inputValidationInfoBackground,this.inputValidationInfoForeground=r.inputValidationInfoForeground,this.inputValidationWarningBorder=r.inputValidationWarningBorder,this.inputValidationWarningBackground=r.inputValidationWarningBackground,this.inputValidationWarningForeground=r.inputValidationWarningForeground,this.inputValidationErrorBorder=r.inputValidationErrorBorder,this.inputValidationErrorBackground=r.inputValidationErrorBackground,this.inputValidationErrorForeground=r.inputValidationErrorForeground;const s=r.appendPreserveCaseLabel||"",o=r.history||[],a=!!r.flexibleHeight,u=!!r.flexibleWidth,d=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Zhe(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:r.showHistoryHint,flexibleHeight:a,flexibleWidth:u,flexibleMaxHeight:d})),this.preserveCase=this._register(new vQe({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(p=>{this._onPreserveCaseKeyDown.fire(p)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let h=[this.preserveCase.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let m=h.indexOf(document.activeElement);if(m>=0){let v=-1;p.equals(17)?v=(m+1)%h.length:p.equals(15)&&(m===0?v=h.length-1:v=m-1),p.equals(9)?(h[m].blur(),this.inputBox.focus()):v>=0&&h[v].focus(),Ni.stop(p,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.preserveCase.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var ime=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},rme=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const xO="historyNavigationWidget",sme="historyNavigationForwardsEnabled",ome="historyNavigationBackwardsEnabled";function CQe(i,e,t){new Dt(t,e).bindTo(i)}function wQe(i,e){return i.createScoped(e.target)}function ame(i,e){return i.getContext(document.activeElement).getValue(e)}function lme(i,e){const t=wQe(i,e);CQe(t,e,xO);const n=new Dt(sme,!0).bindTo(t),r=new Dt(ome,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:r}}let ej=class extends pQe{constructor(e,t,n,r,s=!1){super(e,t,s,n),this._register(lme(r,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};ej=ime([rme(3,cn)],ej);let tj=class extends bQe{constructor(e,t,n,r,s=!1){super(e,t,s,n),this._register(lme(r,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};tj=ime([rme(3,cn)],tj);Oo.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:_t.and(_t.has(xO),_t.equals(ome,!0),$n.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{const e=ame(i.get(cn),xO);e&&e.historyNavigator.showPreviousValue()}});Oo.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:_t.and(_t.has(xO),_t.equals(sme,!0),$n.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{const e=ame(i.get(cn),xO);e&&e.historyNavigator.showNextValue()}});function zie(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var yQe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const SQe=co("find-selection",_e.selection,C("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Uie=co("find-collapsed",_e.chevronRight,C("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),jie=co("find-expanded",_e.chevronDown,C("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),LQe=co("find-replace",_e.replace,C("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),EQe=co("find-replace-all",_e.replaceAll,C("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),xQe=co("find-previous-match",_e.arrowUp,C("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),DQe=co("find-next-match",_e.arrowDown,C("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),IQe=C("label.find","Find"),TQe=C("placeholder.find","Find"),kQe=C("label.previousMatchButton","Previous Match"),NQe=C("label.nextMatchButton","Next Match"),AQe=C("label.toggleSelectionFind","Find in Selection"),OQe=C("label.closeButton","Close"),MQe=C("label.replace","Replace"),RQe=C("placeholder.replace","Replace"),PQe=C("label.replaceButton","Replace"),FQe=C("label.replaceAllButton","Replace All"),BQe=C("label.toggleReplaceButton","Toggle Replace"),WQe=C("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Kv),VQe=C("label.matchesLocation","{0} of {1}"),Kie=C("label.noResults","No results"),_f=419,HQe=275,$Qe=HQe-54;let VN=69;const zQe=33,qie="ctrlEnterReplaceAll.windows.donotask",Gie=qn?256:2048;class CW{constructor(e){this.afterLineNumber=e,this.heightInPx=zQe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Yie(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function Zie(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class i7 extends Wu{constructor(e,t,n,r,s,o,a,u,d){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=r,this._keybindingService=s,this._contextKeyService=o,this._storageService=u,this._notificationService=d,this._ctrlEnterReplaceAllWarningPrompted=!!u.getBoolean(qie,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Np(500),this._register(Un(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(130)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(35)){const f=this._codeEditor.getOption(35).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new CW(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>yQe(this,void 0,void 0,function*(){if(this._isVisible){let h=yield this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}}))),this._findInputFocused=t7.bindTo(o),this._findFocusTracker=this._register(Hy(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=iZ.bindTo(o),this._replaceFocusTracker=this._register(Hy(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new CW(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return i7.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Nc(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,gn)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=VN+"px",this._state.matchesCount>=Kv?this._matchesCount.title=WQe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Kv&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=Ju(VQe,n,t)}else e=Kie;this._matchesCount.appendChild(document.createTextNode(e)),To(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),VN=Math.max(VN,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Kie)return n===""?C("ariaSearchNoResultEmpty","{0} found",e):C("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const r=C("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${r}`:r}return C("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const r=Uo(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=r.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const u=aue(this._domNode).left;o>u&&(t=!1);const d=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());r.left+(d?d.left:0)>u&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(r=>{n.heightInPx=this._getHeight(),this._viewZoneId=r.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new CW(0));const n=this._viewZone;this._codeEditor.changeViewZones(r=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;let o=s-n.heightInPx;n.heightInPx=s,r.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(74).top,s<=0)return;n.heightInPx=s,this._viewZoneId=r.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(IH),inputActiveOptionBackground:e.getColor(TH),inputActiveOptionForeground:e.getColor(kH),inputBackground:e.getColor(Aq),inputForeground:e.getColor(Oq),inputBorder:e.getColor(Mq),inputValidationInfoBackground:e.getColor(ice),inputValidationInfoForeground:e.getColor(rce),inputValidationInfoBorder:e.getColor(sce),inputValidationWarningBackground:e.getColor(oce),inputValidationWarningForeground:e.getColor(ace),inputValidationWarningBorder:e.getColor(lce),inputValidationErrorBackground:e.getColor(uce),inputValidationErrorForeground:e.getColor(cce),inputValidationErrorBorder:e.getColor(dce)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!uq(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,r=e.minimap.minimapWidth;let s=!1,o=!1,a=!1;if(this._resized&&Nc(this._domNode)>_f){this._domNode.style.maxWidth=`${n-28-r-15}px`,this._replaceInput.width=Nc(this._findInput.domNode);return}if(_f+28+r>=n&&(o=!0),_f+28+r-VN>=n&&(a=!0),_f+28+r-VN>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-r-15}px`),this._resized){this._findInput.inputBox.layout();let u=this._findInput.inputBox.element.clientWidth;u>0&&(this._replaceInput.width=u)}else this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!Q.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Gie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Yie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Zie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Gie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Ao&&Kh&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(C("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(qie,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Yie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Zie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new ej(null,this._contextViewProvider,{width:$Qe,label:IQe,placeholder:TQe,appendCaseSensitiveLabel:this._keybindingLabelFor(ar.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ar.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ar.ToggleRegexCommand),validation:u=>{if(u.length===0||!this._findInput.getRegex())return null;try{return new RegExp(u,"gu"),null}catch(d){return{content:d.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>zie(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(u=>this._onFindInputKeyDown(u))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(u=>{u.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),u.preventDefault())})),this._register(this._findInput.onRegexKeyDown(u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),u.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(u=>{this._tryUpdateHeight()&&this._showViewZone()})),Xa&&this._register(this._findInput.onMouseDown(u=>this._onFindInputMouseDown(u))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new lw({label:kQe+this._keybindingLabelFor(ar.PreviousMatchFindAction),icon:xQe,onTrigger:()=>{this._codeEditor.getAction(ar.PreviousMatchFindAction).run().then(void 0,gn)}})),this._nextBtn=this._register(new lw({label:NQe+this._keybindingLabelFor(ar.NextMatchFindAction),icon:DQe,onTrigger:()=>{this._codeEditor.getAction(ar.NextMatchFindAction).run().then(void 0,gn)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const r=document.createElement("div");r.className="find-actions",n.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new $M({icon:SQe,title:AQe+this._keybindingLabelFor(ar.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let u=this._codeEditor.getSelections();u.map(d=>(d.endColumn===1&&d.endLineNumber>d.startLineNumber&&(d=d.setEndPosition(d.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(d.endLineNumber-1))),d.isEmpty()?null:d)).filter(d=>!!d),u.length&&this._state.change({searchScope:u},!0)}}else this._state.change({searchScope:null},!0)})),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new lw({label:OQe+this._keybindingLabelFor(ar.CloseFindWidgetCommand),icon:Pde,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),u.preventDefault())}})),r.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new tj(null,void 0,{label:MQe,placeholder:RQe,appendPreserveCaseLabel:this._keybindingLabelFor(ar.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>zie(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(u=>this._onReplaceInputKeyDown(u))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(u=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(u=>{u.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),u.preventDefault())})),this._replaceBtn=this._register(new lw({label:PQe+this._keybindingLabelFor(ar.ReplaceOneAction),icon:LQe,onTrigger:()=>{this._controller.replace()},onKeyDown:u=>{u.equals(1026)&&(this._closeBtn.focus(),u.preventDefault())}})),this._replaceAllBtn=this._register(new lw({label:FQe+this._keybindingLabelFor(ar.ReplaceAllAction),icon:EQe,onTrigger:()=>{this._controller.replaceAll()}}));let s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",s.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new lw({label:BQe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${_f}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(s),this._resizeSash=new Ho(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=_f;this._register(this._resizeSash.onDidStart(()=>{a=Nc(this._domNode)})),this._register(this._resizeSash.onDidChange(u=>{this._resized=!0;let d=a+u.startX-u.currentX;if(d<_f)return;const h=parseFloat(fq(this._domNode).maxWidth)||0;d>h||(this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const u=Nc(this._domNode);if(u<_f)return;let d=_f;if(!this._resized||u===_f){const h=this._codeEditor.getLayoutInfo();d=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}i7.ID="editor.contrib.findWidget";class lw extends Wu{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+pr.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...pr.asClassNameArray(Uie)),this._domNode.classList.add(...pr.asClassNameArray(jie))):(this._domNode.classList.remove(...pr.asClassNameArray(jie)),this._domNode.classList.add(...pr.asClassNameArray(Uie)))}}hr((i,e)=>{const t=(v,b)=>{b&&e.addRule(`.monaco-editor ${v} { background-color: ${b}; }`)};t(".findMatch",i.getColor(AH)),t(".currentFindMatch",i.getColor(dIe)),t(".findScope",i.getColor(hIe));const n=i.getColor(Gh);t(".find-widget",n);const r=i.getColor(w0);r&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${r}; }`);const s=i.getColor(gIe);s&&e.addRule(`.monaco-editor .findMatch { border: 1px ${i.type==="hc"?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const o=i.getColor(fIe);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=i.getColor(pIe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; }`);const u=i.getColor(fs);u&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${u}; }`);const d=i.getColor(bp);d&&e.addRule(`.monaco-editor .find-widget { color: ${d}; }`);const h=i.getColor(jDe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const f=i.getColor(eIe);if(f)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${f}; }`);else{const v=i.getColor(QP);v&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${v}; }`)}const p=i.getColor(eTe);p&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${p} !important;
		}
	`);const m=i.getColor(Db);m&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${m}; }`)});var ume=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Df=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Zb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const UQe=524288;function nj(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const r=i.getConfiguredWordAtPosition(n.getStartPosition());if(r&&t===!1)return r.word}else if(i.getModel().getValueLengthInRange(n)<UQe)return i.getModel().getValueInRange(n)}return null}let Dl=class cme extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._findWidgetVisible=FC.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=r,this._updateHistoryDelayer=new Np(500),this._state=this._register(new fQe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(s=>this._onStateChanged(s))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let s=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),s&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(cme.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!t7.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=dc(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return Zb(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let r=nj(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);r&&(this._state.isRegex?n.searchString=dc(r):n.searchString=r)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let r=nj(this._editor,e.seedSearchStringFromSelection);r&&(n.searchString=r)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let r=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;r&&(n.searchString=r)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let r=this._editor.getSelections();r.some(s=>!s.isEmpty())&&(n.searchScope=r)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new Z2(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Zb(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Dl.ID="editor.contrib.findController";Dl=ume([Df(1,cn),Df(2,Dg),Df(3,K0)],Dl);let ij=class extends Dl{constructor(e,t,n,r,s,o,a,u){super(e,n,a,u),this._contextViewService=t,this._keybindingService=r,this._themeService=s,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return Zb(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const r=this._editor.getSelection();let s=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!r&&r.startLineNumber!==r.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new i7(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new n7(this._editor,this._state,this._keybindingService,this._themeService))}};ij=ume([Df(1,Hp),Df(2,cn),Df(3,Sr),Df(4,Er),Df(5,gs),Df(6,Dg),Df(7,K0)],ij);const jQe=Mue(new Oue({id:ar.StartFindAction,label:C("startFindAction","Find"),alias:"Find",precondition:_t.or(de.focus,_t.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"3_find",title:C({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));jQe.addImplementation(0,(i,e,t)=>{const n=Dl.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});const KQe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:C("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:C("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:C("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:C("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class qQe extends Et{constructor(){super({id:ar.StartFindWithArgs,label:C("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:KQe})}run(e,t,n){return Zb(this,void 0,void 0,function*(){let r=Dl.get(t);if(r){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield r.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(35).loop},s),r.setGlobalBufferTerm(r.getState().searchString)}})}}class GQe extends Et{constructor(){super({id:ar.StartFindWithSelection,label:C("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Zb(this,void 0,void 0,function*(){let n=Dl.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class dme extends Et{run(e,t){return Zb(this,void 0,void 0,function*(){let n=Dl.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class YQe extends dme{constructor(){super({id:ar.NextMatchFindAction,label:C("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:de.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:_t.and(de.focus,t7),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class ZQe extends dme{constructor(){super({id:ar.PreviousMatchFindAction,label:C("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:de.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:_t.and(de.focus,t7),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class hme extends Et{run(e,t){return Zb(this,void 0,void 0,function*(){let n=Dl.get(t);if(!n)return;const r=t.getOption(35).seedSearchStringFromSelection==="selection";let s=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(s=nj(t,"single",r)),s&&n.setSearchString(s),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:r,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class XQe extends hme{constructor(){super({id:ar.NextSelectionMatchFindAction,label:C("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class QQe extends hme{constructor(){super({id:ar.PreviousSelectionMatchFindAction,label:C("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const JQe=Mue(new Oue({id:ar.StartFindReplaceAction,label:C("startReplace","Replace"),alias:"Replace",precondition:_t.or(de.focus,_t.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"3_find",title:C({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));JQe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=Dl.get(e);if(!n)return!1;const r=e.getSelection(),s=n.isFindInputFocused(),o=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!s,a=s||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});ki(Dl.ID,ij);it(qQe);it(GQe);it(YQe);it(ZQe);it(XQe);it(QQe);const df=Po.bindToContribution(Dl.get);nt(new df({id:ar.CloseFindWidgetCommand,precondition:FC,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,_t.not("isComposing")),primary:9,secondary:[1033]}}));nt(new df({id:ar.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:vP.primary,mac:vP.mac,win:vP.win,linux:vP.linux}}));nt(new df({id:ar.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:bP.primary,mac:bP.mac,win:bP.win,linux:bP.linux}}));nt(new df({id:ar.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:CP.primary,mac:CP.mac,win:CP.win,linux:CP.linux}}));nt(new df({id:ar.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:wP.primary,mac:wP.mac,win:wP.win,linux:wP.linux}}));nt(new df({id:ar.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:yP.primary,mac:yP.mac,win:yP.win,linux:yP.linux}}));nt(new df({id:ar.ReplaceOneAction,precondition:FC,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:3094}}));nt(new df({id:ar.ReplaceOneAction,precondition:FC,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,iZ),primary:3}}));nt(new df({id:ar.ReplaceAllAction,precondition:FC,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:2563}}));nt(new df({id:ar.ReplaceAllAction,precondition:FC,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,iZ),primary:void 0,mac:{primary:2051}}}));nt(new df({id:ar.SelectAllMatchesAction,precondition:FC,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:515}}));const Xie=65535,op=16777215,Qie=4278190080;class DO{constructor(e,t,n){if(e.length!==t.length||e.length>Xie)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,r)=>{let s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=r};for(let n=0,r=this._startIndexes.length;n<r;n++){let s=this._startIndexes[n],o=this._endIndexes[n];if(s>op||o>op)throw new Error("startLineNumber or endLineNumber must not exceed "+op);for(;e.length>0&&!t(s,o);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&op}getEndLineNumber(e){return this._endIndexes[e]&op}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,r=e%32,s=this._collapseStates[n];t?this._collapseStates[n]=s|1<<r:this._collapseStates[n]=s&~(1<<r)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let r=0;r<this._types.length;r++)this._types[r]===e&&(this.setCollapsed(r,t),n=!0);return n}toRegion(e){return new eJe(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&Qie)>>>24)+((this._endIndexes[e]&Qie)>>>16);return t===Xie?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let r=Math.floor((t+n)/2);e<this.getStartLineNumber(r)?n=r:t=r+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class eJe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class tJe{constructor(e,t){this._updateEventEmitter=new Ce,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new DO(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,r)=>n.regionIndex-r.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let r=0,s=-1,o=-1;const a=u=>{for(;r<u;){const d=this._regions.getEndLineNumber(r),h=this._regions.isCollapsed(r);d<=s&&n.changeDecorationOptions(this._editorDecorationIds[r],this._decorationProvider.getDecorationOption(h,d<=o)),h&&d>o&&(o=d),r++}};for(let u of e){let d=u.regionIndex,h=this._editorDecorationIds[d];if(h&&!t[h]){t[h]=!0,a(d);let f=!this._regions.isCollapsed(d);this._regions.setCollapsed(d,f),s=Math.max(s,this._regions.getEndLineNumber(d))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],r=(f,p)=>{for(let m of t)if(f<m&&m<=p)return!0;return!1},s=-1,o=(f,p)=>{const m=e.getStartLineNumber(f),v=e.getEndLineNumber(f);p||(p=e.isCollapsed(f)),p&&r(m,v)&&(p=!1),e.setCollapsed(f,p);const b=this._textModel.getLineMaxColumn(m),L={startLineNumber:m,startColumn:Math.max(b-1,1),endLineNumber:m,endColumn:b};n.push({range:L,options:this._decorationProvider.getDecorationOption(p,v<=s)}),p&&v>s&&(s=v)},a=0,u=()=>{for(;a<this._regions.length;){let f=this._regions.isCollapsed(a);if(a++,f)return a-1}return-1},d=0,h=u();for(;h!==-1&&d<e.length;){let f=this._textModel.getDecorationRange(this._editorDecorationIds[h]);if(f){let p=f.startLineNumber;if(f.startColumn===Math.max(f.endColumn-1,1)&&this._textModel.getLineMaxColumn(p)===f.endColumn)for(;d<e.length;){let m=e.getStartLineNumber(d);if(p>=m)o(d,p===m),d++;else break}}h=u()}for(;d<e.length;)o(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let r=n.startLineNumber,s=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:r,endLineNumber:s})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let r=this.getRegionAtLine(n.startLineNumber);r&&!r.isCollapsed&&t.push(r)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let r=this._regions.findRange(e),s=1;for(;r>=0;){let o=this._regions.toRegion(r);(!t||t(o,s))&&n.push(o),s++,r=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],r=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=r,u=this._regions.length;a<u;a++){let d=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;o.length>0&&!d.containedBy(o[o.length-1]);)o.pop();o.push(d),t(d,o.length)&&n.push(d)}else break}}else for(let o=r,a=this._regions.length;o<a;o++){let u=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<s)(!t||t(u))&&n.push(u);else break}return n}}function nJe(i,e,t){let n=[];for(let r of t){let s=i.getRegionAtLine(r);if(s){const o=!s.isCollapsed;if(n.push(s),e>1){let a=i.getRegionsInside(s,(u,d)=>u.isCollapsed!==o&&d<e);n.push(...a)}}}i.toggleCollapseState(n)}function oL(i,e,t=Number.MAX_VALUE,n){let r=[];if(n&&n.length>0)for(let s of n){let o=i.getRegionAtLine(s);if(o&&(o.isCollapsed!==e&&r.push(o),t>1)){let a=i.getRegionsInside(o,(u,d)=>u.isCollapsed!==e&&d<t);r.push(...a)}}else{let s=i.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);r.push(...s)}i.toggleCollapseState(r)}function fme(i,e,t,n){let r=[];for(let s of n){let o=i.getAllRegionsAtLine(s,(a,u)=>a.isCollapsed!==e&&u<=t);r.push(...o)}i.toggleCollapseState(r)}function iJe(i,e,t){let n=[];for(let r of t){let s=i.getAllRegionsAtLine(r,o=>o.isCollapsed!==e);s.length>0&&n.push(s[0])}i.toggleCollapseState(n)}function rJe(i,e,t,n){let r=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(u=>o.containsLine(u)),s=i.getRegionsInside(null,r);i.toggleCollapseState(s)}function gme(i,e,t){let n=[];for(let o of t)n.push(i.getAllRegionsAtLine(o,void 0)[0]);let r=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,s=i.getRegionsInside(null,r);i.toggleCollapseState(s)}function rZ(i,e,t){let n=i.textModel,r=i.regions,s=[];for(let o=r.length-1;o>=0;o--)if(t!==r.isCollapsed(o)){let a=r.getStartLineNumber(o);e.test(n.getLineContent(a))&&s.push(r.toRegion(o))}i.toggleCollapseState(s)}function sZ(i,e,t){let n=i.regions,r=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&r.push(n.toRegion(s));i.toggleCollapseState(r)}function sJe(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let r=n.parentIndex;r!==-1?t=e.regions.getStartLineNumber(r):t=null}return t}function oJe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,r=0;for(n!==-1&&(r=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function aJe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,r=0;if(n!==-1)r=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;r=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class lJe{constructor(e){this._updateEventEmitter=new Ce,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Nb(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,r=0,s=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let u=a.getStartLineNumber(n)+1,d=a.getEndLineNumber(n);s<=u&&d<=o||(!e&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===u&&this._hiddenRanges[r].endLineNumber===d?(t.push(this._hiddenRanges[r]),r++):(e=!0,t.push(new Q(u,1,d,1))),s=u,o=d)}(this._hasLineChanges||e||r<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new Q(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Jie(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,r=null,s=o=>((!r||!uJe(o,r))&&(r=Jie(this._hiddenRanges,o)),r?r.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let u=e[o],d=s(u.startLineNumber);d&&(u=u.setStartPosition(d,n.getLineMaxColumn(d)),t=!0);let h=s(u.endLineNumber);h&&(u=u.setEndPosition(h,n.getLineMaxColumn(h)),t=!0),e[o]=u}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function uJe(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function Jie(i,e){let t=Vue(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const cJe=5e3,dJe="indent";class hJe{constructor(e){this.editorModel=e,this.id=dJe}dispose(){}compute(e){let t=_i.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,r=t&&t.markers;return Promise.resolve(gJe(this.editorModel,n,r))}}let fJe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>op||t>op)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,s=0;r>=0;r--,s++)t[s]=this._startIndexes[r],n[s]=this._endIndexes[r];return new DO(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let u=this._indentOccurrences[a];if(u){if(u+t>this._foldingRangesLimit){n=a;break}t+=u}}const r=e.getOptions().tabSize;let s=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,u=0;a>=0;a--){let d=this._startIndexes[a],h=e.getLineContent(d),f=Sl.computeIndentLevel(h,r);(f<n||f===n&&t++<this._foldingRangesLimit)&&(s[u]=d,o[u]=this._endIndexes[a],u++)}return new DO(s,o)}}};function gJe(i,e,t,n=cJe){const r=i.getOptions().tabSize;let s=new fJe(n),o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],u=i.getLineCount()+1;a.push({indent:-1,endAbove:u,line:u});for(let d=i.getLineCount();d>0;d--){let h=i.getLineContent(d),f=Sl.computeIndentLevel(h,r),p=a[a.length-1];if(f===-1){e&&(p.endAbove=d);continue}let m;if(o&&(m=h.match(o)))if(m[1]){let v=a.length-1;for(;v>0&&a[v].indent!==-2;)v--;if(v>0){a.length=v+1,p=a[v],s.insertFirst(d,p.line,f),p.line=d,p.indent=f,p.endAbove=d;continue}}else{a.push({indent:-2,endAbove:d,line:d});continue}if(p.indent>f){do a.pop(),p=a[a.length-1];while(p.indent>f);let v=p.endAbove-1;v-d>=1&&s.insertFirst(d,v,f)}p.indent===f?p.endAbove=d:a.push({indent:f,endAbove:d,line:d})}return s.toIndentRanges(i)}const pJe=5e3,mJe={},pme="syntax";class _Je{constructor(e,t,n,r=pJe){this.editorModel=e,this.providers=t,this.limit=r,this.id=pme;for(const s of t)typeof s.onDidChange=="function"&&(this.disposables||(this.disposables=new Je),this.disposables.add(s.onDidChange(n)))}compute(e){return vJe(this.providers,this.editorModel,e).then(t=>t?mme(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function vJe(i,e,t){let n=null,r=i.map((s,o)=>Promise.resolve(s.provideFoldingRanges(e,mJe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let u=e.getLineCount();for(let d of a)d.start>0&&d.end>d.start&&d.end<=u&&n.push({start:d.start,end:d.end,rank:o,kind:d.kind})}},Ro));return Promise.all(r).then(s=>n)}class bJe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,r){if(e>op||t>op)return;let s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=r,this._types[s]=n,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new DO(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){let a=this._nestingLevelCounts[o];if(a){if(a+e>this._foldingRangesLimit){t=o;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit),s=[];for(let o=0,a=0;o<this._length;o++){let u=this._nestingLevels[o];(u<t||u===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[o],r[a]=this._endIndexes[o],s[a]=this._types[o],a++)}return new DO(n,r,s)}}}function mme(i,e){let t=i.sort((o,a)=>{let u=o.start-a.start;return u===0&&(u=o.rank-a.rank),u}),n=new bJe(e),r,s=[];for(let o of t)if(!r)r=o,n.add(o.start,o.end,o.kind&&o.kind.value,s.length);else if(o.start>r.start)if(o.end<=r.end)s.push(r),r=o,n.add(o.start,o.end,o.kind&&o.kind.value,s.length);else{if(o.start>r.end){do r=s.pop();while(r&&o.start>r.end);r&&s.push(r),r=o}n.add(o.start,o.end,o.kind&&o.kind.value,s.length)}return n.toIndentRanges()}const _me="init";class CJe{constructor(e,t,n,r){if(this.editorModel=e,this.id=_me,t.length){let s=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(s)),this.timeout=setTimeout(n,r)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let r=this.editorModel.getDecorationRange(n);r&&t.push({start:r.startLineNumber,end:r.endLineNumber,rank:1})}return Promise.resolve(mme(t,Number.MAX_VALUE))}}const oZ=co("folding-expanded",_e.chevronDown,C("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),aZ=co("folding-collapsed",_e.chevronRight,C("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class zc{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?zc.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?zc.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:zc.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?zc.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:zc.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}zc.COLLAPSED_VISUAL_DECORATION=En.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:pr.asClassName(aZ)});zc.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=En.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:pr.asClassName(aZ)});zc.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=En.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:pr.asClassName(oZ)});zc.EXPANDED_VISUAL_DECORATION=En.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+pr.asClassName(oZ)});zc.HIDDEN_RANGE_DECORATION=En.register({description:"folding-hidden-range-decoration",stickiness:1});var wJe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yJe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Pa=new Dt("foldingEnabled",!1);let mS=class vme extends Oe{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new Je),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new zc(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=Pa.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(r=>{if(r.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),r.hasChanged(98)||r.hasChanged(39)){const s=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=s.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=s.get(39),this.triggerFoldingModelChanged()}r.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),r.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),r.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(vme.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===pme||e.provider===_me)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const r=this.getFoldingModel();r&&r.then(s=>{if(s){this._restoringViewState=!0;try{s.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,gn)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new tJe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new lJe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Np(200),this.cursorChangedScheduler=new er(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add($H.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new hJe(e),this._useFoldingProviders&&this.foldingModel){let t=$H.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new CJe(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new _Je(e,t,()=>this.triggerFoldingModelChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=uo(r=>t.compute(r));return n.then(r=>{if(r&&n===this.foldingRegionPromise){let s;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const u=r.setCollapsedAllOfType(ef.Imports.value,!0);u&&(s=E0.capture(this.editor),this._currentModelHasFoldedImports=u)}let o=this.editor.getSelections(),a=o?o.map(u=>u.startLineNumber):[];e.update(r,a),s&&s.restore(this.editor)}return e})}).then(void 0,e=>(gn(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let r=[];for(let s of n){let o=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&r.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}r.length&&(t.toggleCollapseState(r),this.reveal(n[0].getPosition()))}}}).then(void 0,gn)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const r=e.target.detail,s=e.target.element.offsetLeft;if(r.offsetX-s<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,s=e.target.range;if(!(!s||s.startLineNumber!==n)){if(r){if(e.target.type!==4)return}else{let o=this.editor.getModel();if(!o||s.startColumn!==o.getLineMaxColumn(n))return}t.then(o=>{if(o){let a=o.getRegionAtLine(n);if(a&&a.startLineNumber===n){let u=a.isCollapsed;if(r||u){let d=e.event.altKey,h=[];if(d){let f=m=>!m.containedBy(a)&&!a.containedBy(m),p=o.getRegionsInside(null,f);for(const m of p)m.isCollapsed&&h.push(m);h.length===0&&(h=p)}else{let f=e.event.middleButton||e.event.shiftKey;if(f)for(const p of o.getRegionsInside(a))p.isCollapsed===u&&h.push(p);(u||!f||h.length===0)&&h.push(a)}o.toggleCollapseState(h),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,gn)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};mS.ID="editor.contrib.folding";mS=wJe([yJe(1,cn)],mS);class rl extends Et{runEditorCommand(e,t,n){let r=mS.get(t);if(!r)return;let s=r.getFoldingModel();if(s)return this.reportTelemetry(e,t),s.then(o=>{if(o){this.invoke(r,o,t,n);const a=t.getSelection();a&&r.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function bme(i){if(!pl(i)){if(!Ga(i))return!1;const e=i;if(!pl(e.levels)&&!Sb(e.levels)||!pl(e.direction)&&!cc(e.direction)||!pl(e.selectionLines)&&(!pue(e.selectionLines)||!e.selectionLines.every(Sb)))return!1}return!0}class SJe extends rl{constructor(){super({id:"editor.unfold",label:C("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:bme,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){let s=r&&r.levels||1,o=this.getLineNumbers(r,n);r&&r.direction==="up"?fme(t,!1,s,o):oL(t,!1,s,o)}}class LJe extends rl{constructor(){super({id:"editor.unfoldRecursively",label:C("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2137),weight:100}})}invoke(e,t,n,r){oL(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class EJe extends rl{constructor(){super({id:"editor.fold",label:C("foldAction.label","Fold"),alias:"Fold",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:bme,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){let s=this.getLineNumbers(r,n);const o=r&&r.levels,a=r&&r.direction;typeof o!="number"&&typeof a!="string"?iJe(t,!0,s):a==="up"?fme(t,!0,o||1,s):oL(t,!0,o||1,s)}}class xJe extends rl{constructor(){super({id:"editor.toggleFold",label:C("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2090),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);nJe(t,1,r)}}class DJe extends rl{constructor(){super({id:"editor.foldRecursively",label:C("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2135),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);oL(t,!0,Number.MAX_VALUE,r)}}class IJe extends rl{constructor(){super({id:"editor.foldAllBlockComments",label:C("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())sZ(t,ef.Comment.value,!0);else{const r=n.getModel();if(!r)return;const s=_i.getComments(r.getLanguageId());if(s&&s.blockCommentStartToken){let o=new RegExp("^\\s*"+dc(s.blockCommentStartToken));rZ(t,o,!0)}}}}class TJe extends rl{constructor(){super({id:"editor.foldAllMarkerRegions",label:C("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())sZ(t,ef.Region.value,!0);else{const r=n.getModel();if(!r)return;const s=_i.getFoldingRules(r.getLanguageId());if(s&&s.markers&&s.markers.start){let o=new RegExp(s.markers.start);rZ(t,o,!0)}}}}class kJe extends rl{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:C("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())sZ(t,ef.Region.value,!1);else{const r=n.getModel();if(!r)return;const s=_i.getFoldingRules(r.getLanguageId());if(s&&s.markers&&s.markers.start){let o=new RegExp(s.markers.start);rZ(t,o,!1)}}}}class NJe extends rl{constructor(){super({id:"editor.foldAllExcept",label:C("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2131),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);gme(t,!0,r)}}class AJe extends rl{constructor(){super({id:"editor.unfoldAllExcept",label:C("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2129),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);gme(t,!1,r)}}class OJe extends rl{constructor(){super({id:"editor.foldAll",label:C("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2069),weight:100}})}invoke(e,t,n){oL(t,!0)}}class MJe extends rl{constructor(){super({id:"editor.unfoldAll",label:C("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2088),weight:100}})}invoke(e,t,n){oL(t,!1)}}class Xb extends rl{getFoldingLevel(){return parseInt(this.id.substr(Xb.ID_PREFIX.length))}invoke(e,t,n){rJe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}Xb.ID_PREFIX="editor.foldLevel";Xb.ID=i=>Xb.ID_PREFIX+i;class RJe extends rl{constructor(){super({id:"editor.gotoParentFold",label:C("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let s=sJe(r[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class PJe extends rl{constructor(){super({id:"editor.gotoPreviousFold",label:C("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let s=oJe(r[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class FJe extends rl{constructor(){super({id:"editor.gotoNextFold",label:C("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let s=aJe(r[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}ki(mS.ID,mS);it(SJe);it(LJe);it(EJe);it(DJe);it(OJe);it(MJe);it(IJe);it(TJe);it(kJe);it(NJe);it(AJe);it(xJe);it(RJe);it(PJe);it(FJe);for(let i=1;i<=7;i++)Rue(new Xb({id:Xb.ID(i),label:C("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Pa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2048|21+i),weight:100}}));const BJe=we("editor.foldBackground",{light:tr(s0,.3),dark:tr(s0,.3),hc:null},C("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),WJe=we("editorGutter.foldingControlForeground",{dark:E9,light:E9,hc:E9},C("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));hr((i,e)=>{const t=i.getColor(BJe);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=i.getColor(WJe);n&&e.addRule(`
		.monaco-editor .cldr${pr.asCSSSelector(oZ)},
		.monaco-editor .cldr${pr.asCSSSelector(aZ)} {
			color: ${n} !important;
		}
		`)});class VJe extends Et{constructor(){super({id:"editor.action.fontZoomIn",label:C("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Ap.setZoomLevel(Ap.getZoomLevel()+1)}}class HJe extends Et{constructor(){super({id:"editor.action.fontZoomOut",label:C("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Ap.setZoomLevel(Ap.getZoomLevel()-1)}}class $Je extends Et{constructor(){super({id:"editor.action.fontZoomReset",label:C("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Ap.setZoomLevel(0)}}it(VJe);it(HJe);it($Je);var Cme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wme=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lZ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let IO=class{constructor(e,t){this._workerService=t,this._callOnDispose=new Je,this._callOnModel=new Je,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(QF.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=QF.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new Rw;for(let r of t.autoFormatTriggerCharacters)n.add(r.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(r=>{let s=r.charCodeAt(r.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition();let r=!1;const s=this._editor.onDidChangeModelContent(o=>{if(o.isFlush){r=!0,s.dispose();return}for(let a=0,u=o.changes.length;a<u;a++)if(o.changes[a].range.endLineNumber<=n.lineNumber){r=!0,s.dispose();return}});lge(this._workerService,t,n,e,t.getFormattingOptions()).then(o=>{s.dispose(),!r&&vl(o)&&(oS.execute(this._editor,o,!0),MY(o))},o=>{throw s.dispose(),o})}};IO.ID="editor.contrib.autoFormat";IO=Cme([wme(1,Vu)],IO);let TO=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new Je,this._callOnModel=new Je,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(Oh.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&Oh.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(age,this.editor,e,2,xC.None,Fn.None).catch(gn))}};TO.ID="editor.contrib.formatOnPaste";TO=Cme([wme(1,Nn)],TO);class zJe extends Et{constructor(){super({id:"editor.action.formatDocument",label:C("formatDocument.label","Format Document"),alias:"Format Document",precondition:_t.and(de.notInCompositeEditor,de.writable,de.hasDocumentFormattingProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return lZ(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Nn);yield e.get($p).showWhile(n.invokeFunction(Xje,t,1,xC.None,Fn.None),250)}})}}class UJe extends Et{constructor(){super({id:"editor.action.formatSelection",label:C("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:_t.and(de.writable,de.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2084),weight:100},contextMenuOpts:{when:de.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return lZ(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Nn),r=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new Q(a.startLineNumber,1,a.startLineNumber,r.getLineMaxColumn(a.startLineNumber)):a);yield e.get($p).showWhile(n.invokeFunction(age,t,s,1,xC.None,Fn.None),250)})}}ki(IO.ID,IO);ki(TO.ID,TO);it(zJe);it(UJe);Xn.registerCommand("editor.action.format",i=>lZ(void 0,void 0,void 0,function*(){const e=i.get(Ti).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=i.get(Tr);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));class Kw{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=n;for(let s=0;t.children.get(r)!==void 0;s++)r=`${n}_${s}`;return r}static empty(e){return e.children.size===0}}class ere extends Kw{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class jJe extends Kw{constructor(e,t,n,r){super(),this.id=e,this.parent=t,this.label=n,this.order=r,this.children=new Map}}class Da extends Kw{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let n=this._keys.for(e,!0),r=Da._requests.get(n);if(!r){let s=new oa;r={promiseCnt:0,source:s,promise:Da._create(e,s.token),model:void 0},Da._requests.set(n,r);const o=Date.now();r.promise.then(()=>{this._requestDurations.update(e,Date.now()-o)})}return r.model?Promise.resolve(r.model):(r.promiseCnt+=1,t.onCancellationRequested(()=>{--r.promiseCnt===0&&(r.source.cancel(),Da._requests.delete(n))}),new Promise((s,o)=>{r.promise.then(a=>{r.model=a,s(a)},a=>{Da._requests.delete(n),o(a)})}))}static _create(e,t){const n=new oa(t),r=new Da(e.uri),s=qc.ordered(e),o=s.map((u,d)=>{var h;let f=Kw.findId(`provider_${d}`,r),p=new jJe(f,r,(h=u.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",d);return Promise.resolve(u.provideDocumentSymbols(e,n.token)).then(m=>{for(const v of m||[])Da._makeOutlineElement(v,p);return p},m=>(Ro(m),p)).then(m=>{Kw.empty(m)?m.remove():r._groups.set(f,m)})}),a=qc.onDidChange(()=>{const u=qc.ordered(e);rc(u,s)||n.cancel()});return Promise.all(o).then(()=>n.token.isCancellationRequested&&!t.isCancellationRequested?Da._create(e,t):r._compact()).finally(()=>{a.dispose()})}static _makeOutlineElement(e,t){let n=Kw.findId(e,t),r=new ere(n,t,e);if(e.children)for(const s of e.children)Da._makeOutlineElement(s,r);t.children.set(r.id,r)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Qn.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof ere?e.push(t.symbol):e.push(...Qn.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>Q.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Da._flattenDocumentSymbols(t,e,""),t.sort((n,r)=>Q.compareRangesUsingStarts(n.range,r.range))}static _flattenDocumentSymbols(e,t,n){for(const r of t)e.push({kind:r.kind,tags:r.tags,name:r.name,detail:r.detail,containerName:r.containerName||n,range:r.range,selectionRange:r.selectionRange,children:void 0}),r.children&&Da._flattenDocumentSymbols(e,r.children,r.name)}}Da._requestDurations=new UF(qc,350);Da._requests=new z0(9,.75);Da._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(i,e){return`${i.id}/${e?i.getVersionId():""}/${this._hash(qc.all(i))}`}_hash(i){let e="";for(const t of i){let n=this._data.get(t);typeof n>"u"&&(n=this._counter++,this._data.set(t,n)),e+=n}return e}};var yme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function tre(i,e,t){return yme(this,void 0,void 0,function*(){const n=yield Da.create(i,t);return e?n.asListOfDocumentSymbols():n.getTopLevelSymbols()})}Xn.registerCommand("_executeDocumentSymbolProvider",function(i,...e){return yme(this,void 0,void 0,function*(){const[t]=e;Gi(rn.isUri(t));const n=i.get(Ds).getModel(t);if(n)return tre(n,!1,Fn.None);const r=yield i.get(Qa).createModelReference(t);try{return yield tre(r.object.textEditorModel,!1,Fn.None)}finally{r.dispose()}})});function ul(i,e){let t=0;for(let n=0;n<i.length;n++)i.charAt(n)==="	"?t+=e:t++;return t}function X2(i,e,t){i=i<0?0:i;let n="";if(!t){let r=Math.floor(i/e);i=i%e;for(let s=0;s<r;s++)n+="	"}for(let r=0;r<i;r++)n+=" ";return n}function Sme(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return[];const r=_i.getIndentationRules(i.getLanguageId());if(!r)return[];for(t=Math.min(t,i.getLineCount());e<=t&&r.unIndentedLinePattern;){let b=i.getLineContent(e);if(!r.unIndentedLinePattern.test(b))break;e++}if(e>t-1)return[];const{tabSize:s,indentSize:o,insertSpaces:a}=i.getOptions(),u=(b,L)=>(L=L||1,Du.shiftIndent(b,b.length+L,s,o,a)),d=(b,L)=>(L=L||1,Du.unshiftIndent(b,b.length+L,s,o,a));let h=[],f,p=i.getLineContent(e),m=p;if(n!=null){f=n;let b=zi(p);m=f+p.substring(b.length),r.decreaseIndentPattern&&r.decreaseIndentPattern.test(m)&&(f=d(f),m=f+p.substring(b.length)),p!==m&&h.push(jr.replaceMove(new yt(e,1,e,b.length+1),Sl.normalizeIndentation(f,o,a)))}else f=zi(p);let v=f;r.increaseIndentPattern&&r.increaseIndentPattern.test(m)?(v=u(v),f=u(f)):r.indentNextLinePattern&&r.indentNextLinePattern.test(m)&&(v=u(v)),e++;for(let b=e;b<=t;b++){let L=i.getLineContent(b),S=zi(L),y=v+L.substring(S.length);r.decreaseIndentPattern&&r.decreaseIndentPattern.test(y)&&(v=d(v),f=d(f)),S!==v&&h.push(jr.replaceMove(new yt(b,1,b,S.length+1),Sl.normalizeIndentation(v,o,a))),!(r.unIndentedLinePattern&&r.unIndentedLinePattern.test(L))&&(r.increaseIndentPattern&&r.increaseIndentPattern.test(y)?(f=u(f),v=f):r.indentNextLinePattern&&r.indentNextLinePattern.test(y)?v=u(v):v=f)}return h}class r7 extends Et{constructor(){super({id:r7.ID,label:C("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),s=t.getSelection();if(!s)return;const o=new YJe(s,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}r7.ID="editor.action.indentationToSpaces";class s7 extends Et{constructor(){super({id:s7.ID,label:C("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),s=t.getSelection();if(!s)return;const o=new ZJe(s,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}s7.ID="editor.action.indentationToTabs";class Lme extends Et{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(Cc),r=e.get(Ds);let s=t.getModel();if(!s)return;const o=r.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===o.tabSize?C("configuredTabSize","Configured Tab Size"):void 0})),u=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:C({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[u]}).then(d=>{d&&s&&!s.isDisposed()&&s.updateOptions({tabSize:parseInt(d.label,10),insertSpaces:this.insertSpaces})})},50)}}class o7 extends Lme{constructor(){super(!1,{id:o7.ID,label:C("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}o7.ID="editor.action.indentUsingTabs";class a7 extends Lme{constructor(){super(!0,{id:a7.ID,label:C("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}a7.ID="editor.action.indentUsingSpaces";class l7 extends Et{constructor(){super({id:l7.ID,label:C("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(Ds);let r=t.getModel();if(!r)return;const s=n.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget);r.detectIndentation(s.insertSpaces,s.tabSize)}}l7.ID="editor.action.detectIndentation";class KJe extends Et{constructor(){super({id:"editor.action.reindentlines",label:C("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=Sme(n,1,n.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class qJe extends Et{constructor(){super({id:"editor.action.reindentselectedlines",label:C("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=t.getSelections();if(r===null)return;let s=[];for(let o of r){let a=o.startLineNumber,u=o.endLineNumber;if(a!==u&&o.endColumn===1&&u--,a===1){if(a===u)continue}else a--;let d=Sme(n,a,u);s.push(...d)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class GJe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let r of this._edits)t.addEditOperation(Q.lift(r.range),r.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class rj{constructor(e){this.callOnDispose=new Je,this.callOnModel=new Je,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(47))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.isCheapToTokenize(e.getStartPosition().lineNumber))return;const r=this.editor.getOption(9),{tabSize:s,indentSize:o,insertSpaces:a}=n.getOptions();let u=[],d={shiftIndent:m=>Du.shiftIndent(m,m.length+1,s,o,a),unshiftIndent:m=>Du.unshiftIndent(m,m.length+1,s,o,a)},h=e.startLineNumber;for(;h<=e.endLineNumber;){if(this.shouldIgnoreLine(n,h)){h++;continue}break}if(h>e.endLineNumber)return;let f=n.getLineContent(h);if(!/\S/.test(f.substring(0,e.startColumn-1))){const m=_i.getGoodIndentForLine(r,n,n.getLanguageId(),h,d);if(m!==null){let v=zi(f),b=ul(m,s),L=ul(v,s);if(b!==L){let S=X2(b,s,a);u.push({range:new Q(h,1,h,v.length+1),text:S}),f=S+f.substr(v.length)}else{let S=_i.getIndentMetadata(n,h);if(S===0||S===8)return}}}const p=h;for(;h<e.endLineNumber;){if(!/\S/.test(n.getLineContent(h+1))){h++;continue}break}if(h!==e.endLineNumber){let m={getLineTokens:b=>n.getLineTokens(b),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(b,L)=>n.getLanguageIdAtPosition(b,L),getLineContent:b=>b===p?f:n.getLineContent(b)},v=_i.getGoodIndentForLine(r,m,n.getLanguageId(),h+1,d);if(v!==null){let b=ul(v,s),L=ul(zi(n.getLineContent(h+1)),s);if(b!==L){let S=b-L;for(let y=h+1;y<=e.endLineNumber;y++){let E=n.getLineContent(y),A=zi(E),V=ul(A,s)+S,M=X2(V,s,a);M!==A&&u.push({range:new Q(y,1,y,A.length+1),text:M})}}}}if(u.length>0){this.editor.pushUndoStop();let m=new GJe(u,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",m),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let r=e.getLineTokens(t);if(r.getCount()>0){let s=r.findTokenIndexAtOffset(n);if(s>=0&&r.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}rj.ID="editor.contrib.autoIndentOnPaste";function Eme(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let r="";for(let o=0;o<t;o++)r+=" ";let s=new RegExp(r,"gi");for(let o=1,a=i.getLineCount();o<=a;o++){let u=i.getLineFirstNonWhitespaceColumn(o);if(u===0&&(u=i.getLineMaxColumn(o)),u===1)continue;const d=new Q(o,1,o,u),h=i.getValueInRange(d),f=n?h.replace(/\t/ig,r):h.replace(s,"	");e.addEditOperation(d,f)}}class YJe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Eme(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class ZJe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Eme(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}ki(rj.ID,rj);it(r7);it(s7);it(o7);it(a7);it(l7);it(KJe);it(qJe);var l5=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const XJe=1500;class xme{constructor(){this._data=new na}push(e,t){const n=this._data.get(e.uri);n===void 0?this._data.set(e.uri,new Set([t])):n.add(t)}pop(e,t){const n=this._data.get(e.uri);n&&(n.delete(t),n.size===0&&this._data.delete(e.uri))}has(e,t){var n;return!!(!((n=this._data.get(e.uri))===null||n===void 0)&&n.has(t))}}function Dme(i,e,t,n){return l5(this,void 0,void 0,function*(){const r=[],o=Hv.ordered(i).reverse().map(a=>e.map(u=>l5(this,void 0,void 0,function*(){try{t.push(i,a);const d=yield a.provideInlayHints(i,u,n);d!=null&&d.length&&r.push(d.filter(h=>u.containsPosition(h.position)))}catch(d){Ro(d)}finally{t.pop(i,a)}})));return yield Promise.all(o.flat()),r.flat().sort((a,u)=>Le.compare(a.position,u.position))})}class u5{constructor(){this._entries=new z0(50)}get(e){const t=u5._key(e);return this._entries.get(t)}set(e,t){const n=u5._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}class _S{constructor(e){this._editor=e,this._decorationOwnerId=++_S._decorationOwnerIdPool,this._disposables=new Je,this._sessionDisposables=new Je,this._getInlayHintsDelays=new UF(Hv,25,500),this._cache=new u5,this._decorationsMetadata=new Map,this._ruleFactory=new Sce(this._editor),this._disposables.add(Hv.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(t=>{t.hasChanged(126)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(126).enabled)return;const e=this._editor.getModel();if(!e||!Hv.has(e))return;const t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);const n=new xme,r=new er(()=>l5(this,void 0,void 0,function*(){const o=Date.now(),a=new oa;this._sessionDisposables.add(Un(()=>a.dispose(!0)));const u=this._getHintsRanges(),d=yield Dme(e,u,n,a.token);r.delay=this._getInlayHintsDelays.update(e,Date.now()-o),!a.token.isCancellationRequested&&(this._updateHintsDecorators(u,d),this._cache.set(e,Array.from(this._decorationsMetadata.values()).map(h=>h.hint)))}),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(r),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>r.schedule())),this._sessionDisposables.add(this._editor.onDidScrollChange(()=>r.schedule())),r.schedule();const s=new Je;this._sessionDisposables.add(s);for(const o of Hv.all(e))typeof o.onDidChangeInlayHints=="function"&&s.add(o.onDidChangeInlayHints(()=>{n.has(e,o)||r.schedule()}))}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),r=[];for(const s of n.sort(Q.compareRangesUsingStarts)){const o=t.validateRange(new Q(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));r.length===0||!Q.areIntersectingOrTouching(r[r.length-1],o)?r.push(o):r[r.length-1]=Q.plusRange(r[r.length-1],o)}return r}_updateHintsDecorators(e,t){const{fontSize:n,fontFamily:r}=this._getLayoutInfo(),s=this._editor.getModel(),o=[],a="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(a,r);for(const h of t){const{text:f,position:p,whitespaceBefore:m,whitespaceAfter:v}=h,b=m?n/3|0:0,L=v?n/3|0:0;let S,y;h.kind===jF.Parameter?(S=Lr(wIe),y=Lr(CIe)):h.kind===jF.Type?(S=Lr(bIe),y=Lr(vIe)):(S=Lr(Z1),y=Lr(Y1));const E=this._ruleFactory.createClassNameRef({fontSize:`${n}px`,margin:`0px ${L}px 0px ${b}px`,fontFamily:`var(${a}), ${jo.fontFamily}`,padding:`1px ${Math.max(1,n/4)|0}px`,borderRadius:`${n/4|0}px`,verticalAlign:"middle",backgroundColor:S,color:y});let A="before",N=Q.fromPositions(p),V=s.getWordAtPosition(p),M=!1;if(V&&(V.endColumn===p.column?(A="after",M=!0,N=nre(V,p.lineNumber)):V.startColumn===p.column&&(M=!0,N=nre(V,p.lineNumber))),o.push({decoration:{range:N,options:{[A]:{content:QJe(f),inlineClassNameAffectsLetterSpacing:!0,inlineClassName:E.className},description:"InlayHint",showIfCollapsed:!M,stickiness:0}},classNameRef:E}),o.length>XJe)break}const u=[];for(const h of e)for(const{id:f}of s.getDecorationsInRange(h,this._decorationOwnerId,!0)){const p=this._decorationsMetadata.get(f);p&&(u.push(f),p.classNameRef.dispose(),this._decorationsMetadata.delete(f))}const d=s.deltaDecorations(u,o.map(h=>h.decoration),this._decorationOwnerId);for(let h=0;h<d.length;h++)this._decorationsMetadata.set(d[h],{hint:t[h],classNameRef:o[h].classNameRef})}_getLayoutInfo(){const e=this._editor.getOption(126),t=this._editor.getOption(45);let n=e.fontSize;(!n||n<5||n>t)&&(n=t*.9|0);const r=e.fontFamily||this._editor.getOption(42);return{fontSize:n,fontFamily:r}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}}_S.ID="editor.contrib.InlayHints";_S._decorationOwnerIdPool=0;function nre(i,e){return new Q(e,i.startColumn,e,i.endColumn)}function QJe(i){const e="";return i.replace(/[ \t]/g,e)}ki(_S.ID,_S);Xn.registerCommand("_executeInlayHintProvider",(i,...e)=>l5(void 0,void 0,void 0,function*(){const[t,n]=e;Gi(rn.isUri(t)),Gi(Q.isIRange(n));const r=yield i.get(Qa).createModelReference(t);try{return yield Dme(r.object.textEditorModel,[Q.lift(n)],new xme,Fn.None)}finally{r.dispose()}}));class JJe{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new yt(r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn),r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn)):new yt(r.endLineNumber,r.endColumn-this._text.length,r.endLineNumber,r.endColumn)}}var eet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tet=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let M0=class sj{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution(sj.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),r=this.editor.getModel();if(!r||!n)return;let s=n;if(s.startLineNumber!==s.endLineNumber)return;const o=new Ade(this.editor,5),a=r.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=uo(u=>this.editorWorkerService.navigateValueSet(a,s,t)),this.currentRequest.then(u=>{if(!u||!u.range||!u.value||!o.validate(this.editor))return;let d=Q.lift(u.range),h=u.range,f=u.value.length-(s.endColumn-s.startColumn);h={startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.startColumn+u.value.length},f>1&&(s=new yt(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+f-1));const p=new JJe(d,s,u.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:h,options:sj.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=m0(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(gn)}).catch(gn)):Promise.resolve(void 0)}};M0.ID="editor.contrib.inPlaceReplaceController";M0.DECORATION=En.register({description:"in-place-replace",className:"valueSetReplacement"});M0=eet([tet(1,Vu)],M0);class net extends Et{constructor(){super({id:"editor.action.inPlaceReplace.up",label:C("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=M0.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class iet extends Et{constructor(){super({id:"editor.action.inPlaceReplace.down",label:C("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=M0.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}ki(M0.ID,M0);it(net);it(iet);hr((i,e)=>{const t=i.getColor(ode);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class ret extends Et{constructor(){super({id:"expandLineSelection",label:C("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:de.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const r=t._getViewModel();r.model.pushStackElement(),r.setCursorStates(n.source,3,ro.expandLineSelection(r,r.getCursorStates())),r.revealPrimaryCursor(n.source,!0)}}it(ret);class set{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let n=oet(e,this._cursors);for(let r=0,s=n.length;r<s;r++){let o=n[r];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function oet(i,e){e.sort((o,a)=>o.lineNumber===a.lineNumber?o.column-a.column:o.lineNumber-a.lineNumber);for(let o=e.length-2;o>=0;o--)e[o].lineNumber===e[o+1].lineNumber&&e.splice(o,1);let t=[],n=0,r=0,s=e.length;for(let o=1,a=i.getLineCount();o<=a;o++){let u=i.getLineContent(o),d=u.length+1,h=0;if(r<s&&e[r].lineNumber===o&&(h=e[r].column,r++,h===d)||u.length===0)continue;let f=Qf(u),p=0;if(f===-1)p=1;else if(f!==u.length-1)p=f+2;else continue;p=Math.max(h,p),t[n++]=jr.delete(new Q(o,p,o,d))}return t}class Ime{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let r=[];for(let o=n.startLineNumber;o<=n.endLineNumber;o++)r.push(e.getLineContent(o));const s=r.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new Q(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new Q(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new Q(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let r=n.startLineNumber,s=n.startColumn,o=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(r=r+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(o=o+this._endLineNumberDelta,a=1),n=yt.createWithDirection(r,s,o,a,this._selectionDirection)}return n}}class aet{constructor(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:s,indentSize:o,insertSpaces:a}=e.getOptions();let u=this.buildIndentConverter(s,o,a),d={getLineTokens:h=>e.getLineTokens(h),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(h,f)=>e.getLanguageIdAtPosition(h,f),getLineContent:null};if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){let h=r.startLineNumber,f=this._isMovingDown?h+1:h-1;e.getLineMaxColumn(f)===1?t.addEditOperation(new Q(1,1,1,1),null):(t.addEditOperation(new Q(h,1,h,1),e.getLineContent(f)),t.addEditOperation(new Q(f,1,f,e.getLineMaxColumn(f)),null)),r=new yt(f,1,f,1)}else{let h,f;if(this._isMovingDown){h=r.endLineNumber+1,f=e.getLineContent(h),t.addEditOperation(new Q(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);let p=f;if(this.shouldAutoIndent(e,r)){let m=this.matchEnterRule(e,u,s,h,r.startLineNumber-1);if(m!==null){let b=zi(e.getLineContent(h)),L=m+ul(b,s);p=X2(L,s,a)+this.trimLeft(f)}else{d.getLineContent=L=>L===r.startLineNumber?e.getLineContent(h):e.getLineContent(L);let b=_i.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(h,1),r.startLineNumber,u);if(b!==null){let L=zi(e.getLineContent(h)),S=ul(b,s),y=ul(L,s);S!==y&&(p=X2(S,s,a)+this.trimLeft(f))}}t.addEditOperation(new Q(r.startLineNumber,1,r.startLineNumber,1),p+`
`);let v=this.matchEnterRuleMovingDown(e,u,s,r.startLineNumber,h,p);if(v!==null)v!==0&&this.getIndentEditsOfMovingBlock(e,t,r,s,a,v);else{d.getLineContent=L=>L===r.startLineNumber?p:L>=r.startLineNumber+1&&L<=r.endLineNumber+1?e.getLineContent(L-1):e.getLineContent(L);let b=_i.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(h,1),r.startLineNumber+1,u);if(b!==null){const L=zi(e.getLineContent(r.startLineNumber)),S=ul(b,s),y=ul(L,s);if(S!==y){const E=S-y;this.getIndentEditsOfMovingBlock(e,t,r,s,a,E)}}}}else t.addEditOperation(new Q(r.startLineNumber,1,r.startLineNumber,1),p+`
`)}else if(h=r.startLineNumber-1,f=e.getLineContent(h),t.addEditOperation(new Q(h,1,h+1,1),null),t.addEditOperation(new Q(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+f),this.shouldAutoIndent(e,r)){d.getLineContent=m=>m===h?e.getLineContent(r.startLineNumber):e.getLineContent(m);let p=this.matchEnterRule(e,u,s,r.startLineNumber,r.startLineNumber-2);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,r,s,a,p);else{let m=_i.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(r.startLineNumber,1),h,u);if(m!==null){let v=zi(e.getLineContent(r.startLineNumber)),b=ul(m,s),L=ul(v,s);if(b!==L){let S=b-L;this.getIndentEditsOfMovingBlock(e,t,r,s,a,S)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,n){return{shiftIndent:r=>Du.shiftIndent(r,r.length+1,e,t,n),unshiftIndent:r=>Du.unshiftIndent(r,r.length+1,e,t,n)}}parseEnterResult(e,t,n,r,s){if(s){let o=s.indentation;s.indentAction===cs.None||s.indentAction===cs.Indent?o=s.indentation+s.appendText:s.indentAction===cs.IndentOutdent?o=s.indentation:s.indentAction===cs.Outdent&&(o=t.unshiftIndent(s.indentation)+s.appendText);let a=e.getLineContent(r);if(this.trimLeft(a).indexOf(this.trimLeft(o))>=0){let u=zi(e.getLineContent(r)),d=zi(o),h=_i.getIndentMetadata(e,r);h!==null&&h&2&&(d=t.unshiftIndent(d));let f=ul(d,n),p=ul(u,n);return f-p}}return null}matchEnterRuleMovingDown(e,t,n,r,s,o){if(Qf(o)>=0){let a=e.getLineMaxColumn(s),u=_i.getEnterAction(this._autoIndent,e,new Q(s,a,s,a));return this.parseEnterResult(e,t,n,r,u)}else{let a=r-1;for(;a>=1;){let h=e.getLineContent(a);if(Qf(h)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let u=e.getLineMaxColumn(a),d=_i.getEnterAction(this._autoIndent,e,new Q(a,u,a,u));return this.parseEnterResult(e,t,n,r,d)}}matchEnterRule(e,t,n,r,s,o){let a=s;for(;a>=1;){let h;if(a===s&&o!==void 0?h=o:h=e.getLineContent(a),Qf(h)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let u=e.getLineMaxColumn(a),d=_i.getEnterAction(this._autoIndent,e,new Q(a,u,a,u));return this.parseEnterResult(e,t,n,r,d)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),r=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==r||_i.getIndentRulesSupport(n)===null)}getIndentEditsOfMovingBlock(e,t,n,r,s,o){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let u=e.getLineContent(a),d=zi(u),f=ul(d,r)+o,p=X2(f,r,s);p!==d&&(t.addEditOperation(new Q(a,1,a,d.length+1),p),a===n.endLineNumber&&n.endColumn<=d.length+1&&p===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}class c0{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return c0._COLLATOR||(c0._COLLATOR=new Intl.Collator),c0._COLLATOR}getEditOperations(e,t){let n=uet(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let r=Tme(e,t,n);if(!r)return!1;for(let s=0,o=r.before.length;s<o;s++)if(r.before[s]!==r.after[s])return!0;return!1}}c0._COLLATOR=null;function Tme(i,e,t){let n=e.startLineNumber,r=e.endLineNumber;if(e.endColumn===1&&r--,n>=r)return null;let s=[];for(let a=n;a<=r;a++)s.push(i.getLineContent(a));let o=s.slice(0);return o.sort(c0.getCollator().compare),t===!0&&(o=o.reverse()),{startLineNumber:n,endLineNumber:r,before:s,after:o}}function uet(i,e,t){let n=Tme(i,e,t);return n?jr.replace(new Q(n.startLineNumber,1,n.endLineNumber,i.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class kme extends Et{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((o,a)=>({selection:o,index:a,ignore:!1}));n.sort((o,a)=>Q.compareRangesUsingStarts(o.selection,a.selection));let r=n[0];for(let o=1;o<n.length;o++){const a=n[o];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}const s=[];for(const o of n)s.push(new Ime(o.selection,this.down,o.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class cet extends kme{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:C("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class det extends kme{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:C("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class het extends Et{constructor(){super({id:"editor.action.duplicateSelection",label:C("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:de.writable,menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const r=[],s=t.getSelections(),o=t.getModel();for(const a of s)if(a.isEmpty())r.push(new Ime(a,!0));else{const u=new yt(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);r.push(new DAe(u,o.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class Nme extends Et{constructor(e,t){super(t),this.down=e}run(e,t){let n=[],r=t.getSelections()||[];const s=t.getOption(9);for(const o of r)n.push(new aet(o,this.down,s));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class fet extends Nme{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:C("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class get extends Nme{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:C("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class Ame extends Et{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!c0.canRun(t.getModel(),s,this.descending))return;let r=[];for(let s=0,o=n.length;s<o;s++)r[s]=new c0(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class pet extends Ame{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:C("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:de.writable})}}class met extends Ame{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:C("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:de.writable})}}class _et extends Et{constructor(){super({id:"editor.action.removeDuplicateLines",label:C("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:de.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let r=[],s=[],o=0;for(let a of t.getSelections()){let u=new Set,d=[];for(let m=a.startLineNumber;m<=a.endLineNumber;m++){let v=n.getLineContent(m);u.has(v)||(d.push(v),u.add(v))}let h=new yt(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),f=a.startLineNumber-o,p=new yt(f,1,f+d.length-1,d[d.length-1].length);r.push(jr.replace(h,d.join(`
`))),s.push(p),o+=a.endLineNumber-a.startLineNumber+1-d.length}t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}class u7 extends Et{constructor(){super({id:u7.ID,label:C("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2102),weight:100}})}run(e,t,n){let r=[];n.reason==="auto-save"&&(r=(t.getSelections()||[]).map(a=>new Le(a.positionLineNumber,a.positionColumn)));let s=t.getSelection();if(s===null)return;let o=new set(s,r);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}u7.ID="editor.action.trimTrailingWhitespace";class vet extends Et{constructor(){super({id:"editor.action.deleteLines",label:C("lines.delete","Delete Line"),alias:"Delete Line",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),r=t.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let s=0,o=[],a=[];for(let u=0,d=n.length;u<d;u++){const h=n[u];let f=h.startLineNumber,p=h.endLineNumber,m=1,v=r.getLineMaxColumn(p);p<r.getLineCount()?(p+=1,v=1):f>1&&(f-=1,m=r.getLineMaxColumn(f)),o.push(jr.replace(new yt(f,m,p,v),"")),a.push(new yt(f-s,h.positionColumn,f-s,h.positionColumn)),s+=h.endLineNumber-h.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(s=>{let o=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(o-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:o,positionColumn:s.positionColumn}});t.sort((s,o)=>s.startLineNumber===o.startLineNumber?s.endLineNumber-o.endLineNumber:s.startLineNumber-o.startLineNumber);let n=[],r=t[0];for(let s=1;s<t.length;s++)r.endLineNumber+1>=t[s].startLineNumber?r.endLineNumber=t[s].endLineNumber:(n.push(r),r=t[s]);return n.push(r),n}}class bet extends Et{constructor(){super({id:"editor.action.indentLines",label:C("lines.indent","Indent Line"),alias:"Indent Line",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,xr.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class Cet extends Et{constructor(){super({id:"editor.action.outdentLines",label:C("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2135,weight:100}})}run(e,t){by.Outdent.runEditorCommand(e,t,null)}}class wet extends Et{constructor(){super({id:"editor.action.insertLineBefore",label:C("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,xr.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class yet extends Et{constructor(){super({id:"editor.action.insertLineAfter",label:C("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,xr.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class Ome extends Et{run(e,t){if(!t.hasModel())return;const n=t.getSelection();let r=this._getRangesToDelete(t),s=[];for(let u=0,d=r.length-1;u<d;u++){let h=r[u],f=r[u+1];Q.intersectRanges(h,f)===null?s.push(h):r[u+1]=Q.plusRange(h,f)}s.push(r[r.length-1]);let o=this._getEndCursorState(n,s),a=s.map(u=>jr.replace(u,""));t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}}class Let extends Ome{constructor(){super({id:"deleteAllLeft",label:C("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,r=[],s=0;return t.forEach(o=>{let a;if(o.endColumn===1&&s>0){let u=o.startLineNumber-s;a=new yt(u,o.startColumn,u,o.startColumn)}else a=new yt(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn);s+=o.endLineNumber-o.startLineNumber,o.intersectRanges(e)?n=a:r.push(a)}),n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,r=e.getModel();return r===null?[]:(n.sort(Q.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){let o=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:r.getLineContent(o).length+1;return new Q(o,a,s.startLineNumber,1)}else return new Q(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new Q(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}}class Eet extends Ome{constructor(){super({id:"deleteAllRight",label:C("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,r=[];for(let s=0,o=t.length,a=0;s<o;s++){let u=t[s],d=new yt(u.startLineNumber-a,u.startColumn,u.startLineNumber-a,u.startColumn);u.intersectRanges(e)?n=d:r.push(d)}return n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let r=n.map(s=>{if(s.isEmpty()){const o=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===o?new Q(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new Q(s.startLineNumber,s.startColumn,s.startLineNumber,o)}return s});return r.sort(Q.compareRangesUsingStarts),r}}class xet extends Et{constructor(){super({id:"editor.action.joinLines",label:C("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getSelection();if(r===null)return;n.sort(Q.compareRangesUsingStarts);let s=[],o=n.reduce((p,m)=>p.isEmpty()?p.endLineNumber===m.startLineNumber?(r.equalsSelection(p)&&(r=m),m):m.startLineNumber>p.endLineNumber+1?(s.push(p),m):new yt(p.startLineNumber,p.startColumn,m.endLineNumber,m.endColumn):m.startLineNumber>p.endLineNumber?(s.push(p),m):new yt(p.startLineNumber,p.startColumn,m.endLineNumber,m.endColumn));s.push(o);let a=t.getModel();if(a===null)return;let u=[],d=[],h=r,f=0;for(let p=0,m=s.length;p<m;p++){let v=s[p],b=v.startLineNumber,L=1,S=0,y,E,A=a.getLineContent(v.endLineNumber).length-v.endColumn;if(v.isEmpty()||v.startLineNumber===v.endLineNumber){let M=v.getStartPosition();M.lineNumber<a.getLineCount()?(y=b+1,E=a.getLineMaxColumn(y)):(y=M.lineNumber,E=a.getLineMaxColumn(M.lineNumber))}else y=v.endLineNumber,E=a.getLineMaxColumn(y);let N=a.getLineContent(b);for(let M=b+1;M<=y;M++){let R=a.getLineContent(M),Y=a.getLineFirstNonWhitespaceColumn(M);if(Y>=1){let X=!0;N===""&&(X=!1),X&&(N.charAt(N.length-1)===" "||N.charAt(N.length-1)==="	")&&(X=!1,N=N.replace(/[\s\uFEFF\xA0]+$/g," "));let $=R.substr(Y-1);N+=(X?" ":"")+$,X?S=$.length+1:S=$.length}else S=0}let V=new Q(b,L,y,E);if(!V.isEmpty()){let M;v.isEmpty()?(u.push(jr.replace(V,N)),M=new yt(V.startLineNumber-f,N.length-S+1,b-f,N.length-S+1)):v.startLineNumber===v.endLineNumber?(u.push(jr.replace(V,N)),M=new yt(v.startLineNumber-f,v.startColumn,v.endLineNumber-f,v.endColumn)):(u.push(jr.replace(V,N)),M=new yt(v.startLineNumber-f,v.startColumn,v.startLineNumber-f,N.length-A)),Q.intersectRanges(V,r)!==null?h=M:d.push(M)}f+=V.endLineNumber-V.startLineNumber}d.unshift(h),t.pushUndoStop(),t.executeEdits(this.id,u,d),t.pushUndoStop()}}class Det extends Et{constructor(){super({id:"editor.action.transpose",label:C("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:de.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getModel();if(r===null)return;let s=[];for(let o=0,a=n.length;o<a;o++){let u=n[o];if(!u.isEmpty())continue;let d=u.getStartPosition(),h=r.getLineMaxColumn(d.lineNumber);if(d.column>=h){if(d.lineNumber===r.getLineCount())continue;let f=new Q(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),p=r.getValueInRange(f).split("").reverse().join("");s.push(new xo(new yt(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),p))}else{let f=new Q(d.lineNumber,Math.max(1,d.column-1),d.lineNumber,d.column+1),p=r.getValueInRange(f).split("").reverse().join("");s.push(new cG(f,p,new yt(d.lineNumber,d.column+1,d.lineNumber,d.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class c7 extends Et{run(e,t){const n=t.getSelections();if(n===null)return;const r=t.getModel();if(r===null)return;const s=t.getOption(116),o=[];for(const a of n)if(a.isEmpty()){const u=a.getStartPosition(),d=t.getConfiguredWordAtPosition(u);if(!d)continue;const h=new Q(u.lineNumber,d.startColumn,u.lineNumber,d.endColumn),f=r.getValueInRange(h);o.push(jr.replace(h,this._modifyText(f,s)))}else{const u=r.getValueInRange(a);o.push(jr.replace(a,this._modifyText(u,s)))}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}class Iet extends c7{constructor(){super({id:"editor.action.transformToUppercase",label:C("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:de.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class Tet extends c7{constructor(){super({id:"editor.action.transformToLowercase",label:C("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:de.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class uZ{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class kO extends c7{constructor(){super({id:"editor.action.transformToTitlecase",label:C("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:de.writable})}_modifyText(e,t){const n=kO.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,r=>r.toLocaleUpperCase()):e}}kO.titleBoundary=new uZ("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class d0 extends c7{constructor(){super({id:"editor.action.transformToSnakecase",label:C("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:de.writable})}_modifyText(e,t){const n=d0.caseBoundary.get(),r=d0.singleLetters.get();return!n||!r?e:e.replace(n,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase()}}d0.caseBoundary=new uZ("(\\p{Ll})(\\p{Lu})","gmu");d0.singleLetters=new uZ("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");it(cet);it(det);it(het);it(fet);it(get);it(pet);it(met);it(_et);it(u7);it(vet);it(bet);it(Cet);it(wet);it(yet);it(Let);it(Eet);it(xet);it(Det);it(Iet);it(Tet);d0.caseBoundary.isSupported()&&d0.singleLetters.isSupported()&&it(d0);kO.titleBoundary.isSupported()&&it(kO);var ket=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Net=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oj=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Mme=new Dt("LinkedEditingInputVisible",!1),Rme="linked-editing-decoration";let R0=class aj extends Oe{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new Je),this._editor=e,this._enabled=!1,this._visibleContextKey=Mme.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Je),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(n=>{(n.hasChanged(61)||n.hasChanged(81))&&this.reinitialize(!1)})),this._register(GF.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(aj.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(61)||this._editor.getOption(81))&&GF.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._languageWordPattern=_i.getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=_i.getWordDefinition(t.getLanguageId())}));const r=new Np(this._debounceDuration),s=()=>{this._rangeUpdateTriggerPromise=r.trigger(()=>this.updateRanges(),this._debounceDuration)},o=new Np(0),a=u=>{this._rangeSyncTriggerPromise=o.trigger(()=>this._syncRanges(u))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(u=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const d=t.getDecorationRange(this._currentDecorations[0]);if(d&&u.changes.every(h=>d.intersectRanges(h.range))){a(this._currentDecorations);return}}s()})),this._localToDispose.add({dispose:()=>{r.cancel(),o.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;const t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const r=t.getValueInRange(n);if(this._currentWordPattern){const o=r.match(this._currentWordPattern);if((o?o[0].length:0)!==r.length)return this.clearRanges()}let s=[];for(let o=1,a=e.length;o<a;o++){const u=t.getDecorationRange(e[o]);if(u)if(u.startLineNumber!==u.endLineNumber)s.push({range:u,text:r});else{let d=t.getValueInRange(u),h=r,f=u.startColumn,p=u.endColumn;const m=zy(d,h);f+=m,d=d.substr(m),h=h.substr(m);const v=kF(d,h);p-=v,d=d.substr(0,d.length-v),h=h.substr(0,h.length-v),(f!==p||h.length!==0)&&s.push({range:new Q(u.startLineNumber,f,u.endLineNumber,p),text:h})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const o=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(o)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return oj(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const o=n.getDecorationRange(this._currentDecorations[0]);if(o&&o.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=r;const s=uo(o=>oj(this,void 0,void 0,function*(){try{const a=yield Pme(n,t,o);if(s!==this._currentRequest||(this._currentRequest=null,r!==n.getVersionId()))return;let u=[];a!=null&&a.ranges&&(u=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let d=!1;for(let f=0,p=u.length;f<p;f++)if(Q.containsPosition(u[f],t)){if(d=!0,f!==0){const m=u[f];u.splice(f,1),u.unshift(m)}break}if(!d){this.clearRanges();return}const h=u.map(f=>({range:f,options:aj.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,h)}catch(a){Cg(a)||gn(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}};R0.ID="editor.contrib.linkedEditing";R0.DECORATION=En.register({description:"linked-editing",stickiness:0,className:Rme});R0=ket([Net(1,cn)],R0);class Aet extends Et{constructor(){super({id:"editor.action.linkedEditing",label:C("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:_t.and(de.writable,de.hasRenameProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(Ti),[r,s]=Array.isArray(t)&&t||[void 0,void 0];return rn.isUri(r)&&Le.isIPosition(s)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},gn):super.runCommand(e,t)}run(e,t){const n=R0.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const Oet=Po.bindToContribution(R0.get);nt(new Oet({id:"cancelLinkedEditingInput",precondition:Mme,handler:i=>i.clearRanges(),kbOpts:{kbExpr:de.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function Pme(i,e,t){const n=GF.ordered(i);return qle(n.map(r=>()=>oj(this,void 0,void 0,function*(){try{return yield r.provideLinkedEditingRanges(i,e,t)}catch(s){Ro(s);return}})),r=>!!r&&vl(r==null?void 0:r.ranges))}const Met=we("editor.linkedEditingBackground",{dark:ye.fromHex("#f00").transparent(.3),light:ye.fromHex("#f00").transparent(.3),hc:ye.fromHex("#f00").transparent(.3)},C("editorLinkedEditingBackground","Background color when the editor auto renames on type."));hr((i,e)=>{const t=i.getColor(Met);t&&e.addRule(`.monaco-editor .${Rme} { background: ${t}; border-left-color: ${t}; }`)});Sg("_executeLinkedEditingProvider",(i,e)=>Pme(i,e,Fn.None));ki(R0.ID,R0);it(Aet);var Fme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Ret{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return Fme(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class c5{constructor(e){this._disposables=new Je;let t=[];for(const[n,r]of e){const s=n.links.map(o=>new Ret(o,r));t=c5._union(t,s),JK(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],r,s,o,a;for(r=0,o=0,s=e.length,a=t.length;r<s&&o<a;){const u=e[r],d=t[o];if(Q.areIntersectingOrTouching(u.range,d.range)){r++;continue}Q.compareRangesUsingStarts(u.range,d.range)<0?(n.push(u),r++):(n.push(d),o++)}for(;r<s;r++)n.push(e[r]);for(;o<a;o++)n.push(t[o]);return n}}function Bme(i,e){const t=[],n=NA.ordered(i).reverse().map((r,s)=>Promise.resolve(r.provideLinks(i,e)).then(o=>{o&&(t[s]=[o,r])},Ro));return Promise.all(n).then(()=>{const r=new c5(FS(t));return e.isCancellationRequested?(r.dispose(),new c5([])):r})}Xn.registerCommand("_executeLinkProvider",(i,...e)=>Fme(void 0,void 0,void 0,function*(){let[t,n]=e;Gi(t instanceof rn),typeof n!="number"&&(n=0);const r=i.get(Ds).getModel(t);if(!r)return[];const s=yield Bme(r,Fn.None);if(!s)return[];for(let a=0;a<Math.min(n,s.links.length);a++)yield s.links[a].resolve(Fn.None);const o=s.links.slice(0);return s.dispose(),o}));var Pet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ire=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Fet=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function Bet(i,e){const t=i.url&&/^command:/i.test(i.url.toString()),n=i.tooltip?i.tooltip:t?C("links.navigate.executeCmd","Execute command"):C("links.navigate.follow","Follow link"),r=e?qn?C("links.navigate.kb.meta.mac","cmd + click"):C("links.navigate.kb.meta","ctrl + click"):qn?C("links.navigate.kb.alt.mac","option + click"):C("links.navigate.kb.alt","alt + click");if(i.url){let s="";if(/^command:/i.test(i.url.toString())){const a=i.url.toString().match(/^command:([^?#]+)/);if(a){const u=a[1];s=` "${C("tooltip.explanation","Execute command {0}",u)}"`}}return new Mp("",!0).appendMarkdown(`[${n}](${i.url.toString(!0).replace(/ /g,"%20")}${s}) (${r})`)}else return new Mp().appendText(`${n} (${r})`)}const rre={general:En.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:En.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Dy{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:Dy._getOptions(e,t,!1)}}static _getOptions(e,t,n){const r=Object.assign({},n?rre.active:rre.general);return r.hoverMessage=Bet(e,t),r}activate(e,t){e.changeDecorationOptions(this.decorationId,Dy._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Dy._getOptions(this.link,t,!1))}}let Qb=class lj{constructor(e,t,n){this.listenersToRemove=new Je,this.editor=e,this.openerService=t,this.notificationService=n;let r=new zge(e);this.listenersToRemove.add(r),this.listenersToRemove.add(r.onMouseMoveOrRelevantKeyDown(([s,o])=>{this._onEditorMouseMove(s,o)})),this.listenersToRemove.add(r.onExecute(s=>{this.onEditorMouseUp(s)})),this.listenersToRemove.add(r.onCancel(s=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(s=>{const o=e.getOption(62);this.enabled!==o&&(this.enabled=o,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(s=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(s=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(s=>this.onModelModeChanged())),this.listenersToRemove.add(NA.onDidChange(s=>this.onModelModeChanged())),this.timeout=new Ma,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(e){return e.getContribution(lj.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),lj.RECOMPUTE_TIME)}beginCompute(){return Fet(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(NA.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=uo(t=>Bme(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){gn(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(69)==="altKey";let n=[],r=Object.keys(this.currentOccurrences);for(let a=0,u=r.length;a<u;a++){let d=r[a],h=this.currentOccurrences[d];n.push(h.decorationId)}let s=[];if(e)for(const a of e)s.push(Dy.decoration(a,t));let o=this.editor.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,u=o.length;a<u;a++){let d=new Dy(e[a],o[a]);this.currentOccurrences[d.decorationId]=d}}_onEditorMouseMove(e,t){const n=this.editor.getOption(69)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations(s=>{r.activate(s,n),this.activeLinkDecorationId=r.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(69)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:r}=e;r.resolve(Fn.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===Tn.file&&s.startsWith(`${Tn.file}:`)){const a=rn.parse(s);if(a.scheme===Tn.file){const u=n4(a);let d=null;u.startsWith("/./")?d=`.${u.substr(1)}`:u.startsWith("//./")&&(d=`.${u.substr(2)}`),d&&(s=ike(o,d))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})},s=>{const o=s instanceof Error?s.message:s;o==="invalid"?this.notificationService.warn(C("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):o==="missing"?this.notificationService.warn(C("missing.url","Failed to open this link because its target is missing.")):gn(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const r=this.currentOccurrences[n.id];if(r)return r}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};Qb.ID="editor.linkDetector";Qb.RECOMPUTE_TIME=1e3;Qb=Pet([ire(1,Ll),ire(2,gs)],Qb);class Wet extends Et{constructor(){super({id:"editor.action.openLink",label:C("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let n=Qb.get(t);if(!n||!t.hasModel())return;let r=t.getSelections();for(let s of r){let o=n.getLinkOccurrence(s.getEndPosition());o&&n.openLinkOccurrence(o,!1)}}}ki(Qb.ID,Qb);it(Wet);hr((i,e)=>{const t=i.getColor(fce);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});function aL(i,e){const t=e.filter(n=>!i.find(r=>r.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),r=t.length===1?C("cursorAdded","Cursor added: {0}",n):C("cursorsAdded","Cursors added: {0}",n);EF(r)}}class Vet extends Et{constructor(){super({id:"editor.action.insertCursorAbove",label:C("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,ro.addCursorUp(s,o,r)),s.revealTopMostCursor(n.source),aL(o,s.getCursorStates())}}class Het extends Et{constructor(){super({id:"editor.action.insertCursorBelow",label:C("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,ro.addCursorDown(s,o,r)),s.revealBottomMostCursor(n.source),aL(o,s.getCursorStates())}}class $et extends Et{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:C("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let r=e.startLineNumber;r<e.endLineNumber;r++){let s=t.getLineMaxColumn(r);n.push(new yt(r,s,r,s))}e.endColumn>1&&n.push(new yt(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=t.getSelections(),s=t._getViewModel(),o=s.getCursorStates();let a=[];r.forEach(u=>this.getCursorsForSelection(u,n,a)),a.length>0&&t.setSelections(a),aL(o,s.getCursorStates())}}class zet extends Et{constructor(){super({id:"editor.action.addCursorsToBottom",label:C("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),r=t.getModel().getLineCount();let s=[];for(let u=n[0].startLineNumber;u<=r;u++)s.push(new yt(u,n[0].startColumn,u,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();s.length>0&&t.setSelections(s),aL(a,o.getCursorStates())}}class Uet extends Et{constructor(){super({id:"editor.action.addCursorsToTop",label:C("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let r=[];for(let a=n[0].startLineNumber;a>=1;a--)r.push(new yt(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),o=s.getCursorStates();r.length>0&&t.setSelections(r),aL(o,s.getCursorStates())}}class LP{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class NO{constructor(e,t,n,r,s,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=r,this.wholeWord=s,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new NO(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let r=!1,s,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(r=!0,s=!0,o=!0):(s=n.wholeWord,o=n.matchCase);const u=e.getSelection();let d,h=null;if(u.isEmpty()){const f=e.getConfiguredWordAtPosition(u.getStartPosition());if(!f)return null;d=f.word,h=new yt(u.startLineNumber,f.startColumn,u.startLineNumber,f.endColumn)}else d=e.getModel().getValueInRange(u).replace(/\r\n/g,`
`);return new NO(e,t,r,d,s,o,h)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new yt(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new yt(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}}class Jb extends Oe{constructor(e){super(),this._sessionDispose=this._register(new Je),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(Jb.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=NO.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(r=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(r=>{(r.matchCase||r.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new yt(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const r=e.getState().matchCase;if(!Wme(this._editor.getModel(),t,r)){const o=this._editor.getModel();let a=[];for(let u=0,d=t.length;u<d;u++)a[u]=this._expandEmptyToWord(o,t[u]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const r=n.searchScope;let s=[];t.forEach(o=>{r.forEach(a=>{o.range.endLineNumber<=a.endLineNumber&&o.range.startLineNumber>=a.startLineNumber&&s.push(o)})}),t=s}if(t.length>0){const r=this._editor.getSelection();for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a.range.intersectRanges(r)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new yt(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}Jb.ID="editor.contrib.multiCursorController";class lL extends Et{run(e,t){const n=Jb.get(t);if(!n)return;const r=Dl.get(t);if(!r)return;const s=t._getViewModel();if(s){const o=s.getCursorStates();this._run(n,r),aL(o,s.getCursorStates())}}}class jet extends lL{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:C("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2082,weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class Ket extends lL{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:C("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class qet extends lL{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:C("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:Zr(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class Get extends lL{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:C("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class Yet extends lL{constructor(){super({id:"editor.action.selectHighlights",label:C("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:3114,weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class Zet extends lL{constructor(){super({id:"editor.action.changeAll",label:C("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:_t.and(de.writable,de.editorTextFocus),kbOpts:{kbExpr:de.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class Xet{constructor(e,t,n,r,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(Q.compareRangesUsingStarts)),this._cachedFindMatches}}class yp extends Oe{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new er(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Dl.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(yp._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const r=n.getSelection();if(r.startLineNumber!==r.endLineNumber)return null;const s=Jb.get(n);if(!s)return null;const o=Dl.get(n);if(!o)return null;let a=s.getSession(o);if(!a){const h=n.getSelections();if(h.length>1){const p=o.getState().matchCase;if(!Wme(n.getModel(),h,p))return null}a=NO.create(n,o)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const u=o.getState(),d=u.matchCase;if(u.isRevealed){let h=u.searchString;d||(h=h.toLowerCase());let f=a.searchText;if(d||(f=f.toLowerCase()),h===f&&a.matchCase===u.matchCase&&a.wholeWord===u.wholeWord&&!u.isRegex)return null}return new Xet(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(116):null,e)}_setState(e){if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),r=this.editor.getSelections();r.sort(Q.compareRangesUsingStarts);const s=[];for(let u=0,d=0,h=n.length,f=r.length;u<h;){const p=n[u];if(d>=f)s.push(p),u++;else{const m=Q.compareRangesUsingStarts(p,r[d]);m<0?((r[d].isEmpty()||!Q.areIntersecting(p,r[d]))&&s.push(p),u++):(m>0||u++,d++)}}const o=Ky.has(t)&&this.editor.getOption(71),a=s.map(u=>({range:u,options:o?yp._SELECTION_HIGHLIGHT:yp._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}yp.ID="editor.contrib.selectionHighlighter";yp._SELECTION_HIGHLIGHT_OVERVIEW=En.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Lr(N8),position:bl.Inline},overviewRuler:{color:Lr(mce),position:yl.Center}});yp._SELECTION_HIGHLIGHT=En.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function Wme(i,e,t){const n=sre(i,e[0],!t);for(let r=1,s=e.length;r<s;r++){const o=e[r];if(o.isEmpty())return!1;const a=sre(i,o,!t);if(n!==a)return!1}return!0}function sre(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}ki(Jb.ID,Jb);ki(yp.ID,yp);it(Vet);it(Het);it($et);it(jet);it(Ket);it(qet);it(Get);it(Yet);it(Zet);it(zet);it(Uet);var Vme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const eC={Visible:new Dt("parameterHintsVisible",!1),MultipleSignatures:new Dt("parameterHintsMultipleSignatures",!1)};function Hme(i,e,t,n){return Vme(this,void 0,void 0,function*(){const r=J1.ordered(i);for(const s of r)try{const o=yield s.provideSignatureHelp(i,e,n,t);if(o)return o}catch(o){Ro(o)}})}Xn.registerCommand("_executeSignatureHelpProvider",(i,...e)=>Vme(void 0,void 0,void 0,function*(){const[t,n,r]=e;Gi(rn.isUri(t)),Gi(Le.isIPosition(n)),Gi(typeof r=="string"||!r);const s=yield i.get(Qa).createModelReference(t);try{const o=yield Hme(s.object.textEditorModel,Le.lift(n),{triggerKind:eg.Invoke,isRetrigger:!1,triggerCharacter:r},Fn.None);return o?(setTimeout(()=>o.dispose(),0),o.value):void 0}finally{s.dispose()}}));var Qet=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},kv;(function(i){i.Default={type:0};class e{constructor(r,s){this.request=r,this.previouslyActiveHints=s,this.type=2}}i.Pending=e;class t{constructor(r){this.hints=r,this.type=1}}i.Active=t})(kv||(kv={}));class d7 extends Oe{constructor(e,t=d7.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Ce),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=kv.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Oa),this.triggerChars=new Rw,this.retriggerChars=new Rw,this.triggerId=0,this.editor=e,this.throttledDelayer=new Np(t),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(J1.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=kv.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!J1.has(n))return;const r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(r),t).catch(gn)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,r=this.editor.getOption(75).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,r=this.editor.getOption(75).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new kv.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return Qet(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const r=this._pendingTriggers.reduce(Jet);this._pendingTriggers=[];const s={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),a=this.editor.getPosition();this.state=new kv.Pending(uo(u=>Hme(o,a,s,u)),n);try{const u=yield this.state.request;return e!==this.triggerId?(u==null||u.dispose(),!1):!u||!u.value.signatures||u.value.signatures.length===0?(u==null||u.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new kv.Active(u.value),this._lastSignatureHelpResult.value=u,this._onChangedHints.fire(this.state.hints),!0)}catch(u){return e===this.triggerId&&(this.state=kv.Default),gn(u),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new Rw,this.retriggerChars=new Rw;const e=this.editor.getModel();if(e)for(const t of J1.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:eg.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:eg.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:eg.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}d7.DEFAULT_DELAY=120;function Jet(i,e){switch(e.triggerKind){case eg.Invoke:return e;case eg.ContentChange:return i;case eg.TriggerCharacter:default:return e}}var ett=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Cu=qe,ttt=co("parameter-hints-next",_e.chevronDown,C("parameterHintsNextIcon","Icon for show next parameter hint.")),ntt=co("parameter-hints-previous",_e.chevronUp,C("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let d5=class $me extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.renderDisposeables=this._register(new Je),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Fp({editor:e},r,n)),this.model=this._register(new d7(e)),this.keyVisible=eC.Visible.bindTo(t),this.keyMultipleSignatures=eC.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(s=>{s?(this.show(),this.render(s)):this.hide()}))}createParameterHintDOMNodes(){const e=Cu(".editor-widget.parameter-hints-widget"),t=Be(e,Cu(".phwrapper"));t.tabIndex=-1;const n=Be(t,Cu(".controls")),r=Be(n,Cu(".button"+pr.asCSSSelector(ntt))),s=Be(n,Cu(".overloads")),o=Be(n,Cu(".button"+pr.asCSSSelector(ttt)));this._register(Ge(r,"click",p=>{Ni.stop(p),this.previous()})),this._register(Ge(o,"click",p=>{Ni.stop(p),this.next()}));const a=Cu(".body"),u=new pM(a,{});this._register(u),t.appendChild(u.getDomNode());const d=Be(a,Cu(".signature")),h=Be(a,Cu(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:s,docs:h,scrollbar:u},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(p=>{this.visible&&this.editor.layoutContentWidget(this)}));const f=()=>{if(!this.domNodes)return;const p=this.editor.getOption(43);this.domNodes.element.style.fontSize=`${p.fontSize}px`,this.domNodes.element.style.lineHeight=`${p.lineHeight/p.fontSize}`};f(),this._register(Rt.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(p=>p.hasChanged(43)).on(f,null)),this._register(this.editor.onDidLayoutChange(p=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const r=e.signatures[e.activeSignature];if(!r)return;const s=Be(this.domNodes.signature,Cu(".code")),o=this.editor.getOption(43);s.style.fontSize=`${o.fontSize}px`,s.style.fontFamily=o.fontFamily;const a=r.parameters.length>0,u=(t=r.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,r,u);else{const f=Be(s,Cu("span"));f.textContent=r.label}const d=r.parameters[u];if(d!=null&&d.documentation){const f=Cu("span.documentation");if(typeof d.documentation=="string")f.textContent=d.documentation;else{const p=this.renderMarkdownDocs(d.documentation);f.appendChild(p.element)}Be(this.domNodes.docs,Cu("p",{},f))}if(r.documentation!==void 0)if(typeof r.documentation=="string")Be(this.domNodes.docs,Cu("p",{},r.documentation));else{const f=this.renderMarkdownDocs(r.documentation);Be(this.domNodes.docs,f.element)}const h=this.hasDocs(r,d);if(this.domNodes.signature.classList.toggle("has-docs",h),this.domNodes.docs.classList.toggle("empty",!h),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let f="";const p=r.parameters[u];Array.isArray(p.label)?f=r.label.substring(p.label[0],p.label[1]):f=p.label,p.documentation&&(f+=typeof p.documentation=="string"?`, ${p.documentation}`:`, ${p.documentation.value}`),r.documentation&&(f+=typeof r.documentation=="string"?`, ${r.documentation}`:`, ${r.documentation.value}`),this.announcedLabel!==f&&(To(C("hint","{0}, hint",f)),this.announcedLabel=f)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&SR(t.documentation).length>0||t&&typeof t.documentation=="object"&&SR(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&SR(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&SR(e.documentation.value).length>0)}renderParameters(e,t,n){const[r,s]=this.getParameterLabelOffsets(t,n),o=document.createElement("span");o.textContent=t.label.substring(0,r);const a=document.createElement("span");a.textContent=t.label.substring(r,s),a.className="parameter active";const u=document.createElement("span");u.textContent=t.label.substring(s),Be(e,o,a,u)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const r=new RegExp(`(\\W|^)${dc(n.label)}(?=\\W|$)`,"g");r.test(e.label);const s=r.lastIndex-n.label.length;return s>=0?[s,r.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return $me.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};d5.ID="editor.widget.parameterHintsWidget";d5=ett([wW(1,cn),wW(2,Ll),wW(3,Fo)],d5);const itt=we("editorHoverWidget.highlightForeground",{dark:D9,light:D9,hc:D9},C("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));hr((i,e)=>{const t=i.getColor(Wq);if(t){const d=i.type===Xc.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${d}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=i.getColor(Ib);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const r=i.getColor(D8);r&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${r}; }`);const s=i.getColor(I8);s&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${s}; }`);const o=i.getColor(Bq);o&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${o}; }`);const a=i.getColor(nce);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const u=i.getColor(itt);u&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${u}}`)});var rtt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},stt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let tC=class zme extends Oe{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(d5,this.editor))}static get(e){return e.getContribution(zme.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};tC.ID="editor.controller.parameterHints";tC=rtt([stt(1,Nn)],tC);class ott extends Et{constructor(){super({id:"editor.action.triggerParameterHints",label:C("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:de.hasSignatureHelpProvider,kbOpts:{kbExpr:de.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=tC.get(t);n&&n.trigger({triggerKind:eg.Invoke})}}ki(tC.ID,tC);it(ott);const cZ=100+75,dZ=Po.bindToContribution(tC.get);nt(new dZ({id:"closeParameterHints",precondition:eC.Visible,handler:i=>i.cancel(),kbOpts:{weight:cZ,kbExpr:de.focus,primary:9,secondary:[1033]}}));nt(new dZ({id:"showPrevParameterHint",precondition:_t.and(eC.Visible,eC.MultipleSignatures),handler:i=>i.previous(),kbOpts:{weight:cZ,kbExpr:de.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));nt(new dZ({id:"showNextParameterHint",precondition:_t.and(eC.Visible,eC.MultipleSignatures),handler:i=>i.next(),kbOpts:{weight:cZ,kbExpr:de.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var att=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const h7=new Dt("renameInputVisible",!1,C("renameInputVisible","Whether the rename input widget is visible"));let uj=class{constructor(e,t,n,r,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=r,this._disposables=new Je,this.allowEditorOverflow=!0,this._visibleContextKey=h7.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",C("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,n;const[r,s]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(r),this._label.innerText=C({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(r))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(s))===null||n===void 0?void 0:n.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,r,s;if(!this._input||!this._domNode)return;const o=e.getColor(w0);this._domNode.style.backgroundColor=String((t=e.getColor(Gh))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=o?` 0 0 8px 2px ${o}`:"",this._domNode.style.color=String((n=e.getColor(Oq))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((r=e.getColor(Aq))!==null&&r!==void 0?r:"");const a=e.getColor(Mq);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(s=a==null?void 0:a.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(43);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,n,r,s,o){this._domNode.classList.toggle("preview",s),this._position=new Le(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",r.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Je;return new Promise(u=>{this._currentCancelInput=d=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,u(d),!0),this._currentAcceptInput=d=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,u({newName:this._input.value,wantsPreview:s&&d})},o.onCancellationRequested(()=>this.cancelInput(!0)),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};uj=att([yW(2,Er),yW(3,Sr),yW(4,cn)],uj);var ltt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},uw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class hZ{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=qF.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return lb(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const r=this._providers[this._providerRenameIdx];if(!r.resolveRenameLocation)break;let s=yield r.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new Q(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return lb(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,r){return lb(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const o=yield s.provideRenameEdits(this.model,this.position,e,r);if(o){if(o.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(o.rejectReason),r)}else return this._provideRenameEdits(e,t+1,n.concat(C("no result","No result.")),r);return o})}}function utt(i,e,t){return lb(this,void 0,void 0,function*(){const n=new hZ(i,e),r=yield n.resolveRenameLocation(Fn.None);return r!=null&&r.rejectReason?{edits:[],rejectReason:r.rejectReason}:n.provideRenameEdits(t,Fn.None)})}let nC=class Ume{constructor(e,t,n,r,s,o,a){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=r,this._progressService=s,this._logService=o,this._configService=a,this._dispoableStore=new Je,this._cts=new oa,this._renameInputField=this._dispoableStore.add(new ry(()=>this._dispoableStore.add(this._instaService.createInstance(uj,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(Ume.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return lb(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new hZ(this.editor.getModel(),e);if(!t.hasProvider())return;this._cts=new YA(this.editor,5);let n;try{const h=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(h,250),n=yield h}catch(h){Fu.get(this.editor).showMessage(h||C("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e);return}if(!n)return;if(n.rejectReason){Fu.get(this.editor).showMessage(n.rejectReason,e);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new YA(this.editor,5,n.range);let r=this.editor.getSelection(),s=0,o=n.text.length;!Q.isEmpty(r)&&!Q.spansMultipleLines(r)&&Q.containsRange(n.range,r)&&(s=Math.max(0,r.startColumn-n.range.startColumn),o=Math.min(n.range.endColumn,r.endColumn)-n.range.startColumn);const a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),u=yield this._renameInputField.value.getInput(n.range,n.text,s,o,a,this._cts.token);if(typeof u=="boolean"){u&&this.editor.focus();return}this.editor.focus();const d=aq(t.provideRenameEdits(u.newName,this._cts.token),this._cts.token).then(h=>lb(this,void 0,void 0,function*(){if(!(!h||!this.editor.hasModel())){if(h.rejectReason){this._notificationService.info(h.rejectReason);return}this.editor.setSelection(Q.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(X8.convert(h),{editor:this.editor,showPreview:u.wantsPreview,label:C("label","Renaming '{0}'",n==null?void 0:n.text),quotableLabel:C("quotableLabel","Renaming {0}",n==null?void 0:n.text)}).then(f=>{f.ariaSummary&&To(C("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",n.text,u.newName,f.ariaSummary))}).catch(f=>{this._notificationService.error(C("rename.failedApply","Rename failed to apply edits")),this._logService.error(f)})}}),h=>{this._notificationService.error(C("rename.failed","Rename failed to compute edits")),this._logService.error(h)});return this._progressService.showWhile(d,250),d})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};nC.ID="editor.contrib.renameController";nC=ltt([uw(1,Nn),uw(2,gs),uw(3,xG),uw(4,$p),uw(5,yg),uw(6,NG)],nC);class ctt extends Et{constructor(){super({id:"editor.action.rename",label:C("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:_t.and(de.writable,de.hasRenameProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(Ti),[r,s]=Array.isArray(t)&&t||[void 0,void 0];return rn.isUri(r)&&Le.isIPosition(s)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},gn):super.runCommand(e,t)}run(e,t){const n=nC.get(t);return n?n.run():Promise.resolve()}}ki(nC.ID,nC);it(ctt);const fZ=Po.bindToContribution(nC.get);nt(new fZ({id:"acceptRenameInput",precondition:h7,handler:i=>i.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:de.focus,primary:3}}));nt(new fZ({id:"acceptRenameInputWithPreview",precondition:_t.and(h7,_t.has("config.editor.rename.enablePreview")),handler:i=>i.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:de.focus,primary:1024+3}}));nt(new fZ({id:"cancelRenameInput",precondition:h7,handler:i=>i.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:de.focus,primary:9,secondary:[1033]}}));Sg("_executeDocumentRenameProvider",function(i,e,...t){const[n]=t;return Gi(typeof n=="string"),utt(i,e,n)});Sg("_executePrepareRename",function(i,e){return lb(this,void 0,void 0,function*(){const n=yield new hZ(i,e).resolveRenameLocation(Fn.None);if(n!=null&&n.rejectReason)throw new Error(n.rejectReason);return n})});Xr.as(yC.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:C("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});class dtt{provideSelectionRanges(e,t){const n=[];for(const r of t){const s=[];n.push(s),this._addInWordRanges(s,e,r),this._addWordRanges(s,e,r),this._addWhitespaceLine(s,e,r),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const r=t.getWordAtPosition(n);if(!r)return;let{word:s,startColumn:o}=r,a=n.column-o,u=a,d=a,h=0;for(;u>=0;u--){let f=s.charCodeAt(u);if(u!==a&&(f===95||f===45))break;if(Wv(f)&&If(h))break;h=f}for(u+=1;d<s.length;d++){let f=s.charCodeAt(d);if(If(f)&&Wv(h))break;if(f===95||f===45)break;h=f}u<d&&e.push({range:new Q(n.lineNumber,o+u,n.lineNumber,o+d)})}_addWordRanges(e,t,n){const r=t.getWordAtPosition(n);r&&e.push({range:new Q(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new Q(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var gZ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class pZ{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new pZ(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}class vS{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(vS.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return gZ(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(!B8.has(n)||(this._state||(yield Kme(n,t.map(s=>s.getPosition()),this._editor.getOption(101),Fn.None).then(s=>{var o;if(!(!vl(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!rc(this._editor.getSelections(),t,(a,u)=>a.equalsSelection(u)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(u=>u.containsPosition(t[a].getStartPosition())&&u.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new pZ(0,a)),(o=this._selectionListener)===null||o===void 0||o.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state))return;this._state=this._state.map(s=>s.mov(e));const r=this._state.map(s=>yt.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}})}}vS.ID="editor.contrib.smartSelectController";class jme extends Et{constructor(e,t){super(t),this._forward=e}run(e,t){return gZ(this,void 0,void 0,function*(){let n=vS.get(t);n&&(yield n.run(this._forward))})}}class htt extends jme{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:C("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Xn.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class ftt extends jme{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:C("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}ki(vS.ID,vS);it(htt);it(ftt);B8.register("*",new dtt);function Kme(i,e,t,n){return gZ(this,void 0,void 0,function*(){const r=B8.all(i);r.length===1&&r.unshift(new yu);let s=[],o=[];for(const a of r)s.push(Promise.resolve(a.provideSelectionRanges(i,e,n)).then(u=>{if(vl(u)&&u.length===e.length)for(let d=0;d<e.length;d++){o[d]||(o[d]=[]);for(const h of u[d])Q.isIRange(h.range)&&Q.containsPosition(h.range,e[d])&&o[d].push(Q.lift(h.range))}},Ro));return yield Promise.all(s),o.map(a=>{if(a.length===0)return[];a.sort((f,p)=>Le.isBefore(f.getStartPosition(),p.getStartPosition())?1:Le.isBefore(p.getStartPosition(),f.getStartPosition())||Le.isBefore(f.getEndPosition(),p.getEndPosition())?-1:Le.isBefore(p.getEndPosition(),f.getEndPosition())?1:0);let u=[],d;for(const f of a)(!d||Q.containsRange(f,d)&&!Q.equalsRange(f,d))&&(u.push(f),d=f);if(!t.selectLeadingAndTrailingWhitespace)return u;let h=[u[0]];for(let f=1;f<u.length;f++){const p=u[f-1],m=u[f];if(m.startLineNumber!==p.startLineNumber||m.endLineNumber!==p.endLineNumber){const v=new Q(p.startLineNumber,i.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,i.getLineLastNonWhitespaceColumn(p.endLineNumber));v.containsRange(p)&&!v.equalsRange(p)&&m.containsRange(v)&&!m.equalsRange(v)&&h.push(v);const b=new Q(p.startLineNumber,1,p.endLineNumber,i.getLineMaxColumn(p.endLineNumber));b.containsRange(p)&&!b.equalsRange(v)&&m.containsRange(b)&&!m.equalsRange(b)&&h.push(b)}h.push(m)}return h})})}yxe("_executeSelectionRangeProvider",function(i,...e){const[t]=e;return Kme(i,t,{selectLeadingAndTrailingWhitespace:!0},Fn.None)});class gtt extends Et{constructor(){super({id:"editor.action.forceRetokenize",label:C("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.resetTokenization();const r=new ig(!0);n.forceTokenization(n.getLineCount()),r.stop(),console.log(`tokenization took ${r.elapsed()}`)}}it(gtt);class bS extends Et{constructor(){super({id:bS.ID,label:C({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const r=!HF.getTabFocusMode();HF.setTabFocusMode(r),To(r?C("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):C("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}bS.ID="editor.action.toggleTabFocusMode";it(bS);var ptt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ore=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},mtt=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const qme="ignoreUnusualLineTerminators";function _tt(i,e,t){i.setModelProperty(e.uri,qme,t)}function vtt(i,e){return i.getModelProperty(e.uri,qme)}let AO=class extends Oe{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(113),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(113)&&(this._config=this._editor.getOption(113),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(r=>{r.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return mtt(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||vtt(this._codeEditorService,e)===!0||this._editor.getOption(80))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:C("unusualLineTerminators.title","Unusual Line Terminators"),message:C("unusualLineTerminators.message","Detected unusual line terminators"),detail:C("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",fc(e.uri)),primaryButton:C("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:C("unusualLineTerminators.ignore","Ignore")})).confirmed){_tt(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};AO.ID="editor.contrib.unusualLineTerminatorsDetector";AO=ptt([ore(1,wM),ore(2,Ti)],AO);ki(AO.ID,AO);var btt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},SW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let OO=class extends Oe{constructor(e,t,n,r){super(),this._modelService=t,this._themeService=n,this._configurationService=r,this._editor=e,this._tokenizeViewport=new er(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(s=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(W8.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration(OG)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!Q$(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!bPe(e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),r=uo(s=>Promise.resolve(AG(e,t,s)));return r.then(s=>{if(!s||!s.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:o,tokens:a}=s,u=this._modelService.getSemanticTokensProviderStyling(o);e.setPartialSemanticTokens(t,rhe(a,u,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}};OO.ID="editor.contrib.viewportSemanticTokens";OO=btt([SW(1,Ds),SW(2,Er),SW(3,nr)],OO);ki(OO.ID,OO);var Ctt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wtt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ytt=we("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},C("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Stt=we("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},C("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Ltt=we("editor.wordHighlightBorder",{light:null,dark:null,hc:Ja},C("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),Ett=we("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:Ja},C("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),xtt=we("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},C("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Dtt=we("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},C("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),f7=new Dt("hasWordHighlights",!1);function Gme(i,e,t){const n=Ky.ordered(i);return qle(n.map(r=>()=>Promise.resolve(r.provideDocumentHighlights(i,e,t)).then(void 0,Ro)),vl)}class Yme{constructor(e,t,n){this._wordRange=this._getCurrentWordRange(e,t),this.result=uo(r=>this._compute(e,t,n,r))}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new Q(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const r=t.startLineNumber,s=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t);let u=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let d=0,h=n.length;!u&&d<h;d++){let f=e.getDecorationRange(n[d]);f&&f.startLineNumber===r&&f.startColumn<=s&&f.endColumn>=o&&(u=!0)}return u}cancel(){this.result.cancel()}}class Itt extends Yme{_compute(e,t,n,r){return Gme(e,t.getPosition(),r).then(s=>s||[])}}class Ttt extends Yme{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,r){return m0(250,r).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:IA.Text}))})}isValid(e,t,n){const r=t.isEmpty();return this._selectionIsEmpty!==r?!1:super.isValid(e,t,n)}}function ktt(i,e,t){return Ky.has(i)?new Itt(i,e,t):new Ttt(i,e,t)}Sg("_executeDocumentHighlights",(i,e)=>Gme(i,e,Fn.None));class uL{constructor(e,t){this.toUnhook=new Je,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=f7.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(n=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(n)})),this.toUnhook.add(e.onDidChangeModelContent(n=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(n=>{let r=this.editor.getOption(71);this.occurrencesHighlight!==r&&(this.occurrencesHighlight=r,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return FS(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(Q.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(r.startLineNumber);To(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(r.startLineNumber);To(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn;const r=this._getWord();if(!r||r.startColumn>t||r.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let o=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=ktt(this.model,this.editor.getSelection(),this.editor.getOption(116)),this.workerRequest.result.then(a=>{o===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},gn)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:uL._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===IA.Write?this._WRITE_OPTIONS:e===IA.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}uL._WRITE_OPTIONS=En.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Lr(Dtt),position:yl.Center},minimap:{color:Lr(N8),position:bl.Inline}});uL._TEXT_OPTIONS=En.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Lr(mce),position:yl.Center},minimap:{color:Lr(N8),position:bl.Inline}});uL._REGULAR_OPTIONS=En.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Lr(xtt),position:yl.Center},minimap:{color:Lr(N8),position:bl.Inline}});let iC=class Zme extends Oe{constructor(e,t){super(),this.wordHighlighter=null;const n=()=>{e.hasModel()&&(this.wordHighlighter=new uL(e,t))};this._register(e.onDidChangeModel(r=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),n()})),n()}static get(e){return e.getContribution(Zme.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};iC.ID="editor.contrib.wordHighlighter";iC=Ctt([wtt(1,cn)],iC);class Xme extends Et{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=iC.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class Ntt extends Xme{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:C("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:f7,kbOpts:{kbExpr:de.editorTextFocus,primary:65,weight:100}})}}class Att extends Xme{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:C("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:f7,kbOpts:{kbExpr:de.editorTextFocus,primary:1089,weight:100}})}}class Ott extends Et{constructor(){super({id:"editor.action.wordHighlight.trigger",label:C("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:f7.toNegated(),kbOpts:{kbExpr:de.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const r=iC.get(t);r&&r.restoreViewState(!0)}}ki(iC.ID,iC);it(Ntt);it(Att);it(Ott);hr((i,e)=>{const t=i.getColor(Fq);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=i.getColor(ytt);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const r=i.getColor(Stt);r&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${r}; }`);const s=i.getColor(cIe);s&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const o=i.getColor(Ltt);o&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${i.type==="hc"?"dashed":"solid"} ${o}; box-sizing: border-box; }`);const a=i.getColor(Ett);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class g7 extends Po{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=gc(t.getOption(116)),s=t.getModel(),a=t.getSelections().map(u=>{const d=new Le(u.positionLineNumber,u.positionColumn),h=this._move(r,s,d,this._wordNavigationType);return this._moveTo(u,h,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(u=>Rn.fromModelSelection(u))),a.length===1){const u=new Le(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(u,0)}}_moveTo(e,t,n){return n?new yt(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new yt(t.lineNumber,t.column,t.lineNumber,t.column)}}class Z0 extends g7{_move(e,t,n,r){return ni.moveWordLeft(e,t,n,r)}}class X0 extends g7{_move(e,t,n,r){return ni.moveWordRight(e,t,n,r)}}class Mtt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class Rtt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class Ptt extends Z0{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,uB))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class Ftt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class Btt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class Wtt extends Z0{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,uB))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class Vtt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class Htt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class $tt extends X0{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class ztt extends X0{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,uB))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class Utt extends X0{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class jtt extends X0{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class Ktt extends X0{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,uB))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class qtt extends X0{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class Gtt extends X0{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class Ytt extends X0{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class p7 extends Po{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=gc(t.getOption(116)),s=t.getModel(),o=t.getSelections(),a=t.getOption(5),u=t.getOption(8),d=_i.getAutoClosingPairs(s.getLanguageId()),h=t._getViewModel(),f=o.map(p=>{const m=this._delete({wordSeparators:r,model:s,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:a,autoClosingQuotes:u,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new xo(m,"")});t.pushUndoStop(),t.executeCommands(this.id,f),t.pushUndoStop()}}class mZ extends p7{_delete(e,t){let n=ni.deleteWordLeft(e,t);return n||new Q(1,1,1,1)}}class _Z extends p7{_delete(e,t){let n=ni.deleteWordRight(e,t);if(n)return n;const r=e.model.getLineCount(),s=e.model.getLineMaxColumn(r);return new Q(r,s,r,s)}}class Ztt extends mZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:de.writable})}}class Xtt extends mZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:de.writable})}}class Qtt extends mZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class Jtt extends _Z{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:de.writable})}}class ent extends _Z{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:de.writable})}}class tnt extends _Z{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class nnt extends Et{constructor(){super({id:"deleteInsideWord",precondition:de.writable,label:C("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const r=gc(t.getOption(116)),s=t.getModel(),a=t.getSelections().map(u=>{const d=ni.deleteInsideWord(r,s,u);return new xo(d,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}nt(new Mtt);nt(new Rtt);nt(new Ptt);nt(new Ftt);nt(new Btt);nt(new Wtt);nt(new $tt);nt(new ztt);nt(new Utt);nt(new jtt);nt(new Ktt);nt(new qtt);nt(new Vtt);nt(new Htt);nt(new Gtt);nt(new Ytt);nt(new Ztt);nt(new Xtt);nt(new Qtt);nt(new Jtt);nt(new ent);nt(new tnt);it(nnt);class int extends p7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let n=q8.deleteWordPartLeft(e);return n||new Q(1,1,1,1)}}class rnt extends p7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=q8.deleteWordPartRight(e);if(n)return n;const r=e.model.getLineCount(),s=e.model.getLineMaxColumn(r);return new Q(r,s,r,s)}}class Qme extends g7{_move(e,t,n,r){return q8.moveWordPartLeft(e,t,n)}}class snt extends Qme{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Xn.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class ont extends Qme{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Xn.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Jme extends g7{_move(e,t,n,r){return q8.moveWordPartRight(e,t,n)}}class ant extends Jme{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class lnt extends Jme{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}nt(new int);nt(new rnt);nt(new snt);nt(new ont);nt(new ant);nt(new lnt);var e_e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},I4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const t_e=new Dt("accessibilityHelpWidgetVisible",!1);let rC=class n_e extends Oe{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(CS,this._editor))}static get(e){return e.getContribution(n_e.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};rC.ID="editor.contrib.accessibilityHelpController";rC=e_e([I4(1,Nn)],rC);function unt(i,e){return!i||i.length===0?vs.noSelection:i.length===1?e?Ju(vs.singleSelectionRange,i[0].positionLineNumber,i[0].positionColumn,e):Ju(vs.singleSelection,i[0].positionLineNumber,i[0].positionColumn):e?Ju(vs.multiSelectionRange,i.length,e):i.length>0?Ju(vs.multiSelection,i.length):""}let CS=class T4 extends Wu{constructor(e,t,n,r){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=r,this._editor=e,this._isVisibleKey=t_e.bindTo(this._contextKeyService),this._domNode=ii(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=ii(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(eo(this._contentDomNode.domNode,"keydown",s=>{if(this._isVisible&&(s.equals(2083)&&(To(vs.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Hs(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),s.preventDefault(),s.stopPropagation()),s.equals(2086))){To(vs.openingDocs);let o=this._editor.getRawOptions().accessibilityHelpUrl;typeof o>"u"&&(o="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(rn.parse(o)),s.preventDefault(),s.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return T4.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){let r=this._keybindingService.lookupKeybinding(e);return r?Ju(t,r.getAriaLabel()):Ju(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(u=>{n+=a.getValueLengthInRange(u)})}let r=unt(t,n);e.get(53)?e.get(80)?r+=vs.readonlyDiffEditor:r+=vs.editableDiffEditor:e.get(80)?r+=vs.readonlyEditor:r+=vs.editableEditor;const s=qn?vs.changeConfigToOnMac:vs.changeConfigToOnWinLinux;switch(e.get(2)){case 0:r+=`

 - `+s;break;case 2:r+=`

 - `+vs.auto_on;break;case 1:r+=`

 - `+vs.auto_off,r+=" "+s;break}e.get(129)?r+=`

 - `+this._descriptionForCommand(bS.ID,vs.tabFocusModeOnMsg,vs.tabFocusModeOnMsgNoKb):r+=`

 - `+this._descriptionForCommand(bS.ID,vs.tabFocusModeOffMsg,vs.tabFocusModeOffMsgNoKb);const o=qn?vs.openDocMac:vs.openDocWinLinux;r+=`

 - `+o,r+=`

`+vs.outroMsg,this._contentDomNode.domNode.appendChild(qhe(r)),this._contentDomNode.domNode.setAttribute("aria-label",r)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Hs(this._contentDomNode.domNode),this._editor.focus())}_layout(){let e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(T4.WIDTH,e.width-40)),n=Math.max(5,Math.min(T4.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);let r=Math.round((e.height-n)/2);this._domNode.setTop(r);let s=Math.round((e.width-t)/2);this._domNode.setLeft(s)}};CS.ID="editor.contrib.accessibilityHelpWidget";CS.WIDTH=500;CS.HEIGHT=300;CS=e_e([I4(1,cn),I4(2,Sr),I4(3,Ll)],CS);class cnt extends Et{constructor(){super({id:"editor.action.showAccessibilityHelp",label:vs.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){let n=rC.get(t);n&&n.show()}}ki(rC.ID,rC);it(cnt);const dnt=Po.bindToContribution(rC.get);nt(new dnt({id:"closeAccessibilityHelp",precondition:t_e,handler:i=>i.hide(),kbOpts:{weight:100+100,kbExpr:de.focus,primary:9,secondary:[1033]}}));hr((i,e)=>{const t=i.getColor(Gh);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=i.getColor(bp);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const r=i.getColor(w0);r&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${r}; }`);const s=i.getColor(fs);s&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${s}; }`)});class cj extends Oe{constructor(e){super(),this.editor=e,this.widget=null,ng&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(80);!this.widget&&e?this.widget=new m7(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}cj.ID="editor.contrib.iPadShowKeyboard";class m7 extends Oe{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Ge(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(Ge(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return m7.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}m7.ID="editor.contrib.ShowKeyboardWidget";ki(cj.ID,cj);var hnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},are=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let wS=class i_e extends Oe{constructor(e,t,n){super(),this._editor=e,this._modeService=n,this._widget=null,this._register(this._editor.onDidChangeModel(r=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(r=>this.stop())),this._register(Wr.onDidChange(r=>this.stop())),this._register(this._editor.onKeyUp(r=>r.keyCode===9&&this.stop()))}static get(e){return e.getContribution(i_e.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new _7(this._editor,this._modeService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};wS.ID="editor.contrib.inspectTokens";wS=hnt([are(1,q0),are(2,Fo)],wS);class fnt extends Et{constructor(){super({id:"editor.action.inspectTokens",label:i$.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let n=wS.get(t);n&&n.launch()}}function gnt(i){let e="";for(let t=0,n=i.length;t<n;t++){let r=i.charCodeAt(t);switch(r){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(r)}}return e}function pnt(i,e){const t=Wr.get(e);if(t)return t;const n=i.encodeLanguageId(e);return{getInitialState:()=>dM,tokenize:(r,s,o,a)=>Gce(e,r,o,a),tokenize2:(r,s,o,a)=>tG(n,r,o,a)}}class _7 extends Oe{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._modeService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=pnt(this._modeService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return _7._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let u=t.tokens1.length-1;u>=0;u--){let d=t.tokens1[u];if(e.column-1>=d.offset){n=u;break}}let r=0;for(let u=t.tokens2.length>>>1;u>=0;u--)if(e.column-1>=t.tokens2[u<<1]){r=u;break}let s=this._model.getLineContent(e.lineNumber),o="";if(n<t.tokens1.length){let u=t.tokens1[n].offset,d=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;o=s.substring(u,d)}v0(this._domNode,qe("h2.tm-token",void 0,gnt(o),qe("span.tm-token-length",void 0,`${o.length} ${o.length===1?"char":"chars"}`))),Be(this._domNode,qe("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(r<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(r<<1)+1]):null;Be(this._domNode,qe("table.tm-metadata-table",void 0,qe("tbody",void 0,qe("tr",void 0,qe("td.tm-metadata-key",void 0,"language"),qe("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),qe("tr",void 0,qe("td.tm-metadata-key",void 0,"token type"),qe("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),qe("tr",void 0,qe("td.tm-metadata-key",void 0,"font style"),qe("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),qe("tr",void 0,qe("td.tm-metadata-key",void 0,"foreground"),qe("td.tm-metadata-value",void 0,`${a?ye.Format.CSS.formatHex(a.foreground):"-?-"}`)),qe("tr",void 0,qe("td.tm-metadata-key",void 0,"background"),qe("td.tm-metadata-value",void 0,`${a?ye.Format.CSS.formatHex(a.background):"-?-"}`))))),Be(this._domNode,qe("hr.tokens-inspect-separator")),n<t.tokens1.length&&Be(this._domNode,qe("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=Wr.getColorMap(),n=ia.getLanguageId(e),r=ia.getTokenType(e),s=ia.getFontStyle(e),o=ia.getForeground(e),a=ia.getBackground(e);return{languageId:this._modeService.languageIdCodec.decodeLanguageId(n),tokenType:r,fontStyle:s,foreground:t[o],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),t.length===0&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),r=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:n.tokens,tokens2:r.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t,0).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}_7._ID="editor.contrib.inspectTokensWidget";ki(wS.ID,wS);it(fnt);hr((i,e)=>{const t=i.getColor(Wq);if(t){let s=i.type===Xc.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${s}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=i.getColor(Ib);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const r=i.getColor(Bq);r&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${r}; }`)});var mnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_nt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let h5=class k4{constructor(e){this.quickInputService=e,this.registry=Xr.as(G0.Quickaccess)}provide(e){const t=new Je;t.add(e.onDidAccept(()=>{const[s]=e.selectedItems;s&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(s=>{const o=this.registry.getQuickAccessProvider(s.substr(k4.PREFIX.length));o&&o.prefix&&o.prefix!==k4.PREFIX&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})}));const{editorProviders:n,globalProviders:r}=this.getQuickAccessProviders();return e.items=n.length===0||r.length===0?[...n.length===0?r:n]:[{label:C("globalCommands","global commands"),type:"separator"},...r,{label:C("editorCommands","editor commands"),type:"separator"},...n],t}getQuickAccessProviders(){const e=[],t=[];for(const n of this.registry.getQuickAccessProviders().sort((r,s)=>r.prefix.localeCompare(s.prefix)))if(n.prefix!==k4.PREFIX)for(const r of n.helpEntries){const s=r.prefix||n.prefix,o=s||"";(r.needsEditor?t:e).push({prefix:s,label:o,ariaLabel:C("helpPickAriaLabel","{0}, {1}",o,r.description),description:r.description})}return{editorProviders:t,globalProviders:e}}};h5.PREFIX="?";h5=mnt([_nt(0,Cc)],h5);Xr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:h5,prefix:"",helpEntries:[{description:r$.helpQuickAccessActionLabel,needsEditor:!0}]});class r_e{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const r=new Je;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=r.add(new Oa);return s.value=this.doProvide(e,t),r.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),r}doProvide(e,t){const n=new Je,r=this.activeTextEditorControl;if(r&&this.canProvideWithTextEditor(r)){const s={editor:r},o=$de(r);if(o){let a=ml(r.saveViewState());n.add(o.onDidChangeCursorPosition(()=>{a=ml(r.saveViewState())})),s.restoreViewState=()=>{a&&r===this.activeTextEditorControl&&r.restoreViewState(a)},n.add(kp(t.onCancellationRequested)(()=>{var u;return(u=s.restoreViewState)===null||u===void 0?void 0:u.call(s)}))}n.add(Un(()=>this.clearDecorations(r))),n.add(this.provideWithTextEditor(s,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return Hde(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const r=[];this.rangeHighlightDecorationId&&(r.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Lr(k2e),position:yl.Full}}}],[o,a]=n.deltaDecorations(r,s);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class v7 extends r_e{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=C("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,Oe.None}provideWithTextEditor(e,t,n){const r=e.editor,s=new Je;s.add(t.onDidAccept(u=>{const[d]=t.selectedItems;if(d){if(!this.isValidLineNumber(r,d.lineNumber))return;this.gotoLocation(e,{range:this.toRange(d.lineNumber,d.column),keyMods:t.keyMods,preserveFocus:u.inBackground}),u.inBackground||t.hide()}}));const o=()=>{const u=this.parsePosition(r,t.value.trim().substr(v7.PREFIX.length)),d=this.getPickLabel(r,u.lineNumber,u.column);if(t.items=[{lineNumber:u.lineNumber,column:u.column,label:d}],t.ariaLabel=d,!this.isValidLineNumber(r,u.lineNumber)){this.clearDecorations(r);return}const h=this.toRange(u.lineNumber,u.column);r.revealRangeInCenter(h,0),this.addDecorations(r,h)};o(),s.add(t.onDidChangeValue(()=>o()));const a=$de(r);return a&&a.getOptions().get(59).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(Un(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),r=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:r+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?C("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):C("gotoLineLabel","Go to line {0}.",t);const r=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?C("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",r.lineNumber,r.column,s):C("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",r.lineNumber,r.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const r=this.getModel(e);if(!r)return!1;const s={lineNumber:t,column:n};return r.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}v7.PREFIX=":";var vnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bnt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let MO=class extends v7{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Rt.None}get activeTextEditorControl(){return ml(this.editorService.getFocusedCodeEditor())}};MO=vnt([bnt(0,Ti)],MO);Xr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:MO,prefix:MO.PREFIX,helpEntries:[{description:y3.gotoLineActionLabel,needsEditor:!0}]});let Cnt=class extends Et{constructor(){super({id:"editor.action.gotoLine",label:y3.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Cc).quickAccess.show(MO.PREFIX)}};it(Cnt);const s_e=[void 0,[]];function LW(i,e,t=0,n=0){const r=e;return r.values&&r.values.length>1?wnt(i,r.values,t,n):o_e(i,e,t,n)}function wnt(i,e,t,n){let r=0;const s=[];for(const o of e){const[a,u]=o_e(i,o,t,n);if(typeof a!="number")return s_e;r+=a,s.push(...u)}return[r,ynt(s)]}function o_e(i,e,t,n){const r=nS(e.original,e.originalLowercase,t,i,i.toLowerCase(),n,!0);return r?[r[0],oB(r)]:s_e}function ynt(i){const e=i.sort((r,s)=>r.start-s.start),t=[];let n;for(const r of e)!n||!Snt(n,r)?(n=r,t.push(r)):(n.start=Math.min(n.start,r.start),n.end=Math.max(n.end,r.end));return t}function Snt(i,e){return!(i.end<e.start||e.end<i.start)}function lre(i){return i.startsWith('"')&&i.endsWith('"')}const a_e=" ";function dj(i){typeof i!="string"&&(i="");const e=i.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:r}=ure(i),s=t.indexOf(q1)>=0,o=lre(i);let a;const u=i.split(a_e);if(u.length>1)for(const d of u){const h=lre(d),{pathNormalized:f,normalized:p,normalizedLowercase:m}=ure(d);p&&(a||(a=[]),a.push({original:d,originalLowercase:d.toLowerCase(),pathNormalized:f,normalized:p,normalizedLowercase:m,expectContiguousMatch:h}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:r,values:a,containsPathSeparator:s,expectContiguousMatch:o}}function ure(i){let e;Ao?e=i.replace(/\//g,q1):e=i.replace(/\\/g,q1);const t=YEe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function cre(i){return Array.isArray(i)?dj(i.map(e=>e.original).join(a_e)):dj(i.original)}var HN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class ac extends r_e{constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,C("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),Oe.None}provideWithTextEditor(e,t,n){const r=e.editor,s=this.getModel(r);return s?qc.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):Oe.None}doProvideWithoutEditorSymbols(e,t,n,r){const s=new Je;return this.provideLabelPick(n,C("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),HN(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||r.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,r))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return HN(this,void 0,void 0,function*(){if(qc.has(e))return!0;const n=new Gle,r=t.add(qc.onDidChange(()=>{qc.has(e)&&(r.dispose(),n.complete(!0))}));return t.add(Un(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,r){const s=e.editor,o=new Je;o.add(n.onDidAccept(f=>{const[p]=n.selectedItems;p&&p.range&&(this.gotoLocation(e,{range:p.range.selection,keyMods:n.keyMods,preserveFocus:f.inBackground}),f.inBackground||n.hide())})),o.add(n.onDidTriggerItemButton(({item:f})=>{f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const a=this.getDocumentSymbols(t,r);let u;const d=()=>HN(this,void 0,void 0,function*(){u==null||u.dispose(!0),n.busy=!1,u=new oa(r),n.busy=!0;try{const f=dj(n.value.substr(ac.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(a,f,void 0,u.token);if(r.isCancellationRequested)return;p.length>0?n.items=p:f.original.length>0?this.provideLabelPick(n,C("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,C("noSymbolResults","No editor symbols"))}finally{r.isCancellationRequested||(n.busy=!1)}});o.add(n.onDidChangeValue(()=>d())),d();let h=!0;return o.add(n.onDidChangeActive(()=>{const[f]=n.activeItems;if(f&&f.range){if(h){h=!1;return}s.revealRangeInCenter(f.range.selection,0),this.addDecorations(s,f.range.decoration)}})),o}doGetSymbolPicks(e,t,n,r){return HN(this,void 0,void 0,function*(){const s=yield e;if(r.isCancellationRequested)return[];const o=t.original.indexOf(ac.SCOPE_PREFIX)===0,a=o?1:0;let u,d;t.values&&t.values.length>1?(u=cre(t.values[0]),d=cre(t.values.slice(1))):u=t;const h=[];for(let m=0;m<s.length;m++){const v=s[m],b=qEe(v.name),L=`$(symbol-${HH.toString(v.kind)||"property"}) ${b}`,S=L.length-b.length;let y=v.containerName;n!=null&&n.extraContainerLabel&&(y?y=`${n.extraContainerLabel}  ${y}`:y=n.extraContainerLabel);let E,A,N,V;if(t.original.length>a){let R=!1;if(u!==t&&([E,A]=LW(L,Object.assign(Object.assign({},t),{values:void 0}),a,S),typeof E=="number"&&(R=!0)),typeof E!="number"&&([E,A]=LW(L,u,a,S),typeof E!="number"))continue;if(!R&&d){if(y&&d.original.length>0&&([N,V]=LW(y,d)),typeof N!="number")continue;typeof E=="number"&&(E+=N)}}const M=v.tags&&v.tags.indexOf(1)>=0;h.push({index:m,kind:v.kind,score:E,label:L,ariaLabel:b,description:y,highlights:M?void 0:{label:A,description:V},range:{selection:Q.collapseToStart(v.selectionRange),decoration:v.range},strikethrough:M,buttons:(()=>{var R,Y;const X=!((R=this.options)===null||R===void 0)&&R.openSideBySideDirection?(Y=this.options)===null||Y===void 0?void 0:Y.openSideBySideDirection():void 0;if(X)return[{iconClass:X==="right"?_e.splitHorizontal.classNames:_e.splitVertical.classNames,tooltip:X==="right"?C("openToSide","Open to the Side"):C("openToBottom","Open to the Bottom")}]})()})}const f=h.sort((m,v)=>o?this.compareByKindAndScore(m,v):this.compareByScore(m,v));let p=[];if(o){let L=function(){v&&typeof m=="number"&&b>0&&(v.label=Ju(xW[m]||EW,b))},m,v,b=0;for(const S of f)m!==S.kind?(L(),m=S.kind,b=1,v={type:"separator"},p.push(v)):b++,p.push(S);L()}else f.length>0&&(p=[{label:C("symbols","symbols ({0})",h.length),type:"separator"},...f]);return p})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=xW[e.kind]||EW,r=xW[t.kind]||EW,s=n.localeCompare(r);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return HN(this,void 0,void 0,function*(){const n=yield Da.create(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}}ac.PREFIX="@";ac.SCOPE_PREFIX=":";ac.PREFIX_BY_CATEGORY=`${ac.PREFIX}${ac.SCOPE_PREFIX}`;const EW=C("property","properties ({0})"),xW={5:C("method","methods ({0})"),11:C("function","functions ({0})"),8:C("_constructor","constructors ({0})"),12:C("variable","variables ({0})"),4:C("class","classes ({0})"),22:C("struct","structs ({0})"),23:C("event","events ({0})"),24:C("operator","operators ({0})"),10:C("interface","interfaces ({0})"),2:C("namespace","namespaces ({0})"),3:C("package","packages ({0})"),25:C("typeParameter","type parameters ({0})"),1:C("modules","modules ({0})"),6:C("property","properties ({0})"),9:C("enum","enumerations ({0})"),21:C("enumMember","enumeration members ({0})"),14:C("string","strings ({0})"),0:C("file","files ({0})"),17:C("array","arrays ({0})"),15:C("number","numbers ({0})"),16:C("boolean","booleans ({0})"),18:C("object","objects ({0})"),19:C("key","keys ({0})"),7:C("field","fields ({0})"),13:C("constant","constants ({0})")};var Lnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ent=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let hj=class extends ac{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Rt.None}get activeTextEditorControl(){return ml(this.editorService.getFocusedCodeEditor())}};hj=Lnt([Ent(0,Ti)],hj);Xr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:hj,prefix:ac.PREFIX,helpEntries:[{description:eO.quickOutlineActionLabel,prefix:ac.PREFIX,needsEditor:!0},{description:eO.quickOutlineByCategoryActionLabel,prefix:ac.PREFIX_BY_CATEGORY,needsEditor:!0}]});let xnt=class extends Et{constructor(){super({id:"editor.action.quickOutline",label:eO.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:de.hasDocumentSymbolProvider,kbOpts:{kbExpr:de.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Cc).quickAccess.show(ac.PREFIX)}};it(xnt);function DW(i,e){return e&&(i.stack||i.stacktrace)?C("stackTrace.format","{0}: {1}",hre(i),dre(i.stack)||dre(i.stacktrace)):hre(i)}function dre(i){return Array.isArray(i)?i.join(`
`):i}function hre(i){return typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?C("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function l_e(i=null,e=!1){if(!i)return C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){const t=FS(i),n=l_e(t[0],e);return t.length>1?C("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(cc(i))return i;if(i.detail){const t=i.detail;if(t.error)return DW(t.error,e);if(t.exception)return DW(t.exception,e)}return i.stack?DW(i,e):i.message?i.message:C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var EP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},z1;(function(i){i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM"})(z1||(z1={}));function IW(i){const e=i;return Array.isArray(e.items)}function Dnt(i){const e=i;return!!e.picks&&e.additionalPicks instanceof Promise}class b7 extends Oe{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const r=new Je;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s;const o=r.add(new Oa),a=()=>EP(this,void 0,void 0,function*(){const u=o.value=new Je;s==null||s.dispose(!0),e.busy=!1,s=new oa(t);const d=s.token,h=e.value.substr(this.prefix.length).trim(),f=this._getPicks(h,u,d),p=(m,v)=>{var b;let L,S;if(IW(m)?(L=m.items,S=m.active):L=m,L.length===0){if(v)return!1;h.length>0&&(!((b=this.options)===null||b===void 0)&&b.noResultsPick)&&(L=[this.options.noResultsPick])}return e.items=L,S&&(e.activeItems=[S]),!0};if(f!==null)if(Dnt(f)){let m=!1,v=!1;yield Promise.all([(()=>EP(this,void 0,void 0,function*(){yield m0(b7.FAST_PICKS_RACE_DELAY),!d.isCancellationRequested&&(v||(m=p(f.picks,!0)))}))(),(()=>EP(this,void 0,void 0,function*(){e.busy=!0;try{const b=yield f.additionalPicks;if(d.isCancellationRequested)return;let L,S;IW(f.picks)?(L=f.picks.items,S=f.picks.active):L=f.picks;let y,E;if(IW(b)?(y=b.items,E=b.active):y=b,y.length>0||!m){let A;if(!S&&!E){const N=e.activeItems[0];N&&L.indexOf(N)!==-1&&(A=N)}p({items:[...L,...y],active:S||E||A})}}finally{d.isCancellationRequested||(e.busy=!1),v=!0}}))()])}else if(!(f instanceof Promise))p(f);else{e.busy=!0;try{const m=yield f;if(d.isCancellationRequested)return;p(m)}finally{d.isCancellationRequested||(e.busy=!1)}}});return r.add(e.onDidChangeValue(()=>a())),a(),r.add(e.onDidAccept(u=>{const[d]=e.selectedItems;typeof(d==null?void 0:d.accept)=="function"&&(u.inBackground||e.hide(),d.accept(e.keyMods,u))})),r.add(e.onDidTriggerItemButton(({button:u,item:d})=>EP(this,void 0,void 0,function*(){var h,f;if(typeof d.trigger=="function"){const p=(f=(h=d.buttons)===null||h===void 0?void 0:h.indexOf(u))!==null&&f!==void 0?f:-1;if(p>=0){const m=d.trigger(p,e.keyMods),v=typeof m=="number"?m:yield m;if(t.isCancellationRequested)return;switch(v){case z1.NO_ACTION:break;case z1.CLOSE_PICKER:e.hide();break;case z1.REFRESH_PICKER:a();break;case z1.REMOVE_ITEM:const b=e.items.indexOf(d);if(b!==-1){const L=e.items.slice(),S=L.splice(b,1),y=e.activeItems.filter(A=>A!==S[0]),E=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=L,y&&(e.activeItems=y),e.keepScrollPosition=E}break}}}}))),r}}b7.FAST_PICKS_RACE_DELAY=200;var u_e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},T1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fre=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let RO=class N4 extends b7{constructor(e,t,n,r,s,o){super(N4.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=r,this.telemetryService=s,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(sC)),this.options=e}_getPicks(e,t,n){return fre(this,void 0,void 0,function*(){const r=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const s=[];for(const d of r){const h=ml(N4.WORD_FILTER(e,d.label)),f=d.commandAlias?ml(N4.WORD_FILTER(e,d.commandAlias)):void 0;h||f?(d.highlights={label:h,detail:this.options.showAlias?f:void 0},s.push(d)):e===d.commandId&&s.push(d)}const o=new Map;for(const d of s){const h=o.get(d.label);h?(d.description=d.commandId,h.description=h.commandId):o.set(d.label,d)}s.sort((d,h)=>{const f=this.commandsHistory.peek(d.commandId),p=this.commandsHistory.peek(h.commandId);return f&&p?f>p?-1:1:f?-1:p?1:d.label.localeCompare(h.label)});const a=[];let u=!1;for(let d=0;d<s.length;d++){const h=s[d],f=this.keybindingService.lookupKeybinding(h.commandId),p=f?C("commandPickAriaLabelWithKeybinding","{0}, {1}",h.label,f.getAriaLabel()):h.label;d===0&&this.commandsHistory.peek(h.commandId)&&(a.push({type:"separator",label:C("recentlyUsed","recently used")}),u=!0),d!==0&&u&&!this.commandsHistory.peek(h.commandId)&&(a.push({type:"separator",label:C("morecCommands","other commands")}),u=!1),a.push(Object.assign(Object.assign({},h),{ariaLabel:p,detail:this.options.showAlias&&h.commandAlias!==h.label?h.commandAlias:void 0,keybinding:f,accept:()=>fre(this,void 0,void 0,function*(){this.commandsHistory.push(h.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:h.commandId,from:"quick open"});try{yield this.commandService.executeCommand(h.commandId)}catch(m){Cg(m)||this.dialogService.show(Ur.Error,C("canNotRun","Command '{0}' resulted in an error ({1})",h.label,l_e(m)))}})}))}return a})}};RO.PREFIX=">";RO.WORD_FILTER=FG(rB,n4e,ghe);RO=u_e([T1(1,Nn),T1(2,Sr),T1(3,Tr),T1(4,wg),T1(5,wM)],RO);let sC=class js extends Oe{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=js.getConfiguredCommandHistoryLength(this.configurationService),js.cache&&js.cache.limit!==this.configuredCommandsHistoryLength&&(js.cache.limit=this.configuredCommandsHistoryLength,js.saveState(this.storageService))}load(){const e=this.storageService.get(js.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=js.cache=new z0(this.configuredCommandsHistoryLength,1);if(t){let r;t.usesLRU?r=t.entries:r=t.entries.sort((s,o)=>s.value-o.value),r.forEach(s=>n.set(s.key,s.value))}js.counter=this.storageService.getNumber(js.PREF_KEY_COUNTER,0,js.counter)}push(e){js.cache&&(js.cache.set(e,js.counter++),js.saveState(this.storageService))}peek(e){var t;return(t=js.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!js.cache)return;const t={usesLRU:!0,entries:[]};js.cache.forEach((n,r)=>t.entries.push({key:r,value:n})),e.store(js.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(js.PREF_KEY_COUNTER,js.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:js.DEFAULT_COMMANDS_HISTORY_LENGTH}};sC.DEFAULT_COMMANDS_HISTORY_LENGTH=50;sC.PREF_KEY_CACHE="commandPalette.mru.cache";sC.PREF_KEY_COUNTER="commandPalette.mru.counter";sC.counter=1;sC=u_e([T1(0,Dg),T1(1,nr)],sC);class c_e extends RO{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:zG(n.label)||n.id});return t}}var Int=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Tnt=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let PO=class extends c_e{constructor(e,t,n,r,s,o){super({showAlias:!1},e,n,r,s,o),this.codeEditorService=t}get activeTextEditorControl(){return ml(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return Tnt(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};PO=Int([cw(0,Nn),cw(1,Ti),cw(2,Sr),cw(3,Tr),cw(4,wg),cw(5,wM)],PO);Xr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:PO,prefix:PO.PREFIX,helpEntries:[{description:JA.quickCommandHelp,needsEditor:!0}]});class knt extends Et{constructor(){super({id:"editor.action.quickCommand",label:JA.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Cc).quickAccess.show(PO.PREFIX)}}it(knt);var Nnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},dw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let fj=class extends k0{constructor(e,t,n,r,s,o,a){super(!0,e,t,n,r,s,o,a)}};fj=Nnt([dw(1,cn),dw(2,Ti),dw(3,gs),dw(4,Nn),dw(5,Dg),dw(6,nr)],fj);ki(k0.ID,fj);class Ant extends Et{constructor(){super({id:"editor.action.toggleHighContrast",label:s$.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(q0);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}it(Ant);var Iy;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(Iy||(Iy={}));var Ty;(function(i){i.dark="dark",i.light="light"})(Ty||(Ty={}));var FO;(function(i){i.onChange="colorTheme.onChange"})(FO||(FO={}));const Ont={workbenchBackground:"#F3F3F3",foreground:"#616161",errorForeground:"#A1260D",descriptionForeground:"#717171","icon.foreground":"#424242",focusBorder:"#0090F1","widget.shadow":"#A8A8A8","textSeparator.foreground":"#0000002e","textLink.foreground":"#006AB1","textLink.activeForeground":"#006AB1","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#dcdcdc66","input.background":ye.white,"input.foreground":"#616161","input.border":"#616161","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":ye.fromHex("#007ACC").transparent(.3),"input.placeholderForeground":ye.fromHex("#616161").transparent(.5),"dropdown.background":ye.white,"dropdown.border":ye.white,"checkbox.background":ye.white,"checkbox.border":ye.white,"button.background":"#007ACC","button.foreground":ye.white,"badge.background":"#C4C4C4","badge.foreground":"#333","scrollbar.shadow":"#DDDDDD","scrollbarSlider.background":ye.fromHex("#646464").transparent(.4),"scrollbarSlider.hoverBackground":ye.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":ye.fromHex("#000000").transparent(.6),"progressBar.background":ye.fromHex("#0E70C0"),"editorError.background":"#E51400","editorWarning.foreground":"#E51400","editorInfo.foreground":"#E9A700","editorHint.foreground":"#6c6c6c","editor.background":"#fffffe","editor.foreground":"#333333","editor.selectionBackground":"#ADD6FF","editor.findMatchBackground":"#A8AC94","list.dropBackground":"#E4E6F1","list.hoverBackground":"#F0F0F0","list.activeSelectionBackground":"#0074E8","list.activeSelectionForeground":ye.white,"menu.foreground":"#616161","menu.background":ye.white,"menu.separatorBackground":"#888888","panel.background":ye.white,"panel.border":"rgba(128, 128, 128, 0.35)","panelTitle.activeForeground":"rgb(66, 66, 66)","panelTitle.activeBorder":"rgb(66, 66, 66)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},Mnt={workbenchBackground:"#252526",foreground:"#CCCCCC","widget.shadow":"#000000",errorForeground:"#F48771",descriptionForeground:ye.fromHex("#CCCCCC").transparent(.7),"icon.foreground":"#C5C5C5",focusBorder:"#007FD4","textSeparator.foreground":"#ffffff2e","textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#0a0a0a66","input.background":"#3C3C3C","input.foreground":"#CCCCCC","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":ye.fromHex("#0E639C").transparent(.5),"input.placeholderForeground":ye.fromHex("#616161").transparent(.5),"dropdown.background":"#3C3C3C","dropdown.foreground":"#F0F0F0","dropdown.border":"#CECECE","checkbox.border":"#CECECE","button.background":"#0E639C","button.foreground":ye.white,"badge.background":"#4D4D4D","badge.foreground":ye.white,"scrollbar.shadow":"#000000","scrollbarSlider.background":ye.fromHex("#797979").transparent(.4),"scrollbarSlider.hoverBackground":ye.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":ye.fromHex("#BFBFBF").transparent(.4),"progressBar.background":ye.fromHex("#0E70C0"),"editorError.background":"#F48771","editorWarning.foreground":"#CCA700","editorInfo.foreground":"#75BEFF","editorHint.foreground":ye.fromHex("#eeeeee").transparent(.7),"editor.background":"#1E1E1E","editor.foreground":"#BBBBBB","editor.selectionBackground":"#264F78","editor.selectionForeground":"#000000","list.dropBackground":"#37373D","list.hoverBackground":"#2A2D2E","list.activeSelectionBackground":"#37373D","list.activeSelectionForeground":ye.white,"menu.foreground":"#F0F0F0","menu.background":"#3C3C3C","menu.separatorBackground":"#BBBBBB","panel.background":"rgb(30, 30, 30)","panel.border":"#3C3C3C","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},Rnt={workbenchBackground:"#000000",foreground:"#FFFFFF",errorForeground:"#F48771",descriptionForeground:ye.fromHex("#FFFFFF").transparent(.7),"icon.foreground":"#FFFFFF",focusBorder:"#F38518",contrastBorder:"#6FC3DF",contrastActiveBorder:"#F38518","textSeparator.foreground":ye.black,"textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.border":ye.white,"textCodeBlock.background":ye.black,"input.background":ye.black,"input.foreground":"#FFFFFF","input.border":"#6FC3DF","inputOption.activeBorder":"#6FC3DF","input.placeholderForeground":ye.fromHex("#616161").transparent(.7),"dropdown.background":ye.black,"dropdown.listBackground":ye.black,"dropdown.foreground":ye.white,"dropdown.border":"#6FC3DF","checkbox.border":"#6FC3DF","button.foreground":ye.white,"badge.background":ye.black,"badge.foreground":ye.white,"scrollbarSlider.background":ye.fromHex("#6FC3DF").transparent(.6),"scrollbarSlider.hoverBackground":ye.fromHex("#6FC3DF").transparent(.8),"scrollbarSlider.activeBackground":"#6FC3DF","progressBar.background":"#6FC3DF","editorError.border":ye.fromHex("#E47777").transparent(.8),"editorWarning.border":ye.fromHex("#FFCC00").transparent(.8),"editorInfo.border":ye.fromHex("#FFCC00").transparent(.8),"editorHint.border":ye.fromHex("#eeeeee").transparent(.8),"editor.background":ye.black,"editor.foreground":ye.white,"editor.selectionForeground":"#000000","menu.foreground":ye.white,"menu.background":ye.black,"menu.separatorBackground":"#6FC3DF","panel.border":"#6FC3DF","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"};function Pnt(i){switch(i.uiTheme){case"vs-dark":return Object.assign({},Mnt);case"vs":return Object.assign({},Ont);default:return Object.assign({},Rnt)}}function Fnt(i){let e="";for(const t in i)if(t){const n=i[t];if(n){const r=t.replace(".","-");e+=`--${r}: ${n}; 
`}}return`
        :root {
            ${e}
        }
    `}function Bnt(i){const e=wr.cloneDeep(i);return[["minimap.background","editor.background"],["minimapSlider.background","scrollbarSlider.background"],["minimapSlider.hoverBackground","scrollbarSlider.hoverBackground"],["minimapSlider.activeBackground","scrollbarSlider.activeBackground"],["panel.background","workbenchBackground"],["sash.hoverBorder","focusBorder"],["button.background","textLink.foreground"],["menu.selectionBackground","button.background"],["button.hoverBackground","button.background",n=>ye.fromHex(n).lighten(.2)]].forEach(([n,r,s])=>{!e[n]&&e[r]&&(s?e[n]=s(e[r]):e[n]=e[r])}),e}function Wnt(i){const e=Pnt(i),t=Bnt(Object.assign(e,i.colors)),n={};for(const a in t)if(a){const u=t[a];u&&typeof u=="object"?n[a]=u.toString():typeof u=="string"&&(n[a]=u)}const r=i.tokenColors,s=[],o=(a,u)=>{const d=s.findIndex(h=>h.token===a);d>=0?Object.assign(s[d],Object.assign({},u.settings)):a&&s.push(Object.assign({token:a},u.settings))};return r==null||r.forEach(a=>{Array.isArray(a.scope)?a.scope.forEach(u=>o(u,a)):o(a.scope,a)}),{base:i.uiTheme,rules:s,inherit:!0,colors:n}}var Vnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Hnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};const d2={id:"Default Dark+",name:"Default Dark+",label:"Default Dark+",uiTheme:"vs-dark"},A4=Bn("customize-theme");let oC=class extends kS{constructor(){super(),this.colorThemes=[d2],this.colorTheme=d2,this.colorTheme&&this.setTheme(this.colorTheme.id)}addThemes(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.getThemeById(n.id)?(Pn.warn(`There has ${n.name} already in theme, it'll update this theme otherwise please don't add the duplicated theme`),this.updateTheme(n)):this.colorThemes.push(Object.assign({},n))})}updateTheme(e){e.id||Pn.error("Update the theme failed!  The 'id' is required in the theme data.");const t=this.colorThemes.findIndex(di(e.id));t>-1?(Object.assign(this.colorThemes[t],e),this.colorThemes[t].id===this.getColorTheme().id&&this.reload()):Pn.error(`Update the theme failed! There is no theme found via '${e.id}'`)}getThemeById(e){const t=this.colorThemes.find(di(e));return t?Object.assign({},t):void 0}getColorTheme(){return Object.assign({},this.colorTheme)}setTheme(e){const t=this.getColorTheme(),n=this.getThemeById(e);if(n){this.colorTheme=Object.assign({},n);const r=Wnt(n),s=Fnt(r.colors);Ube(s,A4),ka.defineTheme(A4,r),ka.setTheme(A4);const o=this.getColorThemeMode();this.emit(FO.onChange,t,Object.assign({},this.colorTheme),o)}else Pn.error("Can't get the theme by id:"+e)}getThemes(){return this.colorThemes}reload(){this.setTheme(this.getColorTheme().id)}reset(){this.colorThemes=[d2],this.setTheme(d2.id)}getColorThemeMode(){const{colors:e,type:t}=this.colorTheme;if(t===Iy.DARK||t===Iy.HIGH_CONTRAST)return Ty.dark;if(t===Iy.LIGHT)return Ty.light;const n=(e==null?void 0:e["editor.background"])||(e==null?void 0:e["tab.activeBackground"])||(e==null?void 0:e["molecule.welcomeBackground"]);return n?$be(n):Ty.dark}onChange(e){this.subscribe(FO.onChange,e)}};oC=Vnt([Ki(),Hnt("design:paramtypes",[])],oC);var aC;(function(i){i.OnClick="activityBar.onClick",i.OnChange="activityBar.onChange",i.DataChanged="activityBar.data",i.ReRender="activityBar.reRender"})(aC||(aC={}));class d_e{constructor(e=[],t=[],n=""){this.data=e,this.contextMenu=t,this.selected=n}}class h_e{constructor(e=[],t=""){this.panes=e,this.current=t}}var $nt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},znt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let pg=class extends tl{constructor(){super(),this.state=je.resolve(h_e)}getPane(e){const{panes:t}=this.state;return t.find(di(e))}get(e){const t=this.getPane(e);return t?Zh(t):void 0}add(e,t=!1){if(this.getPane(e.id)){Pn.error(`There already has a pane which id is ${e.id}, if you want to modify it, please use the update method`);return}const r=this.state.panes.concat();r.push(Zh(e)),t&&this.setState({current:e.id}),this.setState({panes:r})}update(e){const{panes:t}=this.state,n=this.getPane(e.id);if(!n){Pn.error(`There is no pane found via the ${e.id} id`);return}Object.assign(n,e),this.setState({panes:Zh(t)})}remove(e){var t,n;const{panes:r,current:s}=this.state,o=r.findIndex(di(e));if(o===-1){Pn.error(`There is no pane found via the ${e} id`);return}if(e===s){const a=((t=r[o+1])===null||t===void 0?void 0:t.id)||((n=r[o-1])===null||n===void 0?void 0:n.id)||"";this.setActive(a)}r.splice(o,1),this.setState({panes:r.concat()})}setActive(e){if(!e)this.setState({current:""});else{if(!this.getPane(e)){Pn.error(`There is no pane found via the ${e} id`);return}this.setState({current:e})}}reset(){this.setState({panes:[],current:""})}};pg=$nt([Ki(),znt("design:paramtypes",[])],pg);var Unt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},jnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let mg=class extends tl{constructor(){super(),this.state=je.resolve(d_e),this.sidebarService=je.resolve(pg)}setActive(e){this.setState({selected:e})}reset(){this.setState({data:[],selected:"",contextMenu:[]})}add(e,t=!1){let n=[...this.state.data];Array.isArray(e)?n=n==null?void 0:n.concat(e):(n==null||n.push(e),t&&this.setActive(e.id)),n.sort((r,s)=>{const o=r.sortIndex||Number.MAX_SAFE_INTEGER,a=s.sortIndex||Number.MAX_SAFE_INTEGER;return o-a}),this.setState({data:n})}getRemoveList(e,t){return t.reduce((n,r,s)=>{const o=r.id.toString();return Array.isArray(e)&&e.includes(o)||e===o?n.concat(s):n},[])}remove(e){const{data:t}=this.state;let n=[...t];const r=this.getRemoveList(e,n);r.length?(n=n.filter((s,o)=>!r.includes(o)),this.setState({data:n})):Pn.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}toggleBar(e){const{data:t=[],selected:n}=this.state,r=t.concat(),s=r.findIndex(di(e)),o=r[s];if(o){if(o.hidden=!o.hidden,e===n){const a=(s+1)%r.length;this.setActive(r[a].id),this.sidebarService.setActive(r[a].id)}this.setState({data:r})}else Pn.error("Toggle activity bar failed, please check your id")}toggleContextMenuChecked(e){const{contextMenu:t=[]}=this.state,n=t.concat(),r=n.find(di(e));r?(r.icon=r.icon==="check"?"":"check",this.setState({contextMenu:n})):Pn.error(`Toggle the contextmenu failed, can not found any menu by id ${e}`)}addContextMenu(e){let t=[...this.state.contextMenu];Array.isArray(e)?t=t==null?void 0:t.concat(e):t==null||t.push(e),this.setState({contextMenu:t})}removeContextMenu(e){const{contextMenu:t}=this.state;let n=[...t];const r=this.getRemoveList(e,n);r.length?(n=n.filter((s,o)=>!r.includes(o)),this.setState({contextMenu:n})):Pn.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}onClick(e){this.subscribe(aC.OnClick,e)}onChange(e){this.subscribe(aC.OnChange,e)}};mg=Unt([Ki(),jnt("design:paramtypes",[])],mg);var BO;(function(i){i.onTabClick="AuxiliaryBar.onClick"})(BO||(BO={}));class gj{constructor(e="default",t=[],n,r){this.mode="default",this.data=[],this.mode=e,this.children=r,this.data=t,this.current=n}}var Sp;(function(i){i.left="left",i.right="right"})(Sp||(Sp={}));var WO;(function(i){i.onClick="statusBar.onClick",i.DataChanged="statusBar.data"})(WO||(WO={}));class f_e{constructor(e=[],t=[],n=[]){this.leftItems=[],this.rightItems=[],this.leftItems=e,this.rightItems=t,this.contextMenu=n}}var lC;(function(i){i.onSelect="menuBar.onSelect",i.onChangeMode="menuBar.onChangeMode"})(lC||(lC={}));class g_e{constructor(e=[]){this.data=e}}var Uc;(function(i){i.onClick="explorer.onClick",i.onPanelToolbarClick="explorer.onPanelToolbarClick",i.onCollapseChange="explorer.onCollapseChange",i.onRemovePanel="explorer.onRemovePanel",i.onCollapseAllFolders="explorer.onCollapseAllFolders"})(Uc||(Uc={}));class p_e{constructor(e=[],t,n){this.data=e,this.headerToolBar=t,this.activePanelKeys=n}}var ea;(function(i){i.File="File",i.Folder="Folder",i.RootFolder="RootFolder"})(ea||(ea={}));var Cs;(function(i){i.onSelectFile="folderTree.onSelectFile",i.onDelete="folderTree.onDelete",i.onRename="folderTree.onRename",i.onUpdateFileName="folderTree.onUpdateFileName",i.onRightClick="folderTree.onRightClick",i.onContextMenuClick="folderTree.onContextMenuClick",i.onCreate="folderTree.onCreate",i.onLoadData="folderTree.onLoadData",i.onDrop="folderTree.onDrop",i.onExpandKeys="folderTree.onExpandKeys"})(Cs||(Cs={}));class Knt{constructor(e){this.fileType=ea.File;const{id:t,name:n="",location:r="",fileType:s=ea.File,children:o=[],icon:a="",isEditable:u=!1,content:d="",isLeaf:h=!0,data:f}=e;this.fileType=s,this.isEditable=u,this.name=n,this.id=t,this.location=r,this.children=o,this.icon=a,this.content=d,this.data=f,this.isLeaf=h}}class m_e{constructor(e={contextMenu:[],current:null,folderPanelContextMenu:[],data:[],expandKeys:[]},t=!1,n){this.folderTree=e,this.entry=n,this.autoSort=t}}var Ls;(function(i){i.onClose="editorTree.close",i.onSelect="editorTree.select",i.onCloseOthers="editorTree.closeOthers",i.onCloseSaved="editorTree.closeSaved",i.onCloseAll="editorTree.closeAll",i.onSaveAll="editorTree.saveAll",i.onSplitEditorLayout="editorTree.splitEditorLayout",i.onToolbarClick="editorTree.toolbarClick",i.onContextMenu="editorTree.contextMenuClick"})(Ls||(Ls={}));let qnt=class{constructor(){}};var Wh;(function(i){i.onChange="search.onChange",i.onSearch="search.onSearch",i.onReplaceAll="search.onReplaceAll",i.onResultClick="search.onResultClick"})(Wh||(Wh={}));class __e{constructor(e=[],t=[],n=[],r=[],s="",o="",a=!1,u=!1,d=!1,h=!1,f=!1,p={type:"info",text:""}){this.result=[],this.value="",this.replaceValue="",this.replaceMode=!1,this.isRegex=!1,this.isCaseSensitive=!1,this.isWholeWords=!1,this.preserveCase=!1,this.validationInfo={type:"info",text:""},this.headerToolBar=e,this.searchAddons=t,this.replaceAddons=n,this.value=s,this.replaceValue=o,this.replaceMode=a,this.isCaseSensitive=u,this.isWholeWords=d,this.isRegex=h,this.preserveCase=f,this.result=r,this.validationInfo=p}}var Lp;(function(i){i.onTabChange="panel.onTabChange",i.onToolbarClick="panel.onToolbarClick",i.onTabClose="panel.onTabClose"})(Lp||(Lp={}));class v_e{constructor(e=null,t=[],n=[]){this.hidden=!1,this.maximize=!1,this.current=e,this.data=t,this.toolbox=n}}var VO;(function(i){i.OnChange="settings.onchange"})(VO||(VO={}));class b_e{constructor(e,t,n){this.colorTheme=e,this.editor=t,this.locale=n}}var f5;(function(i){i[i.Read=1]="Read",i[i.WaitRead=2]="WaitRead"})(f5||(f5={}));class C_e{constructor(e="",t="",n=[],r=1,s=!1,o=[],a){this.id=e,this.name=t,this.sortIndex=r,this.render=a,this.showNotifications=s,this.data=n,this.actionBar=o}}var Qh;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Qh||(Qh={}));var HO;(function(i){i.onSelect="problems.onSelect"})(HO||(HO={}));class w_e{constructor(e="",t="",n=[],r=!1){this.id=e,this.name=t,this.show=r,this.data=n}}const y_e={[an.Unknown]:"",[an.Backspace]:"",[an.Tab]:"",[an.Enter]:"",[an.PageUp]:"",[an.PageDown]:"",[an.Digit0]:"0",[an.Digit1]:"1",[an.Digit2]:"2",[an.Digit3]:"3",[an.Digit4]:"4",[an.Digit5]:"5",[an.Digit6]:"6",[an.Digit7]:"7",[an.Digit8]:"8",[an.Digit9]:"9",[an.KeyA]:"A",[an.KeyB]:"B",[an.KeyC]:"C",[an.KeyD]:"D",[an.KeyE]:"E",[an.KeyF]:"F",[an.KeyG]:"G",[an.KeyH]:"H",[an.KeyI]:"I",[an.KeyJ]:"J",[an.KeyK]:"K",[an.KeyL]:"L",[an.KeyM]:"M",[an.KeyN]:"N",[an.KeyO]:"O",[an.KeyP]:"P",[an.KeyQ]:"Q",[an.KeyR]:"R",[an.KeyS]:"S",[an.KeyT]:"T",[an.KeyU]:"U",[an.KeyV]:"V",[an.KeyW]:"W",[an.KeyX]:"X",[an.KeyY]:"Y",[an.KeyZ]:"Z",[an.Semicolon]:";",[an.Equal]:"+",[an.Comma]:",",[an.Minus]:"-",[an.Period]:".",[an.Slash]:"/",[an.Backquote]:"~",[an.BracketLeft]:"[",[an.Backslash]:"\\",[an.BracketRight]:"]",[an.Quote]:'"'},Gnt=Object.freeze(Object.defineProperty({__proto__:null,get ActivityBarEvent(){return aC},ActivityBarModel:d_e,get AuxiliaryEventKind(){return BO},AuxiliaryModel:gj,get ColorScheme(){return Iy},get ColorThemeEvent(){return FO},get ColorThemeMode(){return Ty},get EditorEvent(){return qr},EditorGroupModel:ege,EditorModel:tge,EditorTree:qnt,get EditorTreeEvent(){return Ls},get ExplorerEvent(){return Uc},get FileTypes(){return ea},get Float(){return Sp},get FolderTreeEvent(){return Cs},get IContributeType(){return sS},IExplorerModel:p_e,get IExtensionType(){return Gz},IFolderTreeModel:m_e,KeyCodeString:y_e,get MarkerSeverity(){return Qh},get MenuBarEvent(){return lC},MenuBarModel:g_e,NotificationModel:C_e,get NotificationStatus(){return f5},get PanelEvent(){return Lp},PanelModel:v_e,get ProblemsEvent(){return HO},ProblemsModel:w_e,get SearchEvent(){return Wh},SearchModel:__e,get SettingsEvent(){return VO},SettingsModel:b_e,SidebarModel:h_e,get StatusBarEvent(){return WO},StatusBarModel:f_e,TreeNodeModel:Knt},Symbol.toStringTag,{value:"Module"}));var Ynt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Znt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let yS=class extends tl{constructor(){super(),this.getCurrentTab=()=>{const{current:e,data:t}=this.getState();return t==null?void 0:t.find(r=>r.key===e)},this.addAuxiliaryBar=e=>{const t=Array.isArray(e)?e:[e];this.setState({data:this.state.data.concat(t)})},this.setActive=e=>{this.setState({current:e})},this.setChildren=e=>{this.setState({children:e})},this.setMode=e=>{if(typeof e=="string")return this.setState({mode:e}),e;const t=e(this.state.mode);return this.setState({mode:t}),t},this.reset=()=>{this.setState(je.resolve(gj))},this.state=je.resolve(gj)}onTabClick(e){this.subscribe(BO.onTabClick,e)}};yS=Ynt([Ki(),Znt("design:paramtypes",[])],yS);var Xnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Qnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let P0=class extends tl{constructor(){super(),this.sperator="-",this.setMenus=e=>{this.setState({data:wr.cloneDeep(e)})},this.onSelect=e=>{this.subscribe(lC.onSelect,e)},this.state=je.resolve(g_e)}getReferenceMenu(e){const{data:t}=this.state,n=t.map((s,o)=>({source:s,path:`${o}`}));let r;for(;n.length;){const{source:s,path:o}=n.shift();s.id===e?r={source:s,path:o}:n.push(...(s.data||[]).map((a,u)=>({source:a,path:`${o}${this.sperator}${u}`})))}return r}getMenuById(e){const t=this.getReferenceMenu(e);return t&&wr.cloneDeep(t.source)}append(e,t){const{data:n}=this.state,r=this.getReferenceMenu(t);if(!r){Pn.error(`There is no menu found by ${t}`);return}const{source:s}=r;Array.isArray(s.data)?s.data.push(e):s.data=[e];const o=wr.cloneDeep(n);this.setState({data:o})}remove(e){const{data:t}=this.state,n=this.getReferenceMenu(e);if(!n){Pn.error(`There is no menu found by ${e}`);return}const{path:r}=n,s=r.split(this.sperator);s.length=s.length-1;const o=s.reduce((u,d)=>{const{data:h}=u;return h[d]},{data:t}),a=o.data.findIndex(u=>u.id===e);o.data.splice(a,1),this.setState({data:wr.cloneDeep(t)})}update(e,t={}){const{data:n}=this.state,r=this.getReferenceMenu(e);if(!r){Pn.error(`There is no menu found by ${e}`);return}const s=r.source;Object.assign(s,t);const o=wr.cloneDeep(n);this.setState({data:o})}reset(){this.setState({data:[]})}};P0=Xnt([Ki(),Qnt("design:paramtypes",[])],P0);var Jnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},eit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Bp=class extends tl{constructor(){super(),this.state=je.resolve(p_e)}setExpandedPanels(e){this.setState({activePanelKeys:e})}toggleIcon(e){return e==="check"?"":"check"}getAction(e){var t;const{headerToolBar:n}=this.state,r=(t=n==null?void 0:n.contextMenu)===null||t===void 0?void 0:t.find(di(e));return r&&Zh(r)}updatePanel(e){if(!e.id){Pn.error("Must provide id property in update data");return}const t=this.state.data.concat(),n=t.find(di(e.id));if(!n){Pn.error(`There is no panel found in state whose id is ${e.id}`);return}Object.assign(n,e),this.setState({data:t}),this.updateAction({id:e.id.toString(),name:e.name,title:e.title,sortIndex:e.sortIndex})}updateAction(e){var t;if(!e.id){Pn.error("Must provide id property in action data");return}const{headerToolBar:n}=this.state;if(!n){Pn.error("Molecule can' update the action, because there is no headerToolBar in Explorer");return}const r=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],s=r.find(di(e.id));if(!s){Pn.error(`There is no action found in actions whose id is ${e.id}`);return}Object.assign(s,e),this.setState({headerToolBar:Object.assign(Object.assign({},n),{contextMenu:r})})}addPanel(e){const t=Array.isArray(e)?e:[e],n=[...this.state.data],r=[];t.forEach(s=>{n.findIndex(di(s.id))!==-1?Pn.error(`There is already a panel whose id is ${s.id}`):(n.push(Zh(s)),r.push({id:s.id.toString(),name:s.name,title:s.name,icon:"check",sortIndex:s.sortIndex}))}),n.sort(({sortIndex:s=0},{sortIndex:o=0})=>o-s),this.setState({data:n}),this.addAction(r)}addAction(e){var t;const n=Array.isArray(e)?e:[e],{headerToolBar:r}=this.state;if(!r){Pn.error("Molecule can't add the action, because there is no headerToolBar in Explorer");return}const s=((t=r.contextMenu)===null||t===void 0?void 0:t.concat())||[];n.forEach(a=>{s.findIndex(di(a.id))!==-1?Pn.error(`There is already an action whose id is ${a.id}`):s.push(a)}),s.sort(({sortIndex:a=0},{sortIndex:u=0})=>u-a);const o=Object.assign(Object.assign({},r),{contextMenu:s});this.setState({headerToolBar:o})}removePanel(e){const{data:t}=this.state,n=[...t],r=n.findIndex(di(e));r>-1&&n.splice(r,1),this.setState({data:n}),this.removeAction(e)}removeAction(e){const{headerToolBar:t}=this.state;if(!t){Pn.error("Molecule can' remove the action, because there is no headerToolBar in Explorer");return}const n=t.contextMenu||[],r=n==null?void 0:n.findIndex(di(e));r>-1&&n.splice(r,1);const s=Object.assign(Object.assign({},t),{contextMenu:n});this.setState({headerToolBar:s})}togglePanel(e){const{data:t}=this.state,n=t.concat(),r=n.find(di(e));r&&(r.hidden=!r.hidden,this.setState({data:n}),this.toggleHeaderBar(e))}toggleHeaderBar(e){var t;const{headerToolBar:n}=this.state;if(!n){Pn.error("Molecule can' toggle the header bar, because there is no headerToolBar in Explorer");return}const r=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],s=r.find(di(e));if(s){s.icon=this.toggleIcon(s.icon);const o=Object.assign(Object.assign({},n),{contextMenu:r});this.setState({headerToolBar:o})}}reset(){this.setState({data:[],headerToolBar:void 0})}onClick(e){this.subscribe(Uc.onClick,e)}onRemovePanel(e){this.subscribe(Uc.onRemovePanel,e)}onCollapseAllFolders(e){this.subscribe(Uc.onCollapseAllFolders,e)}onPanelToolbarClick(e){this.subscribe(Uc.onPanelToolbarClick,e)}};Bp=Jnt([Ki(),eit("design:paramtypes",[])],Bp);const vZ="molecule",S_e="activityBar",zM="sidebar",tit="explorer",gre="statusBar",nit="folderTree",iit="editorTree";var g5;(function(i){i.left="left",i.right="right"})(g5||(g5={}));var qa;(function(i){i.horizontal="horizontal",i.vertical="vertical"})(qa||(qa={}));var p5;(function(i){i.OnWorkbenchDidMount="workbench.didMount"})(p5||(p5={}));class rit{constructor(e=[300,"auto",300],t=["auto","150px"],n=[],r={hidden:!1},s={hidden:!0},o={hidden:!1,panelMaximized:!1},a={hidden:!1},u={hidden:!1,position:g5.left},d={hidden:!1,mode:qa.vertical},h=qa.vertical){this.splitPanePos=e,this.horizontalSplitPanePos=t,this.groupSplitPos=n,this.activityBar=r,this.auxiliaryBar=s,this.panel=o,this.statusBar=a,this.sidebar=u,this.menuBar=d,this.editorGroupDirection=h}}var sit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},oit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Bu=class extends tl{constructor(){super(),this.state=je.resolve(rit)}onWorkbenchDidMount(e){this.subscribe(p5.OnWorkbenchDidMount,e)}get container(){return this._container=document.getElementById(vZ)||document.body,this._container}toggleMenuBarVisibility(){const{menuBar:e}=this.state,t=e.hidden;return this.setState({menuBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}togglePanelVisibility(){const{panel:e}=this.state,t=e.hidden;return this.setState({panel:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleSidebarVisibility(){const{sidebar:e}=this.state,t=e.hidden;return this.setState({sidebar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleActivityBarVisibility(){const{activityBar:e}=this.state,t=e.hidden;return this.setState({activityBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleStatusBarVisibility(){const{statusBar:e}=this.state,t=e.hidden;return this.setState({statusBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}setSideBarPosition(e){const{sidebar:t}=this.state,{position:n}=t;n!==e&&this.setState({sidebar:{position:e,hidden:!1}})}togglePanelMaximized(){const e=this.state.panel;return this.setState({panel:Object.assign(Object.assign({},e),{panelMaximized:!e.panelMaximized})}),!e.panelMaximized}setPaneSize(e){this.setState({splitPanePos:e})}setHorizontalPaneSize(e){this.setState({horizontalSplitPanePos:e})}setGroupSplitSize(e){this.setState({groupSplitPos:e})}setMenuBarMode(e){const{menuBar:t}=this.state,{mode:n}=t;n!==e&&(this.setState({menuBar:Object.assign(Object.assign({},t),{mode:e,hidden:!1})}),this.emit(lC.onChangeMode,e))}getMenuBarMode(){const{menuBar:e}=this.state;return e.mode}setEditorGroupDirection(e){typeof e=="function"?this.setState({editorGroupDirection:e(this.state.editorGroupDirection)}):this.setState({editorGroupDirection:e})}setAuxiliaryBar(e){if(typeof e=="boolean")return this.setState({auxiliaryBar:{hidden:e}}),e;const t=e(this.state.auxiliaryBar.hidden);return this.setState({auxiliaryBar:{hidden:t}}),t}reset(){this.setState({splitPanePos:["300px","auto"],horizontalSplitPanePos:["70%","auto"],activityBar:{hidden:!1},panel:{hidden:!1,panelMaximized:!1},statusBar:{hidden:!1},sidebar:{hidden:!1,position:g5.left},menuBar:{hidden:!1,mode:qa.vertical}})}};Bu=sit([Ki(),oit("design:paramtypes",[])],Bu);var ait=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},lit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Il=class extends tl{constructor(){super(),this.defaultActions=[],this.defaultMenus=[],this.updateActions=(e,t)=>{var n;const{current:r,groups:s}=this.getState();if(!r)return;const o=(s==null?void 0:s.concat())||[],a=o.find(di(t||r.id));if(a){const u=((n=a.actions)===null||n===void 0?void 0:n.concat())||[];u.forEach(d=>{const h=e.find(f=>f.id===d.id);h&&Object.assign(d,h)}),a.actions=u,this.setState({current:a.id===r.id?a:r,groups:o})}},this.state=je.resolve(tge),this.explorerService=je.resolve(Bp),this.layoutService=je.resolve(Bu)}updateEditorOptions(e){var t;const n=Object.assign({},this.state.editorOptions,e);this.setState({editorOptions:n}),(t=this.editorInstance)===null||t===void 0||t.updateOptions(n)}getDefaultActions(){return wr.cloneDeep(this.defaultActions)}getDefaultMenus(){return wr.cloneDeep(this.defaultMenus)}disposeModel(e){(Array.isArray(e)?e:[e]).forEach(n=>{var r;(r=ka.getModel(u0.parse(n.id.toString())))===null||r===void 0||r.dispose()})}isOpened(e,t){return(t||this.state.groups||[]).some(r=>this.getTabById(e,r.id))}setDefaultActions(e){this.defaultActions=e}setDefaultMenus(e){this.defaultMenus=e}setEntry(e){this.setState({entry:e})}getTabById(e,t){var n;const r=this.getGroupById(t);if(r)return(n=r.data)===null||n===void 0?void 0:n.find(di(e))}get editorInstance(){var e;return(e=this.state.current)===null||e===void 0?void 0:e.editorInstance}updateTab(e,t){var n,r,s;let o;const a=(n=e==null?void 0:e.data)===null||n===void 0?void 0:n.value;if(t){const u=this.getGroupById(t);if(!((r=u==null?void 0:u.data)===null||r===void 0)&&r.length){const d=u.data.find(di(e.id));d&&(o=Object.assign(d,e)),u.activeTab===e.id&&(o=Object.assign(u.tab,e));const h=ka.getModel(u0.parse(e.id.toString())),f=h==null?void 0:h.getValue();h&&wr.isString(a)&&f!==a&&h.setValue(a),this.updateGroup(t,u),t===((s=this.state.current)===null||s===void 0?void 0:s.id)&&this.updateCurrentGroup(u)}}else{const{groups:u=[],current:d}=this.state;u.forEach(h=>{const f=this.getTabById(e.id,h.id);f&&(o=Object.assign(f,e)),h.activeTab===e.id&&(o=Object.assign(h.tab,e));const p=ka.getModel(u0.parse(e.id.toString())),m=p==null?void 0:p.getValue();p&&wr.isString(a)&&m!==a&&p.setValue(a)}),(d==null?void 0:d.activeTab)===e.id&&(o=Object.assign(d.tab,e)),this.setState({current:d&&Object.assign({},d),groups:[...u]})}return o}setGroupEditorValue(e,t){var n;const r=(n=e.editorInstance)===null||n===void 0?void 0:n.getModel();if(!r)return;(r==null?void 0:r.getValue())!==t&&(r==null||r.setValue(t))}closeTab(e,t){const n=this.getGroupIndexById(t);if(n===-1)return;const{groups:r=[]}=this.state,s=[...r],o=s[n],a=o.data.findIndex(di(e)),u=wr.cloneDeep(o.data[a]);if(a!==-1){if(o.data.length===1&&a===0){const d=s[n+1]||s[n-1];s.splice(n,1),this.setState({groups:s,current:(s==null?void 0:s.length)===0?void 0:d},()=>{!this.isOpened(e)&&this.disposeModel(u),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(s.length?new Array(s.length+1).fill("auto"):[]);return}if(e===o.activeTab){const d=o.data[a+1]||o.data[a-1];o.tab=Object.assign({},d),o.activeTab=d==null?void 0:d.id}o.data.splice(a,1),s[n]=o,this.setState({current:o,groups:s},()=>{!this.isOpened(e)&&this.disposeModel(u),this.explorerService.forceUpdate()})}}closeOther(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,s=[...r],o=e.id,u=s[n].data,d=u.filter(di(o)),h=wr.cloneDeep(u.filter(f=>f.id!==o&&!this.isOpened(f.id,s.filter(p=>p.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,o),this.disposeModel(h),this.explorerService.forceUpdate()}closeToRight(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,s=[...r],o=e.id,u=s[n].data,d=u.findIndex(di(o));if(d<=-1)return;const h=u==null?void 0:u.slice(0,d+1),f=wr.cloneDeep(u==null?void 0:u.slice(d+1).filter(p=>!this.isOpened(p.id,s.filter(m=>m.id!==t))));this.updateGroup(t,{data:h}),this.setActive(t,o),this.disposeModel(f||[]),this.explorerService.forceUpdate()}closeToLeft(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,s=[...r],o=e.id,u=s[n].data,d=u.findIndex(di(o));if(d<=-1)return;const h=u==null?void 0:u.slice(d,u.length),f=wr.cloneDeep(u==null?void 0:u.slice(0,d).filter(p=>!this.isOpened(p.id,s.filter(m=>m.id!==t))));this.updateGroup(t,{data:h}),this.setActive(t,o),this.disposeModel(f||[]),this.explorerService.forceUpdate()}getGroupById(e){const{groups:t}=this.state;return t.find(di(e))}getGroupIndexById(e){const{groups:t}=this.state;return t.findIndex(di(e))}getGroupIdByTab(e){const{groups:t=[]}=this.state;return this.isOpened(e,t)?t.find(s=>this.getTabById(e,s.id)).id:null}setActive(e,t){const{groups:n=[]}=this.state,r=this.getGroupIndexById(e);if(r>-1){const s=[...n],o=s[r],a=this.getTabById(t,o.id);if(a){const u=Object.assign({},o);u.tab=Object.assign({},a),u.activeTab=t,s[r]=u,this.setState({current:u,groups:s})}}}updateGroup(e,t){const{groups:n=[]}=this.state,r=[...n],s=this.getGroupIndexById(e);if(s>-1){const o=Object.assign({},r[s],t);r[s]=o,this.setState({groups:r})}}updateCurrentGroup(e){const{current:t}=this.state,n=Object.assign({},t,e);this.setState({current:n})}open(e,t){const{current:n,groups:r=[]}=this.state;let s=n;if(t&&(s=this.getGroupById(t)),s){const{id:o}=e,a=s==null?void 0:s.data.find(di(o));if(a&&o===(s==null?void 0:s.activeTab))return;const u=this.getGroupIndexById(s.id),d=r[u];a||s.data.push(e),s.tab=e,s.activeTab=o,r[u]=Object.assign(Object.assign({},d),{tab:e,activeTab:o})}else s=new ege(r.length+1,e,e.id,[e],this.defaultActions,this.defaultMenus),r.push(s);this.emit(qr.OpenTab,e),this.setState({current:s,groups:[...r]}),this.explorerService.forceUpdate()}onOpenTab(e){this.subscribe(qr.OpenTab,e)}closeAll(e){var t;const{current:n,groups:r=[]}=this.state,s=this.getGroupIndexById(e);if(s>-1){const o=[...r];let a=n;const u=o.splice(s,1),d=wr.cloneDeep(((t=u[0].data)===null||t===void 0?void 0:t.filter(h=>!this.isOpened(h.id,o)))||[]);n&&n.id===e&&(a=r[s+1]||r[s-1]),this.setState({groups:o,current:a},()=>{this.disposeModel(d),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(o.length?new Array(o.length+1).fill("auto"):[])}}cloneGroup(e){const{current:t,groups:n=[]}=this.state,r=Object.assign({},e?this.getGroupById(e):t),s=hae(),o=Object.assign({},r.tab);return r.data=[o],r.tab=o,r.activeTab=o.id,r.id=s,this.setState({current:r,groups:[...n,r]}),r}onUpdateTab(e){this.subscribe(qr.OnUpdateTab,e)}onMoveTab(e){this.subscribe(qr.OnMoveTab,e)}onSelectTab(e){this.subscribe(qr.OnSelectTab,e)}onCloseAll(e){this.subscribe(qr.OnCloseAll,e)}onCloseTab(e){this.subscribe(qr.OnCloseTab,e)}onCloseOther(e){this.subscribe(qr.OnCloseOther,e)}onCloseToLeft(e){this.subscribe(qr.OnCloseToLeft,e)}onCloseToRight(e){this.subscribe(qr.OnCloseToRight,e)}onActionsClick(e){this.subscribe(qr.onActionsClick,e)}onEditorInstanceMount(e){this.subscribe(qr.onEditorInstanceMount,e)}};Il=ait([Ki(),lit("design:paramtypes",[])],Il);var uit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let _g=class extends tl{constructor(){super(),this.state=je.resolve(f_e)}getItem(e,t){const{rightItems:n,leftItems:r}=this.state;if(!t){let a=r.findIndex(di(e.id));return a>-1?{index:a,item:r[a],source:"leftItems"}:(a=n.findIndex(di(e.id)),a>-1?{index:a,item:n[a],source:"rightItems"}:{index:-1,item:null,source:null})}const s=t===Sp.left?r:n,o=s.findIndex(di(e.id));return{index:o,item:s[o]||null,source:t===Sp.left?"leftItems":"rightItems"}}add(e,t){if(this.getItem(e,t).item){Pn.error(`There is already a status whose id is ${e.id}, if you want to update it, please use the update method`);return}const r=t===Sp.left?"leftItems":"rightItems",s=this.state[r].concat();s.push(e),this.setState({[r]:s})}update(e,t){const n=this.getItem(e,t);if(!n.source){Pn.error(`There is no status found whose id is ${e.id}`);return}const{index:r,item:s,source:o}=n,a=this.state[o].concat();a[r]=Object.assign({},s,e),this.setState({[o]:a})}getStatusBarItem(e,t){const n=this.getItem({id:e},t);return n.source?Zh(n.item):n.item}remove(e,t){const n=this.getItem({id:e},t);if(!n.source){Pn.error(`There is no status item found whose id is ${e}`);return}const{index:r,source:s}=n,o=this.state[s].concat();o.splice(r,1),this.setState({[s]:o})}reset(){this.setState({rightItems:[],leftItems:[],contextMenu:[]})}onClick(e){this.subscribe(WO.onClick,e)}};_g=uit([Ki(),cit("design:paramtypes",[])],_g);var dit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},hit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},fit=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};let SS=class extends tl{constructor(){super(),this.fileContextMenu=[],this.folderContextMenu=[],this.onDropTree=e=>{this.subscribe(Cs.onDrop,e)},this.onRightClick=e=>{this.subscribe(Cs.onRightClick,e)},this.onCreate=e=>{this.subscribe(Cs.onCreate,e)},this.onContextMenu=e=>{this.subscribe(Cs.onContextMenuClick,e)},this.onLoadData=e=>{this.subscribe(Cs.onLoadData,e)},this.onExpandKeys=e=>{this.subscribe(Cs.onExpandKeys,e)},this.state=je.resolve(m_e),this.explorerService=je.resolve(Bp),this.builtinService=je.resolve(zs)}isHiddenFile(e){var t;return!!(!((t=e.name)===null||t===void 0)&&t.startsWith("."))}sortTree(e){e.sort((t,n)=>{if(t.isLeaf!==n.isLeaf)return t.isLeaf>n.isLeaf?1:-1;if(t.name&&n.name){const r=Number(this.isHiddenFile(t)),s=Number(this.isHiddenFile(n));return r^s?r?-1:1:r&r?t.name.substring(1).localeCompare(n.name.substring(1)):t.name.localeCompare(n.name)}return t.isEditable?-1:1}),e.forEach(t=>this.sortTree(t.children||[]))}reset(){this.setState({folderTree:{contextMenu:[],current:null,folderPanelContextMenu:[],data:[]},entry:void 0})}getFileContextMenu(){return this.fileContextMenu}getParentNode(e){var t,n;const r=(n=(t=this.state.folderTree)===null||t===void 0?void 0:t.data)===null||n===void 0?void 0:n[0];if(!r)return null;const s=new w4(r),o=s.getHashMap(e);return o&&o.parent?s.getNode(o.parent):null}setFileContextMenu(e){this.fileContextMenu=e}getFolderContextMenu(){return this.folderContextMenu}setFolderContextMenu(e){this.folderContextMenu=e}getExpandKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.expandKeys)||[]}setExpandKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{expandKeys:e})})}getLoadedKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.loadedKeys)||[]}setLoadedKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{loadedKeys:e})})}setCurrentFolderLocation(e,t){const n=e.children,{tree:r}=this.getCurrentRootFolderInfo(t),s=r.getHashMap(t);e.location=`${s.node.location}/${e.name}`,n!=null&&n.length&&n.forEach(o=>{o.location=`${e.location}/${o.name}`})}getRootFolderById(e){var t;const n=((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[];for(let r=0;r<n.length;r++){const s=n[r];if(new w4(s).getNode(e))return s}return null}addRootFolder(e){var t;const{folderTree:n,autoSort:r}=this.state;if(!((t=n==null?void 0:n.data)===null||t===void 0)&&t.length)return;r&&this.sortTree(e.children||[]),this.setState({folderTree:Object.assign(Object.assign({},n),{data:[e]})});const{SAMPLE_FOLDER_PANEL_ID:s}=this.builtinService.getConstants();this.explorerService.updatePanel({id:s,name:e.name||"Default Root Folder"})}getRootFolderIndex(e){var t;return(((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[]).findIndex(s=>s.id===e)}getCurrentRootFolderInfo(e){const t=this.getRootFolderById(e);if(!t)return{currentRootFolder:null,index:-1,tree:null};const n=this.getRootFolderIndex(t.id),r=new w4(t);return{currentRootFolder:t,index:n,tree:r}}getPosOfType(e,t){if(!t.length||e===ea.Folder||e===ea.RootFolder)return 0;const n=t.findIndex(r=>r.fileType===ea.File);return n===-1?t.length:n}add(e,t){var n,r;const s=e.fileType==="RootFolder",{autoSort:o}=this.state;if(s){this.addRootFolder(e);return}if(!t&&t!==0)throw new Error("File node or folder node both need id");const a=((n=this.state.folderTree)===null||n===void 0?void 0:n.data)||[],{tree:u,index:d}=this.getCurrentRootFolderInfo(t);if(d<=-1){Pn.error("Please check id again, there is not folder tree");return}const h=u.getHashMap(t);if(h.node.fileType===ea.File){e.location=((r=h.node.location)===null||r===void 0?void 0:r.replace(/[^\/]+$/,`${e.name}`))||"";const f=u.getNode(h.parent),p=this.getPosOfType(e.fileType,f.children||[]);u.insertNode(e,h.parent,p)}else{this.setCurrentFolderLocation(e,t);const f=this.getPosOfType(e.fileType,h.node.children||[]);u==null||u.insertNode(e,h.id,f)}a[d]=u.obj,o&&this.sortTree(a[d].children||[]),this.setState({folderTree:Object.assign(Object.assign({},this.state.folderTree),{data:Zh(a)})})}remove(e){var t;const n=Zh(this.getState().folderTree||{}),r=n.data||[],{tree:s,index:o}=this.getCurrentRootFolderInfo(e);if(!s||o===-1){Pn.error(`There is unable to find a tree node whose id is ${e}`);return}s.removeNode(e),o>-1&&(r[o]=s.obj),!((t=n.loadedKeys)===null||t===void 0)&&t.includes(e.toString())&&(n.loadedKeys=n.loadedKeys.filter(a=>a!==e.toString())),this.setState({folderTree:n})}update(e){const{id:t}=e,n=fit(e,["id"]),{autoSort:r}=this.state;if(!t&&t!==0)throw new Error("Id is required in updating data");const s=Zh(this.getState().folderTree||{}),o=s.data||[],{tree:a,index:u}=this.getCurrentRootFolderInfo(t);if(!a){Pn.error(`There is unable to find a tree node whose id is ${t}`);return}a.updateNode(t,n),u>-1&&(o[u]=a.obj,r&&this.sortTree(o[u].children||[])),this.setState({folderTree:s})}get(e){const{tree:t}=this.getCurrentRootFolderInfo(e);return t?t.getNode(e):null}setActive(e){const{folderTree:t}=this.state,n=typeof e>"u"?null:this.get(e);this.setState({folderTree:Object.assign(Object.assign({},t),{current:n})})}setEntry(e){this.setState({entry:e})}onRename(e){this.subscribe(Cs.onRename,e)}onRemove(e){this.subscribe(Cs.onDelete,e)}onUpdateFileName(e){this.subscribe(Cs.onUpdateFileName,e)}onSelectFile(e){this.subscribe(Cs.onSelectFile,e)}toggleAutoSort(){this.setState({autoSort:!this.state.autoSort})}};SS=dit([Ki(),hit("design:paramtypes",[])],SS);var git=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},pit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let m5=class extends tl{constructor(){super(),this.editorService=je.resolve(Il),this.state=this.editorService.getState()}onClose(e){this.subscribe(Ls.onClose,e)}onCloseOthers(e){this.subscribe(Ls.onCloseOthers,e)}onCloseSaved(e){this.subscribe(Ls.onCloseSaved,e)}onSelect(e){this.subscribe(Ls.onSelect,e)}onCloseAll(e){this.subscribe(Ls.onCloseAll,e)}onSaveAll(e){this.subscribe(Ls.onSaveAll,e)}onToolbarClick(e){this.subscribe(Ls.onToolbarClick,e)}onLayout(e){this.subscribe(Ls.onSplitEditorLayout,e)}onContextMenu(e){this.subscribe(Ls.onContextMenu,e)}};m5=git([Ki(),pit("design:paramtypes",[])],m5);const Ke={PANEL_PROBLEMS:"panel.problems.title",STATUS_PROBLEMS:"statusbar.problems.title",SAMPLE_FOLDER_PANEL_ID:"sidebar.explore.folders",EDITOR_PANEL_ID:"sidebar.explore.openEditor",OUTLINE_PANEL_ID:"sidebar.explore.outline",OUTLINE_PANEL_MORE_DESC:"sidebar.explore.outlineMore",EXPLORER_ACTIVITY_ITEM:"sidebar.explore.title",EXPLORER_ACTION_TITLE:"sidebar.explore.actionDesc",EXPLORER_TOGGLE_VERTICAL:"sidebar.explore.toggleVertical",EXPLORER_TOGGLE_SAVE_ALL:"sidebar.explore.saveALL",EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:"sidebar.explore.closeAllEditors",EXPLORER_TOGGLE_SAVE_GROUP:"sidebar.explore.saveGroup",EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:"sidebar.explore.closeGroupEditors",NEW_FILE_COMMAND_ID:"explorer.newFile",NEW_FOLDER_COMMAND_ID:"explorer.newFolder",COLLAPSE_COMMAND_ID:"explorer.collapse",RENAME_COMMAND_ID:"explorer.rename",REMOVE_COMMAND_ID:"explorer.remove",DELETE_COMMAND_ID:"explorer.delete",OPEN_TO_SIDE_COMMAND_ID:"explorer.openToSide",FIND_IN_WORKSPACE_ID:"filesExplorer.findInWorkspace",DOWNLOAD_COMMAND_ID:"explorer.download",EDITOR_MENU_CLOSE_TO_RIGHT:"editor.closeToRight",EDITOR_MENU_CLOSE_TO_LEFT:"editor.closeToLeft",EDITOR_MENU_CLOSE_ALL:"editor.closeAll",EDITOR_MENU_CLOSE_OTHERS:"editor.closeOthers",EDITOR_MENU_CLOSE_SAVED:"editor.closeSaved",EDITOR_MENU_CLOSE:"editor.close",EDITOR_MENU_SHOW_OPENEDITORS:"editor.showOpenEditors",EDITOR_MENU_SPILIT:"editor.split",SETTING_ID:"Setting",PROBLEM_MODEL_ID:"MO_PROBLEMS",PROBLEM_MODEL_NAME:"Problems",NOTIFICATION_CLEAR_ALL_ID:"ClearAll",NOTIFICATION_HIDE_ID:"HideNotifications",NOTIFICATION_MODEL_ID:"MO_NOTIFICATION",NOTIFICATION_MODEL_NAME:"Notification",STATUS_BAR_HIDE_ID:"hide",SEARCH_CASE_SENSITIVE_COMMAND_ID:"search.matchCase",SEARCH_WHOLE_WORD_COMMAND_ID:"search.matchWholeWord",SEARCH_REGULAR_EXPRESSION_COMMAND_ID:"search.useRegularExpression",SEARCH_PRESERVE_CASE_COMMAND_ID:"search.preserveCase",SEARCH_REPLACE_ALL_COMMAND_ID:"search.replaceAll",SEARCH_ACTIVITY_ITEM:"sidebar.search.title",SEARCH_TOOLBAR_REFRESH:"search.toolbar.refresh",SEARCH_TOOLBAR_CLEAR:"search.toolbar.clearAll",SEARCH_TOOLBAR_COLLAPSE:"search.toolbar.collapseAll",PANEL_TOOLBOX_CLOSE:"panel.toolbox.closePanel",PANEL_TOOLBOX_RESIZE:"panel.toolbox.maximize",PANEL_TOOLBOX_RESTORE_SIZE:"panel.toolbox.restoreSize",PANEL_OUTPUT:"panel.output.title",MENU_APPEARANCE_ID:"Appearance",MENU_FILE_OPEN:"openFile",MENU_QUICK_COMMAND:"editor.action.quickCommand",MENU_VIEW_MENUBAR:"workbench.action.showMenuBar",MENU_VIEW_AUXILIARY:"workbench.action.showAuxiliary",MENU_VIEW_ACTIVITYBAR:"workbench.action.showActivityBar",MENU_VIEW_STATUSBAR:"workbench.action.showStatusBar",MENU_VIEW_PANEL:"workbench.action.showPanel",ACTION_QUICK_COMMAND:"editor.action.quickCommand",ACTION_QUICK_SELECT_ALL:"editor.action.quickSelectAll",ACTION_QUICK_COPY_LINE_UP:"editor.action.copyLinesUpAction",ACTION_QUICK_UNDO:"editor.action.undo",ACTION_QUICK_REDO:"editor.action.redo",ACTION_QUICK_CREATE_FILE:"workbench.action.quickCreateFile",ACTION_QUICK_CREATE_FOLDER:"workbench.action.quickCreateFolder",ACTION_QUICK_ACCESS_SETTINGS:"workbench.action.quickAccessSettings",ACTION_SELECT_THEME:"workbench.action.selectTheme",ACTION_SELECT_LOCALE:"workbench.action.selectLocale",ACTIVITY_BAR_GLOBAL_SETTINGS:"global.menu.settings",ACTIVITY_BAR_GLOBAL_ACCOUNT:"global.menu.account",CONTEXT_MENU_MENU:"menubar",CONTEXT_MENU_EXPLORER:"sidebar.explore.title",CONTEXT_MENU_SEARCH:"sidebar.search.title",CONTEXT_MENU_HIDE:"menu.hideActivityBar",MENUBAR_MODE_HORIZONTAL:"menuBar.mode.horizontal",MENUBAR_MODE_VERTICAL:"menuBar.mode.vertical",MENUBAR_MENU_MODE_DIVIDER:"menuBar.modeDivider"},pre={builtInExplorerActivityItem:()=>({id:Ke.EXPLORER_ACTIVITY_ITEM,name:ft(Ke.EXPLORER_ACTIVITY_ITEM,"Explore"),icon:"files",title:ft(Ke.EXPLORER_ACTIVITY_ITEM,"Explore"),sortIndex:1}),builtInExplorerFolderPanel:()=>({id:Ke.SAMPLE_FOLDER_PANEL_ID,sortIndex:8,name:ft("menu.defaultProjectName","No Open Folder"),toolbar:[{id:Ke.NEW_FILE_COMMAND_ID,title:ft("menu.newFile","New File"),icon:"new-file"},{id:Ke.NEW_FOLDER_COMMAND_ID,title:ft("menu.newFolder","New Folder"),icon:"new-folder"},{id:"refresh",title:ft("sidebar.explore.refresh","Refresh Explorer"),icon:"refresh"},{id:Ke.COLLAPSE_COMMAND_ID,title:ft("sidebar.explore.collapseFolders","Collapse Folders in Explorer"),icon:"collapse-all"}],config:{grow:2}}),builtInExplorerHeaderToolbar:()=>({id:Ke.EXPLORER_ACTION_TITLE,title:ft(Ke.EXPLORER_ACTION_TITLE,"View and More Actions..."),icon:"ellipsis",contextMenu:[]}),builtInExplorerEditorPanel:()=>({id:Ke.EDITOR_PANEL_ID,sortIndex:9,name:ft(Ke.EDITOR_PANEL_ID,"OPEN EDITORS"),toolbar:[{id:Ke.EXPLORER_TOGGLE_VERTICAL,title:ft(Ke.EXPLORER_TOGGLE_VERTICAL,"Toggle Vertical"),icon:"editor-layout"},{id:Ke.EXPLORER_TOGGLE_SAVE_ALL,title:ft(Ke.EXPLORER_TOGGLE_SAVE_ALL,"Save All"),icon:"save-all"},{id:Ke.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,title:ft(Ke.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,"Close All Editors"),icon:"close-all"}],groupToolbar:[{id:Ke.EXPLORER_TOGGLE_SAVE_GROUP,title:ft(Ke.EXPLORER_TOGGLE_SAVE_GROUP,"Save Group"),icon:"save-all"},{id:Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,title:ft(Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,"Close Group Editors"),icon:"close-all"}],config:{grow:0}}),builtInExplorerOutlinePanel:()=>({id:"outline",name:ft("sidebar.explore.outline","OUTLINE"),toolbar:[{id:"outline-collapse",title:ft("toolbar.collapseAll","Collapse All"),icon:"collapse-all"},{id:"outline-more",title:ft("sidebar.explore.outlineMore","More Actions..."),icon:"ellipsis"}]}),BuiltInEditorOptions:()=>({renderWhitespace:"none",tabSize:4,fontSize:12}),builtInEditorInitialActions:()=>[{id:Ke.EDITOR_MENU_SPILIT,name:"Split Editor Right",title:ft("editor.actions.splitRight","Split Editor Right"),icon:"split-horizontal",place:"outer"},{id:Ke.EDITOR_MENU_SHOW_OPENEDITORS,name:"Show Opened Editors"},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorInitialMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE,name:ft(Ke.EDITOR_MENU_CLOSE,"Close")},{id:Ke.EDITOR_MENU_CLOSE_OTHERS,name:ft(Ke.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:Ke.EDITOR_MENU_CLOSE_TO_RIGHT,name:ft(Ke.EDITOR_MENU_CLOSE_TO_RIGHT,"Close To Right")},{id:Ke.EDITOR_MENU_CLOSE_TO_LEFT,name:ft(Ke.EDITOR_MENU_CLOSE_TO_LEFT,"Close To Left")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeHeaderContextMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE_SAVED,name:ft(Ke.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeContextMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE,name:ft(Ke.EDITOR_MENU_CLOSE,"Close")},{id:Ke.EDITOR_MENU_CLOSE_OTHERS,name:ft(Ke.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:Ke.EDITOR_MENU_CLOSE_SAVED,name:ft(Ke.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],BuiltInSettingsTab:()=>({id:Ke.SETTING_ID,name:"settings.json",data:{language:"json",value:""}}),builtInStatusProblems:()=>({id:Ke.STATUS_PROBLEMS,sortIndex:1,data:{warnings:0,errors:0,infos:0},name:"Problems"}),builtInPanelProblems:()=>({id:Ke.PANEL_PROBLEMS,name:ft(Ke.PANEL_PROBLEMS,"problems"),data:null,sortIndex:1,closable:!1}),NOTIFICATION_CLEAR_ALL:()=>({id:Ke.NOTIFICATION_CLEAR_ALL_ID,title:"Clear All Notifications",icon:"clear-all"}),NOTIFICATION_HIDE:()=>({id:Ke.NOTIFICATION_HIDE_ID,title:"Hide Notifications",icon:"chevron-down"}),builtInNotification:()=>({id:Ke.NOTIFICATION_MODEL_ID,name:Ke.NOTIFICATION_MODEL_NAME,sortIndex:1}),STATUS_EDITOR_INFO:()=>({id:"MoEditorInfo",sortIndex:2,data:{ln:0,col:0},name:"Go to Line/Column"}),CONTEXT_MENU_HIDE_STATUS_BAR:()=>({id:Ke.STATUS_BAR_HIDE_ID,name:"Hide Status Bar"}),builtInSearchActivityItem:()=>({id:Ke.SEARCH_ACTIVITY_ITEM,name:ft(Ke.SEARCH_ACTIVITY_ITEM,"Search"),title:ft(Ke.SEARCH_ACTIVITY_ITEM,"Search"),sortIndex:2,icon:"search"}),builtInHeaderToolbar:()=>[{id:Ke.SEARCH_TOOLBAR_REFRESH,title:ft(Ke.SEARCH_TOOLBAR_REFRESH,"Refresh"),disabled:!0,icon:"refresh"},{id:Ke.SEARCH_TOOLBAR_CLEAR,disabled:!0,title:ft(Ke.SEARCH_TOOLBAR_CLEAR,"Clear all"),icon:"clear-all"},{id:Ke.SEARCH_TOOLBAR_COLLAPSE,title:ft(Ke.SEARCH_TOOLBAR_COLLAPSE,"Collapse all"),disabled:!0,icon:"collapse-all"}],builtInSearchAddons:()=>[{id:Ke.SEARCH_CASE_SENSITIVE_COMMAND_ID,title:ft(Ke.SEARCH_CASE_SENSITIVE_COMMAND_ID,"Match Case"),disabled:!1,checked:!1,icon:"case-sensitive"},{id:Ke.SEARCH_WHOLE_WORD_COMMAND_ID,title:ft(Ke.SEARCH_WHOLE_WORD_COMMAND_ID,"Match Whole Word"),disabled:!1,checked:!1,icon:"whole-word"},{id:Ke.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,disabled:!1,checked:!1,title:ft(Ke.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,"Use Regular Expression"),icon:"regex"}],builtInReplaceAddons:()=>[{id:Ke.SEARCH_PRESERVE_CASE_COMMAND_ID,title:ft(Ke.SEARCH_PRESERVE_CASE_COMMAND_ID,"Preserve Case"),disabled:!1,checked:!1,icon:"preserve-case"},{id:Ke.SEARCH_REPLACE_ALL_COMMAND_ID,title:ft(Ke.SEARCH_REPLACE_ALL_COMMAND_ID,"Replace All"),disabled:!1,checked:!1,icon:"replace-all"}],builtInOutputPanel:()=>({id:Ke.PANEL_OUTPUT,name:ft(Ke.PANEL_OUTPUT,"output"),data:"",sortIndex:2,closable:!1}),builtInPanelToolboxResize:()=>({id:Ke.PANEL_TOOLBOX_RESIZE,title:ft(Ke.PANEL_TOOLBOX_RESIZE,"Maximize Panel Size"),icon:"chevron-up"}),builtInPanelToolboxReStore:()=>({id:Ke.PANEL_TOOLBOX_RESIZE,title:ft(Ke.PANEL_TOOLBOX_RESTORE_SIZE,"Restore Panel Siz"),icon:"chevron-down"}),builtInPanelToolbox:()=>({id:Ke.PANEL_TOOLBOX_CLOSE,title:ft(Ke.PANEL_TOOLBOX_CLOSE,"Close Panel"),icon:"close"}),builtInMenuBarData:()=>[{id:"File",name:ft("menu.file","File"),data:[{id:Ke.ACTION_QUICK_CREATE_FILE,name:ft("menu.newFile","New File")},{id:Ke.MENU_FILE_OPEN,name:ft("menu.open","Open")}]},{id:"Edit",name:ft("menu.edit","Edit"),data:[{id:Ke.ACTION_QUICK_UNDO,name:ft("menu.undo","Undo")},{id:Ke.ACTION_QUICK_REDO,name:ft("menu.redo","Redo")}]},{id:"Selection",name:ft("menu.selection","Selection"),data:[{id:Ke.ACTION_QUICK_SELECT_ALL,name:ft("menu.selectAll","Select All")},{id:Ke.ACTION_QUICK_COPY_LINE_UP,name:ft("menu.copyLineUp","Copy Line Up")}]},{id:"View",name:ft("menu.view","View"),data:[{id:Ke.MENU_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:"OpenView",name:ft("menu.openView","Open View")},{id:Ke.MENU_APPEARANCE_ID,name:ft("menu.appearance","Appearance"),data:[{icon:"check",id:Ke.MENU_VIEW_MENUBAR,name:ft("menu.showMenuBar","Show Menu Bar")},{icon:"check",id:zM,name:ft("menu.showSideBar","Show Side Bar")},{id:Ke.MENU_VIEW_AUXILIARY,name:ft("menu.showAuxiliaryBar","Show Auxiliary Bar")},{icon:"check",id:Ke.MENU_VIEW_STATUSBAR,name:ft("menu.showStatusBar","Show Status Bar")},{icon:"check",id:Ke.MENU_VIEW_ACTIVITYBAR,name:ft("menu.showActivityBar","Show Activity Bar")},{icon:"check",id:Ke.MENU_VIEW_PANEL,name:ft("menu.showPanel","Show Panel")},{id:Ke.MENUBAR_MENU_MODE_DIVIDER,type:"divider"},{id:Ke.MENUBAR_MODE_HORIZONTAL,name:ft("menu.menuBarHorizontal","Menu Bar Horizontal Mode")},{id:Ke.MENUBAR_MODE_VERTICAL,name:ft("menu.menuBarVertical","Menu Bar Vertical Mode")}]}]},{id:"Run",name:ft("menu.run","Run"),data:[{id:"RunTask",name:ft("menu.runTask","Run Task")}]},{id:"Help",name:ft("menu.help","Help"),data:[{id:"About",name:ft("menu.about","About")}]}],quickAcessViewAction:()=>({id:Ke.ACTION_QUICK_COMMAND}),quickSelectColorThemeAction:()=>({id:Ke.ACTION_SELECT_THEME}),quickAccessSettingsAction:()=>({id:Ke.ACTION_QUICK_ACCESS_SETTINGS}),quickSelectLocaleAction:()=>({id:Ke.ACTION_SELECT_LOCALE}),quickTogglePanelAction:()=>({id:Ke.MENU_VIEW_PANEL}),quickSelectAllAction:()=>({id:Ke.ACTION_QUICK_SELECT_ALL}),quickCopyLineUpAction:()=>({id:Ke.ACTION_QUICK_COPY_LINE_UP}),quickUndoAction:()=>({id:Ke.ACTION_QUICK_UNDO}),quickRedoAction:()=>({id:Ke.ACTION_QUICK_REDO}),quickCreateFileAction:()=>({id:Ke.ACTION_QUICK_CREATE_FILE}),COMMON_CONTEXT_MENU:()=>[{id:Ke.RENAME_COMMAND_ID,name:ft("contextmenu.rename","Rename")},{id:Ke.DELETE_COMMAND_ID,name:ft("contextmenu.delete","Delete")}],BASE_CONTEXT_MENU:()=>[{id:Ke.NEW_FILE_COMMAND_ID,name:ft("contextmenu.newFile","New File")},{id:Ke.NEW_FOLDER_COMMAND_ID,name:ft("contextmenu.newFolder","New Folder")}],ROOT_FOLDER_CONTEXT_MENU:()=>[{id:Ke.REMOVE_COMMAND_ID,name:ft("contextmenu.removeFolder","Remove Folder")}],FILE_CONTEXT_MENU:()=>[{id:Ke.OPEN_TO_SIDE_COMMAND_ID,name:ft("contextmenu.openToTheSide","Open to the Side")}],FOLDER_PANEL_CONTEXT_MENU:()=>[{id:Ke.NEW_FOLDER_COMMAND_ID,name:ft("contextmenu.addFolderToSpace","Add Folder to Workspace...")},{id:Ke.FIND_IN_WORKSPACE_ID,name:ft("contextmenu.findInSpace","Find in Workspace...")},{id:Ke.DOWNLOAD_COMMAND_ID,name:ft("contextmenu.download","Download...")}],activityBarData:()=>[{id:Ke.ACTIVITY_BAR_GLOBAL_ACCOUNT,name:ft("menu.account","Account"),title:ft("menu.account","Account"),icon:"account",type:"global"},{id:Ke.ACTIVITY_BAR_GLOBAL_SETTINGS,name:ft("menu.settings","Settings"),title:ft("menu.settings","Settings"),icon:"settings-gear",type:"global",contextMenu:[{id:Ke.ACTION_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:Ke.ACTION_QUICK_ACCESS_SETTINGS,name:ft("menu.settings","Settings")},{id:Ke.ACTION_SELECT_THEME,name:ft("menu.colorTheme","Color Theme")}]}],contextMenuData:()=>[{id:Ke.CONTEXT_MENU_MENU,name:ft("menubar","Menu"),icon:"check"},{id:Ke.CONTEXT_MENU_EXPLORER,name:ft("sidebar.explore.title","Explorer"),icon:"check"},{id:Ke.CONTEXT_MENU_SEARCH,name:ft("sidebar.search.title","Search"),icon:"check"},{id:Ke.CONTEXT_MENU_HIDE,name:ft("menu.hideActivityBar","Hide Activity Bar")}]};var mit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_it=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let zs=class{constructor(){this.builtinConstants=new Map,this.builtinModules=new Map,this.initialize()}initialize(){Object.keys(Ke).forEach(e=>{this.addConstant({id:e,value:Ke[e]})}),Object.keys(pre).forEach(e=>{this.addModules({id:e,module:pre[e]})})}addConstant(e){const t=e.id;this.builtinConstants.set(t,Object.assign(Object.assign({},e),{active:!0}))}addModules(e){const t=e.id;this.builtinModules.set(t,Object.assign(Object.assign({},e),{active:!0}))}getConstant(e){return this.builtinConstants.get(e)}getConstants(){const e={};return this.builtinConstants.forEach(t=>{t.active&&(e[t.id]=t.value)}),e}inactiveConstant(e){if(!this.builtinConstants.has(e))return Pn.error(`Can't find constant which is ${e}`),!1;const n=this.builtinConstants.get(e);return this.builtinConstants.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}inactiveModule(e){if(!this.builtinModules.has(e))return Pn.error(`Can't find module which is ${e}`),!1;const n=this.builtinModules.get(e);return this.builtinModules.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}getModule(e){const t=this.builtinModules.get(e);if(!t)return t;t.value||(t.value=t.module());const n=Object.assign({},t);return Reflect.deleteProperty(n,"module"),wr.cloneDeep(n)}getModules(){const e={};return this.builtinModules.forEach(t=>{t.active&&(t.value||(t.value=t.module()),e[t.id]=wr.cloneDeep(t.value))}),e}reset(){this.builtinModules.clear(),this.builtinConstants.clear(),this.initialize()}};zs=mit([Ki(),_it("design:paramtypes",[])],zs);var vit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let $O=class extends tl{constructor(){super(),this.state=je.resolve(__e),this.builtinService=je.resolve(zs)}setValidateInfo(e){this.setState({validationInfo:typeof e=="string"?{type:"info",text:e}:e})}setSearchValue(e){this.setState({value:e})}setReplaceValue(e){this.setState({replaceValue:e})}setResult(e){this.setState({result:e||[]})}toggleMode(e){this.setState({replaceMode:e})}toggleCaseSensitive(){const{isCaseSensitive:e}=this.state,{SEARCH_CASE_SENSITIVE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isCaseSensitive:!e}),this.updateStatus(t,!e))}toggleWholeWord(){const{isWholeWords:e}=this.state,{SEARCH_WHOLE_WORD_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isWholeWords:!e}),this.updateStatus(t,!e))}toggleRegex(){const{isRegex:e}=this.state,{SEARCH_REGULAR_EXPRESSION_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isRegex:!e}),this.updateStatus(t,!e))}togglePreserveCase(){const{preserveCase:e}=this.state,{SEARCH_PRESERVE_CASE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({preserveCase:!e}),this.updateStatus(t,!e))}updateStatus(e,t){const{replaceAddons:n=[],searchAddons:r=[]}=this.state,s=n.find(di(e))||r.find(di(e));s&&(s.checked=t,this.setState({replaceAddons:n.concat(),searchAddons:r.concat()}))}reset(){this.setState({headerToolBar:[],searchAddons:[],replaceAddons:[],result:[],value:"",replaceValue:"",replaceMode:!1,isRegex:!1,isCaseSensitive:!1,isWholeWords:!1,preserveCase:!1,validationInfo:{type:"info",text:""}})}onReplaceAll(e){this.subscribe(Wh.onReplaceAll,e)}onChange(e){this.subscribe(Wh.onChange,e)}onSearch(e){this.subscribe(Wh.onSearch,e)}onResultClick(e){this.subscribe(Wh.onResultClick,e)}};$O=vit([Ki(),bit("design:paramtypes",[])],$O);function Cit(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var L_e=Cit,wit="__lodash_hash_undefined__";function yit(i){return this.__data__.set(i,wit),this}var Sit=yit;function Lit(i){return this.__data__.has(i)}var Eit=Lit,xit=wY,Dit=Sit,Iit=Eit;function _5(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new xit;++e<t;)this.add(i[e])}_5.prototype.add=_5.prototype.push=Dit;_5.prototype.has=Iit;var Tit=_5;function kit(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var Nit=kit;function Ait(i,e){return i.has(e)}var Oit=Ait,Mit=Tit,Rit=Nit,Pit=Oit,Fit=1,Bit=2;function Wit(i,e,t,n,r,s){var o=t&Fit,a=i.length,u=e.length;if(a!=u&&!(o&&u>a))return!1;var d=s.get(i),h=s.get(e);if(d&&h)return d==e&&h==i;var f=-1,p=!0,m=t&Bit?new Mit:void 0;for(s.set(i,e),s.set(e,i);++f<a;){var v=i[f],b=e[f];if(n)var L=o?n(b,v,f,e,i,s):n(v,b,f,i,e,s);if(L!==void 0){if(L)continue;p=!1;break}if(m){if(!Rit(e,function(S,y){if(!Pit(m,y)&&(v===S||r(v,S,t,n,s)))return m.push(y)})){p=!1;break}}else if(!(v===b||r(v,b,t,n,s))){p=!1;break}}return s.delete(i),s.delete(e),p}var E_e=Wit;function Vit(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var Hit=Vit;function $it(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var zit=$it,mre=kM,_re=qfe,Uit=bY,jit=E_e,Kit=Hit,qit=zit,Git=1,Yit=2,Zit="[object Boolean]",Xit="[object Date]",Qit="[object Error]",Jit="[object Map]",ert="[object Number]",trt="[object RegExp]",nrt="[object Set]",irt="[object String]",rrt="[object Symbol]",srt="[object ArrayBuffer]",ort="[object DataView]",vre=mre?mre.prototype:void 0,TW=vre?vre.valueOf:void 0;function art(i,e,t,n,r,s,o){switch(t){case ort:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case srt:return!(i.byteLength!=e.byteLength||!s(new _re(i),new _re(e)));case Zit:case Xit:case ert:return Uit(+i,+e);case Qit:return i.name==e.name&&i.message==e.message;case trt:case irt:return i==e+"";case Jit:var a=Kit;case nrt:var u=n&Git;if(a||(a=qit),i.size!=e.size&&!u)return!1;var d=o.get(i);if(d)return d==e;n|=Yit,o.set(i,e);var h=jit(a(i),a(e),n,r,s,o);return o.delete(i),h;case rrt:if(TW)return TW.call(i)==TW.call(e)}return!1}var lrt=art,bre=Ufe,urt=1,crt=Object.prototype,drt=crt.hasOwnProperty;function hrt(i,e,t,n,r,s){var o=t&urt,a=bre(i),u=a.length,d=bre(e),h=d.length;if(u!=h&&!o)return!1;for(var f=u;f--;){var p=a[f];if(!(o?p in e:drt.call(e,p)))return!1}var m=s.get(i),v=s.get(e);if(m&&v)return m==e&&v==i;var b=!0;s.set(i,e),s.set(e,i);for(var L=o;++f<u;){p=a[f];var S=i[p],y=e[p];if(n)var E=o?n(y,S,p,e,i,s):n(S,y,p,i,e,s);if(!(E===void 0?S===y||r(S,y,t,n,s):E)){b=!1;break}L||(L=p=="constructor")}if(b&&!L){var A=i.constructor,N=e.constructor;A!=N&&"constructor"in i&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof N=="function"&&N instanceof N)&&(b=!1)}return s.delete(i),s.delete(e),b}var frt=hrt,kW=yY,grt=E_e,prt=lrt,mrt=frt,Cre=NB,wre=zp,yre=LY,_rt=Rfe,vrt=1,Sre="[object Arguments]",Lre="[object Array]",xP="[object Object]",brt=Object.prototype,Ere=brt.hasOwnProperty;function Crt(i,e,t,n,r,s){var o=wre(i),a=wre(e),u=o?Lre:Cre(i),d=a?Lre:Cre(e);u=u==Sre?xP:u,d=d==Sre?xP:d;var h=u==xP,f=d==xP,p=u==d;if(p&&yre(i)){if(!yre(e))return!1;o=!0,h=!1}if(p&&!h)return s||(s=new kW),o||_rt(i)?grt(i,e,t,n,r,s):prt(i,e,u,t,n,r,s);if(!(t&vrt)){var m=h&&Ere.call(i,"__wrapped__"),v=f&&Ere.call(e,"__wrapped__");if(m||v){var b=m?i.value():i,L=v?e.value():e;return s||(s=new kW),r(b,L,t,n,s)}}return p?(s||(s=new kW),mrt(i,e,t,n,r,s)):!1}var wrt=Crt,yrt=wrt,xre=AC;function x_e(i,e,t,n,r){return i===e?!0:i==null||e==null||!xre(i)&&!xre(e)?i!==i&&e!==e:yrt(i,e,t,n,x_e,r)}var D_e=x_e,Srt=yY,Lrt=D_e,Ert=1,xrt=2;function Drt(i,e,t,n){var r=t.length,s=r,o=!n;if(i==null)return!s;for(i=Object(i);r--;){var a=t[r];if(o&&a[2]?a[1]!==i[a[0]]:!(a[0]in i))return!1}for(;++r<s;){a=t[r];var u=a[0],d=i[u],h=a[1];if(o&&a[2]){if(d===void 0&&!(u in i))return!1}else{var f=new Srt;if(n)var p=n(d,h,u,i,e,f);if(!(p===void 0?Lrt(h,d,Ert|xrt,n,f):p))return!1}}return!0}var Irt=Drt,Trt=kC;function krt(i){return i===i&&!Trt(i)}var I_e=krt,Nrt=I_e,Art=kB;function Ort(i){for(var e=Art(i),t=e.length;t--;){var n=e[t],r=i[n];e[t]=[n,r,Nrt(r)]}return e}var Mrt=Ort;function Rrt(i,e){return function(t){return t==null?!1:t[i]===e&&(e!==void 0||i in Object(t))}}var T_e=Rrt,Prt=Irt,Frt=Mrt,Brt=T_e;function Wrt(i){var e=Frt(i);return e.length==1&&e[0][2]?Brt(e[0][0],e[0][1]):function(t){return t===i||Prt(t,i,e)}}var Vrt=Wrt,Hrt=NM,$rt=AC,zrt="[object Symbol]";function Urt(i){return typeof i=="symbol"||$rt(i)&&Hrt(i)==zrt}var bZ=Urt,jrt=zp,Krt=bZ,qrt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Grt=/^\w*$/;function Yrt(i,e){if(jrt(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Krt(i)?!0:Grt.test(i)||!qrt.test(i)||e!=null&&i in Object(e)}var CZ=Yrt,k_e=wY,Zrt="Expected a function";function wZ(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(Zrt);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=t.cache;if(s.has(r))return s.get(r);var o=i.apply(this,n);return t.cache=s.set(r,o)||s,o};return t.cache=new(wZ.Cache||k_e),t}wZ.Cache=k_e;var Xrt=wZ,Qrt=Xrt,Jrt=500;function est(i){var e=Qrt(i,function(n){return t.size===Jrt&&t.clear(),n}),t=e.cache;return e}var tst=est,nst=tst,ist=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rst=/\\(\\)?/g,sst=nst(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(ist,function(t,n,r,s){e.push(r?s.replace(rst,"$1"):n||t)}),e}),ost=sst,Dre=kM,ast=L_e,lst=zp,ust=bZ,cst=1/0,Ire=Dre?Dre.prototype:void 0,Tre=Ire?Ire.toString:void 0;function N_e(i){if(typeof i=="string")return i;if(lst(i))return ast(i,N_e)+"";if(ust(i))return Tre?Tre.call(i):"";var e=i+"";return e=="0"&&1/i==-cst?"-0":e}var dst=N_e,hst=dst;function fst(i){return i==null?"":hst(i)}var gst=fst,pst=zp,mst=CZ,_st=ost,vst=gst;function bst(i,e){return pst(i)?i:mst(i,e)?[i]:_st(vst(i))}var C7=bst,Cst=bZ,wst=1/0;function yst(i){if(typeof i=="string"||Cst(i))return i;var e=i+"";return e=="0"&&1/i==-wst?"-0":e}var UM=yst,Sst=C7,Lst=UM;function Est(i,e){e=Sst(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[Lst(e[t++])];return t&&t==n?i:void 0}var yZ=Est,xst=yZ;function Dst(i,e,t){var n=i==null?void 0:xst(i,e);return n===void 0?t:n}var Ist=Dst;function Tst(i,e){return i!=null&&e in Object(i)}var kst=Tst,Nst=C7,Ast=Mfe,Ost=zp,Mst=EY,Rst=xY,Pst=UM;function Fst(i,e,t){e=Nst(e,i);for(var n=-1,r=e.length,s=!1;++n<r;){var o=Pst(e[n]);if(!(s=i!=null&&t(i,o)))break;i=i[o]}return s||++n!=r?s:(r=i==null?0:i.length,!!r&&Rst(r)&&Mst(o,r)&&(Ost(i)||Ast(i)))}var Bst=Fst,Wst=kst,Vst=Bst;function Hst(i,e){return i!=null&&Vst(i,e,Wst)}var $st=Hst,zst=D_e,Ust=Ist,jst=$st,Kst=CZ,qst=I_e,Gst=T_e,Yst=UM,Zst=1,Xst=2;function Qst(i,e){return Kst(i)&&qst(e)?Gst(Yst(i),e):function(t){var n=Ust(t,i);return n===void 0&&n===e?jst(t,i):zst(e,n,Zst|Xst)}}var Jst=Qst;function eot(i){return i}var tot=eot;function not(i){return function(e){return e==null?void 0:e[i]}}var iot=not,rot=yZ;function sot(i){return function(e){return rot(e,i)}}var oot=sot,aot=iot,lot=oot,uot=CZ,cot=UM;function dot(i){return uot(i)?aot(cot(i)):lot(i)}var hot=dot,fot=Vrt,got=Jst,pot=tot,mot=zp,_ot=hot;function vot(i){return typeof i=="function"?i:i==null?pot:typeof i=="object"?mot(i)?got(i[0],i[1]):fot(i):_ot(i)}var bot=vot,Cot=SY,wot=C7,yot=EY,kre=kC,Sot=UM;function Lot(i,e,t,n){if(!kre(i))return i;e=wot(e,i);for(var r=-1,s=e.length,o=s-1,a=i;a!=null&&++r<s;){var u=Sot(e[r]),d=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return i;if(r!=o){var h=a[u];d=n?n(h,u,a):void 0,d===void 0&&(d=kre(h)?h:yot(e[r+1])?[]:{})}Cot(a,u,d),a=a[u]}return i}var Eot=Lot,xot=yZ,Dot=Eot,Iot=C7;function Tot(i,e,t){for(var n=-1,r=e.length,s={};++n<r;){var o=e[n],a=xot(i,o);t(a,o)&&Dot(s,Iot(o,i),a)}return s}var kot=Tot,Not=L_e,Aot=bot,Oot=kot,Mot=jfe;function Rot(i,e){if(i==null)return{};var t=Not(Mot(i),function(n){return[n]});return e=Aot(e),Oot(i,t,function(n,r){return e(n,r[0])})}var Pot=Rot;const Fot=Wp(Pot);var Bot=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Wot=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let uC=class extends tl{constructor(){super(),this.state=je.resolve(v_e),this.layoutService=je.resolve(Bu),this.builtinService=je.resolve(zs)}updateOutputProperty(e){const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=Fot(e,r=>r!==void 0);return this.update(Object.assign(this.getPanel(t),n))}get outputEditorInstance(){var e;const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=(e=this.state.data)===null||e===void 0?void 0:e.find(di(t));return n==null?void 0:n.outputEditorInstance}setActive(e){const t=this.getPanel(e);t?this.open(t):Pn.error(`There is no panel found in data via ${e}. If you want to open a brand-new panel, please use the open method`)}toggleMaximize(){const{PANEL_TOOLBOX_RESIZE:e}=this.builtinService.getConstants(),{builtInPanelToolboxResize:t,builtInPanelToolboxReStore:n}=this.builtinService.getModules(),{toolbox:r=[]}=this.state;if(t&&n){const s=r==null?void 0:r.findIndex(di(e));if(r[s]){const a=this.layoutService.togglePanelMaximized();r[s]=a?n:t}}}open(e){const{data:t=[]}=this.state;let n=wr.cloneDeep(e);const r=t.findIndex(di(n.id));r>-1?n=t[r]:this.add(n),this.setState({current:n})}getPanel(e){const{data:t=[]}=this.state;return wr.cloneDeepWith(t.find(di(e)),n=>{if(n&&typeof n=="object"&&n instanceof tO)return n})}getOutputValue(){const{PANEL_OUTPUT:e=""}=this.builtinService.getConstants(),t=this.getPanel(e);return(t==null?void 0:t.data)||""}updateOutput(e){const{title:t,name:n,sortIndex:r,active:s,closable:o,editable:a}=e;return this.updateOutputProperty({title:t,name:n,sortIndex:r,active:s,closable:o,editable:a})}appendOutput(e){var t;const n=this.getOutputValue();this.updateOutputProperty({data:n+e}),(t=this.outputEditorInstance)===null||t===void 0||t.setValue(n+e)}cleanOutput(){var e;(e=this.outputEditorInstance)===null||e===void 0||e.setValue("")}add(e){let t=this.state.data||[];const n=wr.cloneDeep(e);Array.isArray(n)?t=t.concat(n):t.push(n),this.setState({data:t})}update(e){const t=this.state.data||[],n=t==null?void 0:t.findIndex(di(e.id));if(n!==void 0&&n>-1)return Object.assign(t[n],e),this.setState({data:[...t]}),t[n];Pn.error(`There is no panel found in data via the ${e.id}`)}remove(e){const{data:t}=this.state,n=t==null?void 0:t.findIndex(di(e));if(n!==void 0&&n>-1){const r=(t==null?void 0:t.splice(n,1))||[];return this.setState({data:t}),r[0]}else{Pn.error(`There is no panel found in data via the ${e}`);return}}reset(){this.setState({data:[],current:null,toolbox:[]}),this.cleanOutput()}onTabChange(e){this.subscribe(Lp.onTabChange,e)}onToolbarClick(e){this.subscribe(Lp.onToolbarClick,e)}onTabClose(e){this.subscribe(Lp.onTabClose,e)}};uC=Bot([Ki(),Wot("design:paramtypes",[])],uC);var Vot=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Hot=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let cC=class extends kS{constructor(){super(),this.editorService=je.resolve(Il),this.localeService=je.resolve(rf),this.colorThemeService=je.resolve(oC),this.builtinService=je.resolve(zs),this.settings=this.getBuiltInSettings()}getBuiltInSettings(){const e=this.editorService.getState().editorOptions,t=this.colorThemeService.getColorTheme(),n=this.localeService.getCurrentLocale();return new b_e(t.id,e,n==null?void 0:n.id)}getDefaultSettingsTab(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();return Object.assign({},e)}onChangeSettings(e){this.subscribe(VO.OnChange,e)}update(e){this.applySettings(e);const t=wr.cloneDeep(this.settings);this.settings=SK(t,e)}append(e){this.update(e)}getSettings(){const e=this.getBuiltInSettings();return Object.assign({},this.settings,e)}applySettings(e){const t=this.settings,{colorTheme:n,locale:r,editor:s}=e;n&&n!==t.colorTheme&&this.colorThemeService.setTheme(n),r&&r!==t.locale&&this.localeService.setCurrentLocale(r),s&&!wr.isEqual(s,t.editor)&&this.editorService.updateEditorOptions(s)}openSettingsInEditor(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();e&&(e.data.value=this.flatObject2JSONString(this.getSettings()),this.editorService.open(e))}normalizeFlatObject(e){try{const t=JSON.parse(e);return Hbe(t)}catch(t){throw new Error(`SettingsService.normalizeFlatJSONObject error: ${t}`)}}flatObject(e){return Vbe(e)}flatObject2JSONString(e){return this.toJSONString(this.flatObject(e))}toJSONString(e,t=4){try{return JSON.stringify(e,null,t)}catch(n){throw new Error(`SettingsService.toJSONString error: ${n}`)}}};cC=Vot([Ki(),Hot("design:paramtypes",[])],cC);var $ot=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zot=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let LS=class extends tl{constructor(){super(),this.state=je.resolve(C_e)}toggleNotification(){const e=wr.cloneDeep(this.state);e.showNotifications=!this.state.showNotifications,this.setState(e)}update(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(di(e.id));if(n>-1){const r=t[n];return t[n]=Object.assign(r,e),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]})),t[n]}else Pn.error("There is no notification be found, please check the id")}return null}remove(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(di(e));n>-1?(t.splice(n,1),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]}))):Pn.error("There is no notification be found, please check the id")}else Pn.error("You can't remove notification because there is no notifications in data.")}add(e){const{data:t=[]}=this.state;if(e&&e.length){e.forEach(r=>{r.id===void 0&&(r.id=hae()),r.status=f5.WaitRead});const n=[...t,...e];return this.setState({data:n}),e}return null}clear(){this.setState({data:[]})}reset(){this.setState({id:"",name:"",data:[],sortIndex:1,showNotifications:!1,actionBar:[],render:void 0})}};LS=$ot([Ki(),zot("design:paramtypes",[])],LS);var Uot=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},jot=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let zO=class extends tl{constructor(){super(),this.getProblemsMarkers=e=>{let t=0,n=0,r=0;const s=o=>{o.forEach(a=>{switch(a.value.status){case Qh.Info:r+=1;break;case Qh.Error:n+=1;break;case Qh.Warning:t+=1;break}a.children&&a.children.length&&s(a.children)})};return s(e),{warnings:t,errors:n,infos:r}},this.state=je.resolve(w_e),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(zs)}toggleProblems(){this.setState(Object.assign(Object.assign({},this.state),{show:!this.state.show}))}add(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(r=>{const s=n.findIndex(di(r.id));s>-1?n.splice(s,1,r):n.push(r)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}update(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(r=>{const s=n.findIndex(di(r.id));s>-1?n.splice(s,1,r):Pn.error(`Update problems failed, because there is no problem found via ${r.id}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}remove(e){const t=Array.isArray(e)?e:[e],{data:n=[]}=this.state;t.forEach(r=>{const s=n.findIndex(di(r));s>-1?n.splice(s,1):Pn.error(`Remove problems failed, because there is no problem found via ${r}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}reset(){const{builtInStatusProblems:e}=this.builtinService.getModules();this.setState(Object.assign(Object.assign({},this.state),{data:[]})),e&&this.updateStatus(e)}onSelect(e){this.subscribe(HO.onSelect,e)}updateStatusBar(){const{data:e=[]}=this.state,t=this.getProblemsMarkers(e),{builtInStatusProblems:n}=this.builtinService.getModules();n&&this.updateStatus(Object.assign(n,{data:t}))}updateStatus(e){this.statusBarService.update(e)}};zO=Uot([Ki(),jot("design:paramtypes",[])],zO);const Kot={LoadExtensionFail:"Load Extension failed",NotFoundActivateMethod:"Not found activate function, the extension must export an activate function as entry."};var qot=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Got=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let UO=class{constructor(){this.extensions=[],this._isLoaded=!1,this.colorThemeService=je.resolve(oC),this.monacoService=je.resolve(gg),this.localeService=je.resolve(rf)}setLoaded(e){this._isLoaded=e!==void 0?e:!0}isLoaded(){return this._isLoaded}getExtension(e){return this.extensions.find(di(e))}reset(){this.extensions=[]}getAllExtensions(){return this.extensions.concat()}add(e){if(!e||(e==null?void 0:e.length)===0)return null;const t=e.filter(n=>{const r=this.extensions.find(di(n.id));return r&&Pn.warn("Warning: Unable to load the existed Extension:"+n.id),!r});return t.length>0&&(this.extensions=this.extensions.concat(t)),t}load(e){try{const t=this.add(e);if(!t)return;this.activate(t)}catch(t){Pn.error(Kot.LoadExtensionFail,t)}}loadContributes(e){Object.keys(e).forEach(n=>{switch(n){case sS.Themes:{const r=e[n];return r?this.colorThemeService.addThemes(r):void 0}case sS.Languages:{const r=e[n];return r?this.localeService.addLocales(r):void 0}}})}registerAction(e){return iUe(e)}executeCommand(e,...t){this.monacoService.commandService.executeCommand(e,...t)}activate(e){if(e.length===0)return;const t=this;e==null||e.forEach((n,r)=>{!n||this.isInactive(n)||(n.activate&&n.activate(t),n.contributes&&this.loadContributes(n.contributes))})}dispose(e){var t;const n=this,r=this.extensions.findIndex(di(e));if(r>-1){const s=this.extensions[r];(t=s.dispose)===null||t===void 0||t.call(s,n),this.extensions.splice(r,1)}}disposeAll(){this.extensions.forEach(e=>{var t;(t=e.dispose)===null||t===void 0||t.call(e,this)}),this.reset()}inactive(e){this._inactive=e}isInactive(e){return this._inactive&&typeof this._inactive=="function"?this._inactive(e):!1}splitLanguagesExts(e){const t=[],n=[];return e.forEach(r=>{var s;!((s=r.contributes)===null||s===void 0)&&s.languages?t.push(r):n.push(r)}),[t,n]}};UO=qot([Ki(),Got("design:paramtypes",[])],UO);var Yot=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Zot=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let v5=class extends la{constructor(){super(),this.editorStates=new Map,this.onClickContextMenu=(e,t,n)=>{const r=t==null?void 0:t.id,s=n==null?void 0:n.id,{current:o}=this.editorService.getState(),a=o==null?void 0:o.id,{EDITOR_MENU_CLOSE:u,EDITOR_MENU_CLOSE_OTHERS:d,EDITOR_MENU_CLOSE_ALL:h,EDITOR_MENU_CLOSE_TO_RIGHT:f,EDITOR_MENU_CLOSE_TO_LEFT:p}=this.builtinService.getConstants();switch(r){case u:{this.onCloseTab(s,a);break}case d:{this.onCloseOther(n,a);break}case h:{this.onCloseAll(a);break}case f:{this.onCloseToRight(n,a);break}case p:{this.onCloseToLeft(n,a);break}default:this.emit(qr.onActionsClick,r,o)}},this.onCloseAll=e=>{this.emit(qr.OnCloseAll,e)},this.onCloseTab=(e,t)=>{e&&t&&this.emit(qr.OnCloseTab,e,t)},this.onCloseToRight=(e,t)=>{this.emit(qr.OnCloseToRight,e,t)},this.onCloseToLeft=(e,t)=>{this.emit(qr.OnCloseToLeft,e,t)},this.onCloseOther=(e,t)=>{this.emit(qr.OnCloseOther,e,t)},this.onMoveTab=(e,t)=>{this.editorService.updateGroup(t,{data:e}),this.emit(qr.OnMoveTab,e,t)},this.onSelectTab=(e,t)=>{this.editorService.setActive(t,e),this.emit(qr.OnSelectTab,e,t)},this.onUpdateEditorIns=(e,t)=>{var n,r;if(!e)return;this.initEditorEvents(e,t),this.editorService.updateGroup(t,{editorInstance:e}),this.editorService.updateCurrentGroup({editorInstance:e});const{current:s}=this.editorService.getState(),o=s==null?void 0:s.tab;this.openTab(e,o.id.toString(),(n=o==null?void 0:o.data)===null||n===void 0?void 0:n.value,(r=o==null?void 0:o.data)===null||r===void 0?void 0:r.language),this.onEditorInstanceMount(e)},this.onClickActions=e=>{const{current:t}=this.editorService.getState();if(!t)return;const{EDITOR_MENU_CLOSE_ALL:n,EDITOR_MENU_SHOW_OPENEDITORS:r,EDITOR_MENU_SPILIT:s}=this.builtinService.getConstants();switch(e.id){case n:{this.onCloseAll(t.id);break}case r:break;case s:{this.editorService.cloneGroup();const{groupSplitPos:o}=this.layoutService.getState();this.layoutService.setGroupSplitSize(new Array(o.length+1).fill("auto")),this.emit(qr.OnSplitEditorRight);break}default:this.emit(qr.onActionsClick,e.id,t)}},this.onPaneSizeChange=e=>{this.layoutService.setGroupSplitSize(e)},this.getViewState=e=>this.editorStates.get(e),this.onChangeEditorProps=(e,t)=>{const{path:n,options:r}=t;if((e==null?void 0:e.path)!==n){const{current:s}=this.editorService.getState(),o=s==null?void 0:s.editorInstance;this.editorStates.set(e.path,o==null?void 0:o.saveViewState()),this.openTab(o,n,r==null?void 0:r.value,r==null?void 0:r.language)}},this.editorService=je.resolve(Il),this.layoutService=je.resolve(Bu),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(zs)}initView(){const{builtInEditorInitialActions:e,builtInEditorInitialMenu:t,BuiltInEditorOptions:n}=this.builtinService.getModules();if(!this.editorService.getDefaultActions().length){const o=e||[];this.editorService.setDefaultActions(o)}if(!this.editorService.getDefaultMenus().length){const o=t||[];this.editorService.setDefaultMenus(o)}this.editorService.setState({editorOptions:n||{}})}open(e,t){this.editorService.open(e,t)}initEditorEvents(e,t){e&&(e.onDidChangeModelContent(n=>{var r,s,o,a;const{current:u}=this.editorService.getState(),d=u==null?void 0:u.tab;if(!d)return;const h=(s=(r=u.editorInstance)===null||r===void 0?void 0:r.getModel())===null||s===void 0?void 0:s.uri,f=(o=e==null?void 0:e.getModel())===null||o===void 0?void 0:o.uri;if((h==null?void 0:h.path)!==(f==null?void 0:f.path))return;const p=(a=e.getModel())===null||a===void 0?void 0:a.getValue(),m=Object.assign(Object.assign({},d),{data:Object.assign(Object.assign({},d.data),{value:p})});this.editorService.updateTab(m,t),this.updateStatusBar(e),this.emit(qr.OnUpdateTab,m)}),e.onDidFocusEditorText(()=>{const n=this.editorService.getGroupById(t);n!=null&&n.tab.id&&(this.editorService.setActive(t,n.tab.id),this.updateEditorLineColumnInfo(e))}),e.onDidChangeCursorSelection(()=>{this.updateEditorLineColumnInfo(e)}),e.onDidBlurEditorText(()=>{var n;const{current:r}=this.editorService.getState(),s=r==null?void 0:r.tab;if(s!=null&&s.id){const o=e==null?void 0:e.saveViewState();this.editorStates.set((n=s.id)===null||n===void 0?void 0:n.toString(),o)}}))}openTab(e,t,n,r){let s=ka.getModel(u0.parse(t));s||(s=ka.createModel(n,r,u0.parse(t))),e.setModel(s);const o=this.editorStates.get(t);o&&e.restoreViewState(o),e==null||e.focus()}updateStatusBar(e){}updateEditorLineColumnInfo(e){if(e){const t=e.getPosition(),{STATUS_EDITOR_INFO:n}=this.builtinService.getModules();n&&this.statusBarService.update(Object.assign(n,{data:{ln:t==null?void 0:t.lineNumber,col:t==null?void 0:t.column}}))}}onEditorInstanceMount(e){this.emit(qr.onEditorInstanceMount,e)}};v5=Yot([Ki(),Zot("design:paramtypes",[])],v5);const Q0=Bn("editor"),Xot=gt(Q0,"group"),Qot=gt(Q0,"group-container"),Jot=gt(Q0,"group-header"),eat=gt(Q0,"group-tabs"),tat=gt(Q0,"group-actions"),pj=gt(Q0,"group-actions-item"),nat=_n(pj,"disabled"),iat=gt(Q0,"group-breadcrumb"),Nre=6;function rat(i){const e=[],t=[];return i.forEach(n=>{n.place==="outer"?e.push(n):t.push(n)}),e.length>Nre&&e.splice(0,Nre-e.length),[e,t]}function sat(i){const{actions:e=[],isActiveGroup:t,onClickActions:n}=i,[r,s]=rat(e),o=he.useRef(null),a=(h,f)=>{var p;n(f),(p=o.current)===null||p===void 0||p.dispose()},u=h=>{n(h)},d=s.length>0?re.createElement(Za,{style:{width:200},data:s,onClick:a}):re.createElement("span",{style:{padding:15,fontSize:14}},"No more actions");return re.createElement("div",{className:tat},t&&r.map(h=>re.createElement(PK,{key:h.id,overlay:h.title},re.createElement("div",{onClick:()=>!h.disabled&&u(h),className:mn(pj,h.disabled&&nat)},h.icon?typeof h.icon=="string"?re.createElement(dr,{type:h.icon}):h.icon:h.name))),!!s.length&&re.createElement(UK,{ref:o,placement:"bottom",className:pj,trigger:"click",title:"More Actions...",overlay:d},re.createElement(dr,{type:"ellipsis"})))}const oat=he.memo(sat);function aat(i){const{breadcrumbs:e=[]}=i;return re.createElement("div",{className:iat},re.createElement(ale,{role:"breadcrumb",routes:e}))}const lat=he.memo(aat);function A_e(i){var e,t;const{id:n,data:r,tab:s,currentGroup:o,group:a,actions:u=[],menu:d=[],onMoveTab:h,onCloseTab:f,onClickContextMenu:p,onChangeEditorProps:m,onSelectTab:v,onClickActions:b,editorOptions:L,onUpdateEditorIns:S}=i,y=n===(o==null?void 0:o.id),E=NS(),A=(N,V)=>{const M=(R,Y)=>{p==null||p(R,Y,V),E.hide()};E==null||E.show(cF(N),()=>re.createElement(Za,{data:d,onClick:M}))};return he.useEffect(()=>function(){E==null||E.dispose()}),re.createElement("div",{className:Xot},re.createElement("div",{className:Jot},re.createElement("div",{className:eat},re.createElement(_Y,{editable:!0,type:"card",data:r,onMoveTab:h,onSelectTab:v,onContextMenu:A,activeTab:y?s==null?void 0:s.id:"",onCloseTab:f})),re.createElement(oat,{isActiveGroup:y,actions:u,menu:d,onClickActions:b})),re.createElement(lat,{breadcrumbs:(s==null?void 0:s.breadcrumb)||[]}),re.createElement("div",{className:Qot},s!=null&&s.renderPane?typeof s.renderPane=="function"?s.renderPane(Object.assign({},s.data),s,a):s.renderPane:re.createElement(uY,{options:Object.assign(Object.assign({},L),{value:(e=s==null?void 0:s.data)===null||e===void 0?void 0:e.value,language:(t=s==null?void 0:s.data)===null||t===void 0?void 0:t.language,automaticLayout:!0}),path:s==null?void 0:s.id.toString(),editorInstanceRef:N=>{S==null||S(N,n)},onChangeEditorProps:(N,V)=>{m==null||m(N,V)}})))}const Are=he.memo(A_e);function uat({className:i}){return re.createElement("span",{style:{fontSize:0}},re.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 120 120",className:i},re.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",opacity:"0.48"},re.createElement("g",{fill:"#A2A2A2",transform:"translate(-660 -152)"},re.createElement("g",{transform:"translate(660 152)"},re.createElement("path",{d:"M59.3 96.335c4.87 0 8.817 3.954 8.817 8.832S64.169 114 59.3 114c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm-22.444-6.826a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 72.245c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 85.956 8 81.078s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zm-65.327-6.022a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 48.156c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 61.867 8 56.989s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zM80.942 35.31c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.832 8.817-8.832zm-43.284 0c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm64.525-11.242c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.948 8.832-8.817 8.832-4.87 0-8.817-3.954-8.817-8.832 0-4.879 3.947-8.833 8.817-8.833zm-85.366 0c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.947 8.832-8.817 8.832S8 37.778 8 32.9c0-4.879 3.948-8.833 8.817-8.833zm42.483 5.62a3.21 3.21 0 013.206 3.213 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212 3.21 3.21 0 013.207-3.212zm-19.238-13.65a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm38.475 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 6a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212A3.21 3.21 0 0159.3 6z"}))))))}const Mh={_isMac:sae.isMacOs(),queryGlobalKeybinding:i=>{const n=Oo.getDefaultKeybindings().filter(r=>!r.when).filter(r=>r.command===i);return n.length?n[n.length-1].keybinding:null},convertSimpleKeybindingToString:(i=[])=>i.map(e=>{const t=[];return e.altKey&&t.push(Mh._isMac?"":"Alt"),e.ctrlKey&&t.push(Mh._isMac?"":"Ctrl"),e.metaKey&&t.push(Mh._isMac?"":"Meta"),e.shiftKey&&t.push(Mh._isMac?"":"Shift"),e.keyCode&&t.push(y_e[e.keyCode]||""),t.join(Mh._isMac?"":"+")}).join(" ")},cat=()=>[{id:Ke.ACTION_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:Ke.ACTION_QUICK_ACCESS_SETTINGS,name:ft("menu.settings","Settings")},{id:Ke.ACTION_SELECT_THEME,name:ft("menu.colorTheme","Color Theme")}],dat=()=>{const[i,e]=he.useState([]);return he.useEffect(()=>{const t=cat().map(n=>{const r=Mh.queryGlobalKeybinding(n.id);if(r!=null&&r.length){const s=Mh.convertSimpleKeybindingToString(r);return Object.assign(Object.assign({},n),{keybindings:s})}return null}).filter(Boolean);e(t)},[]),i};function hat(){const i=dat();return re.createElement("div",{className:Bn("welcome")},re.createElement(uat,{className:"logo"}),re.createElement("h1",{className:"title"},"Molecule"),re.createElement("div",{className:"keybindings"},re.createElement("ul",null,i.map(e=>re.createElement("li",{className:"keys",key:e.id},re.createElement("span",null,e.name),re.createElement("span",null,e.keybindings.split("").join(" ")))))))}function SZ(i){const{onClickContextMenu:e,onCloseTab:t,onMoveTab:n,onSelectTab:r,onChangeEditorProps:s,onClickActions:o,onUpdateEditorIns:a,onPaneSizeChange:u,editor:d,layout:h}=i,{groups:f=[],current:p,entry:m=re.createElement(hat,null),editorOptions:v}=d||{},{groupSplitPos:b,editorGroupDirection:L}=h||{},S=E=>({onMoveTab:A=>n==null?void 0:n(A,E),onCloseTab:A=>t==null?void 0:t(A,E),onSelectTab:A=>r==null?void 0:r(A,E),onClickActions:o,onUpdateEditorIns:a,onChangeEditorProps:s,onClickContextMenu:e}),y=()=>f.length===1?re.createElement(Are,Object.assign({editorOptions:v,currentGroup:p,group:f[0]},f[0],S(f[0].id))):f.length>1?re.createElement(_A,{sizes:b,split:L,onChange:u},f.map((E,A)=>re.createElement(gp,{key:`group-${A}${E.id}`,minSize:"220px"},re.createElement(Are,Object.assign({editorOptions:v,currentGroup:p,group:E},E,S(E.id)))))):null;return re.createElement("div",{className:Q0},p?y():m)}he.memo(SZ);function O_e(i){const{data:e={ln:0,col:0}}=i;return re.createElement("span",null,`Ln ${e.ln}, Col ${e.col}`)}he.memo(O_e);const fat=je.resolve(Il),gat=je.resolve(Bu),pat=je.resolve(v5),mat=nl({editor:fat,layout:gat},SZ,pat),cL=Bn("sidebar"),_at=gt(cL,"pane"),vat=gt(cL,"header"),bat=gt(cL,"title"),Cat=gt(cL,"content"),wat=gt(cL,"toolbar"),M_e=he.memo(function(e){return re.createElement("header",{className:vat},re.createElement("div",{className:bat},re.createElement("h2",null,e.title)),re.createElement("div",{className:wat},e.toolbar||null))});function R_e(i){return re.createElement("div",{className:Cat},i.children)}function P_e(i){const{panes:e=[],current:t}=i,n=e==null?void 0:e.map(r=>re.createElement("div",{key:r.id,"data-id":r.id,style:{visibility:r.id===t?"visible":"hidden",zIndex:r.id===t?1:-1},className:_at},r.render?r.render():null));return re.createElement("div",{className:cL},n)}var yat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Sat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let b5=class extends la{constructor(){super(),this.onClick=e=>{console.log("onClick:",this.sidebarService)},this.sidebarService=je.resolve(pg)}initView(){}};b5=yat([Ki(),Sat("design:paramtypes",[])],b5);const Lat=je.resolve(pg),Eat=je.resolve(b5),xat=nl(Lat,P_e,Eat);function Dat({className:i}){return re.createElement("img",{className:i,src:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAA
B3RJTUUH5QwPAyYJr4pYHwAAF6hJREFUeNrtnXm0VMW1xn/79L19GhUTnBAxGNfTuKKJeSsOaBxw
QF5QURzRTODwUIw4RI1RHJ5RUROcgkHFRDEaNUEBjaISUZzBDPqSOORFo0EJkmeMaIQe7qn9/uju
03WGvn243O7Tr8Neq1f3Pd236qv9naratfeuOqKqrJPOFSdtAOukubKO4A6XdQR3uKwjuMNlHcEd
Ll1pA2iFyLOl8XjmXJAtgGfpzp6uu/N62rha0vZOXybJs8VxeHqPf6Hc3LfJuZ/T4XyYNr5mS+cP
0UZPBcrEGsAoKJ9idfGQtKG1QjqfYJWNCQxSUiYa3SRtaK2QzicYfRyjZVIVUAXEoM4TaSNrhXQ+
wca9AHGWoFqZfx0P0e/ovt3/nTa0VkjHG1kAAhke7xkBOpQus1j3dv+UNqaWtf1fgeB/Zen8Ifpf
XNYR3OHSlp4sgS6eL56H4WugWXDmMbD7At2Rj1PH9mDpi3jmKpQdUX0NuqboYV3PpI2rLt52nIPl
+dI1GHOmv35VQGSu7pk9PFVcv8hvjef8DjUb1NbWThFlFz0i+7s0sdWTthui5Td0Y/SUALkKeHqY
PMuwVMEZTkB1A1QAARUwJgs6KWW11ZW2Ixj4BEbdgGvRl9JmqSIzMri8nrZeZaIHp4qrF2k7gnUn
3kPkldoQKFUP1N8pdf8hXXSyqNx7odaLAaOL0sVVX9qOYABUjgP+VvM+yT9BJug+5FPFdVj2LkTu
8l2e5cDFfDZzZ6StsnrSlkYWgLzAxqwqHoAjLt3dj+nuLEsbk49tTs8eeLojGXlND+9qa5922xK8
TvpH+rQOliU9+6LekagMR3UIkAf+gsgCNHu3fom/pN2w/28id7EV+eKxqI5C2ArVHCrLUZageq9O
zPVppFijHiyLi59F9SaUvev/SIqITGeT7im6DYW0FdfuIg/j8m7hcpTJGM0CBA3Mih0iPIXjnKwn
Zl9do/KTEiyLe0ai5j5UN0xY9PMMzB6kn+cfaSuxXUXuYhD5/EMouwfIrL6q4vsE5EPgCJ3kPpa4
jiQEy5Li9ngsBh24Ri1QHmMP98sKXtrKbDeR2WT4qPAIysjaaoFeyKXq0fsIR3bTk7KvJKkn2TLJ
cOsakVu7C0fyTOnkdFXZpvJR4WSMjqwstcpSXhLWPvtZKNbL6EA8c2vSahr2YHmucBDwYGLgRoMg
lRXs7W6p0JOmPmV+4TMUdQvIvaRj+SBVLIvo4vX8MpSaZ85U3uPm3+p1tXUrB+tk96FGdTXuwSJH
J0YevgPLMpine0akoUgAeZ4Bcn9xLgX+iMoTmMI7Mqf09bTwAPBGfkSZ3EoCYJjcck+NmY+l1rPR
RLwkGKL1S71/Ta3SKtDw0ILpvYxmyor8hRgda3me1kf1RzK38JnUMOHsUeuRFQkPxeFrhuDcbCSR
ThMQLFvU/SrOMAiAqN6FWr+MZovKwTV81WHPZOlxRqWGyeiQgK7qkRqePW2ihUQ6TWJklaJKC7/U
AqDWMFIZrr2YMlomsroW9am8G0C9VelhohQY5ewhOtxRAsaWredkOm1MsPJOnesWKInOE0HL8B3S
EpXbI3Oa8He6c8kNx/4Wr6KPOHLjXtXvsfXM20mqauyqdGQhRncIgqj2CFuR9nW7pyg4zsJG1chC
BtOTH4ORL6C6GY58iJE3cJivX16LbInDu29kjm6Ep+cAGwK/x8n8px7G3/papMxmAKsKB6DsCToU
HA8174A8zo7uk7pTg96lstDXWUB/1ueITkPXRB5PhLXxMqm0C5gX/DstAiB0LXJdXtX9s9vXLX8h
g+kpXIrK8ahmov+vIM5zOHKWju5e3GdSQHiYgTq67xvOZBFdLC2chtEpKBvFLmWQZaAX6om523ot
68bCK6h+ti6xcXqwVyiZzK56evevGmJO5Ml6tngvqkckAhC+0zJyqO7rPhBb7oLSTnje/SBDI72/
FgsuF6aOh+iZOsad3leC1kZkNhvxcWE2sJ+fZVLvpi7//TMG5Y7To1gdW96NhUPw9P7a7+voL3Ct
SrLcp99yj0yCO5knK5c9GeXNQKMijQsBKbvVZtQl91G2wegvQYYGFSR2QyrlCajJYPiBzMuf0E+c
JRaZTZaP8w+gGiLXsjeiRtE43i/8RPxGBEUnuQ+AzKj9v1WW0WD5VK8JqLyJuom9g4kI1p14jy53
FCqv1RqgITA2OAFhJhn39FiFgaCFn6E6qLw+tRrjN8SqI3AnOzPkwcK2LeQXVuX/C2UP/6azbZHA
jUlYF0dyc+GkuuV+zj0dZWZ0RBT7RqnpR+Q1HEbpWbyXFHrilB3dnddZP7sbcC0ixVqPDTVM5C0c
+Yru756k+9RxTz5SHIfhi8G1abhCaoT7v9FyFmNJLmsSlRGROxmCyhk+FvuGDrhkbc+Tdd3T/5LZ
DIjV6T706Gm5kxDnK6i8FV37avXmLoJcywbubnqmu0YnE/Qpo0OeZlN6SmPADEcZArIaw1JEF/BJ
d1EjK1IeLszH6Oi6c27AoLB6b+1zkW53Ez2Ej5rAaRDrbYXTUL2+fEOH5t7asqsXKxhwnMN0UnZe
r/XMpJvVhX1QRqE6DGQAhuWILqE79wudzP/2CX+rU3YEHOYXV6GV1NiwdegrpqpMS7FIrUc7HKyH
N3a2rzXeHxceQHWMf6FuMCB0AwTUKj/Ub7qntlTRFWn91pX5bIYxbnzvtRQX6bWVH0iFZM18qiV4
lU/5dQbwVWwHv/dqtAdXPwutwRojaexNcmsGU9xwbCkoYFyFhnFj3JagFdyA5RzGaGL+JzpUtwZr
jLQ+L/rTLAfRSHqK7/0KXTdaM7CC7tHlLcGrLK+bRhPAaeEN/L+CaRHWGGk5wbo9RVRfjK4hQ+tf
u2dX9wHZyyfJ9tmrtYaIny+/Vf+EiFcvzl/sBwgEpFJGCpLOzgaR2bE91Y8nx/Ru/yUgzgt6FEtb
glUz90ZjsmESiYmB+5+LdMU7e1qi6j4tk54o7kCRI1CGA+W8aGUpKo+i3fP0oN4zKeUBBmIKb6C6
acSYguBwTVWhtkEmo/VY95GGOO9gfSiOQTkQNVujMhB4F3gJx5mj3+h+IVF7by7MxejYMrbKxUR+
eAVxfqCnxzt8AnXcyCA+zo/F8B8YhiGSQ3U54iwB7tNzsy+vMVGsaV704wylp3gdxpT9oBqzVoWV
CJdzoHu1xpsg5bLmFceiOgdFYq1p3w9NmeiqJSvOLD0me1xDrHfkT8BwGcjmkRum5pR5DEcm64Ts
a72WdRufopD/FYbBERKr+OLW7cgfWc8drhNZWbdscPje6rNQZwroJ+pHj5x7UfcMnbJmW3iS50X/
srQzxvwC2Dxyl4bJKAN8CMc9Wg+mbmBd5pVOxTPXo+oEFFRdU0rIZSnyIBn3CD2KYt0yZ5MhX5yJ
McdHco2rKg2OBh/iME5P6H1EkBmlXVDvIWDT2F4c/lvlTVxG6Sn1PU8yk/X4R/7noAfFLwttL6GC
yrs4mTE6pfvXSQlONAfL42yFZ+ajbB5w11X9xrYfubZmPQhTuL2esx1Ax3bfAJkDEXmjljMlwSG6
3GtXIc5FHOMe2hu5AKwqTMMzx5c3Z8eMIQHsALohntwnM0tf7K1YPaX7V2TYFZXHgj7yarnW30Zn
k3V36ZVcED5YfTvQC7lKwOEDm2N65svl+a2SEpwsXPho4TGM7h/vcap8sHudnaXgOBP0kO7bey3/
N3TzVnEcno5F+ALKYAwrEf0zxnkIN3uHHk7DpYb8JL8vKo/HDvW9OSLKo8OrDHI/r0c1TtKX6T0j
wBuHslcl38wDeQflCXB+qmd0/7ZhGd8rjUe9WY3jwSFHjwqILNSL3JH9QrA82rMvxitnD/Q2V9aL
54osZay7dW/zcX+J3J5/DhPaBlKVyHKM4PcGIDNBJ/V+M/YLTnC4Kv8mRof5V6pTE2Ed19GtI/vp
RY03pCXIyfKOKb9Xe2mlUvsVXs8Gh+5hzO1petqs3MGwMrkEh85IGM8mN/ydOabZOAG4qudLGIbV
1vc2BolOffY1/10SYU1AsIyoVUjQu2Ssz9U7KxLeA9Ts3bCetRWvNCJ2PRoOCBDzXS3nuPk4AejZ
OzCPB262kC7DS8jadyOS1NSYYKNDgxVWAdgVYvVsQte1UkazRbcIKoGg18nHQmjEsf/W9eRGBjUf
qgyNEBZ2fdYl3Cc7kU4TBBsqfuOAgVVnfghf80MtLRCvqgzr3c/nIp5QYt4HtACwMcHpTHrRX6Qt
/veJcCbJi14WcPb7xkDM3Gsrzx5iWpEX7YQcAPFDcO/kIqt0Qgs2pklmWdSZYc/HEj/1aYD8RA6P
BJvP9MlajjMEh5SY+QLrd7U8qiebrjSyT9bvqRJ/3X6V91Ytaj5OwHiLIn6DcCeq6q/mOArrP5FO
E8zBmbuDBYdMdhPTo30lKiBvcWRX0yM/ehxvozwTsErjLOe4nXx+IXJ3s3ECMGXAYoy8FdCfWvaL
f9NVdRzSf7knJ8LakGAd0/UkyoKa0mIMGAiZ8RZIlQtasQYGINM1pVZ/TMQnzpip4XyZLbItIVjB
IHph1Nq3AyzVH4d7N4As0Km5furBALgnIqyIzAcVtCEXJTXjwblHx2V/2gqlAegJXU8h8n1fMZZG
fdKrf/vXFVQ+xnG+msSL1W9YL8zdCdwT76K0e3ZFn7U88RU45sSk9STLiz6UtxFnNKrLAtZddF6o
gROZh2SPb5XCfDnJ/Q4qN9VfClX+9m0K5wMcxurkFJ7hsGHueIR50aWSNaUEDFZdRlfXaL1sQKKN
Z7Cm4cI5DEHz00COjQ/zCSDvY/RSjnWvt8yulovcVPo6nncFSm3nhK208q/mI5yhp6X3DAcB4aLC
6WAuRGWjWP8zjoLejeTO1ssb++QD5fcp4D+7sB0ih6M6HGQIalajLEWcBQzMPrA2G7z6VXmzyPHP
4kGgo4GtMWYgOCsw+iKZzFyd3P1i2hh9rJewIV7+EAyjUIaBlvOiySxB9D6d6v5Pn8ptl6MMBRxm
lU5GzWiMfojDj/W4XKItkqlhnk2WP60+E5UR4KxAZLqe3ziS1FKMbUPwbflZGMYDVKJQisqxemL2
Z2lji8ULwuX5BcBIa37vIdO1v07peiptfFVpi+OE5c7CdhjGBxPaVDA6NW1sdeXKwv745PoTfBem
57tpQ7OlLQimxLY16zZgQX5aFrXng0PoYduAO7HmB2jtzscG0h4EG/f3qJjIEkZ4ue4OxbQlk3kp
EM+F6rKr9cutXqQtCNYT+AuOTA16xySPo2ekja0u5vO6nke5PeC+FVaCfDttbLb0bZk0hyGsLhyK
VM6LVlYjLEVZwMbuYzq6b8cIyy2F0cDoyqmqd+rE3tNZG5Y3mwxv5/cGORDD1pTP21yByIuoztOz
c2+utQIvLR6N8UZAZgVkb9WL6VPkTKbjsqwwEs+MQpxhGAaALgdZguvev6brX7/cNXJ03MUgKFyK
YSJoNxD1ZAnvQOYC/Ubzc5t6xXp94WAM0zC6nY8zGGBQ4C66c+fqmek+LkDOLY1Hey5D2TKI1Xdf
lhCZSda9UK9Ys+OZk+dFzy5sR5EHUd2mcsXyYNl/V9+dWXwhO7HhkULNUNh1+al4el4kMR/iD0vN
ZMbqt/t+gk+fcc6km9fzM1GdEJ88QfDGFHkdlYP1OvePSetIlhc9l80o6IIyuXGbxgjmD5WzPibw
u8INLVfatcUL8PS8YAZKTMZEbXkzmB7zsFyRwtmVr+dvQJkQrz9Lz+LreBvQBXIOiZ8flczIWl24
GWRYMOSmQWJtZVL53tOJ8qNiyx5HJ9eWdkX1u4FdiDauyOk1foz1kyh39Zak3+9Yzy0ejjIxEIEL
hGMtvdpBf0+HUVh9c9J6GhIs95SG41VOa62XIWFnfNhKLGt3assU55nL8YwEwoP22ZmR+KvVBmN2
4vJiorOn1lYEBGOmBiJwsflkMXgBVMbKqaXhSepq3INL5quRCm0S/cfPhdaDtS0i23FLaeemK+06
hgD7B0aQKu6AnVD9Ljaf+6vNxgnA2aWdUd2uVzyBeDAx8feeRFiTDNH7R3tmaAisKrReDNbofk1X
mlfcB1PpveGztnx8oYSEiEJbgBNAdL/gvEt0+ohkoGgoL04SYU1C8JbR3hvTYyPgqH0vumXTleZp
DadtMduZin5GCgStVh/rQJlOwqfKrIUYb8uoB8zCFNFlzHZSkh3s0tjPa6QLNZZCCPXeagYHUfO+
+m5a4E92pAsvfPNZRPsn5YQ2cgEBf/L7LcCq0hWcQuxRxv+RpUPbWPR1mkmklsZgdFlwuJDgHRYM
DoReUjXz/9p0pZlqHb1Y0IEebpHrL0ecvF7M+03Hqvw1urys4vJ/Q+yI6OuURDpNcqT/s7UKbYWE
nRzE9N6qoWWa/wh0Mc9E9vIEjh60FGq/7JRfT59rOk4Ah2cCy8sw2ZEVSZz+eTZZVY3E6M/jc42t
90iqbOC377J97ulm60zPcd9And8G15JWjwjs6wlkKdrTTWuSCzbMPQ28G2us1tuDbRO/Blgb50Uf
7z4MlTs7PGyEt4TEARO5pGUhP+HCiNWsElzGqf2d2obYn8m4s1oBUy+mB5xLAj00fM5WnLFaI/c5
vanxITSQ1JPlOCdgZGVk2IidIyywIo+wiXtLK5QGoOe585HMrYGh18epoffA90UM4/XiBsdD9Kfs
6d6COI/EEhjeJqD2NVkJTuIzs5PlRU/IvoboWMT5IFBh2Btkf4an6HKPaWUyOQDbZichzpyoW9Uy
Dv3T8wCVPMZ8TS/LNd9OsHV6FB7ruceAPBXrHbQ7Sk2n5Rzum5OHUZOfF31ibhFduqv/QInAlzYQ
yaNcSXduZG/HBzVRcUUucI9E5ByQlYFdeYEN6oDya7oye+llA2a3GieAXslKdsyNBLkSU3l8fcCG
oEauyEIcZ1e9MbdoTeroW8B/Zs+eGO9I0OGYynnRsBRYgOPeoyf3Lb4q1xQ+Q/lpnB+yfu4hnbR2
j6aVK9iYUuFoDAeiVsBfeRGROVziLrAnnD7V8e3Sv2PMXhizgk8MeFAvpk/PY5JJDMWsPgZkFDAM
rQT8HZagcq/e3LcRpn3SZq/JH4+RmzDaXRlWl9OVGaVnZ/+QNra6mM/KT8FwKZVnGKD8CSe3r16T
bgKBLW2RkyXT2AyPGyxyARmCZ25MG1tdzOcUP4fyXcDyf+u2mPz308ZmS1sQjBZ2Ru3DE6qOB3Zr
27RZo3ug6sRkX+yVNjRb2oPgjLM8egIdILzXtmmznnWOdCDwoqmdDR0n7UHwt7pfQpyFUR+3XJ02
tLryb+6j4LwcE89tK8xtQbCCIu5hoNNBXgf9LY5zCue5baWsAObJFOh29wOZBfImqotRxun0AW21
l6ptrOimNfD84vY4Wj4v2shAVFaAvsiA3Hy9ON1Hvbek/Z1KsFxQ2g31pmHYI/asR6SAyA9Zz720
k4nuSIJlSuF0jF4NlaB4vfztssP8DRxnjF6VfTVt3E3RRacRLOcXJqFmRmwudN1jhWU5mtulnRwU
/SVtYWT1l8hFxR2AH9QNtUXirn48dgiavzNt/M2QjiKYHm8qxnRFemogwGBnT9hpSLqPnFU4MO0m
9Ld0DMFyPhtj5KDIDobwoZ7ho3mr1xTo0fFpt6O/pT3dgH0RLe6HaiY454bi1ZGEvIjxdUDazehv
6ZgeDN6w4A6Z8AGeWHlZ1vXq53LPHiSXsEHaLelP6RyCjeSC/mxrKA4My4Rys6xrRuEjcmk3pT+l
g4boyg54tQ0su7fGDdehIRpKTOPvaTelP6WDerCzOJAnFt4fHH7uYHiLSDmb8YW1zfBoN+kYgnVa
9hWQVwPDsp+0Zi+TQmmpwSzRe9NuR39LxxBcFr0ksj85PN/aa+Gg/JVN3Zlpt6C/pbMIvnrAzxHm
RreQQuz+5loqrUGdiX1NmGtn6SiCFZTMgK+jUj4N3e61sQn7CioeKt/UGe5DaeNvhnQUwQD6fT5m
h9wB4EwDqexUsHsv9l6kP5OR0TrDvSlt3M2SjosmBRo3Ob81MB6jBwJbgwxEWYHqizgyh81y97R0
u0oaOuhkgtdJBw7R6yQo6wjucFlHcIfLOoI7XNYR3OHyf7iqrvn/gHCwAAAAJXRFWHRkYXRlOmNy
ZWF0ZQAyMDIxLTEyLTE0VDE5OjM4OjA5KzA4OjAwmXMYFgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAy
MS0xMi0xNFQxOTozODowOSswODowMOguoKoAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAA
ABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADI2UxuiZQAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24A
MTIwdAQi7wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMTIw6QvDmQAAACB0RVh0c29mdHdh
cmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBh
Z2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxMjBNp8myAAAAF3RFWHRUaHVt
Yjo6SW1hZ2U6OldpZHRoADEyMN5Wme8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/
slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYzOTQ4MTg4ObVTMPUAAAASdEVYdFRodW1iOjpTaXpl
ADc2MjBCQiI6F3sAAABGdEVYdFRodW1iOjpVUkkAZmlsZTovLy9hcHAvdG1wL2ltYWdlbGMvaW1n
dmlldzJfOV8xNjM4ODQ4MDI1NDI2MTE4Ml8zOF9bMF0TNSl1AAAAAElFTkSuQmCC`})}const Iat=Bn("menuBar"),O4=_n(Iat,"horizontal"),F_e=gt(O4,"logo"),Tat=gt(F_e,"content");function kat(i){const{data:e,onClick:t,logo:n}=i,r=he.useRef(null),[s,o]=he.useState(!1),a=h=>{var f;const m=h.target.closest("li"),v=(f=m==null?void 0:m.parentElement)===null||f===void 0?void 0:f.parentElement;return!!v&&v.classList.contains(O4)};he.useEffect(()=>{const h=document.getElementsByClassName(O4)[0],f=m=>{var v,b;const L=a(m),S=m.target;if(L)s&&((b=(v=r.current)===null||v===void 0?void 0:v.dispose)===null||b===void 0||b.call(v)),setTimeout(()=>o(!s));else{const y=S.closest("li"),E=y&&h.contains(y)&&!(y!=null&&y.dataset.submenu);(!y||E)&&o(!1)}},p=m=>{if(!s)return;const v=m.target;h.contains(v)||o(!1)};return document.addEventListener("click",p),h==null||h.addEventListener("click",f),()=>{document.removeEventListener("click",p),h==null||h.removeEventListener("click",f)}},[s]);const u=s?"hover":"click",d=(h,f)=>{t==null||t(h,f),r.current.dispose()};return re.createElement("div",{className:O4},re.createElement("div",{className:F_e},n||re.createElement(Dat,{className:Tat})),re.createElement(Za,{ref:r,role:"menu",mode:p0.Horizontal,trigger:u,onClick:d,style:{width:"100%"},data:e}))}const B_e=Bn("menuBar"),Nat=gt(B_e,"action");function W_e(i){const{data:e,mode:t=qa.vertical,onClick:n,updateFocusinEle:r,logo:s}=i,o=he.useRef(null),a=(f=[])=>{const p=f.concat(),m=[...p];for(;m.length;){const v=m.pop();if(v)if(v!=null&&v.data)m.push(...v.data);else{const b=Mh.queryGlobalKeybinding(v.id)||[];b.length&&(v.keybinding=Mh.convertSimpleKeybindingToString(b))}}return p},u=(f,p)=>{n==null||n(f,p),o.current.dispose()},d=re.createElement(Za,{role:"menu",onClick:u,style:{width:200},data:a(e)}),h=he.useCallback(f=>{r==null||r(f.target)},[]);return he.useEffect(()=>(document.body.addEventListener("focusin",h),()=>{document.body.removeEventListener("focusin",h)}),[]),t===qa.horizontal?re.createElement(kat,{data:a(e),onClick:n,logo:s}):re.createElement("div",{className:B_e},re.createElement(UK,{ref:o,trigger:"click",className:Nat,placement:"right",overlay:d},re.createElement(dr,{type:"menu"})))}class Vh extends rd{constructor(){super({id:Vh.ID,label:Vh.LABEL,title:Vh.LABEL,category:Xfe.View,alias:"Toggle Side Bar",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(el.CtrlCmd|an.KeyB)}}),this.layoutService=je.resolve(Bu),this.activityBarService=je.resolve(mg),this.menuBarService=je.resolve(P0),this.sideBarService=je.resolve(pg)}run(e,...t){const n=t[0],{selected:r}=this.activityBarService.getState(),s=this.layoutService.toggleSidebarVisibility(),o=n||this._preActivityBar;this.activityBarService.setActive(s?void 0:o),this.sideBarService.setActive(s?void 0:o),this.menuBarService.update(Vh.ID,{icon:s?"":"check"}),s&&(this._preActivityBar=r)}}Vh.ID=zM;Vh.LABEL=ft("menu.showSideBar.label","Toggle Side Bar Visibility");class Hh extends rd{constructor(){super({id:Hh.ID,label:Hh.LABEL,title:Hh.LABEL,category:Xfe.View,alias:"Toggle Panel",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(el.CtrlCmd|an.KeyJ)}}),this.layoutService=je.resolve(Bu),this.menuBarService=je.resolve(P0)}run(e){const t=this.layoutService.togglePanelVisibility();this.menuBarService.update(Hh.ID,{icon:t?"":"check"})}}Hh.ID=Ke.MENU_VIEW_PANEL;Hh.LABEL=ft("menu.showPanel.title","Toggle Panel");var Aat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Oat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let ES=class extends la{constructor(){super(),this._focusinEle=null,this._automation={},this.updateFocusinEle=e=>{(e==null?void 0:e.id)!=vZ&&(this._focusinEle=e)},this.onClick=(e,t)=>{var n,r;const s=t.id||"";this.emit(lC.onSelect,s),(r=(n=this._automation)[s])===null||r===void 0||r.call(n),this.updateActivityBarContextMenu(s)},this.createFile=()=>{const{ACTION_QUICK_CREATE_FILE:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.undo=()=>{const{ACTION_QUICK_UNDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.redo=()=>{const{ACTION_QUICK_REDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.gotoQuickCommand=()=>{const{ACTION_QUICK_COMMAND:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateActivityBar=()=>{const e=this.layoutService.toggleActivityBarVisibility(),{MENU_VIEW_ACTIVITYBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.selectAll=()=>{const{ACTION_QUICK_SELECT_ALL:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.copyLineUp=()=>{const{ACTION_QUICK_COPY_LINE_UP:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateMenuBar=()=>{const e=this.layoutService.toggleMenuBarVisibility(),{MENU_VIEW_MENUBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateMenuBarMode=e=>{this.layoutService.setMenuBarMode(e)},this.updateMenuBarDataByMode=e=>{const{builtInMenuBarData:t}=this.builtinService.getModules(),{MENUBAR_MODE_HORIZONTAL:n,MENUBAR_MODE_VERTICAL:r,MENU_APPEARANCE_ID:s}=this.builtinService.getConstants();let o=n,a=r;e===qa.vertical&&(o=r,a=n);const u=this.getMenuBarItem(t,a);this.menuBarService.remove(o),this.menuBarService.append(u,s)},this.getMenuBarItem=(e,t)=>{let n;for(n of e){if(n.id===t)return Object.assign({},n);if(Array.isArray(n.data)&&n.data.length>0){const r=this.getMenuBarItem(n.data,t);if(r)return r}}return null},this.updateStatusBar=()=>{const e=this.layoutService.toggleStatusBarVisibility(),{MENU_VIEW_STATUSBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateSideBar=()=>{this.monacoService.commandService.executeCommand(Vh.ID)},this.updateAuxiliaryBar=()=>{const e=this.layoutService.setAuxiliaryBar(n=>!n),{MENU_VIEW_AUXILIARY:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updatePanel=()=>{this.monacoService.commandService.executeCommand(Hh.ID)},this.menuBarService=je.resolve(P0),this.layoutService=je.resolve(Bu),this.monacoService=je.resolve(gg),this.builtinService=je.resolve(zs),this.activityBarService=je.resolve(mg)}initView(){const{builtInMenuBarData:e}=this.builtinService.getModules(),{ACTION_QUICK_CREATE_FILE:t,ACTION_QUICK_UNDO:n,ACTION_QUICK_REDO:r,ACTION_QUICK_SELECT_ALL:s,ACTION_QUICK_COPY_LINE_UP:o,MENU_VIEW_ACTIVITYBAR:a,MENU_VIEW_AUXILIARY:u,MENU_VIEW_MENUBAR:d,MENU_VIEW_STATUSBAR:h,MENU_QUICK_COMMAND:f,MENU_VIEW_PANEL:p,MENUBAR_MODE_HORIZONTAL:m,MENUBAR_MODE_VERTICAL:v}=this.builtinService.getConstants();if(e){const b=this.layoutService.getMenuBarMode(),L=this.getMenuBarDataByMode(b,e);this.menuBarService.setMenus(L)}[[t,()=>this.createFile()],[n,()=>this.undo()],[r,()=>this.redo()],[s,()=>this.selectAll()],[o,()=>this.copyLineUp()],[a,()=>this.updateActivityBar()],[d,()=>this.updateMenuBar()],[h,()=>this.updateStatusBar()],[f,()=>this.gotoQuickCommand()],[zM,()=>this.updateSideBar()],[u,()=>this.updateAuxiliaryBar()],[p,()=>this.updatePanel()],[m,()=>this.updateMenuBarMode(qa.horizontal)],[v,()=>this.updateMenuBarMode(qa.vertical)]].forEach(([b,L])=>{b&&(this._automation[b]=L)}),this.subscribe(lC.onChangeMode,this.updateMenuBarDataByMode)}getFilteredMenuBarData(e,t){const n=[];return Array.isArray(e)&&e.forEach(r=>{if(t.includes(r.id))return;const s=Object.assign({},r);Array.isArray(r.data)&&r.data.length>0&&(s.data=this.getFilteredMenuBarData(r.data,t)),n.push(s)}),n}getMenuBarDataByMode(e,t){const{MENUBAR_MODE_VERTICAL:n,MENUBAR_MODE_HORIZONTAL:r}=this.builtinService.getConstants(),s=[];return e===qa.horizontal?s.push(r):e===qa.vertical&&s.push(n),this.getFilteredMenuBarData(t,s)}updateActivityBarContextMenu(e){const{MENU_VIEW_MENUBAR:t,CONTEXT_MENU_MENU:n}=this.builtinService.getConstants();n&&e===t&&this.activityBarService.toggleContextMenuChecked(n)}};ES=Aat([Ki(),Oat("design:paramtypes",[])],ES);const Mat=je.resolve(P0),Rat=je.resolve(ES),Ore=nl(Mat,W_e,Rat);class h0 extends rd{constructor(){super({id:h0.ID,label:h0.LABEL,title:h0.LABEL,alias:"Color Theme",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(el.CtrlCmd|an.KeyK)}}),this.colorThemeService=je.resolve(oC)}run(e){const t=e.get(Cc),n=this.colorThemeService.getThemes(),r=this.colorThemeService.getColorTheme(),s=[...Pat(n)];let o;const a=(u,d)=>{o&&clearTimeout(o),o=window.setTimeout(()=>{o=void 0;const h=u&&u.id!==void 0?u.id:r.id;this.colorThemeService.setTheme(h)},d?0:200)};return new Promise(u=>{let d=!1;const h=s.findIndex(p=>p.id===r.id),f=t.createQuickPick();f.items=s,f.placeholder=C("themes.selectTheme","Select Color Theme (Up/Down Keys to Preview)"),f.activeItems=[s[h]],f.canSelectMany=!1,f.onDidAccept(p=>{const m=f.activeItems[0];m&&a(m,!0),d=!0,f.hide(),u()}),f.onDidChangeActive(p=>a(p[0],!1)),f.onDidHide(()=>{d||(a(r,!0),u())}),f.show()})}}h0.ID=Ke.ACTION_SELECT_THEME;h0.LABEL=C("selectTheme.label","Color Theme");function Pat(i,e){const t=s=>({id:s.id,label:s.label,description:s.description}),n=(s,o)=>{var a;return(a=s.label)===null||a===void 0?void 0:a.localeCompare(o.label)},r=i.map(t).sort(n);return r.length>0&&e&&r.unshift({type:"separator",label:e}),r}const mj=Xr.as(G0.Quickaccess);function Fat(i){Bat(i.prefix),mj.registerQuickAccessProvider(i)}function Bat(i){const e=mj.providers.findIndex(t=>t.prefix===i);e>-1&&mj.providers.splice(e,1)}var Wat=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Vf extends c_e{constructor(){super({showAlias:!1,noResultsPick:{label:C("noCommandResults","No matching commands"),commandId:""}},Vf.services.get(Nn),Vf.services.get(Sr),Vf.services.get(Tr),Vf.services.get(wg),Vf.services.get(gs)),this.editorService=je.resolve(Il)}get activeTextEditorControl(){var e;return(e=this.editorService)===null||e===void 0?void 0:e.editorInstance}static get services(){return je.resolve(gg).services}getCommandPicks(e,t){return Wat(this,void 0,void 0,function*(){return t.isCancellationRequested?[]:[...this.getCodeEditorCommandPicks(),...this.getGlobalCommandPicks(e)].map(n=>Object.assign(Object.assign({},n),{buttons:[{iconClass:"codicon codicon-gear",tooltip:C("configure keybinding","Configure Keybinding")}],trigger:()=>z1.CLOSE_PICKER}))})}getGlobalCommandPicks(e){var t;const n=[],r=ra.getMenuItems(Mt.CommandPalette);for(const s of r){let o=(typeof s.command.title=="string"?s.command.title:s.command.title.value)||s.command.id;const a=typeof s.command.category=="string"?s.command.category:(t=s.command.category)===null||t===void 0?void 0:t.value;a&&(o=C("commandWithCategory","{0}: {1}",a,o));const u=typeof s.command.title!="string"?s.command.title.original:void 0,d=a&&s.command.category&&typeof s.command.category!="string"?s.command.category.original:void 0,h=u&&a?d?`${d}: ${u}`:`${a}: ${u}`:u;n.push({commandId:s.command.id,commandAlias:h,label:zG(o)})}return n}}Vf.PREFIX=">";Fat({ctor:Vf,prefix:Vf.PREFIX,placeholder:C("commandsQuickAccessPlaceholder","Type the name of a command to run."),helpEntries:[{description:C("commandsQuickAccess","Show and Run Commands"),needsEditor:!1}]});class jM extends rd{constructor(){super({id:jM.ID,label:JA.quickCommandActionLabel,alias:"Command Palette",title:{value:C("showTriggerActions","Command Palette"),original:"Command Palette"},f1:!1,keybinding:{weight:pc.WorkbenchContrib,when:void 0,primary:el.CtrlCmd|el.Shift|an.KeyP,secondary:[an.F1]}})}run(e){e.get(Cc).quickAccess.show(Vf.PREFIX)}}jM.ID=Ke.ACTION_QUICK_COMMAND;var Vat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Hat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let C5=class extends la{constructor(){super(),this.onClick=(e,t)=>{this.emit(aC.OnClick,e,t)},this.onChange=(e,t)=>{this.emit(aC.OnChange,e,t)},this.onSelectColorTheme=()=>{this.monacoService.commandService.executeCommand(h0.ID)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{ACTION_QUICK_COMMAND:r="",ACTION_QUICK_ACCESS_SETTINGS:s="",ACTION_SELECT_THEME:o="",CONTEXT_MENU_MENU:a="",CONTEXT_MENU_EXPLORER:u="",CONTEXT_MENU_SEARCH:d="",CONTEXT_MENU_HIDE:h}=this.builtinService.getConstants();switch(n){case a:{this.menuBarController.updateMenuBar(),this.activityBarService.toggleContextMenuChecked(n);break}case u:case d:{this.activityBarService.toggleBar(n),this.activityBarService.toggleContextMenuChecked(n);break}case h:{this.menuBarController.updateActivityBar();break}case r:{this.gotoQuickCommand();break}case s:{this.settingsService.openSettingsInEditor();break}case o:{this.onSelectColorTheme();break}}},this.activityBarService=je.resolve(mg),this.settingsService=je.resolve(cC),this.monacoService=je.resolve(gg),this.menuBarController=je.resolve(ES),this.builtinService=je.resolve(zs)}initView(){const{activityBarData:e,contextMenuData:t}=this.builtinService.getModules();e&&this.activityBarService.add(e),t&&this.activityBarService.addContextMenu(t)}gotoQuickCommand(){this.monacoService.commandService.executeCommand(jM.ID)}};C5=Vat([Ki(),Hat("design:paramtypes",[])],C5);var $at=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let w5=class extends la{constructor(){super(),this.initView=()=>{},this.onClick=e=>{this.auxiliaryService.setActive(this.auxiliaryService.getState().current===e?void 0:e),this.emit(BO.onTabClick,e)},this.auxiliaryService=je.resolve(yS)}};w5=$at([Ki(),zat("design:paramtypes",[])],w5);const KM=Bn("notification"),Uat=gt(KM,"header"),jat=gt(KM,"body"),Kat=gt(KM,"item"),qat=_n(KM,"close");function V_e(i){const{data:e=[],actionBar:t=[],showNotifications:n,onActionBarClick:r,onCloseNotification:s}=i,a=e.length>0?ft("notification.title","notifications"):ft("notification.title.no","no new notifications"),u=n?"block":"none";return re.createElement("div",{className:mn(KM,dae),style:{display:u}},re.createElement("header",{className:Uat},re.createElement("span",null,a),re.createElement(eM,{data:t,onClick:r})),re.createElement("div",{className:jat},e.map(d=>re.createElement("div",{className:Kat,key:d.id},re.createElement(dr,{title:"Clear Notification",onClick:()=>s==null?void 0:s(d),className:qat,type:"close"}),typeof d.render=="function"?d.render(d):d.value))))}he.memo(V_e);const H_e=Bn("bell"),Gat=_n(H_e,"active");function Yat(i){const{data:e=[],onClick:t,showNotifications:n,id:r,actionBar:s,onActionBarClick:o,onCloseNotification:a}=i,u=he.useRef(),h=e.length>0?"bell-dot":"bell";return he.useEffect(()=>{const f=ty(`.${Bn("workbench")}`);f&&(u.current=u.current||document.createElement("div"),f.appendChild(u.current),uF(re.createElement(V_e,{id:r,data:e,actionBar:s,showNotifications:n,onActionBarClick:o,onCloseNotification:a}),u.current))},[r,e,s,n,o,a]),re.createElement(dr,{className:mn(H_e,n&&Gat),onClick:t,type:h})}const Zat=he.memo(Yat);var Xat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Qat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let _j=class extends la{constructor(){super(),this.onCloseNotification=e=>{this.notificationService.remove(e.id)},this.onClick=(e,t)=>{this.toggleNotifications()},this.onActionBarClick=(e,t)=>{const n=t.id,{NOTIFICATION_CLEAR_ALL_ID:r,NOTIFICATION_HIDE_ID:s}=this.builtinService.getConstants();n===r?this.notificationService.clear():n===s&&this.toggleNotifications()},this.notificationService=je.resolve(LS),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(zs)}toggleNotifications(){this.notificationService.toggleNotification()}initView(){const{builtInNotification:e,NOTIFICATION_CLEAR_ALL:t,NOTIFICATION_HIDE:n}=this.builtinService.getModules();if(e){const r=nl(this.notificationService,Zat),s=Object.assign(Object.assign({},e),{actionBar:[t,n].filter(Boolean),render:()=>re.createElement(r,{onClick:this.onClick,onActionBarClick:this.onActionBarClick,onCloseNotification:this.onCloseNotification})});this.notificationService.setState(Object.assign({},s)),this.statusBarService.add(s,Sp.right)}}};_j=Xat([Ki(),Qat("design:paramtypes",[])],_j);const Jat=Bn("output");function elt(i){const{id:e,data:t="",onUpdateEditorIns:n}=i;return re.createElement("div",{className:Jat},re.createElement(uY,{key:e,options:{value:t,readOnly:!0,lineDecorationsWidth:0,lineNumbers:"off",minimap:{enabled:!1},automaticLayout:!0},editorInstanceRef:r=>{n==null||n(r)}}))}var tlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},nlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let y5=class extends la{constructor(){super(),this.onTabChange=e=>{e&&this.panelService.setActive(e),this.emit(Lp.onTabChange,e)},this.onClose=e=>{e&&this.emit(Lp.onTabClose,e)},this.onToolbarClick=(e,t)=>{const{PANEL_TOOLBOX_CLOSE:n,PANEL_TOOLBOX_RESIZE:r}=this.builtinService.getConstants();t.id===n?this.monacoService.commandService.executeCommand(Hh.ID):t.id===r&&this.panelService.toggleMaximize(),this.emit(Lp.onToolbarClick,e,t)},this.panelService=je.resolve(uC),this.monacoService=je.resolve(gg),this.builtinService=je.resolve(zs)}initView(){const{builtInOutputPanel:e,builtInPanelToolbox:t,builtInPanelToolboxResize:n}=this.builtinService.getModules();if(e){const s=e;s.renderPane=o=>re.createElement(elt,Object.assign({onUpdateEditorIns:a=>{o.outputEditorInstance=a}},o)),this.panelService.add(s),this.panelService.setActive(s.id)}const r=[n,t].filter(Boolean);this.panelService.setState({toolbox:r})}};y5=tlt([Ki(),nlt("design:paramtypes",[])],y5);function ilt(i){const{data:e={errors:0,warnings:0,infos:0}}=i;return re.createElement(re.Fragment,null,re.createElement(dr,{type:"error"}),` ${e.errors} `,re.createElement(dr,{type:"warning"}),` ${e.warnings} `,re.createElement(dr,{type:"info"}),` ${e.infos}`)}const rlt=re.memo(ilt),$_e=Bn("problems"),LZ=gt($_e,"treeview"),z_e=gt(LZ,"treeNode"),slt=gt(z_e,"badge"),U_e=gt(LZ,"treeLeaf"),Mre=gt(U_e,"subInfo");function olt(i){const{data:e,onSelect:t}=i;if(!(e!=null&&e.length))return re.createElement("div",{style:{margin:"0 18px",userSelect:"none"}},ft("panel.problems.empty","No problems have been detected in the workspace."));const n=r=>{switch(r){case Qh.Error:return re.createElement(dr,{type:"error"});case Qh.Warning:return re.createElement(dr,{type:"warning"});case Qh.Info:return re.createElement(dr,{type:"info"});default:return""}};return re.createElement(KS,null,re.createElement("div",{className:$_e},re.createElement(AB,{className:LZ,data:e,renderTitle:({children:r,name:s,value:o},a,u)=>u?re.createElement("span",{className:U_e},n(o.status),re.createElement("span",null,o.message),re.createElement("span",{className:Mre},o.code),re.createElement("span",{className:Mre},"[",o.startLineNumber,","," ",o.startColumn,"]")):re.createElement("span",{className:z_e},o.code,re.createElement("span",{className:slt},r==null?void 0:r.length)),onSelect:t,onRightClick:r=>r.preventDefault()})))}const alt=he.memo(olt);var llt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ult=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let vj=class extends la{constructor(){super(),this.onClick=(e,t)=>{this.showHideProblems()},this.onSelect=e=>{this.emit(HO.onSelect,e)},this.panelService=je.resolve(uC),this.statusBarService=je.resolve(_g),this.monacoService=je.resolve(gg),this.layoutService=je.resolve(Bu),this.problemsService=je.resolve(zO),this.builtinService=je.resolve(zs)}showHideProblems(){const{panel:e}=this.layoutService.getState(),{current:t}=this.panelService.getState(),{builtInPanelProblems:n}=this.builtinService.getModules();n&&((e.hidden||(t==null?void 0:t.id)===n.id)&&this.monacoService.commandService.executeCommand(Hh.ID),this.panelService.open(n))}initView(){const{builtInStatusProblems:e,builtInPanelProblems:t}=this.builtinService.getModules();if(e&&(e.render=s=>re.createElement(rlt,Object.assign({},s)),e.onClick=this.onClick,this.statusBarService.add(e,Sp.left)),t){const s=nl(this.problemsService,alt),o=t;o.renderPane=()=>re.createElement(s,{onSelect:this.onSelect}),this.panelService.add(o),this.panelService.setActive(o.id)}const{PROBLEM_MODEL_ID:n,PROBLEM_MODEL_NAME:r}=this.builtinService.getConstants();this.problemsService.setState({id:n,name:r})}};vj=llt([Ki(),ult("design:paramtypes",[])],vj);function j_e({locale:i}){const e=he.useRef(null),t=()=>{window.location.reload()};return he.useEffect(()=>{var n;(n=e.current)===null||n===void 0||n.focus()},[]),re.createElement("div",{style:{lineHeight:"1.5"}},re.createElement("div",{style:{direction:"ltr",width:440,whiteSpace:"normal",textAlign:"left"}},re.createElement("p",{style:{fontWeight:"bold"}},ft("notification.locale.title","")),re.createElement("p",null,ft("notification.locale.description",""))),re.createElement("div",{style:{marginBottom:2}},re.createElement(vb,{ref:e,style:{width:150,margin:"0 0 0 auto"},onClick:t},ft("notification.locale.button",""))))}re.memo(j_e);var clt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},dlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let bj=class extends la{constructor(){super(),this.onChangeSettings=wr.debounce(e=>{this.settingsService.update(e),this.emit(VO.OnChange,e)},600),this.editorService=je.resolve(Il),this.settingsService=je.resolve(cC),this.localeService=je.resolve(rf),this.notificationService=je.resolve(LS),this.builtinService=je.resolve(zs)}initView(){const{SETTING_ID:e}=this.builtinService.getConstants();this.editorService.onUpdateTab(t=>{var n;if(t.id===e){const r=this.settingsService.normalizeFlatObject(((n=t.data)===null||n===void 0?void 0:n.value)||"");this.onChangeSettings(r)}}),this.localeService.onChange((t,n)=>{this.notifyLocaleChanged(t,n)})}notifyLocaleChanged(e,t){const{SETTING_ID:n}=this.builtinService.getConstants(),r={id:n,value:t,render(s){return re.createElement(j_e,{key:t.id,locale:t.name})}};this.notificationService.getState().showNotifications||this.notificationService.toggleNotification(),this.notificationService.add([r])}};bj=clt([Ki(),dlt("design:paramtypes",[])],bj);var hlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},flt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let S5=class extends la{constructor(){super(),this.onClick=(e,t)=>{this.emit(WO.onClick,e,t)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{STATUS_BAR_HIDE_ID:r}=this.builtinService.getConstants();switch(n){case r:this.menuBarController.updateStatusBar();break}},this.menuBarController=je.resolve(ES),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(zs)}initView(){const{STATUS_EDITOR_INFO:e,CONTEXT_MENU_HIDE_STATUS_BAR:t}=this.builtinService.getModules(),n=wr.cloneDeep(this.statusBarService.getState().rightItems),r=wr.cloneDeep(this.statusBarService.getState().contextMenu||[]);e&&n.push(Object.assign(Object.assign({},e),{render:s=>re.createElement(O_e,Object.assign({},s))})),t&&r.push(t),this.statusBarService.setState({rightItems:n,contextMenu:r})}};S5=hlt([Ki(),flt("design:paramtypes",[])],S5);var glt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},plt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let L5=class extends la{constructor(){super(),this.onPaneSizeChange=e=>{this.layoutService.setPaneSize(e)},this.onHorizontalPaneSizeChange=e=>{this.layoutService.setHorizontalPaneSize(e)},this.onWorkbenchDidMount=()=>{this.layoutService.emit(p5.OnWorkbenchDidMount)},this.layoutService=je.resolve(Bu)}initView(){}};L5=glt([Ki(),plt("design:paramtypes",[])],L5);const mlt=Bn(zM),_lt=Bn(tit,mlt),E5=Bn(nit),vlt=_n(E5,"input"),blt=_n(E5,"editable"),qM=Bn(iit),w7=gt(qM,"item"),Clt=gt(qM,"group"),wlt=gt(w7,"fileName"),ylt=gt(w7,"filePath"),Rre=_n(w7,"active"),Slt=gt(qM,"close"),Llt=gt(qM,"file"),Elt=i=>{const{activePanelKeys:e,data:t=[],headerToolBar:n,onClick:r,onActionsContextMenuClick:s,onCollapseChange:o,onToolbarClick:a}=i;return re.createElement("div",{className:_lt},re.createElement(M_e,{title:ft("sidebar.explore.title","Explorer"),toolbar:re.createElement(tM,{data:[n],onClick:r,onContextMenuClick:s})}),re.createElement(R_e,null,re.createElement(cle,{data:t,activePanelKeys:e,onCollapseChange:o,onToolbarClick:a})))};var xlt=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Dlt=i=>{const e=[...i];let t=!1;for(;e.length;){const n=e.pop();if(n!=null&&n.isEditable){t=!0;break}else e.push(...(n==null?void 0:n.children)||[])}return t},Ilt=re.forwardRef((i,e)=>{const t=he.useRef(null);return he.useLayoutEffect(()=>{if(t.current){const n=(i.defaultValue||"").lastIndexOf(".");t.current.selectionStart=0,t.current.selectionEnd=n>0?n:(i.defaultValue||"").length}},[]),re.createElement("input",Object.assign({},i,{ref:t}))}),Tlt=i=>{var e;const{folderTree:t={},entry:n,panel:r,onUpdateFileName:s,onSelectFile:o,onDropTree:a,onClickContextMenu:u,onRightClick:d,onLoadData:h,createTreeNode:f,onExpandKeys:p}=i,m=xlt(i,["folderTree","entry","panel","onUpdateFileName","onSelectFile","onDropTree","onClickContextMenu","onRightClick","onLoadData","createTreeNode","onExpandKeys"]),{data:v=[],folderPanelContextMenu:b=[],expandKeys:L,loadedKeys:S,current:y}=t,E=he.useRef(null),A=he.useRef(),N=XO(),V=Dlt(v),M=(z,k)=>{var K;u==null||u(k),(K=A.current)===null||K===void 0||K.hide()},R=()=>q5({anchor:ty(`.${E5}`),render:()=>re.createElement(Za,{role:"menu",onClick:M,data:b})}),Y=(z,k)=>{u==null||u(z,k),N==null||N.hide()},X=(z,k)=>{if(z.target.nodeName!=="INPUT"){z.preventDefault();const K=(d==null?void 0:d(k))||[];K.length&&(N==null||N.show(cF(z),()=>re.createElement(Za,{role:"menu",onClick:(fe,ne)=>Y(ne,k),data:K})))}},$=(z,k)=>{const K=z.value;s==null||s(Object.assign(Object.assign({},k),{name:K}))},T=(z,k)=>{$(z.target,k)},O=(z,k)=>{(z.keyCode===13||z.keyCode===27)&&$(z.target,k)},B=z=>{const{isEditable:k,name:K}=z;return k?re.createElement(Ilt,{role:"input",className:vlt,type:"text",defaultValue:K,ref:E,onKeyDown:fe=>O(fe,z),autoComplete:"off",autoFocus:!0,onBlur:fe=>T(fe,z),onClick:fe=>fe.stopPropagation()}):K},W=()=>{o==null||o()},j=(z,k)=>{a==null||a(z,k)},U=()=>{f==null||f("RootFolder")};he.useEffect(()=>(b.length>0&&(A.current=R()),()=>{var z;(z=A.current)===null||z===void 0||z.dispose()}),[v.length]);const q=re.createElement("div",{"data-content":r.id},n?re.createElement(re.Fragment,null,n):re.createElement("div",{style:{padding:"10px 5px"}},"you have not yet opened a folder",re.createElement(vb,{onClick:U},"Add Folder")));return v.length?re.createElement(KS,{isShowShadow:!0},re.createElement("div",{"data-content":r.id,style:{height:"100%"}},re.createElement(AB,Object.assign({activeKey:y==null?void 0:y.id,expandKeys:L,loadedKeys:S,data:((e=v[0])===null||e===void 0?void 0:e.children)||[],className:mn(E5,V&&blt),draggable:!V,onDropTree:j,onSelect:o,onTreeClick:W,onRightClick:X,renderTitle:B,onLoadData:h,onExpand:p},m)))):q},klt=he.memo(Tlt);var Nlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Alt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let xS=class extends la{constructor(){super(),this.getContextMenu=e=>{var t;const n=Zh(((t=this.folderTreeService.getState().folderTree)===null||t===void 0?void 0:t.contextMenu)||[]),r=this.folderTreeService.getFileContextMenu(),s=this.folderTreeService.getFolderContextMenu(),{ROOT_FOLDER_CONTEXT_MENU:o}=this.builtinService.getModules();switch(e.fileType){case ea.File:{n.unshift(...r);break}case ea.Folder:{n.unshift(...s);break}case ea.RootFolder:return s.concat(o||[])}return n},this.createTreeNode=(e,t)=>{var n;if(typeof t>"u"){const r=this.folderTreeService.getState(),{data:s,current:o}=(r==null?void 0:r.folderTree)||{},a=typeof(o==null?void 0:o.id)>"u"?(n=s==null?void 0:s[0])===null||n===void 0?void 0:n.id:o==null?void 0:o.id;this.emit(Cs.onCreate,e,a)}else this.emit(Cs.onCreate,e,t)},this.onClickContextMenu=(e,t)=>{const n=e.id,{RENAME_COMMAND_ID:r,DELETE_COMMAND_ID:s,NEW_FILE_COMMAND_ID:o,NEW_FOLDER_COMMAND_ID:a,OPEN_TO_SIDE_COMMAND_ID:u}=this.builtinService.getConstants();switch(n){case r:{const{id:d}=t;this.onRename(d);break}case s:{const{id:d}=t;this.onDelete(d);break}case o:{const{id:d}=t;this.createTreeNode(ea.File,d);break}case a:{const{id:d}=t;this.createTreeNode(ea.Folder,d);break}case u:{this.onSelectFile(t);break}default:this.onContextMenuClick(e,t)}},this.onRightClick=e=>{const t=this.getContextMenu(e);return this.emit(Cs.onRightClick,e,t),t},this.onDropTree=(e,t)=>{this.emit(Cs.onDrop,e,t)},this.onUpdateFileName=e=>{this.emit(Cs.onUpdateFileName,e)},this.onSelectFile=e=>{this.folderTreeService.setActive(e==null?void 0:e.id),e&&!e.isEditable&&e.fileType===ea.File&&this.emit(Cs.onSelectFile,e)},this.onContextMenuClick=(e,t)=>{this.emit(Cs.onContextMenuClick,e,t)},this.onRename=e=>{this.emit(Cs.onRename,e)},this.onDelete=e=>{this.emit(Cs.onDelete,e)},this.onLoadData=e=>this.count(Cs.onLoadData)?(this.folderTreeService.setLoadedKeys([...this.folderTreeService.getLoadedKeys(),e.id.toString()]),new Promise((n,r)=>{const s=o=>{this.folderTreeService.update(o),n()};this.emit(Cs.onLoadData,e,s)})):Promise.resolve(),this.onExpandKeys=e=>{this.emit(Cs.onExpandKeys,e)},this.folderTreeService=je.resolve(SS),this.builtinService=je.resolve(zs)}initView(){const{FILE_CONTEXT_MENU:e,BASE_CONTEXT_MENU:t,COMMON_CONTEXT_MENU:n,FOLDER_PANEL_CONTEXT_MENU:r}=this.builtinService.getModules();e&&this.folderTreeService.setFileContextMenu(e),t&&this.folderTreeService.setFolderContextMenu(t),this.folderTreeService.setState({folderTree:{contextMenu:n||[],current:null,folderPanelContextMenu:r||[],data:[],expandKeys:[]}})}};xS=Nlt([Ki(),Alt("design:paramtypes",[])],xS);const Olt=i=>{var e;const{current:t,groups:n,groupToolbar:r,contextMenu:s=[],headerContextMenu:o,panel:a,onSelect:u,onSaveGroup:d,onContextMenu:h,onCloseGroup:f,onClose:p,onToolbarClick:m}=i,v=he.useRef(null),b=he.useRef(null);if(he.useLayoutEffect(()=>{var R,Y,X;if((((R=b.current)===null||R===void 0?void 0:R.scrollHeight)||0)>$P-Hg){const T=(Y=v.current)===null||Y===void 0?void 0:Y.querySelector(`.${Rre}`);if(T){const O=T.offsetTop;(X=b.current)===null||X===void 0||X.scrollTo(O)}}},[(t==null?void 0:t.id)&&((e=t.tab)===null||e===void 0?void 0:e.id)]),!n||!n.length)return null;const L=NS(),S=(R,Y)=>{p==null||p(Y.id,R.id)},y=(R,Y)=>{var X;(R.id!==(t==null?void 0:t.id)||Y.id!==((X=t==null?void 0:t.tab)===null||X===void 0?void 0:X.id))&&(u==null||u(Y.id,R.id))},E=(R,Y,X)=>{L.hide(),h==null||h(R,Y.id,X)},A=(R,Y,X)=>{R.preventDefault(),L.show(cF(R),()=>re.createElement(Za,{role:"menu",onClick:($,T)=>E(T,Y,X),data:s}))},N=(R,Y)=>{R.preventDefault();const X=o||s;L.show(cF(R),()=>re.createElement(Za,{role:"menu",onClick:($,T)=>E(T,Y),data:X}))},V=(R,Y)=>{var X;const{target:$}=R,T=(X=Y.data)===null||X===void 0?void 0:X[0];$.nextElementSibling&&T&&(u==null||u(T.id,Y.id),$.nextElementSibling.focus())},M=(R,Y,X)=>{switch(R.stopPropagation(),Y.id){case Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:f==null||f(X.id);break;case Ke.EXPLORER_TOGGLE_SAVE_GROUP:d==null||d(X.id);break;default:m==null||m(Y,X.id);break}};return re.createElement(KS,{ref:b,isShowShadow:!0},re.createElement("div",{className:qM,ref:v,"data-content":a.id},n.map((R,Y)=>{var X;return re.createElement(re.Fragment,{key:Y},n.length!==1&&re.createElement("div",{className:Clt,onClick:$=>V($,R),onContextMenu:$=>N($,R),key:Y},ft("sidebar.explore.openEditor.group","Group",(Y+1).toString()),r&&re.createElement(tM,{data:r,onClick:($,T)=>M($,T,R)})),(X=R.data)===null||X===void 0?void 0:X.map($=>{var T,O,B,W,j;const U=R.id===(t==null?void 0:t.id)&&$.id===((T=t==null?void 0:t.tab)===null||T===void 0?void 0:T.id);return re.createElement("div",{title:((O=$.data)===null||O===void 0?void 0:O.path)&&`${(B=$.data)===null||B===void 0?void 0:B.path}/${$.name}`,className:mn(w7,U&&Rre),tabIndex:0,key:`${Y}_${$.id}`,onClick:()=>y(R,$),onContextMenu:q=>A(q,R,$)},re.createElement(dr,{className:Slt,onClick:()=>S(R,$),type:"close"}),re.createElement(dr,{className:Llt,type:((W=$.data)===null||W===void 0?void 0:W.icon)||$.icon}),re.createElement("span",{className:wlt},$.name),re.createElement("span",{className:ylt},(j=$.data)===null||j===void 0?void 0:j.path))}))})))},Mlt=je.resolve(SS),Rlt=je.resolve(xS),Plt=nl(Mlt,klt,Rlt);var Flt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Blt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Cj=class extends la{constructor(){super(),this.onClick=(e,t)=>{this.emit(Uc.onClick,e,t)},this.onActionsContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id;n&&this.explorerService.togglePanel(n)},this.onCollapseChange=e=>{this.emit(Uc.onCollapseChange,e)},this.onToolbarClick=(e,t)=>{var n,r,s,o;const a=e.id,{NEW_FILE_COMMAND_ID:u,NEW_FOLDER_COMMAND_ID:d,REMOVE_COMMAND_ID:h,COLLAPSE_COMMAND_ID:f,EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:p,EXPLORER_TOGGLE_SAVE_ALL:m,EXPLORER_TOGGLE_VERTICAL:v}=this.builtinService.getConstants();switch(a){case u:{(r=(n=this.folderTreeController).createTreeNode)===null||r===void 0||r.call(n,ea.File);break}case d:{(o=(s=this.folderTreeController).createTreeNode)===null||o===void 0||o.call(s,ea.Folder);break}case h:{this.emit(Uc.onRemovePanel,t);break}case f:{this.emit(Uc.onCollapseAllFolders);break}case p:{this.emit(Ls.onCloseAll);break}case m:{this.emit(Ls.onSaveAll);break}case v:{this.emit(Ls.onSplitEditorLayout);break}default:this.emit(Uc.onPanelToolbarClick,t,a)}},this.renderFolderTree=e=>re.createElement(Plt,{panel:e}),this.activityBarService=je.resolve(mg),this.sidebarService=je.resolve(pg),this.explorerService=je.resolve(Bp),this.folderTreeController=je.resolve(xS),this.builtinService=je.resolve(zs)}initView(){const e={onClick:this.onClick,onCollapseChange:this.onCollapseChange,onActionsContextMenuClick:this.onActionsContextMenuClick,onToolbarClick:this.onToolbarClick},t=nl(this.explorerService,Elt),n=this.builtinService.getConstants().EXPLORER_ACTIVITY_ITEM;if(!n)return;const r={id:n,title:"EXPLORER",render(){return re.createElement(t,Object.assign({},e))}},{builtInExplorerActivityItem:s,builtInExplorerFolderPanel:o,builtInExplorerHeaderToolbar:a}=this.builtinService.getModules();a&&this.explorerService.setState({headerToolBar:a}),s&&o&&(this.activityBarService.add(s,!0),this.sidebarService.add(r,!0),this.explorerService.addPanel(Object.assign(Object.assign({},o),{renderPanel:this.renderFolderTree})))}};Cj=Flt([Ki(),Blt("design:paramtypes",[])],Cj);var Wlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Vlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Hlt=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};let wj=class extends la{constructor(){super(),this.onContextMenu=(e,t,n)=>{const{EDITOR_MENU_CLOSE:r,EDITOR_MENU_CLOSE_OTHERS:s,EDITOR_MENU_CLOSE_SAVED:o,EDITOR_MENU_CLOSE_ALL:a}=this.builtinService.getConstants();switch(e.id){case r:this.onClose(n==null?void 0:n.id,t);break;case s:this.emit(Ls.onCloseOthers,n,t);break;case o:this.emit(Ls.onCloseSaved,t);break;case a:this.emit(Ls.onCloseAll,t);break;default:this.emit(Ls.onContextMenu,e,n,t);break}},this.onClose=(e,t)=>{this.emit(Ls.onClose,e,t)},this.onSelect=(e,t)=>{this.emit(Ls.onSelect,e,t)},this.onCloseGroup=e=>{this.emit(Ls.onCloseAll,e)},this.onSaveGroup=e=>{this.emit(Ls.onSaveAll,e)},this.onToolbarClick=(e,t)=>{this.emit(Ls.onToolbarClick,e,t)},this.editService=je.resolve(Il),this.explorerService=je.resolve(Bp),this.builtinService=je.resolve(zs)}initView(){const e=nl(this.editService,Olt),{builtInExplorerEditorPanel:t,builtInEditorTreeContextMenu:n,builtInEditorTreeHeaderContextMenu:r}=this.builtinService.getModules();if(t){const{groupToolbar:s}=t,o=Hlt(t,["groupToolbar"]),a=n||[],u=r||[];this.explorerService.addPanel(Object.assign(Object.assign({},o),{renderPanel:d=>re.createElement(e,{panel:d,contextMenu:a,headerContextMenu:u,groupToolbar:s,onClose:this.onClose,onSelect:this.onSelect,onCloseGroup:this.onCloseGroup,onSaveGroup:this.onSaveGroup,onContextMenu:this.onContextMenu,onToolbarClick:this.onToolbarClick})}))}}};wj=Wlt([Ki(),Vlt("design:paramtypes",[])],wj);var $lt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let yj=class extends la{constructor(){super(),this.onClick=e=>{},this.explorerService=je.resolve(Bp),this.builtinService=je.resolve(zs)}initView(){const{builtInExplorerOutlinePanel:e}=this.builtinService.getModules();e&&this.explorerService.addPanel(e)}};yj=$lt([Ki(),zlt("design:paramtypes",[])],yj);const Ult=_n(gt(Bn("search"),"treeNode"),"empty"),jlt=_n(gt(Bn("search"),"treeNode"),"match"),Klt=_n(gt(Bn("search"),"treeNode"),"delete"),qlt=_n(gt(Bn("search"),"treeNode"),"replace"),Glt=gt(Bn("search"),"tree"),Ylt=i=>{const{data:e=[],onSelect:t,renderTitle:n}=i;return re.createElement(AB,{draggable:!1,className:Glt,data:e,renderTitle:n,onSelect:t,onRightClick:r=>r.preventDefault()})},Zlt=he.memo(Ylt),Xlt=({value:i="",replaceValue:e,searchAddons:t,replaceAddons:n,validationInfo:r,headerToolBar:s,result:o,toggleAddon:a,onResultClick:u,validateValue:d,setValidateInfo:h,onSearch:f,getSearchIndex:p,setSearchValue:m,setReplaceValue:v,onChange:b,toggleMode:L})=>{const S=(M,R)=>{console.log("onClick:",M,R)},y=(M=[])=>{const[R,Y]=M;m==null||m(R),v==null||v(Y),b==null||b(R||"",Y||"")},E=M=>{L==null||L(M)},A=(M,R,Y)=>{const{name:X=""}=M;if(!Y)return X;const $=p?p(X,i):-1,T=X.substr(0,$),O=X.substr($,i.length),B=X.substr($+i.length);return $>-1?re.createElement("span",null,T,re.createElement("span",{className:mn(jlt,e&&Klt)},O),e&&re.createElement("span",{className:qlt},e),B):X},N=(M=[])=>{const[R,Y]=M;d==null||d(R||"",X=>{X?h==null||h({type:"error",text:X.message}):f==null||f(R||"",Y||"")})},V=M=>{M.isLeaf&&(u==null||u(M,o))};return re.createElement("div",{className:Bn("search-pane","sidebar")},re.createElement(M_e,{title:ft("sidebar.search.title","Search"),toolbar:re.createElement(tM,{data:s||[],onClick:S})}),re.createElement(R_e,null,re.createElement(sfe,{values:[i,e],addons:[t,n],validationInfo:r,onChange:y,onSearch:N,onAddonClick:a,onButtonClick:E}),i&&o.length===0?re.createElement("div",{className:Ult},""):re.createElement(Zlt,{data:o,renderTitle:A,onSelect:V})))};var Qlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Jlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Sj=class extends la{constructor(){super(),this.validateValue=(e,t)=>{const{isRegex:n}=this.searchService.getState();if(n)try{return new RegExp(e),t()}catch(r){if(r instanceof Error)return t(r)}return t()},this.getSearchIndex=(e,t="")=>{let n=-1;const{isCaseSensitive:r,isWholeWords:s,isRegex:o}=this.searchService.getState(),a=r,u=s,d=r&&s,h=!r&&!s;try{if(o)a&&(n=e.search(new RegExp(t))),u&&(n=e.search(new RegExp("\\b"+t+"\\b","i"))),d&&(n=e.search(new RegExp("\\b"+t+"\\b"))),h&&(n=e.toLowerCase().search(new RegExp(t,"i")));else{if(a&&(n=e.indexOf(t)),u){const f=new RegExp("\\b"+(t==null?void 0:t.toLowerCase())+"\\b");n=e.toLowerCase().search(f)}d&&(n=e.search(new RegExp("\\b"+t+"\\b"))),h&&(n=e.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))}}catch(f){console.error(f)}return n},this.setValidateInfo=e=>{this.searchService.setValidateInfo(e)},this.setSearchValue=e=>{this.searchService.setSearchValue(e)},this.setReplaceValue=e=>{this.searchService.setReplaceValue(e)},this.toggleAddon=e=>{const t=e==null?void 0:e.id,{SEARCH_CASE_SENSITIVE_COMMAND_ID:n,SEARCH_WHOLE_WORD_COMMAND_ID:r,SEARCH_REGULAR_EXPRESSION_COMMAND_ID:s,SEARCH_PRESERVE_CASE_COMMAND_ID:o,SEARCH_REPLACE_ALL_COMMAND_ID:a}=this.builtinService.getConstants();switch(t){case n:{this.searchService.toggleCaseSensitive();break}case r:{this.searchService.toggleWholeWord();break}case s:{this.searchService.toggleRegex();break}case o:{this.searchService.togglePreserveCase();break}case a:{this.emit(Wh.onReplaceAll);break}default:console.log("no addon")}},this.toggleMode=e=>{this.searchService.toggleMode(e)},this.onChange=(e="",t="")=>{this.emit(Wh.onChange,e,t)},this.onSearch=(e="",t="")=>{const{isRegex:n,isCaseSensitive:r,isWholeWords:s,preserveCase:o}=this.searchService.getState();this.emit(Wh.onSearch,e,t,{isRegex:n,isCaseSensitive:r,isWholeWords:s,preserveCase:o})},this.onResultClick=(e,t)=>{this.emit(Wh.onResultClick,e,t)},this.activityBarService=je.resolve(mg),this.sidebarService=je.resolve(pg),this.searchService=je.resolve($O),this.builtinService=je.resolve(zs)}initView(){const{builtInSearchActivityItem:e,builtInHeaderToolbar:t,builtInSearchAddons:n,builtInReplaceAddons:r}=this.builtinService.getModules();if(e){const s=nl(this.searchService,Xlt,this),o={id:e.id,title:"SEARCH",render(){return re.createElement(s,null)}};this.searchService.setState({headerToolBar:t||[],searchAddons:n||[],replaceAddons:r||[]}),this.sidebarService.add(o),this.activityBarService.add(e)}}};Sj=Qlt([Ki(),Jlt("design:paramtypes",[])],Sj);class ub extends rd{constructor(){super({id:ub.ID,label:ub.LABEL,title:ub.LABEL,alias:"Open Settings (JSON)",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(el.CtrlCmd|an.Comma)}}),this.settingsService=je.resolve(cC)}run(e){this.settingsService.openSettingsInEditor()}}ub.ID=Ke.ACTION_QUICK_ACCESS_SETTINGS;ub.LABEL=C("quickAccessSettings.label","Open Settings (JSON)");class cb extends rd{constructor(){super({id:cb.ID,label:cb.LABEL,title:cb.LABEL,alias:"Select Display Language",precondition:void 0,f1:!0,keybinding:{when:void 0,primary:el.CtrlCmd|el.Shift|an.KeyL}})}get localeService(){return je.resolve(rf)}run(e){const t=e.get(Cc),n=this.localeService.getLocales(),r=this.localeService.getCurrentLocale(),s=n.map(u=>({id:u.id,label:u.name,description:u.description}));let o;const a=(u,d)=>{o&&clearTimeout(o),o=window.setTimeout(()=>{o=void 0,u&&u.id&&this.localeService.setCurrentLocale(u.id)},d?0:200)};return new Promise(u=>{let d=!1;const h=s.findIndex(p=>p.id===(r==null?void 0:r.id)),f=t.createQuickPick();f.items=s,f.placeholder=ft("locale.select","Select Display Language (Up/Down Keys to Preview)"),f.activeItems=[s[h]],f.canSelectMany=!1,f.onDidAccept(p=>{const m=f.activeItems[0];m&&a(m,!0),d=!0,f.hide(),u()}),f.onDidHide(()=>{d||(a(r,!0),u())}),f.show()})}}cb.ID=Ke.ACTION_SELECT_LOCALE;cb.LABEL=ft("select.locale","Select Display Language");class Hf extends rd{constructor(){super({id:Hf.ID,alias:Hf.DESC,title:{value:Hf.LABEL,original:Hf.DESC},f1:!0,label:Hf.LABEL,keybinding:{weight:pc.BuiltinExtension,when:void 0,primary:el.CtrlCmd|an.KeyA}}),this.editorService=je.resolve(Il)}selectEditorAll(){const e=this.editorService.editorInstance;e&&(e.focus(),e.setSelection(e.getModel().getFullModelRange()))}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;r&&this.isTextdom(r)&&!r.className.includes("monaco")?r.select():this.selectEditorAll()}}Hf.ID=Ke.ACTION_QUICK_SELECT_ALL;Hf.DESC="Select All";Hf.LABEL=ft("menu.selectAll","Select All");class $f extends rd{constructor(){super({id:$f.ID,title:{value:$f.LABEL,original:$f.DESC},label:$f.LABEL,alias:$f.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:el.Alt|el.Shift|an.PageUp}}),this.editorService=je.resolve(Il)}run(){var e;(e=this.editorService.editorInstance)===null||e===void 0||e.getAction(Ke.ACTION_QUICK_COPY_LINE_UP).run()}}$f.ID=Ke.ACTION_QUICK_COPY_LINE_UP;$f.LABEL=ft("menu.copyLineUp","Copy Line Up");$f.DESC="Copy Line Up";class zf extends rd{constructor(){super({id:zf.ID,title:{value:zf.LABEL,original:zf.DESC},label:zf.LABEL,alias:zf.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:el.CtrlCmd|an.KeyZ}}),this.editorService=je.resolve(Il)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;if(r&&this.isTextdom(r)&&!r.className.includes("monaco"))document.execCommand("undo");else{const s=this.editorService.editorInstance;if(s){const o=this.editorService.getState().current;if(o){const a=this.editorService.getTabById(o.activeTab,o.id);s==null||s.focus(),ka.getModel(u0.parse(a.id.toString())).undo()}}}}}zf.ID=Ke.ACTION_QUICK_UNDO;zf.LABEL=ft("menu.undo","Undo");zf.DESC="Undo";class Uf extends rd{constructor(){super({id:Uf.ID,title:{value:Uf.LABEL,original:Uf.DESC},label:Uf.LABEL,alias:Uf.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:el.CtrlCmd|el.Shift|an.KeyZ}}),this.editorService=je.resolve(Il)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;if(r&&this.isTextdom(r)&&!r.className.includes("monaco"))document.execCommand("redo");else{const s=this.editorService.editorInstance;if(s){const o=this.editorService.getState().current;if(o){const a=this.editorService.getTabById(o.activeTab,o.id);s==null||s.focus(),ka.getModel(u0.parse(a.id.toString())).redo()}}}}}Uf.ID=Ke.ACTION_QUICK_REDO;Uf.LABEL=ft("menu.redo","Redo");Uf.DESC="Redo";class jf extends rd{constructor(){super({id:jf.ID,title:{value:jf.LABEL,original:jf.DESC},label:jf.LABEL,alias:jf.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:el.CtrlCmd|an.KeyN}}),this.folderTreeController=je.resolve(xS)}run(){var e,t;(t=(e=this.folderTreeController).createTreeNode)===null||t===void 0||t.call(e,ea.File)}}jf.ID=Ke.ACTION_QUICK_CREATE_FILE;jf.LABEL=ft("menu.newFile","New File");jf.DESC="New File";var eut=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tut=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Lj=class extends la{constructor(){super(),this.extensionService=je.resolve(UO),this.builtinService=je.resolve(zs)}initView(){const{quickAcessViewAction:e,quickSelectColorThemeAction:t,quickAccessSettingsAction:n,quickSelectLocaleAction:r,quickTogglePanelAction:s,quickSelectAllAction:o,quickCopyLineUpAction:a,quickUndoAction:u,quickRedoAction:d,quickCreateFileAction:h}=this.builtinService.getModules();[[e,jM],[t,h0],[n,ub],[r,cb],[zM,Vh],[s,Hh],[o,Hf],[a,$f],[u,zf],[d,Uf],[h,jf]].forEach(([f,p])=>{f&&this.extensionService.registerAction(p)})}};Lj=eut([Ki(),tut("design:paramtypes",[])],Lj);const BC=Bn(S_e),nut=gt(BC,"container"),iut=gt(BC,"normal"),rut=gt(BC,"global"),y7=gt(BC,"item"),sut=_n(y7,"checked"),out=_n(y7,"disabled"),aut=gt(BC,"label"),lut=gt(BC,"indicator");function K_e(i){const{checked:e=!1,disabled:t=!1,title:n="",data:r={},render:s,icon:o,id:a,onClick:u,contextMenu:d=[],className:h,onContextMenuClick:f}=i,m=XO({render:()=>re.createElement(Za,{onClick:v,role:"menu",data:d.map(S=>{if(S.id){const y=Mh.queryGlobalKeybinding(S.id.toString());y&&(S.keybinding=Mh.convertSimpleKeybindingToString(y))}return S})})}),v=(S,y)=>{f==null||f(S,y),m==null||m.hide()},b=function(S){u&&u(i.id,i),d.length>0&&(m==null||m.show({x:S.pageX,y:S.pageY}))},L=re.createElement(dr,{type:o,className:aut,title:n},(s==null?void 0:s())||null);return re.createElement("li",{id:a.toString(),onClick:b,className:mn(h,y7,e?sut:"",t?out:""),"data-id":r.id},L,e?re.createElement("div",{className:lut}):null)}function q_e(i){const{data:e=[],contextMenu:t=[],selected:n,onClick:r,onChange:s,onContextMenuClick:o}=i,a=(b,L)=>{r&&r(b,L),s&&L.type!=="global"&&s(n,b)},u=e.filter(b=>b.type!=="global"&&!b.hidden),d=e.filter(b=>b.type==="global"&&!b.hidden),h=(b,L)=>re.createElement(K_e,Object.assign({key:b.id},b,{onContextMenuClick:o,onClick:a,"data-index":L,checked:n===b.id})),p=XO({render:()=>re.createElement(Za,{role:"menu",onClick:m,data:t})}),m=he.useCallback((b,L)=>{o==null||o(b,L),p==null||p.hide()},[t]),v=b=>{if(b.preventDefault(),b.stopPropagation(),!p)return;const S=document.elementsFromPoint(b.pageX,b.pageY).find(y=>y.classList.contains(y7));if(S){const y=S.getBoundingClientRect(),E=t.concat(),A=t.find(N=>N.id===(S==null?void 0:S.id));A&&E.unshift({id:S.id,icon:"check",name:A.name},{type:"divider"}),p.show({x:y.x+y.width/2,y:y.y+y.height},()=>re.createElement(Za,{role:"menu",onClick:m,data:E}))}else p.show({x:b.pageX,y:b.pageY})};return re.createElement("div",{className:BC,onContextMenu:v,id:S_e},re.createElement("div",{className:nut},re.createElement(KS,{className:iut},re.createElement("ul",null,u.map(h))),re.createElement("ul",{className:rut},d.map(h))))}const uut=je.resolve(mg),cut=je.resolve(C5),dut=nl(uut,q_e,cut),S7=Bn("statusBar"),hut=gt(S7,"left-items"),fut=gt(S7,"right-items"),gut=gt(S7,"item");function put(i,e){return i.sortIndex!==void 0&&e.sortIndex!==void 0?i.sortIndex-e.sortIndex:0}var mut=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function G_e(i){const{className:e,onClick:t,id:n,name:r,data:s,render:o,style:a,role:u,title:d}=i,h=mut(i,["className","onClick","id","name","data","render","style","role","title"]),f=mn(gut,e),p={onClick:function(v){t==null||t(v,i)}},m=_b(h);return re.createElement("div",Object.assign({className:f,style:a,role:u,title:d,id:n.toString()},m),re.createElement("a",Object.assign({tabIndex:-1,title:r},p),o?o(i):r))}function Y_e(i){const{leftItems:e=[],contextMenu:t=[],onContextMenuClick:n,onClick:r,rightItems:s=[]}=i;let o;const a=he.useCallback((h,f)=>{n==null||n(h,f),o==null||o.dispose()},[t]),u=()=>re.createElement(Za,{role:"menu",onClick:a,data:t});he.useEffect(()=>(t.length>0&&(o=q5({anchor:ty(`#${gre}`),render:u})),function(){o==null||o.dispose()}));const d=h=>h.sort(put).map(f=>re.createElement(G_e,Object.assign({key:f.id},f,{onClick:yK(f.onClick,r)})));return re.createElement("div",{className:S7,id:gre},re.createElement("div",{className:hut},d(e)),re.createElement("div",{className:fut},d(s)))}const _ut=je.resolve(_g),vut=je.resolve(S5),but=nl(_ut,Y_e,vut),L7=Bn("panel"),Cut=gt(L7,"header"),wut=gt(L7,"toolbar"),yut=gt(L7,"container");function Z_e(i){var e;const{data:t,current:n,toolbox:r,onTabChange:s,onToolbarClick:o,onClose:a}=i;let u=r||[];n&&n.toolbox&&(u=n.toolbox.concat(u));const d=typeof(n==null?void 0:n.renderPane)=="function"?(e=n==null?void 0:n.renderPane)===null||e===void 0?void 0:e.call(n,n):n==null?void 0:n.renderPane,h=t==null?void 0:t.sort((f,p)=>f.sortIndex&&p.sortIndex?f.sortIndex-p.sortIndex:0);return re.createElement("div",{className:L7},re.createElement("div",{className:Cut},re.createElement(_Y,{activeTab:n==null?void 0:n.id,data:h,onSelectTab:s,onCloseTab:a}),re.createElement(eM,{className:wut,data:u,onClick:o})),re.createElement("div",{className:yut,tabIndex:0},d))}const Sut=je.resolve(uC),Lut=je.resolve(y5),Eut=nl(Sut,Z_e,Lut),X_e=Bn("auxiliaryBar"),xut=gt(X_e,"container"),Q_e=gt(X_e,"tabs"),J_e=gt(Q_e,"tab"),Dut=_n(J_e,"active");function Iut({children:i}){return re.createElement("div",{className:xut},i)}function Tut({mode:i,data:e,current:t,onClick:n}){return i==="default"?null:re.createElement("ul",{className:Q_e},e==null?void 0:e.map(r=>re.createElement("li",{key:r.key,className:mn(J_e,t===r.key&&Dut),onClick:()=>n==null?void 0:n(r.key)},r.title)))}const eve=je.resolve(yS),kut=je.resolve(w5),Nut=nl(eve,Iut),Aut=nl(eve,Tut,kut),Out=Bn("mainBench"),E7=Bn("workbench"),Mut=Bn("compositeBar"),Rut=mn(j5,oae()),Put=_n(E7,"with-horizontal-menuBar"),Fut=_n(E7,"with-hidden-statusBar"),But=gt(E7,"display-activityBar"),Wut=je.resolve(L5),Vut=je.resolve(Bu);function tve(i){const{activityBar:e,auxiliaryBar:t,menuBar:n,panel:r,sidebar:s,statusBar:o,onPaneSizeChange:a,onWorkbenchDidMount:u,onHorizontalPaneSizeChange:d,splitPanePos:h,horizontalSplitPanePos:f}=i,p=()=>r.hidden?["100%",0]:r.panelMaximized?[0,"100%"]:f,m=()=>!s.hidden&&!t.hidden?h:s.hidden?t.hidden?[0,"100%",0]:[0,"auto",h[2]]:[h[0],"auto",0],v=()=>!s.hidden&&!t.hidden?!0:s.hidden?t.hidden?!1:[!1,!0]:[!0,!1],b=N=>{const V=[];V[0]=s.hidden?Number(h[0]):N[0],V[2]=t.hidden?Number(h[2]):N[2],V[1]=N.reduce((M,R)=>M+R,0)-V[0]-V[2],a==null||a(V)},L=!n.hidden&&n.mode===qa.vertical,S=!n.hidden&&n.mode===qa.horizontal,y=S?Put:null,E=o.hidden?Fut:null,A=mn(E7,y,E);return he.useEffect(()=>{u==null||u()},[]),re.createElement("div",{id:vZ,className:Rut,tabIndex:0},re.createElement("div",{className:A},re.createElement(s2,{visible:S},re.createElement(Ore,{mode:qa.horizontal})),re.createElement("div",{className:Out},re.createElement("div",{className:Mut},re.createElement(s2,{visible:L},re.createElement(Ore,{mode:qa.vertical})),re.createElement(s2,{visible:!e.hidden,className:But},re.createElement(dut,null))),re.createElement(_A,{sizes:m(),split:"vertical",showSashes:v(),onChange:b},re.createElement(gp,{minSize:170,maxSize:"80%"},re.createElement(xat,null)),re.createElement(_A,{sizes:p(),showSashes:!r.hidden&&!r.panelMaximized,allowResize:[!0,!1],split:"horizontal",onChange:d},re.createElement(gp,{minSize:"10%",maxSize:"80%"},re.createElement(mat,null)),re.createElement(Eut,null)),re.createElement(gp,{minSize:100,maxSize:"80%"},re.createElement(Nut,null))),re.createElement(Aut,null))),re.createElement(s2,{visible:!o.hidden},re.createElement(but,null)))}const Hut=nl(Vut,tve,Wut),$ut=je.resolve(rf),zut=je.resolve(Bu),Uut=je.resolve(mg),jut=je.resolve(yS),Kut=je.resolve(Bp),qut=je.resolve(SS),Gut=je.resolve(m5),Yut=je.resolve($O),Zut=je.resolve(pg),Xut=je.resolve(P0),Qut=je.resolve(Il),Jut=je.resolve(_g),ect=je.resolve(uC),tct=je.resolve(LS),nct=je.resolve(zO),ict=je.resolve(oC),rct=je.resolve(cC),sct=je.resolve(zs),oct=je.resolve(UO),act=je.resolve(gg),nn=Object.freeze(Object.defineProperty({__proto__:null,ActivityBar:q_e,ActivityBarItem:K_e,get ActivityBarService(){return mg},get AuxiliaryBarService(){return yS},BuiltInColorTheme:d2,get BuiltinService(){return zs},get ColorThemeService(){return oC},DEFAULT_THEME_CLASS_NAME:A4,Editor:SZ,EditorGroup:A_e,get EditorService(){return Il},get EditorTreeService(){return m5},get ExplorerService(){return Bp},get ExtensionService(){return UO},get FolderTreeService(){return SS},get LayoutService(){return Bu},get LocaleService(){return rf},MenuBar:W_e,get MenuBarService(){return P0},get NotificationService(){return LS},Panel:Z_e,get PanelService(){return uC},get ProblemsService(){return zO},get SearchService(){return $O},get SettingsService(){return cC},Sidebar:P_e,get SidebarService(){return pg},StatusBar:Y_e,get StatusBarService(){return _g},StatusItem:G_e,Workbench:tve,activityBar:Uut,auxiliaryBar:jut,builtin:sct,colorTheme:ict,component:tUe,editor:Qut,editorTree:Gut,event:vbe,explorer:Kut,extension:oct,folderTree:qut,i18n:$ut,layout:zut,localize:ft,menuBar:Xut,model:Gnt,monaco:rUe,monacoService:act,notification:tct,panel:ect,problems:nct,react:bbe,search:Yut,settings:rct,sidebar:Zut,statusBar:Jut},Symbol.toStringTag,{value:"Module"})),lct={id:"ExtendsFolderTree",name:"Extends FolderTree",activate(){nn.folderTree.onRename(i=>{nn.folderTree.update({id:i,isEditable:!0})}),nn.folderTree.onUpdateFileName(i=>{const{id:e,name:t,location:n}=i;if(t){const r=(n==null?void 0:n.split("/"))||[];r[r.length-1]=t;const s=r.join("/");nn.folderTree.update(Object.assign(Object.assign({},i),{id:e,location:s,isEditable:!1}));const o=nn.editor.getGroupIdByTab(e.toString());if(!!o||o===0){const u=nn.editor.getTabById(e.toString(),o),d={id:e.toString(),name:t},h=u==null?void 0:u.data;h&&h.path&&(d.data=Object.assign(Object.assign({},h),{path:s})),nn.editor.updateTab(d)}}else{const r=nn.folderTree.get(e);r!=null&&r.name?nn.folderTree.update({id:e,isEditable:!1}):nn.folderTree.remove(e)}}),nn.folderTree.onExpandKeys(i=>{nn.folderTree.setExpandKeys(i)})},dispose(){}},uct={id:"ExtendsActivityBar",name:"Extend The Default ActivityBar",activate(i){nn.activityBar.onChange((e,t)=>{if(t!==e){nn.activityBar.setActive(t),nn.sidebar.setActive(t);const{sidebar:n}=nn.layout.getState();n.hidden&&i.executeCommand(Vh.ID,t)}else i.executeCommand(Vh.ID,t)})},dispose(){}},cct={id:"ExtendsPanel",name:"Extends Panel",activate(i){nn.panel.onTabClose(e=>{const{data:t=[],current:n}=nn.panel.getState();if((n==null?void 0:n.id)===e){const r=t.findIndex(a=>a.id===e),s=r===t.length-1?t.length-2:r+1,o=t[s];o&&nn.panel.open(o)}nn.panel.remove(e)})},dispose(){}},dct=function(i){nn.explorer.removePanel(i.id)},hct={id:"ExtendsExplorer",name:"Extends Explorer",activate(){nn.explorer.onRemovePanel(dct)},dispose(){}},fct={id:"ExtendsEditorTree",name:"Extends Editor Tree",dispose(){},activate(){nn.editorTree.onSelect((i,e)=>{nn.editor.setActive(e,i)}),nn.editorTree.onClose((i,e)=>{nn.editor.closeTab(i,e)}),nn.editorTree.onCloseOthers((i,e)=>{nn.editor.closeOther(i,e)}),nn.editorTree.onCloseAll(i=>{if(i)nn.editor.closeAll(i);else{const{groups:e}=nn.editor.getState();e==null||e.forEach(t=>{nn.editor.closeAll(t.id)})}})}},gct="theme-defaults",pct="%displayName%",mct="%description%",_ct=["Themes"],vct="1.0.0",bct="vscode",Cct="MIT",wct={vscode:"*"},yct={themes:[{id:"Default Dark+",label:"Dark+ (default dark)",uiTheme:"vs-dark",path:"./themes/dark_plus.json"},{id:"Default Light+",label:"Light+ (default light)",uiTheme:"vs",path:"./themes/light_plus.json"},{id:"Visual Studio Dark",label:"Dark (Visual Studio)",uiTheme:"vs-dark",path:"./themes/dark_vs.json"},{id:"Visual Studio Light",label:"Light (Visual Studio)",uiTheme:"vs",path:"./themes/light_vs.json"},{id:"Default High Contrast",label:"High Contrast",uiTheme:"hc-black",path:"./themes/hc_black.json"}],iconThemes:[{id:"vs-minimal",label:"Minimal (Visual Studio Code)",path:"./fileicons/vs_minimal-icon-theme.json"}]},Sct={name:gct,displayName:pct,description:mct,categories:_ct,version:vct,publisher:bct,license:Cct,engines:wct,contributes:yct},Lct="vscode://schemas/color-theme",Ect="Dark Default Colors",xct={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#1E1E1E","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editor.selectionHighlightBackground":"#ADD6FF26","editorGroupHeader.tabsBackground":"#252526","editorIndentGuide.activeBackground":"#707070","editorIndentGuide.background":"#404040","icon.foreground":"#C5C5C5","input.placeholderForeground":"#A6A6A6","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#5A1D1D","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#063B49","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#352A05","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#094771","list.dropBackground":"#383B3D","list.focusOutline":"#007FD4","list.hoverBackground":"#2A2D2E","list.inactiveSelectionBackground":"#37373D","menu.background":"#252526","menu.foreground":"#CCCCCC","menu.selectionBackground":"#094771","menu.separatorBackground":"#BBBBBB","minimapSlider.activeBackground":"#bfbfbf66","minimapSlider.background":"#79797980","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#393939","panelTitle.activeForeground":"#E7E7E7","panelTitle.inactiveForeground":"#e7e7e799","problemsErrorIcon.foreground":"#F48771","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#CCA700","sash.hoverBorder":"#007FD4","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#ccc3","sideBarTitle.foreground":"#BBBBBB","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#1E1E1E","tab.activeForeground":"#fff","tab.border":"#252526","tab.inactiveBackground":"#2d2d2d","tab.inactiveForeground":"#ffffff80","tree.indentGuidesStroke":"#585858"},Dct=!0,Ict={$schema:Lct,name:Ect,colors:xct,semanticHighlighting:Dct},Tct="vscode://schemas/color-theme",kct="Light Default Colors",Nct={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#FFFFFF","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#000000","editor.inactiveSelectionBackground":"#E5EBF1","editor.selectionHighlightBackground":"#ADD6FF80","editorIndentGuide.activeBackground":"#939393","editorIndentGuide.background":"#D3D3D3","editorSuggestWidget.background":"#F3F3F3","icon.foreground":"#424242","input.placeholderForeground":"#767676","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#F2DEDE","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#D6ECF2","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#F6F5D2","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#0060C0","list.focusOutline":"#0090F1","list.hoverBackground":"#E8E8E8","list.inactiveSelectionBackground":"#E4E6F1","menu.selectionBackground":"#0060C0","menu.separatorBackground":"#888888","minimapSlider.activeBackground":"#00000099","minimapSlider.background":"#64646480","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#fff","panelTitle.activeForeground":"#424242","panelTitle.inactiveForeground":"#424242bf","problemsErrorIcon.foreground":"#E51400","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#BF8803","sash.hoverBorder":"#0090F1","searchEditor.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#61616130","sideBarTitle.foreground":"#6F6F6F","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#fffffe","tab.activeForeground":"#333333","tab.border":"#f3f3f3","tab.inactiveBackground":"#ececec","tab.inactiveForeground":"#333333b3","tree.indentGuidesStroke":"#a9a9a9"},Act=!0,Oct={$schema:Tct,name:kct,colors:Nct,semanticHighlighting:Act},Mct="vscode://schemas/color-theme",Rct="High Contrast Default Colors",Pct={"editor.background":"#000000","editor.foreground":"#FFFFFF","editorIndentGuide.activeBackground":"#FFFFFF","editorIndentGuide.background":"#FFFFFF","sash.hoverBorder":"#F38518","sideBarTitle.foreground":"#FFFFFF","statusBarItem.remoteBackground":"#00000000","tree.indentGuidesStroke":"#a9a9a9"},Fct=[{settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#7ca668"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#b46695"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold"}},{scope:"markup.heading",settings:{foreground:"#6796e6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{name:"brackets of XML/HTML tags",scope:["punctuation.definition.tag"],settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#ffffff"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#d4d4d4"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:"support.function.git-rebase",settings:{foreground:"#d4d4d4"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"coloring of the TS this",scope:"variable.language.this",settings:{foreground:"#569cd6"}}],Bct=!0,Wct={$schema:Mct,name:Rct,colors:Pct,settings:Fct,semanticHighlighting:Bct},Vct="vscode://schemas/color-theme",Hct="Dark+ (default dark)",$ct="./dark_vs.json",zct=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#51B6C4"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"entity.name.label",settings:{foreground:"#C8C8C8"}}],Uct={$schema:Vct,name:Hct,include:$ct,tokenColors:zct},jct="vscode://schemas/color-theme",Kct="Dark (Visual Studio)",qct="./dark_defaults.json",Gct=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#569cd6"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}}],Yct={$schema:jct,name:Kct,include:qct,tokenColors:Gct},Zct="vscode://schemas/color-theme",Xct="Light+ (default light)",Qct="./light_vs.json",Jct=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#795E26"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#267f99"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#267f99"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#AF00DB"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#001080"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#328267"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#001080"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#d16969"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#811f3f"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#000000"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#ff0000"}},{scope:"constant.character",settings:{foreground:"#0000ff"}},{scope:"constant.character.escape",settings:{foreground:"#ff0000"}},{scope:"entity.name.label",settings:{foreground:"#000000"}}],edt={$schema:Zct,name:Xct,include:Qct,tokenColors:Jct},tdt="vscode://schemas/color-theme",ndt="Light (Visual Studio)",idt="./light_defaults.json",rdt=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#000000ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#008000"}},{scope:"constant.language",settings:{foreground:"#0000ff"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#098658"}},{scope:"constant.regexp",settings:{foreground:"#811f3f"}},{name:"css tags in selectors, xml tags",scope:"entity.name.tag",settings:{foreground:"#800000"}},{scope:"entity.name.selector",settings:{foreground:"#800000"}},{scope:"entity.other.attribute-name",settings:{foreground:"#ff0000"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#800000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#000080"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#800000"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#098658"}},{scope:"markup.deleted",settings:{foreground:"#a31515"}},{scope:"markup.changed",settings:{foreground:"#0451a5"}},{scope:["punctuation.definition.quote.begin.markdown","punctuation.definition.list.begin.markdown"],settings:{foreground:"#0451a5"}},{scope:"markup.inline.raw",settings:{foreground:"#800000"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#800000"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#0000ff"}},{scope:"meta.preprocessor.string",settings:{foreground:"#a31515"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#098658"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#0451a5"}},{scope:"storage",settings:{foreground:"#0000ff"}},{scope:"storage.type",settings:{foreground:"#0000ff"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#0000ff"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#a31515"}},{scope:["string.comment.buffered.block.pug","string.quoted.pug","string.interpolated.pug","string.unquoted.plain.in.yaml","string.unquoted.plain.out.yaml","string.unquoted.block.yaml","string.quoted.single.yaml","string.quoted.double.xml","string.quoted.single.xml","string.unquoted.cdata.xml","string.quoted.double.html","string.quoted.single.html","string.unquoted.html","string.quoted.single.handlebars","string.quoted.double.handlebars"],settings:{foreground:"#0000ff"}},{scope:"string.regexp",settings:{foreground:"#811f3f"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#0000ff"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#000000"}},{scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#ff0000"}},{scope:["support.type.property-name.json"],settings:{foreground:"#0451a5"}},{scope:"keyword",settings:{foreground:"#0000ff"}},{scope:"keyword.control",settings:{foreground:"#0000ff"}},{scope:"keyword.operator",settings:{foreground:"#000000"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#0000ff"}},{scope:"keyword.other.unit",settings:{foreground:"#098658"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#800000"}},{scope:"support.function.git-rebase",settings:{foreground:"#0451a5"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#098658"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#000000"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#0000ff"}}],sdt={$schema:tdt,name:ndt,include:idt,tokenColors:rdt},odt="vscode://schemas/color-theme",adt="Dark High Contrast",ldt="./hc_black_defaults.json",udt={"editor.selectionBackground":"#FFFFFF","selection.background":"#008000","statusBarItem.remoteBackground":"#00000000"},cdt=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.name.scope-resolution","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"HC Search Editor context line override",scope:"meta.resultLinePrefix.contextLinePrefix.search",settings:{foreground:"#CBEDCB"}}],ddt={$schema:odt,name:adt,include:ldt,colors:udt,tokenColors:cdt};var NW;const nve=Sct,ive=Ict,rve=Oct,hdt=Wct,sve=Uct;Object.assign(sve,ive);const ove=Yct;Object.assign(ove,ive);const ave=edt;Object.assign(ave,rve);const lve=sdt;Object.assign(lve,rve);const uve=ddt;Object.assign(uve,hdt);const Ng=((NW=nve.contributes)===null||NW===void 0?void 0:NW.themes)||[],fdt=Ng[0],gdt=Ng[1],pdt=Ng[2],mdt=Ng[3],_dt=Ng[4];Ng[0]=Object.assign({},fdt,sve);Ng[1]=Object.assign({},gdt,ave);Ng[2]=Object.assign({},pdt,ove);Ng[3]=Object.assign({},mdt,lve);Ng[4]=Object.assign({},_dt,uve);const vdt="theme-monokai",bdt="%displayName%",Cdt="%description%",wdt="1.0.0",ydt="vscode",Sdt="MIT",Ldt={vscode:"*"},Edt={themes:[{id:"Monokai",label:"Monokai",uiTheme:"vs-dark",path:"./themes/monokai-color-theme.json"}]},xdt={name:vdt,displayName:bdt,description:Cdt,version:wdt,publisher:ydt,license:Sdt,engines:Ldt,contributes:Edt},Ddt="dark",Idt={"dropdown.background":"#414339","list.activeSelectionBackground":"#75715E","quickInput.list.focusBackground":"#414339","dropdown.listBackground":"#1e1f1c","list.inactiveSelectionBackground":"#414339","list.hoverBackground":"#3e3d32","list.dropBackground":"#414339","list.highlightForeground":"#f8f8f2","button.background":"#75715E","editor.background":"#272822","editor.foreground":"#f8f8f2","selection.background":"#ccccc7","editor.selectionHighlightBackground":"#575b6180","editor.selectionBackground":"#878b9180","minimap.selectionHighlight":"#878b9180","minimap.background":"#272822","editor.wordHighlightBackground":"#4a4a7680","editor.wordHighlightStrongBackground":"#6a6a9680","editor.lineHighlightBackground":"#3e3d32","editorLineNumber.activeForeground":"#c2c2bf","editorCursor.foreground":"#f8f8f0","editorWhitespace.foreground":"#464741","editorIndentGuide.background":"#464741","editorIndentGuide.activeBackground":"#767771","editorGroupHeader.tabsBackground":"#1e1f1c","editorGroup.dropBackground":"#41433980","tab.inactiveBackground":"#34352f","tab.border":"#1e1f1c","tab.inactiveForeground":"#ccccc7","tab.lastPinnedBorder":"#414339","widget.shadow":"#00000098","progressBar.background":"#75715E","badge.background":"#75715E","badge.foreground":"#f8f8f2","editorLineNumber.foreground":"#90908a","panelTitle.activeForeground":"#f8f8f2","panelTitle.activeBorder":"#75715E","panelTitle.inactiveForeground":"#75715E","panel.border":"#414339","settings.focusedRowBackground":"#4143395A","titleBar.activeBackground":"#1e1f1c","statusBar.background":"#414339","statusBar.noFolderBackground":"#414339","statusBar.debuggingBackground":"#75715E","statusBarItem.remoteBackground":"#AC6218","activityBar.background":"#272822","activityBar.foreground":"#f8f8f2","sideBar.background":"#1e1f1c","sideBarSectionHeader.background":"#272822","menu.background":"#1e1f1c","menu.foreground":"#cccccc","pickerGroup.foreground":"#75715E","input.background":"#414339","inputOption.activeBorder":"#75715E",focusBorder:"#75715E","editorWidget.background":"#1e1f1c","debugToolBar.background":"#1e1f1c","diffEditor.insertedTextBackground":"#4b661680","diffEditor.removedTextBackground":"#90274A70","inputValidation.errorBackground":"#90274A","inputValidation.errorBorder":"#f92672","inputValidation.warningBackground":"#848528","inputValidation.warningBorder":"#e2e22e","inputValidation.infoBackground":"#546190","inputValidation.infoBorder":"#819aff","editorHoverWidget.background":"#414339","editorHoverWidget.border":"#75715E","editorSuggestWidget.background":"#272822","editorSuggestWidget.border":"#75715E","editorGroup.border":"#34352f","peekView.border":"#75715E","peekViewEditor.background":"#272822","peekViewResult.background":"#1e1f1c","peekViewTitle.background":"#1e1f1c","peekViewResult.selectionBackground":"#414339","peekViewResult.matchHighlightBackground":"#75715E","peekViewEditor.matchHighlightBackground":"#75715E","terminal.ansiBlack":"#333333","terminal.ansiRed":"#C4265E","terminal.ansiGreen":"#86B42B","terminal.ansiYellow":"#B3B42B","terminal.ansiBlue":"#6A7EC8","terminal.ansiMagenta":"#8C6BC8","terminal.ansiCyan":"#56ADBC","terminal.ansiWhite":"#e3e3dd","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightRed":"#f92672","terminal.ansiBrightGreen":"#A6E22E","terminal.ansiBrightYellow":"#e2e22e","terminal.ansiBrightBlue":"#819aff","terminal.ansiBrightMagenta":"#AE81FF","terminal.ansiBrightCyan":"#66D9EF","terminal.ansiBrightWhite":"#f8f8f2"},Tdt=[{settings:{foreground:"#F8F8F2"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#F8F8F2"}},{name:"Comment",scope:"comment",settings:{foreground:"#88846f"}},{name:"String",scope:"string",settings:{foreground:"#E6DB74"}},{name:"Template Definition",scope:["punctuation.definition.template-expression","punctuation.section.embedded"],settings:{foreground:"#F92672"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#F8F8F2"}},{name:"Number",scope:"constant.numeric",settings:{foreground:"#AE81FF"}},{name:"Built-in constant",scope:"constant.language",settings:{foreground:"#AE81FF"}},{name:"User-defined constant",scope:"constant.character, constant.other",settings:{foreground:"#AE81FF"}},{name:"Variable",scope:"variable",settings:{fontStyle:"",foreground:"#F8F8F2"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#F92672"}},{name:"Storage",scope:"storage",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Storage type",scope:"storage.type",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Class name",scope:"entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution",settings:{fontStyle:"underline",foreground:"#A6E22E"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#A6E22E"}},{name:"Function name",scope:"entity.name.function",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Function argument",scope:"variable.parameter",settings:{fontStyle:"italic",foreground:"#FD971F"}},{name:"Tag name",scope:"entity.name.tag",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Library function",scope:"support.function",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library constant",scope:"support.constant",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library class/type",scope:"support.type, support.class",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Library variable",scope:"support.other.variable",settings:{fontStyle:""}},{name:"Invalid",scope:"invalid",settings:{fontStyle:"",foreground:"#F44747"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#F44747"}},{name:"JSON String",scope:"meta.structure.dictionary.json string.quoted.double.json",settings:{foreground:"#CFCFC2"}},{name:"diff.header",scope:"meta.diff, meta.diff.header",settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"constant.numeric.line-number.find-in-files - match",settings:{foreground:"#AE81FFA0"}},{scope:"entity.name.filename.find-in-files",settings:{foreground:"#E6DB74"}},{name:"Markup Quote",scope:"markup.quote",settings:{foreground:"#F92672"}},{name:"Markup Lists",scope:"markup.list",settings:{foreground:"#E6DB74"}},{name:"Markup Styling",scope:"markup.bold, markup.italic",settings:{foreground:"#66D9EF"}},{name:"Markup Inline",scope:"markup.inline.raw",settings:{fontStyle:"",foreground:"#FD971F"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#A6E22E"}},{name:"Markup Setext Header",scope:"markup.heading.setext",settings:{foreground:"#A6E22E",fontStyle:"bold"}},{name:"Markup Headings",scope:"markup.heading.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Quote",scope:"markup.quote.markdown",settings:{fontStyle:"italic",foreground:"#75715E"}},{name:"Markdown Bold",scope:"markup.bold.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Link Title/Description",scope:"string.other.link.title.markdown,string.other.link.description.markdown",settings:{foreground:"#AE81FF"}},{name:"Markdown Underline Link/Image",scope:"markup.underline.link.markdown,markup.underline.link.image.markdown",settings:{foreground:"#E6DB74"}},{name:"Markdown Emphasis",scope:"markup.italic.markdown",settings:{fontStyle:"italic"}},{name:"Markdown Punctuation Definition Link",scope:"markup.list.unnumbered.markdown, markup.list.numbered.markdown",settings:{foreground:"#f8f8f2"}},{name:"Markdown List Punctuation",scope:["punctuation.definition.list.begin.markdown"],settings:{foreground:"#A6E22E"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#FD971F"}}],kdt=!0,Ndt={type:Ddt,colors:Idt,tokenColors:Tdt,semanticHighlighting:kdt};var AW;const cve=xdt,Adt=Ndt,dve=((AW=cve.contributes)===null||AW===void 0?void 0:AW.themes)||[],Odt=dve[0];dve[0]=Object.assign({},Odt,Adt);const Mdt="material-palenight-theme",Rdt="whizkydee",Pdt="Olaolu Olawuyi <mrolaolu@gmail.com> (http://twitter.com/mrolaolu)",Fdt="Palenight Theme",Bdt="2.0.1",Wdt="An elegant and juicy material-inspired theme for Visual Studio Code.",Vdt={color:"#31364A",theme:"dark"},Hdt="icon.png",$dt=["material theme","palenight","material","purple","dark"],zdt={url:"https://github.com/whizkydee/vscode-palenight-theme",type:"git"},Udt={url:"https://github.com/whizkydee/vscode-palenight-theme/issues"},jdt="MIT",Kdt={vscode:"^1.12.0"},qdt={start:"nodemon --exec vsce package",build:"nodemon --watch src src"},Gdt=["Themes","Other"],Ydt={themes:[{id:"Palenight Mild Contrast",label:"Palenight (Mild Contrast)",uiTheme:"vs-dark",path:"./themes/palenight-mild-contrast.json"}]},Zdt={nodemon:"^1.12.1",vsce:"^1.31.0"},Xdt={publisherDisplayName:"Olaolu Olawuyi"},Qdt={name:Mdt,publisher:Rdt,author:Pdt,displayName:Fdt,version:Bdt,description:Wdt,galleryBanner:Vdt,icon:Hdt,keywords:$dt,repository:zdt,bugs:Udt,license:jdt,engines:Kdt,scripts:qdt,categories:Gdt,contributes:Ydt,devDependencies:Zdt,__metadata:Xdt},Jdt="Palenight (Mild Contrast)",eht="Olaolu Olawuyi",tht=["Olaolu Olawuyi <mrolaolu@gmail.com>"],nht="dark",iht="palenight-mild-contrast",rht={contrastActiveBorder:null,contrastBorder:"#2C2F40",focusBorder:"#2C2F40",foreground:"#ffffff","widget.shadow":"#232635","selection.background":"#3C435E",descriptionForeground:null,errorForeground:"#EF5350","button.background":"#7e57c2cc","button.foreground":"#ffffffcc","button.hoverBackground":"#7e57c2","dropdown.background":"#292D3E","dropdown.border":"#7e57c2","dropdown.foreground":"#ffffffcc","input.background":"#414863","input.border":"#7e57c2","input.foreground":"#ffffffcc","input.placeholderForeground":"#ffffffcc","inputOption.activeBorder":"#ffffffcc","inputValidation.errorBackground":"#ef5350f2","inputValidation.errorBorder":"#EF5350","inputValidation.infoBackground":"#64b5f6f2","inputValidation.infoBorder":"#64B5F6","inputValidation.warningBackground":"#ffca28f2","inputValidation.warningBorder":"#FFCA28","scrollbar.shadow":"#292D3E00","scrollbarSlider.activeBackground":"#694CA4cc","scrollbarSlider.background":"#694CA466","scrollbarSlider.hoverBackground":"#694CA4cc","badge.background":"#7e57c2","badge.foreground":"#ffffff","progress.background":"#7e57c2","list.activeSelectionBackground":"#7e57c2","list.activeSelectionForeground":"#ffffff","list.dropBackground":"#2E3245","list.focusBackground":"#0000002e","list.focusForeground":"#ffffff","list.highlightForeground":"#ffffff","list.hoverBackground":"#0000001a","list.hoverForeground":"#ffffff","list.inactiveSelectionBackground":"#929ac90d","list.inactiveSelectionForeground":"#929ac9","activityBar.background":"#242839","activityBar.dropBackground":"#7e57c2e3","activityBar.foreground":"#eeffff","activityBar.border":"#2E3243","activityBarBadge.background":"#7e57c2","activityBarBadge.foreground":"#ffffff","sideBar.background":"#25293A","sideBar.foreground":"#6C739A","sideBar.border":"#2C2F40","sideBarTitle.foreground":"#eeffff","sideBarSectionHeader.background":"#25293A","sideBarSectionHeader.foreground":"#eeffff","editorGroup.background":"#32374C","editorGroup.border":"#2E3245","editorGroup.dropBackground":"#7e57c273","editorGroupHeader.noTabsBackground":"#32374C","editorGroupHeader.tabsBackground":"#31364a","editorGroupHeader.tabsBorder":"#2C3041","tab.activeBackground":"#25293A","tab.activeForeground":"#eeffff","tab.border":"#272B3B","tab.activeBorder":"#2C3041","tab.unfocusedActiveBorder":"#2C3041","tab.inactiveBackground":"#31364A","tab.inactiveForeground":"#929ac9","tab.unfocusedActiveForeground":null,"tab.unfocusedInactiveForeground":null,"editor.background":"#292D3E","editor.foreground":"#BFC7D5","editorLineNumber.foreground":"#4c5374","editorLineNumber.activeForeground":"#eeffff","editorCursor.foreground":"#7e57c2","editorCursor.background":null,"editor.selectionBackground":"#7580B850","editor.selectionHighlightBackground":"#383D51","editor.inactiveSelectionBackground":"#7e57c25a","editor.wordHighlightBackground":"#32374D","editor.wordHighlightStrongBackground":"#2E3250","editor.findMatchBackground":"#7e57c25a","editor.findMatchHighlightBackground":"#2E3248","editor.findRangeHighlightBackground":null,"editor.hoverHighlightBackground":"#7e57c25a","editor.lineHighlightBackground":"#0003","editor.lineHighlightBorder":null,"editorLink.activeForeground":null,"editor.rangeHighlightBackground":"#7e57c25a","editorWhitespace.foreground":null,"editorIndentGuide.background":"#4E557980","editorRuler.foreground":null,"editorCodeLens.foreground":"#FFCA28","editorBracketMatch.background":null,"editorBracketMatch.border":null,"editorOverviewRuler.currentContentForeground":"#7e57c2","editorOverviewRuler.incomingContentForeground":"#7e57c2","editorOverviewRuler.commonContentForeground":"#7e57c2","editorError.foreground":"#EF5350","editorError.border":null,"editorWarning.foreground":"#FFCA28","editorWarning.border":null,"editorGutter.background":null,"editorGutter.modifiedBackground":"#e2b93d","editorGutter.addedBackground":"#9CCC65","editorGutter.deletedBackground":"#EF5350","diffEditor.insertedTextBackground":"#99b76d23","diffEditor.removedTextBackground":"#ef535033","editorWidget.background":"#31364a","editorWidget.border":null,"editorSuggestWidget.background":"#2C3043","editorSuggestWidget.border":"#2B2F40","editorSuggestWidget.foreground":"#bfc7d5","editorSuggestWidget.highlightForeground":"#ffffff","editorSuggestWidget.selectedBackground":"#7e57c2","editorHoverWidget.background":"#292D3E","editorHoverWidget.border":"#7e57c2","debugExceptionWidget.background":"#292D3E","debugExceptionWidget.border":"#7e57c2","editorMarkerNavigation.background":"#31364a","editorMarkerNavigationError.background":"#EF5350","editorMarkerNavigationWarning.background":"#FFCA28","peekView.border":"#7e57c2","peekViewEditor.background":"#232635","peekViewEditor.matchHighlightBackground":"#7e57c25a","peekViewResult.background":"#2E3245","peekViewResult.fileForeground":"#eeffff","peekViewResult.lineForeground":"#eeffff","peekViewResult.matchHighlightBackground":"#7e57c25a","peekViewResult.selectionBackground":"#2E3250","peekViewResult.selectionForeground":"#eeffff","peekViewTitle.background":"#292D3E","peekViewTitleDescription.foreground":"#697098","peekViewTitleLabel.foreground":"#eeffff","merge.currentHeaderBackground":"#7e57c25a","merge.currentContentBackground":null,"merge.incomingHeaderBackground":"#7e57c25a","merge.incomingContentBackground":null,"merge.border":null,"panel.background":"#25293A","panel.border":"#2C2F40","panelTitle.activeBorder":"#7e57c2","panelTitle.activeForeground":"#eeffff","panelTitle.inactiveForeground":"#bfc7d580","statusBar.background":"#25293A","statusBar.foreground":"#676E95","statusBar.border":"#2C3041","statusBar.debuggingBackground":"#202431","statusBar.debuggingForeground":null,"statusBar.debuggingBorder":"#1F2330","statusBar.noFolderForeground":null,"statusBar.noFolderBackground":"#292D3E","statusBar.noFolderBorder":"#25293A","statusBarItem.activeBackground":"#202431","statusBarItem.hoverBackground":"#202431","statusBarItem.prominentBackground":"#202431","statusBarItem.prominentHoverBackground":"#202431","titleBar.activeBackground":"#25293A","titleBar.activeForeground":"#eeefff","titleBar.border":"#2C3041","titleBar.inactiveBackground":"#30364c","titleBar.inactiveForeground":null,"notifications.background":"#292D3E","notifications.foreground":"#ffffffcc","notificationLink.foreground":"#80CBC4","extensionButton.prominentForeground":"#ffffffcc","extensionButton.prominentBackground":"#7e57c2cc","extensionButton.prominentHoverBackground":"#7e57c2","pickerGroup.foreground":"#d1aaff","pickerGroup.border":"#2E3245","terminal.ansiWhite":"#ffffff","terminal.ansiBlack":"#676E95","terminal.ansiBlue":"#82AAFF","terminal.ansiCyan":"#89DDFF","terminal.ansiGreen":"#a9c77d","terminal.ansiMagenta":"#C792EA","terminal.ansiRed":"#ff5572","terminal.ansiYellow":"#FFCB6B","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightBlack":"#676E95","terminal.ansiBrightBlue":"#82AAFF","terminal.ansiBrightCyan":"#89DDFF","terminal.ansiBrightGreen":"#C3E88D","terminal.ansiBrightMagenta":"#C792EA","terminal.ansiBrightRed":"#ff5572","terminal.ansiBrightYellow":"#FFCB6B","debugToolBar.background":"#292D3E","welcomePage.buttonBackground":null,"welcomePage.buttonHoverBackground":null,"walkThrough.embeddedEditorBackground":"#232635","gitDecoration.modifiedResourceForeground":"#e2c08de6","gitDecoration.deletedResourceForeground":"#EF535090","gitDecoration.untrackedResourceForeground":"#a9c77dff","gitDecoration.ignoredResourceForeground":"#69709890","gitDecoration.conflictingResourceForeground":"#FFEB95CC","editorActiveLineNumber.foreground":"#eeffff","breadcrumb.foreground":"#6c739a","breadcrumb.focusForeground":"#bfc7d5","breadcrumb.activeSelectionForeground":"#eeffff","breadcrumbPicker.background":"#292D3E"},sht=[{name:"Global settings",settings:{background:"#292D3E",foreground:"#bfc7d5"}},{name:"Comment",scope:"comment",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"String",scope:"string",settings:{foreground:"#C3E88D"}},{name:"String Quoted",scope:"string.quoted",settings:{foreground:"#C3E88D"}},{name:"String Unquoted",scope:"string.unquoted",settings:{foreground:"#bfc7d5"}},{name:"Support Constant Math",scope:"support.constant.math",settings:{foreground:"#ffcb6b"}},{name:"Number",scope:["constant.numeric","constant.character.numeric"],settings:{foreground:"#F78C6C"}},{name:"Built-in constant",scope:["constant.language","punctuation.definition.constant","variable.other.constant"],settings:{foreground:"#82AAFF"}},{name:"User-defined constant",scope:["constant.character","constant.other"],settings:{foreground:"#82AAFF"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#F78C6C"}},{name:"RegExp String",scope:["string.regexp","string.regexp keyword.other"],settings:{foreground:"#80CBC4"}},{name:"Comma in functions",scope:"meta.function punctuation.separator.comma",settings:{foreground:"#eeffff"}},{name:"Variable",scope:"variable",settings:{foreground:"#ffcb6b"}},{name:"Keyword",scope:["punctuation.accessor","keyword"],settings:{foreground:"#c792ea"}},{name:"Storage",scope:["storage","storage.type","meta.var.expr storage.type","storage.type.property.js","storage.type.property.ts","storage.type.property.tsx","meta.class meta.method.declaration meta.var.expr storage.type.js"],settings:{foreground:"#c792ea"}},{name:"Class name",scope:["entity.name.class","meta.class entity.name.type.class"],settings:{foreground:"#ffcb6b"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{foreground:"#a9c77d"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Function Parameters",scope:"variable.parameter",settings:{foreground:"#7986E7"}},{name:"Meta Tag",scope:["punctuation.definition.tag","meta.tag"],settings:{foreground:"#89DDFF"}},{name:"HTML Tag names",scope:["entity.name.tag support.class.component","meta.tag.other.html","meta.tag.other.js","meta.tag.other.tsx","entity.name.tag.tsx","entity.name.tag.js","entity.name.tag","meta.tag.js","meta.tag.tsx","meta.tag.html"],settings:{foreground:"#ff5572"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{foreground:"#ffcb6b"}},{name:"Entity Name Tag Custom",scope:"entity.name.tag.custom",settings:{foreground:"#ffcb6b"}},{name:"Library (function & constant)",scope:["support.function","support.constant"],settings:{foreground:"#82AAFF"}},{name:"Support Constant Property Value meta",scope:"support.constant.meta.property-value",settings:{foreground:"#89DDFF"}},{name:"Library class/type",scope:["support.type","support.class"],settings:{foreground:"#ffcb6b"}},{name:"Support Variable DOM",scope:"support.variable.dom",settings:{foreground:"#ffcb6b"}},{name:"Invalid",scope:"invalid",settings:{background:"#ff2c83",foreground:"#ffffff"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#ffffff",background:"#d3423e"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Relational",scope:"keyword.operator.relational",settings:{foreground:"#c792ea"}},{name:"Keyword Operator Assignment",scope:"keyword.operator.assignment",settings:{foreground:"#c792ea"}},{name:"Double-Slashed Comment",scope:"comment.line.double-slash",settings:{foreground:"#697098"}},{name:"Object",scope:"object",settings:{foreground:"#cdebf7"}},{name:"Null",scope:"constant.language.null",settings:{foreground:"#ff5874"}},{name:"Meta Brace",scope:"meta.brace",settings:{foreground:"#bfc7d5"}},{name:"Meta Delimiter Period",scope:"meta.delimiter.period",settings:{foreground:"#c792ea"}},{name:"Punctuation Definition String",scope:"punctuation.definition.string",settings:{foreground:"#d9f5dd"}},{name:"Boolean",scope:"constant.language.boolean",settings:{foreground:"#ff5874"}},{name:"Object Comma",scope:"object.comma",settings:{foreground:"#ffffff"}},{name:"Variable Parameter Function",scope:"variable.parameter.function",settings:{foreground:"#89DDFF"}},{name:"Support Type Property Name & entity name tags",scope:["support.type.vendored.property-name","support.constant.vendored.property-value","support.type.property-name","meta.property-list entity.name.tag"],settings:{foreground:"#80CBC4"}},{name:"Entity Name tag reference in stylesheets",scope:"meta.property-list entity.name.tag.reference",settings:{foreground:"#ff5572"}},{name:"Constant Other Color RGB Value Punctuation Definition Constant",scope:"constant.other.color.rgb-value punctuation.definition.constant",settings:{foreground:"#F78C6C"}},{name:"Constant Other Color",scope:"constant.other.color",settings:{foreground:"#FFEB95"}},{name:"Keyword Other Unit",scope:"keyword.other.unit",settings:{foreground:"#FFEB95"}},{name:"Meta Selector",scope:"meta.selector",settings:{foreground:"#c792ea"}},{name:"Entity Other Attribute Name Id",scope:"entity.other.attribute-name.id",settings:{foreground:"#FAD430"}},{name:"Meta Property Name",scope:"meta.property-name",settings:{foreground:"#80CBC4"}},{name:"Doctypes",scope:["entity.name.tag.doctype","meta.tag.sgml.doctype"],settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Punctuation Definition Parameters",scope:"punctuation.definition.parameters",settings:{foreground:"#d9f5dd"}},{name:"Keyword Control Operator",scope:"keyword.control.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Logical",scope:"keyword.operator.logical",settings:{foreground:"#c792ea"}},{name:"Variable Instances",scope:["variable.instance","variable.other.instance","variable.reaedwrite.instance","variable.other.readwrite.instance"],settings:{foreground:"#ff5572"}},{name:"Variable Property Other",scope:["variable.other.property","variable.other.object.property"],settings:{foreground:"#89DDFF"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Keyword Operator Comparison",scope:"keyword.operator.comparison",settings:{foreground:"#c792ea"}},{name:"Support Constant, `new` keyword, Special Method Keyword",scope:["support.constant","keyword.other.special-method","keyword.other.new"],settings:{foreground:"#89DDFF"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#89DDFF"}},{name:"Invalid Broken",scope:"invalid.broken",settings:{foreground:"#020e14",background:"#F78C6C"}},{name:"Invalid Unimplemented",scope:"invalid.unimplemented",settings:{background:"#8BD649",foreground:"#ffffff"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#ffffff",background:"#ec5f67"}},{name:"Language Variable",scope:"variable.language",settings:{foreground:"#ff5572"}},{name:"Support Variable Property",scope:"support.variable.property",settings:{foreground:"#89DDFF"}},{name:"Variable Function",scope:"variable.function",settings:{foreground:"#82AAFF"}},{name:"Variable Interpolation",scope:"variable.interpolation",settings:{foreground:"#ec5f67"}},{name:"Meta Function Call",scope:"meta.function-call",settings:{foreground:"#82AAFF"}},{name:"Punctuation Section Embedded",scope:"punctuation.section.embedded",settings:{foreground:"#d3423e"}},{name:"Punctuation Tweaks",scope:["punctuation.terminator.expression","punctuation.definition.arguments","punctuation.definition.array","punctuation.section.array","meta.array"],settings:{foreground:"#bfc7d5"}},{name:"More Punctuation Tweaks",scope:["punctuation.definition.list.begin","punctuation.definition.list.end","punctuation.separator.arguments","punctuation.definition.list"],settings:{foreground:"#d9f5dd"}},{name:"Template Strings",scope:"string.template meta.template.expression",settings:{foreground:"#d3423e"}},{name:"Backtics(``) in Template Strings",scope:"string.template punctuation.definition.string",settings:{foreground:"#bfc7d5"}},{name:"Italics",scope:"italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Bold",scope:"bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Quote",scope:"quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Raw Code",scope:"raw",settings:{foreground:"#80CBC4"}},{name:"CoffeScript Variable Assignment",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"CoffeScript Parameter Function",scope:"variable.parameter.function.coffee",settings:{foreground:"#bfc7d5"}},{name:"CoffeeScript Assignments",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"C# Readwrite Variables",scope:"variable.other.readwrite.cs",settings:{foreground:"#bfc7d5"}},{name:"C# Classes & Storage types",scope:["entity.name.type.class.cs","storage.type.cs"],settings:{foreground:"#82AAFF"}},{name:"C# Namespaces",scope:"entity.name.type.namespace.cs",settings:{foreground:"#B2CCD6"}},{name:"Tag names in Stylesheets",scope:["entity.name.tag.css","entity.name.tag.less","entity.name.tag.custom.css"],settings:{foreground:"#ff5572"}},{name:"Wildcard(*) selector in Stylesheets",scope:["entity.name.tag.wildcard.css","entity.name.tag.wildcard.less","entity.name.tag.wildcard.scss","entity.name.tag.wildcard.sass"],settings:{foreground:"#ff5572"}},{name:"(C|SC|SA|LE)SS property value unit",scope:["keyword.other.unit.css","constant.length.units.css","keyword.other.unit.less","constant.length.units.less","keyword.other.unit.scss","constant.length.units.scss","keyword.other.unit.sass","constant.length.units.sass"],settings:{foreground:"#FFEB95"}},{name:"Attribute Name for CSS",scope:"meta.attribute-selector.css entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"punctuations in styled components",scope:["source.js source.css meta.property-list","source.js source.css punctuation.section","source.js source.css punctuation.terminator.rule","source.js source.css punctuation.definition.entity.end.bracket","source.js source.css punctuation.definition.entity.begin.bracket","source.js source.css punctuation.separator.key-value","source.js source.css punctuation.definition.attribute-selector","source.js source.css meta.property-list","source.js source.css meta.property-list punctuation.separator.comma","source.ts source.css punctuation.section","source.ts source.css punctuation.terminator.rule","source.ts source.css punctuation.definition.entity.end.bracket","source.ts source.css punctuation.definition.entity.begin.bracket","source.ts source.css punctuation.separator.key-value","source.ts source.css punctuation.definition.attribute-selector","source.ts source.css meta.property-list","source.ts source.css meta.property-list punctuation.separator.comma"],settings:{foreground:"#bfc7d5"}},{name:"Elixir Classes",scope:["source.elixir support.type.elixir","source.elixir meta.module.elixir entity.name.class.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir Functions",scope:"source.elixir entity.name.function",settings:{foreground:"#ffcb6b"}},{name:"Elixir Constants",scope:["source.elixir constant.other.symbol.elixir","source.elixir constant.other.keywords.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir String Punctuations",scope:"source.elixir punctuation.definition.string",settings:{foreground:"#a9c77d"}},{name:"Elixir",scope:["source.elixir variable.other.readwrite.module.elixir","source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir"],settings:{foreground:"#ffcb6b"}},{name:"Elixir Binary Punctuations",scope:"source.elixir .punctuation.binary.elixir",settings:{foreground:"#c792ea"}},{name:"Go Function Calls",scope:"source.go meta.function-call.go",settings:{foreground:"#DDDDDD"}},{name:"GraphQL Variables",scope:"variable.qraphql",settings:{foreground:"#bfc7d5"}},{name:"ID Attribute Name in HTML",scope:"entity.other.attribute-name.id.html",settings:{foreground:"#ffcb6b"}},{name:"HTML Punctuation Definition Tag",scope:"punctuation.definition.tag.html",settings:{foreground:"#89DDFF"}},{name:"HTML Doctype",scope:"meta.tag.sgml.doctype.html",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"JavaScript Classes",scope:"meta.class entity.name.type.class.js",settings:{foreground:"#ffcb8b"}},{name:"JavaScript Method Declaration e.g. `constructor`",scope:"meta.method.declaration storage.type.js",settings:{foreground:"#82AAFF",fontStyle:"normal"}},{name:"JavaScript Terminator",scope:"terminator.js",settings:{foreground:"#bfc7d5"}},{name:"JavaScript Meta Punctuation Definition",scope:"meta.js punctuation.definition.js",settings:{foreground:"#bfc7d5"}},{name:"Entity Names in Code Documentations",scope:["entity.name.type.instance.jsdoc","entity.name.type.instance.phpdoc"],settings:{foreground:"#eeffff"}},{name:"Other Variables in Code Documentations",scope:["variable.other.jsdoc","variable.other.phpdoc"],settings:{foreground:"#78ccf0"}},{name:"JavaScript module imports and exports",scope:["variable.other.meta.import.js","meta.import.js variable.other","variable.other.meta.export.js","meta.export.js variable.other"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variable Parameter Function",scope:"variable.parameter.function.js",settings:{foreground:"#7986E7"}},{name:"JavaScript Variable Other ReadWrite",scope:"variable.other.readwrite.js",settings:{foreground:"#bfc7d5"}},{name:"Text nested in React tags",scope:["meta.jsx.children","meta.jsx.children.js","meta.jsx.children.tsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript[React] Variable Other Object",scope:["variable.other.object.js","variable.other.object.jsx","meta.object-literal.key.js","meta.object-literal.key.jsx","variable.object.property.js","variable.object.property.jsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variables",scope:["variable.js","variable.other.js"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Entity Name Type",scope:["entity.name.type.js","entity.name.type.module.js"],settings:{foreground:"#ffcb8b"}},{name:"JavaScript Support Classes",scope:"support.class.js",settings:{foreground:"#bfc7d5"}},{name:"JSON Property Names",scope:"support.type.property-name.json",settings:{foreground:"#C3E88D",fontStyle:"normal"}},{name:"JSON Support Constants",scope:"support.constant.json",settings:{foreground:"#ffcb6b"}},{name:"JSON Property values (string)",scope:"meta.structure.dictionary.value.json string.quoted.double",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Strings in JSON values",scope:"string.quoted.double.json punctuation.definition.string.json",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Specific JSON Property values like null",scope:"meta.structure.dictionary.json meta.structure.dictionary.value constant.language",settings:{foreground:"#ff5874"}},{name:"Ruby Variables",scope:"variable.other.ruby",settings:{foreground:"#bfc7d5"}},{name:"Ruby Hashkeys",scope:"constant.language.symbol.hashkey.ruby",settings:{foreground:"#89DDFF"}},{name:"LESS Tag names",scope:"entity.name.tag.less",settings:{foreground:"#ff5572"}},{name:"Attribute Name for LESS",scope:"meta.attribute-selector.less entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#82b1ff"}},{name:"Markup Italics",scope:"markup.italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Markup Bold",scope:"markup.bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Markup Quote + others",scope:"markup.quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Markup Raw Code + others",scope:"markup.inline.raw",settings:{foreground:"#80CBC4"}},{name:"Markup Links",scope:["markup.underline.link","markup.underline.link.image"],settings:{foreground:"#ff869a"}},{name:"Markup Attributes",scope:["markup.meta.attribute-list"],settings:{foreground:"#a9c77d"}},{name:"Markup Admonitions",scope:"markup.admonition",settings:{fontStyle:"bold"}},{name:"Markup Lists",scope:"markup.list.bullet",settings:{foreground:"#D9F5DD"}},{name:"Markup Superscript and Subscript",scope:["markup.superscript","markup.subscript"],settings:{fontStyle:"italic"}},{name:"Markdown Link Title and Description",scope:["string.other.link.title.markdown","string.other.link.description.markdown"],settings:{foreground:"#bfc7d5"}},{name:"Markdown Punctuation",scope:["punctuation.definition.string.markdown","punctuation.definition.string.begin.markdown","punctuation.definition.string.end.markdown","meta.link.inline.markdown punctuation.definition.string"],settings:{foreground:"#82b1ff"}},{name:"Markdown MetaData Punctuation",scope:["punctuation.definition.metadata.markdown"],settings:{foreground:"#ff5572"}},{name:"Markdown List Punctuation",scope:["beginning.punctuation.definition.list.markdown"],settings:{foreground:"#82b1ff"}},{name:"Asciidoc Function",scope:"entity.name.function.asciidoc",settings:{foreground:"#F78C6C"}},{name:"PHP Variables",scope:"variable.other.php",settings:{foreground:"#bec5d4"}},{name:"Support Classes in PHP",scope:"support.class.php",settings:{foreground:"#ffcb8b"}},{name:"Punctuations in PHP function calls",scope:"meta.function-call.php punctuation",settings:{foreground:"#bfc7d5"}},{name:"PHP Global Variables",scope:"variable.other.global.php",settings:{foreground:"#ffcb6b"}},{name:"Declaration Punctuation in PHP Global Variables",scope:"variable.other.global.php punctuation.definition.variable",settings:{foreground:"#ffcb6b"}},{name:"Language Constants in Python",scope:"constant.language.python",settings:{foreground:"#ff5874"}},{name:"Python Function Parameter and Arguments",scope:["variable.parameter.function.python","meta.function-call.arguments.python"],settings:{foreground:"#7986E7"}},{name:"Python Function Call",scope:["meta.function-call.python","meta.function-call.generic.python"],settings:{foreground:"#B2CCD6"}},{name:"Punctuations in Python",scope:"punctuation.python",settings:{foreground:"#bfc7d5"}},{name:"Decorator Functions in Python",scope:"entity.name.function.decorator.python",settings:{foreground:"#ffcb6b"}},{name:"Python Language Variable",scope:"source.python variable.language.special",settings:{foreground:"#8EACE3"}},{name:"SCSS Variable",scope:["variable.scss","variable.sass","variable.parameter.url.scss","variable.parameter.url.sass"],settings:{foreground:"#DDDDDD"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#82AAFF"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#bec5d4"}},{name:"Attribute Name for SASS",scope:["meta.attribute-selector.scss entity.other.attribute-name.attribute","meta.attribute-selector.sass entity.other.attribute-name.attribute"],settings:{foreground:"#F78C6C"}},{name:"Tag names in SASS",scope:["entity.name.tag.scss","entity.name.tag.sass"],settings:{foreground:"#ff5572"}},{name:"TypeScript[React] Variables and Object Properties",scope:["variable.other.readwrite.alias.ts","variable.other.readwrite.alias.tsx","variable.other.readwrite.ts","variable.other.readwrite.tsx","variable.other.object.ts","variable.other.object.tsx","variable.object.property.ts","variable.object.property.tsx","variable.other.ts","variable.other.tsx","variable.tsx","variable.ts"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Entity Name Types",scope:["entity.name.type.ts","entity.name.type.tsx"],settings:{foreground:"#78ccf0"}},{name:"TypeScript[React] Node Classes",scope:["support.class.node.ts","support.class.node.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Entity Name Types as Parameters",scope:["meta.type.parameters.ts entity.name.type","meta.type.parameters.tsx entity.name.type"],settings:{foreground:"#eeffff"}},{name:"TypeScript[React] Import/Export Punctuations",scope:["meta.import.ts punctuation.definition.block","meta.import.tsx punctuation.definition.block","meta.export.ts punctuation.definition.block","meta.export.tsx punctuation.definition.block"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Punctuation Decorators",scope:["meta.decorator punctuation.decorator.ts","meta.decorator punctuation.decorator.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Punctuation Decorators",scope:"meta.tag.js meta.jsx.children.tsx",settings:{foreground:"#82AAFF"}},{name:"YAML Entity Name Tags",scope:"entity.name.tag.yaml",settings:{foreground:"#89DDFF"}},{name:"handlebars variables",scope:"variable.parameter.handlebars",settings:{foreground:"#bec5d4"}},{name:"handlebars parameters",scope:"entity.other.attribute-name.handlebars variable.parameter.handlebars",settings:{foreground:"#ffcb6b"}},{name:"handlebars enitity attribute names",scope:"entity.other.attribute-name.handlebars",settings:{foreground:"#89DDFF"}},{name:"handlebars enitity attribute values",scope:"entity.other.attribute-value.handlebars variable.parameter.handlebars",settings:{foreground:"#7986E7"}},{name:"normalize font style of certain components",scope:["meta.tag.js meta.embedded.expression.js punctuation.section.embedded.begin.js","meta.tag.js meta.embedded.expression.js punctuation.section.embedded.end.js","meta.property-list.css meta.property-value.css variable.other.less","punctuation.section.embedded.begin.js.jsx","punctuation.section.embedded.end.js.jsx","meta.property-list.scss variable.scss","meta.property-list.sass variable.sass","keyword.operator.logical","keyword.operator.arithmetic","keyword.operator.bitwise","keyword.operator.increment","keyword.operator.ternary","keyword.operator.comparison","keyword.operator.assignment","keyword.operator.operator","keyword.operator.or.regexp","keyword.operator.expression.in","keyword.operator.type","punctuation.section.embedded.js","punctuation.definintion.string","punctuation"],settings:{fontStyle:"normal"}}],oht={name:Jdt,author:eht,maintainers:tht,type:nht,semanticClass:iht,colors:rht,tokenColors:sht};var OW;const hve=Qdt,aht=oht,fve=((OW=hve.contributes)===null||OW===void 0?void 0:OW.themes)||[],lht=fve[0];fve[0]=Object.assign({},lht,aht);const uht="webstorm-intellij-darcula-theme",cht="Webstorm IntelliJ Darcula Theme",dht="A Darcula Theme designed by IntelliJ",hht="1.1.1",fht="xr0master",ght="MIT",pht="view.png",mht={url:"https://github.com/xr0master/vscode-intellij-darcula-theme",type:"git"},_ht={vscode:"^1.27.0"},vht=["Themes"],bht={themes:[{id:"Webstorm IntelliJ Darcula Theme",label:"Webstorm IntelliJ Darcula Theme",uiTheme:"vs-dark",path:"./themes/darcula-color-theme.json"}]},Cht={name:uht,displayName:cht,description:dht,version:hht,publisher:fht,license:ght,icon:pht,repository:mht,engines:_ht,categories:vht,contributes:bht},wht="Webstorm IntelliJ Darcula Theme",yht="dark",Sht={"activityBar.background":"#3c3f41","activityBar.border":"#4b4b4b","activityBar.foreground":"#ffffff","activityBarBadge.background":"#cc7832","dropdown.background":"#3c3f41","dropdown.border":"#4b4b4b","dropdown.foreground":"#bababa","editor.background":"#2b2b2b","editor.foreground":"#a9b7c6","editor.inactiveSelectionBackground":"#3a3d41","editor.lineHighlightBackground":"#323232","editor.selectionHighlightBackground":"#415a41","editorIndentGuide.activeBackground":"#606060","editorIndentGuide.background":"#4b4b4b","editorLineNumber.activeForeground":"#999999","editorLineNumber.foreground":"#606366","input.background":"#3c3f41","input.border":"#4b4b4b","input.foreground":"#bababa","input.placeholderForeground":"#a6a6a6","list.dropBackground":"#373a3c","menu.background":"#3c3f41","menu.foreground":"#bababa","panel.background":"#3c3f41","panel.border":"#4b4b4b","panelTitle.activeBorder":"#bababa","panelTitle.activeForeground":"#bababa","panelTitle.inactiveForeground":"#888888","scrollbarSlider.activeBackground":"#707070","scrollbarSlider.background":"#505050","scrollbarSlider.hoverBackground":"#676767","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBar.background":"#3c3f41","sideBar.border":"#4b4b4b","sideBar.foreground":"#bababa","sideBarSectionHeader.foreground":"#bababa","sideBarTitle.foreground":"#bababa","statusBar.background":"#3c3f41","statusBar.border":"#4b4b4b","statusBar.foreground":"#bababa","tab.activeBackground":"#515658","tab.activeBorder":"#bababa","tab.activeForeground":"#bababa","tab.border":"#4b4b4b","tab.inactiveBackground":"#3c3e3f","tab.inactiveForeground":"#a1a1a1","terminal.ansiBlack":"#ffffff","terminal.ansiBlue":"#5394ec","terminal.ansiBrightBlue":"#7eaef1","terminal.ansiBrightCyan":"#6cdada","terminal.ansiBrightGreen":"#a8c023","terminal.ansiBrightMagenta":"#ff99ff","terminal.ansiBrightRed":"#ff8785","terminal.ansiBrightYellow":"#ffff00","terminal.ansiCyan":"#299999","terminal.ansiGreen":"#a8c023","terminal.ansiMagenta":"#ae8abe","terminal.ansiRed":"#ff6b68","terminal.ansiWhite":"#1f1f1f","terminal.ansiYellow":"#d6bf55","terminal.background":"#2b2b2b","terminal.border":"#4b4b4b","widget.shadow":"#1a1a1aaa"},Lht=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.instanceof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow keywords",scope:"keyword.control",settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{scope:"string",settings:{foreground:"#6A8759"}},{scope:"keyword - keyword.operator",settings:{foreground:"#CC7832"}},{scope:"keyword.control",settings:{foreground:"#CC7832"}},{scope:"storage",settings:{foreground:"#CC7832"}},{scope:"storage.type",settings:{foreground:"#CC7832"}},{scope:"constant.numeric",settings:{foreground:"#6897BB"}},{scope:"entity.name.type",settings:{foreground:"#CC7832"}},{scope:"entity.name.class",settings:{foreground:"#CC7832"}},{scope:"support.type",settings:{foreground:"#CC7832"}},{scope:"support.class",settings:{foreground:"#CC7832"}},{scope:"entity.name.function",settings:{foreground:"#FFC66D"}},{scope:"support.function",settings:{foreground:"#FFC66D"}},{scope:"variable",settings:{foreground:"#9876AA"}},{scope:"entity.name.variable",settings:{foreground:"#9876AA"}},{name:"Comments",scope:["comment","comment.block","comment.line"],settings:{foreground:"#808080",fontStyle:"italic"}},{scope:["punctuation.terminator.statement","punctuation.separator.comma","punctuation.separator.parameter","punctuation.separator.dictionary.key-value.json","punctuation.separator.dictionary.key-value.json.comments","punctuation.separator.dictionary.pair.json","punctuation.separator.dictionary.pair.json.comments","punctuation.separator.array.json","punctuation.separator.array.json.comments","constant.character.escape","keyword.control.anchor.regexp"],settings:{foreground:"#CC7832"}},{name:"Global keywords",scope:["constant.language","keyword.control","keyword.operator.expression","keyword.operator.new","keyword.other.debugger","support.type","storage.type","storage.modifier","variable.language.super","variable.language.this"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"String",scope:["punctuation.definition.string","string.regexp","constant.other.character-class"],settings:{foreground:"#6A8759"}},{name:"Comment Documentation",scope:["comment.block.documentation","entity.name.type.instance.jsdoc","variable.other.jsdoc"],settings:{foreground:"#6A8759"}},{name:"JsDocs",scope:"storage.type.class.jsdoc",settings:{foreground:"#6A8759",fontStyle:"italic bold underline"}},{name:"Main Text Color",scope:["punctuation.accessor","punctuation.separator.key-value","punctuation.definition.block","variable.other.readwrite","variable.other.constant","variable.parameter","variable.other.object","variable.language.arguments","support.variable","support.variable.object","support.class","keyword","keyword.operator.logical","keyword.operator.optional","keyword.operator.type.annotation","entity.name.type","entity.other.inherited-class","constant.language.import-export-all","storage.type.function.arrow","meta.function.expression","meta.object.member","meta.brace.round","meta.brace.square"],settings:{foreground:"#A9B7C6"}},{name:"Veriables",scope:["meta.function-call","meta.object.member","variable.other.property","variable.other.object.property","meta.object-literal.key","support.variable.property"],settings:{foreground:"#9876AA"}},{name:"Constants",scope:["variable.other.constant.property","variable.other.constant.object.property"],settings:{foreground:"#9876AA",fontStyle:"italic"}},{name:"JSON",scope:["support.type.property-name","support.type.property-name.json.comments","punctuation.support.type.property-name.end.json.comments","punctuation.support.type.property-name.begin.json.comments"],settings:{foreground:"#9876AA",fontStyle:""}},{name:"Regexp Blocks",scope:["punctuation.definition.group.regexp","punctuation.definition.character-class.regexp","punctuation.definition.group.no-capture.regexp","punctuation.definition.group.assertion.regexp","constant.other.character-class.regexp"],settings:{foreground:"#FFC66D"}},{name:"Regex set and etc",scope:["constant.regexp","keyword.operator.quantifier.regexp"],settings:{foreground:"#6897BB"}},{name:"XML/HTML tags",scope:["keyword.other.doctype.xml","entity.name.tag","support.class","punctuation.definition.tag"],settings:{foreground:"#E8BF6A"}},{name:"XML/HTML attribute name",scope:["variable.language.documentroot.xml","entity.other.attribute-name","support.variable.dom.js"],settings:{foreground:"#BABABA"}},{name:"XML/HTML embedded section",scope:["punctuation.section.embedded"],settings:{foreground:"#a9b7c6"}},{name:"HTML attribute value",scope:"text.html.basic string",settings:{foreground:"#A5C261"}},{name:"Constant characters",scope:"constant.character.entity",settings:{foreground:"#6D9CBE"}},{name:"YAML comments",scope:"comment.line.number-sign.yaml",settings:{foreground:"#629755",fontStyle:"italic"}},{name:"YAML key",scope:"entity.name.tag.yaml",settings:{foreground:"#CC7832"}},{name:"YAML block/text",scope:["source.yaml keyword.control","source.yaml constant.language","source.yaml storage.modifier.chomping-indicator","string.unquoted.plain.out.yaml","constant.numeric.integer.yaml"],settings:{foreground:"#A9B7C6",fontStyle:""}},{name:"YAML Anchor/Alias",scope:["entity.name.type.anchor.yaml","variable.other.alias.yaml"],settings:{foreground:"#E8BF6A"}},{name:"CSS/SCSS global key",scope:["keyword.other.important","keyword.other.default"],settings:{foreground:"#CC7832",fontStyle:""}},{name:"CSS atribute/selector",scope:["entity.other.attribute-name.css","entity.other.attribute-name.id.css","entity.other.attribute-name.class.css","entity.other.attribute-name.pseudo-element.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.class.mixin.css","support.function.url.css","constant.other.unicode-range.css","support.constant.language-range.css","punctuation.definition.entity.css"],settings:{foreground:"#E8BF6A"}},{name:"CSS URL",scope:"variable.parameter.url.css",settings:{foreground:"#287BDE"}},{name:"CSS property name",scope:["support.type.property-name.css","support.type.vendored.property-name"],settings:{foreground:"#BABABA",fontStyle:""}},{name:"CSS tag name",scope:["entity.name.tag.css"],settings:{foreground:"#CC7832"}},{name:"CSS terminator",scope:["punctuation.terminator.rule.css"],settings:{foreground:"#CC7832"}},{name:"CSS colon/braces and etc",scope:["keyword.other.unit.percentage.css","punctuation.section.function.end.bracket.round.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.property-list.begin.bracket.curly.css","punctuation.section.property-list.end.bracket.curly.css","punctuation.definition.entity.begin.bracket.square.css","punctuation.definition.entity.end.bracket.square.css"],settings:{foreground:"#A9B7C6"}},{name:"CSS property value",scope:["support.constant.font-name.css","support.constant.color.w3c-standard-color-name.css","support.constant.property-value.css","keyword.other.unit.px.css","keyword.other.unit.em.css"],settings:{foreground:"#A5C261"}},{name:"CSS hex color",scope:"constant.other.color.rgb-value.hex.css",settings:{foreground:"#6897BB"}},{name:"CSS comma",scope:"punctuation.separator.list.comma.css",settings:{foreground:"#CC7832"}},{name:"Sass/SCSS variable",scope:"variable.scss",settings:{foreground:"#6D9CBE"}},{name:"Markdown",scope:["entity.name.section.markdown","punctuation.definition.heading"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"Markdown link",scope:"markup.underline.link",settings:{foreground:"#6D9CBE",fontStyle:"italic"}}],Eht={name:wht,type:yht,colors:Sht,tokenColors:Lht};var MW;const gve=Cht,xht=Eht,pve=((MW=gve.contributes)===null||MW===void 0?void 0:MW.themes)||[],Dht=pve[0];pve[0]=Object.assign({},Dht,xht);const Iht="github-plus-theme",Tht="GitHub Plus Theme",kht="A GitHub inspired color theme for VSCode code and interface!",Nht="1.4.2",Aht="thenikso",Oht="icon.png",Mht={type:"git",url:"https://github.com/thenikso/github-plus-theme"},Rht={url:"https://github.com/thenikso/github-plus-theme/issues"},Pht={vscode:"^1.16.0"},Fht=["Themes"],Bht={themes:[{id:"GitHub Plus",label:"GitHub Plus",uiTheme:"vs",path:"./themes/github-plus-theme.json"}]},Wht={publish:"vsce publish"},Vht={id:"d0db9e58-8cdf-49c5-87bf-02f037e10bb0",publisherDisplayName:"thenikso",publisherId:"e748af4a-d17d-4c3b-a7e1-2592de9a7e09"},Hht={name:Iht,displayName:Tht,description:kht,version:Nht,publisher:Aht,icon:Oht,repository:Mht,bugs:Rht,engines:Pht,categories:Fht,contributes:Bht,scripts:Wht,__metadata:Vht},$ht="light",zht={focusBorder:"#fafbfc","inputOption.activeBorder":"#e36209","editor.background":"#ffffff","editor.foreground":"#24292e","editor.lineHighlightBackground":"#fffbdd","editorIndentGuide.background":"#eeeeee","editorLineNumber.foreground":"#cccccc","editorBracketMatch.background":"#f1f8ff","editorBracketMatch.border":"#c8e1ff","titleBar.activeBackground":"#fafbfc","titleBar.border":"#e1e4e8","statusBar.foreground":"#24292e","statusBar.noFolderForeground":"#24292e","statusBar.background":"#fafbfc","statusBar.noFolderBackground":"#fafbfc","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#fafbfc","statusBar.debuggingForeground":"#24292e","activityBar.background":"#24292e","activityBar.foreground":"#fafbfc","activityBarBadge.background":"#54a3ff","sideBar.background":"#fafbfc","sideBar.foreground":"#586069","sideBar.border":"#e1e4e8","sideBarTitle.foreground":"#24292e","sideBarSectionHeader.background":"#F1F2F3","sideBarSectionHeader.foreground":"#24292e","notification.background":"#54a3ff","editorGroupHeader.tabsBackground":"#fafbfc","editorGroupHeader.tabsBorder":"#e1e4e8","tab.activeBackground":"#ffffff","tab.activeBorder":"#e36209","tab.inactiveBackground":"#fafbfc","tab.border":"#e1e4e8","tab.inactiveForeground":"#586069","scrollbar.shadow":"#00000000","quickInputList.focusBackground":"#e7e6e5","quickInputList.focusForeground":"#24292e","list.focusOutline":"#ffffff","list.highlightForeground":"#0066BF","list.focusHighlightForeground":"#0066BF","terminal.background":"#ffffff","terminal.foreground":"#333333","terminal.ansiBlack":"#414141","terminal.ansiRed":"#D73A49","terminal.ansiGreen":"#90D259","terminal.ansiYellow":"#F7C400","terminal.ansiBlue":"#005CC5","terminal.ansiMagenta":"#FF73FD","terminal.ansiCyan":"#0BC7D7","terminal.ansiWhite":"#BFBFBF","terminal.ansiBrightBlack":"#989898","terminal.ansiBrightRed":"#FA6F71","terminal.ansiBrightGreen":"#35D61C","terminal.ansiBrightYellow":"#FFCA39","terminal.ansiBrightBlue":"#1C23D6","terminal.ansiBrightMagenta":"#FF00FF","terminal.ansiBrightCyan":"#3CD7E7","terminal.ansiBrightWhite":"#E0E0E0","terminalCursor.foreground":"#363636"},Uht=[{settings:{foreground:"#24292eff",background:"#ffffffff"}},{scope:["keyword.operator.accessor","meta.group.braces.round.function.arguments","meta.template.expression","markup.fenced_code meta.embedded.block"],settings:{foreground:"#24292eff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:["strong","markup.heading.markdown","markup.bold.markdown"],settings:{fontStyle:"bold"}},{scope:["markup.italic.markdown"],settings:{fontStyle:"italic"}},{scope:"meta.link.inline.markdown",settings:{fontStyle:"underline",foreground:"#005cc5"}},{scope:["comment","markup.fenced_code","markup.inline"],settings:{foreground:"#6a737d"}},{scope:"string",settings:{foreground:"#032f62"}},{scope:["constant.numeric","constant.language","variable.language.this","variable.other.class","variable.other.constant","meta.property-name","meta.property-value","support"],settings:{foreground:"#005cc5"}},{scope:["keyword","storage.modifier","storage.type","storage.control.clojure","entity.name.function.clojure","support.function.node","support.type.property-name.json","punctuation.separator.key-value","punctuation.definition.template-expression","support.constant.property-value.css"],settings:{foreground:"#d73a49"}},{scope:"variable.parameter.function",settings:{foreground:"#E27F2D"}},{scope:["entity.name.type","entity.other.inherited-class","meta.function-call","meta.instance.constructor","entity.other.attribute-name","entity.name.function","constant.keyword.clojure"],settings:{foreground:"#6f42c1"}},{scope:["entity.name.tag","string.quoted","string.regexp","string.interpolated","string.template","keyword.other.template"],settings:{foreground:"#22863a"}},{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:["token.error-token","invalid"],settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}},{scope:"markup.inserted",settings:{foreground:"#22863a"}},{scope:"markup.deleted",settings:{foreground:"#d73a49"}},{scope:"markup.changed",settings:{foreground:"#005cc5"}},{scope:"meta.diff.header",settings:{foreground:"#6a737d"}},{scope:["constant.numeric.css","support.function.misc.css","constant.other.color.rgb-value.hex.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.function.end.bracket.round.css"],settings:{foreground:"#353535"}}],jht={type:$ht,colors:zht,tokenColors:Uht};var RW;const mve=Hht,Kht=jht,_ve=((RW=mve.contributes)===null||RW===void 0?void 0:RW.themes)||[],qht=_ve[0];_ve[0]=Object.assign({},qht,Kht);const Ght={id:"ExtendsEditor",name:"Extends Editor",dispose(){},activate(){nn.editor.onCloseTab((i,e)=>{i!==void 0&&e!==void 0&&nn.editor.closeTab(i,e)}),nn.editor.onCloseAll(i=>{i!==void 0&&nn.editor.closeAll(i)}),nn.editor.onCloseOther((i,e)=>{i&&e!==void 0&&nn.editor.closeOther(i,e)}),nn.editor.onCloseToLeft((i,e)=>{i&&e!==void 0&&nn.editor.closeToLeft(i,e)}),nn.editor.onCloseToRight((i,e)=>{i&&e!==void 0&&nn.editor.closeToRight(i,e)})}},Yht=[cct,Ght,uct,hct,fct,bUe,nve,cve,hve,gve,mve,lct];var qw;(function(i){i.beforeInit="before.init",i.beforeLoad="before.load"})(qw||(qw={}));class Zht extends kS{constructor(e){super(),this._config={extensions:Yht.concat(),defaultLocale:"en"},this.rendered=!1,this.initialLocaleService=t=>{const n=t.reduce((r,s)=>{var o;const a=((o=s.contributes)===null||o===void 0?void 0:o.languages)||[];return r.concat(a)},[]);nn.i18n.initialize(n,localStorage.getItem(Zz)||this._config.defaultLocale)},this.getConfig=()=>Object.assign({},this._config),this.render=t=>{if(!this.rendered){this.emit(qw.beforeInit);const[n,r]=nn.extension.splitLanguagesExts(this._config.extensions);this.initialLocaleService(n);const s=[C5,w5,v5,Cj,wj,Lj,xS,L5,ES,_j,yj,y5,vj,Sj,bj,b5,S5];nn.layout.onWorkbenchDidMount(()=>{this.rendered||(nn.monacoService.initWorkspace(nn.layout.container),Object.keys(s).forEach(o=>{var a;const u=s[o],d=je.resolve(u);(a=d.initView)===null||a===void 0||a.call(d)}),this.emit(qw.beforeLoad),nn.extension.load(r),this.rendered=!0)})}return t},this.onBeforeInit=t=>{this.subscribe(qw.beforeInit,t)},this.onBeforeLoad=t=>{this.subscribe(qw.beforeLoad,t)},e.defaultLocale&&(this._config.defaultLocale=e.defaultLocale),Array.isArray(e.extensions)&&this._config.extensions.push(...e.extensions)}}var Ej;(function(i){let e=null;function t(r){return e||(e=new Zht(r),e)}i.create=t;function n(){e=null}i.clearInstance=n})(Ej||(Ej={}));function Xht(i){return Ej.create(i)}function Pre(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vve={exports:{}},M4={exports:{}};const Qht={},Jht=Object.freeze(Object.defineProperty({__proto__:null,default:Qht},Symbol.toStringTag,{value:"Module"})),bve=Ive(Jht);M4.exports;var Fre;function eft(){return Fre||(Fre=1,function(i){(function(e,t){function n($,T){if(!$)throw new Error(T||"Assertion failed")}function r($,T){$.super_=T;var O=function(){};O.prototype=T.prototype,$.prototype=new O,$.prototype.constructor=$}function s($,T,O){if(s.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((T==="le"||T==="be")&&(O=T,T=10),this._init($||0,T||10,O||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=bve.Buffer}catch{}s.isBN=function(T){return T instanceof s?!0:T!==null&&typeof T=="object"&&T.constructor.wordSize===s.wordSize&&Array.isArray(T.words)},s.max=function(T,O){return T.cmp(O)>0?T:O},s.min=function(T,O){return T.cmp(O)<0?T:O},s.prototype._init=function(T,O,B){if(typeof T=="number")return this._initNumber(T,O,B);if(typeof T=="object")return this._initArray(T,O,B);O==="hex"&&(O=16),n(O===(O|0)&&O>=2&&O<=36),T=T.toString().replace(/\s+/g,"");var W=0;T[0]==="-"&&(W++,this.negative=1),W<T.length&&(O===16?this._parseHex(T,W,B):(this._parseBase(T,O,W),B==="le"&&this._initArray(this.toArray(),O,B)))},s.prototype._initNumber=function(T,O,B){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[T&67108863],this.length=1):T<4503599627370496?(this.words=[T&67108863,T/67108864&67108863],this.length=2):(n(T<9007199254740992),this.words=[T&67108863,T/67108864&67108863,1],this.length=3),B==="le"&&this._initArray(this.toArray(),O,B)},s.prototype._initArray=function(T,O,B){if(n(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var W=0;W<this.length;W++)this.words[W]=0;var j,U,q=0;if(B==="be")for(W=T.length-1,j=0;W>=0;W-=3)U=T[W]|T[W-1]<<8|T[W-2]<<16,this.words[j]|=U<<q&67108863,this.words[j+1]=U>>>26-q&67108863,q+=24,q>=26&&(q-=26,j++);else if(B==="le")for(W=0,j=0;W<T.length;W+=3)U=T[W]|T[W+1]<<8|T[W+2]<<16,this.words[j]|=U<<q&67108863,this.words[j+1]=U>>>26-q&67108863,q+=24,q>=26&&(q-=26,j++);return this.strip()};function a($,T){var O=$.charCodeAt(T);return O>=65&&O<=70?O-55:O>=97&&O<=102?O-87:O-48&15}function u($,T,O){var B=a($,O);return O-1>=T&&(B|=a($,O-1)<<4),B}s.prototype._parseHex=function(T,O,B){this.length=Math.ceil((T.length-O)/6),this.words=new Array(this.length);for(var W=0;W<this.length;W++)this.words[W]=0;var j=0,U=0,q;if(B==="be")for(W=T.length-1;W>=O;W-=2)q=u(T,O,W)<<j,this.words[U]|=q&67108863,j>=18?(j-=18,U+=1,this.words[U]|=q>>>26):j+=8;else{var z=T.length-O;for(W=z%2===0?O+1:O;W<T.length;W+=2)q=u(T,O,W)<<j,this.words[U]|=q&67108863,j>=18?(j-=18,U+=1,this.words[U]|=q>>>26):j+=8}this.strip()};function d($,T,O,B){for(var W=0,j=Math.min($.length,O),U=T;U<j;U++){var q=$.charCodeAt(U)-48;W*=B,q>=49?W+=q-49+10:q>=17?W+=q-17+10:W+=q}return W}s.prototype._parseBase=function(T,O,B){this.words=[0],this.length=1;for(var W=0,j=1;j<=67108863;j*=O)W++;W--,j=j/O|0;for(var U=T.length-B,q=U%W,z=Math.min(U,U-q)+B,k=0,K=B;K<z;K+=W)k=d(T,K,K+W,O),this.imuln(j),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k);if(q!==0){var fe=1;for(k=d(T,K,T.length,O),K=0;K<q;K++)fe*=O;this.imuln(fe),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k)}this.strip()},s.prototype.copy=function(T){T.words=new Array(this.length);for(var O=0;O<this.length;O++)T.words[O]=this.words[O];T.length=this.length,T.negative=this.negative,T.red=this.red},s.prototype.clone=function(){var T=new s(null);return this.copy(T),T},s.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(T,O){T=T||10,O=O|0||1;var B;if(T===16||T==="hex"){B="";for(var W=0,j=0,U=0;U<this.length;U++){var q=this.words[U],z=((q<<W|j)&16777215).toString(16);j=q>>>24-W&16777215,j!==0||U!==this.length-1?B=h[6-z.length]+z+B:B=z+B,W+=2,W>=26&&(W-=26,U--)}for(j!==0&&(B=j.toString(16)+B);B.length%O!==0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}if(T===(T|0)&&T>=2&&T<=36){var k=f[T],K=p[T];B="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var ne=fe.modn(K).toString(T);fe=fe.idivn(K),fe.isZero()?B=ne+B:B=h[k-ne.length]+ne+B}for(this.isZero()&&(B="0"+B);B.length%O!==0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=this.words[1]*67108864:this.length===3&&this.words[2]===1?T+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(T,O){return n(typeof o<"u"),this.toArrayLike(o,T,O)},s.prototype.toArray=function(T,O){return this.toArrayLike(Array,T,O)},s.prototype.toArrayLike=function(T,O,B){var W=this.byteLength(),j=B||Math.max(1,W);n(W<=j,"byte array longer than desired length"),n(j>0,"Requested array length <= 0"),this.strip();var U=O==="le",q=new T(j),z,k,K=this.clone();if(U){for(k=0;!K.isZero();k++)z=K.andln(255),K.iushrn(8),q[k]=z;for(;k<j;k++)q[k]=0}else{for(k=0;k<j-W;k++)q[k]=0;for(k=0;!K.isZero();k++)z=K.andln(255),K.iushrn(8),q[j-k-1]=z}return q},Math.clz32?s.prototype._countBits=function(T){return 32-Math.clz32(T)}:s.prototype._countBits=function(T){var O=T,B=0;return O>=4096&&(B+=13,O>>>=13),O>=64&&(B+=7,O>>>=7),O>=8&&(B+=4,O>>>=4),O>=2&&(B+=2,O>>>=2),B+O},s.prototype._zeroBits=function(T){if(T===0)return 26;var O=T,B=0;return O&8191||(B+=13,O>>>=13),O&127||(B+=7,O>>>=7),O&15||(B+=4,O>>>=4),O&3||(B+=2,O>>>=2),O&1||B++,B},s.prototype.bitLength=function(){var T=this.words[this.length-1],O=this._countBits(T);return(this.length-1)*26+O};function m($){for(var T=new Array($.bitLength()),O=0;O<T.length;O++){var B=O/26|0,W=O%26;T[O]=($.words[B]&1<<W)>>>W}return T}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,O=0;O<this.length;O++){var B=this._zeroBits(this.words[O]);if(T+=B,B!==26)break}return T},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},s.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var O=0;O<T.length;O++)this.words[O]=this.words[O]|T.words[O];return this.strip()},s.prototype.ior=function(T){return n((this.negative|T.negative)===0),this.iuor(T)},s.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},s.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},s.prototype.iuand=function(T){var O;this.length>T.length?O=T:O=this;for(var B=0;B<O.length;B++)this.words[B]=this.words[B]&T.words[B];return this.length=O.length,this.strip()},s.prototype.iand=function(T){return n((this.negative|T.negative)===0),this.iuand(T)},s.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},s.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},s.prototype.iuxor=function(T){var O,B;this.length>T.length?(O=this,B=T):(O=T,B=this);for(var W=0;W<B.length;W++)this.words[W]=O.words[W]^B.words[W];if(this!==O)for(;W<O.length;W++)this.words[W]=O.words[W];return this.length=O.length,this.strip()},s.prototype.ixor=function(T){return n((this.negative|T.negative)===0),this.iuxor(T)},s.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},s.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},s.prototype.inotn=function(T){n(typeof T=="number"&&T>=0);var O=Math.ceil(T/26)|0,B=T%26;this._expand(O),B>0&&O--;for(var W=0;W<O;W++)this.words[W]=~this.words[W]&67108863;return B>0&&(this.words[W]=~this.words[W]&67108863>>26-B),this.strip()},s.prototype.notn=function(T){return this.clone().inotn(T)},s.prototype.setn=function(T,O){n(typeof T=="number"&&T>=0);var B=T/26|0,W=T%26;return this._expand(B+1),O?this.words[B]=this.words[B]|1<<W:this.words[B]=this.words[B]&~(1<<W),this.strip()},s.prototype.iadd=function(T){var O;if(this.negative!==0&&T.negative===0)return this.negative=0,O=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,O=this.isub(T),T.negative=1,O._normSign();var B,W;this.length>T.length?(B=this,W=T):(B=T,W=this);for(var j=0,U=0;U<W.length;U++)O=(B.words[U]|0)+(W.words[U]|0)+j,this.words[U]=O&67108863,j=O>>>26;for(;j!==0&&U<B.length;U++)O=(B.words[U]|0)+j,this.words[U]=O&67108863,j=O>>>26;if(this.length=B.length,j!==0)this.words[this.length]=j,this.length++;else if(B!==this)for(;U<B.length;U++)this.words[U]=B.words[U];return this},s.prototype.add=function(T){var O;return T.negative!==0&&this.negative===0?(T.negative=0,O=this.sub(T),T.negative^=1,O):T.negative===0&&this.negative!==0?(this.negative=0,O=T.sub(this),this.negative=1,O):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},s.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var O=this.iadd(T);return T.negative=1,O._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var B=this.cmp(T);if(B===0)return this.negative=0,this.length=1,this.words[0]=0,this;var W,j;B>0?(W=this,j=T):(W=T,j=this);for(var U=0,q=0;q<j.length;q++)O=(W.words[q]|0)-(j.words[q]|0)+U,U=O>>26,this.words[q]=O&67108863;for(;U!==0&&q<W.length;q++)O=(W.words[q]|0)+U,U=O>>26,this.words[q]=O&67108863;if(U===0&&q<W.length&&W!==this)for(;q<W.length;q++)this.words[q]=W.words[q];return this.length=Math.max(this.length,q),W!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(T){return this.clone().isub(T)};function v($,T,O){O.negative=T.negative^$.negative;var B=$.length+T.length|0;O.length=B,B=B-1|0;var W=$.words[0]|0,j=T.words[0]|0,U=W*j,q=U&67108863,z=U/67108864|0;O.words[0]=q;for(var k=1;k<B;k++){for(var K=z>>>26,fe=z&67108863,ne=Math.min(k,T.length-1),be=Math.max(0,k-$.length+1);be<=ne;be++){var De=k-be|0;W=$.words[De]|0,j=T.words[be]|0,U=W*j+fe,K+=U/67108864|0,fe=U&67108863}O.words[k]=fe|0,z=K|0}return z!==0?O.words[k]=z|0:O.length--,O.strip()}var b=function(T,O,B){var W=T.words,j=O.words,U=B.words,q=0,z,k,K,fe=W[0]|0,ne=fe&8191,be=fe>>>13,De=W[1]|0,Ve=De&8191,rt=De>>>13,At=W[2]|0,Me=At&8191,ut=At>>>13,Ct=W[3]|0,Xe=Ct&8191,sn=Ct>>>13,Kt=W[4]|0,dn=Kt&8191,Sn=Kt>>>13,Wn=W[5]|0,Jn=Wn&8191,si=Wn>>>13,jn=W[6]|0,Pt=jn&8191,pn=jn>>>13,Ci=W[7]|0,Te=Ci&8191,Fe=Ci>>>13,pt=W[8]|0,at=pt&8191,bt=pt>>>13,wi=W[9]|0,Vt=wi&8191,Tt=wi>>>13,qt=j[0]|0,Gt=qt&8191,Bt=qt>>>13,fr=j[1]|0,ei=fr&8191,He=fr>>>13,Fa=j[2]|0,Vn=Fa&8191,ti=Fa>>>13,Go=j[3]|0,vn=Go&8191,ir=Go>>>13,sl=j[4]|0,qi=sl&8191,Ye=sl>>>13,no=j[5]|0,ke=no&8191,Ee=no>>>13,Ae=j[6]|0,oe=Ae&8191,ae=Ae>>>13,pe=j[7]|0,J=pe&8191,ve=pe>>>13,$e=j[8]|0,Re=$e&8191,dt=$e>>>13,Yt=j[9]|0,I=Yt&8191,F=Yt>>>13;B.negative=T.negative^O.negative,B.length=19,z=Math.imul(ne,Gt),k=Math.imul(ne,Bt),k=k+Math.imul(be,Gt)|0,K=Math.imul(be,Bt);var te=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(te>>>26)|0,te&=67108863,z=Math.imul(Ve,Gt),k=Math.imul(Ve,Bt),k=k+Math.imul(rt,Gt)|0,K=Math.imul(rt,Bt),z=z+Math.imul(ne,ei)|0,k=k+Math.imul(ne,He)|0,k=k+Math.imul(be,ei)|0,K=K+Math.imul(be,He)|0;var ie=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(ie>>>26)|0,ie&=67108863,z=Math.imul(Me,Gt),k=Math.imul(Me,Bt),k=k+Math.imul(ut,Gt)|0,K=Math.imul(ut,Bt),z=z+Math.imul(Ve,ei)|0,k=k+Math.imul(Ve,He)|0,k=k+Math.imul(rt,ei)|0,K=K+Math.imul(rt,He)|0,z=z+Math.imul(ne,Vn)|0,k=k+Math.imul(ne,ti)|0,k=k+Math.imul(be,Vn)|0,K=K+Math.imul(be,ti)|0;var me=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(me>>>26)|0,me&=67108863,z=Math.imul(Xe,Gt),k=Math.imul(Xe,Bt),k=k+Math.imul(sn,Gt)|0,K=Math.imul(sn,Bt),z=z+Math.imul(Me,ei)|0,k=k+Math.imul(Me,He)|0,k=k+Math.imul(ut,ei)|0,K=K+Math.imul(ut,He)|0,z=z+Math.imul(Ve,Vn)|0,k=k+Math.imul(Ve,ti)|0,k=k+Math.imul(rt,Vn)|0,K=K+Math.imul(rt,ti)|0,z=z+Math.imul(ne,vn)|0,k=k+Math.imul(ne,ir)|0,k=k+Math.imul(be,vn)|0,K=K+Math.imul(be,ir)|0;var le=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(le>>>26)|0,le&=67108863,z=Math.imul(dn,Gt),k=Math.imul(dn,Bt),k=k+Math.imul(Sn,Gt)|0,K=Math.imul(Sn,Bt),z=z+Math.imul(Xe,ei)|0,k=k+Math.imul(Xe,He)|0,k=k+Math.imul(sn,ei)|0,K=K+Math.imul(sn,He)|0,z=z+Math.imul(Me,Vn)|0,k=k+Math.imul(Me,ti)|0,k=k+Math.imul(ut,Vn)|0,K=K+Math.imul(ut,ti)|0,z=z+Math.imul(Ve,vn)|0,k=k+Math.imul(Ve,ir)|0,k=k+Math.imul(rt,vn)|0,K=K+Math.imul(rt,ir)|0,z=z+Math.imul(ne,qi)|0,k=k+Math.imul(ne,Ye)|0,k=k+Math.imul(be,qi)|0,K=K+Math.imul(be,Ye)|0;var Ie=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,z=Math.imul(Jn,Gt),k=Math.imul(Jn,Bt),k=k+Math.imul(si,Gt)|0,K=Math.imul(si,Bt),z=z+Math.imul(dn,ei)|0,k=k+Math.imul(dn,He)|0,k=k+Math.imul(Sn,ei)|0,K=K+Math.imul(Sn,He)|0,z=z+Math.imul(Xe,Vn)|0,k=k+Math.imul(Xe,ti)|0,k=k+Math.imul(sn,Vn)|0,K=K+Math.imul(sn,ti)|0,z=z+Math.imul(Me,vn)|0,k=k+Math.imul(Me,ir)|0,k=k+Math.imul(ut,vn)|0,K=K+Math.imul(ut,ir)|0,z=z+Math.imul(Ve,qi)|0,k=k+Math.imul(Ve,Ye)|0,k=k+Math.imul(rt,qi)|0,K=K+Math.imul(rt,Ye)|0,z=z+Math.imul(ne,ke)|0,k=k+Math.imul(ne,Ee)|0,k=k+Math.imul(be,ke)|0,K=K+Math.imul(be,Ee)|0;var Pe=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,z=Math.imul(Pt,Gt),k=Math.imul(Pt,Bt),k=k+Math.imul(pn,Gt)|0,K=Math.imul(pn,Bt),z=z+Math.imul(Jn,ei)|0,k=k+Math.imul(Jn,He)|0,k=k+Math.imul(si,ei)|0,K=K+Math.imul(si,He)|0,z=z+Math.imul(dn,Vn)|0,k=k+Math.imul(dn,ti)|0,k=k+Math.imul(Sn,Vn)|0,K=K+Math.imul(Sn,ti)|0,z=z+Math.imul(Xe,vn)|0,k=k+Math.imul(Xe,ir)|0,k=k+Math.imul(sn,vn)|0,K=K+Math.imul(sn,ir)|0,z=z+Math.imul(Me,qi)|0,k=k+Math.imul(Me,Ye)|0,k=k+Math.imul(ut,qi)|0,K=K+Math.imul(ut,Ye)|0,z=z+Math.imul(Ve,ke)|0,k=k+Math.imul(Ve,Ee)|0,k=k+Math.imul(rt,ke)|0,K=K+Math.imul(rt,Ee)|0,z=z+Math.imul(ne,oe)|0,k=k+Math.imul(ne,ae)|0,k=k+Math.imul(be,oe)|0,K=K+Math.imul(be,ae)|0;var Ze=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,z=Math.imul(Te,Gt),k=Math.imul(Te,Bt),k=k+Math.imul(Fe,Gt)|0,K=Math.imul(Fe,Bt),z=z+Math.imul(Pt,ei)|0,k=k+Math.imul(Pt,He)|0,k=k+Math.imul(pn,ei)|0,K=K+Math.imul(pn,He)|0,z=z+Math.imul(Jn,Vn)|0,k=k+Math.imul(Jn,ti)|0,k=k+Math.imul(si,Vn)|0,K=K+Math.imul(si,ti)|0,z=z+Math.imul(dn,vn)|0,k=k+Math.imul(dn,ir)|0,k=k+Math.imul(Sn,vn)|0,K=K+Math.imul(Sn,ir)|0,z=z+Math.imul(Xe,qi)|0,k=k+Math.imul(Xe,Ye)|0,k=k+Math.imul(sn,qi)|0,K=K+Math.imul(sn,Ye)|0,z=z+Math.imul(Me,ke)|0,k=k+Math.imul(Me,Ee)|0,k=k+Math.imul(ut,ke)|0,K=K+Math.imul(ut,Ee)|0,z=z+Math.imul(Ve,oe)|0,k=k+Math.imul(Ve,ae)|0,k=k+Math.imul(rt,oe)|0,K=K+Math.imul(rt,ae)|0,z=z+Math.imul(ne,J)|0,k=k+Math.imul(ne,ve)|0,k=k+Math.imul(be,J)|0,K=K+Math.imul(be,ve)|0;var ot=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(ot>>>26)|0,ot&=67108863,z=Math.imul(at,Gt),k=Math.imul(at,Bt),k=k+Math.imul(bt,Gt)|0,K=Math.imul(bt,Bt),z=z+Math.imul(Te,ei)|0,k=k+Math.imul(Te,He)|0,k=k+Math.imul(Fe,ei)|0,K=K+Math.imul(Fe,He)|0,z=z+Math.imul(Pt,Vn)|0,k=k+Math.imul(Pt,ti)|0,k=k+Math.imul(pn,Vn)|0,K=K+Math.imul(pn,ti)|0,z=z+Math.imul(Jn,vn)|0,k=k+Math.imul(Jn,ir)|0,k=k+Math.imul(si,vn)|0,K=K+Math.imul(si,ir)|0,z=z+Math.imul(dn,qi)|0,k=k+Math.imul(dn,Ye)|0,k=k+Math.imul(Sn,qi)|0,K=K+Math.imul(Sn,Ye)|0,z=z+Math.imul(Xe,ke)|0,k=k+Math.imul(Xe,Ee)|0,k=k+Math.imul(sn,ke)|0,K=K+Math.imul(sn,Ee)|0,z=z+Math.imul(Me,oe)|0,k=k+Math.imul(Me,ae)|0,k=k+Math.imul(ut,oe)|0,K=K+Math.imul(ut,ae)|0,z=z+Math.imul(Ve,J)|0,k=k+Math.imul(Ve,ve)|0,k=k+Math.imul(rt,J)|0,K=K+Math.imul(rt,ve)|0,z=z+Math.imul(ne,Re)|0,k=k+Math.imul(ne,dt)|0,k=k+Math.imul(be,Re)|0,K=K+Math.imul(be,dt)|0;var kt=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(kt>>>26)|0,kt&=67108863,z=Math.imul(Vt,Gt),k=Math.imul(Vt,Bt),k=k+Math.imul(Tt,Gt)|0,K=Math.imul(Tt,Bt),z=z+Math.imul(at,ei)|0,k=k+Math.imul(at,He)|0,k=k+Math.imul(bt,ei)|0,K=K+Math.imul(bt,He)|0,z=z+Math.imul(Te,Vn)|0,k=k+Math.imul(Te,ti)|0,k=k+Math.imul(Fe,Vn)|0,K=K+Math.imul(Fe,ti)|0,z=z+Math.imul(Pt,vn)|0,k=k+Math.imul(Pt,ir)|0,k=k+Math.imul(pn,vn)|0,K=K+Math.imul(pn,ir)|0,z=z+Math.imul(Jn,qi)|0,k=k+Math.imul(Jn,Ye)|0,k=k+Math.imul(si,qi)|0,K=K+Math.imul(si,Ye)|0,z=z+Math.imul(dn,ke)|0,k=k+Math.imul(dn,Ee)|0,k=k+Math.imul(Sn,ke)|0,K=K+Math.imul(Sn,Ee)|0,z=z+Math.imul(Xe,oe)|0,k=k+Math.imul(Xe,ae)|0,k=k+Math.imul(sn,oe)|0,K=K+Math.imul(sn,ae)|0,z=z+Math.imul(Me,J)|0,k=k+Math.imul(Me,ve)|0,k=k+Math.imul(ut,J)|0,K=K+Math.imul(ut,ve)|0,z=z+Math.imul(Ve,Re)|0,k=k+Math.imul(Ve,dt)|0,k=k+Math.imul(rt,Re)|0,K=K+Math.imul(rt,dt)|0,z=z+Math.imul(ne,I)|0,k=k+Math.imul(ne,F)|0,k=k+Math.imul(be,I)|0,K=K+Math.imul(be,F)|0;var Ft=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,z=Math.imul(Vt,ei),k=Math.imul(Vt,He),k=k+Math.imul(Tt,ei)|0,K=Math.imul(Tt,He),z=z+Math.imul(at,Vn)|0,k=k+Math.imul(at,ti)|0,k=k+Math.imul(bt,Vn)|0,K=K+Math.imul(bt,ti)|0,z=z+Math.imul(Te,vn)|0,k=k+Math.imul(Te,ir)|0,k=k+Math.imul(Fe,vn)|0,K=K+Math.imul(Fe,ir)|0,z=z+Math.imul(Pt,qi)|0,k=k+Math.imul(Pt,Ye)|0,k=k+Math.imul(pn,qi)|0,K=K+Math.imul(pn,Ye)|0,z=z+Math.imul(Jn,ke)|0,k=k+Math.imul(Jn,Ee)|0,k=k+Math.imul(si,ke)|0,K=K+Math.imul(si,Ee)|0,z=z+Math.imul(dn,oe)|0,k=k+Math.imul(dn,ae)|0,k=k+Math.imul(Sn,oe)|0,K=K+Math.imul(Sn,ae)|0,z=z+Math.imul(Xe,J)|0,k=k+Math.imul(Xe,ve)|0,k=k+Math.imul(sn,J)|0,K=K+Math.imul(sn,ve)|0,z=z+Math.imul(Me,Re)|0,k=k+Math.imul(Me,dt)|0,k=k+Math.imul(ut,Re)|0,K=K+Math.imul(ut,dt)|0,z=z+Math.imul(Ve,I)|0,k=k+Math.imul(Ve,F)|0,k=k+Math.imul(rt,I)|0,K=K+Math.imul(rt,F)|0;var Ot=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,z=Math.imul(Vt,Vn),k=Math.imul(Vt,ti),k=k+Math.imul(Tt,Vn)|0,K=Math.imul(Tt,ti),z=z+Math.imul(at,vn)|0,k=k+Math.imul(at,ir)|0,k=k+Math.imul(bt,vn)|0,K=K+Math.imul(bt,ir)|0,z=z+Math.imul(Te,qi)|0,k=k+Math.imul(Te,Ye)|0,k=k+Math.imul(Fe,qi)|0,K=K+Math.imul(Fe,Ye)|0,z=z+Math.imul(Pt,ke)|0,k=k+Math.imul(Pt,Ee)|0,k=k+Math.imul(pn,ke)|0,K=K+Math.imul(pn,Ee)|0,z=z+Math.imul(Jn,oe)|0,k=k+Math.imul(Jn,ae)|0,k=k+Math.imul(si,oe)|0,K=K+Math.imul(si,ae)|0,z=z+Math.imul(dn,J)|0,k=k+Math.imul(dn,ve)|0,k=k+Math.imul(Sn,J)|0,K=K+Math.imul(Sn,ve)|0,z=z+Math.imul(Xe,Re)|0,k=k+Math.imul(Xe,dt)|0,k=k+Math.imul(sn,Re)|0,K=K+Math.imul(sn,dt)|0,z=z+Math.imul(Me,I)|0,k=k+Math.imul(Me,F)|0,k=k+Math.imul(ut,I)|0,K=K+Math.imul(ut,F)|0;var wt=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(wt>>>26)|0,wt&=67108863,z=Math.imul(Vt,vn),k=Math.imul(Vt,ir),k=k+Math.imul(Tt,vn)|0,K=Math.imul(Tt,ir),z=z+Math.imul(at,qi)|0,k=k+Math.imul(at,Ye)|0,k=k+Math.imul(bt,qi)|0,K=K+Math.imul(bt,Ye)|0,z=z+Math.imul(Te,ke)|0,k=k+Math.imul(Te,Ee)|0,k=k+Math.imul(Fe,ke)|0,K=K+Math.imul(Fe,Ee)|0,z=z+Math.imul(Pt,oe)|0,k=k+Math.imul(Pt,ae)|0,k=k+Math.imul(pn,oe)|0,K=K+Math.imul(pn,ae)|0,z=z+Math.imul(Jn,J)|0,k=k+Math.imul(Jn,ve)|0,k=k+Math.imul(si,J)|0,K=K+Math.imul(si,ve)|0,z=z+Math.imul(dn,Re)|0,k=k+Math.imul(dn,dt)|0,k=k+Math.imul(Sn,Re)|0,K=K+Math.imul(Sn,dt)|0,z=z+Math.imul(Xe,I)|0,k=k+Math.imul(Xe,F)|0,k=k+Math.imul(sn,I)|0,K=K+Math.imul(sn,F)|0;var oi=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(oi>>>26)|0,oi&=67108863,z=Math.imul(Vt,qi),k=Math.imul(Vt,Ye),k=k+Math.imul(Tt,qi)|0,K=Math.imul(Tt,Ye),z=z+Math.imul(at,ke)|0,k=k+Math.imul(at,Ee)|0,k=k+Math.imul(bt,ke)|0,K=K+Math.imul(bt,Ee)|0,z=z+Math.imul(Te,oe)|0,k=k+Math.imul(Te,ae)|0,k=k+Math.imul(Fe,oe)|0,K=K+Math.imul(Fe,ae)|0,z=z+Math.imul(Pt,J)|0,k=k+Math.imul(Pt,ve)|0,k=k+Math.imul(pn,J)|0,K=K+Math.imul(pn,ve)|0,z=z+Math.imul(Jn,Re)|0,k=k+Math.imul(Jn,dt)|0,k=k+Math.imul(si,Re)|0,K=K+Math.imul(si,dt)|0,z=z+Math.imul(dn,I)|0,k=k+Math.imul(dn,F)|0,k=k+Math.imul(Sn,I)|0,K=K+Math.imul(Sn,F)|0;var Hn=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,z=Math.imul(Vt,ke),k=Math.imul(Vt,Ee),k=k+Math.imul(Tt,ke)|0,K=Math.imul(Tt,Ee),z=z+Math.imul(at,oe)|0,k=k+Math.imul(at,ae)|0,k=k+Math.imul(bt,oe)|0,K=K+Math.imul(bt,ae)|0,z=z+Math.imul(Te,J)|0,k=k+Math.imul(Te,ve)|0,k=k+Math.imul(Fe,J)|0,K=K+Math.imul(Fe,ve)|0,z=z+Math.imul(Pt,Re)|0,k=k+Math.imul(Pt,dt)|0,k=k+Math.imul(pn,Re)|0,K=K+Math.imul(pn,dt)|0,z=z+Math.imul(Jn,I)|0,k=k+Math.imul(Jn,F)|0,k=k+Math.imul(si,I)|0,K=K+Math.imul(si,F)|0;var rr=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(rr>>>26)|0,rr&=67108863,z=Math.imul(Vt,oe),k=Math.imul(Vt,ae),k=k+Math.imul(Tt,oe)|0,K=Math.imul(Tt,ae),z=z+Math.imul(at,J)|0,k=k+Math.imul(at,ve)|0,k=k+Math.imul(bt,J)|0,K=K+Math.imul(bt,ve)|0,z=z+Math.imul(Te,Re)|0,k=k+Math.imul(Te,dt)|0,k=k+Math.imul(Fe,Re)|0,K=K+Math.imul(Fe,dt)|0,z=z+Math.imul(Pt,I)|0,k=k+Math.imul(Pt,F)|0,k=k+Math.imul(pn,I)|0,K=K+Math.imul(pn,F)|0;var $i=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+($i>>>26)|0,$i&=67108863,z=Math.imul(Vt,J),k=Math.imul(Vt,ve),k=k+Math.imul(Tt,J)|0,K=Math.imul(Tt,ve),z=z+Math.imul(at,Re)|0,k=k+Math.imul(at,dt)|0,k=k+Math.imul(bt,Re)|0,K=K+Math.imul(bt,dt)|0,z=z+Math.imul(Te,I)|0,k=k+Math.imul(Te,F)|0,k=k+Math.imul(Fe,I)|0,K=K+Math.imul(Fe,F)|0;var Ba=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,z=Math.imul(Vt,Re),k=Math.imul(Vt,dt),k=k+Math.imul(Tt,Re)|0,K=Math.imul(Tt,dt),z=z+Math.imul(at,I)|0,k=k+Math.imul(at,F)|0,k=k+Math.imul(bt,I)|0,K=K+Math.imul(bt,F)|0;var ol=(q+z|0)+((k&8191)<<13)|0;q=(K+(k>>>13)|0)+(ol>>>26)|0,ol&=67108863,z=Math.imul(Vt,I),k=Math.imul(Vt,F),k=k+Math.imul(Tt,I)|0,K=Math.imul(Tt,F);var Ag=(q+z|0)+((k&8191)<<13)|0;return q=(K+(k>>>13)|0)+(Ag>>>26)|0,Ag&=67108863,U[0]=te,U[1]=ie,U[2]=me,U[3]=le,U[4]=Ie,U[5]=Pe,U[6]=Ze,U[7]=ot,U[8]=kt,U[9]=Ft,U[10]=Ot,U[11]=wt,U[12]=oi,U[13]=Hn,U[14]=rr,U[15]=$i,U[16]=Ba,U[17]=ol,U[18]=Ag,q!==0&&(U[19]=q,B.length++),B};Math.imul||(b=v);function L($,T,O){O.negative=T.negative^$.negative,O.length=$.length+T.length;for(var B=0,W=0,j=0;j<O.length-1;j++){var U=W;W=0;for(var q=B&67108863,z=Math.min(j,T.length-1),k=Math.max(0,j-$.length+1);k<=z;k++){var K=j-k,fe=$.words[K]|0,ne=T.words[k]|0,be=fe*ne,De=be&67108863;U=U+(be/67108864|0)|0,De=De+q|0,q=De&67108863,U=U+(De>>>26)|0,W+=U>>>26,U&=67108863}O.words[j]=q,B=U,U=W}return B!==0?O.words[j]=B:O.length--,O.strip()}function S($,T,O){var B=new y;return B.mulp($,T,O)}s.prototype.mulTo=function(T,O){var B,W=this.length+T.length;return this.length===10&&T.length===10?B=b(this,T,O):W<63?B=v(this,T,O):W<1024?B=L(this,T,O):B=S(this,T,O),B};function y($,T){this.x=$,this.y=T}y.prototype.makeRBT=function(T){for(var O=new Array(T),B=s.prototype._countBits(T)-1,W=0;W<T;W++)O[W]=this.revBin(W,B,T);return O},y.prototype.revBin=function(T,O,B){if(T===0||T===B-1)return T;for(var W=0,j=0;j<O;j++)W|=(T&1)<<O-j-1,T>>=1;return W},y.prototype.permute=function(T,O,B,W,j,U){for(var q=0;q<U;q++)W[q]=O[T[q]],j[q]=B[T[q]]},y.prototype.transform=function(T,O,B,W,j,U){this.permute(U,T,O,B,W,j);for(var q=1;q<j;q<<=1)for(var z=q<<1,k=Math.cos(2*Math.PI/z),K=Math.sin(2*Math.PI/z),fe=0;fe<j;fe+=z)for(var ne=k,be=K,De=0;De<q;De++){var Ve=B[fe+De],rt=W[fe+De],At=B[fe+De+q],Me=W[fe+De+q],ut=ne*At-be*Me;Me=ne*Me+be*At,At=ut,B[fe+De]=Ve+At,W[fe+De]=rt+Me,B[fe+De+q]=Ve-At,W[fe+De+q]=rt-Me,De!==z&&(ut=k*ne-K*be,be=k*be+K*ne,ne=ut)}},y.prototype.guessLen13b=function(T,O){var B=Math.max(O,T)|1,W=B&1,j=0;for(B=B/2|0;B;B=B>>>1)j++;return 1<<j+1+W},y.prototype.conjugate=function(T,O,B){if(!(B<=1))for(var W=0;W<B/2;W++){var j=T[W];T[W]=T[B-W-1],T[B-W-1]=j,j=O[W],O[W]=-O[B-W-1],O[B-W-1]=-j}},y.prototype.normalize13b=function(T,O){for(var B=0,W=0;W<O/2;W++){var j=Math.round(T[2*W+1]/O)*8192+Math.round(T[2*W]/O)+B;T[W]=j&67108863,j<67108864?B=0:B=j/67108864|0}return T},y.prototype.convert13b=function(T,O,B,W){for(var j=0,U=0;U<O;U++)j=j+(T[U]|0),B[2*U]=j&8191,j=j>>>13,B[2*U+1]=j&8191,j=j>>>13;for(U=2*O;U<W;++U)B[U]=0;n(j===0),n((j&-8192)===0)},y.prototype.stub=function(T){for(var O=new Array(T),B=0;B<T;B++)O[B]=0;return O},y.prototype.mulp=function(T,O,B){var W=2*this.guessLen13b(T.length,O.length),j=this.makeRBT(W),U=this.stub(W),q=new Array(W),z=new Array(W),k=new Array(W),K=new Array(W),fe=new Array(W),ne=new Array(W),be=B.words;be.length=W,this.convert13b(T.words,T.length,q,W),this.convert13b(O.words,O.length,K,W),this.transform(q,U,z,k,W,j),this.transform(K,U,fe,ne,W,j);for(var De=0;De<W;De++){var Ve=z[De]*fe[De]-k[De]*ne[De];k[De]=z[De]*ne[De]+k[De]*fe[De],z[De]=Ve}return this.conjugate(z,k,W),this.transform(z,k,be,U,W,j),this.conjugate(be,U,W),this.normalize13b(be,W),B.negative=T.negative^O.negative,B.length=T.length+O.length,B.strip()},s.prototype.mul=function(T){var O=new s(null);return O.words=new Array(this.length+T.length),this.mulTo(T,O)},s.prototype.mulf=function(T){var O=new s(null);return O.words=new Array(this.length+T.length),S(this,T,O)},s.prototype.imul=function(T){return this.clone().mulTo(T,this)},s.prototype.imuln=function(T){n(typeof T=="number"),n(T<67108864);for(var O=0,B=0;B<this.length;B++){var W=(this.words[B]|0)*T,j=(W&67108863)+(O&67108863);O>>=26,O+=W/67108864|0,O+=j>>>26,this.words[B]=j&67108863}return O!==0&&(this.words[B]=O,this.length++),this},s.prototype.muln=function(T){return this.clone().imuln(T)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(T){var O=m(T);if(O.length===0)return new s(1);for(var B=this,W=0;W<O.length&&O[W]===0;W++,B=B.sqr());if(++W<O.length)for(var j=B.sqr();W<O.length;W++,j=j.sqr())O[W]!==0&&(B=B.mul(j));return B},s.prototype.iushln=function(T){n(typeof T=="number"&&T>=0);var O=T%26,B=(T-O)/26,W=67108863>>>26-O<<26-O,j;if(O!==0){var U=0;for(j=0;j<this.length;j++){var q=this.words[j]&W,z=(this.words[j]|0)-q<<O;this.words[j]=z|U,U=q>>>26-O}U&&(this.words[j]=U,this.length++)}if(B!==0){for(j=this.length-1;j>=0;j--)this.words[j+B]=this.words[j];for(j=0;j<B;j++)this.words[j]=0;this.length+=B}return this.strip()},s.prototype.ishln=function(T){return n(this.negative===0),this.iushln(T)},s.prototype.iushrn=function(T,O,B){n(typeof T=="number"&&T>=0);var W;O?W=(O-O%26)/26:W=0;var j=T%26,U=Math.min((T-j)/26,this.length),q=67108863^67108863>>>j<<j,z=B;if(W-=U,W=Math.max(0,W),z){for(var k=0;k<U;k++)z.words[k]=this.words[k];z.length=U}if(U!==0)if(this.length>U)for(this.length-=U,k=0;k<this.length;k++)this.words[k]=this.words[k+U];else this.words[0]=0,this.length=1;var K=0;for(k=this.length-1;k>=0&&(K!==0||k>=W);k--){var fe=this.words[k]|0;this.words[k]=K<<26-j|fe>>>j,K=fe&q}return z&&K!==0&&(z.words[z.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(T,O,B){return n(this.negative===0),this.iushrn(T,O,B)},s.prototype.shln=function(T){return this.clone().ishln(T)},s.prototype.ushln=function(T){return this.clone().iushln(T)},s.prototype.shrn=function(T){return this.clone().ishrn(T)},s.prototype.ushrn=function(T){return this.clone().iushrn(T)},s.prototype.testn=function(T){n(typeof T=="number"&&T>=0);var O=T%26,B=(T-O)/26,W=1<<O;if(this.length<=B)return!1;var j=this.words[B];return!!(j&W)},s.prototype.imaskn=function(T){n(typeof T=="number"&&T>=0);var O=T%26,B=(T-O)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=B)return this;if(O!==0&&B++,this.length=Math.min(B,this.length),O!==0){var W=67108863^67108863>>>O<<O;this.words[this.length-1]&=W}return this.strip()},s.prototype.maskn=function(T){return this.clone().imaskn(T)},s.prototype.iaddn=function(T){return n(typeof T=="number"),n(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(this.words[0]|0)<T?(this.words[0]=T-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},s.prototype._iaddn=function(T){this.words[0]+=T;for(var O=0;O<this.length&&this.words[O]>=67108864;O++)this.words[O]-=67108864,O===this.length-1?this.words[O+1]=1:this.words[O+1]++;return this.length=Math.max(this.length,O+1),this},s.prototype.isubn=function(T){if(n(typeof T=="number"),n(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var O=0;O<this.length&&this.words[O]<0;O++)this.words[O]+=67108864,this.words[O+1]-=1;return this.strip()},s.prototype.addn=function(T){return this.clone().iaddn(T)},s.prototype.subn=function(T){return this.clone().isubn(T)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(T,O,B){var W=T.length+B,j;this._expand(W);var U,q=0;for(j=0;j<T.length;j++){U=(this.words[j+B]|0)+q;var z=(T.words[j]|0)*O;U-=z&67108863,q=(U>>26)-(z/67108864|0),this.words[j+B]=U&67108863}for(;j<this.length-B;j++)U=(this.words[j+B]|0)+q,q=U>>26,this.words[j+B]=U&67108863;if(q===0)return this.strip();for(n(q===-1),q=0,j=0;j<this.length;j++)U=-(this.words[j]|0)+q,q=U>>26,this.words[j]=U&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(T,O){var B=this.length-T.length,W=this.clone(),j=T,U=j.words[j.length-1]|0,q=this._countBits(U);B=26-q,B!==0&&(j=j.ushln(B),W.iushln(B),U=j.words[j.length-1]|0);var z=W.length-j.length,k;if(O!=="mod"){k=new s(null),k.length=z+1,k.words=new Array(k.length);for(var K=0;K<k.length;K++)k.words[K]=0}var fe=W.clone()._ishlnsubmul(j,1,z);fe.negative===0&&(W=fe,k&&(k.words[z]=1));for(var ne=z-1;ne>=0;ne--){var be=(W.words[j.length+ne]|0)*67108864+(W.words[j.length+ne-1]|0);for(be=Math.min(be/U|0,67108863),W._ishlnsubmul(j,be,ne);W.negative!==0;)be--,W.negative=0,W._ishlnsubmul(j,1,ne),W.isZero()||(W.negative^=1);k&&(k.words[ne]=be)}return k&&k.strip(),W.strip(),O!=="div"&&B!==0&&W.iushrn(B),{div:k||null,mod:W}},s.prototype.divmod=function(T,O,B){if(n(!T.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var W,j,U;return this.negative!==0&&T.negative===0?(U=this.neg().divmod(T,O),O!=="mod"&&(W=U.div.neg()),O!=="div"&&(j=U.mod.neg(),B&&j.negative!==0&&j.iadd(T)),{div:W,mod:j}):this.negative===0&&T.negative!==0?(U=this.divmod(T.neg(),O),O!=="mod"&&(W=U.div.neg()),{div:W,mod:U.mod}):this.negative&T.negative?(U=this.neg().divmod(T.neg(),O),O!=="div"&&(j=U.mod.neg(),B&&j.negative!==0&&j.isub(T)),{div:U.div,mod:j}):T.length>this.length||this.cmp(T)<0?{div:new s(0),mod:this}:T.length===1?O==="div"?{div:this.divn(T.words[0]),mod:null}:O==="mod"?{div:null,mod:new s(this.modn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new s(this.modn(T.words[0]))}:this._wordDiv(T,O)},s.prototype.div=function(T){return this.divmod(T,"div",!1).div},s.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},s.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},s.prototype.divRound=function(T){var O=this.divmod(T);if(O.mod.isZero())return O.div;var B=O.div.negative!==0?O.mod.isub(T):O.mod,W=T.ushrn(1),j=T.andln(1),U=B.cmp(W);return U<0||j===1&&U===0?O.div:O.div.negative!==0?O.div.isubn(1):O.div.iaddn(1)},s.prototype.modn=function(T){n(T<=67108863);for(var O=(1<<26)%T,B=0,W=this.length-1;W>=0;W--)B=(O*B+(this.words[W]|0))%T;return B},s.prototype.idivn=function(T){n(T<=67108863);for(var O=0,B=this.length-1;B>=0;B--){var W=(this.words[B]|0)+O*67108864;this.words[B]=W/T|0,O=W%T}return this.strip()},s.prototype.divn=function(T){return this.clone().idivn(T)},s.prototype.egcd=function(T){n(T.negative===0),n(!T.isZero());var O=this,B=T.clone();O.negative!==0?O=O.umod(T):O=O.clone();for(var W=new s(1),j=new s(0),U=new s(0),q=new s(1),z=0;O.isEven()&&B.isEven();)O.iushrn(1),B.iushrn(1),++z;for(var k=B.clone(),K=O.clone();!O.isZero();){for(var fe=0,ne=1;!(O.words[0]&ne)&&fe<26;++fe,ne<<=1);if(fe>0)for(O.iushrn(fe);fe-- >0;)(W.isOdd()||j.isOdd())&&(W.iadd(k),j.isub(K)),W.iushrn(1),j.iushrn(1);for(var be=0,De=1;!(B.words[0]&De)&&be<26;++be,De<<=1);if(be>0)for(B.iushrn(be);be-- >0;)(U.isOdd()||q.isOdd())&&(U.iadd(k),q.isub(K)),U.iushrn(1),q.iushrn(1);O.cmp(B)>=0?(O.isub(B),W.isub(U),j.isub(q)):(B.isub(O),U.isub(W),q.isub(j))}return{a:U,b:q,gcd:B.iushln(z)}},s.prototype._invmp=function(T){n(T.negative===0),n(!T.isZero());var O=this,B=T.clone();O.negative!==0?O=O.umod(T):O=O.clone();for(var W=new s(1),j=new s(0),U=B.clone();O.cmpn(1)>0&&B.cmpn(1)>0;){for(var q=0,z=1;!(O.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(O.iushrn(q);q-- >0;)W.isOdd()&&W.iadd(U),W.iushrn(1);for(var k=0,K=1;!(B.words[0]&K)&&k<26;++k,K<<=1);if(k>0)for(B.iushrn(k);k-- >0;)j.isOdd()&&j.iadd(U),j.iushrn(1);O.cmp(B)>=0?(O.isub(B),W.isub(j)):(B.isub(O),j.isub(W))}var fe;return O.cmpn(1)===0?fe=W:fe=j,fe.cmpn(0)<0&&fe.iadd(T),fe},s.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var O=this.clone(),B=T.clone();O.negative=0,B.negative=0;for(var W=0;O.isEven()&&B.isEven();W++)O.iushrn(1),B.iushrn(1);do{for(;O.isEven();)O.iushrn(1);for(;B.isEven();)B.iushrn(1);var j=O.cmp(B);if(j<0){var U=O;O=B,B=U}else if(j===0||B.cmpn(1)===0)break;O.isub(B)}while(!0);return B.iushln(W)},s.prototype.invm=function(T){return this.egcd(T).a.umod(T)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(T){return this.words[0]&T},s.prototype.bincn=function(T){n(typeof T=="number");var O=T%26,B=(T-O)/26,W=1<<O;if(this.length<=B)return this._expand(B+1),this.words[B]|=W,this;for(var j=W,U=B;j!==0&&U<this.length;U++){var q=this.words[U]|0;q+=j,j=q>>>26,q&=67108863,this.words[U]=q}return j!==0&&(this.words[U]=j,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(T){var O=T<0;if(this.negative!==0&&!O)return-1;if(this.negative===0&&O)return 1;this.strip();var B;if(this.length>1)B=1;else{O&&(T=-T),n(T<=67108863,"Number is too big");var W=this.words[0]|0;B=W===T?0:W<T?-1:1}return this.negative!==0?-B|0:B},s.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var O=this.ucmp(T);return this.negative!==0?-O|0:O},s.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var O=0,B=this.length-1;B>=0;B--){var W=this.words[B]|0,j=T.words[B]|0;if(W!==j){W<j?O=-1:W>j&&(O=1);break}}return O},s.prototype.gtn=function(T){return this.cmpn(T)===1},s.prototype.gt=function(T){return this.cmp(T)===1},s.prototype.gten=function(T){return this.cmpn(T)>=0},s.prototype.gte=function(T){return this.cmp(T)>=0},s.prototype.ltn=function(T){return this.cmpn(T)===-1},s.prototype.lt=function(T){return this.cmp(T)===-1},s.prototype.lten=function(T){return this.cmpn(T)<=0},s.prototype.lte=function(T){return this.cmp(T)<=0},s.prototype.eqn=function(T){return this.cmpn(T)===0},s.prototype.eq=function(T){return this.cmp(T)===0},s.red=function(T){return new Y(T)},s.prototype.toRed=function(T){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(T){return this.red=T,this},s.prototype.forceRed=function(T){return n(!this.red,"Already a number in reduction context"),this._forceRed(T)},s.prototype.redAdd=function(T){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},s.prototype.redIAdd=function(T){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},s.prototype.redSub=function(T){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},s.prototype.redISub=function(T){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},s.prototype.redShl=function(T){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},s.prototype.redMul=function(T){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},s.prototype.redIMul=function(T){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(T){return n(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var E={k256:null,p224:null,p192:null,p25519:null};function A($,T){this.name=$,this.p=new s(T,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var T=new s(null);return T.words=new Array(Math.ceil(this.n/13)),T},A.prototype.ireduce=function(T){var O=T,B;do this.split(O,this.tmp),O=this.imulK(O),O=O.iadd(this.tmp),B=O.bitLength();while(B>this.n);var W=B<this.n?-1:O.ucmp(this.p);return W===0?(O.words[0]=0,O.length=1):W>0?O.isub(this.p):O.strip!==void 0?O.strip():O._strip(),O},A.prototype.split=function(T,O){T.iushrn(this.n,0,O)},A.prototype.imulK=function(T){return T.imul(this.k)};function N(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(N,A),N.prototype.split=function(T,O){for(var B=4194303,W=Math.min(T.length,9),j=0;j<W;j++)O.words[j]=T.words[j];if(O.length=W,T.length<=9){T.words[0]=0,T.length=1;return}var U=T.words[9];for(O.words[O.length++]=U&B,j=10;j<T.length;j++){var q=T.words[j]|0;T.words[j-10]=(q&B)<<4|U>>>22,U=q}U>>>=22,T.words[j-10]=U,U===0&&T.length>10?T.length-=10:T.length-=9},N.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var O=0,B=0;B<T.length;B++){var W=T.words[B]|0;O+=W*977,T.words[B]=O&67108863,O=W*64+(O/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T};function V(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(V,A);function M(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(M,A);function R(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(R,A),R.prototype.imulK=function(T){for(var O=0,B=0;B<T.length;B++){var W=(T.words[B]|0)*19+O,j=W&67108863;W>>>=26,T.words[B]=j,O=W}return O!==0&&(T.words[T.length++]=O),T},s._prime=function(T){if(E[T])return E[T];var O;if(T==="k256")O=new N;else if(T==="p224")O=new V;else if(T==="p192")O=new M;else if(T==="p25519")O=new R;else throw new Error("Unknown prime "+T);return E[T]=O,O};function Y($){if(typeof $=="string"){var T=s._prime($);this.m=T.p,this.prime=T}else n($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}Y.prototype._verify1=function(T){n(T.negative===0,"red works only with positives"),n(T.red,"red works only with red numbers")},Y.prototype._verify2=function(T,O){n((T.negative|O.negative)===0,"red works only with positives"),n(T.red&&T.red===O.red,"red works only with red numbers")},Y.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):T.umod(this.m)._forceRed(this)},Y.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},Y.prototype.add=function(T,O){this._verify2(T,O);var B=T.add(O);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},Y.prototype.iadd=function(T,O){this._verify2(T,O);var B=T.iadd(O);return B.cmp(this.m)>=0&&B.isub(this.m),B},Y.prototype.sub=function(T,O){this._verify2(T,O);var B=T.sub(O);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},Y.prototype.isub=function(T,O){this._verify2(T,O);var B=T.isub(O);return B.cmpn(0)<0&&B.iadd(this.m),B},Y.prototype.shl=function(T,O){return this._verify1(T),this.imod(T.ushln(O))},Y.prototype.imul=function(T,O){return this._verify2(T,O),this.imod(T.imul(O))},Y.prototype.mul=function(T,O){return this._verify2(T,O),this.imod(T.mul(O))},Y.prototype.isqr=function(T){return this.imul(T,T.clone())},Y.prototype.sqr=function(T){return this.mul(T,T)},Y.prototype.sqrt=function(T){if(T.isZero())return T.clone();var O=this.m.andln(3);if(n(O%2===1),O===3){var B=this.m.add(new s(1)).iushrn(2);return this.pow(T,B)}for(var W=this.m.subn(1),j=0;!W.isZero()&&W.andln(1)===0;)j++,W.iushrn(1);n(!W.isZero());var U=new s(1).toRed(this),q=U.redNeg(),z=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new s(2*k*k).toRed(this);this.pow(k,z).cmp(q)!==0;)k.redIAdd(q);for(var K=this.pow(k,W),fe=this.pow(T,W.addn(1).iushrn(1)),ne=this.pow(T,W),be=j;ne.cmp(U)!==0;){for(var De=ne,Ve=0;De.cmp(U)!==0;Ve++)De=De.redSqr();n(Ve<be);var rt=this.pow(K,new s(1).iushln(be-Ve-1));fe=fe.redMul(rt),K=rt.redSqr(),ne=ne.redMul(K),be=Ve}return fe},Y.prototype.invm=function(T){var O=T._invmp(this.m);return O.negative!==0?(O.negative=0,this.imod(O).redNeg()):this.imod(O)},Y.prototype.pow=function(T,O){if(O.isZero())return new s(1).toRed(this);if(O.cmpn(1)===0)return T.clone();var B=4,W=new Array(1<<B);W[0]=new s(1).toRed(this),W[1]=T;for(var j=2;j<W.length;j++)W[j]=this.mul(W[j-1],T);var U=W[0],q=0,z=0,k=O.bitLength()%26;for(k===0&&(k=26),j=O.length-1;j>=0;j--){for(var K=O.words[j],fe=k-1;fe>=0;fe--){var ne=K>>fe&1;if(U!==W[0]&&(U=this.sqr(U)),ne===0&&q===0){z=0;continue}q<<=1,q|=ne,z++,!(z!==B&&(j!==0||fe!==0))&&(U=this.mul(U,W[q]),z=0,q=0)}k=26}return U},Y.prototype.convertTo=function(T){var O=T.umod(this.m);return O===T?O.clone():O},Y.prototype.convertFrom=function(T){var O=T.clone();return O.red=null,O},s.mont=function(T){return new X(T)};function X($){Y.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(X,Y),X.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},X.prototype.convertFrom=function(T){var O=this.imod(T.mul(this.rinv));return O.red=null,O},X.prototype.imul=function(T,O){if(T.isZero()||O.isZero())return T.words[0]=0,T.length=1,T;var B=T.imul(O),W=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=B.isub(W).iushrn(this.shift),U=j;return j.cmp(this.m)>=0?U=j.isub(this.m):j.cmpn(0)<0&&(U=j.iadd(this.m)),U._forceRed(this)},X.prototype.mul=function(T,O){if(T.isZero()||O.isZero())return new s(0)._forceRed(this);var B=T.mul(O),W=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=B.isub(W).iushrn(this.shift),U=j;return j.cmp(this.m)>=0?U=j.isub(this.m):j.cmpn(0)<0&&(U=j.iadd(this.m)),U._forceRed(this)},X.prototype.invm=function(T){var O=this.imod(T._invmp(this.m).mul(this.r2));return O._forceRed(this)}})(i,ta)}(M4)),M4.exports}/**@license
 * LIPS is Pretty Simple - simple scheme like lisp in JavaScript
 *
 * Copyright (c) 2018-2019 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * includes:
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 */(function(i){(function(e,t){i.exports?i.exports=t(e,eft()):e.lips=t(e,e.BN)})(typeof ta<"u"?ta:window,function(e,t,n){function r(I,F){var te=!1,ie=!0,me=I.document,le=me.documentElement,Ie=me.addEventListener,Pe=Ie?"addEventListener":"attachEvent",Ze=Ie?"removeEventListener":"detachEvent",ot=Ie?"":"on",kt=function(Ot){Ot.type=="readystatechange"&&me.readyState!="complete"||((Ot.type=="load"?I:me)[Ze](ot+Ot.type,kt,!1),!te&&(te=!0)&&F.call(I,Ot.type||Ot))},Ft=function(){try{le.doScroll("left")}catch{setTimeout(Ft,50);return}kt("poll")};if(me.readyState=="complete")F.call(I,"lazy");else{if(!Ie&&le.doScroll){try{ie=!I.frameElement}catch{}ie&&Ft()}me[Pe](ot+"DOMContentLoaded",kt,!1),me[Pe](ot+"readystatechange",kt,!1),I[Pe](ot+"load",kt,!1)}}e.fetch||(e.fetch=function(I,F){return F=F||{},new Promise((te,ie)=>{let me=new XMLHttpRequest;me.open(F.method||"get",I,!0);for(let Ie in F.headers)me.setRequestHeader(Ie,F.headers[Ie]);me.withCredentials=F.credentials=="include",me.onload=()=>{te(le())},me.onerror=ie,me.send(F.body||null);function le(){let Ie=[],Pe=[],Ze={},ot;return me.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(kt,Ft,Ot)=>{Ie.push(Ft=Ft.toLowerCase()),Pe.push([Ft,Ot]),ot=Ze[Ft],Ze[Ft]=ot?`${ot},${Ot}`:Ot}),{ok:(me.status/100|0)==2,status:me.status,statusText:me.statusText,url:me.responseURL,clone:le,text:()=>Promise.resolve(me.responseText),json:()=>Promise.resolve(me.responseText).then(JSON.parse),blob:()=>Promise.resolve(new Blob([me.response])),headers:{keys:()=>Ie,entries:()=>Pe,get:kt=>Ze[kt.toLowerCase()],has:kt=>kt.toLowerCase()in Ze}}}})});var s=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,o=/^[-+]?[0-9]+([eE][-+]?[0-9]+)?$/,a=/^([-+]?((\.[0-9]+|[0-9]+\.[0-9]+)([eE][-+]?[0-9]+)?)|[0-9]+\.)$/;function u(I){function F(ie){if(ie.match(/^['"]/)){if(ie==='""'||ie==="''")return"";var me=ie[0],le=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+me,"g");ie=ie.replace(le,"$1")}return JSON.parse('"'+ie.replace(/\n/g,"\\n")+'"')}var te=I.match(s);return te?new RegExp(te[1],te[2]):I.match(/['"]/)?F(I):I.match(o)?He(parseFloat(I)):I.match(a)?He(parseFloat(I),!0):I==="nil"?fe:I==="true"?!0:I==="false"?!1:new k(I)}function d(I){return!(["(",")"].includes(I)||I.match(s)||I.match(/['"]/)||I.match(o)||I.match(a)||["nil","true","false"].includes(I))}var h=/("(?:\\[\S\s]|[^"])*"|\/(?! )[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|\(|\)|$)|;.*)/g,f=/"(?:\\[\S\s]|[^"])*"/g;function p(){var I=Object.keys(S).map(v).join("|");return new RegExp(`("(?:\\\\[\\S\\s]|[^"])*"|\\/(?! )[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimy]*(?=\\s|\\(|\\)|$)|\\(|\\)|'|"(?:\\\\[\\S\\s]|[^"])+|\\n|(?:\\\\[\\S\\s]|[^"])*"|;.*|(?:[-+]?(?:(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)[0-9]|\\.{2,}|${I}|[^(\\s)]+)`,"gim")}function m(I,F=1){return I[I.length-F]}function v(I){if(typeof I=="string"){var F=/([-\\^$[\]()+{}?*.|])/g;return I.replace(F,"\\$1")}}function b(I){var F=p();I=I.replace(/\n\r|\r/g,`
`);var te=0,ie=0,me=[],le=[],Ie=0;return I.split(h).filter(Boolean).forEach(function(Pe){if(Pe.match(h)){if(Ie=0,le.length){var Ze=m(le);if(Ze.token.match(/\n/)){var ot=Ze.token.split(`
`).pop();Ie+=ot.length}else Ie+=Ze.token.length;Ie+=Ze.col}var kt={col:Ie,line:ie,token:Pe,offset:te};me.push(kt),le.push(kt),te+=Pe.length,Ie+=Pe.length,ie+=(Pe.match(`
`)||[]).length;return}Pe.split(F).filter(Boolean).forEach(function(Ft){var Ot={col:Ie,line:ie,token:Ft,offset:te};Ie+=Ft.length,te+=Ft.length,me.push(Ot),le.push(Ot),Ft===`
`&&(++ie,le=[],Ie=0)})}),me}function L(I,F){return F?b(I):b(I).map(function(te){return te.token.trim()}).filter(function(te){return te&&!te.match(/^;/)})}var S={"'":new k("quote"),"`":new k("quasiquote"),",@":new k("unquote-splicing"),",":new k("unquote")};function y(I){typeof I=="string"&&(I=L(I));var F=[],te=[],ie=null,me=Object.keys(S),le=me.map(Ot=>S[Ot].name),Ie=0,Pe=!1,Ze=[],ot=[],kt=0;function Ft(){var Ot=F[F.length-1];Ot instanceof Array&&Ot[0]instanceof k&&le.includes(Ot[0].name)&&F.length>1&&!Ot[0].literal&&(F.pop(),F[F.length-1].length===1&&F[F.length-1][0]instanceof k?F[F.length-1].push(Ot):F[F.length-1]instanceof ne?F[F.length-1].cdr instanceof ne?F[F.length-1]=new ne(F[F.length-1],ne.fromArray(Ot)):F[F.length-1].cdr=ne.fromArray(Ot):F[F.length-1].push(Ot))}if(I.forEach(function(Ot){var wt=F[F.length-1];if(me.indexOf(Ot)!==-1)kt++,ie=Ot,F.push([S[ie]]),ie||(ot=[]),ot.push(ie);else if(ie&&(Ze.push(ot),ot=[]),Ot==="(")Pe=!0,Ie++,F.push([]),ie=null,kt=0;else if(Ot==="."&&!Pe)F[F.length-1]=ne.fromArray(wt);else if(Ot===")"){if(Ie--,!F.length)throw new Error("Unbalanced parenthesis");if(F.length===1)te.push(F.pop());else if(F.length>1){var oi=F.pop();if(wt=F[F.length-1],wt instanceof Array?wt.push(oi):wt instanceof ne&&wt.append(ne.fromArray(oi)),Ze.length)for(ot=Ze.pop();ot.length;)Ft(),ot.pop();else Ft()}Ie===0&&F.length&&te.push(F.pop())}else{Pe=!1;var Hn=u(Ot);if(ie){for(;kt--;)F[F.length-1].push(Hn),Hn=F.pop();Ze.pop(),kt=0,ie=!1}else Hn instanceof k&&le.includes(Hn.name)&&(Hn.literal=!0);if(wt=F[F.length-1],wt instanceof ne)for(var rr=wt;;)if(rr.cdr===fe){Hn instanceof Array?rr.cdr=ne.fromArray(Hn):rr.cdr=Hn;break}else rr=rr.cdr;else F.length?wt.push(Hn):te.push(Hn)}}),!I.filter(Ot=>Ot.match(/^[()]$/)).length&&F.length&&(te=te.concat(F),F=[]),F.length)throw new Error("Unbalanced parenthesis 2");return te.map(Ot=>Ot instanceof Array?ne.fromArray(Ot):Ot)}function E(I,F=ie=>ie,te=null){if(Kt(I)){var ie=I.then(F);return te===null?ie:ie.catch(te)}return F(I)}function A(I,F){if(F instanceof RegExp)return te=>String(te).match(F);if(typeof F!="function")throw new Error(`${I} argument need to be a function or RegExp`);return F}function N(I,F,te){return F&&(te?I.__doc__=F:I.__doc__=V(F)),I}function V(I){return I.split(`
`).map(F=>F.trim()).join(`
`)}function M(I,F=1){var te=I.length;if(F<=0)throw Error(`previousSexp: Invlaid argument sexp = ${F}`);e:for(;F--&&te>=0;){for(var ie=1;ie>0;){var me=I[--te];if(!me)break e;me==="("||me.token==="("?ie--:(me===")"||me.token===")")&&ie++}te--}return I.slice(te+1)}function R(I){if(!I||!I.length)return 0;var F=I.length;if(I[F-1].token===`
`)return 0;for(;--F;)if(I[F].token===`
`){var te=(I[F+1]||{}).token;if(te)return te.length}return 0}function Y(I,F){return te(I,F)===F.length;function te(ie,me){function le(){return Pe>0&&ot>0&&ie[Pe-1]===me[ot-1]&&ie[Pe+1]===me[ot]}function Ie(){return ie[Pe]===Symbol.for("symbol")&&!d(me[ot])}for(var Pe=0,Ze={},ot=0;ot<me.length;++ot){if(typeof ie[Pe]>"u")return ot;if(me[ot].trim()){if(ie[Pe]instanceof T){if(ie[Pe].flag==="+"){for(var kt;ot<me.length&&(kt=te(ie[Pe].pattern,me.slice(ot)),kt!==-1);)ot+=kt;if(kt===-1&&me[ot]&&!ie[Pe+1])return-1;Pe++,ot-=1;continue}else if(ie[Pe].flag==="?"){kt=te(ie[Pe].pattern,me.slice(ot)),kt===-1?ot-=2:Pe++;continue}}if(ie[Pe]instanceof RegExp){if(!me[ot].match(ie[Pe]))return-1}else if(typeof ie[Pe]=="string"){if(ie[Pe]!==me[ot])return-1}else if(typeof ie[Pe]=="symbol"){if(ie[Pe]===Symbol.for("*")){if(Ze[Pe]=Ze[Pe]||0,me[ot]==="("?Ze[Pe]++:me[ot]===")"&&Ze[Pe]--,le())ot-=1;else if(typeof ie[Pe+1]<"u"&&Ze[Pe]===0&&ie[Pe+1]!==me[ot+1]||Ze[Pe]>0)continue}else if(Ie())return-1}else if(ie[Pe]instanceof Array){var Ft=te(ie[Pe],me.slice(ot));if(Ft===-1||Ft+ot>me.length)return-1;ot+=Ft-1,Pe++;continue}else return-1;Pe++}}return ie.length!==Pe?-1:me.length}}function X(I){this._code=I.replace(/\r/g,"")}X.defaults={offset:0,indent:2,specials:[/^define/,"lambda","let","let*"]},X.match=Y,X.prototype._options=function(F){var te=X.defaults;if(typeof F>"u")return Object.assign({},te);var ie=F&&F.specials||[];return Object.assign({},te,F,{specials:te.specials.concat(ie)})},X.prototype.indent=function(F){var te=L(this._code,!0);return this._indent(te,F)},X.matchSpecial=function(I,F){var te=F.specials;if(te.indexOf(I)!==-1)return!0;var ie=te.filter(me=>me instanceof RegExp);for(let me of ie)if(I.match(me))return!0;return!1},X.prototype._indent=function(F,te){var ie=this._options(te),me=R(F),le=M(F);if(le&&le.length){if(le[0].line>0&&(ie.offset=0),le.toString()===F.toString()&&$e(le))return ie.offset+le[0].col;if(le.length===1)return ie.offset+le[0].col+1;if(X.matchSpecial(le[1].token,ie))return ie.offset+le[0].col+ie.indent;if(le[0].line<le[1].line)return ie.offset+le[0].col+1;if(le.length>3&&le[1].line===le[3].line)return le[1].token==="("?ie.offset+le[1].col:ie.offset+le[3].col;if(le[0].line===le[1].line)return ie.offset+ie.indent+le[0].col;for(var Ie=le.slice(2),Pe=0;Pe<Ie.length;++Pe){var Ze=Ie[Pe];if(Ze.token.trim())return Ze.col}}else return 0;return me+ie.indent};function $(I){this.pattern=I}$.prototype.match=function(I){return I.match(this.pattern)};function T(I,F){this.pattern=I,this.flag=F}X.Pattern=T,X.Ahead=$;const O=new $(/[^)]/),B=Symbol.for("*"),W=new T(["(",B,")"],"+"),j=new T([Symbol.for("symbol")],"?"),U=new T(["(",Symbol.for("symbol"),B,")"],"+");X.rules=[[["(","begin"],1],[["(","begin",W],1,O],[["(",/^let\*?$/,j,"(",U,")"],1],[["(",/^let\*?$/,j,"(",U],2,O],[["(",/^let\*?$/,j,["(",U,")"],W],1,O],[[/(?!lambda)/,"(",B,")"],1,O],[["(","if",/[^()]/],1],[["(","if",/[^()]/,B],1],[["(","if",["(",B,")"]],1],[["(","if",["(",B,")"],/[^()]/],1],[["(","if",["(",B,")"],["(",B,")"]],1,O],[["(",/^(define|lambda)/,["(",B,")"],f],1],[["(",/^(define|lambda)/,"(",B,")"],1],[["(",/^(define|lambda)/,["(",B,")"],f,W],1,O],[["(",/^(define|lambda)/,["(",B,")"],W],1,O]],X.prototype.break=function(){var I=this._code.replace(/\n[ \t]*/g,`
 `);const F=Ze=>Ze.token.match(f)?Ze.token:Ze.token.replace(/\s+/," ");var te=L(I,!0).map(F).filter(Ze=>Ze!==`
`);const{rules:ie}=X;for(let Ze=0;Ze<te.length;++Ze)if(te[Ze].trim()){var me=te.slice(0,Ze),le={};ie.map(ot=>ot[1]).forEach(ot=>{le[ot]||(le[ot]=M(me,ot))});for(let[ot,kt,Ft]of ie){var Ie=Y(ot,le[kt].filter(Ot=>Ot.trim())),Pe=te.slice(Ze).find(Ot=>Ot.trim());if(Ie&&(Ft instanceof $&&Ft.match(Pe)||!Ft)){te.splice(Ze,0,`
`),Ze++;continue}}}return this._code=te.join(""),this},X.prototype._spaces=function(I){return new Array(I+1).join(" ")},X.prototype.format=function(F){for(var te=this._code.replace(/[ \t]*\n[ \t]*/g,`
 `),ie=L(te,!0),me=this._options(F),le=0,Ie=0,Pe=0;Pe<ie.length;++Pe){var Ze=ie[Pe];if(Ze.token===`
`&&(le=this._indent(ie.slice(0,Pe),me),Ie+=le,ie[Pe+1])){ie[Pe+1].token=this._spaces(le),le--,Ie--;for(var ot=Pe+2;ot<ie.length;++ot)if(ie[ot].offset+=Ie,ie[ot].col+=le,ie[ot].token===`
`){Pe=ot-1;break}}}return ie.map(kt=>{if(kt.token.match(f)&&kt.token.match(/\n/)){var Ft=new Array(kt.col+1).join(" "),Ot=kt.token.split(`
`);kt.token=[Ot[0]].concat(Ot.slice(1).map(wt=>Ft+wt)).join(`
`)}return kt.token}).join("")};function q(I,F){var te=Object.prototype.toString,ie="[object Array]",me=[],le=F&&I||I.slice(),Ie;if(!I.length)return me;Ie=le.pop();do te.call(Ie)===ie?le.push.apply(le,Ie):me.push(Ie);while(le.length&&(Ie=le.pop())!==n);return me.reverse(),me}function z(I){return typeof I=="symbol"||typeof I=="object"&&Object.prototype.toString.call(I)==="[object Symbol]"}function k(I){if(typeof this<"u"&&this.constructor!==k||typeof this>"u")return new k(I);this.name=I}k.is=function(I,F){return I instanceof k&&(typeof F=="string"&&I.name===F||F instanceof RegExp&&F.test(I.name))},k.prototype.toJSON=k.prototype.toString=function(){return z(this.name)?this.name.toString().replace(/^Symbol\(([^)]+)\)/,"$1"):this.name};function K(){}K.prototype.toString=function(){return"()"};var fe=new K;function ne(I,F){if(typeof this<"u"&&this.constructor!==ne||typeof this>"u")return new ne(I,F);this.car=I,this.cdr=F}function be(){return new ne(n,fe)}function De(I,F){return function(ie){if(Ye(I,ie,["pair","nil"]),ie instanceof ne&&ie.isEmptyList())return[];for(var me=[],le=ie;le instanceof ne;){if(le.haveCycles("cdr"))break;var Ie=le.car;F&&Ie instanceof ne&&(Ie=this.get(I).call(this,Ie)),me.push(Ie),le=le.cdr}return me}}ne.prototype.flatten=function(){return ne.fromArray(q(this.toArray()))},ne.prototype.length=function(){if(Me(this))return 0;for(var I=0,F=this;!(!F||F===fe||!(F instanceof ne)||F.haveCycles("cdr"));)I++,F=F.cdr;return I},ne.prototype.clone=function(){var I=new Map;function F(te){if(te instanceof ne){if(I.has(te))return I.get(te);var ie=new ne;return I.set(te,ie),ie.car=F(te.car),ie.cdr=F(te.cdr),ie.cycles=te.cycles,ie}return te}return F(this)},ne.prototype.toArray=function(){if(this.isEmptyList())return[];var I=[];return this.car instanceof ne?I.push(this.car.toArray()):I.push(this.car),this.cdr instanceof ne&&(I=I.concat(this.cdr.toArray())),I},ne.prototype.isEmptyList=function(){return typeof this.car>"u"&&this.cdr===fe},ne.fromArray=function(I){if(I instanceof ne)return I;if(I.length&&!(I instanceof Array)&&(I=[...I]),I.length===0)return be();var F;return I[0]instanceof Array?F=ne.fromArray(I[0]):F=I[0],I.length===1?new ne(F,fe):new ne(F,ne.fromArray(I.slice(1)))},ne.prototype.toObject=function(){for(var I=this,F={};I instanceof ne&&I.car instanceof ne;){var te=I.car,ie=te.car;ie instanceof k&&(ie=ie.name);var me=te.cdr;me instanceof ne&&(me=me.toObject()),me instanceof He&&(me=me.valueOf()),F[ie]=me,I=I.cdr}return F},ne.fromPairs=function(I){return I.reduce((F,te)=>new ne(new ne(new k(te[0]),te[1]),F),fe)},ne.fromObject=function(I){var F=Object.keys(I).map(te=>[te,I[te]]);return ne.fromPairs(F)},ne.prototype.reduce=function(I){for(var F=this,te=fe;F!==fe;)te=I(te,F.car),F=F.cdr;return te},ne.prototype.reverse=function(){if(this.haveCycles())throw new Error("You can't reverse list that have cycles");for(var I=this,F=fe;I!==fe;){var te=I.cdr;I.cdr=F,F=I,I=te}return F},ne.prototype.transform=function(I){function F(te){if(te instanceof ne){if(te.replace)return delete te.replace,te;var ie=I(te.car);ie instanceof ne&&(ie=F(ie));var me=I(te.cdr);return me instanceof ne&&(me=F(me)),new ne(ie,me)}return te}return F(this)},ne.prototype.map=function(I){return typeof this.car<"u"?new ne(I(this.car),Me(this.cdr)?fe:this.cdr.map(I)):fe};function Ve(I){if(typeof I=="function")return"<#function "+(I.name||"anonymous")+">";if(typeof I=="string")return JSON.stringify(I).replace(/\\n/g,`
`);if(Kt(I))return"<#Promise>";if(I instanceof k||I instanceof He||I instanceof RegExp||I instanceof ne||I===fe)return I.toString();if(I instanceof Array)return I.map(Ve);if(typeof I=="object"){if(I===null)return"null";var F=I.constructor.name;return F==="Object"?JSON.stringify(I):"<#object("+I.constructor.name+")>"}else if(typeof I<"u")return I}ne.prototype.markCycles=function(){return rt(this),this},ne.prototype.haveCycles=function(I=null){return I?!!(this.cycles&&this.cycles[I]):this.haveCycles("car")||this.haveCycles("cdr")};function rt(I){var F=[],te=[];function ie(le){if(le instanceof ne&&F.includes(le))return te.includes(le)||te.push(le),`#${te.length-1}#`}function me(le){if(le instanceof ne){F.push(le);var Ie={},Pe=ie(le.car),Ze=ie(le.cdr);Pe?Ie.car=Pe:me(le.car),Ze?Ie.cdr=Ze:me(le.cdr),Pe||Ze?le.cycles=Ie:le.cycles&&delete le.cycles}}me(I)}ne.prototype.toString=function(){var I=["("];if(this.car!==n){var F;if(this.cycles&&this.cycles.car?F=this.cycles.car:F=Ve(this.car),F!==n&&I.push(F),this.cdr instanceof ne)if(this.cycles&&this.cycles.cdr)I.push(" . "),I.push(this.cycles.cdr);else{var te;this.cycles&&this.cycles.cdr&&(te=this.cycles.cdr);var ie=this.cdr.toString(te).replace(/^\(|\)$/g,"");I.push(" "),I.push(ie)}else typeof this.cdr<"u"&&this.cdr!==fe&&(I=I.concat([" . ",Ve(this.cdr)]))}return I.push(")"),I.join("")},ne.prototype.set=function(I,F){this[I]=F,F instanceof ne&&this.markCycles()},ne.prototype.append=function(I){if(I instanceof Array)return this.append(ne.fromArray(I));var F=this;if(F.car===n)I instanceof ne?(this.car=I.car,this.cdr=I.cdr):this.car=I;else if(I!==fe){for(;F instanceof ne&&F.cdr!==fe;)F=F.cdr;F.cdr=I}return this};function At(I,F){return I instanceof He&&F instanceof He?I.cmp(F)===0:typeof I=="number"||typeof F=="number"?He(I).cmp(He(F)):I instanceof k&&F instanceof k?I.name===F.name:I===F}function Me(I){return I instanceof ne&&I.isEmptyList()||I===fe}function ut(I,F,te){if(typeof this<"u"&&this.constructor!==ut||typeof this>"u")return new ut(I,F);Ye("Macro",I,"string",1),Ye("Macro",F,"function",2),te&&(this.__doc__=V(te)),this.name=I,this.fn=F}ut.defmacro=function(I,F,te){var ie=new ut(I,F,te);return ie.defmacro=!0,ie},ut.prototype.invoke=function(I,{env:F,dynamic_scope:te,error:ie},me){var le={dynamic_scope:te,error:ie,macro_expand:me},Ie=this.fn.call(F,I,le,this.name);return me?ti(Ie):Ie},ut.prototype.toString=function(){return"#<Macro "+this.name+">"};var Ct="define-macro";function Xe(I){return async function(F,te){var ie=te.env=this;async function me(Ie){if(Ie instanceof ne&&Ie.car instanceof k)try{var Pe=ie.get(Ie.car);if(Pe instanceof ut&&Pe.defmacro){var Ze=await Pe.invoke(Ie.cdr,te,!0);if(Ze instanceof ne)return Ze}}catch{}var ot=Ie.car;ot instanceof ne&&(ot=await me(ot));var kt=Ie.cdr;kt instanceof ne&&(kt=await me(kt));var Ft=new ne(ot,kt);return Ft}var le=F;if(I)return ti((await me(F)).car);for(;le=await me(F),F.toString()!==le.toString();)F=le;return ti(le.car)}}function sn(I){return typeof I>"u"||I===fe||I===null}function Kt(I){return I instanceof Promise||I&&typeof I<"u"&&typeof I.then=="function"}function dn(I,F,...te){let ie=function(...me){const le=[...ie.__bind.args,...me];return ie.__bind.fn.apply(F,le)};return si(ie,"name",I.name),si(ie,"__bound__",!0),I.__doc__&&(ie.__doc__=I.__doc__),I.__code__&&(ie.__code__=I.__code__),ie.__bind={args:I.__bind?I.__bind.args.concat(te):te,fn:I.__bind?I.__bind.fn:I},ie.toString=function(){return ie.__bind.fn.toString()},ie.apply=function(me,le){return ie.__bind.fn.apply(me,le)},ie.call=function(me,...le){return ie.__bind.fn.call(me,...le)},ie.bind=function(me,...le){return dn(ie,me,...le)},pn(ie,ie.__bind.fn.length)}function Sn(I){return typeof I=="function"&&I.__bind?I.__bind.fn:I}var Wn=["name","length","caller","callee","arguments","prototype"];function Jn(I){return!Wn.includes(I)}function si(I,F,te){Object.defineProperty(I,Symbol.for(F),{get:()=>te,set:()=>{},configurable:!1,enumerable:!1})}function jn(I,F){const te=I.bind(F);return Object.getOwnPropertyNames(I).filter(Jn).forEach(me=>{te[me]=I[me]}),si(te,"__bound__",!0),Ci(I)&&si(te,"__native__",!0),te}function Pt(I){if(typeof I=="fuction")return I.__bound__=!1,I.__bound__===!0}function pn(I,F){try{return Object.defineProperty(I,"length",{get:function(){return F}}),I}catch{var te=new Array(F).fill(0).map((le,Ie)=>"a"+Ie).join(","),ie=new Function("f",`return function(${te}) {
                return f.apply(this, arguments);
            };`);return ie(I)}}function Ci(I){var F=Symbol.for("__native__");return typeof I=="function"&&I.toString().match(/\{\s*\[native code\]\s*\}/)&&(I.name.match(/^bound /)&&I[F]===!0||!I.name.match(/^bound /)&&!I[F])}function Te(I){var F="let"+(I?"*":"");return ut.defmacro(F,function(te,ie){var{dynamic_scope:me,error:le,macro_expand:Ie}=ie,Pe;if(te.car instanceof k){if(!(te.cdr.car instanceof ne))throw new Error("let require list of pairs");var Ze=te.cdr.car.map(Ot=>Ot.car);return Pe=te.cdr.car.map(Ot=>Ot.cdr.car),ne.fromArray([k("let*"),[[te.car,ne(k("lambda"),ne(Ze,te.cdr.cdr))]],ne(te.car,Pe)])}else if(Ie)return;var ot=this;Pe=this.get("list->array")(te.car);var kt=ot.inherit("let"),Ft=0;return function Ot(){var wt=Pe[Ft++];function oi($i){if(Kt($i))return $i.then(oi);typeof $i>"u"?kt.set(wt.car,fe):kt.set(wt.car,$i)}if(me&&(me=I?kt:ot),wt){var rr=ae(wt.cdr.car,{env:I?kt:ot,dynamic_scope:me,error:le});return E(oi(rr),Ot)}else{var Hn=new ne(new k("begin"),te.cdr);return ae(Hn,{env:kt,dynamic_scope:me,error:le})}}()})}function Fe(I,F){return new ut(I,function(te,{dynamic_scope:ie,error:me}={}){var le=this;ie&&(ie=this);for(var Ie=te,Pe=[];Ie instanceof ne&&!Me(Ie);)Pe.push(ae(Ie.car,{env:le,dynamic_scope:ie,error:me})),Ie=Ie.cdr;var Ze=Pe.filter(Kt).length;return Ze?Promise.all(Pe).then(F.bind(this)):F.call(this,Pe)})}function pt(I,...F){return F.forEach(te=>{Ye("",te,"number")}),I(...F)}function at(...I){return I.forEach((F,te)=>{Ye("pipe",F,"function",te+1)}),function(...F){return I.reduce((te,ie)=>[ie(...te)],F)[0]}}function bt(...I){return I.forEach((F,te)=>{Ye("compose",F,"function",te+1)}),at(...I.reverse())}function wi(I,F){var te=this;return function ie(me,le,...Ie){return Ye(I,me,"function"),Ie.some(Pe=>Me(Pe)||sn(Pe))?typeof le=="number"?He(le):le:F.call(te,ie,me,le,...Ie)}}function Vt(I,F){return fr(I+1,Bt(pt,F))}var Tt=Bt(Vt,1),qt=Bt(Vt,2);function Gt(I){return function(...F){if(F.length)return F.reduce(qt(I))}}function Bt(I,...F){Ye("curry",I,"function");var te=I.length;return function(){var ie=F.slice();function me(...le){return ie=ie.concat(le),ie.length>=te?I.apply(this,ie):me}return me.apply(this,arguments)}}function fr(I,F){return Ye("limit",F,"function",2),function(...te){return F(...te.slice(0,I))}}var ei=N(function(F,...te){typeof F=="function"&&F.__bind&&(F=F.__bind.fn);for(let le of te){var ie=le instanceof k?le.name:le,me=F[ie];typeof me=="function"&&(me=jn(me,F)),F=me}return me},`(. obj . args)
        (get obj . args)

        Function use object as based and keep using arguments to get the
        property of JavaScript object. Arguments need to be a strings.
        e.g. \`(. console "log")\` if you use any function inside LIPS is
        will be weakly bind (can be rebind), so you can call this log function
        without problem unlike in JavaScript when you use
       \`var log = console.log\`.
       \`get\` is an alias because . don't work in every place, you can't
        pass it as argument`);function He(I,F){if(typeof this<"u"&&this.constructor!==He||typeof this>"u")return new He(I,F===!0?!0:n);if(I instanceof He)return He(I.value,I.float);if(!He.isNumber(I))throw new Error(`You can't create LNumber from ${ke(I)}`);I===null&&(I=0),He.isFloat(I)?this.value=I:F?(this.value=I,this.float=!0):typeof BigInt<"u"?typeof I!="bigint"?this.value=BigInt(I):this.value=I:typeof t<"u"&&!(I instanceof t)?this.value=new t(I):this.value=I}He.isFloat=function(F){return Number(F)===F&&F%1!==0},He.isNumber=function(I){return I instanceof He||!Number.isNaN(I)&&He.isNative(I)||He.isBN(I)},He.isNative=function(I){return typeof I=="bigint"||typeof I=="number"},He.isBN=function(I){return typeof t<"u"&&I instanceof t},He.prototype.toString=He.prototype.toJSON=function(){return this.value.toString()},He.prototype.isBigNumber=function(){return typeof this.value=="bigint"||typeof t<"u"&&!(this.value instanceof t)},["floor","ceil","round"].forEach(I=>{He.prototype[I]=function(){return this.float||He.isFloat(this.value)?He(Math[I](this.value)):He(this.value)}}),He.prototype.valueOf=function(){if(He.isNative(this.value))return Number(this.value);if(He.isBN(this.value))return this.value.toNumber()},He.prototype.coerce=function(I){I===null&&(I=0);var F;return I instanceof He?F=I.value:F=I,He.isFloat(F)||(typeof this.value=="bigint"&&typeof F!="bigint"?F=BigInt(F):typeof t<"u"&&this.value instanceof t&&!F instanceof t&&(F=new t(F))),He(F)},He.prototype.isFloat=function(){return!!(He.isFloat(this.value)||this.float)},He.prototype.op=function(I,F){var te={"*":function(le,Ie){return le*Ie},"+":function(le,Ie){return le+Ie},"-":function(le,Ie){return le-Ie},"/":function(le,Ie){return le/Ie},"%":function(le,Ie){return le%Ie},"|":function(le,Ie){return le|Ie},"&":function(le,Ie){return le&Ie},"~":function(le){return~le},">>":function(le,Ie){return le>>Ie},"<<":function(le,Ie){return le<<Ie}};if(He.isFloat(F)||F instanceof He&&F.isFloat()||this.isFloat()){var ie=F instanceof He?F.valueOf():F;return He(te[I](this.valueOf(),ie),!0)}if(F=this.coerce(F),He.isNative(F.value)&&He.isNative(this.value))return He(te[I](this.value,F.value));if(He.isBN(this.value)&&He.isBN(F.value)){var me={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};return I=me[I],He(this.value.clone()[I](F,ie))}};var Fa={"+":"add","-":"sub","*":"mul","/":"div","%":"mod","|":"or","&":"and","~":"neg","<<":"shl",">>":"shr"};Object.keys(Fa).forEach(I=>{He.prototype[Fa[I]]=function(F){return this.op(I,F)}}),He.prototype.sqrt=function(){var I;return He.isNative(this.value)?I=Math.sqrt(this.value):He.isBN(this.value)&&(I=this.value.sqrt()),new He(I)},He.prototype.pow=function(I){if(I=this.coerce(I),He.isNative(this.value))try{var F=new Function("a,b","return a**b;");I.value=F(this.value,I.value)}catch{throw new Error("Power operator not supported")}else He.isBN(this.value)?I.value=this.value.pow(I.value):I.value=Math.pow(this.value,I.value);return I},He.prototype.neg=function(){var I=this.value;return He.isNative(I)?I=-I:He.isBN(I)&&(I=I.neg()),new He(I)},He.prototype.abs=function(){var I=this.value;return He.isNative(this.value)?I<0&&(I=-I):He.isBN(I)&&I.iabs(),new He(I)},He.prototype.isOdd=function(){if(He.isNative(this.value))return this.isBigNumber()?this.value%BigInt(2)===BigInt(1):this.value%2===1;if(He.isBN(this.value))return this.value.isOdd()},He.prototype.isEven=function(){return!this.isOdd()},He.prototype.cmp=function(I){if(I=this.coerce(I),He.isNative(this.value))return this.value<I.value?-1:this.value===I.value?0:1;if(He.isBN(this.value))return this.value.cmp(I.value)};function Vn(I,F,te){arguments.length===1&&(typeof arguments[0]=="object"?(I=arguments[0],this.parent=null):typeof arguments[0]=="string"&&(I={},F={},te=arguments[0])),this.env=I,this.parent=F,this.name=te||"anonymous"}Vn.prototype.inherit=function(I,F={}){return typeof I=="object"&&(F=I),(!I||typeof I=="object")&&(I="child of "+(this.name||"unknown")),new Vn(F||{},this,I)},Vn.prototype.get=function(I,F={}){const{weak:te,context:ie=this,throwError:me=!0}=F;var le,Ie=!1;if(I instanceof k?I.name in this.env&&(le=this.env[I.name],Ie=!0):typeof I=="string"&&typeof this.env[I]<"u"&&(le=this.env[I],Ie=!0),Ie)return He.isNumber(le)?He(le):le instanceof ne?le.markCycles():typeof le=="function"&&Pt(le)?te?dn(le,ie):jn(le,ie):le;if(this.parent instanceof Vn)return this.parent.get(I,{weak:te,context:ie,throwError:me});var Pe;if(I instanceof k?Pe=I.name:typeof I=="string"&&(Pe=I),Pe){var Ze=typeof e[Pe];if(Ze==="function")return Ci(e[Pe])?jn(e[Pe],e):e[Pe];if(Ze!=="undefined")return e[Pe]}if(me)throw Pe=(Pe.name||Pe).toString(),new Error("Unbound variable `"+Pe+"'")},Vn.prototype.set=function(I,F){He.isNumber(F)&&(F=He(F)),I instanceof k&&(I=I.name),this.env[I]=F},Vn.prototype.has=function(I){return typeof this.env[I]<"u"},Vn.prototype.ref=function(I){for(var F=this;F;){if(F.has(I))return F;F=F.parent}},Vn.prototype.parents=function(){for(var I=this,F=[];I;)F.unshift(I),I=I.parent;return F};function ti(I){return Kt(I)?I.then(ti):((I instanceof ne||I instanceof k)&&(I.data=!0),I)}var Go=function(){var I=0;return function(F=null){return F!==null?new k(Symbol(`#:${F}`)):(I++,new k(Symbol(`#:g${I}`)))}}(),vn=new Vn({nil:fe,undefined:n,true:!0,false:!1,NaN:NaN,stdout:{write:function(...I){console.log(...I)}},stdin:{read:function(){return new Promise(I=>{I(prompt(""))})}},help:N(new ut("help",function(I,{dynamic_scope:F,error:te}){var ie;if(I.car instanceof k)ie=I.car;else if(I.car instanceof ne&&I.car.car instanceof k)ie=I.car.car;else{var me=this;F&&(F=this);var le=ae(I.car,{env:me,error:te,dynamic_scope:F});if(le&&le.__doc__)return le.__doc__}return this.get(ie).__doc__}),`(help object)

             Macro returns documentation for function or macros including parser
             macros but only if called with parser macro symbol like (help \`).
             For normal functions and macros you can save the function in variable.`),cons:N(function(I,F){return Me(F)&&(F=fe),new ne(I,F)},`(cons left right)

            Function return new Pair out of two arguments.`),car:N(function(I){return I===fe||(Ye("car",I,"pair"),Me(I))?fe:I.car},`(car pair)

            Function returns car (head) of the list/pair.`),cdr:N(function(I){return I===fe||(Ye("cdr",I,"pair"),Me(I))?fe:I.cdr},`(cdr pair)

            Function returns cdr (tail) of the list/pair.`),"set!":N(new ut("set!",function(I,{dynamic_scope:F,error:te}={}){F&&(F=this);var ie=ae(I.cdr.car,{env:this,dynamic_scope:F,error:te});ie=Ee(ie);var me;function le(kt,Ft){return Kt(kt)?kt.then(Ot=>le(Ot,Ft)):Kt(Ft)?Ft.then(Ot=>le(kt,Ot)):(Ze[kt]=Ft,Ft)}if(I.car instanceof ne&&k.is(I.car.car,".")){var Ie=I.car.cdr.car,Pe=I.car.cdr.cdr.car,Ze=ae(Ie,{env:this,dynamic_scope:F,error:te}),ot=ae(Pe,{env:this,dynamic_scope:F,error:te});return le(ot,ie)}if(!(I.car instanceof k))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");return me=this.ref(I.car.name),me||(me=this),E(ie,kt=>{me.set(I.car,kt)})}),`(set! name value)

            Macro that can be used to set the value of the variable (mutate)
            it search the scope chain until it finds first non emtpy slot and set it.`),"set-car!":N(function(I,F){Ye("set-car!",I,"pair"),I.car=F},`(set-car! obj value)

            Function that set car (head) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"set-cdr!":N(function(I,F){Ye("set-cdr!",I,"pair"),I.cdr=F},`(set-cdr! obj value)

            Function that set cdr (tail) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"empty?":N(function(I){return typeof I>"u"||Me(I)},`(empty? object)

            Function return true if value is undfined empty list.`),assoc:N(function(I,F){if(I instanceof ne&&!(F instanceof ne))throw new Error("First argument to assoc ned to be a key");Ye("assoc",F,"pair");for(var te=F;!(!(te instanceof ne)||this.get("empty?")(te));){var ie=te.car.car;if(At(ie,I))return te.car;te.haveCycles("cdr")||(te=te.cdr)}return fe},`(assoc key alist)

            Function search Alist (list of pairs) until it find the one that
            have head set equal to key, and return found pair.`),gensym:N(Go,`(gensym)

             Function generate unique symbol, to use with macros as meta name.`),"require.resolve":N(function(I){var F=require.resolve(I);return F},`(require.resolve path)

           Return path relative the current module.`),require:N(function(I){return Pre(I)},`(require module)

            Function to be used inside Node.js to import the module.`),load:N(function(I){Ye("load",I,"string");var F=this;return F.name==="__frame__"&&(F=F.parent),typeof this.get("global",{throwError:!1})<"u"?new Promise((te,ie)=>{bve.readFile(I,function(me,le){me?ie(me):pe(le.toString(),F).then(()=>{te()})})}):e.fetch(I).then(te=>te.text()).then(te=>pe(te,F)).then(()=>{})},`(load filename)

            Function fetch the file and evaluate its content as LIPS code.`),while:N(new ut("while",function(I,{dynamic_scope:F,error:te}){var ie=this,me=new ne(new k("begin"),I.cdr),le;return F&&(F=ie),function Ie(){var Pe=ae(I.car,{env:ie,dynamic_scope:F,error:te});function Ze(ot){return ot&&!sn(ot)&&!Me(ot)?(le=ae(me,{env:ie,dynamic_scope:F,error:te}),Kt(le)?le.then(kt=>(le=kt,Ie())):Ie()):le}return E(Pe,Ze)}()}),`(while cond . body)

            Macro that create a loop, it exectue body untill cond expression is false`),if:N(new ut("if",function(I,{dynamic_scope:F,error:te}){F&&(F=this);var ie=this,me=Ie=>(Ye("if",Ie,"boolean"),Ie?ae(I.cdr.car,{env:ie,dynamic_scope:F,error:te}):ae(I.cdr.cdr.car,{env:ie,dynamic_scope:F,error:te})),le=ae(I.car,{env:ie,dynamic_scope:F,error:te});return E(le,me)}),`(if cond true-expr false-expr)

            Macro evaluate condition expression and if the value is true, it
            evaluate and return true expression if not it evaluate and return
            false expression`),"let*":N(Te(!0),`(let* ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy and next value can access to
             previous values/names.`),let:N(Te(!1),`(let ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy but you can't access
             previous values/names when next are evaluated. You can only get them
             from body of let expression.`),"begin*":N(Fe("begin*",function(I){return I.pop()}),`(begin* . expr)

             This macro is parallel version of begin. It evaluate each expression and
             if it's a promise it will evaluate it in parallel and return value
             of last expression.`),begin:N(new ut("begin",function(I,F){var te=Object.assign({},F),ie=this.get("list->array")(I);te.dynamic_scope&&(te.dynamic_scope=this),te.env=this;var me;return function le(){if(ie.length){var Ie=ie.shift(),Pe=ae(Ie,te);return E(Pe,Ze=>(me=Ze,le()))}else return me}()}),`(begin . args)

             Macro runs list of expression and return valuate of the list one.
             It can be used in place where you can only have single exression,
             like if expression.`),ignore:new ut("ignore",function(I,{dynamic_scope:F,error:te}){var ie={env:this,error:te};F&&(ie.dynamic_scope=this),ae(new ne(new k("begin"),I),ie)},`(ignore expression)

            Macro that will evaluate expression and swallow any promises that may
            be created. It wil run and ignore any value that may be returned by
            expression. The code should have side effects and/or when it's promise
            it should resolve to undefined.`),define:N(ut.defmacro("define",function(I,F){var te=this;if(I.car instanceof ne&&I.car.car instanceof k){var ie=new ne(new k("define"),new ne(I.car.car,new ne(new ne(new k("lambda"),new ne(I.car.cdr,I.cdr)))));return ie}else if(F.macro_expand)return;F.dynamic_scope&&(F.dynamic_scope=this),F.env=te;var me=I.cdr.car;me instanceof ne?me=ae(me,F):me instanceof k&&(me=te.get(me)),I.car instanceof k&&E(me,le=>{te.set(I.car,le)})}),`(define name expression)
             (define (function-name . args) body)

             Macro for defining values. It can be used to define variables,
             or function. If first argument is list it will create function
             with name beeing first element of the list. The macro evalute
             code \`(define function (lambda args body))\``),"set-obj!":N(function(I,F,te){var ie=typeof I;if(sn(I)||ie!=="object"&&ie!=="function"){var me=qi("set-obj!",ke(I),["object","function"]);throw new Error(me)}Sn(I)[F]=te},`(set-obj! obj key value)

            Function set property of JavaScript object`),"current-environment":N(function(){return this},`(current-environment)

            Function return current environement.`),eval:N(function(I,F){if(Ye("eval",I,["symbol","pair","array"]),F=F||this,I instanceof k)return F.get(I);if(I instanceof ne)return ae(I,{env:F,error:ie=>{if(this.get("error")(ie.message),ie.code){var me=ie.code.map((le,Ie)=>`[${Ie+1}]: ${le}`).join(`
`);this.get("error")(me)}}});if(I instanceof Array){var te=this.get("eval");return I.reduce((ie,me)=>te(me,F))}},`(eval list)

            Function evalute LIPS code as list structure.`),lambda:new ut("lambda",function(I,{dynamic_scope:F,error:te}={}){var ie=this,me;I.cdr instanceof ne&&typeof I.cdr.car=="string"&&I.cdr.cdr!==fe&&(me=V(I.cdr.car));function le(...Pe){var Ze;F&&this instanceof Vn?Ze=this:Ze=ie,Ze=Ze.inherit("lambda");var ot=I.car,kt=0,Ft;if(typeof this<"u"&&Ze.set("this",this),this instanceof Vn)Ze.set("arguments",this.get("arguments")),Ze.set("parent.frame",this.get("parent.frame"));else{var Ot=Pe.slice();Ot.callee=le,Ot.env=Ze,Ze.set("parent.frame",function(){return fe}),Ze.set("arguments",Ot)}if(ot instanceof k||!Me(ot))for(;;){if(ot.car!==fe)if(ot instanceof k){Ft=ne.fromArray(Pe.slice(kt)),Ze.env[ot.name]=Ft;break}else typeof Pe[kt]>"u"?Ft=fe:Ft=Pe[kt],Ze.env[ot.car.name]=Ft;if(ot.cdr===fe)break;kt++,ot=ot.cdr}F&&(F=Ze);var wt=me?I.cdr.cdr:I.cdr,oi=new ne(new k("begin"),wt);return ae(oi,{env:Ze,dynamic_scope:F,error:te})}var Ie=I.car instanceof ne?I.car.length():null;return le.__code__=new ne(new k("lambda"),I),I.car instanceof ne?N(pn(le,Ie),me,!0):N(le,me,!0)},`(lambda (a b) body)
            (lambda args body)
            (lambda (a b . rest) body)

            Macro lambda create new anonymous function, if first element of the body
            is string and there is more elements it will be documentation, that can
            be read using (help fn)`),macroexpand:new ut("macroexpand",Xe()),"macroexpand-1":new ut("macroexpand-1",Xe(!0)),"define-macro":N(new ut(Ct,function(I,{dynamic_scope:F,error:te}){if(I.car instanceof ne&&I.car.car instanceof k){var ie=I.car.car.name,me;typeof I.cdr.car=="string"&&I.cdr.cdr!==fe&&(me=I.cdr.car),this.env[ie]=ut.defmacro(ie,function(le){for(var Ie=new Vn({},this,"defmacro"),Pe=I.car.cdr,Ze=le;Pe!==fe;){if(Pe instanceof k){Ie.env[Pe.name]=Ze;break}else Pe.car!==fe&&(Ze===fe?Ie.env[Pe.car.name]=fe:(Ze.car instanceof ne&&(Ze.car.data=!0),Ie.env[Pe.car.name]=Ze.car));if(Pe.cdr===fe)break;Ze!==fe&&(Ze=Ze.cdr),Pe=Pe.cdr}F&&(F=Ie);var ot={env:Ie,dynamic_scope:F,error:te};if(I.cdr instanceof ne){var kt=me?I.cdr.cdr:I.cdr,Ft=kt.reduce(function(Ot,wt){return ae(wt,ot)});return E(Ft,function(Ot){return typeof Ot=="object"&&delete Ot.data,Ot})}},me),this.env[ie].__code__=new ne(new k("define-macro"),I)}}),`(define-macro (name . args) body)

             Meta macro, macro that create new macros, if return value is list structure
             it will be evaluated when macro is invoked. You can use quasiquote \` and
             unquote , and unquote-splicing ,@ inside to create expression that will be
             evaluated on runtime. Macros works like this: if you pass any expression to
             macro the arguments will not be evaluated unless macro itself evaluate it.
             Because of this macro can manipulate expression (arguments) as lists.`),quote:N(new ut("quote",function(I){return ti(I.car)}),`(quote expression)

             Macro that return single lips expression as data (it don't evaluate its
             argument). It will return list of pairs if put in front of lips code.
             And if put in fron of symbol it will return that symbol not value
             associated with that name.`),"unquote-splicing":N(function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code)

            Special form to be used in quasiquote macro, parser is processing special
            characters ,@ and create call to this pseudo function. It can be used
            to evalute expression inside and return the value without parenthesis.
            the value will be joined to the output list structure.`),unquote:N(function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code)

            Special form to be used in quasiquote macro, parser is processing special
            characters , and create call to this pseudo function. It can be used
            to evalute expression inside and return the value, the output is inserted
            into list structure created by queasiquote.`),quasiquote:ut.defmacro("quasiquote",function(I,F){var{dynamic_scope:te,error:ie}=F,me=this;te&&(te=me);function le(wt){return wt instanceof ne}function Ie(wt,oi,Hn=le){if(wt instanceof ne&&!Me(wt)){var rr=wt.car,$i=wt.cdr;return Hn(rr)&&(rr=oi(rr)),Hn($i)&&($i=oi($i)),Kt(rr)||Kt($i)?Promise.all([rr,$i]).then(([Ba,ol])=>new ne(Ba,ol)):new ne(rr,$i)}return wt}function Pe(wt,oi){if(wt instanceof ne){if(Me(wt)&&oi===fe)return fe;wt.append(oi)}else wt=new ne(wt,oi);return wt}function Ze(wt,oi,Hn){if(oi<Hn)return new ne(new ne(wt.car.car,kt(wt.car.cdr,oi,Hn)),fe);var rr=ae(wt.car.cdr.car,{env:me,dynamic_scope:te,error:ie});return E(rr,function($i){if(!($i instanceof ne)){if(wt.cdr!==fe){const ol="You can't splice atom inside list";throw new Error(ol)}return $i}ot.has($i)?$i=$i.clone():ot.add($i);const Ba=kt(wt.cdr,0,1);return Ba===fe&&$i===fe?n:E(Ba,ol=>Pe($i,ol))})}var ot=new Set;function kt(wt,oi,Hn){if(wt instanceof ne&&!Me(wt)){if(k.is(wt.car.car,"unquote-splicing"))return Ze(wt,oi+1,Hn);if(k.is(wt.car,"quasiquote")){var rr=kt(wt.cdr,oi,Hn+1);return new ne(wt.car,rr)}if(k.is(wt.car.car,"unquote")){if(oi+2===Hn&&wt.car.cdr instanceof ne&&wt.car.cdr.car instanceof ne&&k.is(wt.car.cdr.car.car,"unquote-splicing"))return new ne(new k("unquote"),Ze(wt.car.cdr,oi+2,Hn));if(wt.car.cdr instanceof ne&&wt.car.cdr.cdr!==fe&&!(wt.car.cdr.car instanceof ne))return wt.car.cdr}if(k.is(wt.car,"quote"))return new ne(wt.car,kt(wt.cdr,oi,Hn));if(k.is(wt.car,"unquote")){if(oi++,oi<Hn)return new ne(new k("unquote"),kt(wt.cdr,oi,Hn));if(oi>Hn)throw new Error("You can't call `unquote` outside of quasiquote");return wt.cdr instanceof ne?wt.cdr.cdr!==fe?wt.cdr.car instanceof ne?E(kt(wt.cdr.cdr,oi,Hn),function($i){var Ba=ae(wt.cdr.car,{env:me,dynamic_scope:te,error:ie});return new ne(Ba,$i)}):wt.cdr:ae(wt.cdr.car,{env:me,dynamic_scope:te,error:ie}):wt.cdr}return Ie(wt,$i=>kt($i,oi,Hn))}return wt}function Ft(wt){wt instanceof ne&&(delete wt.data,wt.haveCycles("car")||Ft(wt.car),wt.haveCycles("cdr")||Ft(wt.cdr))}var Ot=kt(I.car,0,1);return E(Ot,wt=>(Ft(wt),ti(wt)))},`(quasiquote list ,value ,@value)

            Similar macro to \`quote\` but inside it you can use special
            expressions unquote abbreviated to , that will evaluate expresion inside
            and return its value or unquote-splicing abbreviated to ,@ that will
            evaluate expression but return value without parenthesis (it will join)
            the list with its value. Best used with macros but it can be used outside`),clone:N(function(I){return Ye("clone",I,"pair"),I.clone()},`(clone list)

            Function return clone of the list.`),append:N(function(I,F){return Ye("append",I,"pair"),this.get("append!")(I.clone(),F)},`(append list item)

            Function will create new list with value appended to the end. It return
            New list.`),"append!":N(function(I,F){return Ye("append!",I,"pair"),sn(F)||Me(F)?I:I.append(F)},`(append! name expression)

             Destructive version of append, it modify the list in place. It return
             original list.`),reverse:N(function(I){if(Ye("reverse",I,["array","pair"]),I instanceof ne){var F=this.get("list->array")(I).reverse();return this.get("array->list")(F)}else{if(I instanceof Array)return I.reverse();throw new Error(qi("reverse",ke(I),"array or pair"))}},`(reverse list)

            Function will reverse the list or array. If value is not a list
            or array it will throw exception.`),nth:N(function(I,F){if(Ye("nth",I,"number"),Ye("nth",F,["array","pair"]),F instanceof ne){for(var te=F,ie=0;ie<I;){if(!te.cdr||te.cdr===fe||te.haveCycles("cdr"))return fe;te=te.cdr,ie++}return te.car}else{if(F instanceof Array)return F[I];throw new Error(qi("nth",ke(F),"array or pair",2))}},`(nth index obj)

            Function return nth element of the list or array. If used with different
            value it will throw exception`),list:N(function(...I){return ne.fromArray(I)},`(list . args)

            Function create new list out of its arguments.`),substring:N(function(I,F,te){return Ye("substring",I,"string"),Ye("substring",F,"number"),Ye("substring",te,["number","undefined"]),I.substring(F.valueOf(),te&&te.valueOf())},`(substring string start end)

            Function return part of the string starting at start ending with end.`),concat:N(function(...I){return I.forEach((F,te)=>Ye("concat",F,"string",te+1)),I.join("")},`(concat . strings)

            Function create new string by joining its arguments`),join:N(function(I,F){return Ye("join",I,"string"),Ye("join",F,"pair"),this.get("list->array")(F).join(I)},`(join separator list)

            Function return string by joining elements of the list`),split:N(function(I,F){return Ye("split",I,["regex","string"]),Ye("split",F,"string"),this.get("array->list")(F.split(I))},`(split separator string)

            Function create list by splitting string by separatar that can
            be a string or regular expression.`),replace:N(function(I,F,te){return Ye("replace",I,["regex","string"]),Ye("replace",F,["string","function"]),Ye("replace",te,"string"),te.replace(I,F)},`(replace pattern replacement string)

            Function change pattern to replacement inside string. Pattern can be string
            or regex and replacement can be function or string.`),match:N(function(I,F){Ye("match",I,["regex","string"]),Ye("match",F,"string");var te=F.match(I);return te?this.get("array->list")(te):fe},`(match pattern string)

            function return match object from JavaScript as list.`),search:N(function(I,F){return Ye("search",I,["regex","string"]),Ye("search",F,"string"),F.search(I)},`(search pattern string)

            Function return first found index of the pattern inside a string`),string:N(function I(F,te){if(typeof jQuery<"u"&&F instanceof jQuery.fn.init)return"<#jQuery("+F.length+")>";if(F instanceof He)return F.value.toString();if(typeof F>"u")return"<#undefined>";if(typeof F=="function")return Ci(F)?"<#function(native)>":"<#function>";if(F instanceof RegExp)return F.toString();if(F===fe)return"nil";if(F instanceof Array)return"["+F.map(le=>I(le,!0)).join(", ")+"]";if(F===null||typeof F=="string"&&te)return JSON.stringify(F).replace(/\\n/g,`
`);if(F instanceof ne||F instanceof k)return F.toString();if(e.HTMLElement&&F instanceof e.HTMLElement)return`<#HTMLElement(${F.tagName.toLowerCase()})>`;if(typeof F=="object"){var ie=F.constructor,me;return typeof ie.__className=="string"?me=ie.__className:ke(F)==="instance"?me="instance":me=ie.name,me!==""?"<#"+me+">":"<#Object>"}return typeof F!="string"?F.toString():F},`(string obj)

            Function return string LIPS representation of an object as string.`),env:N(function(I){I=I||this;var F=Object.keys(I.env),te;return F.length?te=ne.fromArray(F):te=fe,I.parent!==n?this.get("env").call(this,I.parent).append(te):te},`(env obj)

            Function return list values (functions and variables) inside environment.`),new:N(function(I,...F){var te=new(Sn(I))(...F);return Object.defineProperty(te,"__instance__",{enumerable:!1,get:()=>!0,set:()=>{},configurable:!1}),te},`(new obj . args)

            Function create new JavaScript instance of an object.`),"unset!":N(function(I){Ye("unset!",I,"symbol"),delete this.env[I.name]},`(unset! name)

            Function delete specified name from environment.`),"remove-special!":N(function(I){Ye("remove-special!",I,"string"),delete S[I]},"(remove-special! symbol)\n\n            Function remove special symbol from parser. Added by `add-special!`"),"add-special!":N(function(I,F){Ye("remove-special!",I,"string",1),Ye("remove-special!",F,"symbol",2),Yt.specials[I]=F},"(add-special! symbol name)\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! '#)` will allow to use `#(1 2 3)` and it will be\n            transformed into (# (1 2 3)) so you can write # macro that will process\n            the list. It's main purpose to to allow to use `define-symbol-macro`"),get:ei,".":ei,unbind:N(Sn,`(unbind fn)

             Function remove bidning from function so you can get props from it.`),type:N(ke,`(type object)

             Function return type of an object as string.`),instanceof:N(function(I,F){return F instanceof I},`(instanceof type obj)

            Function check of object is instance of object.`),"macro?":N(function(I){return I instanceof ut},`(macro? expression)

            Function check if value is a macro.`),"function?":N(function(I){return typeof I=="function"},`(function? expression)

            Function check if value is a function.`),"real?":N(function(I){return ke(I)!=="number"?!1:I instanceof He?I.isFloat():He.isFloat(I)},`(real? number)

            Function check if value is real number.`),"number?":N(He.isNumber,`(number? expression)

             Function check if value is a number`),"string?":N(function(I){return typeof I=="string"},`(string? expression)

            Function check if value is a string.`),"pair?":N(function(I){return I instanceof ne},`(pair? expression)

            Function check if value is a pair or list structure.`),"regex?":N(function(I){return I instanceof RegExp},`(regex? expression)

            Function check if value is regular expression.`),"null?":N(function(I){return sn(I)||I instanceof ne&&I.isEmptyList()},`(null? expression)

            Function check if value is nulish.`),"boolean?":N(function(I){return typeof I=="boolean"},`(boolean? expression)

            Function check if value is boolean.`),"symbol?":N(function(I){return I instanceof k},`(symbol? expression)

            Function check if value is LIPS symbol`),"array?":N(function(I){return I instanceof Array},`(array? expression)

            Function check if value is an arrray.`),"object?":N(function(I){return I!==fe&&I!==null&&!(I instanceof He)&&typeof I=="object"&&!(I instanceof Array)},`(object? expression)

            Function check if value is an object.`),read:N(function I(F){return typeof F=="string"?y(L(F))[0]:this.get("stdin").read().then(te=>I.call(this,te))},`(read [string])

            Function if used with string will parse the string and return
            list structure of LIPS code. If called without an argument it
            will read string from standard input (using browser prompt or
            user defined way) and call itself with that string (parse is)
            function can be used together with eval to evaluate code from
            string`),pprint:N(function(I){I instanceof ne?(I=new Yt.Formatter(I.toString()).break().format(),this.get("stdout").write(I)):this.get("display").call(this,I)},`(pprint expression)

           Pretty print list expression, if called with non-pair it just call
           print function with passed argument.`),print:N(function(){throw new Error("Function print was removed in version 0.20.0 use display insided")},`(print . args)

            defunct function, we keep it to show proper error when used.`),display:N(function(...I){this.get("stdout").write(...I.map(F=>this.get("string")(F,typeof F=="string")))},`(display . args)

            Function convert each argument to string and print the result to
            standard output (by default it's console but it can be defined
            it user code)`),error:N(function(...I){this.get("display").apply(this,I)},`(error . args)

            Display error message.`),flatten:N(function(I){return Ye("flatten",I,"pair"),I.flatten()},`(flatten list)

            Return shallow list from tree structure (pairs).`),"array->list":N(function(I){return Ye("array->list",I,"array"),ne.fromArray(I)},`(array->list array)

            Function convert JavaScript array to LIPS list.`),"tree->array":N(De("tree->array",!0),`(tree->array list)

             Function convert LIPS list structure into JavaScript array.`),"list->array":N(De("list->array"),`(list->array list)

             Function convert LIPS list into JavaScript array.`),apply:N(function(I,F){return Ye("call",I,"function",1),Ye("call",F,"pair",2),I(...this.get("list->array")(F))},`(apply fn list)

            Function that call function with list of arguments.`),length:N(function(I){if(!I)return He(0);if(I instanceof ne)return He(I.length());if("length"in I)return He(I.length)},`(length expression)

            Function return length of the object, the object can be list
            or any object that have length property.`),try:N(new ut("try",function(I,{dynamic_scope:F,error:te}){return new Promise(ie=>{var me={env:this,error:Ie=>{var Pe=this.inherit("try");Pe.set(I.cdr.car.cdr.car.car,Ie);var Ze={env:Pe,error:te};F&&(Ze.dynamic_scope=this),E(ae(new ne(new k("begin"),I.cdr.car.cdr.cdr),Ze),function(ot){ie(ot)})}};F&&(me.dynamic_scope=this);var le=ae(I.car,me);Kt(le)?le.catch(me.error).then(ie):ie(le)})}),"(try expr (catch (e) code)"),find:N(function I(F,te){if(Ye("find",F,["regex","function"]),Ye("find",te,"pair"),sn(te))return fe;var ie=A("find",F);return E(ie(te.car),function(me){return me&&me!==fe?te.car:I(F,te.cdr)})},`(find fn list)
            (find regex list)

            Higher order Function find first value for which function return true.
            If called with regex it will create matcher function.`),"for-each":N(function(I,...F){Ye("for-each",I,"function"),F.forEach((ie,me)=>{Ye("for-each",ie,["pair","nil"],me+1)});var te=this.get("map").call(this,I,...F);if(Kt(te))return te.then(()=>{})},`(for-each fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments.`),map:N(function I(F,...te){if(Ye("map",F,"function"),te.forEach((le,Ie)=>{Ye("map",le,["pair","nil"],Ie+1)}),te.some(le=>le===fe))return fe;if(te.some(Me))return be();var ie=te.map(le=>le.car),me=this;return ie.callee=F,me.set("arguments",ie),E(F.call(me,...ie),le=>E(I.call(this,F,...te.map(Ie=>Ie.cdr)),Ie=>new ne(le,Ie)))},`(map fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments. The return
            values of the function call is acumulated in result list and
            returned by the call to map.`),some:N(function I(F,te){return Ye("some",F,"function"),Ye("some",te,["pair","nil"]),sn(te)?!1:E(F(te.car),ie=>ie||I(F,te.cdr))},`(some fn list)

            Higher order function that call argument on each element of the list.
            It stops when function fn return true for a value if so it will
            return true. If it don't find the value it will return false`),fold:N(wi("fold",function(I,F,te,...ie){if(Ye("fold",F,"function"),ie.forEach((le,Ie)=>{Ye("fold",le,["pair","nil"],Ie+1)}),ie.some(Me))return te;const me=I.call(this,F,te,...ie.map(le=>le.cdr));return E(me,le=>F(...ie.map(Ie=>Ie.car),le))}),`(fold fn init . lists)

             Function fold is reverse of the reduce. it call function \`fn\`
             on each elements on the list and return single value.
             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))
             for: (fold fn '() alist blist`),pluck:N(function(...I){return function(F){if(I=I.map(ie=>ie instanceof k?ie.name:ie),I.length===0)return fe;if(I.length===1){const[ie]=I;return F[ie]}var te={};return I.forEach(ie=>{te[ie]=F[ie]}),te}},`(pluck . string)

            If called with single string it will return function that will return
            key from object. If called with more then one argument function will
            return new object by taking all properties from given object.`),reduce:N(wi("reduce",function(I,F,te,...ie){return Ye("reduce",F,"function"),ie.forEach((me,le)=>{Ye("reduce",me,["pair","nil"],le+1)}),ie.some(Me)?te:E(F(...ie.map(me=>me.car),te),me=>I.call(this,F,me,...ie.map(le=>le.cdr)))}),`(reduce fn init list . lists)

             Higher order function take each element of the list and call
             the function with result of previous call or init and next element
             on the list until each element is processed and return single value
             as result of last call to \`fn\` function.
             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))
             for (reduce fn init alist blist`),filter:N(function(I,F){Ye("filter",I,["regex","function"]),Ye("filter",F,["pair","nil"]);var te=this.get("list->array")(F),ie=[],me=A("filter",I);return function le(Ie){function Pe(ot){return ot&&ot!==fe&&ie.push(Ze),le(++Ie)}if(Ie===te.length)return ne.fromArray(ie);var Ze=te[Ie];return E(me(Ze,Ie),Pe)}(0)},`(filter fn list)
            (filter regex list)

            Higher order function that call \`fn\` for each element of the list
            and return list for only those elements for which funtion return
            true value. If called with regex it will create matcher function.`),range:N(function(I){return Ye("range",I,"number"),I instanceof He&&(I=I.valueOf()),ne.fromArray(new Array(I).fill(0).map((F,te)=>He(te)))},`(range n)

            Function return list of n numbers from 0 to n - 1`),compose:N(bt,`(compose . fns)

             Higher order function and create new function that apply all functions
             From right to left and return it's value. Reverse of compose.
             e.g.:
             ((compose (curry + 2) (curry * 3)) 3)
             11
            `),pipe:N(at,`(pipe . fns)

             Higher order function and create new function that apply all functions
             From left to right and return it's value. Reverse of compose.
             e.g.:
             ((pipe (curry + 2) (curry * 3)) 3)
             15`),curry:N(Bt,`(curry fn . args)

             Higher order function that create curried version of the function.
             The result function will have parially applied arguments and it
             will keep returning functions until all arguments are added

             e.g.:
             (define (add a b c d) (+ a b c d))
             (define add1 (curry add 1))
             (define add12 (add 2))
             (display (add12 3 4))`),odd:N(Tt(function(I){return He(I).isOdd()}),`(odd number)
             Function check if number os odd.`),even:N(Tt(function(I){return He(I).isEvent()}),`(even number)

             Function check if number is even.`),"*":N(Gt(function(I,F){return He(I).mul(F)}),`(* . numbers)

             Multiplicate all numbers passed as arguments. If single value is passed
              it will return that value.`),"+":N(Gt(function(I,F){return He(I).add(F)}),`(+ . numbers)

             Sum all numbers passed as arguments. If single value is passed it will
             return that value.`),"-":N(function(...I){if(I.length===1)return He(I[0]).neg();if(I.length)return I.reduce(qt(function(F,te){return He(F).sub(te)}))},`(- . numbers)
            (- number)

            Substract number passed as argument. If only one argument is passed
            it will negate the value.`),"/":N(Gt(function(I,F){return He(I).div(F)}),`(/ . numbers)

             Divide number passed as arguments one by one. If single argument
             is passed it will return that value.`),abs:N(Tt(function(I){return He(I).abs()}),`(abs number)

             Function create absolute value from number.`),sqrt:N(Tt(function(I){return Math.sqrt(I)}),`(sqrt number)

             Function return square root of the number.`),"**":N(qt(function(I,F){return He(I).pow(F)}),`(** a b)

            Function calculate number a to to the power of b. It can throw
            exception when ** native operator is not supported.`),"1+":N(Tt(function(I){return He(I).add(1)}),`(1+ number)

             Function add 1 to the number and return result.`),"1-":N(Tt(function(I){return He(I).sub(1)}),`(1- number)

             Function substract 1 from the number and return result.`),"++":N(new ut("++",function(I){Ye("++",I.car,"symbol");var F=this.get(I.car),te=He(F).add(1);return this.set(I.car,te),te}),`(++ variable)

             Macro that work only on variables and increment the value by one.`),"--":N(new ut("--",function(I){Ye("--",I.car,"symbol");var F=this.get(I.car),te=He(F).sub(1);return this.set(I.car,te),te}),`(-- variable)

             Macro that decrement the value it work only on symbols`),"%":N(Gt(function(I,F){return He(I).mod(F)}),`(% . numbers)

             Function use modulo operation on each of the numbers. It return
             single number.`),"==":N(function(I,F){return He(I).cmp(F)===0},`(== a b)

            Function compare two numbers and check if they are equal.`),">":N(function(I,F){return He(I).cmp(F)===1},`(> a b)

            Function compare two numbers and check if first argument is greater
            than the second one`),"<":N(function(I,F){return He(I).cmp(F)===-1},`(< a b)

            Function compare two numbers and check if first argument is less
            than the second one`),"<=":N(function(I,F){return[0,-1].includes(He(I).cmp(F))},`(<= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),">=":N(function(I,F){return[0,1].includes(He(I).cmp(F))},`(>= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),"eq?":N(At,`(eq? a b)

             Function compare two values if they are identical.`),or:N(new ut("or",function(I,{dynamic_scope:F,error:te}){var ie=this.get("list->array")(I),me=this;F&&(F=me);var le;return function Ie(){function Pe(kt){return le=kt,le||Ie()}var Ze=ie.shift();if(typeof Ze>"u")return le||!1;var ot=ae(Ze,{env:me,dynamic_scope:F,error:te});return E(ot,Pe)}()}),`(or . expressions)

             Macro execute the values one by one and return the one that is truthy value.
             If there are no expression that evaluate to true it return false.`),and:N(new ut("and",function(I,{dynamic_scope:F,error:te}={}){var ie=this.get("list->array")(I),me=this;if(F&&(F=me),!ie.length)return!0;var le;return function Ie(){function Pe(kt){return le=kt,le?Ie():!1}var Ze=ie.shift();if(typeof Ze>"u")return le||!1;var ot=ae(Ze,{env:me,dynamic_scope:F,error:te});return E(ot,Pe)}()}),`(and . expressions)

             Macro evalute each expression in sequence if any value return false it will
             return false. If each value return true it will return the last value.
             If it's called without arguments it will return true.`),"|":N(function(I,F){return He(I).or(F)},`(& a b)

            Function calculate or bit operation.`),"&":N(function(I,F){return He(I).and(F)},`(& a b)

            Function calculate and bit operation.`),"~":N(function(I){return He(I).neg()},`(~ number)

            Function negate the value.`),">>":N(function(I,F){return He(I).shr(F)},`(>> a b)

            Function right shit the value a by value b.`),"<<":N(function(I,F){return He(I).shl(F)},`(<< a b)

            Function left shit the value a by value b.`),not:N(function(I){return Me(I)?!0:!I},`(not object)

            Function return negation of the argument.`),"->":N(function(I,F,...te){return I[F](...te)},`(-> obj name . args)

            Function get function from object and call it with arguments.`)},n,"global");["floor","round","ceil"].forEach(I=>{vn.set(I,N(function(F){if(Ye(I,F,"number"),F instanceof He)return F[I]()},`(${I} number)

            Function calculate ${I} of a number.`))});function ir(I){if(I.length===1)return I[0];for(var F=[],te=ir(I.slice(1)),ie=0;ie<te.length;ie++)for(var me=0;me<I[0].length;me++)F.push(I[0][me]+te[ie]);return F}function sl(I,F,te){for(var ie=[],me=F;me<=te;++me){for(var le=[],Ie=0;Ie<me;++Ie)le.push(I);ie=ie.concat(ir(le))}return ie}sl(["d","a"],2,5).forEach(I=>{const F=I.split(""),te=F.slice().reverse(),ie=F.map(le=>`(c${le}r`).join(" ")+" arg"+")".repeat(F.length),me="c"+I+"r";vn.set(me,N(function(le){return te.reduce(function(Ie,Pe){return Ie===fe?fe:(Ye(me,Ie,"pair"),Pe==="a"?Ie.car:Ie.cdr)},le)},`(${me} arg)

            Function calculate ${ie}`))}),typeof ta<"u"?(vn.set("global",ta),vn.set("require.resolve",N(function(I){return require.resolve(I)},`(require.resolve path)

           Return path relative the current module.`)),vn.set("require",N(function(I){return Pre(I)},`(require module)

            Function to be used inside Node.js to import the module.`))):typeof window<"u"&&vn.set("window",window);function qi(I,F,te,ie=null){let me=I?` in function \`${I}\``:"";if(ie!==null&&(me+=` argument ${ie}`),te instanceof Array){const le=te[te.length-1];te=te.slice(0,-1).join(", ")+" or "+le}return`Expecting ${te} got ${F}${me}`}function Ye(I,F,te,ie=null){const me=ke(F);var le=!1;if(te instanceof Array&&te.includes(me)&&(le=!0),!le&&me!==te)throw new Error(qi(I,me,te,ie))}function no(I){var F=typeof I;return["string","function"].includes(F)||I instanceof He||I instanceof RegExp}function ke(I){var F={pair:ne,symbol:k,macro:ut,array:Array,native_symbol:Symbol};if(I===fe)return"nil";if(I===null)return"null";for(let[te,ie]of Object.entries(F))if(I instanceof ie)return te;return I instanceof He?"number":I instanceof RegExp?"regex":typeof I=="object"?I.__instance__&&(I.__instance__=!1,I.__instance__)?"instance":I.constructor.name:typeof I}function Ee(I){var F=[];if(te(I),F.length)return me(I);return I;function te(le){Kt(le)?F.push(le):le instanceof ne?(le.haveCycles("car")||te(le.car),le.haveCycles("cdr")||te(le.cdr)):le instanceof Array&&le.forEach(te)}async function ie(le){var Ie=new ne(le.haveCycles("car")?le.car:await me(le.car),le.haveCycles("cdr")?le.cdr:await me(le.cdr));return le.data&&(Ie.data=!0),Ie}function me(le){return le instanceof Array?Promise.all(le.map(me)):le instanceof ne&&F.length?ie(le):le}}function Ae(I,{env:F,dynamic_scope:te,error:ie}){var me=[],le=I;for(rt(le);le instanceof ne&&!Me(le);){var Ie=ae(le.car,{env:F,dynamic_scope:te,error:ie});if(te&&(Ie=E(Ie,Pe=>typeof Pe=="function"&&Ci(Pe)?Pe.bind(te):Pe)),me.push(Ie),le.haveCycles("cdr"))break;le=le.cdr}return Ee(me)}function oe(I,F,te){var ie=I.invoke(F,te);return E(Ee(ie),function(le){return le&&le.data||!le||no(le)?le:ti(ae(le,te))})}function ae(I,{env:F,dynamic_scope:te,error:ie=()=>{}}={}){try{te===!0?F=te=F||vn:F===!0?F=te=vn:F=F||vn;var me={env:F,dynamic_scope:te,error:ie},le;if(sn(I))return I;if(Me(I))return be();if(I instanceof k)return F.get(I,{weak:!0});var Ie=I.car,Pe=I.cdr;if(Ie instanceof ne){if(le=Ee(ae(Ie,me)),Kt(le))return le.then(Ft=>ae(new ne(Ft,I.cdr),me));if(typeof le!="function")throw new Error(ke(le)+" "+F.get("string")(le)+" is not a function while evaluating "+I.toString())}if(Ie instanceof k){if(le=F.get(Ie,{weak:!0}),le instanceof ut){var Ze=oe(le,Pe,me);return E(Ze,Ft=>Ft instanceof ne?Ft.markCycles():Ft)}else if(typeof le!="function"){if(le){var ot=`${ke(le)} \`${le}' is not a function`;throw new Error(ot)}throw new Error(`Unknown function \`${Ie.name}'`)}}else typeof Ie=="function"&&(le=Ie);if(typeof le=="function"){var kt=Ae(Pe,me);return E(kt,function(Ft){var Ot=(te||F).inherit("__frame__");Ot.set("parent.frame",function(Hn=1){if(Hn===0)return Ot;if(!(Ot.parent instanceof Vn))return fe;var rr=Ot.parent.get("parent.frame",{throwError:!1});return typeof rr=="function"?rr(Hn-1):fe});var wt=Ft.slice();wt.callee=le,Ot.set("arguments",wt);var oi=Ee(le.apply(Ot,Ft));return E(oi,Hn=>Hn instanceof ne?ti(Hn.markCycles()):Hn,ie)})}else if(I instanceof k){if(le=F.get(I),le==="undefined")throw new Error("Unbound variable `"+I.name+"'");return le}else{if(I instanceof ne)throw le=Ie&&Ie.toString(),new Error(`${ke(Ie)} ${le} is not a function`);return I}}catch(Ft){ie&&ie(Ft,I)}}async function pe(I,F,te){te===!0?F=te=F||vn:F===!0?F=te=vn:F=F||vn;for(var ie=y(I),me=[];;){var le=ie.shift();if(le){var Ie=await ae(le,{env:F,dynamic_scope:te,error:(Pe,Ze)=>{throw Ze&&(Pe.code instanceof Array||(Pe.code=[]),Pe.code.push(Ze.toString())),Pe}});me.push(Ie)}else return me}}function J(I){return function(F){return F?(F.token||F).match(I):!1}}var ve=J(/[()]/);function $e(I){var F=typeof I=="string"?L(I):I,te=F.filter(ve),ie=te.filter(le=>(le.token||le)===")"),me=te.filter(le=>(le.token||le)==="(");return ie.length===me.length}ne.unDry=function(I){return new ne(I.car,I.cdr)},ne.prototype.toDry=function(){return{value:{car:this.car,cdr:this.cdr}}},K.prototype.toDry=function(){return{value:null}},K.unDry=function(){return fe},k.prototype.toDry=function(){return{value:{name:this.name}}},k.unDry=function(I){return new k(I.name)};function Re(I){console.error(I.message||I),I.code&&console.error(I.code.map((F,te)=>`[${te+1}]: ${F}`))}function dt(){var I="text/x-lips";if(window.document){var F=Array.from(document.querySelectorAll("script"));return function te(){var ie=F.shift();if(ie){var me=ie.getAttribute("type");if(me===I){var le=ie.getAttribute("src");return le?e.fetch(le).then(Ie=>Ie.text()).then(pe).then(te).catch(Ie=>{Re(Ie),te()}):pe(ie.innerHTML).then(te).catch(Ie=>{Re(Ie),te()})}else me&&me.match(/lips|lisp/)&&console.warn("Expecting "+I+" found "+me);return te()}}()}}typeof window<"u"&&r(window,dt),$.__className="Ahead",T.__className="Pattern",X.__className="Formatter",ut.__className="Macro",Vn.__className="Environment";var Yt={version:"{{VER}}",exec:pe,parse:y,tokenize:L,evaluate:ae,Environment:Vn,global_environment:vn,globalEnvironment:vn,env:vn,balanced_parenthesis:$e,balancedParenthesis:$e,Macro:ut,quote:ti,Pair:ne,Formatter:X,specials:S,nil:fe,resolvePromises:Ee,LSymbol:k,LNumber:He};return vn.set("lips",Yt),Yt})})(vve);var tft=vve.exports;const nft=Wp(tft),Cve=["FlinkSQL","SparkSQL","HiveSQL","MySQL","PGSQL","TrinoSQL","ImpalaSQL"],x5=Cve[0],wve={id:"fixedTab",name:x5,data:{value:"",language:x5.toLowerCase()}},yve={id:"fixedStatusItem",name:x5,sortIndex:3};class Sve{constructor(e,t,n){this._onDidChange=new uge,this._languageId=e,this.setModeConfiguration(t),this._preprocessCode=n??null}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get completionService(){return this._modeConfiguration.completionItems.completionService}get triggerCharacters(){return this._modeConfiguration.completionItems.triggerCharacters}get preprocessCode(){return this._preprocessCode}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}const ift=function(i,e,t,n){if(!n)return Promise.resolve([]);const{keywords:r}=n,s=r.map(o=>({label:o,kind:tc.CompletionItemKind.Keyword,detail:"keyword"}));return Promise.resolve(s)},h2={completionItems:{enable:!0,completionService:ift,triggerCharacters:["."," "]},diagnostics:!0},rft=2*60*1e3;class sft{constructor(e){this._defaults=e,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>rft&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=ka.createWebWorker({moduleId:this._defaults.languageId,label:this._defaults.languageId,createData:{languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...e){const t=e==null?void 0:e.filter(Boolean);return this._getClient().then(n=>(t&&(t!=null&&t.length)&&this._worker&&this._worker.withSyncedResources(t),n))}}class oft{constructor(){this.workerClients=new Map}valid(e,t){const n=typeof t=="string"?t:t.getValue(),r=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,r).then(o=>o.doValidation(n))}parserTreeToString(e,t){const n=typeof t=="string"?t:t.getValue(),r=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,r).then(o=>o.parserTreeToString(n))}getAllEntities(e,t,n){const r=typeof t=="string"?t:t.getValue(),s=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,s).then(a=>a.getAllEntities(r,n))}dispose(e){var t;e?this.workerClients.has(e)&&((t=this.workerClients.get(e))===null||t===void 0||t.dispose(),this.workerClients.delete(e)):(this.workerClients.forEach(n=>{n.dispose()}),this.workerClients.clear())}getClientWorker(e,...t){let n=this.workerClients.get(e);if(!n){const r=new sft(this.getLanguageServiceDefault(e));return this.workerClients.set(e,r),r.getLanguageServiceWorker(...t)}return n.getLanguageServiceWorker(...t)}getLanguageServiceDefault(e){return new Sve(e,h2)}}function aft(i,e,t){let n=null;return(...r)=>{if(n&&clearTimeout(n),t&&!n)return i==null?void 0:i(...r);n=setTimeout(()=>{n&&clearTimeout(n),n=null,i==null||i(...r)},e)}}class lft extends re.Component{constructor(t){super(t);hv(this,"_language",x5);hv(this,"languageService");hv(this,"onClick",(t,n)=>{console.log("onClick:",t,n)});hv(this,"onChangeLanguage",(t,n)=>{n&&n.value&&(this._language=n.value,this.updateLanguage(n.value))});hv(this,"analyseProblems",aft(t=>{const n=t.data.value;this.languageService.valid(this.language,n).then(r=>{nn.problems.reset();const s=this.convertMsgToProblemItem(t,n,r);nn.problems.add(s)})},200));hv(this,"convertMsgToProblemItem",(t,n,r=[])=>{const s=t.id,o=`${t.name||""}`,a={id:s,name:o,isLeaf:!1,value:{code:o,message:"",startLineNumber:0,startColumn:1,endLineNumber:0,endColumn:1,status:Qh.Hint},children:[]};return a.children=r.map((u,d)=>({id:`${s}-${d}`,name:u.code||"",isLeaf:!0,value:{code:u.code,message:u.message,startLineNumber:Number(u.startLine),startColumn:Number(u.startCol),endLineNumber:Number(u.endLine),endColumn:Number(u.endCol),status:Qh.Error},children:[]})),a});hv(this,"parse",()=>{this.setupOutputLanguage();const t=nn.editor.editorInstance.getValue();nn.panel.cleanOutput(),this.languageService.parserTreeToString(this.language,t).then(n=>{const r=n==null?void 0:n.replace(/(\(|\))/g,`$1
`),o=new nft.Formatter(r).format({indent:2,offset:2}),a=nn.panel.getPanel(nn.builtin.getConstants().PANEL_OUTPUT??"")??{};nn.panel.update({...a,data:o}),nn.panel.appendOutput("")})});this.languageService=new oft}componentDidMount(){nn.editor.onUpdateTab(this.analyseProblems),ka.setTheme("sql-dark")}get language(){return this._language.toLowerCase()}updateLanguage(t){var u;const n=this.language,r=Object.assign(wve,{name:t,data:{language:n,value:""}}),s=((u=nn.editor.getState().current)==null?void 0:u.id)||-1;nn.editor.updateTab(r,s);const o=nn.editor.editorInstance.getModel();o&&ka.setModelLanguage(o,n);const a=Object.assign(yve,{name:t,sortIndex:3});this.analyseProblems(r),nn.statusBar.update(a)}async setupOutputLanguage(){var n;const t=await((n=nn.panel.outputEditorInstance)==null?void 0:n.getModel());t&&ka.setModelLanguage(t,"clojure")}renderColorThemes(){const t=Cve.map(n=>Rc.jsx(afe,{value:n,children:n},n));return Rc.jsx(gO,{style:{margin:"10px 4px 20px 4px"},defaultValue:this._language,onSelect:this.onChangeLanguage,children:t})}render(){return Rc.jsx("div",{children:Rc.jsxs("div",{style:{margin:"20px 20px"},children:[Rc.jsxs("h1",{style:{fontSize:20,textTransform:"uppercase"},children:["Select a language:"," "]}),this.renderColorThemes(),Rc.jsx(vb,{onClick:this.parse,children:"Parse"})]})})}}const uft={id:"ExtendWorkbench",name:"ExtendWorkbench",activate(){const i={id:"ParserSidebar",title:"Sidebar",render(){return Rc.jsx(lft,{})}};nn.sidebar.add(i),nn.sidebar.setState({current:i.id});const e={id:"OnlineParser",icon:"beaker",title:"SQL Languages Online Parse"},t={id:"GotoGithub",icon:"github",title:"Go To Github"};nn.activityBar.remove("sidebar.explore.title"),nn.activityBar.remove("sidebar.search.title"),nn.activityBar.add([e,t]),nn.activityBar.setState({selected:e.id}),nn.activityBar.onClick(n=>{n===t.id&&(window.location.href="https://github.com/DTStack/monaco-sql-languages")}),nn.editor.open(wve),nn.statusBar.add(yve,Sp.right)},dispose(){}},cft="0.12.2",dft={"dt-sql-parser":"4.0.2"};var hft=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function u(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Lve={},PW={};class EZ{static getOrCreate(e){return PW[e]||(PW[e]=new EZ(e)),PW[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,Lve[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}}function WC(i){const e=i.id;Lve[e]=i,tc.register(i);const t=EZ.getOrCreate(e);tc.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),tc.onLanguage(e,()=>hft(this,void 0,void 0,function*(){const n=yield t.load();tc.setLanguageConfiguration(e,n.conf)}))}var fft=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Bre=new Map,FW=new Map,BW=new Map,Eve=new Map;function Wre(i){const e=i.languageId;It(()=>import("./setupLanguageMode-e00674ca.js"),[]).then(t=>{var n;FW.has(e)&&((n=FW.get(e))===null||n===void 0||n.dispose()),FW.set(e,t.setupLanguageMode(i))})}function Hu(i,e){var t;if(typeof e!="object")return;const{preprocessCode:n}=e,r=fft(e,["preprocessCode"]),s=gft(i,r),o=new Sve(i,s,n);Eve.set(i,o),Bre.get(i)?Wre(o):(BW.has(i)&&((t=BW.get(i))===null||t===void 0||t.dispose()),BW.set(i,tc.onLanguage(i,()=>{Wre(o),Bre.set(i,!0)})))}function gft(i,e){var t,n,r,s,o,a,u;const d=Eve.get(i),h=typeof e.diagnostics=="boolean"?e.diagnostics:(t=d==null?void 0:d.modeConfiguration.diagnostics)!==null&&t!==void 0?t:h2.diagnostics,f=typeof e.completionItems=="boolean"?e.completionItems:(n=d==null?void 0:d.modeConfiguration.completionItems.enable)!==null&&n!==void 0?n:h2.completionItems.enable,p=typeof e.completionItems!="boolean"&&typeof((r=e.completionItems)===null||r===void 0?void 0:r.completionService)=="function"?(s=e.completionItems)===null||s===void 0?void 0:s.completionService:(o=d==null?void 0:d.modeConfiguration.completionItems.completionService)!==null&&o!==void 0?o:h2.completionItems.completionService,m=typeof e.completionItems!="boolean"&&Array.isArray((a=e.completionItems)===null||a===void 0?void 0:a.triggerCharacters)?e.completionItems.triggerCharacters:(u=d==null?void 0:d.modeConfiguration.completionItems.triggerCharacters)!==null&&u!==void 0?u:h2.completionItems.triggerCharacters;return{diagnostics:h,completionItems:{enable:f,completionService:p,triggerCharacters:m}}}const Xt={BINARY:"binary",BINARY_ESCAPE:"binary.escape",COMMENT:"comment",COMMENT_QUOTE:"comment.quote",DELIMITER:"delimiter",DELIMITER_CURLY:"delimiter.curly",DELIMITER_PAREN:"delimiter.paren",DELIMITER_SQUARE:"delimiter.square",IDENTIFIER:"identifier",IDENTIFIER_QUOTE:"identifier.quote",KEYWORD:"keyword",KEYWORD_SCOPE:"keyword.scope",NUMBER:"number",NUMBER_FLOAT:"number.float",NUMBER_BINARY:"number.binary",NUMBER_OCTAL:"number.octal",NUMBER_HEX:"number.hex",OPERATOR:"operator",OPERATOR_KEYWORD:"operator.keyword",OPERATOR_SYMBOL:"operator.symbol",PREDEFINED:"predefined",STRING:"string",STRING_DOUBLE:"string.double",STRING_ESCAPE:"string.escape",TYPE:"type",VARIABLE:"variable",WHITE:"white"},Qt=i=>i+".sql";var Dr;(function(i){i.FLINK="flinksql",i.HIVE="hivesql",i.MYSQL="mysql",i.PG="pgsql",i.SPARK="sparksql",i.TRINO="trinosql",i.IMPALA="impalasql"})(Dr||(Dr={}));WC({id:Dr.FLINK,extensions:[".flinksql"],aliases:["FlinkSQL","flink","Flink"],loader:()=>It(()=>import("./flink-c6e91e25.js"),[])});Hu(Dr.FLINK,{completionItems:!0,diagnostics:!0});WC({id:Dr.SPARK,extensions:[".sparksql"],aliases:["SparkSQL","spark","Spark"],loader:()=>It(()=>import("./spark-82605a39.js"),[])});Hu(Dr.SPARK,{completionItems:!0,diagnostics:!0});WC({id:Dr.HIVE,extensions:[".hivesql"],aliases:["HiveSQL","hive","Hive"],loader:()=>It(()=>import("./hive-e09638dc.js"),[])});Hu(Dr.HIVE,{completionItems:!0,diagnostics:!0});WC({id:Dr.TRINO,extensions:[".trinosql"],aliases:["TrinoSQL","trino","Trino","prestosql","PrestoSQL","presto","Presto"],loader:()=>It(()=>import("./trino-0a92ce9d.js"),[])});Hu(Dr.TRINO,{completionItems:!0,diagnostics:!0});WC({id:Dr.MYSQL,extensions:[".mysql"],aliases:["MySQL","mysql"],loader:()=>It(()=>import("./mysql-4e422c9f.js"),[])});Hu(Dr.MYSQL,{completionItems:!0,diagnostics:!0});WC({id:Dr.PG,extensions:[".pgsql"],aliases:["PgSQL","postgresql","PostgreSQL"],loader:()=>It(()=>import("./pgsql-6338d7e7.js"),[])});Hu(Dr.PG,{completionItems:!0,diagnostics:!0});WC({id:Dr.IMPALA,extensions:[".impalasql"],aliases:["impalaSQL","impala","Impala"],loader:()=>It(()=>import("./impala-b20281e0.js"),[])});Hu(Dr.IMPALA,{completionItems:!0,diagnostics:!0});const pft={base:"vs",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"098658"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"098658"},{token:Qt(Xt.COMMENT),foreground:"008000"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"008000"},{token:Qt(Xt.DELIMITER),foreground:"000000"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"319331"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"0431fa"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"0431fa"},{token:Qt(Xt.IDENTIFIER),foreground:"001080"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"001080"},{token:Qt(Xt.KEYWORD),foreground:"0000ff"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"af00db"},{token:Qt(Xt.NUMBER),foreground:"098658"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"098658"},{token:Qt(Xt.NUMBER_BINARY),foreground:"098658"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"098658"},{token:Qt(Xt.NUMBER_HEX),foreground:"098658"},{token:Qt(Xt.OPERATOR),foreground:"000000"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"0000ff"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"000000"},{token:Qt(Xt.PREDEFINED),foreground:"795e26"},{token:Qt(Xt.STRING),foreground:"a31515"},{token:Qt(Xt.STRING_ESCAPE),foreground:"a31515"},{token:Qt(Xt.TYPE),foreground:"267f99"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},mft={base:"vs-dark",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"b5cea8"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"b5cea8"},{token:Qt(Xt.COMMENT),foreground:"6a9955"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"6a9955"},{token:Qt(Xt.DELIMITER),foreground:"d4d4d4"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"da70d6"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"ffd700"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"ffd700"},{token:Qt(Xt.IDENTIFIER),foreground:"9cdcfe"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Qt(Xt.KEYWORD),foreground:"569cd6"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"c586c0"},{token:Qt(Xt.NUMBER),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_BINARY),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_HEX),foreground:"b5cea8"},{token:Qt(Xt.OPERATOR),foreground:"d4d4d4"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"d4d4d4"},{token:Qt(Xt.PREDEFINED),foreground:"dcdcaa"},{token:Qt(Xt.STRING),foreground:"ce9178"},{token:Qt(Xt.STRING_ESCAPE),foreground:"ce9178"},{token:Qt(Xt.TYPE),foreground:"4ec9b0"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},_ft={base:"hc-black",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"b5cea8"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"b5cea8"},{token:Qt(Xt.COMMENT),foreground:"7ca668"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"7ca668"},{token:Qt(Xt.DELIMITER),foreground:"ffffff"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"da70d6"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"ffd700"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"ffd700"},{token:Qt(Xt.IDENTIFIER),foreground:"9cdcfe"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Qt(Xt.KEYWORD),foreground:"569cd6"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"c586c0"},{token:Qt(Xt.NUMBER),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_BINARY),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_HEX),foreground:"b5cea8"},{token:Qt(Xt.OPERATOR),foreground:"ffffff"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"ffffff"},{token:Qt(Xt.PREDEFINED),foreground:"dcdcaa"},{token:Qt(Xt.STRING),foreground:"ce9178"},{token:Qt(Xt.STRING_ESCAPE),foreground:"ce9178"},{token:Qt(Xt.TYPE),foreground:"4ec9b0"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},xZ={lightThemeData:pft,darkThemeData:mft,hcBlackThemeData:_ft};var Yg;(function(i){i.CATALOG="catalog",i.CATALOG_CREATE="catalogCreate",i.DATABASE="database",i.DATABASE_CREATE="databaseCreate",i.TABLE="table",i.TABLE_CREATE="tableCreate",i.VIEW="view",i.VIEW_CREATE="viewCreate",i.FUNCTION="function",i.FUNCTION_CREATE="functionCreate",i.PROCEDURE="procedure",i.PROCEDURE_CREATE="procedureCreate",i.COLUMN="column",i.COLUMN_CREATE="columnCreate"})(Yg||(Yg={}));function vft(){return new Worker("/monaco-sql-languages/assets/editor.worker-a4e6c28c.js")}function bft(){return new Worker("/monaco-sql-languages/assets/flink.worker-f0146eaf.js")}function Cft(){return new Worker("/monaco-sql-languages/assets/spark.worker-ebb9d79a.js")}function wft(){return new Worker("/monaco-sql-languages/assets/hive.worker-f5c7977d.js")}function yft(){return new Worker("/monaco-sql-languages/assets/pgsql.worker-ef889c71.js")}function Sft(){return new Worker("/monaco-sql-languages/assets/mysql.worker-83755b2b.js")}function Lft(){return new Worker("/monaco-sql-languages/assets/trino.worker-5471b902.js")}function Eft(){return new Worker("/monaco-sql-languages/assets/impala.worker-b4674d39.js")}globalThis.MonacoEnvironment={getWorker(i,e){return e===Dr.FLINK?new bft:e===Dr.HIVE?new wft:e===Dr.SPARK?new Cft:e===Dr.PG?new yft:e===Dr.MYSQL?new Sft:e===Dr.TRINO?new Lft:e===Dr.IMPALA?new Eft:new vft}};ka.defineTheme("sql-dark",xZ.darkThemeData);ka.defineTheme("sql-light",xZ.lightThemeData);ka.defineTheme("sql-hc",xZ.hcBlackThemeData);const xft=["mock_catalog_1","mock_catalog_2","mock_catalog_3"],Dft=["mock_schema_1","mock_schema_2","mock_schema_3"],Ift=["mock_database_1","mock_database_2","mock_database_3"],Tft=["mock_table1","mock_table2","mock_table3"],kft=["mock_view1","mock_view2","mock_view3"],Nft=["current_catalog_db1","current_catalog_db2","current_catalog_db3"],Aft=["current_catalog_schema1","current_catalog_schema2","current_catalog_schema3"],Oft=["current_db_table1","current_db_table2","current_db_table3"],Mft=["current_db_view1","current_db_view2","current_db_view3"],vg=(i,e)=>{const t=i?i.replace(/sql/gi,"").toLocaleLowerCase():"";return t?`${t}_${e}`:e};function DP(i){const e=xft.map(t=>({label:vg(i,t),kind:tc.CompletionItemKind.Field,detail:"catalog",sortText:"1"+vg(i,t)}));return Promise.resolve(e)}function Rft(i,e){const n=(e?Ift:Nft).map(r=>({label:vg(i,r),kind:tc.CompletionItemKind.Field,detail:"database",sortText:"1"+vg(i,r)}));return Promise.resolve(n)}function Pft(i,e){const n=(e?Dft:Aft).map(r=>({label:vg(i,r),kind:tc.CompletionItemKind.Field,detail:"schema",sortText:"1"+vg(i,r)}));return Promise.resolve(n)}function WW(i,e,t){const r=(e&&t?Tft:Oft).map(s=>({label:vg(i,s),kind:tc.CompletionItemKind.Field,detail:"table",sortText:"1"+vg(i,s)}));return Promise.resolve(r)}function VW(i,e,t){const r=(e&&t?kft:Mft).map(s=>({label:vg(i,s),kind:tc.CompletionItemKind.Field,detail:"view",sortText:"1"+vg(i,s)}));return Promise.resolve(r)}const Fft=i=>["flinksql","trinosql"].includes(i.toLowerCase()),Bft=i=>["trinosql","hivesql","sparksql"].includes(i),VC=async function(i,e,t,n){if(!n)return Promise.resolve([]);const r=i.getLanguageId(),s=Fft(r),o=Bft(r)?Pft:Rft,{keywords:a,syntax:u}=n,d=a.map(y=>({label:y,kind:tc.CompletionItemKind.Keyword,detail:"",sortText:"2"+y}));let h=[],f=!1,p=!1,m=!1,v=!1,b=!1,L=!1,S=!1;for(let y=0;y<u.length;y++){const{syntaxContextType:E,wordRanges:A}=u[y],N=A.map(M=>M.text),V=N.length;if((E===Yg.CATALOG||E===Yg.DATABASE_CREATE)&&!f&&V<=1&&(h=h.concat(await DP(r)),f=!0),(E===Yg.DATABASE||E===Yg.TABLE_CREATE||E===Yg.VIEW_CREATE)&&(!f&&s&&V<=1&&(h=h.concat(await DP(r)),f=!0),!p&&V<=1&&(h=h.concat(await o(r)),p=!0),!m&&s&&V>=2&&V<=3&&(h=h.concat(await o(r,N[0])),m=!0)),E===Yg.TABLE)if(V<=1){if(!f&&s){const M=await DP(r);h=h.concat(M),f=!0}p||(h=h.concat(await o(r)),p=!0),v||(h=h.concat(await WW(r)),v=!0)}else V>=2&&V<=3?(!m&&s&&(h=h.concat(await o(r,N[0])),m=!0),b||(h=h.concat(await WW(r,void 0,N[0])),b=!0)):V>=4&&V<=5&&(b||(h=h.concat(await WW(r,N[0],N[2])),b=!0));E===Yg.VIEW&&(V<=1?(!f&&s&&(h=h.concat(await DP(r)),f=!0),p||(h=h.concat(await o(r)),p=!0),L||(h=h.concat(await VW(r)),L=!0)):V>=2&&V<=3?(!m&&s&&(h=h.concat(await o(r,N[0])),m=!0),S||(h=h.concat(await VW(r,void 0,N[0])),S=!0)):V>=4&&V<=5&&(S||(h=h.concat(await VW(r,N[0],N[2])),S=!0)))}return[...h,...d]},dL=i=>{const e=/@@{[A-Za-z0-9._-]*}/g,t=/\${[A-Za-z0-9._-]*}/g;let n=i;return e.test(i)&&(n=n.replace(e,r=>r.replace(/@|{|}|\.|-/g,"_"))),t.test(i)&&(n=n.replace(t,r=>r.replace(/\$|{|}|\.|-/g,"_"))),n},Wft=(i,e)=>{const t=/@@{[A-Za-z0-9._-]*}/g,n=/\${[A-Za-z0-9._-]*}/g;let r=i;return t.test(i)&&(r=r.replace(t,s=>e?s.replace(/@/,e).replace(/}/,e).replace(/@|{|\.|-/g,"_"):s.replace(/@|{|}|\.|-/g,"_"))),n.test(i)&&(r=r.replace(n,s=>e?s.replace(/\$|}/g,e).replace(/{|\.|-/g,"_"):s.replace(/\$|{|}|\.|-/g,"_"))),r};Hu(Dr.FLINK,{completionItems:{enable:!0,completionService:VC},preprocessCode:dL});Hu(Dr.SPARK,{completionItems:{enable:!0,completionService:VC},preprocessCode:dL});Hu(Dr.HIVE,{completionItems:{enable:!0,completionService:VC},preprocessCode:i=>Wft(i,"`")});Hu(Dr.MYSQL,{completionItems:{enable:!0,completionService:VC},preprocessCode:dL});Hu(Dr.TRINO,{completionItems:{enable:!0,completionService:VC},preprocessCode:dL});Hu(Dr.PG,{completionItems:{enable:!0,completionService:VC},preprocessCode:dL});Hu(Dr.IMPALA,{completionItems:{enable:!0,completionService:VC},preprocessCode:dL});function Vft(){const i=he.useRef(),[e,t]=he.useState();return he.useEffect(()=>{i.current||(i.current=Xht({extensions:[uft]}),i.current&&t(()=>{var r;return(r=i.current)==null?void 0:r.render(Rc.jsx(Hut,{}))}))},[]),Rc.jsx("div",{children:e})}window.console.log(`%c dt-sql-parser: v${dft["dt-sql-parser"]} 
 monaco-sql-languages: v${cft}`,"font-family: Cabin, Helvetica, Arial, sans-serif;text-align: left;font-size:32px;color:#B21212;");HW.createRoot(document.getElementById("root")).render(Rc.jsx(re.StrictMode,{children:Rc.jsx(Vft,{})}));export{oKe as M,iKe as R,Xt as T,sft as W,It as _,aft as d,ka as e,tc as l,AM as m};

var p=Object.defineProperty;var L=(s,r,t)=>r in s?p(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var o=(s,r,t)=>(L(s,typeof r!="symbol"?r+"":r,t),t);import{B as E,s as u,y as f,a6 as O,a7 as m,f as x}from"./index-09b6a538.js";import{i as g}from"./isUndefined-aa0326a0.js";var h=(s=>(s.onChange="localization.onChange",s))(h||{});class l{constructor(r=[],t){this.data=r,this.current=t}}const c=class c extends E{constructor(){super("locale");o(this,"state");o(this,"localize",(t,e="",...a)=>{const i=this.getCurrentLocale();if(!i)return e;let n=i.source[t];return a.length&&a.forEach(d=>{n=n==null?void 0:n.replace(c.LOCALIZE_REPLACED_WORD,d)}),n||e});this.state=new l}getAll(){return this.getState().data}get(t){if(!g(t))return this.getState().data.find(u(t))}getCurrent(){return this.getState().current}getCurrentLocale(){return this.get(this.getCurrent())}removeLocale(t){this.dispatch(e=>{var n;const a=e.data.findIndex(u(t));if(a===-1)return;const i=(n=f(e.data,a))==null?void 0:n.id;g(i)||(e.data.splice(a,1),e.current=i)})}setCurrent(t){const e=this.getCurrent();this.dispatch(a=>{a.current=t}),e!==this.getCurrent()&&(this.emit(h.onChange,e,this.getCurrent()),O(m,t.toString()))}add(t){this.dispatch(e=>{e.data.push(...x(t))})}reset(){this.state=new l}onChange(t){this.subscribe(h.onChange,t)}};o(c,"LOCALIZE_REPLACED_WORD","${i}");let C=c;export{C as LocaleService};

var f=Object.defineProperty;var g=(i,o,t)=>o in i?f(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t;var u=(i,o,t)=>(g(i,typeof o!="symbol"?o+"":o,t),t);import{B as p,s as r,f as h,y as S}from"./index-09b6a538.js";import{a as b,S as l}from"./sidebar-15fddaa7.js";import{i as y}from"./isUndefined-aa0326a0.js";class v extends p{constructor(){super("sidebar");u(this,"state");u(this,"onToolbarClick",t=>{this.subscribe(l.onToolbarClick,t)});this.state=new b}get(t){if(!y(t))return this.getAll().find(r(t))}getAll(){return this.getState().data}getCurrent(){return this.getState().current}getCurrentPane(){return this.get(this.getCurrent())}getToolbar(t,e){var a,s;return(s=(a=this.get(t))==null?void 0:a.toolbar)==null?void 0:s.find(r(e))}add(t){this.dispatch(e=>{e.data.push(...h(t))})}addToolbar(t,e){this.dispatch(a=>{const s=a.data.find(r(t));s&&(s.toolbar??(s.toolbar=[]),s.toolbar.push(...h(e)))})}update(t,e){this.dispatch(a=>{const s=a.data.find(r(typeof t=="object"?t.id:t));s&&Object.assign(s,typeof t=="object"?t:e==null?void 0:e(s))})}updateToolbar(t,e,a){this.dispatch(s=>{var c;const n=s.data.find(r(t)),d=(c=n==null?void 0:n.toolbar)==null?void 0:c.find(r(typeof e=="object"?e.id:e));d&&Object.assign(d,typeof e=="object"?e:a==null?void 0:a(d))})}replaceToolbar(t,e,a){this.dispatch(s=>{var c;const n=s.data.find(r(t)),d=(c=n==null?void 0:n.toolbar)==null?void 0:c.find(r(e));d&&Object.assign(d,a)})}remove(t){this.dispatch(e=>{var s;const a=e.data.findIndex(r(t));a!==-1&&(e.current===t&&(e.current=(s=S(e.data,a))==null?void 0:s.id),e.data.splice(a,1))})}setCurrent(t){this.dispatch(e=>{e.current=t})}setLoading(t){this.dispatch(e=>{e.loading=typeof t=="function"?t(e.loading):t})}reset(){this.setState(new b)}onContextMenu(t){this.subscribe(l.onContextMenu,t)}}export{v as SidebarService};

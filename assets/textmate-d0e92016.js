var ze=Object.defineProperty;var Ve=(Q,G,B)=>G in Q?ze(Q,G,{enumerable:!0,configurable:!0,writable:!0,value:B}):Q[G]=B;var _e=(Q,G,B)=>(Ve(Q,typeof G!="symbol"?G+"":G,B),B);import{c as We,h as Ye,be as Ke,bf as Qe}from"./index-09b6a538.js";var $e={exports:{}};(function(Q,G){(function(B,D){Q.exports=D()})(We,()=>{return B={770:function(F,s,A){var y=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(s,"__esModule",{value:!0}),s.setDefaultDebugCall=s.createOnigScanner=s.createOnigString=s.loadWASM=s.OnigScanner=s.OnigString=void 0;const N=y(A(418));let a=null,C=!1;class d{static _utf8ByteLength(l){let _=0;for(let u=0,h=l.length;u<h;u++){const n=l.charCodeAt(u);let e=n,r=!1;if(n>=55296&&n<=56319&&u+1<h){const i=l.charCodeAt(u+1);i>=56320&&i<=57343&&(e=65536+(n-55296<<10)|i-56320,r=!0)}_+=e<=127?1:e<=2047?2:e<=65535?3:4,r&&u++}return _}constructor(l){const _=l.length,u=d._utf8ByteLength(l),h=u!==_,n=h?new Uint32Array(_+1):null;h&&(n[_]=u);const e=h?new Uint32Array(u+1):null;h&&(e[u]=_);const r=new Uint8Array(u);let i=0;for(let t=0;t<_;t++){const o=l.charCodeAt(t);let c=o,m=!1;if(o>=55296&&o<=56319&&t+1<_){const b=l.charCodeAt(t+1);b>=56320&&b<=57343&&(c=65536+(o-55296<<10)|b-56320,m=!0)}h&&(n[t]=i,m&&(n[t+1]=i),c<=127?e[i+0]=t:c<=2047?(e[i+0]=t,e[i+1]=t):c<=65535?(e[i+0]=t,e[i+1]=t,e[i+2]=t):(e[i+0]=t,e[i+1]=t,e[i+2]=t,e[i+3]=t)),c<=127?r[i++]=c:c<=2047?(r[i++]=192|(1984&c)>>>6,r[i++]=128|(63&c)>>>0):c<=65535?(r[i++]=224|(61440&c)>>>12,r[i++]=128|(4032&c)>>>6,r[i++]=128|(63&c)>>>0):(r[i++]=240|(1835008&c)>>>18,r[i++]=128|(258048&c)>>>12,r[i++]=128|(4032&c)>>>6,r[i++]=128|(63&c)>>>0),m&&t++}this.utf16Length=_,this.utf8Length=u,this.utf16Value=l,this.utf8Value=r,this.utf16OffsetToUtf8=n,this.utf8OffsetToUtf16=e}createString(l){const _=l._omalloc(this.utf8Length);return l.HEAPU8.set(this.utf8Value,_),_}}class f{constructor(l){if(this.id=++f.LAST_ID,!a)throw new Error("Must invoke loadWASM first.");this._onigBinding=a,this.content=l;const _=new d(l);this.utf16Length=_.utf16Length,this.utf8Length=_.utf8Length,this.utf16OffsetToUtf8=_.utf16OffsetToUtf8,this.utf8OffsetToUtf16=_.utf8OffsetToUtf16,this.utf8Length<1e4&&!f._sharedPtrInUse?(f._sharedPtr||(f._sharedPtr=a._omalloc(1e4)),f._sharedPtrInUse=!0,a.HEAPU8.set(_.utf8Value,f._sharedPtr),this.ptr=f._sharedPtr):this.ptr=_.createString(a)}convertUtf8OffsetToUtf16(l){return this.utf8OffsetToUtf16?l<0?0:l>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[l]:l}convertUtf16OffsetToUtf8(l){return this.utf16OffsetToUtf8?l<0?0:l>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[l]:l}dispose(){this.ptr===f._sharedPtr?f._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}s.OnigString=f,f.LAST_ID=0,f._sharedPtr=0,f._sharedPtrInUse=!1;class w{constructor(l,_){var u,h;if(!a)throw new Error("Must invoke loadWASM first.");const n=[],e=[];for(let m=0,b=l.length;m<b;m++){const E=new d(l[m]);n[m]=E.createString(a),e[m]=E.utf8Length}const r=a._omalloc(4*l.length);a.HEAPU32.set(n,r/4);const i=a._omalloc(4*l.length);a.HEAPU32.set(e,i/4),this._onigBinding=a,this._options=(u=_==null?void 0:_.options)!==null&&u!==void 0?u:[10];const t=this.onigOptions(this._options),o=this.onigSyntax((h=_==null?void 0:_.syntax)!==null&&h!==void 0?h:0),c=a._createOnigScanner(r,i,l.length,t,o);this._ptr=c;for(let m=0,b=l.length;m<b;m++)a._ofree(n[m]);a._ofree(i),a._ofree(r),c===0&&function(m){throw new Error(m.UTF8ToString(m._getLastOnigError()))}(a)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(l,_,u){let h=C,n=this._options;if(Array.isArray(u)?(u.includes(25)&&(h=!0),n=n.concat(u)):typeof u=="boolean"&&(h=u),typeof l=="string"){l=new f(l);const e=this._findNextMatchSync(l,_,h,n);return l.dispose(),e}return this._findNextMatchSync(l,_,h,n)}_findNextMatchSync(l,_,u,h){const n=this._onigBinding,e=this.onigOptions(h);let r;if(r=u?n._findNextOnigScannerMatchDbg(this._ptr,l.id,l.ptr,l.utf8Length,l.convertUtf16OffsetToUtf8(_),e):n._findNextOnigScannerMatch(this._ptr,l.id,l.ptr,l.utf8Length,l.convertUtf16OffsetToUtf8(_),e),r===0)return null;const i=n.HEAPU32;let t=r/4;const o=i[t++],c=i[t++];let m=[];for(let b=0;b<c;b++){const E=l.convertUtf8OffsetToUtf16(i[t++]),R=l.convertUtf8OffsetToUtf16(i[t++]);m[b]={start:E,end:R,length:R-E}}return{index:o,captureIndices:m}}onigOptions(l){return l.map(_=>this.onigOption(_)).reduce((_,u)=>_|u,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(l){switch(l){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(l){switch(l){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}s.OnigScanner=w;let g=!1,v=null;s.loadWASM=function(I){if(g)return v;let l,_,u,h;if(g=!0,function(n){return typeof n.instantiator=="function"}(I))l=I.instantiator,_=I.print;else{let n;(function(e){return e.data!==void 0})(I)?(n=I.data,_=I.print):n=I,l=function(e){return typeof Response<"u"&&e instanceof Response}(n)?typeof WebAssembly.instantiateStreaming=="function"?function(e){return r=>WebAssembly.instantiateStreaming(e,r)}(n):function(e){return async r=>{const i=await e.arrayBuffer();return WebAssembly.instantiate(i,r)}}(n):function(e){return r=>WebAssembly.instantiate(e,r)}(n)}return v=new Promise((n,e)=>{u=n,h=e}),function(n,e,r,i){(0,N.default)({print:e,instantiateWasm:(t,o)=>{if(typeof performance>"u"){const c=()=>Date.now();t.env.emscripten_get_now=c,t.wasi_snapshot_preview1.emscripten_get_now=c}return n(t).then(c=>o(c.instance),i),{}}}).then(t=>{a=t,r()})}(l,_,u,h),v},s.createOnigString=function(I){return new f(I)},s.createOnigScanner=function(I){return new w(I)},s.setDefaultDebugCall=function(I){C=I}},418:F=>{var s=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(A={}){var y,N,a=A;a.ready=new Promise((p,S)=>{y=p,N=S});var C,d=Object.assign({},a);typeof read<"u"&&read,C=p=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(p));let S=read(p,"binary");return typeof S=="object"||R(T),S;var T},typeof clearTimeout>"u"&&(globalThis.clearTimeout=p=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=p=>typeof p=="function"?p():R()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var f,w,g=a.print||console.log.bind(console),v=a.printErr||console.error.bind(console);Object.assign(a,d),d=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(f=a.wasmBinary),a.noExitRuntime,typeof WebAssembly!="object"&&R("no native wasm support detected");var I,l,_,u,h,n,e,r,i=!1;function t(){var p=w.buffer;a.HEAP8=I=new Int8Array(p),a.HEAP16=_=new Int16Array(p),a.HEAPU8=l=new Uint8Array(p),a.HEAPU16=u=new Uint16Array(p),a.HEAP32=h=new Int32Array(p),a.HEAPU32=n=new Uint32Array(p),a.HEAPF32=e=new Float32Array(p),a.HEAPF64=r=new Float64Array(p)}var o=[],c=[],m=[],b=0,E=null;function R(p){a.onAbort&&a.onAbort(p),v(p="Aborted("+p+")"),i=!0,p+=". Build with -sASSERTIONS for more info.";var S=new WebAssembly.RuntimeError(p);throw N(S),S}var L,X;function V(p){return p.startsWith("data:application/octet-stream;base64,")}function q(p){if(p==L&&f)return new Uint8Array(f);if(C)return C(p);throw"both async and sync fetching of the wasm failed"}function J(p,S,T){return function(P){return Promise.resolve().then(()=>q(P))}(p).then(P=>WebAssembly.instantiate(P,S)).then(P=>P).then(T,P=>{v(`failed to asynchronously prepare wasm: ${P}`),R(P)})}V(L="onig.wasm")||(X=L,L=a.locateFile?a.locateFile(X,""):""+X);var se=p=>{for(;p.length>0;)p.shift()(a)},ee=void 0,U=p=>{for(var S="",T=p;l[T];)S+=ee[l[T++]];return S},H={},z={},he=void 0,k=p=>{throw new he(p)},te=void 0,Y=(p,S,T)=>{function P(W){var j=T(W);j.length!==p.length&&(re=>{throw new te(re)})("Mismatched type converter count");for(var $=0;$<p.length;++$)ie(p[$],j[$])}p.forEach(function(W){});var O=new Array(S.length),x=[],M=0;S.forEach((W,j)=>{z.hasOwnProperty(W)?O[j]=z[W]:(x.push(W),H.hasOwnProperty(W)||(H[W]=[]),H[W].push(()=>{O[j]=z[W],++M===x.length&&P(O)}))}),x.length===0&&P(O)};function ie(p,S,T={}){if(!("argPackAdvance"in S))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(P,O,x={}){var M=O.name;if(P||k(`type "${M}" must have a positive integer typeid pointer`),z.hasOwnProperty(P)){if(x.ignoreDuplicateRegistrations)return;k(`Cannot register type '${M}' twice`)}if(z[P]=O,H.hasOwnProperty(P)){var W=H[P];delete H[P],W.forEach(j=>j())}}(p,S,T)}function de(){this.allocated=[void 0],this.freelist=[]}var ae=new de,ye=()=>{for(var p=0,S=ae.reserved;S<ae.allocated.length;++S)ae.allocated[S]!==void 0&&++p;return p},pe=p=>(p||k("Cannot use deleted val. handle = "+p),ae.get(p).value),Ce=p=>{switch(p){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ae.allocate({refcount:1,value:p})}};function fe(p){return this.fromWireType(h[p>>2])}var Se=(p,S)=>{switch(S){case 4:return function(T){return this.fromWireType(e[T>>2])};case 8:return function(T){return this.fromWireType(r[T>>3])};default:throw new TypeError(`invalid float width (${S}): ${p}`)}},be=(p,S,T)=>{switch(S){case 1:return T?P=>I[P>>0]:P=>l[P>>0];case 2:return T?P=>_[P>>1]:P=>u[P>>1];case 4:return T?P=>h[P>>2]:P=>n[P>>2];default:throw new TypeError(`invalid integer width (${S}): ${p}`)}};function ge(p){return this.fromWireType(n[p>>2])}var ue,Ie=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ae=(p,S,T)=>{for(var P=S+T,O=S;p[O]&&!(O>=P);)++O;if(O-S>16&&p.buffer&&Ie)return Ie.decode(p.subarray(S,O));for(var x="";S<O;){var M=p[S++];if(128&M){var W=63&p[S++];if((224&M)!=192){var j=63&p[S++];if((M=(240&M)==224?(15&M)<<12|W<<6|j:(7&M)<<18|W<<12|j<<6|63&p[S++])<65536)x+=String.fromCharCode(M);else{var $=M-65536;x+=String.fromCharCode(55296|$>>10,56320|1023&$)}}else x+=String.fromCharCode((31&M)<<6|W)}else x+=String.fromCharCode(M)}return x},we=(p,S)=>p?Ae(l,p,S):"",ve=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ge=(p,S)=>{for(var T=p,P=T>>1,O=P+S/2;!(P>=O)&&u[P];)++P;if((T=P<<1)-p>32&&ve)return ve.decode(l.subarray(p,T));for(var x="",M=0;!(M>=S/2);++M){var W=_[p+2*M>>1];if(W==0)break;x+=String.fromCharCode(W)}return x},Te=(p,S,T)=>{if(T===void 0&&(T=2147483647),T<2)return 0;for(var P=S,O=(T-=2)<2*p.length?T/2:p.length,x=0;x<O;++x){var M=p.charCodeAt(x);_[S>>1]=M,S+=2}return _[S>>1]=0,S-P},xe=p=>2*p.length,Pe=(p,S)=>{for(var T=0,P="";!(T>=S/4);){var O=h[p+4*T>>2];if(O==0)break;if(++T,O>=65536){var x=O-65536;P+=String.fromCharCode(55296|x>>10,56320|1023&x)}else P+=String.fromCharCode(O)}return P},Ne=(p,S,T)=>{if(T===void 0&&(T=2147483647),T<4)return 0;for(var P=S,O=P+T-4,x=0;x<p.length;++x){var M=p.charCodeAt(x);if(M>=55296&&M<=57343&&(M=65536+((1023&M)<<10)|1023&p.charCodeAt(++x)),h[S>>2]=M,(S+=4)+4>O)break}return h[S>>2]=0,S-P},qe=p=>{for(var S=0,T=0;T<p.length;++T){var P=p.charCodeAt(T);P>=55296&&P<=57343&&++T,S+=4}return S};ue=()=>performance.now();var He=p=>{var S=(p-w.buffer.byteLength+65535)/65536;try{return w.grow(S),t(),1}catch{}},Xe=[null,[],[]];(()=>{for(var p=new Array(256),S=0;S<256;++S)p[S]=String.fromCharCode(S);ee=p})(),he=a.BindingError=class extends Error{constructor(p){super(p),this.name="BindingError"}},te=a.InternalError=class extends Error{constructor(p){super(p),this.name="InternalError"}},Object.assign(de.prototype,{get(p){return this.allocated[p]},has(p){return this.allocated[p]!==void 0},allocate(p){var S=this.freelist.pop()||this.allocated.length;return this.allocated[S]=p,S},free(p){this.allocated[p]=void 0,this.freelist.push(p)}}),ae.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ae.reserved=ae.allocated.length,a.count_emval_handles=ye;var Re,Fe={_embind_register_bigint:(p,S,T,P,O)=>{},_embind_register_bool:(p,S,T,P)=>{ie(p,{name:S=U(S),fromWireType:function(O){return!!O},toWireType:function(O,x){return x?T:P},argPackAdvance:8,readValueFromPointer:function(O){return this.fromWireType(l[O])},destructorFunction:null})},_embind_register_constant:(p,S,T)=>{p=U(p),Y([],[S],function(P){return P=P[0],a[p]=P.fromWireType(T),[]})},_embind_register_emval:(p,S)=>{ie(p,{name:S=U(S),fromWireType:T=>{var P=pe(T);return(O=>{O>=ae.reserved&&--ae.get(O).refcount==0&&ae.free(O)})(T),P},toWireType:(T,P)=>Ce(P),argPackAdvance:8,readValueFromPointer:fe,destructorFunction:null})},_embind_register_float:(p,S,T)=>{ie(p,{name:S=U(S),fromWireType:P=>P,toWireType:(P,O)=>O,argPackAdvance:8,readValueFromPointer:Se(S,T),destructorFunction:null})},_embind_register_integer:(p,S,T,P,O)=>{S=U(S);var x=j=>j;if(P===0){var M=32-8*T;x=j=>j<<M>>>M}var W=S.includes("unsigned");ie(p,{name:S,fromWireType:x,toWireType:W?function(j,$){return this.name,$>>>0}:function(j,$){return this.name,$},argPackAdvance:8,readValueFromPointer:be(S,T,P!==0),destructorFunction:null})},_embind_register_memory_view:(p,S,T)=>{var P=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][S];function O(x){var M=n[x>>2],W=n[x+4>>2];return new P(I.buffer,W,M)}ie(p,{name:T=U(T),fromWireType:O,argPackAdvance:8,readValueFromPointer:O},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(p,S)=>{var T=(S=U(S))==="std::string";ie(p,{name:S,fromWireType:P=>{var O,x=n[P>>2],M=P+4;if(T)for(var W=M,j=0;j<=x;++j){var $=M+j;if(j==x||l[$]==0){var re=we(W,$-W);O===void 0?O=re:(O+=String.fromCharCode(0),O+=re),W=$+1}}else{var Z=new Array(x);for(j=0;j<x;++j)Z[j]=String.fromCharCode(l[M+j]);O=Z.join("")}return me(P),O},toWireType:(P,O)=>{var x;O instanceof ArrayBuffer&&(O=new Uint8Array(O));var M=typeof O=="string";M||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int8Array||k("Cannot pass non-string to std::string"),x=T&&M?(Z=>{for(var ne=0,K=0;K<Z.length;++K){var le=Z.charCodeAt(K);le<=127?ne++:le<=2047?ne+=2:le>=55296&&le<=57343?(ne+=4,++K):ne+=3}return ne})(O):O.length;var W=Le(4+x+1),j=W+4;if(n[W>>2]=x,T&&M)((Z,ne,K,le)=>{if(!(le>0))return 0;for(var Me=K,Oe=K+le-1,Ee=0;Ee<Z.length;++Ee){var oe=Z.charCodeAt(Ee);if(oe>=55296&&oe<=57343&&(oe=65536+((1023&oe)<<10)|1023&Z.charCodeAt(++Ee)),oe<=127){if(K>=Oe)break;ne[K++]=oe}else if(oe<=2047){if(K+1>=Oe)break;ne[K++]=192|oe>>6,ne[K++]=128|63&oe}else if(oe<=65535){if(K+2>=Oe)break;ne[K++]=224|oe>>12,ne[K++]=128|oe>>6&63,ne[K++]=128|63&oe}else{if(K+3>=Oe)break;ne[K++]=240|oe>>18,ne[K++]=128|oe>>12&63,ne[K++]=128|oe>>6&63,ne[K++]=128|63&oe}}ne[K]=0})(O,l,j,x+1);else if(M)for(var $=0;$<x;++$){var re=O.charCodeAt($);re>255&&(me(j),k("String has UTF-16 code units that do not fit in 8 bits")),l[j+$]=re}else for($=0;$<x;++$)l[j+$]=O[$];return P!==null&&P.push(me,W),W},argPackAdvance:8,readValueFromPointer:ge,destructorFunction:P=>me(P)})},_embind_register_std_wstring:(p,S,T)=>{var P,O,x,M,W;T=U(T),S===2?(P=Ge,O=Te,M=xe,x=()=>u,W=1):S===4&&(P=Pe,O=Ne,M=qe,x=()=>n,W=2),ie(p,{name:T,fromWireType:j=>{for(var $,re=n[j>>2],Z=x(),ne=j+4,K=0;K<=re;++K){var le=j+4+K*S;if(K==re||Z[le>>W]==0){var Me=P(ne,le-ne);$===void 0?$=Me:($+=String.fromCharCode(0),$+=Me),ne=le+S}}return me(j),$},toWireType:(j,$)=>{typeof $!="string"&&k(`Cannot pass non-string to C++ string type ${T}`);var re=M($),Z=Le(4+re+S);return n[Z>>2]=re>>W,O($,Z+4,re+S),j!==null&&j.push(me,Z),Z},argPackAdvance:8,readValueFromPointer:fe,destructorFunction:j=>me(j)})},_embind_register_void:(p,S)=>{ie(p,{isVoid:!0,name:S=U(S),argPackAdvance:0,fromWireType:()=>{},toWireType:(T,P)=>{}})},emscripten_get_now:ue,emscripten_memcpy_big:(p,S,T)=>l.copyWithin(p,S,S+T),emscripten_resize_heap:p=>{var S=l.length,T=2147483648;if((p>>>=0)>T)return!1;for(var P,O=1;O<=4;O*=2){var x=S*(1+.2/O);x=Math.min(x,p+100663296);var M=Math.min(T,(P=Math.max(p,x))+(65536-P%65536)%65536);if(He(M))return!0}return!1},fd_write:(p,S,T,P)=>{for(var O=0,x=0;x<T;x++){var M=n[S>>2],W=n[S+4>>2];S+=8;for(var j=0;j<W;j++)$=p,re=l[M+j],Z=void 0,Z=Xe[$],re===0||re===10?(($===1?g:v)(Ae(Z,0)),Z.length=0):Z.push(re);O+=W}var $,re,Z;return n[P>>2]=O,0}},ce=function(){var p,S,T,P,O={env:Fe,wasi_snapshot_preview1:Fe};function x(M,W){var j,$=M.exports;return w=(ce=$).memory,t(),ce.__indirect_function_table,j=ce.__wasm_call_ctors,c.unshift(j),function(re){if(b--,a.monitorRunDependencies&&a.monitorRunDependencies(b),b==0&&E){var Z=E;E=null,Z()}}(),$}if(b++,a.monitorRunDependencies&&a.monitorRunDependencies(b),a.instantiateWasm)try{return a.instantiateWasm(O,x)}catch(M){v(`Module.instantiateWasm callback failed with error: ${M}`),N(M)}return(p=f,S=L,T=O,P=function(M){x(M.instance)},p||typeof WebAssembly.instantiateStreaming!="function"||V(S)||typeof fetch!="function"?J(S,T,P):fetch(S,{credentials:"same-origin"}).then(M=>WebAssembly.instantiateStreaming(M,T).then(P,function(W){return v(`wasm streaming compile failed: ${W}`),v("falling back to ArrayBuffer instantiation"),J(S,T,P)}))).catch(N),{}}(),Le=p=>(Le=ce.malloc)(p),me=p=>(me=ce.free)(p);function je(){function p(){Re||(Re=!0,a.calledRun=!0,i||(se(c),y(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)S=a.postRun.shift(),m.unshift(S);var S;se(m)}()))}b>0||(function(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)S=a.preRun.shift(),o.unshift(S);var S;se(o)}(),b>0||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),p()},1)):p()))}if(a._omalloc=p=>(a._omalloc=ce.omalloc)(p),a._ofree=p=>(a._ofree=ce.ofree)(p),a._getLastOnigError=()=>(a._getLastOnigError=ce.getLastOnigError)(),a._createOnigScanner=(p,S,T,P,O)=>(a._createOnigScanner=ce.createOnigScanner)(p,S,T,P,O),a._freeOnigScanner=p=>(a._freeOnigScanner=ce.freeOnigScanner)(p),a._findNextOnigScannerMatch=(p,S,T,P,O,x)=>(a._findNextOnigScannerMatch=ce.findNextOnigScannerMatch)(p,S,T,P,O,x),a._findNextOnigScannerMatchDbg=(p,S,T,P,O,x)=>(a._findNextOnigScannerMatchDbg=ce.findNextOnigScannerMatchDbg)(p,S,T,P,O,x),a.__embind_initialize_bindings=()=>(a.__embind_initialize_bindings=ce._embind_initialize_bindings)(),a.dynCall_jiji=(p,S,T,P,O)=>(a.dynCall_jiji=ce.dynCall_jiji)(p,S,T,P,O),a.UTF8ToString=we,E=function p(){Re||je(),Re||(E=p)},a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return je(),A.ready});F.exports=s}},D={},function F(s){var A=D[s];if(A!==void 0)return A.exports;var y=D[s]={exports:{}};return B[s].call(y.exports,y,y.exports,F),y.exports}(770);var B,D})})($e);var Be=$e.exports;const Je=["indentationRules.decreaseIndentPattern","indentationRules.increaseIndentPattern","indentationRules.indentNextLinePattern","indentationRules.unIndentedLinePattern","folding.markers.start","folding.markers.end","wordPattern"];function Ze(Q){const G=JSON.parse(Q);for(const B of Je){const D=et(G,B);typeof D=="string"&&tt(G,B,new RegExp(D))}return G}function et(Q,G){return G.split(".").reduce((D,F)=>D!=null?D[F]:null,Q)}function tt(Q,G,B){const D=G.split("."),F=D.length-1;D.reduce((s,A,y)=>s==null?s:y===F?(s[A]=B,null):s[A],Q)}var Ue={exports:{}};(function(Q,G){(function(B,D){Q.exports=D()})(We,()=>(()=>{var B={185:(F,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UseOnigurumaFindOptions=s.DebugFlags=void 0,s.DebugFlags={InDebugMode:typeof process<"u"&&!!{}.VSCODE_TEXTMATE_DEBUG},s.UseOnigurumaFindOptions=!1},151:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.applyStateStackDiff=s.diffStateStacksRefEq=void 0;const y=A(752);s.diffStateStacksRefEq=function(N,a){let C=0;const d=[];let f=N,w=a;for(;f!==w;)f&&(!w||f.depth>=w.depth)?(C++,f=f.parent):(d.push(w.toStateStackFrame()),w=w.parent);return{pops:C,newFrames:d.reverse()}},s.applyStateStackDiff=function(N,a){let C=N;for(let d=0;d<a.pops;d++)C=C.parent;for(const d of a.newFrames)C=y.StateStackImpl.pushFrame(C,d);return C}},490:(F,s)=>{var A;Object.defineProperty(s,"__esModule",{value:!0}),s.toOptionalTokenType=s.EncodedTokenAttributes=void 0,(A=s.EncodedTokenAttributes||(s.EncodedTokenAttributes={})).toBinaryStr=function(y){return y.toString(2).padStart(32,"0")},A.print=function(y){const N=A.getLanguageId(y),a=A.getTokenType(y),C=A.getFontStyle(y),d=A.getForeground(y),f=A.getBackground(y);console.log({languageId:N,tokenType:a,fontStyle:C,foreground:d,background:f})},A.getLanguageId=function(y){return(255&y)>>>0},A.getTokenType=function(y){return(768&y)>>>8},A.containsBalancedBrackets=function(y){return!!(1024&y)},A.getFontStyle=function(y){return(30720&y)>>>11},A.getForeground=function(y){return(16744448&y)>>>15},A.getBackground=function(y){return(4278190080&y)>>>24},A.set=function(y,N,a,C,d,f,w){let g=A.getLanguageId(y),v=A.getTokenType(y),I=A.containsBalancedBrackets(y)?1:0,l=A.getFontStyle(y),_=A.getForeground(y),u=A.getBackground(y);return N!==0&&(g=N),a!==8&&(v=a),C!==null&&(I=C?1:0),d!==-1&&(l=d),f!==0&&(_=f),w!==0&&(u=w),(g|v<<8|I<<10|l<<11|_<<15|u<<24)>>>0},s.toOptionalTokenType=function(y){return y}},214:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BasicScopeAttributesProvider=s.BasicScopeAttributes=void 0;const y=A(807);class N{constructor(f,w){this.languageId=f,this.tokenType=w}}s.BasicScopeAttributes=N;class a{constructor(f,w){this._getBasicScopeAttributes=new y.CachedFn(g=>{const v=this._scopeToLanguage(g),I=this._toStandardTokenType(g);return new N(v,I)}),this._defaultAttributes=new N(f,8),this._embeddedLanguagesMatcher=new C(Object.entries(w||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(f){return f===null?a._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(f)}_scopeToLanguage(f){return this._embeddedLanguagesMatcher.match(f)||0}_toStandardTokenType(f){const w=f.match(a.STANDARD_TOKEN_TYPE_REGEXP);if(!w)return 8;switch(w[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}s.BasicScopeAttributesProvider=a,a._NULL_SCOPE_METADATA=new N(0,0),a.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class C{constructor(f){if(f.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(f);const w=f.map(([g,v])=>y.escapeRegExpCharacters(g));w.sort(),w.reverse(),this.scopesRegExp=new RegExp(`^((${w.join(")|(")}))($|\\.)`,"")}}match(f){if(!this.scopesRegExp)return;const w=f.match(this.scopesRegExp);return w?this.values.get(w[1]):void 0}}},929:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LineTokens=s.BalancedBracketSelectors=s.StateStackImpl=s.AttributedScopeStack=s.Grammar=s.createGrammar=void 0;const y=A(185),N=A(490),a=A(916),C=A(810),d=A(666),f=A(63),w=A(807),g=A(214),v=A(398);function I(i,t,o,c,m){const b=a.createMatchers(t,l),E=d.RuleFactory.getCompiledRuleId(o,c,m.repository);for(const R of b)i.push({debugSelector:t,matcher:R.matcher,ruleId:E,grammar:m,priority:R.priority})}function l(i,t){if(t.length<i.length)return!1;let o=0;return i.every(c=>{for(let m=o;m<t.length;m++)if(_(t[m],c))return o=m+1,!0;return!1})}function _(i,t){if(!i)return!1;if(i===t)return!0;const o=t.length;return i.length>o&&i.substr(0,o)===t&&i[o]==="."}s.createGrammar=function(i,t,o,c,m,b,E,R){return new u(i,t,o,c,m,b,E,R)};class u{constructor(t,o,c,m,b,E,R,L){if(this._rootScopeName=t,this.balancedBracketSelectors=E,this._onigLib=L,this._basicScopeAttributesProvider=new g.BasicScopeAttributesProvider(c,m),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=R,this._grammar=h(o,null),this._injections=null,this._tokenTypeMatchers=[],b)for(const X of Object.keys(b)){const V=a.createMatchers(X,l);for(const q of V)this._tokenTypeMatchers.push({matcher:q.matcher,type:b[X]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t=[],o=this._rootScopeName,c=(m=>m===this._rootScopeName?this._grammar:this.getExternalGrammar(m))(o);if(c){const m=c.injections;if(m)for(let E in m)I(t,E,m[E],this,c);const b=this._grammarRepository.injections(o);b&&b.forEach(E=>{const R=this.getExternalGrammar(E);if(R){const L=R.injectionSelector;L&&I(t,L,R,this,R)}})}return t.sort((m,b)=>m.priority-b.priority),t}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),y.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const t of this._injections)console.log(`  - ${t.debugSelector}`)}return this._injections}registerRule(t){const o=++this._lastRuleId,c=t(d.ruleIdFromNumber(o));return this._ruleId2desc[o]=c,c}getRule(t){return this._ruleId2desc[d.ruleIdToNumber(t)]}getExternalGrammar(t,o){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const c=this._grammarRepository.lookup(t);if(c)return this._includedGrammars[t]=h(c,o&&o.$base),this._includedGrammars[t]}}tokenizeLine(t,o,c=0){const m=this._tokenize(t,o,!1,c);return{tokens:m.lineTokens.getResult(m.ruleStack,m.lineLength),ruleStack:m.ruleStack,stoppedEarly:m.stoppedEarly}}tokenizeLine2(t,o,c=0){const m=this._tokenize(t,o,!0,c);return{tokens:m.lineTokens.getBinaryResult(m.ruleStack,m.lineLength),ruleStack:m.ruleStack,stoppedEarly:m.stoppedEarly}}_tokenize(t,o,c,m){let b;if(this._rootId===-1&&(this._rootId=d.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),o&&o!==e.NULL)b=!1,o.reset();else{b=!0;const V=this._basicScopeAttributesProvider.getDefaultAttributes(),q=this.themeProvider.getDefaults(),J=N.EncodedTokenAttributes.set(0,V.languageId,V.tokenType,null,q.fontStyle,q.foregroundId,q.backgroundId),se=this.getRule(this._rootId).getName(null,null);let ee;ee=se?n.createRootAndLookUpScopeName(se,J,this):n.createRoot("unknown",J),o=new e(null,this._rootId,-1,-1,!1,null,ee,ee)}t+=`
`;const E=this.createOnigString(t),R=E.content.length,L=new r(c,t,this._tokenTypeMatchers,this.balancedBracketSelectors),X=v._tokenizeString(this,E,b,0,o,L,!0,m);return C.disposeOnigString(E),{lineLength:R,lineTokens:L,ruleStack:X.stack,stoppedEarly:X.stoppedEarly}}}function h(i,t){return(i=w.clone(i)).repository=i.repository||{},i.repository.$self={$vscodeTextmateLocation:i.$vscodeTextmateLocation,patterns:i.patterns,name:i.scopeName},i.repository.$base=t||i.repository.$self,i}s.Grammar=u;class n{constructor(t,o,c){this.parent=t,this.scopePath=o,this.tokenAttributes=c}static fromExtension(t,o){let c=t,m=(t==null?void 0:t.scopePath)??null;for(const b of o)m=f.ScopeStack.push(m,b.scopeNames),c=new n(c,m,b.encodedTokenAttributes);return c}static createRoot(t,o){return new n(null,new f.ScopeStack(null,t),o)}static createRootAndLookUpScopeName(t,o,c){const m=c.getMetadataForScope(t),b=new f.ScopeStack(null,t),E=c.themeProvider.themeMatch(b),R=n.mergeAttributes(o,m,E);return new n(null,b,R)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return n.equals(this,t)}static equals(t,o){for(;;){if(t===o||!t&&!o)return!0;if(!t||!o||t.scopeName!==o.scopeName||t.tokenAttributes!==o.tokenAttributes)return!1;t=t.parent,o=o.parent}}static mergeAttributes(t,o,c){let m=-1,b=0,E=0;return c!==null&&(m=c.fontStyle,b=c.foregroundId,E=c.backgroundId),N.EncodedTokenAttributes.set(t,o.languageId,o.tokenType,null,m,b,E)}pushAttributed(t,o){if(t===null)return this;if(t.indexOf(" ")===-1)return n._pushAttributed(this,t,o);const c=t.split(/ /g);let m=this;for(const b of c)m=n._pushAttributed(m,b,o);return m}static _pushAttributed(t,o,c){const m=c.getMetadataForScope(o),b=t.scopePath.push(o),E=c.themeProvider.themeMatch(b),R=n.mergeAttributes(t.tokenAttributes,m,E);return new n(t,b,R)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){var m;const o=[];let c=this;for(;c&&c!==t;)o.push({encodedTokenAttributes:c.tokenAttributes,scopeNames:c.scopePath.getExtensionIfDefined(((m=c.parent)==null?void 0:m.scopePath)??null)}),c=c.parent;return c===t?o.reverse():void 0}}s.AttributedScopeStack=n;class e{constructor(t,o,c,m,b,E,R,L){this.parent=t,this.ruleId=o,this.beginRuleCapturedEOL=b,this.endRule=E,this.nameScopesList=R,this.contentNameScopesList=L,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=c,this._anchorPos=m}equals(t){return t!==null&&e._equals(this,t)}static _equals(t,o){return t===o||!!this._structuralEquals(t,o)&&n.equals(t.contentNameScopesList,o.contentNameScopesList)}static _structuralEquals(t,o){for(;;){if(t===o||!t&&!o)return!0;if(!t||!o||t.depth!==o.depth||t.ruleId!==o.ruleId||t.endRule!==o.endRule)return!1;t=t.parent,o=o.parent}}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,o,c,m,b,E,R){return new e(this,t,o,c,m,b,E,R)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,o){var c,m;return this.parent&&(o=this.parent._writeString(t,o)),t[o++]=`(${this.ruleId}, ${(c=this.nameScopesList)==null?void 0:c.toString()}, ${(m=this.contentNameScopesList)==null?void 0:m.toString()})`,o}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let o=this;for(;o&&o._enterPos===t._enterPos;){if(o.ruleId===t.ruleId)return!0;o=o.parent}return!1}toStateStackFrame(){var t,o,c;return{ruleId:d.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((o=this.nameScopesList)==null?void 0:o.getExtensionIfDefined(((t=this.parent)==null?void 0:t.nameScopesList)??null))??[],contentNameScopesList:((c=this.contentNameScopesList)==null?void 0:c.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(t,o){const c=n.fromExtension((t==null?void 0:t.nameScopesList)??null,o.nameScopesList);return new e(t,d.ruleIdFromNumber(o.ruleId),o.enterPos??-1,o.anchorPos??-1,o.beginRuleCapturedEOL,o.endRule,c,n.fromExtension(c,o.contentNameScopesList))}}s.StateStackImpl=e,e.NULL=new e(null,0,0,0,!1,null,null,null),s.BalancedBracketSelectors=class{constructor(i,t){this.allowAny=!1,this.balancedBracketScopes=i.flatMap(o=>o==="*"?(this.allowAny=!0,[]):a.createMatchers(o,l).map(c=>c.matcher)),this.unbalancedBracketScopes=t.flatMap(o=>a.createMatchers(o,l).map(c=>c.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(i){for(const t of this.unbalancedBracketScopes)if(t(i))return!1;for(const t of this.balancedBracketScopes)if(t(i))return!0;return this.allowAny}};class r{constructor(t,o,c,m){this.balancedBracketSelectors=m,this._emitBinaryTokens=t,this._tokenTypeOverrides=c,y.DebugFlags.InDebugMode?this._lineText=o:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,o){this.produceFromScopes(t.contentNameScopesList,o)}produceFromScopes(t,o){var m;if(this._lastTokenEndIndex>=o)return;if(this._emitBinaryTokens){let b=(t==null?void 0:t.tokenAttributes)??0,E=!1;if((m=this.balancedBracketSelectors)!=null&&m.matchesAlways&&(E=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const R=(t==null?void 0:t.getScopeNames())??[];for(const L of this._tokenTypeOverrides)L.matcher(R)&&(b=N.EncodedTokenAttributes.set(b,0,N.toOptionalTokenType(L.type),null,-1,0,0));this.balancedBracketSelectors&&(E=this.balancedBracketSelectors.match(R))}if(E&&(b=N.EncodedTokenAttributes.set(b,0,8,E,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===b)return void(this._lastTokenEndIndex=o);if(y.DebugFlags.InDebugMode){const R=(t==null?void 0:t.getScopeNames())??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,o).replace(/\n$/,"\\n")+"|");for(let L=0;L<R.length;L++)console.log("      * "+R[L])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(b),void(this._lastTokenEndIndex=o)}const c=(t==null?void 0:t.getScopeNames())??[];if(y.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,o).replace(/\n$/,"\\n")+"|");for(let b=0;b<c.length;b++)console.log("      * "+c[b])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:o,scopes:c}),this._lastTokenEndIndex=o}getResult(t,o){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===o-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,o),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,o){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===o-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,o),this._binaryTokens[this._binaryTokens.length-2]=0);const c=new Uint32Array(this._binaryTokens.length);for(let m=0,b=this._binaryTokens.length;m<b;m++)c[m]=this._binaryTokens[m];return c}}s.LineTokens=r},784:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseInclude=s.TopLevelRepositoryReference=s.TopLevelReference=s.RelativeReference=s.SelfReference=s.BaseReference=s.ScopeDependencyProcessor=s.ExternalReferenceCollector=s.TopLevelRepositoryRuleReference=s.TopLevelRuleReference=void 0;const y=A(807);class N{constructor(e){this.scopeName=e}toKey(){return this.scopeName}}s.TopLevelRuleReference=N;class a{constructor(e,r){this.scopeName=e,this.ruleName=r}toKey(){return`${this.scopeName}#${this.ruleName}`}}s.TopLevelRepositoryRuleReference=a;class C{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const r=e.toKey();this._seenReferenceKeys.has(r)||(this._seenReferenceKeys.add(r),this._references.push(e))}}function d(n,e,r,i){const t=r.lookup(n.scopeName);if(!t){if(n.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const o=r.lookup(e);n instanceof N?w({baseGrammar:o,selfGrammar:t},i):f(n.ruleName,{baseGrammar:o,selfGrammar:t,repository:t.repository},i);const c=r.injections(n.scopeName);if(c)for(const m of c)i.add(new N(m))}function f(n,e,r){e.repository&&e.repository[n]&&g([e.repository[n]],e,r)}function w(n,e){n.selfGrammar.patterns&&Array.isArray(n.selfGrammar.patterns)&&g(n.selfGrammar.patterns,{...n,repository:n.selfGrammar.repository},e),n.selfGrammar.injections&&g(Object.values(n.selfGrammar.injections),{...n,repository:n.selfGrammar.repository},e)}function g(n,e,r){for(const i of n){if(r.visitedRule.has(i))continue;r.visitedRule.add(i);const t=i.repository?y.mergeObjects({},e.repository,i.repository):e.repository;Array.isArray(i.patterns)&&g(i.patterns,{...e,repository:t},r);const o=i.include;if(!o)continue;const c=h(o);switch(c.kind){case 0:w({...e,selfGrammar:e.baseGrammar},r);break;case 1:w(e,r);break;case 2:f(c.ruleName,{...e,repository:t},r);break;case 3:case 4:const m=c.scopeName===e.selfGrammar.scopeName?e.selfGrammar:c.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(m){const b={baseGrammar:e.baseGrammar,selfGrammar:m,repository:t};c.kind===4?f(c.ruleName,b,r):w(b,r)}else c.kind===4?r.add(new a(c.scopeName,c.ruleName)):r.add(new N(c.scopeName))}}}s.ExternalReferenceCollector=C,s.ScopeDependencyProcessor=class{constructor(n,e){this.repo=n,this.initialScopeName=e,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new N(this.initialScopeName)]}processQueue(){const n=this.Q;this.Q=[];const e=new C;for(const r of n)d(r,this.initialScopeName,this.repo,e);for(const r of e.references)if(r instanceof N){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName)||this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}};class v{constructor(){this.kind=0}}s.BaseReference=v;class I{constructor(){this.kind=1}}s.SelfReference=I;class l{constructor(e){this.ruleName=e,this.kind=2}}s.RelativeReference=l;class _{constructor(e){this.scopeName=e,this.kind=3}}s.TopLevelReference=_;class u{constructor(e,r){this.scopeName=e,this.ruleName=r,this.kind=4}}function h(n){if(n==="$base")return new v;if(n==="$self")return new I;const e=n.indexOf("#");if(e===-1)return new _(n);if(e===0)return new l(n.substring(1));{const r=n.substring(0,e),i=n.substring(e+1);return new u(r,i)}}s.TopLevelRepositoryReference=u,s.parseInclude=h},752:function(F,s,A){var y=this&&this.__createBinding||(Object.create?function(a,C,d,f){f===void 0&&(f=d),Object.defineProperty(a,f,{enumerable:!0,get:function(){return C[d]}})}:function(a,C,d,f){f===void 0&&(f=d),a[f]=C[d]}),N=this&&this.__exportStar||function(a,C){for(var d in a)d==="default"||Object.prototype.hasOwnProperty.call(C,d)||y(C,a,d)};Object.defineProperty(s,"__esModule",{value:!0}),N(A(929),s)},398:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LocalStackElement=s._tokenizeString=void 0;const y=A(185),N=A(810),a=A(666),C=A(807);class d{constructor(u,h){this.stack=u,this.stoppedEarly=h}}function f(_,u,h,n,e,r,i,t){const o=u.content.length;let c=!1,m=-1;if(i){const R=function(L,X,V,q,J,se){let ee=J.beginRuleCapturedEOL?0:-1;const U=[];for(let H=J;H;H=H.pop()){const z=H.getRule(L);z instanceof a.BeginWhileRule&&U.push({rule:z,stack:H})}for(let H=U.pop();H;H=U.pop()){const{ruleScanner:z,findOptions:he}=g(H.rule,L,H.stack.endRule,V,q===ee),k=z.findNextMatchSync(X,q,he);if(y.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(z.toString())),!k){y.DebugFlags.InDebugMode&&console.log("  popping "+H.rule.debugName+" - "+H.rule.debugWhileRegExp),J=H.stack.pop();break}if(k.ruleId!==a.whileRuleId){J=H.stack.pop();break}k.captureIndices&&k.captureIndices.length&&(se.produce(H.stack,k.captureIndices[0].start),I(L,X,V,H.stack,se,H.rule.whileCaptures,k.captureIndices),se.produce(H.stack,k.captureIndices[0].end),ee=k.captureIndices[0].end,k.captureIndices[0].end>q&&(q=k.captureIndices[0].end,V=!1))}return{stack:J,linePos:q,anchorPosition:ee,isFirstLine:V}}(_,u,h,n,e,r);e=R.stack,n=R.linePos,h=R.isFirstLine,m=R.anchorPosition}const b=Date.now();for(;!c;){if(t!==0&&Date.now()-b>t)return new d(e,!0);E()}return new d(e,!1);function E(){y.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${n}: |${u.content.substr(n).replace(/\n$/,"\\n")}|`));const R=function(q,J,se,ee,U,H){const z=function(ie,de,ae,ye,pe,Ce){const fe=pe.getRule(ie),{ruleScanner:Se,findOptions:be}=w(fe,ie,pe.endRule,ae,ye===Ce);let ge=0;y.DebugFlags.InDebugMode&&(ge=C.performanceNow());const ue=Se.findNextMatchSync(de,ye,be);if(y.DebugFlags.InDebugMode){const Ie=C.performanceNow()-ge;Ie>5&&console.warn(`Rule ${fe.debugName} (${fe.id}) matching took ${Ie} against '${de}'`),console.log(`  scanning for (linePos: ${ye}, anchorPosition: ${Ce})`),console.log(Se.toString()),ue&&console.log(`matched rule id: ${ue.ruleId} from ${ue.captureIndices[0].start} to ${ue.captureIndices[0].end}`)}return ue?{captureIndices:ue.captureIndices,matchedRuleId:ue.ruleId}:null}(q,J,se,ee,U,H),he=q.getInjections();if(he.length===0)return z;const k=function(ie,de,ae,ye,pe,Ce,fe){let Se,be=Number.MAX_VALUE,ge=null,ue=0;const Ie=Ce.contentNameScopesList.getScopeNames();for(let Ae=0,we=ie.length;Ae<we;Ae++){const ve=ie[Ae];if(!ve.matcher(Ie))continue;const Ge=de.getRule(ve.ruleId),{ruleScanner:Te,findOptions:xe}=w(Ge,de,null,ye,pe===fe),Pe=Te.findNextMatchSync(ae,pe,xe);if(!Pe)continue;y.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${ve.debugSelector}`),console.log(Te.toString()));const Ne=Pe.captureIndices[0].start;if(!(Ne>=be)&&(be=Ne,ge=Pe.captureIndices,Se=Pe.ruleId,ue=ve.priority,be===pe))break}return ge?{priorityMatch:ue===-1,captureIndices:ge,matchedRuleId:Se}:null}(he,q,J,se,ee,U,H);if(!k)return z;if(!z)return k;const te=z.captureIndices[0].start,Y=k.captureIndices[0].start;return Y<te||k.priorityMatch&&Y===te?k:z}(_,u,h,n,e,m);if(!R)return y.DebugFlags.InDebugMode&&console.log("  no more matches."),r.produce(e,o),void(c=!0);const L=R.captureIndices,X=R.matchedRuleId,V=!!(L&&L.length>0)&&L[0].end>n;if(X===a.endRuleId){const q=e.getRule(_);y.DebugFlags.InDebugMode&&console.log("  popping "+q.debugName+" - "+q.debugEndRegExp),r.produce(e,L[0].start),e=e.withContentNameScopesList(e.nameScopesList),I(_,u,h,e,r,q.endCaptures,L),r.produce(e,L[0].end);const J=e;if(e=e.parent,m=J.getAnchorPos(),!V&&J.getEnterPos()===n)return y.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),e=J,r.produce(e,o),void(c=!0)}else{const q=_.getRule(X);r.produce(e,L[0].start);const J=e,se=q.getName(u.content,L),ee=e.contentNameScopesList.pushAttributed(se,_);if(e=e.push(X,n,m,L[0].end===o,null,ee,ee),q instanceof a.BeginEndRule){const U=q;y.DebugFlags.InDebugMode&&console.log("  pushing "+U.debugName+" - "+U.debugBeginRegExp),I(_,u,h,e,r,U.beginCaptures,L),r.produce(e,L[0].end),m=L[0].end;const H=U.getContentName(u.content,L),z=ee.pushAttributed(H,_);if(e=e.withContentNameScopesList(z),U.endHasBackReferences&&(e=e.withEndRule(U.getEndWithResolvedBackReferences(u.content,L))),!V&&J.hasSameRuleAs(e))return y.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),e=e.pop(),r.produce(e,o),void(c=!0)}else if(q instanceof a.BeginWhileRule){const U=q;y.DebugFlags.InDebugMode&&console.log("  pushing "+U.debugName),I(_,u,h,e,r,U.beginCaptures,L),r.produce(e,L[0].end),m=L[0].end;const H=U.getContentName(u.content,L),z=ee.pushAttributed(H,_);if(e=e.withContentNameScopesList(z),U.whileHasBackReferences&&(e=e.withEndRule(U.getWhileWithResolvedBackReferences(u.content,L))),!V&&J.hasSameRuleAs(e))return y.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),e=e.pop(),r.produce(e,o),void(c=!0)}else{const U=q;if(y.DebugFlags.InDebugMode&&console.log("  matched "+U.debugName+" - "+U.debugMatchRegExp),I(_,u,h,e,r,U.captures,L),r.produce(e,L[0].end),e=e.pop(),!V)return y.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),e=e.safePop(),r.produce(e,o),void(c=!0)}}L[0].end>n&&(n=L[0].end,h=!1)}}function w(_,u,h,n,e){return y.UseOnigurumaFindOptions?{ruleScanner:_.compile(u,h),findOptions:v(n,e)}:{ruleScanner:_.compileAG(u,h,n,e),findOptions:0}}function g(_,u,h,n,e){return y.UseOnigurumaFindOptions?{ruleScanner:_.compileWhile(u,h),findOptions:v(n,e)}:{ruleScanner:_.compileWhileAG(u,h,n,e),findOptions:0}}function v(_,u){let h=0;return _||(h|=1),u||(h|=4),h}function I(_,u,h,n,e,r,i){if(r.length===0)return;const t=u.content,o=Math.min(r.length,i.length),c=[],m=i[0].end;for(let b=0;b<o;b++){const E=r[b];if(E===null)continue;const R=i[b];if(R.length===0)continue;if(R.start>m)break;for(;c.length>0&&c[c.length-1].endPos<=R.start;)e.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?e.produceFromScopes(c[c.length-1].scopes,R.start):e.produce(n,R.start),E.retokenizeCapturedWithRuleId){const X=E.getName(t,i),V=n.contentNameScopesList.pushAttributed(X,_),q=E.getContentName(t,i),J=V.pushAttributed(q,_),se=n.push(E.retokenizeCapturedWithRuleId,R.start,-1,!1,null,V,J),ee=_.createOnigString(t.substring(0,R.end));f(_,ee,h&&R.start===0,R.start,se,e,!1,0),N.disposeOnigString(ee);continue}const L=E.getName(t,i);if(L!==null){const X=(c.length>0?c[c.length-1].scopes:n.contentNameScopesList).pushAttributed(L,_);c.push(new l(X,R.end))}}for(;c.length>0;)e.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}s._tokenizeString=f;class l{constructor(u,h){this.scopes=u,this.endPos=h}}s.LocalStackElement=l},726:(F,s)=>{function A(C,d){throw new Error("Near offset "+C.pos+": "+d+" ~~~"+C.source.substr(C.pos,50)+"~~~")}Object.defineProperty(s,"__esModule",{value:!0}),s.parseJSON=void 0,s.parseJSON=function(C,d,f){let w=new y(C),g=new N,v=0,I=null,l=[],_=[];function u(){l.push(v),_.push(I)}function h(){v=l.pop(),I=_.pop()}function n(e){A(w,e)}for(;a(w,g);){if(v===0){if(I!==null&&n("too many constructs in root"),g.type===3){I={},f&&(I.$vscodeTextmateLocation=g.toLocation(d)),u(),v=1;continue}if(g.type===2){I=[],u(),v=4;continue}n("unexpected token in root")}if(v===2){if(g.type===5){h();continue}if(g.type===7){v=3;continue}n("expected , or }")}if(v===1||v===3){if(v===1&&g.type===5){h();continue}if(g.type===1){let e=g.value;if(a(w,g)&&g.type===6||n("expected colon"),a(w,g)||n("expected value"),v=2,g.type===1){I[e]=g.value;continue}if(g.type===8){I[e]=null;continue}if(g.type===9){I[e]=!0;continue}if(g.type===10){I[e]=!1;continue}if(g.type===11){I[e]=parseFloat(g.value);continue}if(g.type===2){let r=[];I[e]=r,u(),v=4,I=r;continue}if(g.type===3){let r={};f&&(r.$vscodeTextmateLocation=g.toLocation(d)),I[e]=r,u(),v=1,I=r;continue}}n("unexpected token in dict")}if(v===5){if(g.type===4){h();continue}if(g.type===7){v=6;continue}n("expected , or ]")}if(v===4||v===6){if(v===4&&g.type===4){h();continue}if(v=5,g.type===1){I.push(g.value);continue}if(g.type===8){I.push(null);continue}if(g.type===9){I.push(!0);continue}if(g.type===10){I.push(!1);continue}if(g.type===11){I.push(parseFloat(g.value));continue}if(g.type===2){let e=[];I.push(e),u(),v=4,I=e;continue}if(g.type===3){let e={};f&&(e.$vscodeTextmateLocation=g.toLocation(d)),I.push(e),u(),v=1,I=e;continue}n("unexpected token in array")}n("unknown state")}return _.length!==0&&n("unclosed constructs"),I};class y{constructor(d){this.source=d,this.pos=0,this.len=d.length,this.line=1,this.char=0}}class N{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(d){return{filename:d,line:this.line,char:this.char}}}function a(C,d){d.value=null,d.type=0,d.offset=-1,d.len=-1,d.line=-1,d.char=-1;let f,w=C.source,g=C.pos,v=C.len,I=C.line,l=C.char;for(;;){if(g>=v)return!1;if(f=w.charCodeAt(g),f!==32&&f!==9&&f!==13){if(f!==10)break;g++,I++,l=0}else g++,l++}if(d.offset=g,d.line=I,d.char=l,f===34){for(d.type=1,g++,l++;;){if(g>=v)return!1;if(f=w.charCodeAt(g),g++,l++,f!==92){if(f===34)break}else g++,l++}d.value=w.substring(d.offset+1,g-1).replace(/\\u([0-9A-Fa-f]{4})/g,(_,u)=>String.fromCodePoint(parseInt(u,16))).replace(/\\(.)/g,(_,u)=>{switch(u){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:A(C,"invalid escape sequence")}throw new Error("unreachable")})}else if(f===91)d.type=2,g++,l++;else if(f===123)d.type=3,g++,l++;else if(f===93)d.type=4,g++,l++;else if(f===125)d.type=5,g++,l++;else if(f===58)d.type=6,g++,l++;else if(f===44)d.type=7,g++,l++;else if(f===110){if(d.type=8,g++,l++,f=w.charCodeAt(g),f!==117||(g++,l++,f=w.charCodeAt(g),f!==108)||(g++,l++,f=w.charCodeAt(g),f!==108))return!1;g++,l++}else if(f===116){if(d.type=9,g++,l++,f=w.charCodeAt(g),f!==114||(g++,l++,f=w.charCodeAt(g),f!==117)||(g++,l++,f=w.charCodeAt(g),f!==101))return!1;g++,l++}else if(f===102){if(d.type=10,g++,l++,f=w.charCodeAt(g),f!==97||(g++,l++,f=w.charCodeAt(g),f!==108)||(g++,l++,f=w.charCodeAt(g),f!==115)||(g++,l++,f=w.charCodeAt(g),f!==101))return!1;g++,l++}else for(d.type=11;;){if(g>=v)return!1;if(f=w.charCodeAt(g),!(f===46||f>=48&&f<=57||f===101||f===69||f===45||f===43))break;g++,l++}return d.len=g-d.offset,d.value===null&&(d.value=w.substr(d.offset,d.len)),C.pos=g,C.line=I,C.char=l,!0}},625:function(F,s,A){var y=this&&this.__createBinding||(Object.create?function(v,I,l,_){_===void 0&&(_=l),Object.defineProperty(v,_,{enumerable:!0,get:function(){return I[l]}})}:function(v,I,l,_){_===void 0&&(_=l),v[_]=I[l]}),N=this&&this.__exportStar||function(v,I){for(var l in v)l==="default"||Object.prototype.hasOwnProperty.call(I,l)||y(I,v,l)};Object.defineProperty(s,"__esModule",{value:!0}),s.applyStateStackDiff=s.diffStateStacksRefEq=s.parseRawGrammar=s.INITIAL=s.Registry=void 0;const a=A(752),C=A(150),d=A(583),f=A(63),w=A(784),g=A(151);Object.defineProperty(s,"applyStateStackDiff",{enumerable:!0,get:function(){return g.applyStateStackDiff}}),Object.defineProperty(s,"diffStateStacksRefEq",{enumerable:!0,get:function(){return g.diffStateStacksRefEq}}),N(A(810),s),s.Registry=class{constructor(v){this._options=v,this._syncRegistry=new d.SyncRegistry(f.Theme.createFromRawTheme(v.theme,v.colorMap),v.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(v,I){this._syncRegistry.setTheme(f.Theme.createFromRawTheme(v,I))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(v,I,l){return this.loadGrammarWithConfiguration(v,I,{embeddedLanguages:l})}loadGrammarWithConfiguration(v,I,l){return this._loadGrammar(v,I,l.embeddedLanguages,l.tokenTypes,new a.BalancedBracketSelectors(l.balancedBracketSelectors||[],l.unbalancedBracketSelectors||[]))}loadGrammar(v){return this._loadGrammar(v,0,null,null,null)}async _loadGrammar(v,I,l,_,u){const h=new w.ScopeDependencyProcessor(this._syncRegistry,v);for(;h.Q.length>0;)await Promise.all(h.Q.map(n=>this._loadSingleGrammar(n.scopeName))),h.processQueue();return this._grammarForScopeName(v,I,l,_,u)}async _loadSingleGrammar(v){return this._ensureGrammarCache.has(v)||this._ensureGrammarCache.set(v,this._doLoadSingleGrammar(v)),this._ensureGrammarCache.get(v)}async _doLoadSingleGrammar(v){const I=await this._options.loadGrammar(v);if(I){const l=typeof this._options.getInjections=="function"?this._options.getInjections(v):void 0;this._syncRegistry.addGrammar(I,l)}}async addGrammar(v,I=[],l=0,_=null){return this._syncRegistry.addGrammar(v,I),await this._grammarForScopeName(v.scopeName,l,_)}_grammarForScopeName(v,I=0,l=null,_=null,u=null){return this._syncRegistry.grammarForScopeName(v,I,l,_,u)}},s.INITIAL=a.StateStackImpl.NULL,s.parseRawGrammar=C.parseRawGrammar},916:(F,s)=>{function A(y){return!!y&&!!y.match(/[\w\.:]+/)}Object.defineProperty(s,"__esModule",{value:!0}),s.createMatchers=void 0,s.createMatchers=function(y,N){const a=[],C=function(g){let v=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,I=v.exec(g);return{next:()=>{if(!I)return null;const l=I[0];return I=v.exec(g),l}}}(y);let d=C.next();for(;d!==null;){let g=0;if(d.length===2&&d.charAt(1)===":"){switch(d.charAt(0)){case"R":g=1;break;case"L":g=-1;break;default:console.log(`Unknown priority ${d} in scope selector`)}d=C.next()}let v=w();if(a.push({matcher:v,priority:g}),d!==",")break;d=C.next()}return a;function f(){if(d==="-"){d=C.next();const g=f();return v=>!!g&&!g(v)}if(d==="("){d=C.next();const g=function(){const v=[];let I=w();for(;I&&(v.push(I),d==="|"||d===",");){do d=C.next();while(d==="|"||d===",");I=w()}return l=>v.some(_=>_(l))}();return d===")"&&(d=C.next()),g}if(A(d)){const g=[];do g.push(d),d=C.next();while(A(d));return v=>N(g,v)}return null}function w(){const g=[];let v=f();for(;v;)g.push(v),v=f();return I=>g.every(l=>l(I))}}},810:(F,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.disposeOnigString=void 0,s.disposeOnigString=function(A){typeof A.dispose=="function"&&A.dispose()}},150:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseRawGrammar=void 0;const y=A(578),N=A(185),a=A(726);s.parseRawGrammar=function(C,d=null){return d!==null&&/\.json$/.test(d)?(f=C,w=d,N.DebugFlags.InDebugMode?a.parseJSON(f,w,!0):JSON.parse(f)):function(g,v){return N.DebugFlags.InDebugMode?y.parseWithLocation(g,v,"$vscodeTextmateLocation"):y.parsePLIST(g)}(C,d);var f,w}},578:(F,s)=>{function A(y,N,a){const C=y.length;let d=0,f=1,w=0;function g(k){if(a===null)d+=k;else for(;k>0;)y.charCodeAt(d)===10?(d++,f++,w=0):(d++,w++),k--}function v(k){a===null?d=k:g(k-d)}function I(){for(;d<C;){let k=y.charCodeAt(d);if(k!==32&&k!==9&&k!==13&&k!==10)break;g(1)}}function l(k){return y.substr(d,k.length)===k&&(g(k.length),!0)}function _(k){let te=y.indexOf(k,d);v(te!==-1?te+k.length:C)}function u(k){let te=y.indexOf(k,d);if(te!==-1){let Y=y.substring(d,te);return v(te+k.length),Y}{let Y=y.substr(d);return v(C),Y}}C>0&&y.charCodeAt(0)===65279&&(d=1);let h=0,n=null,e=[],r=[],i=null;function t(k,te){e.push(h),r.push(n),h=k,n=te}function o(){if(e.length===0)return c("illegal state stack");h=e.pop(),n=r.pop()}function c(k){throw new Error("Near offset "+d+": "+k+" ~~~"+y.substr(d,50)+"~~~")}const m=function(){if(i===null)return c("missing <key>");let k={};a!==null&&(k[a]={filename:N,line:f,char:w}),n[i]=k,i=null,t(1,k)},b=function(){if(i===null)return c("missing <key>");let k=[];n[i]=k,i=null,t(2,k)},E=function(){let k={};a!==null&&(k[a]={filename:N,line:f,char:w}),n.push(k),t(1,k)},R=function(){let k=[];n.push(k),t(2,k)};function L(){if(h!==1)return c("unexpected </dict>");o()}function X(){return h===1||h!==2?c("unexpected </array>"):void o()}function V(k){if(h===1){if(i===null)return c("missing <key>");n[i]=k,i=null}else h===2?n.push(k):n=k}function q(k){if(isNaN(k))return c("cannot parse float");if(h===1){if(i===null)return c("missing <key>");n[i]=k,i=null}else h===2?n.push(k):n=k}function J(k){if(isNaN(k))return c("cannot parse integer");if(h===1){if(i===null)return c("missing <key>");n[i]=k,i=null}else h===2?n.push(k):n=k}function se(k){if(h===1){if(i===null)return c("missing <key>");n[i]=k,i=null}else h===2?n.push(k):n=k}function ee(k){if(h===1){if(i===null)return c("missing <key>");n[i]=k,i=null}else h===2?n.push(k):n=k}function U(k){if(h===1){if(i===null)return c("missing <key>");n[i]=k,i=null}else h===2?n.push(k):n=k}function H(){let k=u(">"),te=!1;return k.charCodeAt(k.length-1)===47&&(te=!0,k=k.substring(0,k.length-1)),{name:k.trim(),isClosed:te}}function z(k){if(k.isClosed)return"";let te=u("</");return _(">"),te.replace(/&#([0-9]+);/g,function(Y,ie){return String.fromCodePoint(parseInt(ie,10))}).replace(/&#x([0-9a-f]+);/g,function(Y,ie){return String.fromCodePoint(parseInt(ie,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(Y){switch(Y){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return Y})}for(;d<C&&(I(),!(d>=C));){const k=y.charCodeAt(d);if(g(1),k!==60)return c("expected <");if(d>=C)return c("unexpected end of input");const te=y.charCodeAt(d);if(te===63){g(1),_("?>");continue}if(te===33){if(g(1),l("--")){_("-->");continue}_(">");continue}if(te===47){if(g(1),I(),l("plist")){_(">");continue}if(l("dict")){_(">"),L();continue}if(l("array")){_(">"),X();continue}return c("unexpected closed tag")}let Y=H();switch(Y.name){case"dict":h===1?m():h===2?E():(n={},a!==null&&(n[a]={filename:N,line:f,char:w}),t(1,n)),Y.isClosed&&L();continue;case"array":h===1?b():h===2?R():(n=[],t(2,n)),Y.isClosed&&X();continue;case"key":he=z(Y),h!==1?c("unexpected <key>"):i!==null?c("too many <key>"):i=he;continue;case"string":V(z(Y));continue;case"real":q(parseFloat(z(Y)));continue;case"integer":J(parseInt(z(Y),10));continue;case"date":se(new Date(z(Y)));continue;case"data":ee(z(Y));continue;case"true":z(Y),U(!0);continue;case"false":z(Y),U(!1);continue}if(!/^plist/.test(Y.name))return c("unexpected opened tag "+Y.name)}var he;return n}Object.defineProperty(s,"__esModule",{value:!0}),s.parsePLIST=s.parseWithLocation=void 0,s.parseWithLocation=function(y,N,a){return A(y,N,a)},s.parsePLIST=function(y){return A(y,null,null)}},583:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SyncRegistry=void 0;const y=A(752);s.SyncRegistry=class{constructor(N,a){this._onigLibPromise=a,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=N}dispose(){for(const N of this._grammars.values())N.dispose()}setTheme(N){this._theme=N}getColorMap(){return this._theme.getColorMap()}addGrammar(N,a){this._rawGrammars.set(N.scopeName,N),a&&this._injectionGrammars.set(N.scopeName,a)}lookup(N){return this._rawGrammars.get(N)}injections(N){return this._injectionGrammars.get(N)}getDefaults(){return this._theme.getDefaults()}themeMatch(N){return this._theme.match(N)}async grammarForScopeName(N,a,C,d,f){if(!this._grammars.has(N)){let w=this._rawGrammars.get(N);if(!w)return null;this._grammars.set(N,y.createGrammar(N,w,a,C,d,f,this,await this._onigLibPromise))}return this._grammars.get(N)}}},666:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CompiledRule=s.RegExpSourceList=s.RegExpSource=s.RuleFactory=s.BeginWhileRule=s.BeginEndRule=s.IncludeOnlyRule=s.MatchRule=s.CaptureRule=s.Rule=s.ruleIdToNumber=s.ruleIdFromNumber=s.whileRuleId=s.endRuleId=void 0;const y=A(807),N=A(784),a=/\\(\d+)/,C=/\\(\d+)/g;s.endRuleId=-1,s.whileRuleId=-2,s.ruleIdFromNumber=function(n){return n},s.ruleIdToNumber=function(n){return n};class d{constructor(e,r,i,t){this.$location=e,this.id=r,this._name=i||null,this._nameIsCapturing=y.RegexSource.hasCaptures(this._name),this._contentName=t||null,this._contentNameIsCapturing=y.RegexSource.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${y.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,r){return this._nameIsCapturing&&this._name!==null&&e!==null&&r!==null?y.RegexSource.replaceCaptures(this._name,e,r):this._name}getContentName(e,r){return this._contentNameIsCapturing&&this._contentName!==null?y.RegexSource.replaceCaptures(this._contentName,e,r):this._contentName}}s.Rule=d;class f extends d{constructor(e,r,i,t,o){super(e,r,i,t),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(e,r){throw new Error("Not supported!")}compile(e,r){throw new Error("Not supported!")}compileAG(e,r,i,t){throw new Error("Not supported!")}}s.CaptureRule=f;class w extends d{constructor(e,r,i,t,o){super(e,r,i,null),this._match=new _(t,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,r){r.push(this._match)}compile(e,r){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,r,i,t){return this._getCachedCompiledPatterns(e).compileAG(e,i,t)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new u,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}s.MatchRule=w;class g extends d{constructor(e,r,i,t,o){super(e,r,i,t),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,r){for(const i of this.patterns)e.getRule(i).collectPatterns(e,r)}compile(e,r){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,r,i,t){return this._getCachedCompiledPatterns(e).compileAG(e,i,t)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new u,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}s.IncludeOnlyRule=g;class v extends d{constructor(e,r,i,t,o,c,m,b,E,R){super(e,r,i,t),this._begin=new _(o,this.id),this.beginCaptures=c,this._end=new _(m||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=b,this.applyEndPatternLast=E||!1,this.patterns=R.patterns,this.hasMissingPatterns=R.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,r){return this._end.resolveBackReferences(e,r)}collectPatterns(e,r){r.push(this._begin)}compile(e,r){return this._getCachedCompiledPatterns(e,r).compile(e)}compileAG(e,r,i,t){return this._getCachedCompiledPatterns(e,r).compileAG(e,i,t)}_getCachedCompiledPatterns(e,r){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new u;for(const i of this.patterns)e.getRule(i).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,r):this._cachedCompiledPatterns.setSource(0,r)),this._cachedCompiledPatterns}}s.BeginEndRule=v;class I extends d{constructor(e,r,i,t,o,c,m,b,E){super(e,r,i,t),this._begin=new _(o,this.id),this.beginCaptures=c,this.whileCaptures=b,this._while=new _(m,s.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=E.patterns,this.hasMissingPatterns=E.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,r){return this._while.resolveBackReferences(e,r)}collectPatterns(e,r){r.push(this._begin)}compile(e,r){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,r,i,t){return this._getCachedCompiledPatterns(e).compileAG(e,i,t)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new u;for(const r of this.patterns)e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,r){return this._getCachedCompiledWhilePatterns(e,r).compile(e)}compileWhileAG(e,r,i,t){return this._getCachedCompiledWhilePatterns(e,r).compileAG(e,i,t)}_getCachedCompiledWhilePatterns(e,r){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new u,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,r||""),this._cachedCompiledWhilePatterns}}s.BeginWhileRule=I;class l{static createCaptureRule(e,r,i,t,o){return e.registerRule(c=>new f(r,c,i,t,o))}static getCompiledRuleId(e,r,i){return e.id||r.registerRule(t=>{if(e.id=t,e.match)return new w(e.$vscodeTextmateLocation,e.id,e.name,e.match,l._compileCaptures(e.captures,r,i));if(e.begin===void 0){e.repository&&(i=y.mergeObjects({},i,e.repository));let o=e.patterns;return o===void 0&&e.include&&(o=[{include:e.include}]),new g(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,l._compilePatterns(o,r,i))}return e.while?new I(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,l._compileCaptures(e.beginCaptures||e.captures,r,i),e.while,l._compileCaptures(e.whileCaptures||e.captures,r,i),l._compilePatterns(e.patterns,r,i)):new v(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,l._compileCaptures(e.beginCaptures||e.captures,r,i),e.end,l._compileCaptures(e.endCaptures||e.captures,r,i),e.applyEndPatternLast,l._compilePatterns(e.patterns,r,i))}),e.id}static _compileCaptures(e,r,i){let t=[];if(e){let o=0;for(const c in e){if(c==="$vscodeTextmateLocation")continue;const m=parseInt(c,10);m>o&&(o=m)}for(let c=0;c<=o;c++)t[c]=null;for(const c in e){if(c==="$vscodeTextmateLocation")continue;const m=parseInt(c,10);let b=0;e[c].patterns&&(b=l.getCompiledRuleId(e[c],r,i)),t[m]=l.createCaptureRule(r,e[c].$vscodeTextmateLocation,e[c].name,e[c].contentName,b)}}return t}static _compilePatterns(e,r,i){let t=[];if(e)for(let o=0,c=e.length;o<c;o++){const m=e[o];let b=-1;if(m.include){const E=N.parseInclude(m.include);switch(E.kind){case 0:case 1:b=l.getCompiledRuleId(i[m.include],r,i);break;case 2:let R=i[E.ruleName];R&&(b=l.getCompiledRuleId(R,r,i));break;case 3:case 4:const L=E.scopeName,X=E.kind===4?E.ruleName:null,V=r.getExternalGrammar(L,i);if(V)if(X){let q=V.repository[X];q&&(b=l.getCompiledRuleId(q,r,V.repository))}else b=l.getCompiledRuleId(V.repository.$self,r,V.repository)}}else b=l.getCompiledRuleId(m,r,i);if(b!==-1){const E=r.getRule(b);let R=!1;if((E instanceof g||E instanceof v||E instanceof I)&&E.hasMissingPatterns&&E.patterns.length===0&&(R=!0),R)continue;t.push(b)}}return{patterns:t,hasMissingPatterns:(e?e.length:0)!==t.length}}}s.RuleFactory=l;class _{constructor(e,r){if(e){const i=e.length;let t=0,o=[],c=!1;for(let m=0;m<i;m++)if(e.charAt(m)==="\\"&&m+1<i){const b=e.charAt(m+1);b==="z"?(o.push(e.substring(t,m)),o.push("$(?!\\n)(?<!\\n)"),t=m+2):b!=="A"&&b!=="G"||(c=!0),m++}this.hasAnchor=c,t===0?this.source=e:(o.push(e.substring(t,i)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=r,this.hasBackReferences=a.test(this.source)}clone(){return new _(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,r){let i=r.map(t=>e.substring(t.start,t.end));return C.lastIndex=0,this.source.replace(C,(t,o)=>y.escapeRegExpCharacters(i[parseInt(o,10)]||""))}_buildAnchorCache(){let e,r,i,t,o=[],c=[],m=[],b=[];for(e=0,r=this.source.length;e<r;e++)i=this.source.charAt(e),o[e]=i,c[e]=i,m[e]=i,b[e]=i,i==="\\"&&e+1<r&&(t=this.source.charAt(e+1),t==="A"?(o[e+1]="",c[e+1]="",m[e+1]="A",b[e+1]="A"):t==="G"?(o[e+1]="",c[e+1]="G",m[e+1]="",b[e+1]="G"):(o[e+1]=t,c[e+1]=t,m[e+1]=t,b[e+1]=t),e++);return{A0_G0:o.join(""),A0_G1:c.join(""),A1_G0:m.join(""),A1_G1:b.join("")}}resolveAnchors(e,r){return this.hasAnchor&&this._anchorCache?e?r?this._anchorCache.A1_G1:this._anchorCache.A1_G0:r?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}s.RegExpSource=_;class u{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,r){this._items[e].source!==r&&(this._disposeCaches(),this._items[e].setSource(r))}compile(e){if(!this._cached){let r=this._items.map(i=>i.source);this._cached=new h(e,r,this._items.map(i=>i.ruleId))}return this._cached}compileAG(e,r,i){return this._hasAnchors?r?i?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,r,i)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,r,i)),this._anchorCache.A1_G0):i?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,r,i)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,r,i)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,r,i){let t=this._items.map(o=>o.resolveAnchors(r,i));return new h(e,t,this._items.map(o=>o.ruleId))}}s.RegExpSourceList=u;class h{constructor(e,r,i){this.regExps=r,this.rules=i,this.scanner=e.createOnigScanner(r)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let r=0,i=this.rules.length;r<i;r++)e.push("   - "+this.rules[r]+": "+this.regExps[r]);return e.join(`
`)}findNextMatchSync(e,r,i){const t=this.scanner.findNextMatchSync(e,r,i);return t?{ruleId:this.rules[t.index],captureIndices:t.captureIndices}:null}}s.CompiledRule=h},63:(F,s,A)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeTrieElement=s.ThemeTrieElementRule=s.ColorMap=s.fontStyleToString=s.ParsedThemeRule=s.parseTheme=s.StyleAttributes=s.ScopeStack=s.Theme=void 0;const y=A(807);class N{constructor(u,h,n){this._colorMap=u,this._defaults=h,this._root=n,this._cachedMatchRoot=new y.CachedFn(e=>this._root.match(e))}static createFromRawTheme(u,h){return this.createFromParsedTheme(f(u),h)}static createFromParsedTheme(u,h){return function(n,e){n.sort((b,E)=>{let R=y.strcmp(b.scope,E.scope);return R!==0?R:(R=y.strArrCmp(b.parentScopes,E.parentScopes),R!==0?R:b.index-E.index)});let r=0,i="#000000",t="#ffffff";for(;n.length>=1&&n[0].scope==="";){let b=n.shift();b.fontStyle!==-1&&(r=b.fontStyle),b.foreground!==null&&(i=b.foreground),b.background!==null&&(t=b.background)}let o=new g(e),c=new d(r,o.getId(i),o.getId(t)),m=new l(new I(0,null,-1,0,0),[]);for(let b=0,E=n.length;b<E;b++){let R=n[b];m.insert(0,R.scope,R.parentScopes,R.fontStyle,o.getId(R.foreground),o.getId(R.background))}return new N(o,c,m)}(u,h)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(u){if(u===null)return this._defaults;const h=u.scopeName,n=this._cachedMatchRoot.get(h).find(e=>function(r,i){if(i.length===0)return!0;for(let t=0;t<i.length;t++){let o=i[t],c=!1;if(o===">"){if(t===i.length-1)return!1;o=i[++t],c=!0}for(;r&&!C(r.scopeName,o);){if(c)return!1;r=r.parent}if(!r)return!1;r=r.parent}return!0}(u.parent,e.parentScopes));return n?new d(n.fontStyle,n.foreground,n.background):null}}s.Theme=N;class a{constructor(u,h){this.parent=u,this.scopeName=h}static push(u,h){for(const n of h)u=new a(u,n);return u}static from(...u){let h=null;for(let n=0;n<u.length;n++)h=new a(h,u[n]);return h}push(u){return new a(this,u)}getSegments(){let u=this;const h=[];for(;u;)h.push(u.scopeName),u=u.parent;return h.reverse(),h}toString(){return this.getSegments().join(" ")}extends(u){return this===u||this.parent!==null&&this.parent.extends(u)}getExtensionIfDefined(u){const h=[];let n=this;for(;n&&n!==u;)h.push(n.scopeName),n=n.parent;return n===u?h.reverse():void 0}}function C(_,u){return u===_||_.startsWith(u)&&_[u.length]==="."}s.ScopeStack=a;class d{constructor(u,h,n){this.fontStyle=u,this.foregroundId=h,this.backgroundId=n}}function f(_){if(!_)return[];if(!_.settings||!Array.isArray(_.settings))return[];let u=_.settings,h=[],n=0;for(let e=0,r=u.length;e<r;e++){let i,t=u[e];if(!t.settings)continue;if(typeof t.scope=="string"){let b=t.scope;b=b.replace(/^[,]+/,""),b=b.replace(/[,]+$/,""),i=b.split(",")}else i=Array.isArray(t.scope)?t.scope:[""];let o=-1;if(typeof t.settings.fontStyle=="string"){o=0;let b=t.settings.fontStyle.split(" ");for(let E=0,R=b.length;E<R;E++)switch(b[E]){case"italic":o|=1;break;case"bold":o|=2;break;case"underline":o|=4;break;case"strikethrough":o|=8}}let c=null;typeof t.settings.foreground=="string"&&y.isValidHexColor(t.settings.foreground)&&(c=t.settings.foreground);let m=null;typeof t.settings.background=="string"&&y.isValidHexColor(t.settings.background)&&(m=t.settings.background);for(let b=0,E=i.length;b<E;b++){let R=i[b].trim().split(" "),L=R[R.length-1],X=null;R.length>1&&(X=R.slice(0,R.length-1),X.reverse()),h[n++]=new w(L,X,e,o,c,m)}}return h}s.StyleAttributes=d,s.parseTheme=f;class w{constructor(u,h,n,e,r,i){this.scope=u,this.parentScopes=h,this.index=n,this.fontStyle=e,this.foreground=r,this.background=i}}s.ParsedThemeRule=w,s.fontStyleToString=function(_){if(_===-1)return"not set";let u="";return 1&_&&(u+="italic "),2&_&&(u+="bold "),4&_&&(u+="underline "),8&_&&(u+="strikethrough "),u===""&&(u="none"),u.trim()};class g{constructor(u){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(u)){this._isFrozen=!0;for(let h=0,n=u.length;h<n;h++)this._color2id[u[h]]=h,this._id2color[h]=u[h]}else this._isFrozen=!1}getId(u){if(u===null)return 0;u=u.toUpperCase();let h=this._color2id[u];if(h)return h;if(this._isFrozen)throw new Error(`Missing color in color map - ${u}`);return h=++this._lastColorId,this._color2id[u]=h,this._id2color[h]=u,h}getColorMap(){return this._id2color.slice(0)}}s.ColorMap=g;const v=Object.freeze([]);class I{constructor(u,h,n,e,r){this.scopeDepth=u,this.parentScopes=h||v,this.fontStyle=n,this.foreground=e,this.background=r}clone(){return new I(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(u){let h=[];for(let n=0,e=u.length;n<e;n++)h[n]=u[n].clone();return h}acceptOverwrite(u,h,n,e){this.scopeDepth>u?console.log("how did this happen?"):this.scopeDepth=u,h!==-1&&(this.fontStyle=h),n!==0&&(this.foreground=n),e!==0&&(this.background=e)}}s.ThemeTrieElementRule=I;class l{constructor(u,h=[],n={}){this._mainRule=u,this._children=n,this._rulesWithParentScopes=h}static _cmpBySpecificity(u,h){if(u.scopeDepth!==h.scopeDepth)return h.scopeDepth-u.scopeDepth;let n=0,e=0;for(;u.parentScopes[n]===">"&&n++,h.parentScopes[e]===">"&&e++,!(n>=u.parentScopes.length||e>=h.parentScopes.length);){const r=h.parentScopes[e].length-u.parentScopes[n].length;if(r!==0)return r;n++,e++}return h.parentScopes.length-u.parentScopes.length}match(u){if(u!==""){let n,e,r=u.indexOf(".");if(r===-1?(n=u,e=""):(n=u.substring(0,r),e=u.substring(r+1)),this._children.hasOwnProperty(n))return this._children[n].match(e)}const h=this._rulesWithParentScopes.concat(this._mainRule);return h.sort(l._cmpBySpecificity),h}insert(u,h,n,e,r,i){if(h==="")return void this._doInsertHere(u,n,e,r,i);let t,o,c,m=h.indexOf(".");m===-1?(t=h,o=""):(t=h.substring(0,m),o=h.substring(m+1)),this._children.hasOwnProperty(t)?c=this._children[t]:(c=new l(this._mainRule.clone(),I.cloneArr(this._rulesWithParentScopes)),this._children[t]=c),c.insert(u+1,o,n,e,r,i)}_doInsertHere(u,h,n,e,r){if(h!==null){for(let i=0,t=this._rulesWithParentScopes.length;i<t;i++){let o=this._rulesWithParentScopes[i];if(y.strArrCmp(o.parentScopes,h)===0)return void o.acceptOverwrite(u,n,e,r)}n===-1&&(n=this._mainRule.fontStyle),e===0&&(e=this._mainRule.foreground),r===0&&(r=this._mainRule.background),this._rulesWithParentScopes.push(new I(u,h,n,e,r))}else this._mainRule.acceptOverwrite(u,n,e,r)}}s.ThemeTrieElement=l},807:(F,s)=>{function A(a){return Array.isArray(a)?function(C){let d=[];for(let f=0,w=C.length;f<w;f++)d[f]=A(C[f]);return d}(a):typeof a=="object"?function(C){let d={};for(let f in C)d[f]=A(C[f]);return d}(a):a}Object.defineProperty(s,"__esModule",{value:!0}),s.performanceNow=s.CachedFn=s.escapeRegExpCharacters=s.isValidHexColor=s.strArrCmp=s.strcmp=s.RegexSource=s.basename=s.mergeObjects=s.clone=void 0,s.clone=function(a){return A(a)},s.mergeObjects=function(a,...C){return C.forEach(d=>{for(let f in d)a[f]=d[f]}),a},s.basename=function a(C){const d=~C.lastIndexOf("/")||~C.lastIndexOf("\\");return d===0?C:~d==C.length-1?a(C.substring(0,C.length-1)):C.substr(1+~d)};let y=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function N(a,C){return a<C?-1:a>C?1:0}s.RegexSource=class{static hasCaptures(a){return a!==null&&(y.lastIndex=0,y.test(a))}static replaceCaptures(a,C,d){return a.replace(y,(f,w,g,v)=>{let I=d[parseInt(w||g,10)];if(!I)return f;{let l=C.substring(I.start,I.end);for(;l[0]===".";)l=l.substring(1);switch(v){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}})}},s.strcmp=N,s.strArrCmp=function(a,C){if(a===null&&C===null)return 0;if(!a)return-1;if(!C)return 1;let d=a.length,f=C.length;if(d===f){for(let w=0;w<d;w++){let g=N(a[w],C[w]);if(g!==0)return g}return 0}return d-f},s.isValidHexColor=function(a){return!!(/^#[0-9a-f]{6}$/i.test(a)||/^#[0-9a-f]{8}$/i.test(a)||/^#[0-9a-f]{3}$/i.test(a)||/^#[0-9a-f]{4}$/i.test(a))},s.escapeRegExpCharacters=function(a){return a.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},s.CachedFn=class{constructor(a){this.fn=a,this.cache=new Map}get(a){if(this.cache.has(a))return this.cache.get(a);const C=this.fn(a);return this.cache.set(a,C),C}},s.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},D={};return function F(s){var A=D[s];if(A!==void 0)return A.exports;var y=D[s]={exports:{}};return B[s].call(y.exports,y,y.exports,F),y.exports}(625)})())})(Ue);var De=Ue.exports;class nt{constructor(G){_e(this,"monaco");_e(this,"registry");_e(this,"tokensProviderCache");this.config=G;const{grammars:B,fetchGrammar:D,theme:F,onigLib:s,monaco:A}=G;this.monaco=A,this.registry=new De.Registry({onigLib:s,async loadGrammar(y){if(B[y]==null)return null;const{type:a,grammar:C}=await D(y);return De.parseRawGrammar(C,`grammar.${a}`)},getInjections(y){const N=B[y];return N?N.injections:void 0},theme:F}),this.tokensProviderCache=new rt(this.registry)}injectCSS(){const B=this.registry.getColorMap().map(Ye.Format.CSS.parseHex);Ke.setColorMap(B);const D=Qe(B),F=st();F.innerHTML=D}setTheme(G){this.registry.setTheme(G)}async fetchLanguageInfo(G){const[B,D]=await Promise.all([this.getTokensProviderForLanguage(G),this.config.fetchConfiguration(G)]);return{tokensProvider:B,configuration:D}}getTokensProviderForLanguage(G){const B=this.getScopeNameForLanguage(G);if(B==null)return Promise.resolve(null);const D=this.monaco.languages.getEncodedLanguageId(G);return this.tokensProviderCache.createEncodedTokensProvider(B,D)}getScopeNameForLanguage(G){for(const[B,D]of Object.entries(this.config.grammars))if(D.language===G)return B;return null}}class ke{constructor(G){this.stateStack=G}clone(){return new ke(this.stateStack)}equals(G){return G instanceof ke&&(G===this||G.stateStack===this.stateStack)}}class rt{constructor(G){_e(this,"scopeNameToGrammar",new Map);this.registry=G}async createEncodedTokensProvider(G,B){const D=await this.getGrammar(G,B);return{getInitialState(){return new ke(De.INITIAL)},tokenizeEncoded(F,s){const A=D.tokenizeLine2(F,s.stateStack);return{endState:new ke(A.ruleStack),tokens:A.tokens}},tokenize(F,s){const A=D.tokenizeLine(F,s.stateStack);return{endState:new ke(A.ruleStack),tokens:A.tokens.map(y=>({startIndex:y.startIndex,scopes:y.scopes.reverse().join(" ")}))}}}}getGrammar(G,B){const D=this.scopeNameToGrammar.get(G);if(D!=null)return D;const F={},s=this.registry.loadGrammarWithConfiguration(G,B,F).then(A=>{if(A)return A;throw Error(`failed to load grammar for ${G}`)});return this.scopeNameToGrammar.set(G,s),s}}function st(){var B;const Q=document.querySelector("style.textmate-colors")||document.createElement("style");Q.classList.contains("textmate-colors")||Q.classList.add("textmate-colors");const G=document.getElementsByClassName("monaco-colors")[0];if(G)(B=G.parentElement)==null||B.insertBefore(Q,G.nextSibling);else{let{head:D}=document;D==null&&(D=document.getElementsByTagName("head")[0]),D==null||D.appendChild(Q)}return Q}function it(Q,G,B){for(const D of Q){const{id:F}=D;B.languages.register(D),B.languages.onLanguage(F,async()=>{const{tokensProvider:s,configuration:A}=await G(F);s!=null&&B.languages.setTokensProvider(F,s),A!=null&&B.languages.setLanguageConfiguration(F,A)})}}class ct{constructor(G,B,D){_e(this,"provider");_e(this,"fetchGrammar",async G=>{const{path:B}=this.grammars[G],D=`/grammars/${B}`,s=await(await fetch(D)).text();return{type:B.endsWith(".json")?"json":"plist",grammar:s}});_e(this,"fetchConfiguration",async G=>{const B=`/configurations/${G}.json`,F=await(await fetch(B)).text();return Ze(F)});this.languages=G,this.grammars=B,this.onigurumPath=D}async loadVSCodeOnigurumWASM(){const G=await fetch(this.onigurumPath);return G.headers.get("content-type")==="application/wasm"?G:await G.arrayBuffer()}async register(G,B){const D=await this.loadVSCodeOnigurumWASM();await Be.loadWASM(D);const F=Promise.resolve({createOnigScanner:Be.createOnigScanner,createOnigString:Be.createOnigString});this.provider=new nt({grammars:this.grammars,fetchGrammar:this.fetchGrammar,configurations:this.languages.map(s=>s.id),fetchConfiguration:this.fetchConfiguration,theme:B,onigLib:F,monaco:G}),it(this.languages,s=>this.provider.fetchLanguageInfo(s),G)}setTheme(G){var B;(B=this.provider)==null||B.setTheme(G)}injectCSS(){var G;(G=this.provider)==null||G.injectCSS()}}export{ct as default};
